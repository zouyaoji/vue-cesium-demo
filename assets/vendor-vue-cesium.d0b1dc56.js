import{bw as e,bZ as t,bK as i,c0 as n,bH as o,bE as a,c1 as r,c2 as s,c3 as l,c4 as c,c5 as u,c6 as d,c7 as p,c8 as m,bB as v,bI as h,c9 as g,bF as f,bx as y,bG as b,bS as C,bJ as w,bN as O,bO as x,bM as S,bP as _,bQ as E,bT as P,ca as T,bL as M,cb as I,cc as j,cd as L,a3 as A,aT as D,bA as k,ce as R,cf as B}from"./vendor.28f65128.js";import{i as N,a as V,f as z,c as F,g as H,b as U,d as W,e as G,h as $,r as Z,j as Y}from"./vendor-lodash.42443f79.js";import{r as q,i as X}from"./vendor-echarts.1762dbdd.js";const Q="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,J=Q?Symbol("VueCesium"):"VueCesium",K=Q?Symbol("_vc_f_"):"_vc_f_",ee=Symbol(),te=e=>Object.keys(e),ie=e();function ne(e,t){const n=o()?a(ee,ie):ie;return e?i((()=>{var i,o;return null!=(o=null==(i=n.value)?void 0:i[e])?o:t})):n}const oe=(e,a,r=!1)=>{var s;const l=!!o(),c=l?ne():void 0,u=null!=(s=null==a?void 0:a.provide)?s:l?t:void 0;if(!u)return;const d=i((()=>{const t=n(e);return c?ae(c.value,t):t}));return u(ee,d),!r&&ie.value||(ie.value=d.value),d},ae=(e,t)=>{var i;const n=[...new Set([...te(e),...te(t)])],o={};for(const a of n)o[a]=null!=(i=t[a])?i:e[a];return o};function re(e){const t=Object.getPrototypeOf(e),i={};return Object.setPrototypeOf(i,t),Object.keys(e).forEach((t=>{const n=ue(e[t]);if(e[t]&&c(e[t])||e[t]instanceof Element)i[t]=e[t];else if(e[t]&&"object"==typeof e[t]&&!Cesium[n]){const n=re(e[t]);Object.keys(n).length&&(i[t]=n)}else""!==e[t]&&void 0!==e[t]&&null!==e[t]&&(i[t]=e[t])})),i}function se(e){if(N(e)||V(e))return!0;if(e instanceof Element)return!1;return 0===Object.keys(e).length}const le=r;function ce(e,t){if("object"!=typeof e||null===e)return!1;let i=Object.getPrototypeOf(e);for(;;){if(null===i)return!1;if(i===(null==t?void 0:t.prototype))return!0;i=Object.getPrototypeOf(i)}}function ue(e){const t=function(e){let t;const i=Object.keys(Cesium);for(let n=0;n<i.length;n++){const o=i[n];if(ce(e,Cesium[o])){t=o;break}}return t}(e);return t||(e&&e.constructor?e.constructor.name:typeof e)}function de(e,t){return null!=e?e:t}function pe(e,t=[]){const i={};return Object.keys(e).forEach((n=>{if(-1===t.indexOf(n)){const t=e[n];i[n]=s(t)?void 0:l(t)?s(t.default)?t.default():t.default:t}})),i}const me=(e,t,i=[])=>{for(const n in t)e[n]||-1!==i.indexOf(n)||(e[n]=t[n])};function ve(e){var t,i,n,o;return{log:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ${null==(t=null==e?void 0:e.proxy)?void 0:t.$options.name}`),warn:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] WARN ${null==(i=null==e?void 0:e.proxy)?void 0:i.$options.name}`),error:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ERR ${null==(n=null==e?void 0:e.proxy)?void 0:n.$options.name}`),debug:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] Debug ${null==(o=null==e?void 0:e.proxy)?void 0:o.$options.name}`),capsule:(e,t,i="primary")=>{},success:e=>{},warning:e=>{},danger:e=>{},primary:e=>{}}}ve(void 0);const he=Symbol("INSTALLED_KEY"),ge=Object.prototype.hasOwnProperty;function fe(...e){let t;return"object"!=typeof e[e.length-1]&&(t=e.pop()),e.slice(1).reduce(((e,i,n)=>function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(t).forEach((function(n){if(!i&&ge.call(e,n))return;const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o)})),e}(e,i,t)),e[0])}function ye(e,t){return null!==e.vnode.props&&void 0!==e.vnode.props[t]}function be(e,t){const i=e.vnode.props;if(null===i)return;const n=Object.keys(i);return i[n[z(n,(e=>e.includes(`on${d(t)}`)||e.includes(`on${d(F(t))}`)))]]}function Ce(e){return e.value}function we(e){var t;const i=e.parent;return i.cesiumClass||"VcViewer"===(null==(t=i.proxy)?void 0:t.$options.name)?i:we(i)}function Oe(e,t=!1){const{Cartesian2:i,CallbackProperty:n}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof n)return e;if(l(e)&&p(e,"x")&&p(e,"y")){const t=e;return new i(t.x,t.y)}return c(e)?new i(e[0],e[1]):s(e)?new n(e,t):void 0}function xe(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:a,SampledPositionProperty:r,CompositePositionProperty:u,ConstantPositionProperty:d,TimeIntervalCollectionPositionProperty:m}=Cesium;if(e instanceof o||e instanceof n||e instanceof r||e instanceof u||e instanceof d||e instanceof m)return e;if(t=t||a.WGS84,l(e)){if(p(e,"x")&&p(e,"y")&&p(e,"z")){const t=e;return new o(t.x,t.y,t.z)}if(p(e,"lng")&&p(e,"lat")){const i=e;return o.fromDegrees(i.lng,i.lat,i.height||0,t)}}return c(e)?o.fromDegrees(e[0],e[1],e[2]||0,t):s(e)?new n(e,i):void 0}function Se(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:a}=Cesium;if(e instanceof n)return e;if(s(e))return new n(e,i);if(t=t||a.WGS84,c(e)){if(c(e[0])||l(e[0])){const i=[];return e.forEach((e=>{i.push(xe(e,t))})),i}return o.fromDegreesArrayHeights(e,t)}}function _e(e,t){const{CallbackProperty:i}=Cesium;if(e instanceof i)return e;if(s(e))return new i(e,t);if(c(e)){const t=[];return e.forEach((e=>{t.push(Oe(e))})),t}}function Ee(e,t=!1){const{CallbackProperty:i,Quaternion:n,VelocityOrientationProperty:o}=Cesium;if(e instanceof n||e instanceof i||e instanceof o)return e;if(l(e)&&p(e,"x")&&p(e,"y")){const t=e;return new n(t.x,t.y,t.z,t.w)}return c(e)?new n(e[0],e[1],e[2],e[3]):s(e)?new i(e,t):void 0}function Pe(e,t){e.forEach((e=>{e.positions=Se(e.positions,t),e.holes&&Pe(e.holes,t)}))}function Te(e,t,i=!1){var n;const{PolygonHierarchy:o,CallbackProperty:a}=Cesium;if(e instanceof o||e instanceof a)return e;if(s(e))return new a(e,i);if(c(e)&&e.length>=3){return new o(Se(e,t))}if(l(e)&&p(e,"positions")){const i=e;return i.positions=Se(i.positions,t),(null==(n=i.holes)?void 0:n.length)&&Pe(i.holes,t),i}}function Me(e,t=!1){const{NearFarScalar:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(l(e)&&p(e,"near")&&p(e,"far")){const t=e;return new i(t.near,t.nearValue||0,t.far,t.farValue||1)}return c(e)?new i(e[0],e[1],e[2],e[3]):s(e)?new n(e,t):void 0}function Ie(e,t=!1){const{Color:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(u(e))return i.fromCssColorString(e);if(l(e)){if(p(e,"red")){const t=e;return i.fromBytes(t.red,t.green||255,t.blue||255,t.alpha||255)}if(p(e,"x")){const t=e;return new i(t.x,t.y||1,t.z||1,t.w||1)}}return c(e)?i.fromBytes(e[0],e[1],e[2],e[3]||255):s(e)?new n(e,t):void 0}function je(e){var t;const i=null==(t=null==this?void 0:this.proxy)?void 0:t.$options.name;if(i&&(-1!==i.indexOf("Graphics")||-1!==i.indexOf("Datasource")||"VcOverlayDynamic"===i||"VcEntity"===i))return function(e,t=!1){const{CallbackProperty:i,Color:n,CheckerboardMaterialProperty:o,ColorMaterialProperty:a,GridMaterialProperty:r,ImageMaterialProperty:d,PolylineArrowMaterialProperty:m,PolylineDashMaterialProperty:v,PolylineGlowMaterialProperty:h,PolylineOutlineMaterialProperty:g,StripeMaterialProperty:f,StripeOrientation:y}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof a||e instanceof d||e instanceof m||e instanceof v||e instanceof h||e instanceof g||e instanceof f||-1!==ue(e).indexOf("MaterialProperty"))return e;if(u(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new d({image:e,repeat:Oe({x:1,y:1}),color:n.WHITE,transparent:!0});if(c(e)||u(e))return new a(Ie(e));if(l(e)&&p(e,"fabric")){const t=e;switch(t.fabric.type){case"Image":return new d({image:t.fabric.uniforms.image,repeat:Oe(t.fabric.uniforms.repeat||{x:1,y:1}),color:Ie(t.fabric.uniforms.color)||n.WHITE,transparent:t.fabric.uniforms.transparent||!1});case"Color":return new a(Ie(t.fabric.uniforms.color||n.WHITE));case"PolylineArrow":return new m(Ie(t.fabric.uniforms.color||n.WHITE));case"PolylineDash":return new v({color:Ie(t.fabric.uniforms.color||"white")||n.WHITE,gapColor:Ie(t.fabric.uniforms.gapColor)||n.TRANSPARENT,dashLength:t.fabric.uniforms.taperPower||16,dashPattern:t.fabric.uniforms.taperPower||255});case"PolylineGlow":return new h({color:Ie(t.fabric.uniforms.color)||n.WHITE,glowPower:t.fabric.uniforms.glowPower||.25,taperPower:t.fabric.uniforms.taperPower||1});case"PolylineOutline":return new g({color:Ie(t.fabric.uniforms.color)||n.WHITE,outlineColor:Ie(t.fabric.uniforms.outlineColor)||n.BLACK,outlineWidth:t.fabric.uniforms.outlineWidth||1});case"Checkerboard":return new o({evenColor:Ie(t.fabric.uniforms.evenColor)||n.WHITE,oddColor:Ie(t.fabric.uniforms.oddColor)||n.BLACK,repeat:Oe(t.fabric.uniforms.repeat||{x:2,y:2})});case"Grid":return new r({color:Ie(t.fabric.uniforms.color)||n.WHITE,cellAlpha:t.fabric.uniforms.cellAlpha||.1,lineCount:Oe(t.fabric.uniforms.lineCount||{x:8,y:8}),lineThickness:Oe(t.fabric.uniforms.lineThickness||{x:1,y:1}),lineOffset:Oe(t.fabric.uniforms.lineOffset||{x:0,y:0})});case"Stripe":return new f({orientation:t.fabric.uniforms.orientation||y.HORIZONTAL,evenColor:Ie(t.fabric.uniforms.evenColor||"white"),oddColor:Ie(t.fabric.uniforms.oddColor||"black"),offset:t.fabric.uniforms.offset||0,repeat:t.fabric.uniforms.repeat||1})}}return s(e)?new i(e,t):e}(e);const{Material:n,combine:o}=Cesium;if(e instanceof n)return e;if(l(e)&&p(e,"fabric")){const t=e=>{for(const i in e)if(!c(e[i])&&l(e[i]))t(e[i]);else if(-1!==i.toLocaleLowerCase().indexOf("color")&&!se(e[i])){const t=Ie(e[i]);e[i]=o(t,t,!0)}};return t(e),new n(e)}if(c(e)||u(e)){const t=n.fromType("Color");return t.uniforms.color=Ie(e),t}}function Le(e){var t;const{Appearance:i,DebugAppearance:n,MaterialAppearance:o,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:r,PerInstanceColorAppearance:s,PolylineMaterialAppearance:c}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof a||e instanceof r||e instanceof s||e instanceof c||-1!==ue(e).indexOf("Appearance"))return e;if(l(e)&&p(e,"type")){const i={...e.options};return(null==(t=e.options)?void 0:t.material)&&(i.material=je.call(this,e.options.material)),new Cesium[e.type]({...i})}}function Ae(e,t=!1){const{Rectangle:i,RectangleGraphics:n,CallbackProperty:o}=Cesium;if(e instanceof n||e instanceof i||e instanceof o)return e;if(c(e))return i.fromDegrees(e[0],e[1],e[2],e[3]);if(l(e)){if(p(e,"west")){const t=e;return i.fromDegrees(t.west,t.south,t.east,t.north)}if(p(e,"x")){const t=e;return new i(t.x,t.y,t.z,t.w)}}return s(e)?new o(e,t):void 0}function De(e,t=!1){const{BoundingRectangle:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(l(e)&&p(e,"x")){const t=e;return new i(t.x,t.y,t.width,t.height)}return c(e)?new i(e[0],e[1],e[2],e[3]):s(e)?new n(e,t):void 0}function ke(e,t){const{Math:i,Rectangle:n}=Cesium;let o,a={};if(p(e,"position")){const n=e.position;o=xe(n,t),a=p(n,"lng")&&p(n,"lat")||c(n)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}else if(p(e,"rectangle")){const t=e.retangle;o=Ae(t),n.validate(o),a=p(t,"west")&&p(t,"south")&&p(t,"east")&&p(t,"north")||c(t)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}return{destination:o,orientation:a}}function Re(e,t){const{destination:i,orientation:n}=ke(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function Be(e,t,i){const{destination:n,orientation:o}=ke(t,e.scene.globe.ellipsoid);e.camera.flyTo({...i,destination:(null==i?void 0:i.destination)||n,orientation:(null==i?void 0:i.orientation)||o})}function Ne(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;return new n((i=i||o.WGS84).cartesianToCartographic(e),i.cartesianToCartographic(t)).surfaceDistance}function Ve(e,t,i,n){const{HeadingPitchRoll:o,Transforms:a,Matrix4:r,Cartesian3:s,Cartesian4:l,Quaternion:c,Cartographic:u,Ellipsoid:d}=Cesium;n=n||d.WGS84;const p=new o(t,0,0),m=new s(1,1,1),v=a.headingPitchRollToFixedFrame(e,p),h=r.getColumn(v,1,new l),g=new s(h.x,h.y,h.z),f=c.fromAxisAngle(g,i*n.oneOverRadii.x),y=r.fromTranslationQuaternionRotationScale(s.ZERO,f,m),b=r.multiplyByPoint(y,e,new s),C=u.fromCartesian(e,n),w=u.fromCartesian(b,n);return w.height=C.height,u.toCartesian(w,n)}function ze(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:a}=Cesium,r=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!N(r)&&o(r)){const e=r.indices,i=r.attributes.position.values;for(let n=0;n<e.length;n+=3){const o=e[n],r=e[n+1],s=e[n+2];t+=Fe(a.unpack(i,3*o,{}),a.unpack(i,3*r,{}),a.unpack(i,3*s,{}))}}return t}const Fe=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),a=n.subtract(i,t,{}),r=n.cross(o,a,o);return.5*n.magnitude(r)};function He(e){const{JulianDate:t}=Cesium;return e instanceof t?e:u(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function Ue(e){const{HeadingPitchRange:t,Math:i}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(i.toRadians(e[0])||0,i.toRadians(e[1])||0,e[2]||0):l(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function We(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.atan2(r.x,r.y))}function Ge(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.asin(r.z))}function $e(e,t,i,n=[]){const{Cartesian3:o,Ray:a,defined:r}=Cesium,s=new a(e,o.normalize(o.subtract(t,e,new o),new o)),l=i.scene.pickFromRay(s,n);if(r(l)&&r(l.position)){return l.position}}function Ze(e){const t=-40467.74;return Math.round(t+80955.31/(1+Math.pow(e/91610.74,7096758e-11)))}const Ye={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe,deep:!0}}},qe={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe,deep:!0}}},Xe={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ee}}},Qe={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:xe}}},Je={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ie}}},Ke={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ie}}},et={disableDepthTestDistance:[Number,Object,Function]},tt={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{DistanceDisplayCondition:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(l(e)&&p(e,"near")&&p(e,"far")){const t=e;return new i(t.near,t.far)}return c(e)?new i(e[0],e[1]):s(e)?new n(e,t):void 0}}}},it={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:xe}}},nt={height:[Number,Object,Function]},ot={heightReference:{type:[Number,Object,Function]}},at={horizontalOrigin:{type:[Number,Object,Function],default:0}},rt={image:[String,Object,HTMLCanvasElement,Function]},st={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:De}}},lt={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>c(e)?2===e.length:m(e)?p(e,"x")&&p(e,"y"):!!s(e),watcherOptions:{cesiumObjectBuilder:Oe}}},ct={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},ut={rotation:{type:[Number,Object,Function],default:0}},dt={scale:{type:[Number,Object,Function],default:1}},pt={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},mt={show:{type:[Boolean,Object,Function],default:!0}},vt={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},ht={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},gt={verticalOrigin:{type:[Number,Object,Function],default:0}},ft={width:[Number,Object,Function]},yt={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe}}},bt={fill:{type:[Boolean,Object,Function],default:!0}},Ct={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:je}}},wt={outline:{type:[Boolean,Object,Function],default:!1}},Ot={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:Ie}}},xt={outlineWidth:{type:[Number,Object,Function],default:1}},St={shadows:[Number,Object,Function]},_t={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Se,exclude:"_callback",deep:!0}}},Et={extrudedHeight:[Number,Object,Function]},Pt={extrudedHeightReference:[Number,Object,Function]},Tt={cornerType:{type:[Number,Object,Function],default:0}},Mt={granularity:[Number,Object,Function]},It={classificationType:{type:[Number,Object,Function]}},jt={zIndex:[Number,Object,Function]},Lt={length:[Number,Object,Function]},At={topRadius:[Number,Object,Function]},Dt={bottomRadius:[Number,Object,Function]},kt={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Rt={slices:{type:[Number,Object,Function],default:128}},Bt={semiMajorAxis:[Number,Object,Function]},Nt={semiMinorAxis:[Number,Object,Function]},Vt={stRotation:{type:[Number,Object,Function],default:0}},zt={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe}}},Ft={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe}}},Ht={minimumClock:{type:[Number,Object,Function],default:0}},Ut={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},Wt={minimumCone:{type:[Number,Object,Function],default:0}},Gt={maximumCone:{type:[Number,Object,Function],default:Math.PI}},$t={stackPartitions:{type:[Number,Object,Function],default:64}},Zt={slicePartitions:{type:[Number,Object,Function],default:64}},Yt={subdivisions:{type:[Number,Object,Function],default:128}},qt={text:[String,Object,Function]},Xt={font:{type:[String,Object,Function],default:"30px sans-serif"}},Qt={labelStyle:{type:[Number,Object,Function],default:0}},Jt={showBackground:{type:[Boolean,Object,Function],default:!1}},Kt={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:Ie}}},ei={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:Oe}}},ti={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ie}}},ii={uri:[String,Object,Function]},ni={minimumPixelSize:{type:[Number,Object,Function],default:0}},oi={maximumScale:[Number,Object,Function]},ai={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},ri={clampAnimations:{type:[Boolean,Object,Function],default:!0}},si={clampAnimations:{type:[Boolean,Object,Function],default:!0}},li={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ie}}},ci={silhouetteSize:{type:[Number,Object,Function],default:0}},ui={colorBlendMode:{type:[Number,Object,Function],default:0}},di={colorBlendAmount:{type:[Number,Object,Function],default:.5}},pi={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:Oe}}},mi={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ie}}},vi={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{TranslationRotationScale:i,CallbackProperty:n}=Cesium;if(e instanceof n||e instanceof i)return e;if(l(e)&&p(e,"translation")){const t=e;return new i(xe(t.translation),Ee(t.rotation),xe(t.scale))}return c(e)?new i(xe(e[0]),Ee(e[1]),xe(e[2])):s(e)?new n(e,t):e}}}},hi={articulations:[Object,Function]},gi={clippingPlanes:[Object,Function]},fi={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{Cartesian3:i,Plane:n,PlaneGraphics:o,CallbackProperty:a}=Cesium;if(e instanceof o||e instanceof n||e instanceof a)return e;if(l(e)&&p(e,"normal")){const t=e;return i.normalize(xe(t.normal),t.normal),new n(t.normal,t.distance)}if(c(e)){const t=xe(e[0]);return new n(i.normalize(t,new i),e[1])}return s(e)?new a(e,t):void 0}}}},yi={pixelSize:{type:[Number,Object,Function],default:1}},bi={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Te,deep:!0,exclude:"_callback"}}},Ci={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},wi={closeTop:{type:[Boolean,Object,Function],default:!0}},Oi={closeBottom:{type:[Boolean,Object,Function],default:!0}},xi={arcType:{type:[Number,Object,Function],default:1}},Si={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:je}}},_i={clampToGround:{type:[Boolean,Object,Function],default:!1}},Ei={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:_e}}},Pi={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ae}}},Ti={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},Mi={minimumHeights:[Array,Object,Function]},Ii={maximumHeights:[Array,Object,Function]},ji={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ae}}},Li={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ie}}},Ai={url:[String,Object]},Di={token:String},ki={tileDiscardPolicy:Object},Ri={layers:String},Bi={enablePickFeatures:{type:Boolean,default:!0}},Ni={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ae}}},Vi={tilingScheme:Object},zi={ellipsoid:Object},Fi={credit:{type:[String,Object],default:""}},Hi={tileWidth:{type:Number,default:256}},Ui={tileHeight:{type:Number,default:256}},Wi={maximumLevel:Number},Gi={minimumLevel:{type:Number,default:0}},$i={fileExtension:{type:String,default:"png"}},Zi={accessToken:String},Yi={format:{type:String,default:"png"}},qi={subdomains:[String,Array]},Xi={getFeatureInfoFormats:Array},Qi={clock:Object},Ji={times:Object},Ki={projectionTransforms:{type:[Boolean,Object],default:!1}},en={allowPicking:{type:Boolean,default:!0}},tn={asynchronous:{type:Boolean,default:!0}},nn={debugShowShadowVolume:{type:Boolean,default:!1}},on={releaseGeometryInstances:{type:Boolean,default:!0}},an={interleave:{type:Boolean,default:!1}},rn={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Le,deep:!0}}},sn={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Le,deep:!0}}},ln={geometryInstances:[Array,Object]},cn={vertexCacheOptimize:{type:Boolean,default:!1}},un={compressVertices:{type:Boolean,default:!0}},dn={modelMatrix:Object},pn={debugShowBoundingVolume:{tyep:Boolean,default:!1}},mn={scene:Object},vn={blendOption:{type:Number,default:2}},hn={id:null},gn={loop:{type:Boolean,default:!1}},fn={debugWireframe:{type:Boolean,default:!1}},yn={vertexFormat:Object},bn={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:xe}}},Cn={radius:Number},wn={frustum:Object},On={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:xe}}},xn={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Te,deep:!0}}},Sn={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ie}}},_n={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ie}}},En={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Oe}}},Pn={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Oe}}},Tn={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Oe}}},Mn={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:_e}}},In={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Se}}},jn={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:xe}}},Ln={luminanceAtZenith:{type:Number,default:.2}},An={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:Se}}},Dn={specularEnvironmentMaps:String},kn={backFaceCulling:{type:Boolean,default:!0}},Rn={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:function(e){if(c(e)){const t=[];return e.forEach((e=>{t.push(Ie(e))})),t}return e}}}},Bn={data:{type:[String,Object],required:!0}},Nn={sourceUri:{type:[String,Object]}},Vn={options:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){var t;const i={};return"VcDatasourceGeojson"===(null==(t=this.proxy)?void 0:t.$options.name)?(Object.assign(i,e),i&&i.markerColor&&(i.markerColor=Ie(i.markerColor)),i&&i.stroke&&(i.stroke=Ie(i.stroke)),i&&i.fill&&(i.fill=Ie(i.fill)),i):e},deep:!0}}},zn={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:Ie}}},Fn={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:Ie}}},Hn={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:De}}},Un={enableMouseEvent:{type:Boolean,default:!0}},Wn=Object.freeze(Object.defineProperty({__proto__:null,accessToken:Zi,alignedAxis:Qe,allowPicking:en,appearance:rn,arcType:xi,articulations:hi,asynchronous:tn,backFaceCulling:kn,backgroundColor:Kt,backgroundPadding:ei,blendOption:vn,bottomRadius:Dt,center:bn,clampAnimations:si,clampToGround:_i,classificationType:It,clearColor:Fn,clippingPlanes:gi,clock:Qi,closeBottom:Oi,closeTop:wi,color:Je,colorBlendAmount:di,colorBlendMode:ui,colorToAlpha:Li,colors:Rn,compressVertices:un,coordinates:Pi,cornerType:Tt,credit:Fi,cutoutRectangle:ji,data:Bn,debugShowBoundingVolume:pn,debugShowShadowVolume:nn,debugWireframe:fn,depthFailAppearance:sn,depthFailColor:Ke,depthFailMaterial:Si,dimensions:yt,disableDepthTestDistance:et,distanceDisplayCondition:tt,ellipsoid:zi,enableMouseEvent:Un,enablePickFeatures:Bi,endColor:_n,extrudedHeight:Et,extrudedHeightReference:Pt,eyeOffset:it,fileExtension:$i,fill:bt,fillColor:ti,font:Xt,format:Yi,frustum:wn,geometryInstances:ln,getFeatureInfoFormats:Xi,glowColor:zn,granularity:Mt,height:nt,heightReference:ot,hierarchy:bi,horizontalOrigin:at,id:hn,image:rt,imageBasedLightingFactor:pi,imageSize:Tn,imageSubRegion:st,incrementallyLoadTextures:ai,innerRadii:Ft,interleave:an,labelStyle:Qt,layers:Ri,length:Lt,lightColor:mi,lightColor2:jn,loop:gn,luminanceAtZenith:Ln,material:Ct,maximumClock:Ut,maximumCone:Gt,maximumHeights:Ii,maximumImageSize:Pn,maximumLevel:Wi,maximumScale:oi,maximumScreenSpaceError:Ti,minimumClock:Ht,minimumCone:Wt,minimumHeights:Mi,minimumImageSize:En,minimumLevel:Gi,minimumPixelSize:ni,modelMatrix:dn,nodeTransformations:vi,numberOfVerticalLines:kt,options:Vn,orientation:Xe,origin:On,outline:wt,outlineColor:Ot,outlineWidth:xt,perPositionHeight:Ci,pixelOffset:lt,pixelOffsetScaleByDistance:ct,pixelSize:yi,plane:fi,polygonHierarchy:xn,polylinePositions:In,position:Ye,positions:_t,projectionTransforms:Ki,radii:zt,radius:Cn,rectangle:Ni,releaseGeometryInstances:on,rotation:ut,runAnimations:ri,scale:dt,scaleByDistance:pt,scene:mn,scissorRectangle:Hn,semiMajorAxis:Bt,semiMinorAxis:Nt,shadows:St,shape:Ei,shapePositions:Mn,show:mt,showBackground:Jt,silhouetteColor:li,silhouetteSize:ci,sizeInMeters:vt,slicePartitions:Zt,slices:Rt,sourceUri:Nn,specularEnvironmentMaps:Dn,sphericalHarmonicCoefficients:An,stRotation:Vt,stackPartitions:$t,startColor:Sn,subdivisions:Yt,subdomains:qi,text:qt,tileDiscardPolicy:ki,tileHeight:Ui,tileWidth:Hi,tilingScheme:Vi,times:Ji,token:Di,topRadius:At,translucencyByDistance:ht,uri:ii,url:Ai,vertexCacheOptimize:cn,vertexFormat:yn,verticalOrigin:gt,viewFrom:qe,width:ft,zIndex:jt},Symbol.toStringTag,{value:"Module"}));var Gn={name:"zh-hans",nativeName:"中文(简体)",vc:{loadError:"加载失败，必须作为 VcViewer 的子组件加载。",navigation:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环。\n重置视图：双击罗盘外环。",innerTip:"翻转视图：由内环向外环拖拽罗盘。\n 或者按住 Ctrl 键的同时拖拽地图。",title:"按住鼠标拖拽旋转相机。"},zoomCotrol:{zoomInTip:"放大",zoomResetTip:"重置视图",zoomOutTip:"缩小"},print:{printTip:"场景截图/打印",printViewTitle:"打印预览",credit:"地图版权",screenshot:"场景截图"},myLocation:{myLocationTip:"定位您的位置",positioning:"定位中...",fail:"定位失败",centreMap:"我的位置",lat:"纬度",lng:"经度",address:"地址"},statusBar:{lat:"纬度",lng:"经度",zone:"带号",e:"X",n:"Y",elev:"高程",level:"层级",heading:"方位",pitch:"俯仰",roll:"侧翻",cameraHeight:"视高",tip:"点击切换鼠标显示坐标为 UTM 投影坐标"}},navigationSm:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环；重置视图：双击罗盘外环。"},zoomCotrol:{zoomInTip:"放大",zoomBarTip:"按住滑块向上放大，向下缩小。",zoomOutTip:"缩小"}},measurement:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},distance:{tip:"距离量算",drawingTipStart:"单击左键绘制距离量算起点。",drawingTipEnd:"单击左键绘制距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},"component-distance":{tip:"三角量算",drawingTipStart:"单击左键绘制三角量算起点。",drawingTipEnd:"单击左键绘制三角量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"折线距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},horizontal:{tip:"水平距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},vertical:{tip:"垂直距离量算",drawingTipStart:"单击左键绘制垂直距离量算起点。",drawingTipEnd:"单击左键绘制垂直距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},height:{tip:"地表高度量算",drawingTipStart:"单击左键绘制高度量算点。",drawingTipEnd:"单击左键绘制高度量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},area:{tip:"面积量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"点击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"坐标量算",drawingTipStart:"点击左键绘制坐标量算点。",drawingTipEnd:"点击左键绘制坐标量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。",lng:"经度：",lat:"纬度：",height:"高度：",slope:"坡度："},rectangle:{tip:"矩形量算",drawingTipStart:"单击左键绘制矩形量算起点。",drawingTipEnd:"单击左键绘制矩形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"正多边形量算",drawingTipStart:"单击左键绘制正多边形量算起点。",drawingTipEnd:"单击左键绘制正多边形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"圆形量算",drawingTipStart:"单击左键绘制圆形量算起点。",drawingTipEnd:"单击左键绘制圆形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除量算结果"}},drawing:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},pin:{tip:"绘制图标点",drawingTipStart:"点击左键绘制图标点。",drawingTipEnd:"点击左键绘制图标点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"绘制点",drawingTipStart:"点击左键绘制点。",drawingTipEnd:"点击左键绘制点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"绘制线",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polygon:{tip:"绘制面",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},rectangle:{tip:"绘制矩形",drawingTipStart:"单击左键绘制矩形起点。",drawingTipEnd:"单击左键绘制矩形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"绘制圆",drawingTipStart:"单击左键绘制圆形起点。",drawingTipEnd:"单击左键绘制圆形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"绘制正多边形",drawingTipStart:"单击左键绘制正多边形起点。",drawingTipEnd:"单击左键绘制正多边形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除绘制结果"}},analysis:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},sightline:{tip:"通视分析",drawingTipStart:"单击左键绘制观测点。",drawingTipEnd:"单击左键绘制目标点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},viewshed:{tip:"可视域分析",drawingTipStart:"单击左键绘制可视域分析起点。",drawingTipEnd:"单击左键绘制可视域分析终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除分析结果"}},overview:{show:"显示鹰眼",hidden:"隐藏鹰眼"}}};const $n=e=>(t,i)=>Zn(t,i,n(e)),Zn=(e,t,i)=>H(i,e,e).replace(/\{(\w+)\}/g,((e,i)=>{var n;return`${null!=(n=null==t?void 0:t[i])?n:`{${i}}`}`})),Yn=()=>{const t=ne("locale");return(t=>({lang:i((()=>n(t).name)),locale:v(t)?t:e(t),t:$n(t)}))(i((()=>t.value||Gn)))};function qn(e,t,i){const n=(e,n,o=!0)=>{const a=n||t.cesiumEvents||[];a&&a.forEach((n=>{if(e[n]){const i=be(t,n),a=o?"addEventListener":"removeEventListener";i&&e[n][a](i)}else process.env.VUECESIUM_DEBUG&&i.warn("Add event linstener of "+n+" failed, try to upgrade Cesium to latest version.")}))};function o(t){if(!e.enableMouseEvent||!t)return;const i=this.viewer,{eventName:n}=this,o=t.position||t.endPosition;if(!o)return;const a=[];let r,s;-1!==n.indexOf("LEFT_DOUBLE_CLICK")?r="dblclick":-1!==n.indexOf("CLICK")?r="click":-1!==n.indexOf("DOWN")?r="mousedown":-1!==n.indexOf("UP")?r="mouseup":-1!==n.indexOf("MOUSE_MOVE")&&(r="mousemove"),"mousemove"===r?s="mouseout":"click"===r&&(s="clickout");const l=i.scene.pick(o);if(Cesium.defined(l)?(this.pickedFeature&&this.pickedFeature.id!==l.id&&a.push({callbackName:s,pickedFeature:this.pickedFeature}),"mousemove"!==r||this.pickedFeature&&this.pickedFeature.id===l.id||a.push({callbackName:"mouseover",pickedFeature:l}),a.push({callbackName:r,pickedFeature:l})):(this.pickedFeature&&a.push({callbackName:s,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),0===a.length)return;let u;const p=i.scene;if(p.mode===Cesium.SceneMode.SCENE3D){const e=p.camera.getPickRay(o);u=p.globe.pick(e,p)}else u=p.camera.pickEllipsoid(o,p.globe.ellipsoid);let m=-1;-1!==n.indexOf("LEFT")?m=0:-1!==n.indexOf("MIDDLE")?m=1:-1!==n.indexOf("RIGHT")&&(m=2);const v=[];a.forEach((e=>{const t=e.callbackName,i=e.pickedFeature;i.id&&(c(i.id)&&i.id[0]instanceof Cesium.Entity?v.push({callbackName:t,cesiumObject:i.id[0].entityCollection.owner,pickedFeature:i}):i.id instanceof Cesium.Entity&&(v.push({callbackName:t,cesiumObject:i.id,pickedFeature:i}),v.push({callbackName:t,cesiumObject:i.id.entityCollection.owner,pickedFeature:i})));const n=e=>{v.push({callbackName:t,cesiumObject:e,pickedFeature:i}),e._vcParent&&n(e._vcParent)};i.primitive&&(i.primitive._vcParent&&n(i.primitive._vcParent),v.push({callbackName:t,cesiumObject:i.primitive,pickedFeature:i})),i.collection&&(i.collection._vcParent&&n(i.collection._vcParent),v.push({callbackName:t,cesiumObject:i.collection,pickedFeature:i}))})),v.forEach((e=>{if(e.callbackName){const t=e.cesiumObject[`vc${e.callbackName}`]||e.cesiumObject[`on${d(e.callbackName)}`]||e.cesiumObject[le(`on${d(e.callbackName)}`)];if(Cesium.defined(t)){const i={type:`on${e.callbackName}`,windowPosition:o,surfacePosition:u,pickedFeature:e.pickedFeature,button:m,cesiumObject:e.cesiumObject};t instanceof Cesium.CallbackProperty?t._callback(i):t(i)}}})),this.pickedFeature=l}return{bindEvents:n,registerEvents:i=>{var a;const{viewer:r,cesiumObject:s}=t;if(void 0===s)return;const{ScreenSpaceEventHandler:l,ScreenSpaceEventType:u}=Cesium;r._vcPickScreenSpaceEventHandler&&r._vcViewerScreenSpaceEventHandler||(r._vcPickScreenSpaceEventHandler=new l(r.canvas),r._vcViewerScreenSpaceEventHandler=new l(r.canvas),Xn.forEach((e=>{const i=be(t,e);i&&r._vcViewerScreenSpaceEventHandler.setInputAction(i,u[e]),r._vcPickScreenSpaceEventHandler.setInputAction(o.bind({eventName:e,viewer:r}),u[e])}))),n(s,t.cesiumEvents||[],i),null==(a=t.cesiumMembersEvents)||a.forEach((e=>{const t=c(e.name)&&e.name.length>0&&s[e.name[0]]?s[e.name[0]][e.name[1]]:s[e.name];t&&n(t,e.events,i)})),e.enableMouseEvent&&Qn.forEach((e=>{const n=be(t,e);i?n&&(s[`vc${e}`]=n):n&&delete s[`vc${e}`]}))}}}const Xn=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],Qn=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"],Jn=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function Kn(e,{emit:t},i){const n=ve(i);i.alreadyListening=[],i.removeCallbacks=[];let o=[];i.mounted=!1;const r=g();i.vcMitt=r;const l=a(J),{t:c}=Yn();if(void 0===l)return;const u=we(i),d=qn(e,i,n);i.children=[];const p=["billboard","box","corridor","cylinder","ellipse","ellipsoid","label","model","tileset","path","plane","point","polygon","polyline","polylineVolume","rectangle","wall"],m=async()=>{var e;if(i.mounted)return!1;n.debug(`${i.cesiumClass}---loading`),await(async()=>{if(t("beforeLoad",i),u.nowaiting)return!0;await u.proxy.creatingPromise})();const{Cesium:o,viewer:a}=l;return i.viewer=a,i.Cesium=o,u.cesiumObject||u.nowaiting?(O(!0),C().then((async e=>(i.cesiumObject=e,y().then((()=>{i.mounted=!0,u.children.push(i),Object.assign(i.proxy,{cesiumObject:i.cesiumObject});const s={Cesium:o,viewer:a,cesiumObject:e,vm:i.proxy};return t("ready",s),r.emit("ready",s),n.debug(`${i.cesiumClass}---loaded`),s})))))):await(null==(e=u.proxy)?void 0:e.load())},v=async()=>{await(async()=>{await i.unloadingPromise})();for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}return i.children.length=0,!!i.mounted&&b().then((async()=>(O(!1),i.cesiumObject=void 0,i.mounted=!1,i.removeCallbacks.forEach((e=>{e()})),t("destroyed",i),n.debug(`${i.cesiumClass}---unmounted`),!(i.renderByParent&&!i.unloadingPromise)||u.proxy.unload())))},f=async()=>v().then((()=>m())),y=async()=>{var e;return d.registerEvents(!0),(null==(e=i.mount)?void 0:e.call(i))||!0},b=async()=>{var e;return d.registerEvents(!1),(null==(e=i.unmount)?void 0:e.call(i))||!0},C=async()=>{if(n.debug("do createCesiumObject"),s(i.createCesiumObject))return i.createCesiumObject();{const t=x(e);return new Cesium[i.cesiumClass](t)}},w=(e,t)=>{let n=null==t?void 0:t.deep;const{SampledPositionProperty:o,Appearance:a,DebugAppearance:r,MaterialAppearance:s,PolylineColorAppearance:l,EllipsoidSurfaceAppearance:c,PerInstanceColorAppearance:u,PolylineMaterialAppearance:d}=Cesium;if("position"===e)n=!(i.proxy[e]instanceof o);else if("appearance"===e||"depthFailAppearance"===e){const t=i.proxy[e];n=!(t instanceof a||t instanceof r||t instanceof s||t instanceof l||t instanceof c||t instanceof u||t instanceof d||-1!==ue(t).indexOf("Appearance"))}return n},O=t=>{if(t){if(!i.cesiumClass||!Cesium[i.cesiumClass])return;e&&Object.keys(e).forEach((e=>{var t,n,a,r,s;let l=e;if("labelStyle"===e||"wmtsStyle"===e?l="style":"bmKey"===e&&(l="key"),(null==(n=null==(t=i.proxy)?void 0:t.$options.watch)?void 0:n[e])||-1!==i.alreadyListening.indexOf(e))return;const c=null==(r=null==(a=i.proxy)?void 0:a.$options.props[e])?void 0:r.watcherOptions,u=null==(s=i.proxy)?void 0:s.$watch(e,(async(e,t)=>{await i.proxy.creatingPromise;const{cesiumObject:n}=i,o=n&&Object.getOwnPropertyDescriptor(n,l),a=n&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n),l);if(o&&(o.writable||o.set)||a&&(a.writable||a.set)){if(c&&c.cesiumObjectBuilder){const t=c.cesiumObjectBuilder.call(i,e,i.viewer.scene.globe.ellipsoid);Cesium.defined(n[l])&&Cesium.defined(n[l]._callback)||(n[l]=t)}else n[l]=S(l,e);return!0}U(e,t)||i.proxy.reload()}),{deep:w(e,c)});o.push(u)}))}else o.forEach((e=>e())),o=[]},x=(e,t)=>{let n={};return e&&Object.keys(e).forEach((o=>{let a=o;"labelStyle"===o||"wmtsStyle"===o?a="style":"bmKey"===o&&(a="key");const r=ue(e[o]);r&&-1===r.indexOf("Graphics")&&-1!==p.indexOf(a)&&("Entity"===i.cesiumClass||i.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===i.cesiumClass)?n[a]=x(e[o],t):n[a]=S(o,e[o],t)})),n=re(n),n},S=(e,t,n)=>{var o,a;const r=ue(t);if(r&&-1===r.indexOf("Graphics")&&-1!==p.indexOf(e)&&("Entity"===i.cesiumClass||i.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===i.cesiumClass))return x(t,n);{const r=null==(o=i.proxy)?void 0:o.$options.name;let l=!1;s(t)&&r&&Jn.forEach((e=>{-1!==r.indexOf(e)&&(l=!0)}));const c=(null==(a=i.proxy)?void 0:a.$options.props[e])||(null==n?void 0:n[e])||Wn[e]&&Wn[e][e];return(null==c?void 0:c.watcherOptions)&&!se(t)?c.watcherOptions.cesiumObjectBuilder.call(i,t,i.viewer.scene.globe.ellipsoid):l?new Cesium.CallbackProperty(t,!1):t}},_=new Promise(((e,n)=>{try{let o=!1;l.viewer&&(o=!0,m().then((t=>{e(t),o=!1})).catch((e=>{t("unready",e),n(e)}))),u.vcMitt.on("ready",(()=>{o||i.isUnmounted||m().then((t=>{e(t)})).catch((e=>{t("unready",e),n(e)}))}))}catch(o){t("unready",o),n(o)}}));return n.debug(`${i.cesiumClass}---onCreated`),h((()=>{n.debug(`${i.cesiumClass}---onUnmounted`),i.unloadingPromise=new Promise(((e,t)=>{v().then((()=>{n.debug(`${i.cesiumClass}---unloaded`),e(!0),i.unloadingPromise=void 0,r.all.clear()}))})),i.alreadyListening=[]})),Object.assign(i.proxy,{creatingPromise:_,load:m,unload:v,reload:f,getCreatingPromise:()=>_,getCesiumObject:()=>i.cesiumObject}),{$services:l,load:m,unload:v,reload:f,creatingPromise:_,transformProp:S,transformProps:x,unwatchFns:o,setPropsWatcher:O,logger:n,getServices:()=>fe({},l||{})}}function eo(e,i,n){n.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],"KmlDataSource"===n.cesiumClass&&(n.cesiumEvents.push("refreshEvent"),n.cesiumEvents.push("unsupportedNodeEvent")),n.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const o=Kn(e,i,n);if(void 0===o)return;n.alreadyListening.push("entities");let a=[];a.push(f((()=>G(e.entities)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i.entities.getById(e.oldOptions.id);if(e.oldOptions.id===e.newOptions.id)t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}));else{i.entities.remove(t);const n=e.newOptions;r(i,[n])}}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i.entities.getById(o[e].id);a.push(t)}a.forEach((e=>{i.entities.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i],a=o.transformProps(n),r=e.entities.add(a);n.id!==r.id&&(n.id=r.id),me(r,a)}};n.mount=async()=>{const t=o.$services.dataSources,i=n.cesiumObject;return i.show=e.show,r(i,e.entities),t.add(i).then((()=>!0))},n.unmount=async()=>{const t=o.$services.dataSources,i=n.cesiumObject;return t&&t.remove(i,e.destroy)};return h((()=>{a.forEach((e=>e())),a=[]})),t(J,fe(o.getServices(),{get datasource(){return n.cesiumObject},get entities(){var e;return null==(e=n.cesiumObject)?void 0:e.entities}})),{transformProps:o.transformProps,unwatchFns:o.unwatchFns,setPropsWatcher:o.setPropsWatcher}}function to(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=Kn(e,t,i);if(void 0!==n)return i.mount=async()=>{var e;const t=i.cesiumObject,n=we(i).proxy;return null==(e=n.__updateGeometry)?void 0:e.call(n,t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function io(e,t,i){i.cesiumEvents=["definitionChanged"];void 0!==Kn(e,t,i)&&(i.mount=async()=>{var e,t;const n=i.cesiumObject;if(void 0===n)return!1;const o=le((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),a=3===o.length?`update:${o[2]}`:"update:polylineVolume",r=we(i).proxy;return r&&(null==(t=r.__updateGraphics)?void 0:t.call(r,n,a))},i.unmount=async()=>{var e,t;const n=le((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),o=3===n.length?`update:${n[2]}`:"update:polylineVolume",a=we(i).proxy;return a&&(null==(t=a.__updateGraphics)?void 0:t.call(a,void 0,o))})}const no=e=>y(e);function oo(e,t){const i=e.style;Object.keys(t).forEach((e=>{i[e]=t[e]}))}const ao={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(ao,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(Ih){}function ro(){}function so(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function lo(e){e.stopPropagation()}function co(e){!1!==e.cancelable&&e.preventDefault()}function uo(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function po(e,t,i){const n=`__vc_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],ao[t[3]])}))}function mo(e,t){const i=`__vc_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],ao[t[3]])})),e[i]=void 0)}function vo(e,t){return!0!==function(e){return e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}(e)&&[].concat(t).includes(e.keyCode)}function ho(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function go(e,t,i,n){!0===i.modifiers.stop&&lo(e);const o=i.modifiers.color;let a=i.modifiers.center;a=!0===a||!0===n;const r=document.createElement("span"),s=document.createElement("span"),l=so(e),{left:c,top:u,width:d,height:p}=t.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),v=m/2,h=(d-m)/2+"px",g=a?h:l.left-c-v+"px",f=(p-m)/2+"px",y=a?f:l.top-u-v+"px";s.className="vc-ripple__inner",oo(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${y},0) scale3d(.2,.2,1)`,opacity:0}),r.className="vc-ripple"+(o?" text-"+o:""),r.setAttribute("dir","ltr"),r.appendChild(s),t.appendChild(r);const b=()=>{r.remove(),clearTimeout(C)};i.abort.push(b);let C=setTimeout((()=>{s.classList.add("vc-ripple__inner--enter"),s.style.transform=`translate3d(${h},${f},0) scale3d(1,1,1)`,s.style.opacity="0.2",C=setTimeout((()=>{s.classList.remove("vc-ripple__inner--enter"),s.classList.add("vc-ripple__inner--leave"),s.style.opacity="0",C=setTimeout((()=>{r.remove(),i.abort.splice(i.abort.indexOf(b),1)}),275)}),250)}),50)}function fo(e,{modifiers:t,value:i,arg:n,instance:o}){const a=Object.assign({},t,i);e.modifiers={early:!0===a.early,stop:!0===a.stop,center:!0===a.center,color:a.color||n,keyCodes:[].concat(a.keyCodes||13)}}var yo=no({name:"ripple",beforeMount(e,t){const i={enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===i.enabled&&!0!==t.qSkipRipple&&(!0===i.modifiers.early?!0===["mousedown","touchstart"].includes(t.type):"click"===t.type)&&go(t,e,i,!0===t.qKeyEvent)},keystart:ho((t=>{!0===i.enabled&&!0!==t.qSkipRipple&&!0===vo(t,i.modifiers.keyCodes)&&t.type==="key"+(!0===i.modifiers.early?"down":"up")&&go(t,e,i,!0)}),300)};fo(i,t),e.__vcripple=i,po(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&fo(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach((e=>{e()})),mo(t,"main"),delete e._vcripple}});function bo(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),a=/(?:Chrome|CriOS)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r;return{isTablet:r,isPhone:s,isAndroid:n,isPc:!s&&!n&&!i,isChrome:a,isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function Co(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==(null==e?void 0:e.empty)?e.empty():void 0!==(null==e?void 0:e.removeAllRanges)&&(e.removeAllRanges(),!0!==bo().isPhone&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var wo=no({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==bo().hasTouch)return;const n={handler:t.value,noop:ro,mouseStart(e){"function"==typeof n.handler&&!0==(0===e.button)&&(po(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){var i;if(void 0!==e.target&&"function"==typeof n.handler){const o=e.target;po(n,"temp",[[o,"touchmove","move","passiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(e),null==(i=null==t?void 0:t.touchStart)||i.call(t,e)}},start(e,t){n.origin=so(e);const i=Date.now();!0===bo().isPhone&&(document.body.classList.add("non-selectable"),Co(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(Co(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{Co(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=so(e);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(e){var i;mo(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==e&&uo(e):clearTimeout(n.timer),null==(i=null==t?void 0:t.touchEnd)||i.call(t,e)}},o=[600,5,7];"string"==typeof t.arg&&t.arg.length>0&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,!0===i.mouse&&po(n,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture?"Capture":"")]]),!0===bo().hasTouch&&po(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;void 0!==t&&(mo(t,"main"),mo(t,"temp"),clearTimeout(t.timer),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchhold)}});function Oo(){let e,t;const i=new Promise((function(i,n){e=i,t=n}));return{resolve:e,reject:t,promise:i}}function xo(e,t,i){const n=Kn(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=n.$services.primitives;return i&&i.add(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.contains(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function So(e,i,n){const o=Kn(e,i,n);if(void 0===o)return;n.mount=async()=>{const e=o.$services.primitives,t=n.cesiumObject,i=e&&e.add(t);return Cesium.defined(i)},n.unmount=async()=>{const e=o.$services.primitives,t=n.cesiumObject;return e&&e.remove(t)};return t(J,fe(o.getServices(),{get primitives(){return n.cesiumObject}})),{transformProps:o.transformProps,transformProp:o.transformProp,unwatchFns:o.unwatchFns,setPropsWatcher:o.setPropsWatcher}}function _o(i,n,o){const a=Kn(i,n,o);if(void 0===a)return;const{emit:r}=n,s=e(0),l=e([]);o.createCesiumObject=async()=>{var e,t;const n=a.transformProps(i);return n.asynchronous||await(null==(t=(e=Cesium[o.cesiumClass]).initializeTerrainHeights)?void 0:t.call(e)),i.geometryInstances&&(c(i.geometryInstances)?(l.value.push(...i.geometryInstances),s.value+=i.geometryInstances.length):(s.value+=1,l.value.push(i.geometryInstances))),new Cesium[o.cesiumClass](n)},o.mount=async()=>{const e=o.cesiumClass.includes("Ground")?a.$services.groundPrimitives:a.$services.primitives,t=o.cesiumObject;t.readyPromise&&t.readyPromise.then((e=>{be(o,"readyPromise")&&r("readyPromise",e,a.$services.viewer,o.proxy)})),t._vcParent=e;const i=e&&e.add(t);if("ParticleSystem"===o.cesiumClass){const e=setInterval((()=>{Cesium.defined(i._billboardCollection)&&(i._billboardCollection._vcParent=i,clearInterval(e))}),500)}return Cesium.defined(i)},o.unmount=async()=>{s.value=0,l.value=[];const e=o.cesiumClass.includes("Ground")?a.$services.groundPrimitives:a.$services.primitives,t=o.cesiumObject;return e&&e.remove(t)};return t(J,fe(a.getServices(),{get primitive(){return o.cesiumObject}})),Object.assign(o.proxy,{__updateGeometryInstances:(e,t)=>{if(l.value.push(e),t===s.value-1){if(be(o,"update:geometryInstances"))n.emit("update:geometryInstances",l.value);else{o.cesiumObject.geometryInstances=0===t?e:l.value}}return!0},__removeGeometryInstances:e=>{const t=l.value.indexOf(e);return l.value.splice(t,1),!0},__childCount:s}),{transformProps:a.transformProps,unwatchFns:a.unwatchFns,setPropsWatcher:a.setPropsWatcher}}const Eo=52.35987755982988,Po=3.141592653589793,To=6378245,Mo=.006693421622965943,Io=function(e,t){const i=(e=+e)-.0065,n=(t=+t)-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*Eo),a=Math.atan2(n,i)-3e-6*Math.cos(i*Eo);return[o*Math.cos(a),o*Math.sin(a)]},jo=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*Eo),n=Math.atan2(t,e)+3e-6*Math.cos(e*Eo);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},Lo=function(e,t){if(Ro(e=+e,t=+t))return[e,t];{let i=Do(e-105,t-35),n=ko(e-105,t-35);const o=t/180*Po;let a=Math.sin(o);a=1-Mo*a*a;const r=Math.sqrt(a);i=180*i/(To*(1-Mo)/(a*r)*Po),n=180*n/(To/r*Math.cos(o)*Po);return[e+n,t+i]}},Ao=function(e,t){if(Ro(e=+e,t=+t))return[e,t];{let i=Do(e-105,t-35),n=ko(e-105,t-35);const o=t/180*Po;let a=Math.sin(o);a=1-Mo*a*a;const r=Math.sqrt(a);i=180*i/(To*(1-Mo)/(a*r)*Po),n=180*n/(To/r*Math.cos(o)*Po);return[2*e-(e+n),2*t-(t+i)]}};var Do=function(e,t){let i=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Po)+20*Math.sin(2*e*Po))/3,i+=2*(20*Math.sin(t*Po)+40*Math.sin(t/3*Po))/3,i+=2*(160*Math.sin(t/12*Po)+320*Math.sin(t*Po/30))/3,i},ko=function(e,t){let i=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Po)+20*Math.sin(2*e*Po))/3,i+=2*(20*Math.sin(e*Po)+40*Math.sin(e/3*Po))/3,i+=2*(150*Math.sin(e/12*Po)+300*Math.sin(e/30*Po))/3,i},Ro=function(e,t){t=+t;return!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)};const Bo=Object.freeze(Object.defineProperty({__proto__:null,bd09togcj02:Io,gcj02tobd09:jo,gcj02towgs84:Ao,wgs84togcj02:Lo},Symbol.toStringTag,{value:"Module"}));function No(e,t,i){i.cesiumEvents=["errorEvent"];const n=Kn(e,t,i);if(void 0===n)return;const{emit:o}=t;return i.mount=async()=>{var t,a,r,s;const{viewer:l}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){i.renderByParent=!0;const n=i.cesiumObject;if(null==(t=null==n?void 0:n.readyPromise)||t.then((()=>{be(i,"readyPromise")&&o("readyPromise",n,l,i.proxy)})),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to){if(!("VcImageryProviderBaidu"===(null==(a=i.proxy)?void 0:a.$options.name)||"VcImageryProviderTianditu"===(null==(r=i.proxy)?void 0:r.$options.name)&&"4490"===n._epsgCode)){const{WebMercatorTilingScheme:t,Cartographic:i,Math:o}=Cesium,a=new t,r=a.projection,s=r.project,l=r.unproject;let c,u;"WGS84"===e.projectionTransforms.to.toUpperCase()?(c="wgs84togcj02",u="gcj02towgs84"):"GCJ02"===e.projectionTransforms.to.toUpperCase()&&(c="gcj02towgs84",u="wgs84togcj02"),c&&u&&(r.project=function(e,t){return t=t||new Cesium.Cartesian3,t=Bo[c](o.toDegrees(e.longitude),o.toDegrees(e.latitude)),s.call(this,new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1])))},r.unproject=function(e,t){t=t||new i;const n=l.call(this,e);return t=Bo[u](o.toDegrees(n.longitude),o.toDegrees(n.latitude)),new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1]))},n._tilingScheme=a)}}const c=we(i).proxy;return c&&(null==(s=c.__updateProvider)?void 0:s.call(c,n))}{const e=i.cesiumObject;return e.readyPromise.then((()=>{be(i,"readyPromise")&&o("readyPromise",e,l,i.proxy)})),l.terrainProvider=e,!0}},i.unmount=async()=>{var e;const{viewer:t}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){const t=we(i).proxy;return t&&(null==(e=t.__updateProvider)?void 0:e.call(t,void 0))}{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{be(i,"readyPromise")&&o("readyPromise",e,t,i.proxy)})),t.terrainProvider=e,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Vo(e){const t=o(),i=null==t.parent?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides;i&&J in i||e||(e="cesiumContainer");const n=ve();if(t){if(e){const i=t.appContext.config.globalProperties.$VueCesium[e];return i||n.warn(`Failed to get $vc, reason: vc-viewer with containerId: ${e} was not found.`),i}return a(J)}n.warn("VueCesium useVueCesium() can only be used inside setup().")}var zo={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object,containerId:String};class Fo{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(e){const{PrimitiveCollection:t,Cesium3DTileset:i,Model:n}=Cesium,o=e.length;for(let a=0;a<o;a++){const o=e.get(a);o instanceof t?this.hidePrimitiveCollection(o):(this.states.push(o.show),o instanceof i||o instanceof n||(o.show=!1))}}restorePrimitiveCollection(e){const{PrimitiveCollection:t}=Cesium,i=e.length;for(let n=0;n<i;n++){const i=e.get(n);i instanceof t?this.restorePrimitiveCollection(i):i.show=this.states.get(this.count++)}}hide(e){this.states.length=0,this.hidePrimitiveCollection(e.primitives),this.hidePrimitiveCollection(e.groundPrimitives)}restore(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)}}var Ho=0,Uo=1,Wo=2;const Go=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),$o=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Zo=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),Yo=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),qo=class{constructor(e){e=de(e,{}),this.distanceUnits=de(e.distanceUnits,Go.METERS),this.areaUnits=de(e.areaUnits,$o.SQUARE_METERS),this.volumeUnits=de(e.volumeUnits,Zo.CUBIC_METERS),this.angleUnits=de(e.angleUnits,Yo.DEGREES),this.slopeUnits=de(e.slopeUnits,Yo.DEGREES)}static distanceToString(e,t,i,n){return ta(e=qo.convertDistance(e,Go.METERS,t),i,n)+qo.getDistanceUnitSpacing(t)+qo.getDistanceUnitSymbol(t)}static areaToString(e,t,i,n){return ta(e=qo.convertArea(e,$o.SQUARE_METERS,t),i,n)+qo.getAreaUnitSpacing(t)+qo.getAreaUnitSymbol(t)}static angleToString(e,t,i,n){const{Math:o}=Cesium;if(t===Yo.DEGREES||t===Yo.RADIANS||t===Yo.GRADE)return ta(e=ea(e,t),i,n)+qo.getAngleUnitSpacing(t)+qo.getAngleUnitSymbol(t);if(t===Yo.DEGREES_MINUTES_SECONDS){const t=o.toDegrees(e),i=t<0?"-":"",a=Math.floor(t),r=60*(t-a),s=Math.floor(r);return i+a+"° "+s+"' "+ta(60*(r-s),void 0,n)+'"'}Yo.RATIO}static volumeToString(e,t,i,n){return ta(e=qo.convertArea(e,Zo.CUBIC_METERS,t),i,n)+qo.getVolumeUnitSpacing(t)+qo.getVolumeUnitSymbol(t)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===Yo.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case Go.METERS:return"m";case Go.CENTIMETERS:return"cm";case Go.KILOMETERS:return"km";case Go.FEET:case Go.US_SURVEY_FEET:return"ft";case Go.INCHES:return"in";case Go.YARDS:return"yd";case Go.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case $o.SQUARE_METERS:return"m²";case $o.SQUARE_CENTIMETERS:return"cm²";case $o.SQUARE_KILOMETERS:return"km²";case $o.SQUARE_FEET:return"sq ft";case $o.SQUARE_INCHES:return"sq in";case $o.SQUARE_YARDS:return"sq yd";case $o.SQUARE_MILES:return"sq mi";case $o.ACRES:return"ac";case $o.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case Zo.CUBIC_METERS:return"m³";case Zo.CUBIC_CENTIMETERS:return"cm³";case Zo.CUBIC_KILOMETERS:return"km³";case Zo.CUBIC_FEET:return"cu ft";case Zo.CUBIC_INCHES:return"cu in";case Zo.CUBIC_YARDS:return"cu yd";case Zo.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===Yo.DEGREES?"°":e===Yo.RADIANS?"rad":e===Yo.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*Qo(t)*(1/Qo(i))}static convertArea(e,t,i){return t===i?e:e*Jo(t)*(1/Jo(i))}static convertVolume(e,t,i){return t===i?e:e*Ko(t)*(1/Ko(i))}static convertAngle(e,t,i){return t===i?e:ea(function(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===Yo.RADIANS)return e;if(t===Yo.DEGREES)return n.toRadians(e);if(t===Yo.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===Yo.RATIO)return Math.atan(e);if(t===Yo.DEGREES_MINUTES_SECONDS){const t=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(t))throw new o("Could not convert angle to radians: "+e);let a=0<t[1].length?-1:1;const r=parseInt(t[2]),s=parseInt(t[3]),l=parseFloat(t[4]);let c=t[5];1===c.length&&("W"!==(c=c.toUpperCase())&&"S"!==c||(a*=-1));const u=a*(r+s/60+l/3600);return n.toRadians(u)}}(e,t),i)}static longitudeToString(e,t,i,n){return qo.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"W":"E")}static latitudeToString(e,t,i,n){return qo.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"S":"N")}};let Xo=qo;function Qo(e){switch(e){case Go.METERS:return 1;case Go.CENTIMETERS:return.01;case Go.KILOMETERS:return 1e3;case Go.FEET:return.3048;case Go.US_SURVEY_FEET:return 1200/3937;case Go.INCHES:return.254;case Go.YARDS:return.9144;case Go.MILES:return 1609.344;default:return 1}}function Jo(e){switch(e){case $o.SQUARE_METERS:return 1;case $o.SQUARE_CENTIMETERS:return 1e-4;case $o.SQUARE_KILOMETERS:return 1e6;case $o.SQUARE_FEET:return.09290304;case $o.SQUARE_INCHES:return 64516e-8;case $o.SQUARE_YARDS:return.83612736;case $o.SQUARE_MILES:return 2589988.110336;case $o.ACRES:return 4046.85642232;case $o.HECTARES:return 1e4;default:return 1}}function Ko(e){switch(e){case Zo.CUBIC_METERS:return 1;case Zo.CUBIC_CENTIMETERS:return 1e-6;case Zo.CUBIC_KILOMETERS:return 1e9;case Zo.CUBIC_FEET:return.09290304*.3048;case Zo.CUBIC_INCHES:return 16387064e-12;case Zo.CUBIC_YARDS:return.764554857984;case Zo.CUBIC_MILES:return 4168181825.44058;default:return 1}}function ea(e,t){const{Math:i}=Cesium;return t===Yo.RADIANS?e:t===Yo.DEGREES?i.toDegrees(e):t===Yo.GRADE?i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e):t===Yo.RATIO?Math.sin(e)/Math.cos(e):void 0}function ta(e,t,i){const n=function(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};"number"==typeof(e=Cesium.defaultValue(e,2))?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n="function"==typeof e?e(t,i):e;return n}(i,e,t),o=e.toLocaleString(t,n);return o===(-0).toLocaleString(t,n)?(0).toLocaleString(t,n):o}Xo.numberToString=function(e,t,i){return ta(e,t,i)};class ia{constructor(e){const{defined:t,defaultValue:i,Color:n,createGuid:o,BoundingSphere:a,Ellipsoid:r,ClassificationType:s}=Cesium;e=i(e,{}),this.show=i(e.show,!0),this._id=t(e.id)?e.id:o(),this._ellipsoid=i(e.ellipsoid,r.WGS84),this._appearance=i(e.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=e.depthFailAppearance,this._positions=i(e.positions,[]),this._polygonHierarchy=e.polygonHierarchy,this._clampToGround=i(e.clampToGround,!1),this._classificationType=i(e.classificationType,s.BOTH),this._allowPicking=i(e.allowPicking,!0),this._asynchronous=i(e.asynchronous,!1),this._boundingSphere=new a,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(e){this._positions=e,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(e){this._polygonHierarchy=e,this._update=!0}get appearance(){return this._appearance}set appearance(e){this._appearance=e,void 0!==this._primitive&&(this._primitive.appearance=e)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(e){this._depthFailAppearance=e,void 0!==this._primitive&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=e)}get id(){return this._id}set id(e){this._id=e}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get classificationType(){return this._classificationType}set classificationType(e){this._classificationType=e,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(e){this._allowPicking=e}get asynchronous(){return this._asynchronous}set asynchronous(e){this._asynchronous=e}async update(e){if(this.show){const t=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(t.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){let e;this._update=!1,e=this._clampToGround?this._createGroundPolygon():this._createPolygon(),e.then((e=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=e,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(t,this._boundingSphere)}))}this._primitive&&this._primitive.update(e)}}}async _createPolygon(){const{Primitive:e,GeometryInstance:t,CoplanarPolygonGeometry:i,Cartesian3:n}=Cesium;return new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:e,GeometryInstance:t,PolygonGeometry:i,Cartesian3:n}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class na{constructor(e){const{SampledPositionProperty:t,Entity:i,ExtrapolationType:n,VelocityOrientationProperty:o,CallbackProperty:a}=Cesium;this._lastTime=void 0,this._sampledPosition=new t,this._sampledPosition.forwardExtrapolationType=e.forwardExtrapolationType||n.HOLD,this._sampledPosition.backwardExtrapolationType=e.backwardExtrapolationType||n.HOLD,this._cache=[],this._maxCacheSize=e.maxCacheSize||10;const r=new i(e);r.position=this._sampledPosition;const s=new o(this._sampledPosition);let l;r.orientation=new a(((e,t)=>{const i=s.getValue(e);return i?(l=i,i):l}),!1),this._entity=r,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(e){this._entity.id=e}set maxCacheSize(e){this._maxCacheSize=e}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const e=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),t=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(e,t){let i;if(this._removePosition(),"number"==typeof t){const e=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(e,t,new Cesium.JulianDate),Cesium.destroyObject(e)}else i=He(t);return this._sampledPosition.addSample(i,xe(e)),this._lastTime=i,this._cache.push(this._lastTime),i}}const oa={position:0,normal:1};class aa{constructor(e){const{defaultValue:t,Matrix4:i,Math:n,Color:o,BoundingSphere:a}=Cesium;this.modelMatrix=t(e.modelMatrix,new i),this.fovH=t(e.fovH,n.toRadians(60)),this.fovV=t(e.fovV,n.toRadians(30)),this.segmentH=t(e.segmentH,16),this.segmentV=t(e.segmentV,8),this.subSegmentH=t(e.subSegmentH,3),this.subSegmentV=t(e.subSegmentV,3),this._faceColor=t(e.faceColor,new o(1,1,1,.1)),this._lineColor=t(e.lineColor,new o(1,1,1,.4)),this.show=t(e.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new a,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(e){this._faceColor=e}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e}update(e){if(this.show&&e.passes.render){const{clone:t,Matrix4:i,defined:n,BoundingSphere:o}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),n(this._command)||this._createCommand(e.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&e.commandList.push(this._command),this._lineCommand&&e.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(e){const{Appearance:t,RenderState:i,ShaderSource:n,ShaderProgram:o,BufferUsage:a,IndexDatatype:r,VertexArray:s,ComponentDatatype:l,BoundingSphere:c,DrawCommand:u,PrimitiveType:d,Pass:p,Matrix4:m}=Cesium,v=this,h=this._subSegmentH*this._segmentH,g=this._subSegmentV*this._segmentV,f=ra(this._fovH,this._fovV,h,g),y=ra(this._fovH,this._fovV,h,g),b=function(e,t){const i=new Uint16Array(e*t*6);for(let n=0;n<e;n++)for(let o=0;o<t;o++){const t=o*(1+e)+n,a=o*(1+e)+n+1,r=(o+1)*(1+e)+n,s=(o+1)*(1+e)+n+1,l=6*(o*e+n);i[0+l]=t,i[1+l]=a,i[2+l]=s,i[3+l]=t,i[4+l]=s,i[5+l]=r}return i}(h,g),C=function(e,t,i,n){const o=e*i,a=t*n,r=new Uint16Array((e+1)*(2*a)+(t+1)*(2*o)+8);for(let c=0;c<e+1;c++)for(let e=0;e<a;e++){const t=c*i;r[2*(c*a+e)+0]=e*(1+o)+t,r[2*(c*a+e)+1]=(e+1)*(1+o)+t}const s=(e+1)*(2*a);for(let c=0;c<t;c++)for(let e=0;e<o;e++){const t=c*n;r[s+2*(e+c*o)]=t*(1+o)+e,r[s+2*(e+c*o)+1]=t*(1+o)+e+1}const l=(e+1)*(2*a)+(t+1)*(2*o);return r[l]=0,r[l+1]=(1+o)*(1+a),r[l+2]=o,r[l+3]=(1+o)*(1+a),r[l+4]=(1+o)*a,r[l+5]=(1+o)*(1+a),r[l+6]=(1+o)*(1+a)-1,r[l+7]=(1+o)*(1+a),r}(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),w=t.getDefaultRenderState(!0,!1,void 0),O=i.fromCache(w),x=new n({sources:["\n        // 使用double类型的position进行计算\n        // attribute vec3 position3DHigh;\n        // attribute vec3 position3DLow;\n        attribute vec3 position;\n        attribute vec3 normal;\n        // attribute vec2 st;\n        // attribute float batchId;\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        void main()\n          {\n            // 使用double类型的position进行计算\n            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            // position in eye coordinates\n            // v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            // gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;\n            // position in eye coordinates\n            v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n          }\n        "]}),S=new n({sources:["\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        // uniform sampler2D myImage;\n        uniform vec4 vcColor;\n        void main()\n        {\n          vec3 positionToEyeEC = -v_positionEC;\n          vec3 normalEC = normalize(v_normalEC);\n          #ifdef FACE_FORWARD\n          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n          #endif\n          czm_materialInput materialInput;\n          materialInput.normalEC = normalEC;\n          materialInput.positionToEyeEC = positionToEyeEC;\n          // materialInput.st = v_st;\n          //czm_material material = czm_getMaterial(materialInput);\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          // material.diffuse = texture2D(myImage, materialInput.st).rgb;\n          material.diffuse = vcColor.rgb;\n          material.alpha = vcColor.a;\n          #ifdef FLAT\n          gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n          #else\n          gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n          #endif\n        }\n        "]}),_={vcColor:function(){return v._faceColor}},E={vcColor:function(){return v._lineColor}},P=o.fromCache({context:e,vertexShaderSource:x,fragmentShaderSource:S,attributeLocations:oa});this._shaderprogram=P;const T=Cesium.Buffer.createVertexBuffer({context:e,typedArray:f,usage:a.STATIC_DRAW}),M=Cesium.Buffer.createVertexBuffer({context:e,typedArray:y,usage:a.STATIC_DRAW}),I=Cesium.Buffer.createIndexBuffer({context:e,typedArray:b,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),j=Cesium.Buffer.createIndexBuffer({context:e,typedArray:C,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),L=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:I}),A=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:j});this._initBoundingSphere=c.fromVertices(f),this._command=new u({vertexArray:L,primitiveType:d.TRIANGLES,renderState:O,shaderProgram:P,uniformMap:_,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0}),this._lineCommand=new u({vertexArray:A,primitiveType:d.LINES,renderState:O,shaderProgram:P,uniformMap:E,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0})}_destroyVideoMemory(){const{defined:e}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),e(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),e(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function ra(e,t,i,n){const o=new Float32Array((i+1)*(n+1)*3+3);for(let a=0;a<i+1;a++)for(let r=0;r<n+1;r++){const s=e*(a/i-.5),l=t*(r/n-.5),c=[Math.cos(-s)*Math.cos(-l),Math.sin(-s)*Math.cos(-l),Math.sin(l)];o[3*(r*(i+1)+a)+0]=c[0],o[3*(r*(i+1)+a)+1]=c[1],o[3*(r*(i+1)+a)+2]=c[2]}return o[(i+1)*(n+1)*3+0]=0,o[(i+1)*(n+1)*3+1]=0,o[(i+1)*(n+1)*3+2]=0,o}let sa=!1;let la,ca=!1;class ua{constructor(e,t){const{defined:i,DeveloperError:n,PerspectiveFrustum:o,Math:a,Camera:r,ShadowMap:s,ShadowMode:l,Event:c,Cartesian3:u,defaultValue:d,Color:p}=Cesium;if(!i(e))throw new n("scene is required.");this._scene=e,this._frustum=new o,this._frustum.fov=a.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new r(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new s({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),t=t||{},this._scene.globe.shadows=l.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new aa({}),this._enabledChangedEvent=new c,this._position=new u,this._offsetHeight=d(t.offsetHeight,1.8),this._visibleColor=d(t.visibleColor,new p(0,1,0,1)),this._invisibleColor=d(t.invisibleColor,new p(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=t.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=d(t.lineColor,new p(1,1,1,.4)),this._debugCameraPrimitive.faceColor=d(t.faceColor,new p(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(e){this.frustum.near!==e&&(this.frustum.near=e)}get far(){return this.far.near}set far(e){this.frustum.far!==e&&(this.frustum.far=e)}get position(){return this._position}set position(e){e instanceof Cesium.Cartesian3&&this.setView({destination:e.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(e){if(isNaN(e)||null==e||null==e)throw new Error("Unacceptable offset.");this._offsetHeight=Number(e),this.setView({destination:this._position,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(e){this._spotLightCamera.heading!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:e,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(e){this._spotLightCamera.pitch!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:e,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(e){this._spotLightCamera.roll!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:e}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(e){this._viewshedShadowMap.enabled!==e&&(e?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(e))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e,this._viewshedShadowMap._viewshedColors.visible=e}get invisibleColor(){return this._invisibleColor}set invisibleColor(e){this._invisibleColor=e,this._viewshedShadowMap._viewshedColors.invisible=e}get showGridLine(){return this._showGridLine}set showGridLine(e){this._showGridLine=e,this._debugCameraPrimitive.show=e}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(e){this._debugCameraPrimitive.faceColor=e}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(e){this._debugCameraPrimitive.lineColor=e}update(e){if(this._viewshedShadowMap.enabled){const{ShadowMode:t,Matrix3:i,Matrix4:n,Math:o}=Cesium;if(this._scene.globe.shadows!==t.ENABLED&&(this._scene.globe.shadows=t.ENABLED),e.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const t=this._debugCameraPrimitive.modelMatrix;n.clone(this._spotLightCamera.inverseViewMatrix,t);const a=i.fromRotationZ(.5*o.PI),r=i.fromRotationY(.5*o.PI),s=new i;i.multiply(a,r,s),n.multiplyByMatrix3(t,s,t),n.multiplyByUniformScale(t,this._spotLightCamera.frustum.far,t);const l=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=l.aspectRatio<=1?l.fov:2*Math.atan(Math.tan(.5*l.fov)/l.aspectRatio),this._debugCameraPrimitive.fovH=1<l.aspectRatio?l.fov:2*Math.atan(Math.tan(.5*l.fov)*l.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(e)}}}setView(e){const t=(e=e||{}).destination;if(t instanceof Cesium.Cartesian3){this._position=t.clone();const i=this._offsetHeight,n=Cesium.Cartographic.fromCartesian(t,this._scene.globe.ellipsoid);if(n){n.height=n.height+i;const t=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this._scene.globe.ellipsoid);e.destination=t}}this._spotLightCamera.setView(e)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}const da=[class{static extend(e){if(sa)return;const{Rectangle:t}=Cesium;t.prototype.expand=function(e,i,n){return e=(n=n&&n instanceof t?n:this.clone()).width*(1-e)/2,i=n.height*(1-i)/2,n.west+=e,n.south+=i,n.east-=e,n.north-=i,n.west=n.west<-Math.PI?-Math.PI:n.west,n.east=n.east>Math.PI?Math.PI:n.east,n.north=n.north>Math.PI/2?Math.PI/2:n.north,n.south=n.south<-Math.PI/2?-Math.PI/2:n.south,n},sa=!0}static revoke(e){if(!sa)return;const{Rectangle:t}=Cesium;t.prototype.expand=void 0,sa=!1}},class{static extend(e){if(ca)return;const t=Cesium.ShadowMapShader;la=t.createShadowReceiveFragmentShader,t.createShadowReceiveFragmentShader=function(e,t,i,n,o){e=la.bind(this)(e,t,i,n,o);return t._isSpotLight&&(e.sources[0]=`\n          uniform vec4 shadowMap_viewshedVisibleColor;\n          uniform vec4 shadowMap_viewshedInvisibleColor;\n          ${e.sources[0]}\n        `,e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("gl_FragColor.rgb *= visibility;","\n          float _depth = shadowPosition.z - shadowParameters.depthBias;\n          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);\n          gl_FragColor.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);\n          "),e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")),e},ca=!0}static revoke(e){if(!ca)return;Cesium.ShadowMapShader.createShadowReceiveFragmentShader=la,ca=!1}}];const pa=zo;function ma(t,i,n){let o,a;const r=new Promise(((e,t)=>{o=e,a=t})),s=e(null),l=e(!1),c=g(),{emit:u}=i,d=ne(),m=ve(n);n.mounted=!1,n.vcMitt=c,n.cesiumClass="Viewer",n.children=[];const v=qn(t,n,m),y=b({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let O=[];m.debug("viewer creating");const{t:x}=Yn(),{invokeExtensions:S,revokeExtensions:_}={invokeExtensions:e=>{da.forEach((t=>{t.extend(e)}))},revokeExtensions:e=>{da.forEach((t=>{t.revoke(e)}))}};f((()=>t.selectionIndicator),(e=>{const{viewer:t,viewerElement:i}=n,{defined:o,SelectionIndicator:a}=Cesium;let r;if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()||e){if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-selectionIndicatorContainer",null==i||i.appendChild(r);const e=new a(r,t.scene);t._selectionIndicator=e}}else r=t.selectionIndicator.container,null==i||i.removeChild(r),t.selectionIndicator.destroy(),t._selectionIndicator=void 0;t.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:e?"added":"removed",target:r})})),f((()=>t.infoBox),(e=>{var t,i;const{viewer:o,viewerElement:a}=n,{defined:r,InfoBox:s}=Cesium,l=["cameraClicked","closeClicked"];let c;if(!r(o.infoBox)||o.infoBox.isDestroyed()||e){if(!r(o.infoBox)||o.infoBox.isDestroyed()){c=document.createElement("div"),c.className="cesium-viewer-infoBoxContainer",null==a||a.appendChild(c);const e=new s(c),n=e.viewModel;o._onInfoBoxCameraClicked&&(null==(t=o._eventHelper)||t.add(n.cameraClicked,o._onInfoBoxCameraClicked,o)),o._onInfoBoxClockClicked&&(null==(i=o._eventHelper)||i.add(n.closeClicked,o._onInfoBoxClockClicked,o)),n&&v.bindEvents(n,l,!0),o._infoBox=e}}else{const e=o.infoBox.viewModel;e&&v.bindEvents(e,l,!1),c=o.infoBox.container,null==a||a.removeChild(c),o.infoBox.destroy(),o._infoBox=void 0}o.forceResize(),o.viewerWidgetResized.raiseEvent({type:"infoBox",status:e?"added":"removed",target:c})})),f((()=>t.geocoder),(e=>{var i;const{viewer:o}=n,a=o._toolbar,{defined:r,Geocoder:s}=Cesium;let l;if(!r(o.geocoder)||o.geocoder.isDestroyed()||e){if(!r(o.geocoder)||o.geocoder.isDestroyed()){l=document.createElement("div"),l.className="cesium-viewer-geocoderContainer",null==a||a.appendChild(l);const e=new s({container:l,geocoderServices:r(t.geocoder)&&"boolean"!=typeof t.geocoder?Array.isArray(t.geocoder)?t.geocoder:[t.geocoder]:void 0,scene:o.scene});o._clearObjects&&(null==(i=o._eventHelper)||i.add(e.viewModel.search.beforeExecute,o._clearObjects,o)),o._geocoder=e,B(a)}}else l=o.geocoder.container,null==a||a.removeChild(l),o.geocoder.destroy(),o._geocoder=void 0;o.viewerWidgetResized.raiseEvent({type:"geocoder",status:e?"added":"removed",target:l})})),f((()=>t.homeButton),(e=>{var t,i;const{viewer:o}=n,a=o._toolbar,{defined:r,HomeButton:s}=Cesium;if(!r(o.homeButton)||o.homeButton.isDestroyed()||e){if(!r(o.homeButton)||o.homeButton.isDestroyed()){const e=new s(a,o.scene);r(o.geocoder)&&(null==(t=o._eventHelper)||t.add(e.viewModel.command.afterExecute,(function(){const e=o.geocoder.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}))),o._clearTrackedObject&&(null==(i=o._eventHelper)||i.add(e.viewModel.command.beforeExecute,o._clearTrackedObject,o)),o._homeButton=e,B(a)}}else o.homeButton.destroy(),o._homeButton=void 0;o.viewerWidgetResized.raiseEvent({type:"homeButton",status:e?"added":"removed",target:a})})),f((()=>t.sceneModePicker),(e=>{const{viewer:i}=n,o=i._toolbar,{defined:a,DeveloperError:r,SceneModePicker:s}=Cesium;if(!a(i.sceneModePicker)||i.sceneModePicker.isDestroyed()||e){if(!a(i.sceneModePicker)||i.sceneModePicker.isDestroyed()){if(t.sceneModePicker&&t.scene3DOnly)throw new r("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!t.scene3DOnly&&t.sceneModePicker){const e=new s(o,i.scene);i._sceneModePicker=e,B(o)}}}else i.sceneModePicker.destroy(),i._sceneModePicker=void 0;i.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:e?"added":"removed",target:o})})),f((()=>t.projectionPicker),(e=>{const{viewer:t}=n,i=t._toolbar,{defined:o,ProjectionPicker:a}=Cesium;if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()||e){if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()){const e=new a(i,t.scene);t._projectionPicker=e,B(i)}}else t.projectionPicker.destroy(),t._projectionPicker=void 0;t.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:e?"added":"removed",target:i})})),f((()=>t.baseLayerPicker),(e=>{const{viewer:i}=n,o=i._toolbar,{defined:a,buildModuleUrl:r,DeveloperError:s,defaultValue:l,createDefaultImageryProviderViewModels:c,createDefaultTerrainProviderViewModels:u,BaseLayerPicker:d}=Cesium;if(!a(i.baseLayerPicker)||i.baseLayerPicker.isDestroyed()||e){if(!a(i.baseLayerPicker)||i.baseLayerPicker.isDestroyed()){const e=!(Cesium.defined(i.scene.globe)&&!1===t.globe||Cesium.defined(i.baseLayerPicker)&&!1===t.baseLayerPicker);if(e&&a(t.imageryProvider))throw new s("options.imageryProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!e&&a(t.selectedImageryProviderViewModel))throw new s("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(e&&a(t.terrainProvider))throw new s("options.terrainProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!e&&a(t.selectedTerrainProviderViewModel))throw new s("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(e){const e=l(t.imageryProviderViewModels,c()),n=l(t.terrainProviderViewModels,u()),a=new d(o,{globe:i.scene.globe,imageryProviderViewModels:e,selectedImageryProviderViewModel:e[0],terrainProviderViewModels:n,selectedTerrainProviderViewModel:n[0]}),r=null==o?void 0:o.getElementsByClassName("cesium-baseLayerPicker-dropDown"),s=null==r?void 0:r[0];i._baseLayerPickerDropDown=s,i._baseLayerPicker=a,i.imageryLayers.raiseToTop(i.imageryLayers.get(0)),B(o)}}}else{i.baseLayerPicker.destroy(),i._baseLayerPicker=void 0,i.imageryLayers.remove(i.imageryLayers.get(i.imageryLayers.length-1));const e=r("Assets/Textures/NaturalEarthII"),t=i.imageryLayers.addImageryProvider(new Cesium.TileMapServiceImageryProvider({url:e}));i.imageryLayers.lowerToBottom(t)}i.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:e?"added":"removed",target:o})})),f((()=>t.navigationHelpButton),(e=>{const{viewer:i}=n,o=i._toolbar,{defined:a,defaultValue:r,NavigationHelpButton:s}=Cesium;if(!a(i.navigationHelpButton)||i.navigationHelpButton.isDestroyed()||e){if(!a(i.navigationHelpButton)||i.navigationHelpButton.isDestroyed()){let e=!0;try{if(a(window.localStorage)){const t=window.localStorage.getItem("cesium-hasSeenNavHelp");a(t)&&Boolean(t)?e=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(Ih){}const n=new s({container:o,instructionsInitiallyVisible:r(t.navigationInstructionsInitiallyVisible,e)});i._navigationHelpButton=n,B(o)}}else i.navigationHelpButton.destroy(),i._navigationHelpButton=void 0;i.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:e?"added":"removed",target:o})})),f((()=>t.animation),(e=>{const{viewer:t,viewerElement:i}=n,{defined:o,Animation:a,AnimationViewModel:r}=Cesium;let s;if(!o(t.animation)||t.animation.isDestroyed()||e){if(!o(t.animation)||t.animation.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-animationContainer",null==i||i.appendChild(s);const e=new a(s,new r(t.clockViewModel));e.viewModel.dateFormatter=A,e.viewModel.timeFormatter=D,t._animation=e}}else s=t.animation.container,null==i||i.removeChild(s),t.animation.destroy(),t._animation=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"animation",status:e?"added":"removed",target:s})})),f((()=>t.timeline),(e=>{var t;const{viewer:i,viewerElement:o}=n,{defined:a,Timeline:r}=Cesium;let s;if(!a(i.timeline)||i.timeline.isDestroyed()||e){if(!a(i.timeline)||i.timeline.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-timelineContainer",null==o||o.appendChild(s);const e=new r(s,i.clock);e.makeLabel=e=>A(e),null==(t=e.addEventListener)||t.call(e,"settime",k,!1),e.zoomTo(i.clock.startTime,i.clock.stopTime),i._timeline=e}}else s=i.timeline.container,null==o||o.removeChild(s),i.timeline.destroy(),i._timeline=void 0;i.forceResize(),i.viewerWidgetResized.raiseEvent({type:"timeline",status:e?"added":"removed",target:s})})),f((()=>t.fullscreenButton),(e=>{const{viewer:t,viewerElement:i}=n,{defined:o,FullscreenButton:a}=Cesium;let r;if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()||e){if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-fullscreenContainer",null==i||i.appendChild(r);const e=new a(r,i);t._fullscreenButton=e}}else r=t.fullscreenButton.container,null==i||i.removeChild(r),t.fullscreenButton.destroy(),t._fullscreenButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),f((()=>t.fullscreenElement),(e=>{const{viewer:t}=n,{defined:i}=Cesium;i(t.fullscreenButton)&&i(e)&&(t.fullscreenButton.viewModel.fullscreenElement=e)})),f((()=>t.vrButton),(e=>{const{viewer:t,viewerElement:i}=n,{defined:o,VRButton:a}=Cesium;let r;if(!o(t.vrButton)||t.vrButton.isDestroyed()||e){if(!o(t.vrButton)||t.vrButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-vrContainer",null==i||i.appendChild(r);const e=new a(r,t.scene,i),n=e.viewModel.command;e.viewModel._command=function(e){n(),R(t,e.isVRMode)},t._vrButton=e}}else r=t.vrButton.container,null==i||i.removeChild(r),t.vrButton.destroy(),t._vrButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),f((()=>t.useDefaultRenderLoop),(e=>{n.viewer.useDefaultRenderLoop=e})),f((()=>t.sceneMode),(e=>{const{SceneMode:t}=Cesium;t.COLUMBUS_VIEW!==e&&t.MORPHING!==e&&t.SCENE2D!==e&&t.SCENE3D!==e||(n.viewer.scene.mode=e)})),f((()=>t.shouldAnimate),(e=>{n.viewer.clock.shouldAnimate=e})),f((()=>t.terrainExaggeration),(e=>{n.viewer._terrainExaggeration=e})),f((()=>t.shadows),(e=>{n.viewer.scene.shadowMap.enabled=e})),f((()=>t.terrainProvider),(e=>{e&&(n.viewer.terrainProvider=e)})),f((()=>t.camera),(e=>{Re(n.viewer,e)}),{deep:!0}),f((()=>t.imageryProvider),((e,t)=>{const{viewer:i}=n,{defined:o}=Cesium;if(o(e)){for(let e=0;e<i.imageryLayers.length;e++)i.imageryLayers.get(e).imageryProvider===t&&i.imageryLayers.remove(i.imageryLayers[e]);e&&i.imageryLayers.addImageryProvider(e)}})),f((()=>t.showCredit),(e=>{const{viewer:t}=n;t.cesiumWidget.creditContainer.style.display=e?"inline":"none",t.viewerWidgetResized.raiseEvent({type:"credit",status:e?"added":"removed",target:t.cesiumWidget.creditContainer})})),f((()=>t.debugShowFramesPerSecond),(e=>{const{viewer:t}=n;t.scene.debugShowFramesPerSecond=e}));const E=async function(){var e,i,o;if(m.debug("loading-viewer"),n.mounted)return!1;if(await async function(){m.debug("beforeLoad - viewer"),be(n,"beforeLoad")&&u("beforeLoad",n),d.value.__scriptPromise=d.value.__scriptPromise||T(),await d.value.__scriptPromise}(),"undefined"==typeof Cesium)return!1;const{Ion:a,buildModuleUrl:r,TileMapServiceImageryProvider:h,Viewer:g,defined:f,Math:y,Event:b}=Cesium,C=t.accessToken?t.accessToken:d.value.accessToken;a.defaultAccessToken=C;const{animation:O,baseLayerPicker:x,fullscreenButton:_,vrButton:E,geocoder:P,homeButton:M,infoBox:I,sceneModePicker:k,selectionIndicator:R,timeline:B,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:te,automaticallyTrackDataSourceClocks:ie,contextOptions:ne,sceneMode:oe,mapProjection:ae,globe:le,orderIndependentTranslucency:ce,creditContainer:ue,creditViewport:de,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ge,projectionPicker:fe,requestRenderMode:ye,maximumRenderTimeChange:we,camera:Oe,navigation:xe}=t,Se=r("Assets/Textures/NaturalEarthII");let _e,Ee={animation:O,baseLayerPicker:x,fullscreenButton:_,vrButton:E,geocoder:P,homeButton:M,infoBox:I,sceneModePicker:k,selectionIndicator:R,timeline:B,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:se(Z)?new h({url:Se}):Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:se(Q)?Ce(s):Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:te,automaticallyTrackDataSourceClocks:ie,contextOptions:ne,sceneMode:oe,mapProjection:ae,globe:le,orderIndependentTranslucency:ce,creditContainer:ue,creditViewport:de,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ge,projectionPicker:fe,requestRenderMode:ye,maximumRenderTimeChange:we,navigation:xe};Ee=re(Ee),Cesium.VERSION>="1.83"&&delete Ee.terrainExaggeration,t.viewerCreator?_e=t.viewerCreator(n,Ce(s),Ee):globalThis.mars3d?(n.map=new mars3d.Map(Ce(s).id,{scene:Ee,control:Ee}),_e=null==(e=n.map)?void 0:e._viewer):globalThis.DC?(n.dcViewer=new DC.Viewer(Ce(s).id,Ee),_e=null==(i=n.dcViewer)?void 0:i.delegate):globalThis.XE?(n.earth=new globalThis.XE.Earth(Ce(s),Ee),_e=null==(o=n.earth)?void 0:o.czm.viewer):_e=new g(Ce(s),Ee),S(_e),n.Cesium=Cesium,n.viewer=_e,n.viewerElement=_e._element,n.mounted=!0,Cesium.VERSION>="1.83"&&(_e.scene.globe.terrainExaggeration=me),f(Oe)&&Re(_e,Oe);be(n,"update:camera")&&_e.camera.changed.addEventListener((()=>{const e=_e.camera.positionCartographic;let t;t=p(Oe.position,"lng")?{position:{lng:y.toDegrees(e.longitude),lat:y.toDegrees(e.latitude),height:e.height},heading:y.toDegrees(_e.camera.heading||360),pitch:y.toDegrees(_e.camera.pitch||-90),roll:y.toDegrees(_e.camera.roll||0)}:{position:{x:_e.camera.position.x,y:_e.camera.position.y,z:_e.camera.position.z},heading:_e.camera.heading||2*Math.PI,pitch:_e.camera.pitch||-Math.PI/2,roll:_e.camera.roll||0},u("update:camera",t)})),f(_e.animation)&&(_e.animation.viewModel.dateFormatter=A,_e.animation.viewModel.timeFormatter=D),f(_e.timeline)&&(_e.timeline.makeLabel=e=>A(e),_e.timeline.zoomTo(_e.clock.startTime,_e.clock.stopTime)),!t.showCredit&&(_e.cesiumWidget.creditContainer.style.display="none"),t.debugShowFramesPerSecond&&(_e.scene.debugShowFramesPerSecond=!0),_e.viewerWidgetResized=_e.viewerWidgetResized||new b,_e.viewerWidgetResized.addEventListener(j),_e.imageryLayers.layerAdded.addEventListener(L),v.registerEvents(!0);const Pe={Cesium:Cesium,viewer:_e,vm:n.proxy};globalThis.XE?Object.assign(Pe,{earth:n.earth}):globalThis.mars3d?Object.assign(Pe,{map:n.map}):globalThis.DC&&Object.assign(Pe,{dcViewer:n.dcViewer});return be(n,"ready")&&u("ready",Pe),null==c||c.emit("ready",Pe),w((()=>{_e.resize(),j({type:"viewer",status:"added",target:_e.container}),l.value=!0})),m.debug("loaded-viewer"),Object.assign(n.proxy,{cesiumObject:_e}),Pe},P=async function(){if(!n.mounted)return!1;let e;m.debug("viewer---unloading"),d.value.__viewerUnloadingPromise=new Promise(((t,i)=>{e=t}));for(let t=0;t<n.children.length;t++){const e=n.children[t].proxy;await e.unload()}n.children.length=0;const{viewer:i,earth:o,map:a,dcViewer:r}=n;globalThis.Cesium&&(i.imageryLayers.layerAdded.removeEventListener(L),v.registerEvents(!1));const{removeCesiumScript:s}=t;if(i._vcPickScreenSpaceEventHandler&&i._vcPickScreenSpaceEventHandler.destroy(),i._vcViewerScreenSpaceEventHandler&&i._vcViewerScreenSpaceEventHandler.destroy(),i._vcPickScreenSpaceEventHandler=void 0,i._vcViewerScreenSpaceEventHandler=void 0,s&&_(i),delete n.appContext.config.globalProperties.$VueCesium[i.container.id],globalThis.XE?o&&o.destroy():globalThis.mars3d?a&&a.destroy():globalThis.DC?r&&r.destroy():i&&i.destroy(),n.viewer=void 0,n.mounted=!1,s&&globalThis.Cesium){const e=document.getElementsByTagName("script"),t=[];for(const n of e)n.src.indexOf("/Cesium.js")>-1&&t.push(n),n.src.indexOf("/Workers/zlib.min.js")>-1&&t.push(n),globalThis.XE&&(n.src.indexOf("/rxjs.umd.min.js")>-1&&t.push(n),n.src.indexOf("/XbsjCesium.js")>-1&&t.push(n),n.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&t.push(n),n.src.indexOf("/XbsjEarth.js")>-1&&t.push(n)),O.includes(n.src)&&!t.includes(n)&&t.push(n);const i=document.getElementsByTagName("link");for(const n of i)n.href.includes("Widgets/widgets.css")&&!t.includes(n)&&t.push(n),O.includes(n.href)&&!t.includes(n)&&t.push(n);t.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),d.value.__scriptPromise=void 0,O=[]}return be(n,"destroyed")&&u("destroyed",n),m.debug("viewer---unloaded"),e(!0),d.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},T=async function(){if(m.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{const e=t.cesiumPath?t.cesiumPath:d.value.cesiumPath,i=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";let t=e.charCodeAt(0);const i=47===t;let n=-1,o=!0;for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!o){n=a;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)}(e),o=d.value.mars3dConfig||t.mars3dConfig;if(o){const e=o.libs||{"font-awesome":["https://unpkg.com/font-awesome@latest/css/font-awesome.min.css"],haoutil:["https://unpkg.com/haoutil@latest/dist/haoutil-src.js"],turf:["https://unpkg.com/@turf/turf@latest/turf.min.js"],"mars3d-space":["https://unpkg.com/mars3d-space@latest/dist/mars3d-space.js"],"mars3d-echarts":["https://unpkg.com/echarts@latest/dist/echarts.min.js","https://unpkg.com/echarts-gl@latest/dist/echarts-gl.min.js","https://unpkg.com/mars3d-echarts@latest/dist/mars3d-echarts.js"],"mars3d-mapv":["https://unpkg.com/mapv@latest/build/mapv.min.js","https://unpkg.com/mars3d-mapv@latest/dist/mars3d-mapv.js"],"mars3d-heatmap":["https://unpkg.com/heatmapjs@latest/heatmap.min.js","https://unpkg.com/mars3d-heatmap@latest/dist/mars3d-heatmap.js"],"mars3d-wind":["https://unpkg.com/netcdfjs@latest/lib/index.js","https://unpkg.com/mars3d-wind@latest/dist/mars3d-wind.js"],"mars3d-tdt":["https://unpkg.com/mars3d-tdt@latest/dist/mars3d-tdt.js"],"mars3d-widget":["https://unpkg.com/mars3d-widget@latest/dist/mars3d-widget.js"],mars3d:["https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Widgets/widgets.css","https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Cesium.js","https://unpkg.com/mars3d@latest/dist/mars3d.css","https://unpkg.com/mars3d@latest/dist/mars3d.js"]},t=(o.include||"mars3d").trim().split(","),i={};for(let n=0,o=t.length;n<o;n++){const o=t[n];i[o]||(i[o]=!0,O.push(...e[o]))}}else e.includes("dc.base")?(O.push(e),O.push(e.replace("dc.base","dc.core")),O.push(e.replace("dc.base","dc.core").replace(".js",".css"))):e.includes("/XbsjEarth.js")?O.push(e):(O.push(e),O.push(`${i}/Widgets/widgets.css`));const r=O;if(o){const e=O.find((e=>e.includes("Cesium.js")));await M(e),r.splice(r.indexOf(e),1)}const s=[];return r.forEach((e=>{new RegExp("\\.css").test(e)?s.push(I(e)):s.push(M(e))})),Promise.all(s).then((()=>{if(globalThis.Cesium){return be(n,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium}return globalThis.XE?globalThis.XE.ready().then((()=>(be(n,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium))):globalThis.DC?(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${i}/resources/`,globalThis.DC.ready((()=>{globalThis.Cesium=DC.Namespace.Cesium;return be(n,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium})),globalThis.Cesium):void a(new Error("VueCesium ERROR: Error loading CesiumJS!"))}))}},M=e=>{const t=document.createElement("script");return t.async=!0,t.src=e,document.body.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},I=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.href=e,document.head.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},j=e=>{var t,i;const{viewer:o}=n,a=o._toolbar;void 0!==a&&"hidden"!==getComputedStyle(a).visibility&&"none"!==getComputedStyle(a).display?y.toolbarContainerRC=a.getBoundingClientRect():y.toolbarContainerRC=void 0;const r=o.bottomContainer;void 0!==r&&"hidden"!==getComputedStyle(r).visibility&&"none"!==getComputedStyle(r).display?y.bottomContainerRC=r.getBoundingClientRect():y.bottomContainerRC=void 0;const s=null==(t=o.timeline)?void 0:t.container;void 0!==s&&"hidden"!==getComputedStyle(s).visibility&&"none"!==getComputedStyle(s).display?y.timelineContainerRC=s.getBoundingClientRect():y.timelineContainerRC=void 0;const l=null==(i=o.animation)?void 0:i.container;void 0!==l&&"hidden"!==getComputedStyle(l).visibility&&"none"!==getComputedStyle(l).display?y.animationContainerRC=l.getBoundingClientRect():y.animationContainerRC=void 0,o.resize();be(n,"viewerWidgetResized")&&u("viewerWidgetResized",e)},L=e=>{const i=n.viewer,{autoSortImageryLayers:o}=t;i.baseLayerPicker&&i.imageryLayers.raiseToTop(e);const{defined:a}=Cesium;o&&(e.sortOrder=a(e.sortOrder)?e.sortOrder:9999,i.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),i.imageryLayers._update())},A=function(e,i,n){const{JulianDate:o}=Cesium;let a;if(t.UTCOffset){e=o.addMinutes(e,t.UTCOffset,new o);const i=(new Date).getTimezoneOffset()-t.UTCOffset;a=0===i?"UTC":"UTC+"+-i/60}else a=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const r=o.toDate(e),s=r.toLocaleString(x("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=r.toLocaleString(x("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!i&&r.getHours()+r.getMinutes()!==0?(t.TZCode&&(a=t.TZCode),n?`${s} ${a}`:`${l} ${s} ${a}`):l},D=function(e,t){return A(e,t,!0)},k=function(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1},R=function(e,t){const i=e._geocoder,n=e._homeButton,o=e._sceneModePicker,a=e._projectionPicker,r=e._baseLayerPicker,s=e._animation,l=e._timeline,c=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,p=t?"hidden":"visible",{defined:m}=Cesium;if(m(i)&&(i.container.style.visibility=p),m(n)&&(n.container.style.visibility=p),m(o)&&(o.container.style.visibility=p),m(a)&&(a.container.style.visibility=p),m(r)&&(r.container.style.visibility=p),m(s)&&(s.container.style.visibility=p),m(l)&&(l.container.style.visibility=p),m(c)&&c.viewModel.isFullscreenEnabled&&(c.container.style.visibility=p),m(u)&&(u.container.style.visibility=p),m(d)&&(d.container.style.visibility=p),e._container){const i=t||!m(c)?0:c.container.clientWidth;e._vrButton.container.style.right=i+"px",e.forceResize()}},B=function(e,t){Array.prototype.slice.call(e.children).forEach((e=>{switch(e.className){case"cesium-viewer-geocoderContainer":e.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":e.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":e.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":e.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":e.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":e.customIndex=6}}));const i=[];Array.prototype.slice.call(e.children).forEach((e=>{i.push(e)})),i.sort((function(e,t){return e.customIndex-t.customIndex}));for(let n=0;n<i.length;n++)e.appendChild(i[n])};return Object.defineProperties(n,{cesiumObject:{enumerable:!0,get:()=>n.viewer}}),C((async()=>{var e;try{m.debug("viewer - onMounted"),await(null==(e=d.value)?void 0:e.__viewerUnloadingPromise),E().then((e=>{o(e)})).catch((e=>{u("unready",e),a(e)}))}catch(Ih){u("unready",Ih),a(Ih)}})),h((()=>{m.debug("viewer - onUnmounted"),P().then((()=>{c.all.clear()}))})),{isReady:l,load:E,unload:P,reload:function(){return P().then((()=>E()))},getServices:function(){return fe({},{get layout(){return y},get vm(){return n},get Cesium(){return n.Cesium},get viewer(){return n.viewer},get dataSources(){var e;return null==(e=n.viewer)?void 0:e.dataSources},get entities(){var e;return null==(e=n.viewer)?void 0:e.entities},get imageryLayers(){var e;return null==(e=n.viewer)?void 0:e.imageryLayers},get primitives(){var e;return null==(e=n.viewer)?void 0:e.scene.primitives},get groundPrimitives(){var e;return null==(e=n.viewer)?void 0:e.scene.groundPrimitives},get postProcessStages(){var e;return null==(e=n.viewer)?void 0:e.postProcessStages},get creatingPromise(){return r}})},viewerRef:s,creatingPromise:r}}const va=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],ha=Xn.map((e=>F(e))),ga=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...Xn,...ha,...Qn];va.reduce(((e,t)=>e.concat(t.events)),ga);const fa={xs:18,sm:24,md:32,lg:38,xl:46},ya={size:String};function ba(e,t=fa){return i((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function Ca(e,t){return void 0!==e?e():t}function wa(e,t){return void 0!==e?t.concat(e()):t}var Oa=S({name:"VcIcon",props:{...ya,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const n=ba(e),o=i((()=>{const t=n.value;if(t)return e.color&&(t.color=e.color),e.hoverColor&&(t["--hover-color"]=e.hoverColor),t})),a=i((()=>"vc-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),r=i((()=>{let t,i=e.name;if(!i)return{none:!0,cls:a.value};if(!0===i.startsWith("M")){const[e,t]=i.split("|");return{svg:!0,cls:a.value,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return O("path",{style:i,d:t,transform:n})})),viewBox:void 0!==t?t:"0 0 24 24"}}if(!0===i.startsWith("img:"))return{img:!0,cls:a.value,src:i.substring(4)};if(!0===i.startsWith("svguse:")){const[e,t]=i.split("|");return{svguse:!0,cls:a.value,src:e.substring(7),viewBox:void 0!==t?t:"0 0 24 24"}}let n=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(i)||!0===i.startsWith("icon-")?t=i:!0===i.startsWith("bt-")?t=`bt ${i}`:!0===i.startsWith("eva-")?t=`eva ${i}`:!0===/^ion-(md|ios|logo)/.test(i)?t=`ionicons ${i}`:!0===i.startsWith("ion-")?t=`ionicons ion-md${i.substr(3)}`:!0===i.startsWith("mdi-")?t=`mdi ${i}`:!0===i.startsWith("iconfont ")?t=`${i}`:!0===i.startsWith("ti-")?t=`themify-icon ${i}`:!0===i.startsWith("vc-")?t=`vc-icons ${i}`:(t="notranslate material-icons",!0===i.startsWith("o_")?(i=i.substring(2),t+="-outlined"):!0===i.startsWith("r_")?(i=i.substring(2),t+="-round"):!0===i.startsWith("s_")&&(i=i.substring(2),t+="-sharp"),n=i),{cls:t+" "+a.value,content:n}}));return()=>{const i={class:r.value.cls,style:o.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return!0===r.value.none?O(e.tag,i,Ca(t.default)):!0===r.value.img?(i.src=r.value.src,i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("img",i)):!0===r.value.svg?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("svg",i,wa(t.default,r.value.nodes))):!0===r.value.svguse?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("svg",i,wa(t.default,[O("use",{"xlink:href":r.value.src})]))):O(e.tag,i,wa(t.default,[r.value.content]))}}});const xa={size:{type:[Number,String],default:"1em"},color:String};function Sa(e){return{cSize:i((()=>e.size in fa?`${fa[e.size]}px`:e.size)),classes:i((()=>"vc-spinner"+(e.color?` text-${e.color}`:"")))}}const _a=[O("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[O("circle",{cx:"5",cy:"50",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"27",cy:"5",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"49",cy:"50",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var Ea=S({name:"VcSpinnerBall",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},_a)}});const Pa=[O("rect",{y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"60",width:"15",height:"140",rx:"6"},[O("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var Ta=S({name:"VcSpinnerBars",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},Pa)}});const Ma=[O("circle",{cx:"15",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[O("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"105",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Ia=S({name:"VcSpinnerDots",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ma)}});const ja=[O("g",{transform:"translate(-20,-20)"},[O("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),O("g",{transform:"translate(20,20) rotate(15 50 50)"},[O("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var La=S({name:"VcSpinnerGears",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},ja)}});const Aa=[O("g",[O("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),O("clipPath",{id:"uil-hourglass-clip1"},[O("rect",{x:"15",y:"20",width:" 70",height:"25"},[O("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),O("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),O("clipPath",{id:"uil-hourglass-clip2"},[O("rect",{x:"15",y:"55",width:" 70",height:"25"},[O("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),O("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),O("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),O("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Da=S({name:"VcSpinnerHourglass",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Aa)}});const ka=[O("g",{"stroke-width":"4","stroke-linecap":"round"},[O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Ra=S({name:"VcSpinnerIos",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},ka)}});const Ba=[O("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),O("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Na=S({name:"VcSpinnerOrbit",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ba)}});const Va=[O("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[O("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),O("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var za=S({name:"VcSpinnerOval",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Va)}});const Fa=[O("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[O("circle",{cx:"22",cy:"22",r:"1"},[O("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"1"},[O("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Ha=S({name:"VcSpinnerPuff",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},Fa)}});const Ua=[O("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[O("circle",{cx:"22",cy:"22",r:"6"},[O("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"6"},[O("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"8"},[O("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Wa=S({name:"VcSpinnerRings",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ua)}});const Ga=[O("defs",[O("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[O("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),O("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),O("stop",{"stop-color":"currentColor",offset:"100%"})])]),O("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[O("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),O("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var $a=S({name:"VcSpinnerTail",props:xa,setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Ga)}}),Za=S({name:"VcSpinner",props:{...xa,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=Sa(e);return()=>O("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[O("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const Ya={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},qa=Object.keys(Ya),Xa={type:String,validator:e=>qa.includes(e)};const Qa={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Ja={xs:8,sm:10,md:14,lg:20,xl:24},Ka={...ya,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Xa,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function er(e){const t=ba(e,Ja),n=function(e){return i((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${Ya[t]}`}))}(e),o=i((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in Qa?Qa[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),a=i((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),r=i((()=>!0!==e.disable&&!0!==e.loading)),s=i((()=>!0===r.value?e.tabindex||0:-1)),l=i((()=>!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":"standard")),c=i((()=>{const t={tabindex:s.value};return"a"!==e.type&&(t.type=e.type),t.role="a"===e.type?"link":"button",!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),t}));return{classes:i((()=>{let t;return void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${!0===e.round?"round":"rectangle"+(!0===a.value?" vc-btn--rounded":"")}`+(void 0!==t?" "+t:"")+(!0===r.value?" vc-btn--actionable vc-focusable vc-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" vc-btn--fab":!0===e.fabMini?" vc-btn--fab-mini":"")+(!0===e.noCaps?" vc-btn--no-uppercase":"")+(!0===e.dense?" vc-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")})),style:o,innerClasses:i((()=>n.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" vc-btn__content--hidden":""))),attributes:c,isActionable:r}}const tr=bo().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e,{passiveCapture:ir}=ao;let nr,or,ar;var rr=S({name:"VcBtn",props:{...Ka,percentage:{type:Number,default:0},darkPercentage:Boolean},emits:["click","keydown","touchstart","mousedown","keyup"],setup(t,{slots:n,emit:a}){var r;const s=null==(r=o())?void 0:r.proxy,{classes:l,style:c,innerClasses:u,attributes:d,isActionable:p}=er(t),m=e(null),v=e(null);let h,g,f=null;const y=i((()=>void 0!==t.label&&null!==t.label&&""!==t.label)),b=i((()=>!1!==t.ripple&&{keyCodes:13,...!0===t.ripple?{}:t.ripple})),C=i((()=>{const e=Math.max(0,Math.min(100,t.percentage));return e>0?{transition:"transform 0.6s",transform:`translateX(${e-100}%)`}:{}})),w=i((()=>!0===t.loading?{onMousedown:D,onTouchstart:D,onClick:D,onKeydown:D,onKeyup:D}:!0===p.value?{onClick:T,onKeydown:M,onMousedown:j,onTouchstart:I}:{})),S=i((()=>[[yo,b.value,void 0,{center:t.round}]])),P=i((()=>({ref:m,class:"vc-btn vc-btn-item non-selectable no-outline "+l.value,style:c.value,...d.value,...w.value})));function T(e){var i;if(void 0!==e){if(!0===e.defaultPrevented)return;const n=document.activeElement;if("submit"===t.type&&n!==document.body&&!1===(null==(i=m.value)?void 0:i.contains(n))&&!1===(null==n?void 0:n.contains(m.value))){m.value.focus();const e=()=>{document.removeEventListener("keydown",uo,!0),document.removeEventListener("keyup",e,ir),null!==m.value&&m.value.removeEventListener("blur",e,ir)};document.addEventListener("keydown",uo,!0),document.addEventListener("keyup",e,ir),m.value.addEventListener("blur",e,ir)}}a("click",e,(()=>{}))}function M(e){var t,i,n;!0===vo(e,[13,32])&&(uo(e),or!==m.value&&(null!==or&&A(),null==(t=m.value)||t.focus(),or=m.value,null==(i=m.value)||i.classList.add("vc-btn--active"),document.addEventListener("keyup",L,!0),null==(n=m.value)||n.addEventListener("blur",L,ir))),a("keydown",e)}function I(e){nr!==m.value&&(null!==nr&&A(),nr=m.value,f=tr(e.target),null==f||f.addEventListener("touchcancel",L,ir),null==f||f.addEventListener("touchend",L,ir)),h=!0,clearTimeout(g),g=setTimeout((()=>{h=!1}),200),a("touchstart",e)}function j(e){var t;ar!==m.value&&(null!==ar&&A(),ar=m.value,null==(t=m.value)||t.classList.add("vc-btn--active"),document.addEventListener("mouseup",L,ir)),e.qSkipRipple=!0===h,a("mousedown",e)}function L(e){var t;if(void 0===e||"blur"!==e.type||document.activeElement!==m.value){if(void 0!==e&&"keyup"===e.type){if(or===m.value&&!0===vo(e,[13,32])){const i=new MouseEvent("click",e);i.qKeyEvent=!0,!0===e.defaultPrevented&&co(i),!0===e.cancelBubble&&lo(i),null==(t=m.value)||t.dispatchEvent(i),uo(e),e.qKeyEvent=!0}a("keyup",e)}A()}}function A(e){const t=v.value;!0===e||nr!==m.value&&ar!==m.value||null===t||t===document.activeElement||(t.setAttribute("tabindex","-1"),t.focus()),nr===m.value&&(null!==f&&(f.removeEventListener("touchcancel",L,ir),f.removeEventListener("touchend",L,ir)),nr=f=null),ar===m.value&&(document.removeEventListener("mouseup",L,ir),ar=null),or===m.value&&(document.removeEventListener("keyup",L,!0),null!==m.value&&m.value.removeEventListener("blur",L,ir),or=null),null!==m.value&&m.value.classList.remove("vc-btn--active")}function D(e){uo(e),e.qSkipRipple=!0}return _((()=>{A(!0)})),Object.assign(s,{click:T}),()=>{let e=[];void 0!==t.icon&&e.push(O(Oa,{name:t.icon,left:!1===t.stack&&!0===y.value,role:"img","aria-hidden":"true"})),!0===y.value&&e.push(O("span",{class:"block"},[t.label])),e=wa(n.default,e),void 0!==t.iconRight&&!1===t.round&&e.push(O(Oa,{name:t.iconRight,right:!1===t.stack&&!0===y.value,role:"img","aria-hidden":"true"}));const i=[O("span",{class:"vc-focus-helper",ref:v})];return!0===t.loading&&void 0!==t.percentage&&i.push(O("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[O("span",{class:"vc-btn__progress-indicator fit block"+(!0===t.darkPercentage?" vc-btn__progress--dark":""),style:C.value})])),i.push(O("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+u.value},e)),null!==t.loading&&i.push(O(E,{name:"vc-transition--fade"},(()=>!0===t.loading?[O("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==n.loading?n.loading():[O(Za)])]:null))),function(e,t,i,n,o,a){t.key=n+o;const r=O(e,t,i);return!0===o?x(r,a()):r}("button",P.value,i,"ripple",!0!==t.disable&&!1!==t.ripple,(()=>S.value))}}});const sr={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function lr({showing:t,avoidEmit:i,configureAnchorEl:n}){const{props:a,proxy:r,emit:s}=o(),l=e(null);let c;function u(e){return null!==l.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const d={};function p(){mo(d,"anchor")}function m(){if(!1===a.target||""===a.target)l.value=null;else if(!0===a.target)!function(e){for(l.value=e;l.value.classList.contains("vc-anchor--skip");)l.value=l.value.parentNode;n()}(null==r?void 0:r.$el.parentNode);else{let t=a.target;if("string"==typeof a.target)try{t=document.querySelector(a.target)}catch(e){t=void 0}null!=t?(l.value=t.$el||t,n()):l.value=null}}return void 0===n&&(Object.assign(d,{hide(e){r.hide(e)},toggle(e){r.toggle(e)},toggleKey(e){!0===vo(e,13)&&r.toggle(e)},contextClick(e){r.hide(e),w((()=>{r.show(e)})),co(e)},mobilePrevent:co,mobileTouch(e){var t;if(d.mobileCleanup(e),!0!==u(e))return;r.hide(e),null==(t=l.value)||t.classList.add("non-selectable");const i=tr(e.target);po(d,"anchor",[[i,"touchmove","mobileCleanup","passive"],[i,"touchend","mobileCleanup","passive"],[i,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","mobilePrevent","notPassive"]]),c=setTimeout((()=>{r.show(e)}),300)},mobileCleanup(e){l.value.classList.remove("non-selectable"),clearTimeout(c),!0===t.value&&void 0!==e&&Co()}}),n=function(e=a.contextMenu){if(!0===a.noParentEvent||null===l.value)return;let t;t=!0===e?!0===bo().isPhone?[[l.value,"touchstart","mobileTouch","passive"]]:[[l.value,"click","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],po(d,"anchor",t)}),f((()=>a.contextMenu),(e=>{null!==l.value&&(p(),n(e))})),f((()=>a.target),(()=>{null!==l.value&&p(),m()})),f((()=>a.noParentEvent),(e=>{null!==l.value&&(!0===e?p():n())})),C((()=>{m(),!0!==i&&!0===a.modelValue&&null===l.value&&s("update:modelValue",!1)})),_((()=>{clearTimeout(c),p()})),{anchorEl:l,canShow:u,anchorEvents:d}}const cr={modelValue:{type:Boolean,default:null}},ur=["update:modelValue","before-show","show","before-hide","hide"];function dr({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:a,processOnMount:r}){const s=o(),{props:l,emit:c,proxy:u}=s;let d;function p(e){if(!0===l.disable||void 0!==t&&!0!==t(e))return;const i=!0===ye(s,"onUpdate:modelValue");!0===i&&(c("update:modelValue",!0),d=e,w((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==i||m(e)}function m(t){!0!==(null==e?void 0:e.value)&&(e&&(e.value=!0),c("before-show",t),t&&!0===t.cancel||(void 0!==n?n(t):c("show",t)))}function v(e){if(!0===l.disable)return;const t=!0===ye(s,"onUpdate:modelValue");!0===t&&(c("update:modelValue",!1),d=e,w((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==t||h(e)}function h(t){!1!==(null==e?void 0:e.value)&&(e&&(e.value=!1),c("before-hide",t),void 0!==a?a(t):c("hide",t))}function g(t){if(!0===l.disable&&!0===t)!0===ye(s,"onUpdate:modelValue")&&c("update:modelValue",!1);else if(!0===t!==(null==e?void 0:e.value)){(!0===t?m:h)(d)}}f((()=>l.modelValue),g),void 0!==i&&!0===function(e){return void 0!==e.appContext.config.globalProperties.$router}(s)&&f((()=>u.$route),(()=>{!0===i.value&&!0===(null==e?void 0:e.value)&&v()})),!0===r&&C((()=>{g(l.modelValue)}));const y={show:p,hide:v,toggle:function(t){!0===(null==e?void 0:e.value)?v(t):p(t)}};return Object.assign(u,y),y}const pr=[];let mr=document.body;const vr=[];function hr(t,i,n,o){var a,r,s,l;let c=null;(null==(r=null==(a=t.props)?void 0:a.teleport)?void 0:r.to)&&(c=null==(l=null==(s=t.props)?void 0:s.teleport)?void 0:l.to);const u=!0===o&&function(e){for(e=e.parent;null!=e;){if("VcGlobalDialog"===e.type.name)return!0;if("VcDialog"===e.type.name||"VcMenu"===e.type.name)return!1;e=e.parent}return!1}(t),d=e(!1);function p(){var e,i;d.value=!1;const n=vr.indexOf(t.proxy);var o;n>-1&&vr.splice(n,1),null===c||(null==(i=null==(e=t.props)?void 0:e.teleport)?void 0:i.to)||(o=c,pr.splice(pr.indexOf(o),1),o.remove(),c=null)}return h(p),Object.assign(t.proxy,{__vcPortalInnerRef:i}),{showPortal:function(){!1===u&&null===c&&(c=function(e){const t=document.createElement("div");return void 0!==e&&(t.id=e),mr.appendChild(t),pr.push(t),t}()),d.value=!0,vr.push(t.proxy)},hidePortal:p,portalIsActive:d,renderPortal:()=>!0===u?n():!0===d.value?[O(P,{to:c},n())]:void 0}}const gr={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function fr(){let e;return _((()=>{clearTimeout(e)})),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const yr=[null,document,document.body,document.scrollingElement,document.documentElement];function br(e,t){let i=function(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch(i){return}const t=!0===v(e)?e.value:e;return t?t.$el||t:void 0}(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return yr.includes(i)?window:i}let Cr,wr,Or;function xr(e){const t=e.split(" ");return 2===t.length&&(!0===["top","center","bottom"].includes(t[0])&&!0===["left","middle","right","start","end"].includes(t[1]))}const Sr={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function _r(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:Sr[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function Er(e){if(!0===bo().isIOS&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==wr&&(e.setProperty("--vc-pe-left",t+"px"),wr=t),i!==Or&&(e.setProperty("--vc-pe-top",i+"px"),Or=i)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(void 0===e.absoluteOffset)t=function(e,t){let{top:i,left:n,right:o,bottom:a,width:r,height:s}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],a+=t[1],o+=t[0],r+=t[0],s+=t[1]),{top:i,left:n,right:o,bottom:a,width:r,height:s,middle:n+(o-n)/2,center:i+(a-i)/2}}(e.anchorEl,!0===e.cover?[0,0]:e.offset);else{const{top:i,left:n}=e.anchorEl.getBoundingClientRect(),o=i+e.absoluteOffset.top,a=n+e.absoluteOffset.left;t={top:o,left:a,width:1,height:1,right:a+1,center:o,middle:a,bottom:o+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};!0!==e.fit&&!0!==e.cover||(o.minWidth=t.width+"px",!0===e.cover&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const a={top:0,center:(s=e.el).offsetHeight/2,bottom:s.offsetHeight,left:0,middle:s.offsetWidth/2,right:s.offsetWidth},r={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};var s;!function(e,t,i,n,o){const a=i.bottom,r=i.right,s=function(){if(void 0!==Cr)return Cr;const e=document.createElement("p"),t=document.createElement("div");oo(e,{width:"100%",height:"200px"}),oo(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),Cr=i-n,Cr}(),l=window.innerHeight-s,c=document.body.clientWidth;if(e.top<0||e.top+a>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-a):0,e.maxHeight=Math.min(a,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,i),e.top=Math.max(0,i-a)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,l-e.top);if(e.left<0||e.left+r>c)if(e.maxWidth=Math.min(r,c),"middle"===o.horizontal)e.left=t[n.horizontal]>c/2?Math.max(0,c-r):0;else if(t[n.horizontal]>c/2){const i=Math.min(c,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(r,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(r,c-e.left)}(r,t,a,e.anchorOrigin,e.selfOrigin),o={top:r.top+"px",left:r.left+"px"},void 0!==r.maxHeight&&(o.maxHeight=r.maxHeight+"px",t.height>r.maxHeight&&(o.minHeight=o.maxHeight)),void 0!==r.maxWidth&&(o.maxWidth=r.maxWidth+"px",t.width>r.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}["left","middle","right"].forEach((e=>{Sr[`${e}#ltr`]=e,Sr[`${e}#rtl`]=e}));var Pr=S({name:"VcTooltip",inheritAttrs:!1,props:{...sr,...cr,...gr,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:xr},self:{type:String,default:"top middle",validator:xr},offset:{type:Array,default:()=>[14,14],validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}},emits:[...ur],setup(t,{slots:n,emit:a,attrs:r}){let s,l;const c=o(),u=e(null),d=e(!1),p=i((()=>_r(t.anchor,!0))),m=i((()=>_r(t.self,!0))),v=i((()=>!0!==t.persistent)),{registerTick:h,removeTick:g,prepareTick:y}=function(){let e;return _((()=>{e=void 0})),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(void 0!==e){const t=e;w((()=>{e===t&&(e(),e=void 0)}))}}}}(),{registerTimeout:b,removeTimeout:C}=fr(),{transition:x,transitionStyle:S}=function(t,n){const o=e(n.value);return f(n,(e=>{w((()=>{o.value=e}))})),{transition:i((()=>"vc-transition--"+(!0===o.value?t.transitionHide:t.transitionShow))),transitionStyle:i((()=>`--vc-transition-duration: ${t.transitionDuration}ms`))}}(t,d),{localScrollTarget:P,changeScrollEvent:T,unconfigureScrollTarget:M}=function(t,i){const n=e(null);let o;function a(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",n=void 0!==t?t:o;e!==window&&e[i]("scroll",n,ao.passive),window[i]("scroll",n,ao.passive),o=t}function r(){null!==n.value&&(a(n.value),n.value=null)}const s=f((()=>t.noParentEvent),(()=>{null!==n.value&&(r(),i())}));return _(s),{localScrollTarget:n,unconfigureScrollTarget:r,changeScrollEvent:a}}(t,z),{anchorEl:I,canShow:j,anchorEvents:L}=lr({showing:d,configureAnchorEl:function(){if(!0===t.noParentEvent||void 0===I.value)return;const e=!0===bo().isPhone?[[I.value,"touchstart","delayShow","passive"]]:[[I.value,"mouseenter","delayShow","passive"],[I.value,"mouseleave","delayHide","passive"]];po(L,"anchor",e)},avoidEmit:void 0}),{show:A,hide:D}=dr({showing:d,canShow:j,handleShow:function(e){g(),C(),k(),h((()=>{l=new MutationObserver((()=>V())),l.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),z()})),y(),void 0===s&&(s=f((()=>t.self+"|"+t.anchor),V));b((()=>{a("show",e)}),t.transitionDuration)},handleHide:function(e){g(),C(),N(),b((()=>{R(),a("hide",e)}),t.transitionDuration)},hideOnRouteChange:v,processOnMount:!0});Object.assign(L,{delayShow:function(e){if(!0===bo().isPhone){Co(),document.body.classList.add("non-selectable");const e=tr(I.value),t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"__delayHide","passiveCapture"]));po(L,"tooltipTemp",t)}b((()=>{A(e)}),t.delay)},delayHide:function(e){C(),!0===bo().isPhone&&(mo(L,"tooltipTemp"),Co(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));b((()=>{D(e)}),t.hideDelay)}});const{showPortal:k,hidePortal:R,renderPortal:B}=hr(c,u,(function(){return O(E,{name:x.value,appear:!0},F)}));function N(){void 0!==l&&(l.disconnect(),l=void 0),void 0!==s&&(s(),s=void 0),M(),mo(L,"tooltipTemp")}function V(){const e=u.value;void 0!==I.value&&e&&Er({el:e,offset:t.offset,anchorEl:I.value,anchorOrigin:p.value,selfOrigin:m.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function z(){if(void 0!==I.value||void 0!==t.scrollTarget){P.value=br(I.value,t.scrollTarget);const e=!0===t.noParentEvent?V:D;T(P.value,e)}}function F(){return!0===d.value?O("div",{...r,ref:u,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",r.class],style:S.value,role:"complementary"},Ca(n.default)):null}return _(N),Object.assign(null==c?void 0:c.proxy,{updatePosition:V}),B}});const Tr=XMLHttpRequest,Mr=Tr.prototype.open,Ir=["top","right","bottom","left"];let jr=[],Lr=0;function Ar(e,t){return"number"!=typeof t&&(t=e<25?3*Math.random()+3:e<65?3*Math.random():e<85?2*Math.random():e<99?.6:0),i=e+t,(o=100)<=(n=0)?n:Math.min(o,Math.max(n,i));var i,n,o}var Dr=S({name:"VcAjaxBar",props:{position:{type:String,default:"top",validator:e=>Ir.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function},emits:["start","stop"],setup(t,{emit:n}){const{proxy:a}=o(),r=e(0),s=e(!1),l=e(!0);let c,u,d=0;const p=i((()=>`vc-loading-bar vc-loading-bar--${t.position}`+(void 0!==t.color?` bg-${t.color}`:"")+(!0===l.value?"":" no-transition"))),m=i((()=>"top"===t.position||"bottom"===t.position)),v=i((()=>!0===m.value?"height":"width")),h=i((()=>{const e=s.value,i=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:a}){let r=1,s=1;return!0===n?(!0===o&&(r=-1),"bottom"===t&&(s=-1),{transform:`translate3d(${r*(e-100)}%,${i?0:-200*s}%,0)`}):(!0===o&&(s=-1),"right"===t&&(r=-1),{transform:`translate3d(${i?0:a*r*-200}%,${s*(e-100)}%,0)`})}({p:r.value,pos:t.position,active:e,horiz:m.value,reverse:t.reverse,dir:1});return i[v.value]=t.size,i.opacity=e?1:0,i.position="absolute"===t.positioning?"absolute":"fixed",i.backgroundColor=t.color,i})),g=i((()=>!0===s.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r.value}:{"aria-hidden":"true"}));function f(e=300){const t=u;return u=Math.max(0,e)||0,d++,d>1?(0===t&&e>0?w():t>0&&e<=0&&clearTimeout(c),d):(clearTimeout(c),n("start"),r.value=0,c=setTimeout((()=>{l.value=!0,e>0&&w()}),!0===s.value?500:1),!0!==s.value&&(s.value=!0,l.value=!1),d)}function y(e){return d>0&&(r.value=Ar(r.value,e)),d}function b(){if(d=Math.max(0,d-1),d>0)return d;clearTimeout(c),n("stop");const e=()=>{l.value=!0,r.value=100,c=setTimeout((()=>{s.value=!1}),1e3)};0===r.value?c=setTimeout(e,1):e()}function w(){r.value<100&&(c=setTimeout((()=>{y(),w()}),u))}let x;return C((()=>{var e;!0!==t.skipHijack&&(x=!0,e={start:f,stop:b,hijackFilter:i((()=>t.hijackFilter||null))},Lr++,jr.push(e),Lr>1||(Tr.prototype.open=function(e,t){const i=[],n=()=>{jr.forEach((e=>{null!==e.hijackFilter.value&&!0!==e.hijackFilter.value(t)||(e.start(),i.push(e.stop))}))},o=()=>{i.forEach((e=>{e()}))};this.addEventListener("loadstart",n,{once:!0}),this.addEventListener("loadend",o,{once:!0}),Mr.apply(this,arguments)}))})),_((()=>{clearTimeout(c),!0===x&&function(e){jr=jr.filter((t=>t.start!==e)),Lr=Math.max(0,Lr-1),0===Lr&&(Tr.prototype.open=Mr)}(f)})),Object.assign(a,{start:f,stop:b,increment:y}),()=>O("div",{class:p.value,style:h.value,...g.value})}});const kr={dark:{type:Boolean,default:null}};const Rr=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],Br=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var Nr=S({name:"VcSkeleton",props:{...kr,tag:{type:String,default:"div"},type:{type:String,validator:e=>Rr.includes(e),default:"rect"},animation:{type:String,validator:e=>Br.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const n=function(e){return i((()=>e.dark))}(e),o=i((()=>void 0!==e.size?{width:e.size,height:e.size}:{width:e.width,height:e.height})),a=i((()=>`vc-skeleton vc-skeleton--${!0===n.value?"dark":"light"} vc-skeleton--type-${e.type}`+("none"!==e.animation?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(!0===e.square?" vc-skeleton--square":"")+(!0===e.bordered?" vc-skeleton--bordered":"")));return()=>O(e.tag,{class:a.value,style:o.value},Ca(t.default))}});const Vr=["top","right","bottom","left"],zr={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Vr.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Fr(e,t){return{formClass:i((()=>"vc-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:i((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:i((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(!0===i?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}const Hr=["up","right","down","left"],Ur=["left","center","right"];var Wr=S({name:"VcFab",props:{...zr,...cr,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>Hr.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Ur.includes(e)}},emits:ur,setup(n,{slots:o}){const a=e(null),r=e(!0===n.modelValue),{formClass:s,labelProps:l}=Fr(n,r),c=i((()=>!0!==n.persistent)),{hide:u,toggle:d}=dr({showing:r,hideOnRouteChange:c}),p=i((()=>({opened:r.value}))),m=i((()=>`vc-fab z-fab row inline justify-center vc-fab--align-${n.verticalActionsAlign} ${s.value}`+(!0===r.value?" vc-fab--opened":" vc-fab--closed"))),v=i((()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${n.direction} vc-fab__actions--${!0===r.value?"opened":"closed"}`)),h=i((()=>"vc-fab__icon-holder  vc-fab__icon-holder--"+(!0===r.value?"opened":"closed")));function g(e,t){const i=o[e],a=`q-fab__${e} absolute-full`;return void 0===i?O(Oa,{class:a,name:n[e]}):O("div",{class:a},i(p.value))}function f(){const e=[];return!0!==n.hideIcon&&e.push(O("div",{class:h.value},[g("icon"),g("active-icon")])),""===n.label&&void 0===o.label||e[l.value.action](O("div",l.value.data,void 0!==o.label?o.label(p.value):[n.label])),wa(o.tooltip,e)}return t(K,{showing:r,onChildClick(e){n.hideActionOnClick&&u(e),null!==a.value&&a.value.$el.focus()}}),()=>O("div",{class:m.value},[O(rr,{ref:a,class:s.value,...n,noWrap:!0,stack:n.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:n.flat,size:n.size,"aria-expanded":!0===r.value?"true":"false","aria-haspopup":"true",onClick:d},f),O("div",{class:v.value},Ca(o.default))])}});const Gr={start:"self-end",center:"self-center",end:"self-start"},$r=Object.keys(Gr);var Zr=S({name:"VcFabAction",props:{...zr,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>$r.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const r=a(K),{formClass:s,labelProps:l}=Fr(e,null==r?void 0:r.showing),c=i((()=>{let t;return e.anchor&&(t=Gr[e.anchor]),s.value+(void 0!==t?` ${t}`:"")})),u=i((()=>{var t;return!0===e.disable||!0!==(null==(t=null==r?void 0:r.showing)?void 0:t.value)}));function d(e){var t;null==(t=null==r?void 0:r.onChildClick)||t.call(r,e),n("click",e)}function p(){const i=[];return""!==e.icon&&i.push(O(Oa,{name:e.icon})),""!==e.label&&i[l.value.action](O("div",l.value.data,[e.label])),wa(t.default,i)}const m=o();return Object.assign(null==m?void 0:m.proxy,{click:d}),()=>O(rr,{class:c.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:u.value,size:e.size,onClick:d},p)}});[rr,Oa,Ea,Ta,Ia,La,Da,Ra,Na,za,Ha,Wa,$a,Za,Pr,Dr,Nr,Wr,Zr].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Yr=rr,qr=Oa,Xr=Ea,Qr=Ta,Jr=Ia,Kr=La,es=Da,ts=Ra,is=Na,ns=za,os=Ha,as=Wa,rs=$a,ss=Za,ls=Pr,cs=Dr,us=Nr,ds=Wr,ps=Zr,ms={beforeLoad:e=>!0,ready:e=>!0,unready:e=>!0,destroyed:e=>!0},vs={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},hs={...ms,definitionChanged:e=>!0},gs={...ms,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},fs={...ms,...vs,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},ys={...ms,...vs},bs={...ms,...vs,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,a,r)=>!0},Cs={...ms,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0};var ws=S({name:"VcViewer",props:pa,emits:{...ms,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0},setup(e,n){const a=o();a.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],a.cesiumMembersEvents=va;const r=ma(e,n,a),s=i((()=>e.containerId||n.attrs.id||"cesiumContainer"));t(J,r.getServices()),a.appContext.config.globalProperties.$VueCesium=a.appContext.config.globalProperties.$VueCesium||{},a.appContext.config.globalProperties.$VueCesium[s.value]=r.getServices(),Object.assign(a.proxy,{creatingPromise:r.creatingPromise,load:r.load,unload:r.unload,reload:r.reload,cesiumObject:a.cesiumObject,getCesiumObject:()=>a.cesiumObject});const c=e=>{n.emit("touchEnd",e)};return()=>{var t;const i=[];return l(e.skeleton)&&!r.isReady.value?i.push(O(us,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):i.push(T("v-if")),i.push(T("vc-viewer"),x(O("div",{ref:r.viewerRef,class:le((null==(t=a.proxy)?void 0:t.$options.name)||""),id:s.value,style:n.attrs.style||{width:"100%",height:"100%"}},Ca(n.slots.default)),[[wo,c,e.touchHoldArg]])),i}}});ws.install=(e,t)=>{e.component(ws.name,ws)};const Os=ws,xs=Os,Ss={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length}};function _s(t,n){const o=i((()=>{const e=t.position;return{top:e.indexOf("top")>-1,right:e.indexOf("right")>-1,bottom:e.indexOf("bottom")>-1,left:e.indexOf("left")>-1,vertical:"top"===e||"bottom"===e,horizontal:"left"===e||"right"===e}})),a=e(0),r=e(0),s=e(0),l=e(0),c=i((()=>{let e=0,i=0;const n=o.value;!0===n.top&&0!==a.value?i=`${a.value}px`:!0===n.bottom&&0!==l.value&&(i=-l.value+"px"),!0===n.left&&0!==s.value?e=1*s.value+"px":!0===n.right&&0!==r.value&&(e=-1*r.value+"px");const c={transform:`translate(${e}, ${i})`};return t.offset&&(c.margin=`${t.offset[1]}px ${t.offset[0]}px`),!0===n.vertical?(0!==s.value&&(c.right=`${s.value}px`),0!==r.value&&(c.left=`${r.value}px`)):!0===n.horizontal&&(0!==a.value&&(c.top=`${a.value}px`),0!==l.value&&(c.bottom=`${l.value}px`)),void 0===t.teleportToViewer||t.teleportToViewer?c:{}})),u=i((()=>void 0===t.teleportToViewer||t.teleportToViewer?`absolute absolute-${t.position}`:"relative-position"));return{attach:o,style:c,classes:u}}const Es={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...Ss,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Ps=pe(Es);class Ts{static createTween(e,t){const{Cartesian2:i,Cartesian3:n,defaultValue:o,defined:a,DeveloperError:r,EasingFunction:s,Math:l,SceneMode:c}=Cesium;let u=(t=o(t,{})).destination;if(!a(e))throw new r("scene is required.");if(!a(u))throw new r("destination is required.");const d=e.mode;if(d===c.MORPHING)return Fs();const p=o(t.convert,!0),m=e.mapProjection,v=m.ellipsoid,h=t.maximumHeight,g=t.flyOverLongitude,f=t.flyOverLongitudeWeight,y=t.pitchAdjustHeight;let b=t.easingFunction;p&&d!==c.SCENE3D&&(v.cartesianToCartographic(u,Vs),u=m.project(Vs,zs));const C=e.camera,w=t.endTransform;a(w)&&C._setTransform(w);let O=t.duration;a(O)||(O=Math.ceil(n.distance(C.position,u)/1e6)+2,O=Math.min(O,3));const x=o(t.heading,0),S=o(t.pitch,-l.PI_OVER_TWO),_=o(t.roll,0),E=e.screenSpaceCameraController;E.enableInputs=!1;const P=Hs(E,t.complete),T=Hs(E,t.cancel),M=C.frustum;let I=e.mode===c.SCENE2D;if(I=I&&i.equalsEpsilon(C.position,u,l.EPSILON6),I=I&&l.equalsEpsilon(Math.max(M.right-M.left,M.top-M.bottom),u.z,l.EPSILON6),I=I||e.mode!==c.SCENE2D&&n.equalsEpsilon(u,C.position,l.EPSILON10),I=I&&l.equalsEpsilon(l.negativePiToPi(x),l.negativePiToPi(C.heading),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(S),l.negativePiToPi(C.pitch),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(_),l.negativePiToPi(C.roll),l.EPSILON10),I)return Fs(P,T);const j=new Array(4);if(j[c.SCENE2D]=Ns,j[c.SCENE3D]=Bs,j[c.COLUMBUS_VIEW]=Ds,O<=0){return Fs((function(){j[d](e,1,u,x,S,_,h,g,f,y)({time:1}),"function"==typeof P&&P()}),T)}const L=j[d](e,O,u,x,S,_,h,g,f,y);if(!a(b)){const e=C.positionCartographic.height;b=e>(d===c.SCENE3D?v.cartesianToCartographic(u).height:u.z)&&e>11500?s.CUBIC_OUT:s.QUINTIC_IN_OUT}return{duration:O,easingFunction:b,startObject:{time:0},stopObject:{time:O},update:L,complete:P,cancel:T}}}const Ms={},Is={};function js(e,t,i,n,o){const{Cartesian3:a,defined:r,Math:s}=Cesium;let l=o;const c=Math.max(i,n);if(!r(l)){const i=e.position,n=t,o=e.up,r=e.right,s=e.frustum,c=a.subtract(i,n,Ms),u=a.magnitude(a.multiplyByScalar(o,a.dot(c,o),Is)),d=a.magnitude(a.multiplyByScalar(r,a.dot(c,r),Is));l=Math.min(.2*function(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let a,r,s;if(e instanceof n){const n=Math.tan(.5*e.fovy);return a=e.near,r=e.near*n,s=e.aspectRatio*r,Math.max(t*a/s,i*a/r)}return e instanceof o?(a=e.near,r=e.top,s=e.right,Math.max(t*a/s,i*a/r)):Math.max(t,i)}(s,u,d),1e9)}if(c<l){const e=8,t=1e6,o=-Math.pow((l-i)*t,1/e),a=Math.pow((l-n)*t,1/e);return function(i){const n=i*(a-o)+o;return-Math.pow(n,e)/t+l}}return function(e){return s.lerp(i,n,e)}}function Ls(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const As={};function Ds(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,As),p=u.pitch,m=Ls(u.heading,n),v=Ls(u.roll,a),h=js(u,i,d.z,i.z,r);return function(e){const r=e.time/t;u.setView({orientation:{heading:c.lerp(m,n,r),pitch:c.lerp(p,o,r),roll:c.lerp(v,a,r)}}),s.lerp(d,i,r,u.position),u.position.z=h(r)}}const ks={},Rs={};function Bs(e,t,i,n,o,a,r,s,l,c){const{Cartesian3:u,Cartographic:d,defined:p,Math:m}=Cesium,v=e.camera,h=e.mapProjection.ellipsoid,g=d.clone(v.positionCartographic,ks),f=v.pitch,y=Ls(v.heading,n),b=Ls(v.roll,a),C=h.cartesianToCartographic(i,Rs);g.longitude=m.zeroToTwoPi(g.longitude),C.longitude=m.zeroToTwoPi(C.longitude);let w=!1;if(p(s)){const e=m.zeroToTwoPi(s),t=Math.min(g.longitude,C.longitude),i=Math.max(g.longitude,C.longitude),n=e>=t&&e<=i;if(p(l)){const e=Math.abs(g.longitude-C.longitude),t=m.TWO_PI-e;(n?e:t)<(n?t:e)*l&&!n&&(w=!0)}else n||(w=!0)}w?function(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}(g,C):function(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}(g,C);const O=js(v,i,g.height,C.height,r),x=function(e,t,i,n){const{defined:o,Math:a}=Cesium;if(o(n)&&i(.5)>n){const n=i(0),o=i(1),r=i(.5),s=r-n,l=r-o;return function(r){const c=i(r);if(r<=.5){const t=(c-n)/s;return a.lerp(e,-a.PI_OVER_TWO,t)}const u=(c-o)/l;return a.lerp(-a.PI_OVER_TWO,t,1-u)}}return function(i){return a.lerp(e,t,i)}}(f,o,O,c);return function(){const i=g.longitude,o=C.longitude,r=g.latitude,s=C.latitude;return function(l){const c=l.time/t,d=u.fromRadians(m.lerp(i,o,c),m.lerp(r,s,c),O(c),e.globe.ellipsoid);v.setView({destination:d,orientation:{heading:m.lerp(y,n,c),pitch:x(c),roll:m.lerp(b,a,c)}})}}()}function Ns(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,As),p=Ls(u.heading,n),m=u.frustum.right-u.frustum.left,v=js(u,i,m,i.z,r);return function(e){const o=e.time/t;u.setView({orientation:{heading:c.lerp(p,n,o)}}),s.lerp(d,i,o,u.position);const a=v(o),r=u.frustum,l=r.top/r.right,m=.5*(a-(r.right-r.left));r.right+=m,r.left-=m,r.top=l*r.right,r.bottom=-r.top}}const Vs={},zs={};function Fs(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function Hs(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}const Us={...ms,compassEvt:e=>!0};var Ws=S({name:"VcCompass",props:Es,emits:Us,setup(t,n){var a;const r=o();r.cesiumClass="VcCompass";const s=Kn(t,n,r);if(void 0===s)return;const{t:l}=Yn(),c=we(r),{$services:u}=s,d=function(t,{emit:i},n){const o={},a={},r={},s={};let l,c,u,d,p;const v=e(0),h=e(0),g=e(0);let f,y,b=0,C={},w=!1,O=0,x={},S=0;const _=e(null),E=e(null),P=()=>{g.value=0,h.value=0},T=()=>{const{defined:e}=Cesium;e(n.viewer)?(l&&(l(),l=void 0),l=n.viewer.scene.postRender.addEventListener((function(){v.value!==n.viewer.scene.camera.heading&&(v.value=n.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},M=(e,t)=>{const{Cartesian2:l,Cartesian3:m,defined:v,getTimestamp:f,Math:y,Matrix4:O,Ray:x,SceneMode:S,Transforms:_}=Cesium;let E=n.viewer.scene,T=E.camera;const M=E.screenSpaceCameraController;if(E.mode===S.MORPHING||!M.enableInputs)return;switch(E.mode){case S.COLUMBUS_VIEW:if(M.enableLook)break;if(!M.enableTranslate||!M.enableTilt)return;break;case S.SCENE3D:if(M.enableLook)break;if(!M.enableTilt||!M.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!M.enableTranslate)return}const I=be(n,"compassEvt");I&&i("compassEvt",{type:"orbit",camera:E.camera,status:"start",target:e}),document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),v(p)&&n.viewer.clock.onTick.removeEventListener(p),u=void 0,d=void 0,p=void 0,b=f();const j=new l;j.x=E.canvas.clientWidth/2,j.y=E.canvas.clientHeight/2;const L=new x,A=T.getPickRay(j,L),D=E.globe.pick(A,E,s);function k(e,t){const i=Math.atan2(-e.y,e.x);h.value=y.zeroToTwoPi(i-y.PI_OVER_TWO);const n=l.magnitude(e),o=t/2,a=Math.min(n/o,1),r=.5*a*a+.5;g.value=r}v(D)?(C=_.eastNorthUpToFixedFrame(D||new Cesium.Cartesian3,E.globe.ellipsoid,r),w=!1):(C=_.eastNorthUpToFixedFrame(T.positionWC,E.globe.ellipsoid,r),w=!0),p=function(e){const t=f(),i=(t-b)*(2.5*(g.value-.5)/1e3),o=h.value+y.PI_OVER_TWO,r=Math.cos(o)*i,s=Math.sin(o)*i;E=n.viewer.scene,T=E.camera;const l=O.clone(T.transform,a);T.lookAtTransform(C),w?(T.look(m.UNIT_Z,-r),T.look(T.right,-s)):(T.rotateLeft(r),T.rotateUp(s)),T.lookAtTransform(l),b=t},u=function(t){const n=e.getBoundingClientRect(),a=new l((n.right-n.left)/2,(n.bottom-n.top)/2);let r;t instanceof MouseEvent?r=new l(t.clientX-n.left,t.clientY-n.top):t instanceof TouchEvent&&(r=new l(t.changedTouches[0].clientX-n.left,t.changedTouches[0].clientY-n.top)),k(l.subtract(r,a,o),n.width),I&&i("compassEvt",{type:"orbit",camera:E.camera,status:"changing",target:e})},d=function(t){document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),v(p)&&n.viewer.clock.onTick.removeEventListener(p),u=void 0,d=void 0,p=void 0,P(),I&&i("compassEvt",{type:"orbit",camera:E.camera,status:"end",target:e})},document.addEventListener("mousemove",u,!1),document.addEventListener("mouseup",d,!1),document.addEventListener("touchmove",u,!1),document.addEventListener("touchend",d,!1),c=n.viewer.clock.onTick.addEventListener(p),k(t,e.getBoundingClientRect().width)},I=(e,l)=>{if(!t.enableCompassOuterRing)return;const c=n.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1);const{Cartesian2:p,Cartesian3:m,defined:v,Math:h,Matrix4:g,Ray:b,Transforms:C}=Cesium;y=void 0,f=void 0;const w=be(n,"compassEvt");w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:e}),O=Math.atan2(-l.y,l.x);const _=new p;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new b,P=u.getPickRay(_,E),T=c.globe.pick(P,c,s);x=v(T)?C.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,r):C.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,r);let M=g.clone(u.transform,a);u.lookAtTransform(x),S=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(M),y=function(t){const r=e.getBoundingClientRect(),s=new p((r.right-r.left)/2,(r.bottom-r.top)/2);let l;t instanceof MouseEvent?l=new p(t.clientX-r.left,t.clientY-r.top):t instanceof TouchEvent&&(l=new p(t.changedTouches[0].clientX-r.left,t.changedTouches[0].clientY-r.top));const d=p.subtract(l,s,o),m=Math.atan2(-d.y,d.x)-O,v=h.zeroToTwoPi(S-m);u=n.viewer.scene.camera,M=g.clone(u.transform,a),u.lookAtTransform(x);const f=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-f),u.lookAtTransform(M),w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:e})},f=function(t){document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),y=void 0,f=void 0,w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:e})},document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",y,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1)};return{heading:v,orbitCursorAngle:h,orbitCursorOpacity:g,handleDoubleClick:e=>{const{Cartesian2:o,Cartesian3:a,defined:r,Ellipsoid:l,Matrix4:c,Ray:u,SceneMode:d,Transforms:p}=Cesium,{viewer:v}=n,h=v.scene,g=h.camera,f=h.screenSpaceCameraController;if(h.mode===d.MORPHING||!f.enableInputs)return!0;if(h.mode===d.COLUMBUS_VIEW&&!f.enableTranslate)return;if(h.mode===d.SCENE3D||h.mode===d.COLUMBUS_VIEW){if(!f.enableLook)return;if(h.mode===d.SCENE3D&&!f.enableRotate)return}const y=new o;y.x=h.canvas.clientWidth/2,y.y=h.canvas.clientHeight/2;const b=new u,C=g.getPickRay(y,b),w=h.globe.pick(C,h,s);if(!m(w)||!r(w))return void v.camera.flyHome();const O=be(n,"compassEvt");O&&i("compassEvt",{type:"reset",camera:v.camera,status:"start",target:e.currentTarget});const x=p.eastNorthUpToFixedFrame(w,v.scene.globe.ellipsoid),S=a.subtract(w,g.position,new a),_=Ts.createTween(h,{destination:c.multiplyByPoint(x,new a(0,0,a.magnitude(S)),new a),direction:c.multiplyByPointAsVector(x,new a(0,0,-1),new a),up:c.multiplyByPointAsVector(x,new a(0,1,0),new a),duration:t.duration,complete:()=>{O&&i("compassEvt",{type:"reset",camera:v.camera,status:"end",target:e.currentTarget})},cancel:()=>{O&&i("compassEvt",{type:"reset",camera:v.camera,status:"cancel",target:e.currentTarget})}});h.tweens.add(_)},handleMouseDown:e=>{var t,i;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Ce(_))||t.hide(),null==(i=Ce(E))||i.hide();const{SceneMode:a,Cartesian2:r}=Cesium;if(n.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=s.getBoundingClientRect(),c=l.width/2,u=new r((l.right-l.left)/2,(l.bottom-l.top)/2);let d;e instanceof MouseEvent?d=new r(e.clientX-l.left,e.clientY-l.top):e instanceof TouchEvent&&(d=new r(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top));const p=r.subtract(d,u,o),m=r.magnitude(p)/c;if(m<50/145)M(s,p);else{if(!(m<1))return!0;I(s,p)}},resetRotater:P,onTooltipBeforeShow:e=>{void 0===y&&void 0===u||(e.cancel=!0)},viewerChange:T,load:async e=>(n.viewer=e,T(),!0),unload:async()=>(document.removeEventListener("mousemove",u,!1),document.removeEventListener("mouseup",d,!1),document.removeEventListener("touchmove",u,!1),document.removeEventListener("touchend",d,!1),c&&c(),l&&l(),!0),iconOuterTooltipRef:_,iconInnerTooltipRef:E}}(t,n,r),p=_s(t),v=e(null),h=e(null),g="VcNavigation"===(null==(a=c.proxy)?void 0:a.$options.name),y=e(g),C=b({});f((()=>t),(e=>{w((()=>{r.mounted&&I()}))}),{deep:!0});const x=i((()=>Object.assign({},Ps.innerOptions,t.innerOptions))),S=i((()=>Object.assign({},Ps.outerOptions,t.outerOptions))),_=i((()=>Object.assign({},Ps.markerOptions,t.markerOptions))),E=i((()=>({transform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",opacity:void 0,background:S.value.background,color:S.value.color}))),P=i((()=>({transform:"rotate(-"+d.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+d.orbitCursorAngle.value+"rad)",opacity:d.orbitCursorOpacity.value,color:_.value.color}))),M=i((()=>({background:x.value.background,color:x.value.color})));r.createCesiumObject=async()=>{y.value=!0;const{viewer:e}=u;return new Promise(((i,n)=>{w((()=>{if(!g&&t.teleportToViewer){e._element.appendChild(Ce(v)),i(Ce(v))}else i(Ce(v))}))}))},r.mount=async()=>{var e;I();const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Ce(v)}),d.load(u.viewer)},r.unmount=async()=>{var e;const{viewer:t}=u,i=t._element;return g||i.contains(Ce(v))&&i.removeChild(Ce(v)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Ce(v)}),d.unload()};const I=()=>{var e;const i=p.style.value,n=null==(e=Ce(h))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();i.width=`${e.width}px`,i.height=`${e.height}px`}if(void 0===t.teleportToViewer||t.teleportToViewer){C.left=i.left,C.top=i.top,C.transform=i.transform;const e=p.attach.value;void 0!==n&&(!e.bottom&&!e.top||e.left||e.right||(i.left="50%",i.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(C,i)};return()=>{if(y.value){let e=[];return e=wa(n.slots.default,e),e.push(O(Yr,{ref:h,class:"vc-compass-outerRing absolute-center",style:E.value,size:S.value.size,dense:!0,round:!0,disabled:!t.enableCompassOuterRing},(()=>[O(qr,{size:S.value.size,name:S.value.icon}),S.value.tooltip?O(ls,{ref:d.iconOuterTooltipRef,...S.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},(()=>O("strong",{},S.value.tooltip.tip||l("vc.navigation.compass.outerTip")))):T("v-if")]))),e.push(O(Yr,{class:"vc-compass-innerRing absolute-center",style:M.value,size:x.value.size,dense:!0,round:!0},(()=>[O(qr,{size:x.value.size,name:x.value.icon}),x.value.tooltip?O(ls,{ref:d.iconInnerTooltipRef,...x.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},(()=>O("strong",{},x.value.tooltip.tip||l("vc.navigation.compass.innerTip")))):T("v-if")]))),e.push(P.value.opacity?O(Yr,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},(()=>[O(qr,{size:_.value.size,name:_.value.icon,style:P.value})])):T("v-if")),O("div",{ref:v,class:`vc-compass ${p.classes.value} ${t.customClass}`,style:C,onDblclick:d.handleDoubleClick,onMousedown:d.handleMouseDown,onMouseup:d.resetRotater,onTouchend:d.resetRotater,onTouchstart:d.handleMouseDown},e)}return T("v-if")}}});const Gs={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:19059568.5}})},overrideViewerCamera:{type:Boolean,default:!1},...Ss,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},$s=pe(Gs);const Zs={...ms,zoomEvt:e=>!0};var Ys=S({name:"VcZoomControl",props:Gs,emits:Zs,setup(t,n){var a;const r=o();r.cesiumClass="VcZoomControl",r.cesiumEvents=[];const s=Kn(t,n,r);if(void 0===s)return;const{t:l}=Yn(),{$services:c}=s,u=function(t,{emit:i},n,o){const a=e(null),r=e(null),s=e(null),l=(e,s)=>{var l,u;null==(l=Ce(a))||l.hide(),null==(u=Ce(r))||u.hide();const{Cartesian3:d,defined:p,IntersectionTests:m,Ray:v,SceneMode:h}=Cesium,{viewer:g}=o;if(p(g)){const o=g.scene,a=o.screenSpaceCameraController;if(!a.enableInputs||!a.enableZoom)return;if(o.mode===h.COLUMBUS_VIEW&&!a.enableTranslate)return;const r=o.camera;let l;switch(o.mode){case h.MORPHING:break;case h.SCENE2D:r.zoomIn(r.positionCartographic.height*(1-e));break;default:{let a;if(a=p(g.trackedEntity)?new Cesium.Cartesian3:c(g.scene),Cesium.defined(a))l={direction:r.direction,up:r.up};else{const e=new v(r.worldToCameraCoordinatesPoint(o.globe.ellipsoid.cartographicToCartesian(r.positionCartographic)),r.directionWC);a=m.grazingAltitudeLocation(e,o.globe.ellipsoid),l={heading:r.heading,pitch:r.pitch,roll:r.roll}}const u=new d,f=d.subtract(r.position,a,u),y=d.multiplyByScalar(f,e,f),b=d.add(a,y,a),C=e<1?"zoomIn":"zoomOut",w=s.currentTarget,O=Ze(r.positionCartographic.height).toFixed(0),x=be(n,"zoomEvt");x&&i("zoomEvt",{type:C,camera:g.camera,status:"start",target:w,level:O}),Cesium.defined(g.trackedEntity)||o.mode===h.COLUMBUS_VIEW?r.position=b:r.flyTo({destination:b,orientation:l,duration:t.duration,convert:!1,complete:()=>{x&&i("zoomEvt",{type:C,camera:g.camera,status:"end",target:w,level:O})},cancel:()=>{x&&i("zoomEvt",{type:C,camera:g.camera,status:"cancel",target:w,level:O})}})}}}},c=e=>{const{defined:t,IntersectionTests:i,Ray:n}=Cesium,o=new n(e.camera.positionWC,e.camera.directionWC),a=i.rayEllipsoid(o,e.globe.ellipsoid);return t(a)?n.getPoint(o,a.start):i.grazingAltitudeLocation(o,e.globe.ellipsoid)};return{zoomIn:e=>{l(1/t.zoomAmount,e)},zoomOut:e=>{l(t.zoomAmount,e)},zoomReset:e=>{var a;null==(a=Ce(s))||a.hide();const{viewer:r}=o;if(r.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(r.trackedEntity)){const e=r.trackedEntity;r.trackedEntity=void 0,r.trackedEntity=e}else{const o=be(n,"zoomEvt"),a=e.currentTarget,s=Ze(r.camera.positionCartographic.height).toFixed(0);o&&i("zoomEvt",{type:"zoomReset",camera:r.camera,status:"start",target:a,level:s});const l=()=>{o&&i("zoomEvt",{type:"zoomReset",camera:r.camera,status:"end",target:a,level:s})},c=()=>{o&&i("zoomEvt",{type:"zoomReset",camera:r.camera,status:"cancel",target:a,level:s})},u=t.defaultResetView,d={duration:t.durationReset,complete:l,cancel:c};Be(r,u,d)}},zoomInTooltipRef:a,zoomOutTooltipRef:r,resetTooltipRef:s}}(t,n,r,c),d=_s(t),p=e(null),m=e(null),v=e(null),h=e(null),g="VcNavigation"===(null==(a=we(r).proxy)?void 0:a.$options.name),y=e(g),C=b({});f((()=>t),(e=>{w((()=>{r.mounted&&E()}))}),{deep:!0});const x=i((()=>Object.assign({},$s.zoomOutOptions,t.zoomOutOptions))),S=i((()=>Object.assign({},$s.zoomInOptions,t.zoomInOptions))),_=i((()=>Object.assign({},$s.zoomResetOptions,t.zoomResetOptions)));r.createCesiumObject=async()=>new Promise(((e,i)=>{y.value=!0,w((()=>{const{viewer:i}=c;if(t.overrideViewerCamera){Re(i,t.defaultResetView)}if(!g&&t.teleportToViewer){i._element.appendChild(Ce(p)),e(Ce(p))}else e(Ce(p))}))})),r.mount=async()=>{var e;E();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Ce(p)}),!0},r.unmount=async()=>{var e;const{viewer:t}=c;if(!g){const e=t._element;e.contains(Ce(p))&&e.removeChild(Ce(p))}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Ce(p)}),!0};const E=()=>{var e,i,n;const o=d.style.value;if(C.left=o.left,C.top=o.top,C.transform=o.transform,o.flexDirection="vertical"===t.direction?"column":"row",o.background=t.background,o.borderRadius=t.borderRadius,o.border=t.border,!g){const a=null==(e=Ce(m))?void 0:e.$el,r=null==(i=Ce(v))?void 0:i.$el,s=null==(n=Ce(h))?void 0:n.$el;let l=0,c=0;if(void 0!==a){const e=a.getBoundingClientRect();"horizontal"===t.direction?(l+=e.width,c=e.height>c?e.height:c):(c+=e.height,l=e.width>l?e.width:l)}if(void 0!==r){const e=r.getBoundingClientRect();"horizontal"===t.direction?(l+=e.width,c=e.height>c?e.height:c):(c+=e.height,l=e.width>l?e.width:l)}if(void 0!==s){const e=s.getBoundingClientRect();"horizontal"===t.direction?(l+=e.width,c=e.height>c?e.height:c):(c+=e.height,l=e.width>l?e.width:l)}if(o.width=`${l+4}px`,o.height=`${c+4}px`,void 0===t.teleportToViewer||t.teleportToViewer){const e=d.attach.value;!e.bottom&&!e.top||e.left||e.right||(o.left="50%",o.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(o.top="50%",o.transform="translate(0, -50%)")}}Object.assign(C,o)},P=(e,t)=>{var i,o,a;let r,s,c,d;"zoomIn"===t?(r=m,s=u.zoomInTooltipRef,c=(null==(i=e.tooltip)?void 0:i.tip)||l("vc.navigation.zoomCotrol.zoomInTip"),d=u.zoomIn):"zoomOut"===t?(r=h,s=u.zoomOutTooltipRef,c=(null==(o=e.tooltip)?void 0:o.tip)||l("vc.navigation.zoomCotrol.zoomOutTip"),d=u.zoomOut):"zoomReset"===t&&(r=v,s=u.resetTooltipRef,c=(null==(a=e.tooltip)?void 0:a.tip)||l("vc.navigation.zoomCotrol.zoomResetTip"),d=u.zoomReset);const p=[];p.push(O(qr,{name:e.icon,size:e.size})),p.push(O("div",null,e.label)),e.tooltip?p.push(O(ls,{ref:s,...e.tooltip},(()=>O("strong",null,c)))):p.push(T("v-if"));return O(Yr,{class:`vc-${le(t)}`,ref:r,size:e.size,flat:e.flat,stack:e.stack,round:e.round,dense:!0,style:{color:e.color,background:e.background},onClick:d},(()=>wa(n.slots.default,p)))};return Object.assign(r.proxy,{zoomIn:()=>u.zoomIn,zoomOut:()=>u.zoomOut,zoomReset:()=>u.zoomReset}),()=>{if(y.value){const e=[];return e.push(O("li",null,P(S.value,"zoomIn"))),t.enableResetButton?e.push(O("li",null,P(_.value,"zoomReset"))):e.push(T("v-if")),e.push(O("li",null,P(x.value,"zoomOut"))),O("div",{ref:p,class:`vc-zoom-control ${d.classes.value} ${t.customClass}`,style:C},O("ul",{class:"vc-list"},e))}return T("v-if")}}});const qs=S({name:"VcPrintView",props:{options:Object},setup(t){const i=e(!1),n=e(!1);o().cesiumClass="VcPrintView";const{t:a}=Yn(),r=()=>{var e,o;if(i.value)return;const a=null==(e=t.options)?void 0:e.printWindow.document.getElementsByTagName("img");if(0===a.length)return;let r=!0;for(let t=0;r&&t<a.length;++t)r=a[t].complete;r&&(l(),i.value=r,i.value&&!n.value&&((null==(o=t.options)?void 0:o.readyCallback)&&t.options.readyCallback(t.options.printWindow),n.value=!0))};let s;const l=()=>{s&&s()};return C((()=>{var e;const i=null==(e=t.options)?void 0:e.printWindow,n=window,o=null==i?void 0:i.setInterval(r,200),a=n.setInterval(r,200);s=()=>{i.clearInterval(o),n.clearInterval(a),s=void 0}})),h((()=>{l()})),()=>{var e,i,n,o,r,s;const l=[];if(l.push(O("p",{},O("img",{src:null==(e=t.options)?void 0:e.image,alt:a("vc.navigation.screenshot"),class:"vc-map-image"}))),(null==(i=t.options)?void 0:i.credits.length)&&(null==(n=t.options)?void 0:n.showCredit)?l.push(O("h1",{},a("vc.navigation.credit"))):l.push(T("v-if")),(null==(o=t.options)?void 0:o.credits.length)&&(null==(r=t.options)?void 0:r.showCredit)){const e=[];null==(s=t.options)||s.credits.forEach((t=>{e.push(O("li",{innerHTML:t}))})),l.push(O("ul",{},e))}else l.push(T("v-if"));return O("div",{},l)}}});var Xs={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...Ss,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String,customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Qs={...ms,printEvt:e=>!0};var Js=S({name:"VcPrint",props:Xs,emits:Qs,setup(t,i){var n;const a=o();a.cesiumClass="VcPrint",a.cesiumEvents=[];const r=Kn(t,i,a);if(void 0===r)return;const{t:s}=Yn(),{$services:c}=r,u=e(null),d=e(null),p=e(null),m=_s(t),v=e(!1),h="VcNavigation"===(null==(n=we(a).proxy)?void 0:n.$options.name),g=e(h),y=b({});f((()=>t),(e=>{w((()=>{a.mounted&&C()}))}),{deep:!0}),a.createCesiumObject=async()=>new Promise(((e,i)=>{g.value=!0,w((()=>{const{viewer:i}=c;if(!h&&t.teleportToViewer){i._element.appendChild(Ce(u)),e(Ce(u))}else e(Ce(u))}))})),a.mount=async()=>{var e;C();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Ce(u)}),!0},a.unmount=async()=>{var e;const t=c.viewer._element;h||t.contains(Ce(u))&&t.removeChild(Ce(u));const{viewer:i}=c;return null==(e=i.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Ce(u)}),!0};const C=()=>{var e;const i=m.style.value;if(y.left=i.left,y.top=i.top,y.transform=i.transform,!h){const n=m.attach.value;void 0!==(null==(e=Ce(p))?void 0:e.$el)&&(void 0===t.teleportToViewer||t.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(y,i)},x=()=>{var e;null==(e=Ce(d))||e.hide();const{viewer:n}=c;(function(e){const t=e.scene,i=new Promise(((t,i)=>{const n=e.scene.postRender.addEventListener((()=>{n();try{const i=e.scene.canvas;t(i.toDataURL("image/png"))}catch(Ih){i(Ih)}}))}));return t.render(e.clock.currentTime),i})(n).then((e=>{if(t.downloadAutomatically){const i=document.createElement("a");i.download=t.screenshotName||s("vc.navigation.print.screenshot"),i.style.display="none",i.href=e,document.body.appendChild(i),i.click(),document.body.removeChild(i)}(t.printAutomatically||t.showPrintView)&&(t.showPrintView?_(e):t.printAutomatically&&S(e));be(a,"printEvt")&&i.emit("printEvt",{type:"capture",image:e,status:"end"})}))},S=e=>{E(!0,!0,e)},_=e=>{E(!1,!1,e)},E=(e,i,n)=>{let o;v.value=!0,e&&(o=document.createElement("iframe"),document.body.appendChild(o));const{viewer:a}=c;(e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",(()=>{i(t)})),t.document.open(),t.document.close(),t.document.head.innerHTML=`\n    <meta charset="UTF-8">\n    <title>${e.title}</title>\n    <style>\n  .background {\n    width: 100%;\n    fill: rgba(255, 255, 255, 1.0);\n  }\n\n  .map-image {\n    max-width: 95vw;\n    max-height: 95vh;\n  }\n\n  .layer-legends {\n    display: inline;\n    float: left;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n\n  .layer-title {\n    font-weight: bold;\n  }\n\n  h1, h2, h3 {\n    clear: both;\n  }\n</style>\n    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,M(qs,{options:e}).mount(t.document.getElementById("print"))})({image:n,showCredit:t.showCredit,credits:P(a),printWindow:o?o.contentWindow:void 0,title:s("vc.navigation.print.printViewTitle"),readyCallback:t=>{i&&function(e){const t=Oo();let i=0;const n=setTimeout((function(){t.reject(!1)}),1e4);function o(){clearTimeout(n)}function a(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener((function(e){o(),e.matches?++i:(--i,a())})),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,a()},e.document.execCommand("print",!0,null)||e.print(),t.promise}(t).catch((e=>{r.logger.warn(e)})).then((()=>{o&&document.body.removeChild(o),e&&(v.value=!1)}))},closeCallback:t=>{e&&(v.value=!1)}}),e||(v.value=!1)},P=e=>e.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(e.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map((e=>e.html)),I=e=>{v.value&&(e.cancel=!0)};return()=>{if(g.value){const e=[];e.push(O(qr,{name:t.icon,size:t.size})),e.push(O("div",null,t.label)),l(t.tooltip)?e.push(O(ls,{ref:d,onBeforeShow:I,...t.tooltip},(()=>O("strong",null,l(t.tooltip)&&t.tooltip.tip||s("vc.navigation.print.printTip"))))):e.push(T("v-if"));const i=[O(Yr,{ref:p,size:t.size,disabled:v.value,flat:t.flat,stack:t.stack,round:t.round,style:{color:t.color,background:t.background},dense:!0,onClick:x},(()=>e))];return O("div",{ref:u,class:`vc-print ${m.classes.value} ${t.customClass}`,style:y},i)}return T("v-if")}}}),Ks={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:12.5},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,description:Function,...Ss,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const el={...ms,locationEvt:e=>!0};var tl=S({name:"VcMyLocation",props:Ks,emits:el,setup(t,n){var a;const r=o();r.cesiumClass="VcMyLocation",r.cesiumEvents=[];const u=Kn(t,n,r);if(void 0===u)return;const{$services:d}=u,{t:p}=Yn(),m=e(null),v=e(null),h=e(null),g=e(!1),y=_s(t),C="VcNavigation"===(null==(a=we(r).proxy)?void 0:a.$options.name),x=e(C),S=b({});let _,E;f((()=>t),(e=>{w((()=>{r.mounted&&M()}))}),{deep:!0});const P=i((()=>g.value?p("vc.navigation.myLocation.positioning"):l(t.tooltip)&&t.tooltip.tip||p("vc.navigation.myLocation.myLocationTip")));r.createCesiumObject=async()=>{x.value=!0;const{viewer:e}=d,{CustomDataSource:i}=Cesium,n=e.dataSources.getByName("__vc-myLocation__");let o;if(n.length?_=n[0]:e.dataSources.add(new i("__vc-myLocation__")).then((e=>{_=e})),t.amap&&t.amap.key){const e=t.amap.options;o=new Promise(((i,n)=>{var o,a;I.load({key:null==(o=t.amap)?void 0:o.key,version:null==(a=t.amap)?void 0:a.version,plugins:["AMap.Geolocation"]}).then((t=>{E=new t.Geolocation(e),i(E)})).catch((e=>{u.logger.error(e),n(e)}))}))}const a=new Promise(((e,i)=>{w((()=>{if(!C&&t.teleportToViewer){d.viewer._element.appendChild(Ce(m)),e(Ce(m))}else e(Ce(m))}))}));return Promise.all([a,o]).then((e=>e[0]))},r.mount=async()=>{var e;M();const{viewer:t}=d;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Ce(m)}),!0},r.unmount=async()=>{var e;const{viewer:t}=d;if(E){const e=document.getElementsByTagName("script"),t=[];for(const i of e)i.src.indexOf("/webapi.amap.com/maps")>-1&&t.push(i);t.forEach((e=>{document.getElementsByTagName("body")[0].removeChild(e)}))}const i=d.viewer._element;return C||i.contains(Ce(m))&&i.removeChild(Ce(m)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Ce(m)}),t.dataSources.remove(_,!0)};const M=()=>{var e;const i=y.style.value;if(S.left=i.left,S.top=i.top,S.transform=i.transform,!C){const n=y.attach.value;void 0!==(null==(e=Ce(h))?void 0:e.$el)&&(void 0===t.teleportToViewer||t.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(S,i)},j=()=>{var e;if(null==(e=Ce(v))||e.hide(),g.value=!0,s(t.customAPI)){const e=t.customAPI(D);L(e)}else E&&t.amap&&t.amap.key?E.getCurrentPosition(((e,i)=>{var n;if("complete"===e){let e=[i.position.lng,i.position.lat];(null==(n=t.amap)?void 0:n.transformToWGS84)&&(e=Ao(e[0],e[1])),L({lng:e[0],lat:e[1],address:i.formattedAddress},i)}else D(p("vc.navigation.myLocation.fail"),i.message)})):t.geolocation?navigator.geolocation.getCurrentPosition((e=>{L({lng:e.coords.longitude,lat:e.coords.latitude},e)}),D,{enableHighAccuracy:t.geolocation.enableHighAccuracy,timeout:t.geolocation.timeout,maximumAge:t.geolocation.maximumAge}):D(p("vc.navigation.myLocation.fail"))},L=(e,i)=>{var o;const a=e.lng,s=e.lat,l=e.address,{Rectangle:u,sampleTerrain:m,defined:v,SceneMode:h}=Cesium,{viewer:f}=d;_.entities.removeAll();const y=_.entities.add({id:t.id,position:xe([a,s],f.scene.globe.ellipsoid),point:{color:Ie(t.pointColor),pixelSize:t.pixelSize,outlineWidth:t.outlineWidth,outlineColor:Ie(t.outlineColor)},properties:{...i},description:(null==(o=t.description)?void 0:o.call(this,e,i))||A({[p("vc.navigation.myLocation.lng")]:a,[p("vc.navigation.myLocation.lat")]:s,[p("vc.navigation.myLocation.address")]:l})}),b=be(r,"locationEvt");b&&n.emit("locationEvt",{type:"location",position:e,detail:i,entity:y});const C={duration:t.duration};if(v(t.maximumHeight)&&(C.maximumHeight=t.maximumHeight),v(t.hpr)&&c(t.hpr)&&(C.offset=new Cesium.HeadingPitchRange(t.hpr[0],t.hpr[1],t.hpr[2])),f.scene.mode===h.SCENE2D||f.scene.mode===h.COLUMBUS_VIEW)return f.flyTo(y,C).then((()=>{g.value=!1,b&&n.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})}));const w=t.factor,O=u.fromDegrees(a-w,s-w,a+w,s+w),x=f.scene.camera,S=x.getRectangleCameraCoordinates(O),E=f.scene.globe.ellipsoid.cartesianToCartographic(S);return m(f.scene.globe.terrainProvider,t.level,[u.center(O)]).then((function(e){const i={longitude:E.longitude,latitude:E.latitude,height:E.height+e[0].height},o=f.scene.globe.ellipsoid.cartographicToCartesian(i);b&&n.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"start"}),x.flyTo({duration:t.duration,destination:o,complete:()=>{g.value=!1,b&&n.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})},cancel:()=>{g.value=!1,b&&n.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"cancel"})}})}))},A=(e,t)=>{let i="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n===t)continue;let o=e[n];"object"==typeof o&&(o=A(o)),n=n.replace(/_/g," "),Cesium.defined(o)&&(i+="<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i},D=(...e)=>{g.value=!1,u.logger.error(...e)},k=e=>{g.value&&(e.cancel=!0)};return()=>{if(x.value){const e=[];return e.push(O(qr,{name:t.icon,size:t.size})),e.push(O("div",null,t.label)),l(t.tooltip)?e.push(O(ls,{ref:v,onBeforeShow:k,...t.tooltip},(()=>O("strong",null,P.value)))):e.push(T("v-if")),O("div",{ref:m,class:`vc-my-location ${y.classes.value} ${t.customClass}`,style:S},[O(Yr,{ref:h,size:t.size,flat:t.flat,stack:t.stack,round:t.round,loading:g.value,dense:!0,style:{color:t.color,background:t.background},onClick:j},{default:()=>e,loading:()=>O((()=>{switch(t.loadingType){case"bars":default:return Qr;case"ios":return ts;case"orbit":return is;case"oval":return ns;case"puff":return os;case"tail":return rs}})())})])}return T("v-if")}}});class il{constructor(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array}getHeight(e,t){return nl(this).then((function(i){return ol(i,e,t)}))}getHeights(e){return nl(this).then((function(t){for(let i=0;i<e.length;++i){const n=e[i];n.height=ol(t,n.longitude,n.latitude)}return e}))}}async function nl(e){const{defined:t}=Cesium;t(e.data)||(e.data=function(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const t=new Uint8Array(i);for(let e=0;e<t.length;e+=2){const i=t[e];t[e]=t[e+1],t[e+1]=i}e.data=new Int16Array(i)}return e.data}function ol(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720);let a=1440*(t=n.zeroToTwoPi(t))/n.TWO_PI;a<0?a=0:a>1440&&(a=1440);const r=0|a,s=0|o,l=a-r,c=o-s,u=1-l,d=1-c;return(al(e,s,r)*u*d+al(e,s,r+1)*l*d+al(e,s+1,r)*u*c+al(e,s+1,r+1)*l*c)/100}function al(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[1440*t+i]}class rl{constructor(e){const{Cartographic:t,knockout:i}=Cesium,n=e.gridFileUrl;n&&(this.geoidModel=new il(n)),this.proj4Projection=e.proj4Projection,this.projectionUnits=e.projectionUnits,this.proj4longlat=e.proj4longlat,this.lastHeightSamplePosition=new t,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=$(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=e.decimal||5,this.rangeType=e.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(e,t){const{Cartographic:i,defined:n,EllipsoidTerrainProvider:o,Intersections2D:a,SceneMode:r}=Cesium,s=e.scene,l=s.camera.getPickRay(t),c=s.globe,u=c.pickTriangle(l,s);if(n(u)){const e=c.ellipsoid,t=e.cartesianToCartographic(u.v0),n=e.cartesianToCartographic(u.v1),d=e.cartesianToCartographic(u.v2),p=e.cartesianToCartographic(s.mode===r.SCENE3D?u.intersection:s.globe.pick(l,s));let m;if(c.terrainProvider instanceof o)p.height=void 0;else{const e=a.computeBarycentricCoordinates(p.longitude,p.latitude,t.longitude,t.latitude,n.longitude,n.latitude,d.longitude,d.latitude);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const i=e.x*t.height+e.y*n.height+e.z*d.height;p.height=i}const i=c.terrainProvider.getLevelMaximumGeometricError(u.tile.level),o=p.height,r=Math.max(u.tile.data.tileBoundingRegion.minimumHeight,o-i),s=Math.min(u.tile.data.tileBoundingRegion.maximumHeight,o+i),l=r-(this.geoidModel?this.geoidModel.minimumHeight:0),v=s+(this.geoidModel?this.geoidModel.maximumHeight:0);m=Math.max(Math.abs(o-l),Math.abs(v-o))}i.clone(p,this.lastHeightSamplePosition);const v=c.terrainProvider;this.cartographicToFields(p,m),v instanceof o||this.debounceSampleAccurateHeight(v,p)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(e,t){const{Math:i}=Cesium,n=i.toDegrees(e.latitude),o=i.toDegrees(e.longitude);if(this.useProjection){const e=function(e,t,i,n,o){const a=1+Math.floor((e+180)/6),r=j(n,i+" +zone="+a+(t<0?" +south":""),[e,t]);return{utmZone:a+(t<0?"S":"N"),north:r[1].toFixed(2)+o,east:r[0].toFixed(2)+o}}(o,n,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=e.utmZone,this.north=e.north,this.east=e.east}const a=function(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:a}=Cesium,r=o(i,{}),s=o(r.decimal,5);return 0===r.rangeType?(n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E")):1===r.rangeType?(n.latitude=t.toFixed(s)+"°",n.longitude=e.toFixed(s)+"°"):2===r.rangeType&&(n.latitude=t.toFixed(s)+"°",n.longitude=(e<0?360+e:e).toFixed(s)+"°"),a(r.height)?n.elevation=Math.round(r.height)+(a(r.errorBar)?"±"+Math.round(r.errorBar):"")+"m":n.elevation="",n}(o,n,{height:e.height,errorBar:t,decimal:this.decimal,rangeType:this.rangeType});this.latitude=a.latitude,this.longitude=a.longitude,this.elevation=a.elevation}sampleAccurateHeight(e,t){const{Cartographic:i,sampleTerrainMostDetailed:n,when:o}=Cesium;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);const a=i.clone(t),r=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,s=n(e,[a]);this.tileRequestInFlight=Promise.all([r,s]).then((e=>{const n=e[0]||0;this.tileRequestInFlight=void 0,i.equals(t,this.lastHeightSamplePosition)&&(t.height=a.height-n,this.cartographicToFields(t))})).catch((()=>{this.tileRequestInFlight=void 0}))}}const sl=[],ll={start:0,stop:0},cl={},ul={},dl={};function pl(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:a,DeveloperError:r,IntersectionTests:s,SceneMode:l}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(e,t,c,u){if(!a(e))throw new r("ray is required");if(!a(t))throw new r("scene is required");c=n(c,!0);const d=t.mode,p=t.mapProjection,m=sl;m.length=0;const v=this._surface._tilesToRender;let h,g,f,y=v.length;for(g=0;g<y;++g){h=v[g];const t=h.data;if(!a(t))continue;const n=t.pickBoundingSphere;d!==l.SCENE3D?(i.fromRectangleWithHeights2D(h.rectangle,p,t.minimumHeight,t.maximumHeight,n),o.fromElements(n.center.z,n.center.x,n.center.y,n.center)):i.clone(t.boundingSphere3D,n);const r=s.raySphere(e,n,ll);a(r)&&m.push(h)}for(m.sort(function(e){const{BoundingSphere:t}=Cesium;return function(i,n){return t.distanceSquaredTo(i.data.pickBoundingSphere,e)-t.distanceSquaredTo(n.data.pickBoundingSphere,e)}}(e.origin)),y=m.length,g=0;g<y;++g)if(f=m[g].data.pickTriangle(e,t.mode,t.mapProjection,c,u),a(f)){f.tile=m[g];break}return f},t.prototype.pickTriangle=t.prototype.pickTriangle||function(e,t,i,n){const r=this.renderedMesh;if(!a(r))return;const l=r.vertices,c=r.indices,u=r.encoding,d=c.length;for(let p=0;p<d;p+=3){const r=c[p],d=c[p+1],m=c[p+2],v=ml(u,t,i,l,r,cl),h=ml(u,t,i,l,d,ul),g=ml(u,t,i,l,m,dl),f=s.rayTriangle(e,v,h,g,n,new o);if(a(f))return{intersection:f,v0:v,v1:h,v2:g}}}}function ml(e,t,i,n,o,a){e.decodePosition(n,o,a);const{Cartesian3:r,defined:s,SceneMode:l}=Cesium;if(s(t)&&t!==l.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(a);i.project(e,a),r.fromElements(a.z,a.x,a.y,a)}return a}var vl={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const hl={...ms,statusBarEvt:e=>!0};var gl=S({name:"VcStatusBar",props:vl,emits:hl,setup(t,i){var n;const a=o();a.cesiumClass="VcStatusBar",a.cesiumEvents=[];const r=Kn(t,i,a);if(void 0===r)return;const s=we(a),{$services:c}=r,u=e(null),d=e(null),{t:p}=Yn();let m=-1,v=-1;const h=b({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),g=b({fps:"NaN",ms:"NaN"}),y=e(),C=_s(t),x="VcNavigation"===(null==(n=s.proxy)?void 0:n.$options.name),S=e(x),_=b({});f((()=>t),(e=>{w((()=>{a.mounted&&E()}))}),{deep:!0}),a.createCesiumObject=async()=>{S.value=!0;const{viewer:e}=c,i=e._element;return t.showMouseInfo&&(y.value=new rl({gridFileUrl:t.gridFileUrl,proj4Projection:t.proj4Projection,projectionUnits:t.projectionUnits,proj4longlat:t.proj4longlat,decimal:t.decimal,rangeType:t.rangeType}),i.addEventListener("wheel",I,!1),i.addEventListener("mousemove",I,!1),i.addEventListener("touchmove",I,!1),pl()),t.showCameraInfo&&(e.camera.changed.addEventListener(M),M()),t.showPerformanceInfo&&(e.scene.debugShowFramesPerSecond=!0,e.scene.postRender.addEventListener(P)),new Promise(((i,n)=>{w((()=>{var n,o,a;if(!x&&t.teleportToViewer){e._element.appendChild(null==(n=Ce(u))?void 0:n.$el),i(null==(o=Ce(u))?void 0:o.$el)}else i(null==(a=Ce(u))?void 0:a.$el)}))}))},a.mount=async()=>{var e,t;E();const{viewer:i}=c;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"mounted",target:null==(e=Ce(u))?void 0:e.$el}),!0},a.unmount=async()=>{var e,i,n,o;const{viewer:r}=c,s=r._element;return t.showMouseInfo&&(y.value=void 0,s.removeEventListener("wheel",I),s.removeEventListener("mousemove",I),s.removeEventListener("touchmove",I)),t.showCameraInfo&&r.camera.changed.removeEventListener(M),t.showPerformanceInfo&&(r.scene._performanceDisplay&&(r.scene._performanceDisplay._container.style.display="block"),r.scene.postRender.removeEventListener(P)),x||s.contains(null==(e=Ce(u))?void 0:e.$el)&&s.removeChild(null==(i=Ce(u))?void 0:i.$el),null==(o=r.viewerWidgetResized)||o.raiseEvent({type:a.cesiumClass,status:"unmounted",target:null==(n=Ce(u))?void 0:n.$el}),!0};const E=()=>{const e=C.style.value;if(_.left=e.left,_.top=e.top,_.transform=e.transform,e.background=t.background,e.color=t.color,void 0===t.teleportToViewer||t.teleportToViewer){const t=C.attach.value;!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(_,e)},P=ho((e=>{var t,i;g.fps=null==(t=e._performanceDisplay)?void 0:t._fpsText.nodeValue,g.ms=null==(i=e._performanceDisplay)?void 0:i._msText.nodeValue,e._performanceDisplay._container.style.display="none"}),500),M=()=>{const{viewer:e}=c,{Math:t}=Cesium;h.heading=t.toDegrees(e.camera.heading).toFixed(1),h.pitch=t.toDegrees(e.camera.pitch).toFixed(1),h.roll=t.toDegrees(e.camera.roll).toFixed(1),h.height=e.camera.positionCartographic.height.toFixed(2),h.level=Ze(Number(h.height)).toFixed(0)},I=e=>{var n;const{Cartesian2:o,SceneMode:r}=Cesium,{viewer:s}=c;if(s.scene.mode===r.MORPHING)return;const l="mousemove"===e.type||"wheel"===e.type?e.clientX:e.changedTouches[0].clientX,u="mousemove"===e.type||"wheel"===e.type?e.clientY:e.changedTouches[0].clientY;if(l===m&&u===v)return;m=l,v=u;const d=s._element;if(s){if(t.showMouseInfo){const e=d.getBoundingClientRect(),t=new o(l-e.left,u-e.top);null==(n=y.value)||n.updateCoordinatesFromCesium(s,t)}be(a,"statusBarEvt")&&i.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:y.value,cameraInfo:h,performanceInfo:g})}},j=()=>{var e,i;t.useProjection&&(null==(e=Ce(d))||e.hide(),t.showMouseInfo&&(null==(i=y.value)||i.toggleUseProjection()))};return Object.assign(a.proxy,{getMouseCoordsInfo:()=>y.value,getCameraInfo:()=>h,getPerformanceInfo:()=>g}),()=>{var e,n,o,a,r,s,c,m;if(S.value){const v=[];return t.showMouseInfo?((null==(e=y.value)?void 0:e.useProjection)?v.push(O("div",{class:"vc-section-short ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.zone")),O("span",null,null==(a=y.value)?void 0:a.utmZone)]),O("div",{class:"vc-section ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.e")),O("span",null,null==(r=y.value)?void 0:r.east)]),O("div",{class:"vc-section ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.n")),O("span",null,null==(s=y.value)?void 0:s.north)])):v.push(O("div",{class:"vc-section ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.lng")),O("span",{},null==(n=y.value)?void 0:n.longitude)]),O("div",{class:"vc-section ellipsis"},[O("span",{},p("vc.navigation.statusBar.lat")),O("span",{},null==(o=y.value)?void 0:o.latitude)])),(null==(c=y.value)?void 0:c.elevation)?v.push(O("div",{class:"vc-section ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.elev")),O("span",{},null==(m=y.value)?void 0:m.elevation)])):v.push(T("v-if"))):v.push(T("v-if")),t.showCameraInfo?v.push(O("div",{class:"vc-section-short-mini ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.level")),O("span",null,h.level)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.heading")),O("span",null,`${h.heading}°`)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.pitch")),O("span",null,`${h.pitch}°`)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.roll")),O("span",null,`${h.roll}°`)]),O("div",{class:"vc-section ellipsis"},[O("span",{...i.attrs},p("vc.navigation.statusBar.cameraHeight")),O("span",null,`${h.height}m`)])):v.push(T("v-if")),t.showPerformanceInfo?v.push(O("div",{class:"vc-section-short-mini ellipsis"},[O("span",null,g.ms)]),O("div",{class:"vc-section-short-mini ellipsis"},[O("span",null,g.fps)])):v.push(T("v-if")),l(t.tooltip)&&t.showMouseInfo&&t.useProjection?v.push(O(ls,{ref:d,...t.tooltip},(()=>O("strong",null,l(t.tooltip)&&t.tooltip.tip||p("vc.navigation.statusBar.tip"))))):v.push(T("v-if")),O(Yr,{ref:u,class:`vc-status-bar ${C.classes.value} ${t.customClass}`,style:_,noCaps:!0,onClick:j},(()=>v))}return T("v-if")}}}),fl={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const yl={...ms,distanceLegendEvt:e=>!0};var bl=S({name:"VcDistanceLegend",props:fl,emits:yl,setup(t,n){var a;const r=o();r.cesiumClass="VcDistanceLegend",r.cesiumEvents=[];const s=Kn(t,n,r);if(void 0===s)return;const l=we(r),{$services:c}=s,u=e(null),d=e(""),p=_s(t),m="VcNavigation"===(null==(a=l.proxy)?void 0:a.$options.name),v=e(m),h=b({});let g=0;const y=e(0);let C=0;f((()=>t),(e=>{w((()=>{r.mounted&&S()}))}),{deep:!0});const x=i((()=>({width:`${y.value}px`,left:5+(t.width+15-y.value)/2+"px",height:"2px",background:t.barBackground})));r.createCesiumObject=async()=>(v.value=!0,d.value="",new Promise(((e,i)=>{w((()=>{var i,n,o;const{viewer:a}=c;if(!m&&t.teleportToViewer){a._element.appendChild(null==(i=Ce(u))?void 0:i.$el),e(null==(n=Ce(u))?void 0:n.$el)}else e(null==(o=Ce(u))?void 0:o.$el);a.scene.postRender.addEventListener(_)}))}))),r.mount=async()=>{var e,t;S();const{viewer:i}=c;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:r.cesiumClass,status:"mounted",target:null==(e=Ce(u))?void 0:e.$el}),!0},r.unmount=async()=>{var e,t,i,n;const{viewer:o}=c;o.scene.postRender.removeEventListener(_);const a=o._element;return m||a.contains(null==(e=Ce(u))?void 0:e.$el)&&a.removeChild(null==(t=Ce(u))?void 0:t.$el),null==(n=o.viewerWidgetResized)||n.raiseEvent({type:r.cesiumClass,status:"unmounted",target:null==(i=Ce(u))?void 0:i.$el}),!0};const S=()=>{const e=p.style.value;if(h.left=e.left,h.top=e.top,h.transform=e.transform,e.background=t.background,e.color=t.color,void 0===t.teleportToViewer||t.teleportToViewer){const t=p.attach.value;!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}e.width=`${t.width}px`,Object.assign(h,e)},_=ho((e=>{const{Cartesian2:i,defined:o,getTimestamp:a,EllipsoidGeodesic:s}=Cesium,l=a();if(l<g+250)return;g=l;const c=new s,u=e.canvas.clientWidth,p=e.canvas.clientHeight,m=e.camera.getPickRay(new i(u/2|0,p-1)),v=e.camera.getPickRay(new i(1+u/2|0,p-1)),h=e.globe,f=h.pick(m,e),b=h.pick(v,e);if(!o(f)||!o(b))return y.value=0,void(d.value="");const w=h.ellipsoid.cartesianToCartographic(f),O=h.ellipsoid.cartesianToCartographic(b);c.setEndPoints(w,O);const x=c.surfaceDistance,S=t.width-10;let _;for(let t=Cl.length-1;!o(_)&&t>=0;--t)if(Cl[t]/x<S&&(_=Cl[t],C!==_)){C=_;be(r,"distanceLegendEvt")&&n.emit("distanceLegendEvt",{type:"distanceLegend",distance:C,status:"changed"})}if(o(_)){let e;e=C>=1e3?(_/1e3).toString()+" km":_.toString()+" m",y.value=_/x|0,d.value=e}else y.value=0,d.value=""}),500);return()=>v.value&&void 0!==d.value?O(Yr,{ref:u,class:`vc-distance-legend ${p.classes.value} ${t.customClass}`,style:h,stack:!0,noCaps:!0},(()=>[O("label",null,d.value),O("div",{style:x.value,class:"vc-bar"})])):T("v-if")}});const Cl=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],wl={...Ss,compassOpts:{type:[Object,Boolean],default:()=>pe(Es,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>pe(Gs,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>pe(Xs,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>pe(Ks,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:pe(vl,["position","offset"]),distancelegendOpts:pe(fl,["position","offset"])})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Ol=pe(wl);var xl=S({name:"VcNavigation",inheritAttrs:!1,props:wl,emits:{...ms,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},setup(t,n){const a=o();a.cesiumClass="VcNavigation";const r=Kn(t,n,a);if(void 0===r)return;const s=e(!1),{$services:l}=r,c=_s(t),u=_s(t.otherOpts||{position:"bottom-right"}),d=e(null),p=e(null),m=e(null),v=e(null),h=e(null),g=e(null),y=e(null),C=e(null),x=b({}),S=b({}),{emit:_}=n;f((()=>t),(()=>{w((()=>{var e,t,i,n,o,a;V(),null==(e=Ce(m))||e.reload(),null==(t=Ce(v))||t.reload(),null==(i=Ce(g))||i.reload(),null==(n=Ce(h))||n.reload(),null==(o=Ce(y))||o.reload(),null==(a=Ce(C))||a.reload()}))}),{deep:!0});const E=i((()=>Object.assign({},Ol.compassOpts,t.compassOpts))),P=i((()=>Object.assign({},Ol.zoomOpts,t.zoomOpts))),M=i((()=>Object.assign({},Ol.printOpts,t.printOpts))),I=i((()=>Object.assign({},Ol.locationOpts,t.locationOpts))),j=i((()=>Object.assign({},Ol.otherOpts,t.otherOpts))),L=e=>{be(a,"compassEvt")&&_("compassEvt",e)},A=e=>{be(a,"zoomEvt")&&_("zoomEvt",e)},D=e=>{be(a,"printEvt")&&_("printEvt",e)},k=e=>{be(a,"locationEvt")&&_("locationEvt",e)},R=e=>{be(a,"statusBarEvt")&&_("statusBarEvt",e)},B=e=>{be(a,"distanceLegendEvt")&&_("distanceLegendEvt",e)};a.createCesiumObject=async()=>{var e;s.value=!0;const{viewer:i}=l;return null==(e=i.viewerWidgetResized)||e.addEventListener(N),new Promise(((e,n)=>{w((()=>{const n=i._element;t.teleportToViewer&&(n.appendChild(Ce(d)),Ce(p)&&n.appendChild(Ce(p))),e([Ce(d),Ce(p)])}))}))},a.mount=async()=>{var e;V();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Ce(d)}),!0},a.unmount=async()=>{var e,t;const{viewer:i}=l,n=i._element;return n.contains(Ce(d))&&n.removeChild(Ce(d)),n.contains(Ce(p))&&n.removeChild(Ce(p)),null==(e=i.viewerWidgetResized)||e.removeEventListener(N),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Ce(d)}),!0};const N=()=>{w((()=>{V()}))},V=()=>{var e,i,n,o,a;const r=null==(e=Ce(m))?void 0:e.$el;let s=0,l=0;if(void 0!==r){const e=getComputedStyle(r.parentNode).margin;l=parseInt(e),s+=r.getBoundingClientRect().height+2*l}const d=null==(i=Ce(v))?void 0:i.$el;void 0!==d&&(s+=d.getBoundingClientRect().height+2*l);const p=null==(n=Ce(h))?void 0:n.$el;void 0!==p&&(s+=p.getBoundingClientRect().height+2*l);const f=null==(o=Ce(g))?void 0:o.$el;void 0!==f&&(s+=f.getBoundingClientRect().height+2*l);const b=c.style.value,C=c.attach.value;x.left=b.left,x.top=b.top,x.transform=b.transform,(void 0===t.teleportToViewer||t.teleportToViewer)&&(!C.bottom&&!C.top||C.left||C.right||(b.left="50%",b.transform="translate(-50%, 0)"),!C.left&&!C.right||C.top||C.bottom||(b.top="50%",b.transform="translate(0, -50%)")),Object.assign(x,b,{height:`${s}px`});const w=u.style.value,O=u.attach.value;S.left=w.left,S.top=w.top,S.transform=w.transform,(void 0===t.teleportToViewer||t.teleportToViewer)&&(!O.bottom&&!O.top||O.left||O.right||(w.left="50%",w.transform="translate(-50%, 0)"),!O.left&&!O.right||O.top||O.bottom||(w.top="50%",w.transform="translate(0, -50%)"));let _=0;const E=null==(a=Ce(y))?void 0:a.$el;void 0!==E&&(_+=E.getBoundingClientRect().height),Object.assign(S,w,{height:`${_}px`})};return()=>{if(s.value){const e=[];E.value&&!1!==t.compassOpts?e.push(O("div",{class:"vc-navigation-control"},[O(Ws,{ref:m,...E.value,onCompassEvt:L})])):e.push(T("v-if")),P.value&&!1!==t.zoomOpts?e.push(O("div",{class:"vc-navigation-control"},[O(Ys,{ref:v,...P.value,onZoomEvt:A})])):e.push(T("v-if")),M.value&&!1!==t.printOpts?e.push(O("div",{class:"vc-navigation-control"},[O(Js,{ref:h,...M.value,onPrintEvt:D})])):e.push(T("v-if")),I.value&&!1!==t.locationOpts?e.push(O("div",{class:"vc-navigation-control"},[O(tl,{ref:g,...I.value,onLocationEvt:k})])):e.push(T("v-if"));let i=[O("div",{class:"vc-navigation-controls"},e)];i=wa(n.slots.default,i);const o=[];return o.push(O("div",{ref:d,class:`vc-navigation ${c.classes.value} ${t.customClass}`,style:x},i)),!1!==t.otherOpts&&o.push(O("div",{ref:p,class:"vc-location-other-controls "+u.classes.value,style:S},[O(gl,{ref:y,...j.value.statusBarOpts,onStatusBarEvt:R}),O(bl,{ref:C,...j.value.distancelegendOpts,onDistanceLegendEvt:B})])),o}return T("v-if")}}});function Sl(t,{emit:i},n){const o={},a={},r={},s={};let l,c,u,d;const p=e(0);let v,h,g,f,y,b=0,C={},w=0,O={},x=0;const S=e(56),_=e(3);let E;const P=e(null),T=()=>{const{defined:e}=Cesium;e(n.viewer)?(l&&(l(),l=void 0),l=n.viewer.scene.postRender.addEventListener((function(){p.value!==n.viewer.scene.camera.heading&&(p.value=n.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},M=(e,t)=>{const{defined:o,getTimestamp:a,SceneMode:r,Math:s,ScreenSpaceEventType:l}=Cesium,p=n.viewer.scene,m=p.screenSpaceCameraController;if(p.mode===r.MORPHING||!m.enableInputs)return;switch(p.mode){case r.COLUMBUS_VIEW:if(m.enableLook)break;if(!m.enableTranslate||!m.enableTilt)return;break;case r.SCENE3D:if(m.enableLook)break;if(!m.enableTilt||!m.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!m.enableTranslate)return}g.removeInputAction(l.LEFT_UP),o(d)&&n.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,a();let v=s.PI_OVER_TWO-Math.atan2(-t.y,t.x);const h=Math.PI/4;let f=0;const y=1,b=2,C=3,w=4;f=v>=-h&&h>=v?w:v>=h&&3*h>=v?b:v>=3*h&&5*h>=v?C:y;const O=be(n,"compassEvt");let x="rotateEast";switch(f){case y:x="rotateWest";break;case b:x="rotateEast";break;case C:x="rotateNorth";break;case w:x="rotateSouth"}O&&i("compassEvt",{type:x,camera:p.camera,status:"start",target:e}),d=function(t){const o=n.viewer.scene,r=o.camera;switch(a(),v=20*Math.abs(r.positionCartographic.height/6378317)*5e-4,f){case y:r.rotateLeft(v);break;case b:r.rotateRight(v);break;case C:r.rotate(r.right,-v);break;case w:r.rotate(r.right,v)}O&&i("compassEvt",{type:x,camera:o.camera,status:"changing",target:e})},u=function(t){g.removeInputAction(l.LEFT_UP),o(d)&&n.viewer.clock.onTick.removeEventListener(d),u=void 0,d=void 0,O&&i("compassEvt",{type:x,camera:p.camera,status:"end",target:e})},g.setInputAction(u,l.LEFT_UP),c=n.viewer.clock.onTick.addEventListener(d)},I=(e,l)=>{if(!t.enableCompassOuterRing)return;const c=n.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1);const{Cartesian2:p,Cartesian3:m,defined:g,Math:f,Matrix4:y,Ray:O,Transforms:x}=Cesium;h=void 0,v=void 0;const S=be(n,"compassEvt");S&&i("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:e}),b=Math.atan2(-l.y,l.x);const _=new p;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new O,P=u.getPickRay(_,E),T=c.globe.pick(P,c,s);C=g(T)?x.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,r):x.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,r);let M=y.clone(u.transform,a);u.lookAtTransform(C),w=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(M),h=function(t){const r=e.getBoundingClientRect(),s=new p((r.right-r.left)/2,(r.bottom-r.top)/2);let l;t instanceof MouseEvent?l=new p(t.clientX-r.left,t.clientY-r.top):t instanceof TouchEvent&&(l=new p(t.changedTouches[0].clientX-r.left,t.changedTouches[0].clientY-r.top));const d=p.subtract(l,s,o),m=Math.atan2(-d.y,d.x)-b,v=f.zeroToTwoPi(w-m);u=n.viewer.scene.camera,M=y.clone(u.transform,a),u.lookAtTransform(C);const h=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-h),u.lookAtTransform(M),S&&i("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:e})},v=function(t){document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),h=void 0,v=void 0,S&&i("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:e})},document.addEventListener("mousemove",h,!1),document.addEventListener("touchmove",h,!1),document.addEventListener("mouseup",v,!1),document.addEventListener("touchend",v,!1)},j=(e,t)=>{const{Cartesian2:r,defined:s,Math:l,Matrix4:c,ScreenSpaceEventType:u,Transforms:d}=Cesium;g.removeInputAction(u.MOUSE_MOVE),g.removeInputAction(u.LEFT_UP),f=void 0,y=void 0,x=l.PI_OVER_TWO-Math.atan2(-t.y,t.x),x=x<0?0:x,x=x>l.PI_OVER_TWO?l.PI_OVER_TWO:x;const p=n.viewer.scene,v=p.camera,h=new r;h.x=p.canvas.clientWidth/2,h.y=p.canvas.clientHeight/2;let b=v.pickEllipsoid(h,p.globe.ellipsoid);if(!s(b))for(;h.y<p.canvas.clientHeight;)h.y+=5,b=v.pickEllipsoid(h,p.globe.ellipsoid);const C=be(n,"compassEvt");C&&i("compassEvt",{type:"tilt",camera:p.camera,status:"start",target:e}),m(b)&&s(b)&&(O=d.eastNorthUpToFixedFrame(b,p.globe.ellipsoid)),f=t=>{const s=e.getBoundingClientRect(),u=new Cesium.Cartesian2((s.right-s.left)/2,(s.bottom-s.top)/2),d=r.clone(t.endPosition),m=r.subtract(d,u,o);let v=l.PI_OVER_TWO-Math.atan2(-m.y,m.x);v=v<0?0:v,v=v>l.PI_OVER_TWO?l.PI_OVER_TWO:v;const h=n.viewer.scene.camera,g=c.clone(h.transform,a);h.lookAtTransform(O);const f=v-x;h.rotateUp(f),x=v,h.lookAtTransform(g);let y=Math.ceil(v/(Math.PI/40));y=y>19?19:y;const b=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][y];S.value=b.x,_.value=b.y,C&&i("compassEvt",{type:"tilt",camera:p.camera,status:"changing",target:e})},y=function(t){g.removeInputAction(u.MOUSE_MOVE),g.removeInputAction(u.LEFT_UP),f=void 0,y=void 0,C&&i("compassEvt",{type:"tilt",camera:p.camera,status:"end",target:e})},g.setInputAction(f,u.MOUSE_MOVE),g.setInputAction(y,u.LEFT_UP)};return{heading:p,handleDoubleClick:e=>{const{Cartesian2:o,Cartesian3:a,defined:r,Matrix4:l,Ray:c,SceneMode:u,Transforms:d}=Cesium,{viewer:p}=n,m=p.scene,v=m.camera,h=m.screenSpaceCameraController;if(m.mode===u.MORPHING||!h.enableInputs)return!0;if(m.mode===u.COLUMBUS_VIEW&&!h.enableTranslate)return;if(m.mode===u.SCENE3D||m.mode===u.COLUMBUS_VIEW){if(!h.enableLook)return;if(m.mode===u.SCENE3D&&!h.enableRotate)return}const g=new o;g.x=m.canvas.clientWidth/2,g.y=m.canvas.clientHeight/2;const f=new c,y=v.getPickRay(g,f),b=m.globe.pick(y,m,s);if(!r(b))return void p.camera.flyHome();const C=be(n,"compassEvt");C&&i("compassEvt",{type:"reset",camera:p.camera,status:"start",target:e.currentTarget});const w=d.eastNorthUpToFixedFrame(b||new a,p.scene.globe.ellipsoid),O=a.subtract(b||new a,v.position,new a),x=Ts.createTween(m,{destination:l.multiplyByPoint(w,new a(0,0,a.magnitude(O)),new a),direction:l.multiplyByPointAsVector(w,new a(0,0,-1),new a),up:l.multiplyByPointAsVector(w,new a(0,1,0),new a),duration:t.duration,complete:()=>{C&&i("compassEvt",{type:"reset",camera:p.camera,status:"end",target:e.currentTarget})},cancel:()=>{C&&i("compassEvt",{type:"reset",camera:p.camera,status:"cancel",target:e.currentTarget})}});m.tweens.add(x)},handleMouseDown:e=>{var t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Ce(P))||t.hide();const{Cartesian2:i,SceneMode:a,Math:r}=Cesium;if(n.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),c=new i((l.right-l.left)/2,(l.bottom-l.top)/2);let u;e instanceof MouseEvent?(u=new i(e.clientX-l.left,e.clientY-l.top),E=new i(e.clientX,e.clientY)):e instanceof TouchEvent&&(u=new i(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top),E=new i(e.changedTouches[0].clientX,e.changedTouches[0].clientY));const d=i.subtract(u,c,o),p=i.magnitude(d);if(p>30&&p<45)I(s,d);else if(p>50&&p<70){const e=r.PI_OVER_TWO-Math.atan2(-d.y,d.x);e>=0&&e<=r.PI_OVER_TWO&&j(s,d)}else M(s,d)},handleMouseUp:e=>{const{Cartesian2:t,Math:i}=Cesium,a=e.currentTarget.getBoundingClientRect(),r=new t((a.right-a.left)/2,(a.bottom-a.top)/2),s="mouseup"===e.type?new t(e.clientX-a.left,e.clientY-a.top):new t(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top),l=t.subtract(s,r,o),c=t.magnitude(l);if(c>30&&c<45){const o=i.toDegrees(Math.atan2(-l.y,l.x)),a="mouseup"===e.type?new t(e.clientX,e.clientY):new t(e.changedTouches[0].clientX,e.changedTouches[0].clientY),r=a.x-E.x,s=a.y-E.y;if(Math.sqrt(r*r+s*s)>5)return;const c=i.toDegrees(p.value),u=Math.abs(o-c),d=n.viewer.scene;(o>0&&c>0&&c<90&&u>80&&u<100||u>260&&u<280)&&d.camera.flyTo({destination:d.camera.position,orientation:{heading:0,pitch:d.camera.pitch}})}},onTooltipBeforeShow:e=>{void 0!==h&&(e.cancel=!0)},viewerChange:T,load:async(e,t)=>(n.viewer=e,p.value=e.scene.camera.heading,T(),g=new Cesium.ScreenSpaceEventHandler(t),(()=>{const{Math:e}=Cesium,t=e.PI_OVER_TWO+n.viewer.scene.camera.pitch,i=Math.PI/2/20;let o=Math.floor(t/i);o=o>19?19:o,o=o<0?0:o,S.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].x,_.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].y})(),!0),unload:async()=>(document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),c&&c(),l&&l(),null==g||g.destroy(),!0),tiltbarLeft:S,tiltbarTop:_,tooltipRef:P}}var _l=S({name:"VcCompassSm",props:{enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...Ss},emits:{...ms,compassEvt:e=>!0},setup(t,n){var a;const r=o();r.cesiumClass="VcCompassSm";const s=Kn(t,n,r);if(void 0===s)return;const{t:l}=Yn(),c=we(r),{$services:u}=s,d=Sl(t,n,r),p=_s(t),m=e(null),v=e(null),h="VcNavigationSm"===(null==(a=c.proxy)?void 0:a.$options.name),g=e(h),y=b({});f((()=>t),(e=>{w((()=>{r.mounted&&_()}))}),{deep:!0});const C=i((()=>({left:d.tiltbarLeft.value+"px",top:d.tiltbarTop.value+"px",visibility:t.autoHidden?"hidden":"visible"}))),x=i((()=>({visibility:t.autoHidden?"hidden":"visible"}))),S=i((()=>({transform:"rotate(-"+d.heading.value+"rad)",WebkitTransform:"rotate(-"+d.heading.value+"rad)"})));r.createCesiumObject=async()=>{g.value=!0;const{viewer:e}=u;return new Promise(((t,i)=>{w((()=>{if(h)t(Ce(m));else{e._element.appendChild(Ce(m)),t(Ce(m))}}))}))},r.mount=async()=>{var e;_();const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Ce(m)}),d.load(u.viewer,Ce(m))},r.unmount=async()=>{var e;const{viewer:t}=u,i=t._element;return h||i.contains(Ce(m))&&i.removeChild(Ce(m)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Ce(m)}),d.unload()};const _=()=>{const e=p.style.value;y.left=e.left,y.top=e.top,y.transform=e.transform;const t=p.attach.value,i=Ce(v);if(void 0!==i){const n=null==i?void 0:i.getBoundingClientRect();e.width=`${null==n?void 0:n.width}px`,e.height=`${null==n?void 0:n.height}px`,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(y,e)};return()=>{if(g.value){let e=[];return e=wa(n.slots.default,e),e.push(O("div",{class:"vc-compass-tilt-sm",style:x.value})),e.push(O("div",{class:"vc-compass-tiltbar-sm",style:C.value})),e.push(O("div",{class:"vc-compass-arrows-sm",style:x.value})),e.push(O("div",{ref:v,class:"vc-compass-outer-ring-sm",style:S.value},t.tooltip?O(ls,{ref:d.tooltipRef,...t.tooltip,onBeforeShow:d.onTooltipBeforeShow},(()=>O("strong",{},t.tooltip.tip||l("vc.navigationSm.compass.outerTip")))):T("v-if"))),e.push(O("div",{class:"vc-arrows-e-sm",style:x.value})),e.push(O("div",{class:"vc-arrows-n-sm",style:x.value})),e.push(O("div",{class:"vc-arrows-s-sm",style:x.value})),e.push(O("div",{class:"vc-arrows-w-sm",style:x.value})),O("div",{ref:m,class:"vc-compass-sm "+p.classes.value,style:y,onDblclick:d.handleDoubleClick,onMousedown:d.handleMouseDown,onMouseup:d.handleMouseUp,onTouchend:d.handleMouseUp,onTouchstart:d.handleMouseDown},e)}return T("v-if")}}});var El=S({name:"VcZoomControlSm",props:{...Ss,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},emits:{...ms,zoomEvt:e=>!0},setup(t,n){var a;const r=o();r.cesiumClass="VcZoomControlSm",r.cesiumEvents=[];const s=e(null),l=e(null),c=e(null),u=e(null),d="VcNavigationSm"===(null==(a=we(r).proxy)?void 0:a.$options.name),p=e(d),v=b({}),h=Kn(t,n,r);if(void 0===h)return;const{t:g}=Yn(),{$services:y}=h,C=_s(t),x=function(t,{emit:i},n,o){const a=e(65),r=e(null),s=e(null),l=e(null);let c,u,d,p,v,h,g,f,y,b,C,w;const O=e=>{const{Cartesian2:t,Cartesian3:a,defined:r,Ellipsoid:s,Math:l}=Cesium,{viewer:c}=o,u=c.scene,d=u.camera,p=u.canvas,v=new t;v.x=p.clientWidth/2,v.y=p.clientHeight/2;const h=x(v);if(r(h)){const t=a.distance(d.position,h);let o=.0618*e*.2;o=t>300?o:2*o;const s=t*o,u=new a;a.subtract(h,d.position,u);const p=a.clone(d.right),g=a.dot(u,p),f=new a;a.multiplyByScalar(p,g,f),a.subtract(u,f,u),a.normalize(u,u),d.move(u,s);const y=new a;a.normalize(h,y);const b=d.pickEllipsoid(v,c.scene.globe.ellipsoid);if(m(b)&&r(b)&&!isNaN(b.x)&&!isNaN(b.y)&&!isNaN(b.z)&&!(d.positionCartographic.height<0)){a.normalize(b,b);const t=a.angleBetween(y,b);if(!l.equalsEpsilon(t,0,l.EPSILON10)){const o=a.cross(y,b,new a);d.rotate(o,t),be(n,"zoomEvt")&&i("zoomEvt",{type:1===e?"zoomIn":"zoomOut",camera:c.camera,status:"end"})}}}},x=e=>{const{defined:t,Cartesian3:i}=Cesium,{viewer:n}=o,a=n.scene,r=a.globe,s=a.camera;if(t(r)){let n;a.pickPositionSupported&&(n=a.pickPositionWorldCoordinates(e));const o=s.getPickRay(e),l=r.pick(o,a),c=t(n)?i.distance(n,s.positionWC):Number.POSITIVE_INFINITY;return(m(l)&&t(l)?i.distance(l,s.positionWC):Number.POSITIVE_INFINITY)>c?n:l}};return{handleZoomInMouseDown:e=>{var t,i,n;const{defined:a,getTimestamp:m,SceneMode:v,ScreenSpaceEventType:h}=Cesium,{viewer:g}=o;null==(t=Ce(r))||t.hide(),null==(i=Ce(s))||i.hide(),null==(n=Ce(l))||n.hide(),c.removeInputAction(h.LEFT_UP),a(u)&&g.clock.onTick.removeEventListener(u),d=void 0,u=void 0,m();const f=g.scene.camera;u=()=>{g.scene.mode===v.COLUMBUS_VIEW?f.zoomIn():O(1)},d=()=>{c.removeInputAction(h.LEFT_UP),a(u)&&g.clock.onTick.removeEventListener(u),d=void 0,u=void 0},c.setInputAction(d,h.LEFT_UP),p=g.clock.onTick.addEventListener(u)},handleZoomOutMouseDown:e=>{var t,i,n;null==(t=Ce(r))||t.hide(),null==(i=Ce(s))||i.hide(),null==(n=Ce(l))||n.hide();const{defined:a,getTimestamp:u,SceneMode:d,ScreenSpaceEventType:p}=Cesium,{viewer:m}=o;c.removeInputAction(p.LEFT_UP),a(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0,u();const f=m.scene.camera;v=()=>{m.scene.mode===d.COLUMBUS_VIEW?f.zoomOut():O(-1)},h=()=>{c.removeInputAction(p.LEFT_UP),a(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0},c.setInputAction(h,p.LEFT_UP),g=m.clock.onTick.addEventListener(v)},handleZoomBarScrollMouseDown:e=>{var t,i,n;null==(t=Ce(r))||t.hide(),null==(i=Ce(s))||i.hide(),null==(n=Ce(l))||n.hide();const{Cartesian2:c,defined:u,SceneMode:d}=Cesium,{viewer:p}=o;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,b=void 0;const m=p.scene.camera;b=()=>{const e=a.value-65;e>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):e<0&&(p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1))},f=e=>{const t=a.value,i=e.target.parentElement.getBoundingClientRect(),n=w.getBoundingClientRect(),o=new Cesium.Cartesian2;o.x="touchmove"===e.type?e.changedTouches[0].clientX-n.left:e.clientX-n.left,o.y="touchmove"===e.type?e.changedTouches[0].clientY-n.top:e.clientY-n.top;let r=new c(i.width-o.x,i.height-o.y).y-16;r=r<0?0:r,r=r>120?120:r,a.value=120-r,a.value-t>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1)},y=()=>{document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,f=void 0,b=void 0,a.value=65},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",y,!1),document.addEventListener("touchend",y,!1),C=p.clock.onTick.addEventListener(b)},load:e=>(w=e,c=new Cesium.ScreenSpaceEventHandler(e),!0),unload:()=>(document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),null==p||p(),null==g||g(),null==C||C(),null==c||c.destroy(),!0),zoombarTop:a,zoomInTooltipRef:r,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:e=>{void 0===f&&void 0===u&&void 0===v||(e.cancel=!0)}}}(0,n,r,y);f((()=>t),(e=>{w((()=>{r.mounted&&_()}))}),{deep:!0});const S=i((()=>({top:x.zoombarTop.value+"px"})));r.createCesiumObject=async()=>new Promise(((e,t)=>{p.value=!0,w((()=>{const t=Ce(s),{viewer:i}=y;if(d)e(t);else{const n=i._element;m(t)&&(null==n||n.appendChild(t)),e(t)}}))})),r.mount=async()=>{var e;_();const{viewer:t}=y;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"mounted",target:Ce(s)}),x.load(Ce(s))},r.unmount=async()=>{var e;const{viewer:t}=y;if(!d){const e=t._element,i=Ce(s);m(i)&&(null==e?void 0:e.contains(i))&&e.removeChild(i)}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:r.cesiumClass,status:"unmounted",target:Ce(s)}),x.unload()};const _=()=>{const e=C.style.value;if(v.left=e.left,v.top=e.top,v.transform=e.transform,v.visibility=t.autoHidden?"hidden":"visible",!d){const t=C.attach.value;!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(v,e)};return()=>{if(p.value){let e=[];return e=wa(n.slots.default,e),e.push(O("div",{ref:l,class:"vc-zoomin-sm",onMousedown:x.handleZoomInMouseDown,onTouchstart:x.handleZoomInMouseDown},t.tooltip?O(ls,{ref:x.zoomInTooltipRef,...t.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},t.tooltip.zoomInTip||g("vc.navigationSm.zoomCotrol.zoomInTip")))):T("v-if"))),e.push(O("div",{ref:u,class:"vc-zoomout-sm",onMousedown:x.handleZoomOutMouseDown,onTouchstart:x.handleZoomOutMouseDown},t.tooltip?O(ls,{ref:x.zoomInTooltipRef,...t.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},t.tooltip.zoomOutTip||g("vc.navigationSm.zoomCotrol.zoomOutTip")))):T("v-if"))),e.push(O("div",{ref:c,class:"vc-zoombar-sm",style:S.value,onMousedown:x.handleZoomBarScrollMouseDown,onTouchstart:x.handleZoomBarScrollMouseDown},t.tooltip?O(ls,{ref:x.zoomInTooltipRef,...t.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},t.tooltip.zoomBarTip||g("vc.navigationSm.zoomCotrol.zoomBarTip")))):T("v-if"))),O("div",{ref:s,class:"vc-zoom-control-sm "+C.classes.value,style:v},e)}return T("v-if")}}});const Pl={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},Tl={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}};var Ml=S({name:"VcNavigationSm",inheritAttrs:!1,props:{...Ss,compassOpts:{type:[Boolean,Object],default:()=>Pl},zoomOpts:{type:[Boolean,Object],default:()=>Tl}},emits:{...ms,zoomEvt:e=>!0,compassEvt:e=>!0},setup(t,n){const a=o();a.cesiumClass="VcNavigationSm";const r=Kn(t,n,a);if(void 0===r)return;const s=e(!1),{$services:l}=r,c=_s(t),u=e(null),d=e(null),p=e(null),m=b({}),{emit:v}=n;f((()=>t),(()=>{w((()=>{var e,t;S(),null==(e=Ce(d))||e.reload(),null==(t=Ce(p))||t.reload()}))}),{deep:!0});const h=i((()=>Object.assign({},Pl,t.compassOpts))),g=i((()=>Object.assign({},Tl,t.zoomOpts))),y=e=>{be(a,"compassEvt")&&v("compassEvt",e)},C=e=>{be(a,"zoomEvt")&&v("zoomEvt",e)};a.createCesiumObject=async()=>{var e;s.value=!0;const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.addEventListener(x),new Promise(((e,i)=>{w((()=>{t._element.appendChild(Ce(u)),e(Ce(u))}))}))},a.mount=async()=>{var e;S();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Ce(u)}),!0},a.unmount=async()=>{var e,t;const{viewer:i}=l,n=i._element;return n.contains(Ce(u))&&n.removeChild(Ce(u)),null==(e=i.viewerWidgetResized)||e.removeEventListener(x),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Ce(u)}),!0};const x=()=>{w((()=>{S()}))},S=()=>{const e=c.style.value,t=c.attach.value;m.left=e.left,m.top=e.top,m.transform=e.transform,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)"),Object.assign(m,e)};return()=>{if(s.value){let e=[];return e=wa(n.slots.default,e),h.value&&!1!==t.compassOpts&&e.push(O(_l,{ref:d,onCompassEvt:y,...h.value})),g.value&&!1!==t.zoomOpts&&e.push(O(El,{ref:p,onZoomEvt:C,...g.value})),O("div",{ref:u,class:"vc-navigation-sm "+c.classes.value,style:m},e)}return T("v-if")}}});var Il=S({name:"VcOverviewMap",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}},emits:{...ms,"update:modelValue":e=>!0},setup(t,n){const a=o();a.cesiumClass="VcOverviewMap",a.cesiumEvents=[];const r=Kn(t,n,a);if(void 0===r)return;const{t:s}=Yn(),{$services:l}=r,c=e(null),u=e(null),d=b({}),p=e(null),m=e(null),v=_s(t),g=e(t.modelValue);let f,y,C=[];const w=i((()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},t.toggleOpts))),x=i((()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2,containerId:"vc-overview-map"},t.viewerOpts)));a.createCesiumObject=async()=>{const{viewer:e}=l;return e._element.appendChild(Ce(c)),[Ce(c),Ce(m)]},a.mount=async()=>{E();const{viewer:e}=l;return e.clock.onTick.addEventListener(S),!0},a.unmount=async()=>{const{viewer:e}=l,t=e._element;return e.clock.onTick.removeEventListener(S),t.contains(Ce(c))&&t.removeChild(Ce(c)),!0};const S=()=>{if(f){const{viewer:e}=l,i=e.camera.computeViewRectangle(),{defined:n}=Cesium;if(!n(i))return;const o=i.expand(t.widthFactor,t.heightFactor);f.camera.flyTo({destination:o.clone(),orientation:{heading:e.camera.heading,pitch:e.camera.pitch,roll:e.camera.roll},duration:0});const{Cartesian3:a,SceneTransforms:r}=Cesium,s=a.fromRadians(i.west,i.north),c=a.fromRadians(i.east,i.north),u=a.fromRadians(i.west,i.south),d=a.fromRadians(i.east,i.south),p=f.scene,m=r.wgs84ToWindowCoordinates(p,s),v=r.wgs84ToWindowCoordinates(p,c),h=r.wgs84ToWindowCoordinates(p,u),g=r.wgs84ToWindowCoordinates(p,d);if(!(n(m)&&n(v)&&n(h)&&n(g)))return;const b=v.x-m.x,C=h.y-m.y,w=(m.x+v.x)/2-b/2,O=(m.y+h.y)/2-C/2;if(b<=0||C<=0)return;const x=new Cesium.BoundingRectangle(w,O,b,C);y.rectangle=x,y.material.uniforms.color=Ie(t.centerRectColor),y.show=!0}},_=e=>{const{viewer:t}=e;f=t;const i=t.scene.screenSpaceCameraController;i.enableRotate=!1,i.enableTranslate=!1,i.enableZoom=!1,i.enableTilt=!1,i.enableLook=!1,f.scene.highDynamicRange=!1,f.scene.globe.enableLighting=!1,f.scene.globe.showWaterEffect=!1,f.scene.globe.depthTestAgainstTerrain=!1,f.scene.skyAtmosphere.show=!1,f.scene.fog.enabled=!1,f.scene.skyBox.show=!1,f.scene.sun.show=!1,f.scene.moon.show=!1,f.scene.highDynamicRange=!1,f.scene.globe.showGroundAtmosphere=!1,y=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),y.show=!1,f.scene.primitives.add(y)},E=()=>{var e;const i=v.style.value;if(d.left=i.left,d.top=i.top,d.transform=i.transform,d["pointer-events"]="none",i.borderRadius=t.borderRadius,i.border=t.border,g.value)i.width=t.width,i.height=t.height;else{const n=/(\d+)/g.exec(t.border),o=(null==n?void 0:n.length)?parseFloat(n[0]):0,a=getComputedStyle(null==(e=Ce(u))?void 0:e.$el);i.width=`${parseFloat(a.width)+parseFloat(a.padding)+o}px`,i.height=`${parseFloat(a.height)+parseFloat(a.padding)+o}px`}Object.assign(d,i)},P=()=>{g.value?M():I(),g.value=!g.value,n.emit("update:modelValue",g.value)},M=()=>{var e;const i=/(\d+)/g.exec(t.border),n=(null==i?void 0:i.length)?parseFloat(i[0]):0,o=getComputedStyle(null==(e=Ce(u))?void 0:e.$el);d.width=`${parseFloat(o.width)+parseFloat(o.padding)+n}px`,d.height=`${parseFloat(o.height)+parseFloat(o.padding)+n}px`},I=()=>{d.width=t.width,d.height=t.height};return h((()=>{C.forEach((e=>e())),C=[]})),()=>{const e=[];return e.push(O(Yr,{ref:u,class:"toggle toggle-"+t.position+(g.value?"":" minimized "),flat:!0,dense:!0,icon:w.value.icon,size:w.value.size,style:{color:w.value.color,background:w.value.background,"pointer-events":"auto"},onClick:P},(()=>w.value.tooltip?O(ls,{ref:p,...w.value.tooltip},(()=>O("strong",{},w.value.tooltip.tip||s("vc.overview."+(g.value?"hidden":"show"))))):T("v-if")))),e.push(O(Os,{ref:m,...x.value,onReady:_},(()=>Ca(n.slots.default)))),O("div",{ref:c,class:"vc-overview-map "+v.classes.value,style:d},e)}}});class jl{constructor(e){this.id=e.id||Cesium.createGuid()}static getBoundingSphere(e,t){var i,n,o,a;const{Primitive:r,ClassificationPrimitive:s,GroundPolylinePrimitive:l,GroundPrimitive:c,Polyline:u}=Cesium;let d;return e instanceof s||e instanceof l?d=null==(n=null==(i=e._primitive)?void 0:i._boundingSphereWC)?void 0:n[0]:e instanceof r?d=null==(o=e._boundingSphereWC)?void 0:o[0]:e instanceof c?d=null==(a=e._boundingVolumes)?void 0:a[0]:e instanceof u?d=e._boundingVolumeWC:e instanceof Cesium.Entity&&(d=new Cesium.BoundingSphere,t.dataSourceDisplay.getBoundingSphere(e,!0,d)),d}static fromPickedFeature(e,t,i,n){var o;const a=new jl({id:e.id});return e.position?a.position=e.position:e instanceof Cesium.Model?a.position=Cesium.Matrix4.getTranslation(e.modelMatrix,new Cesium.Cartesian3):e instanceof Cesium.Cesium3DTileset?a.position=Cesium.Matrix4.getTranslation(t.content._contentModelMatrix,new Cesium.Cartesian3):a.position=null==(o=jl.getBoundingSphere(e,i))?void 0:o.center,a.cesiumObject=e,a.pickedFeature=t,a.windowPosition=n,a}static fromImageryLayerFeature(e,t){const i=new jl({id:e.name});return i.name=e.name,i.description=e.description,i.properties=e.properties,i.data=e.data,i.imageryLayer=e.imageryLayer,i.position=t.scene.globe.ellipsoid.cartographicToCartesian(e.position),i.coords=e.coords,i}}class Ll{constructor(){const{knockout:e}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,e.track(this,["isLoading","features","error"])}}var Al=S({name:"VcSelectionIndicator",props:{show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},limit:{type:Number,default:25}},emits:{...ms,pickEvt:e=>!0},setup(t,i){const n=o();n.cesiumClass="VcSelectionIndicator",n.cesiumEvents=[];const a=Kn(t,i,n);if(void 0===a)return;const{$services:r}=a;let s;const l=function(t,i,n){const o="-1000px",a=e(o),r=e(o),s=e(),l=e();let u,d;const p=e(null),m=e(null);let v=[],g=!1;const y=b({top:r.value,left:a.value,transform:"",opacity:1});v.push(f(m,(e=>{var i,o,a;const r=e,{defined:l}=Cesium;if(l(r)&&l(null==r?void 0:r.position)){const{viewer:e}=n;s.value=(null==r?void 0:r.position)instanceof Cesium.Cartesian3?null==r?void 0:r.position:null==(i=null==r?void 0:r.position)?void 0:i.getValue(e.clock.currentTime),P(),null==(o=t.proxy)||o.$emit("pickEvt",r)}else T(),null==(a=t.proxy)||a.$emit("pickEvt",r);E()}))),v.push(f(p,(e=>{const{defined:t,Entity:i}=Cesium,n=e;if(t(n)){const e=new i({id:"__Vc__Pick__Location__"});e.position=n.pickPosition,m.value=e}else m.value=void 0;w((()=>{t(n.allFeaturesAvailablePromise)&&n.allFeaturesAvailablePromise.then((()=>{var e,i,o;const a=n.features.filter((e=>t(e)));m.value=a.filter(C)[0],!t(m.value)&&a.length>0&&(m.value=a[0],g&&m.value instanceof jl&&(null==(o=null==(i=null==(e=m.value)?void 0:e.pickedFeature)?void 0:i.primitive)?void 0:o.position)&&(m.value.position=m.value.pickedFeature.primitive.position))}))}))})));const C=e=>{const{defined:t}=Cesium;return t(e.properties)||t(e.description)},O=(e,t,i,n,o,a,r,s)=>{const{defined:l,defaultValue:c,when:u}=Cesium;r=c(r,!1);const d=new Ll;return d.providerCoords=e,d.pickPosition=t,d.allFeaturesAvailablePromise=Promise.all(n).then((function(e){d.isLoading=!1,d.features=e.reduce(function(e,i,n){if(!l(i))return e;const r=i.map(function(e){return l(o)&&(e.imageryLayer=o[n]),l(e.position)||(e.position=s.scene.globe.ellipsoid.cartesianToCartographic(t)),l(e.position.height)&&0!==e.position.height||(e.position.height=a),jl.fromImageryLayerFeature(e,s)}.bind(this));return e.concat(r)}.bind(this),c(i,[]))})).catch((function(){d.isLoading=!1,d.error="An unknown error occurred while picking features."})),d},x=e=>{var t,o;const a=[],{defined:r}=Cesium,{viewer:s}=n,l=s.scene.drillPick(e,i.limit);for(let i=0;i<l.length;++i){const n=l[i];let u=n.id;!r(u)&&r(n.primitive)&&(u=n.primitive);const d=null!=(o=null==(t=null==n?void 0:n.primitive)?void 0:t._catalogItem)?o:null==u?void 0:u._catalogItem;if("function"==typeof(null==d?void 0:d.getFeaturesFromPickResult)){const t=d.getFeaturesFromPickResult.bind(d)(e,n);t&&(Array.isArray(t)?a.push(...t):a.push(t))}else{const t=n;if(t.id){if(c(t.id)&&t.id[0]instanceof Cesium.Entity){g=!0,t.id.forEach((i=>{const n=jl.fromPickedFeature(i,t,s,e);a.push(n)}));continue}if(t.id instanceof Cesium.Entity){const i=jl.fromPickedFeature(t.id,t,s,e);a.push(i),g=!1;continue}g=!1}if(t.primitive){const i=jl.fromPickedFeature(t.primitive,t,s,e);a.push(i)}else if(t.collection){const i=jl.fromPickedFeature(t.collection,t,s,e);a.push(i)}}}return a},S=()=>{const e={},{viewer:t}=n,i=t.scene,o=function(t,i,n,o,a,r,s){if(i){const l=i.call(t,n,o,a,r,s);return t.url&&(e[t.url]={x:n,y:o,level:a}),t.pickFeatures=i,l}return Promise.reject(!1)};for(let n=0;n<i.imageryLayers.length;n++){const e=i.imageryLayers.get(n).imageryProvider;e.pickFeatures=o.bind(void 0,e,e.pickFeatures)}return e},_=(e,t)=>{const{viewer:i}=n;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(i.scene,e,t)},E=()=>{const{defined:e,Cartesian2:t}=Cesium;if(i.show&&e(s.value)){const o=_(s.value,new t);if(e(o)){const{viewer:e}=n,t=e.container,a=t.clientWidth,r=t.clientHeight,s=i.width,l=.5*s;o.x=Math.min(Math.max(o.x,-s),a+s)-l,o.y=Math.min(Math.max(o.y,-s),r+s)-l,y.left=Math.floor(o.x+.25)+"px",y.top=Math.floor(o.y+.25)+"px"}}},P=()=>{const{viewer:e}=n,{defined:t,EasingFunction:i}=Cesium;if(t(u)){if(d)return;u.cancelTween(),u=void 0}d=!0,u=e.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:i.EXPONENTIAL_OUT,update:function(e){y.opacity=e.opacity,y.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){u=void 0},cancel:function(){u=void 0}})},T=()=>{const{viewer:e}=n,{defined:t,EasingFunction:i}=Cesium;if(t(u)){if(!d)return;u.cancelTween(),u=void 0}d=!1,u=e.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:i.EXPONENTIAL_OUT,update:function(e){y.opacity=e.opacity,y.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){u=void 0},cancel:function(){u=void 0}})};return h((()=>{v.forEach((e=>e())),v=[]})),Object.assign(t.proxy,{selectedFeature:m,position:s,computeScreenSpacePosition:_,update:E,animateAppear:P,animateDepart:T,getPickedFeatures:()=>p}),{pickFromScreenPosition:e=>{const{defined:t}=Cesium,{viewer:o}=n,a=o.scene,r=a.camera.getPickRay(e);let s=a.globe.pick(r,a);if(!t(s)&&(s=a.pickPosition(e),!t(s)))return;const l=a.globe.ellipsoid.cartesianToCartographic(s||new Cesium.Cartesian3),c=x(e),u=S(),d=i.allowFeatureInfoRequests?a.imageryLayers.pickImageryLayerFeatures(r,a):Promise.resolve(),m=O(u,s,c,[d],void 0,l.height,!1,o);p.value=m},rootRef:l,rootStyle:y,onPostRender:()=>{E()}}}(n,t,r);return n.createCesiumObject=async()=>{const{viewer:e}=r;return e._element.appendChild(Ce(l.rootRef)),Ce(l.rootRef)},n.mount=async()=>{const{viewer:e}=r,{ScreenSpaceEventHandler:t,ScreenSpaceEventType:i}=Cesium;return s=new t(e.canvas),s.setInputAction((e=>{l.pickFromScreenPosition(e.position)}),i.LEFT_CLICK),e.scene.postRender.addEventListener(l.onPostRender),!0},n.unmount=async()=>{const{viewer:e}=r,t=e._element;return t.contains(Ce(l.rootRef))&&t.removeChild(Ce(l.rootRef)),e.scene.postRender.removeEventListener(l.onPostRender),s.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),s.destroy(),s=void 0,!0},()=>O("div",{ref:l.rootRef,class:"vc-selection-indicator",style:l.rootStyle},O("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:t.width,height:t.height}))}});[Ws,Ys,Js,tl,gl,bl,xl,_l,El,Ml,Il,Al].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Dl=Ws,kl=Ys,Rl=Js,Bl=tl,Nl=gl,Vl=bl,zl=xl,Fl=_l,Hl=El,Ul=Ml,Wl=Il,Gl=Al,$l={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Zl={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},Yl={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},ql={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},Xl={width:2,arcType:0,ellipsoid:void 0},Ql={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},Jl={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},Kl={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Yl,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},Jl),remove:Object.assign({},Jl,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},ec={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Yl,polylineOpts:Xl,primitiveOpts:Zl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},disableDepthTest:!1},tc={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Yl,polylineOpts:Xl,primitiveOpts:Zl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),insert:Object.assign({},Jl,{icon:"vc-icons-insert"}),remove:Object.assign({},Jl,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Ql,labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},ic={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Yl,polylineOpts:Xl,primitiveOpts:Object.assign({},Zl,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:{show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),insert:Object.assign({},Jl,{icon:"vc-icons-insert"}),remove:Object.assign({},Jl,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!0,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:Ql,labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},nc=Object.assign({},ic,{pointOpts:Object.assign({},Yl,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Ql,labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5],text:"1dsa"})}),oc=Object.assign({},nc,{edge:360}),ac=Object.assign({},nc,{edge:6,loop:!0}),rc=Object.assign({},$l,{icon:"vc-icons-clear",color:"red"}),sc=Object.assign({},$l,{icon:"vc-icons-drawing-regular"}),lc=Object.assign({},$l,{icon:"vc-icons-drawing-circle"}),cc={...Un,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean},uc={...mt,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>rc}},dc=Object.assign({},$l,{icon:"vc-icons-measure-distance"}),pc=Object.assign({},ec,{labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Xo,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),mc=Object.assign({},$l,{icon:"vc-icons-measure-component-distance"}),vc=Object.assign({},pc,{showComponentLines:!0,xLabelOpts:Ql,xAngleLabelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},Ql,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},Ql,{verticalOrigin:-1,pixelOffset:[0,9]})}),hc=Object.assign({},$l,{icon:"vc-icons-measure-polyline-distance"}),gc=Object.assign({},tc,{measureUnits:new Xo,labelOpts:Ql,labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),fc=Object.assign({},$l,{icon:"vc-icons-measure-horizontal-distance"}),yc=Object.assign({},gc,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Zl,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),bc=Object.assign({},$l,{icon:"vc-icons-measure-vertical-distance"}),Cc=Object.assign({},ec,{labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Xo,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),wc=Object.assign({},$l,{icon:"vc-icons-measure-height-from-terrain"}),Oc=Object.assign({},Kl,{polylineOpts:Xl,labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},measureUnits:new Xo,decimals:{distance:2},locale:void 0,primitiveOpts:Zl}),xc=Object.assign({},$l,{icon:"vc-icons-measure-area"}),Sc=Object.assign({},ic,{labelOpts:Ql,labelsOpts:Object.assign({},Ql,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new Xo,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),_c=Object.assign({},$l,{icon:"vc-icons-measure-point-coordinates"}),Ec=Object.assign({},Kl,{heightReference:1,measureUnits:new Xo,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},Ql,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),Pc=Object.assign({},$l,{icon:"vc-icons-drawing-rectangle"}),Tc=Object.assign({},Sc,{pointOpts:Object.assign({},Yl,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),Mc=Object.assign({},Tc,{edge:6,loop:!0}),Ic=Object.assign({},Tc,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),jc=Object.assign({},$l,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Lc=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],Ac={...uc,measurements:{type:Array,default:()=>Lc,validator:e=>{let t=!0;return e.forEach((e=>{Lc.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>jc},distanceActionOpts:{type:Object,default:()=>dc},distanceMeasurementOpts:{type:Object,default:()=>pc},componentDistanceActionOpts:{type:Object,default:()=>mc},componentDistanceMeasurementOpts:{type:Object,default:()=>vc},polylineActionOpts:{type:Object,default:()=>hc},polylineMeasurementOpts:{type:Object,default:()=>gc},horizontalActionOpts:{type:Object,default:()=>fc},horizontalMeasurementOpts:{type:Object,default:()=>yc},verticalActionOpts:{type:Object,default:()=>bc},verticalMeasurementOpts:{type:Object,default:()=>Cc},heightActionOpts:{type:Object,default:()=>wc},heightMeasurementOpts:{type:Object,default:()=>Oc},areaActionOpts:{type:Object,default:()=>xc},areaMeasurementOpts:{type:Object,default:()=>Sc},pointActionOpts:{type:Object,default:()=>_c},pointMeasurementOpts:{type:Object,default:()=>Ec},rectangleActionOpts:{type:Object,default:()=>Pc},rectangleMeasurementOpts:{type:Object,default:()=>Tc},regularActionOpts:{type:Object,default:()=>sc},regularMeasurementOpts:{type:Object,default:()=>Mc},circleActionOpts:{type:Object,default:()=>lc},circleMeasurementOpts:{type:Object,default:()=>Ic}},Dc=pe(Ac);var kc=S({name:"VcOverlayHtml",props:{...Ye,...lt,...mt,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},emits:{...ms,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0},setup(t,i){const n=o();n.cesiumClass="VcOverlayHtml",n.cesiumEvents=[];const a=Kn(t,i,n);if(void 0===a)return;const{$services:r}=a,s=e(!1),l=e(null),c=b({}),u=e(null),d=e(null),p=e(null);let m=[];m.push(f((()=>t.position),(e=>{d.value=xe(e,r.viewer.scene.globe.ellipsoid)}))),m.push(f((()=>t.pixelOffset),(e=>{u.value=Oe(e)}))),m.push(f((()=>t.show),(e=>{c.display=e?"block":"none"}))),n.createCesiumObject=async()=>Ce(l),n.mount=async()=>{const{viewer:e}=r;return s.value=!0,x(),u.value=Oe(t.pixelOffset),d.value=xe(t.position,e.scene.globe.ellipsoid),e.scene.preRender.addEventListener(v),!0},n.unmount=async()=>{const{viewer:e}=r;return e.scene.preRender.removeEventListener(v),s.value=!1,S(),!0};const v=()=>{const{viewer:e}=r;if(d.value){const i=e.scene.cartesianToCanvasCoordinates(d.value,{});if(Cesium.defined(i)&&!Cesium.Cartesian2.equals(p.value,i))if(c.left=i.x+u.value.x+"px",c.top=i.y+u.value.y+"px",t.autoHidden){const i=e.camera.position,n=e.scene.globe.ellipsoid.cartesianToCartographic(i);if(Cesium.defined(n)){let o=n.height;o+=1*e.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(i,d.value)>o||!t.show?c.display="none":c.display="block"}}else c.display="block";p.value=i}};h((()=>{m.forEach((e=>e())),m=[]}));const g=()=>s.value?O("div",{ref:l,class:"vc-html-container"+(t.customClass?" "+t.customClass:""),style:c,onMouseenter:C,onMouseleave:w,onClick:y},Ca(i.slots.default)):T("v-if"),y=e=>{i.emit("click",e)},C=e=>{i.emit("mouseenter",e)},w=e=>{i.emit("mouseleave",e)},{showPortal:x,hidePortal:S,renderPortal:_}=hr(n,l,(()=>g()));return t.teleport&&t.teleport.to&&!t.teleport.disabled?_:()=>g()}});var Rc=S({name:"VcEntity",props:{id:String,name:String,availability:Object,...mt,description:[String,Object],...Ye,orientation:Object,...qe,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...Un},emits:{...ms,...vs,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0},setup(e,t){const i=o();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=Kn(e,t,i);if(void 0===n)return;const{$services:a}=n,{emit:r}=t;i.mount=async()=>{var e;const t=null==(e=null==a?void 0:a.entities)?void 0:e.add(i.cesiumObject);return null==a?void 0:a.entities.contains(t)},i.unmount=async()=>{var e;return null==(e=null==a?void 0:a.entities)?void 0:e.remove(i.cesiumObject)};return Object.assign(i.proxy,{__updateGraphics:(e,t)=>(be(i,t)?r(t,e):i.cesiumObject&&(i.cesiumObject[t.substring(7)]=e),e&&(e._vcParent=i.cesiumObject),!0)}),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});Rc.install=e=>{e.component(Rc.name,Rc)};const Bc=Rc;var Nc=S({name:"VcLayerImagery",props:{imageryProvider:Object,...Ni,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...mt,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...ji,...Li,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number},emits:{...ms,"update:imageryProvider":e=>!0},setup(e,t){const i=o();i.cesiumClass="ImageryLayer",i.cesiumEvents=[];const n=Kn(e,t,i);if(void 0===n)return;const{$services:a}=n,{emit:r}=t;i.createCesiumObject=async()=>{const t=n.transformProps(e),i=e.imageryProvider||{};return new Cesium.ImageryLayer(i,t)},i.mount=async()=>{const{viewer:t}=a,n=i.cesiumObject;return n.sortOrder=e.sortOrder,t.imageryLayers.add(n),!t.isDestroyed()&&t.imageryLayers.contains(n)},i.unmount=async()=>{const{viewer:e}=a,t=i.cesiumObject;return!e.isDestroyed()&&e.imageryLayers.remove(t)};return Object.assign(i.proxy,{__updateProvider:e=>{var t;if(N(e))return null==(t=i.unmount)?void 0:t.call(i);i.cesiumObject._imageryProvider=e;be(i,"update:imageryProvider")&&r("update:imageryProvider",e);return!0}}),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Nc.install=e=>{e.component(Nc.name,Nc)};const Vc=Nc,zc=Vc;var Fc=S({name:"VcPrimitiveClassification",props:{...ln,...rn,...mt,...cn,...an,...un,...on,...en,...tn,...It,...pn,...nn,...Un},emits:fs,setup(e,t){var i;const n=o();n.cesiumClass="ClassificationPrimitive",_o(e,t,n);const a=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(a),style:{display:"none !important"}},Ca(t.slots.default)):T(le(a))}});var Hc=S({name:"VcPrimitiveGround",props:{...ln,...rn,...mt,...cn,...an,...un,...on,...en,...tn,...It,...pn,...nn,...Un},emits:fs,setup(e,t){var i;const n=o();n.cesiumClass="GroundPrimitive",_o(e,t,n);const a=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(a),style:{display:"none !important"}},Ca(t.slots.default)):T(le(a))}});var Uc=S({name:"VcPrimitiveGroundPolyline",props:{...ln,...rn,...mt,...an,...un,...on,...en,...tn,...It,...pn,...nn,...Un},emits:fs,setup(e,t){var i;const n=o();n.cesiumClass="GroundPolylinePrimitive",_o(e,t,n);const a=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(a),style:{display:"none !important"}},Ca(t.slots.default)):T(le(a))}});var Wc=S({name:"VcPrimitiveModel",props:{...Ai,basePath:String,...mt,...dn,...dt,...ni,...oi,...hn,...en,...ai,...tn,...si,...St,...pn,...fn,...ot,...mn,...tt,...Je,...ui,...di,...li,...ci,...gi,dequantizeInShader:{type:Boolean,default:!0},...pi,...mi,...Ln,...An,...Dn,...Fi,...kn,showOutline:{type:Boolean,default:!0},...Un},emits:fs,setup(e,t){const i=o();i.cesiumClass="Model";const n=_o(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.Model.fromGltf(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Gc=S({name:"VcPrimitive",props:{...ln,...rn,...sn,...mt,...dn,...cn,...an,...un,...on,...en,cull:{type:Boolean,default:!0},...tn,...pn,...St,...Un},emits:fs,setup(e,t){var i;const n=o();n.cesiumClass="Primitive",_o(e,t,n);const a=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>{var e;return t.slots.default?O("i",{class:le(a),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});const $c={...fs,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0};var Zc=S({name:"VcPrimitiveTileset",props:{url:[String,Object],...mt,...dn,...St,...Ti,maximumMemoryUsage:{type:Number,default:512},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...gi,...It,...zi,pointCloudShading:Object,...pi,...jn,...Ln,...An,...Dn,...kn,showOutline:{type:Boolean,default:!0},vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...fn,...pn,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...Un,enableModelExperimental:{type:Boolean,default:!1},customShader:{type:Object},properties:{type:Array},fragmentShader:String,replaceFS:Boolean},emits:$c,setup(e,t){const i=o();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],_o(e,t,i),i.proxy.creatingPromise.then((e=>{const t=e.cesiumObject;i.removeCallbacks.push(t.tileVisible.addEventListener(n))}));const n=t=>{const i=t.content,n=i._model;for(let o=0;o<i.featuresLength;o++){const t=i.getFeature(o);e.properties&&e.properties.length&&e.properties.forEach((e=>{t.hasProperty(e.key)&&t.getProperty(e.key)===e.keyValue&&t.setProperty(e.propertyName,e.propertyValue)}))}e.fragmentShader&&n&&n._sourcePrograms&&n._rendererResources&&(Object.keys(n._sourcePrograms).forEach((t=>{const i=n._sourcePrograms[t],o=n._rendererResources.sourceShaders;if(e.replaceFS)o[i.fragmentShader]=e.fragmentShader;else{const t=o[i.fragmentShader];o[i.fragmentShader]=t.replace("gl_FragColor = vec4(color, 1.0);\n}",`gl_FragColor = vec4(color, 1.0);\n             ${e.fragmentShader}\n}\n            `)}})),n._shouldRegenerateShaders=!0)};return()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Yc={...fs,complete:e=>!0};var qc=S({name:"VcPrimitiveParticle",props:{...mt,updateCallback:Function,emitter:Object,...dn,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...Je,...Sn,..._n,...rt,...Tn,...En,...Pn,...vt,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...Un},emits:Yc,setup(e,t){const i=o();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],_o(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Xc=S({name:"VcViewshed",props:{...mn,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String,default:"\n  uniform sampler2D colorTexture;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n  uniform float u_isShed;\n  uniform sampler2D shadowMap_depthTexture;\n  uniform mat4 shadowMap_matrix;\n  uniform vec4 shadowMap_lightPositionEC;\n  uniform vec3 shadowMap_lightDirectionEC;\n  uniform float u_radius;\n  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n  uniform float czzj;\n  uniform float dis;\n  uniform float spzj;\n  uniform float mixNum;\n  uniform vec3 shadowMap_lightUp;\n  uniform vec3 shadowMap_lightDir;\n  uniform vec3 shadowMap_lightRight;\n  varying vec2 v_textureCoordinates;\n  vec4 toEye(in vec2 uv, in float depth){\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  float getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){\n    return texture2D(shadowMap, uv).r;\n  }\n  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){\n    return step(depth, _czm_sampleShadowMap(shadowMap, uv));\n  }\n  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n    depth -= depthBias;\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility =\n    (\n    _czm_shadowDepthCompare(shadowMap, uv, depth)\n    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0)\n    ;\n    return visibility;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float ptm(vec3 pt){\n    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);\n  }\n  void main()\n  {\n    const float PI = 3.141592653589793;\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    gl_FragColor = color;\n    if ( u_isShed < 0.5 )\n        return;\n    vec4 currD = texture2D(czm_globeDepthTexture, v_textureCoordinates);\n    if( currD.r >= 1.0 )\n        return;\n\n    float depth = getDepth(currD);\n    vec4 positionEC = toEye(v_textureCoordinates, depth);\n    vec3 normalEC = vec3(1.0);\n    czm_shadowParameters shadowParameters;\n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n    shadowParameters.depthBias *= max(depth * 0.01, 1.0);\n    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);\n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);\n    vec4 shadowPosition = shadowMap_matrix * positionEC;\n    shadowPosition /= shadowPosition.w;\n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))\n      return;\n\n    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);\n    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);\n    if(distance(lw.xyz,vw.xyz)> u_radius)\n        return;\n\n    shadowParameters.texCoords = shadowPosition.xy;\n    shadowParameters.depth = shadowPosition.z;\n    shadowParameters.nDotL = nDotL;\n    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);\n    if(visibility > 0.3 ){\n      gl_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);\n    }\n    else{\n      if(abs(shadowPosition.z-0.0)<0.01){\n        return;\n      }\n      gl_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);\n    }\n  }\n"},uniforms:Object},emits:ms,setup(e,t){const i=o();i.cesiumClass="VcViewshed";const n=Kn(e,t,i);if(void 0===n)return;const a=[];let r;a.push(f([()=>e.startPosition,()=>e.endPosition],(([e,t])=>{i.mounted&&s(e,t)}),{deep:!0})),a.push(f((()=>e.fovH),(e=>{if(!i.mounted)return;i.cesiumObject.fovH=e}))),a.push(f((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),a.push(f((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),a.push(f((()=>e.offsetHeight),(e=>{if(!i.mounted)return;i.cesiumObject.offsetHeight=e}))),a.push(f((()=>e.visibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.visibleColor=Ie(e)}))),a.push(f((()=>e.invisibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.invisibleColor=Ie(e)}))),a.push(f((()=>e.showGridLine),(e=>{if(!i.mounted)return;i.cesiumObject.showGridLine=e}))),a.push(f((()=>e.show),(e=>{if(!i.mounted)return;i.cesiumObject.enabled=e}))),h((()=>{a.forEach((e=>e())),a.length=0})),i.createCesiumObject=async()=>{const t=n.$services.viewer,i=new ua(t.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:Ie(e.visibleColor),invisibleColor:Ie(e.invisibleColor),showGridLine:e.showGridLine});return i._viewshedShadowMap.cascadesEnabled=!1,i._viewshedShadowMap.softShadows=!1,i._viewshedShadowMap.normalOffset=!1,i._viewshedShadowMap.fromLightSource=!1,i._viewshedShadowMap.enabled=!1,i.fovH=Cesium.Math.toRadians(e.fovH),i.fovV=Cesium.Math.toRadians(e.fovV),i.offsetHeight=e.offsetHeight,i.showGridLine=e.showGridLine,i.enabled=e.show,i.lineColor=Ie(e.lineColor),i.faceColor=Ie(e.faceColor),i},i.mount=async()=>{const t=n.$services.viewer,o=i.cesiumObject,{Cartesian4:a,PostProcessStage:l,Cartesian2:c}=Cesium;s(e.startPosition,e.endPosition),r=new l({fragmentShader:e.fragmentShader,uniforms:e.uniforms||{u_color1:function(){return o.visibleColor},u_color2:function(){return o.invisibleColor},u_isShed:function(){return o.shadowMap.enabled},u_radius:function(){return o.lightCamera.frustum.far},shadowMap_depthTexture:function(){return o.shadowMap.enabled?o.shadowMap._shadowMapTexture:t.scene.context.defaultTexture},shadowMap_matrix:function(){return o.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return o.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return o.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return o.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return o.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return o.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const e=o.shadowMap._pointBias;return a.fromElements(e.normalOffsetScale,o.shadowMap._distance,o.shadowMap.maximumDistance,0,new a)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const e=o.shadowMap._pointBias,t=new c;return t.x=1/o.shadowMap._textureSize.x,t.y=1/o.shadowMap._textureSize.y,a.fromElements(t.x,t.y,e.depthBias,e.normalShadingSmooth,new a)},czzj:function(){return o.lightCamera.frustum.fov},spzj:function(){return o.lightCamera.frustum.fov},mixNum:function(){return.5},shadowMap_lightUp:function(){return o.lightCamera.up},shadowMap_lightDir:function(){return o.lightCamera.direction},shadowMap_lightRight:function(){return o.lightCamera.right}}}),t.scene.postProcessStages.add(r);const u=n.$services.primitives;return u&&u.add(o)},i.unmount=async()=>{const e=n.$services.viewer;r&&e.scene.postProcessStages.remove(r);const t=n.$services.primitives,o=i.cesiumObject;return t&&t.remove(o)};const s=(e,t)=>{const n=i.cesiumObject,{Cartesian3:o}=Cesium;let a=o.subtract(t,e,new o);const r=o.magnitudeSquared(a),s=o.distance(t,e);if(r<.01||n.frustum.near>s)n.enabled=!1;else{n.enabled=!0,a=o.normalize(a,a);const i=o.normalize(t,new o);n.setView({destination:e,orientation:{direction:a,up:i}}),n.frustum.far=Math.max(s,1.1)}};return()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Fc,Hc,Uc,Wc,Gc,Zc,qc].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Qc=Fc,Jc=Hc,Kc=Uc,eu=Wc,tu=Gc,iu=Zc,nu=qc,ou=Xc;var au=S({name:"VcOverlayHeatmap",props:{...mt,...Ni,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}},emits:ms,setup(t,n){var a;const r=o();r.cesiumClass="VcOverlayHeatmap",r.cesiumEvents=[];const s=Kn(t,n,r);if(void 0===s)return;const l=e(null),c=e(null),u={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},d=e(null),p=e(null),m=e(null),v=e(null),g=e(null),y=e(!1),b=e(null);null==(a=we(r).proxy.creatingPromise)||a.then((()=>{y.value=!0}));const C=i((()=>Object.assign({},u,t.options)));let w=[];w.push(f((()=>m),(e=>{p.value.fabric.uniforms.image=e.value,g.value.options.material.fabric.uniforms.image=e.value}),{deep:!0})),w.push(f((()=>t.data),((e,t)=>{if(!r.mounted)return;const i=r.cesiumObject;Array.isArray(e)&&Array.isArray(t)?(_(e,i),m.value=i.getDataURL()):s.reload()}),{deep:!0})),w.push(f((()=>[t.max,t.min]),(e=>{const t=r.cesiumObject;t.setDataMax(e[0]||0),t.setDataMin(e[1]||0),m.value=t.getDataURL()}))),w.push(f((()=>[t.type,t.projection,t.rectangle]),(e=>{s.reload()}))),w.push(f((()=>t.options),(e=>{const t=r.cesiumObject;t.configure(e),m.value=t.getDataURL()}),{deep:!0})),r.createCesiumObject=async()=>{const{WebMercatorProjection:e,GeographicProjection:i}=Cesium;c.value="3857"===t.projection?new e:new i;const n=x();b.value=S(t.rectangle);const o=document.createElement("div");if(Cesium.defined(n)&&o.setAttribute("id",n),o.setAttribute("style","width: "+b.value.width+"px; height: "+b.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(o),C.value.container=o,t.segments.length){C.value.gradient={};const e=t.max-t.min;for(let i=0;i<t.segments.length;i++)C.value.gradient[""+(t.segments[i][0]-t.min)/e]=Ie(t.segments[i][1]).toCssColorString()}const a=L.create(C.value);return o.children[0].setAttribute("id",n+"-hm"),Array.isArray(t.data)&&(_(t.data,a),p.value={fabric:{type:"Image",uniforms:{image:m.value,transparent:!0}}},g.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:m.value}}}}}),a},r.unmount=async()=>(document.body.removeChild(r.cesiumObject._config.container),!0);const x=e=>{let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<(e||8);n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},S=e=>{const t=Ae(e),i=c.value.project(new Cesium.Cartographic(t.west,t.south)),n=c.value.project(new Cesium.Cartographic(t.east,t.north)),o={north:n.y,east:n.x,south:i.y,west:i.x};let a=o.east>0&&o.west<0?o.east+Math.abs(o.west):Math.abs(o.east-o.west),r=o.north>0&&o.south<0?o.north+Math.abs(o.south):Math.abs(o.north-o.south),s=1;a>r&&a>C.value.maxCanvasSize?(s=a/C.value.maxCanvasSize,r/s<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize)):r>a&&r>C.value.maxCanvasSize?(s=r/C.value.maxCanvasSize,r/s<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize)):a<r&&a<C.value.minCanvasSize?(s=a/C.value.minCanvasSize,r/s>C.value.maxCanvasSize&&(s=r/C.value.maxCanvasSize)):r<a&&r<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize,a/s>C.value.maxCanvasSize&&(s=a/C.value.maxCanvasSize)),a/=s,r/=s,Cesium.defined(C.value.radius)||(C.value.radius=a>r?a/C.value.radiusFactor:r/C.value.radiusFactor);const l=(C.value.radius||1)*C.value.spacingFactor,u=o.west,p=o.south;a=Math.round(a+2*l),r=Math.round(r+2*l),o.west-=l*s,o.east+=l*s,o.south-=l*s,o.north+=l*s;const m=c.value.unproject(new Cesium.Cartesian3(o.west,o.south)),v=c.value.unproject(new Cesium.Cartesian3(o.east,o.north)),h={north:Cesium.Math.toDegrees(v.latitude),east:Cesium.Math.toDegrees(v.longitude),south:Cesium.Math.toDegrees(m.latitude),west:Cesium.Math.toDegrees(m.longitude)};return d.value=h,{height:r,width:a,factor:s,xoffset:u,yoffset:p,spacing:l}},_=(e,i)=>{if(e){const{height:n,xoffset:o,yoffset:a,factor:r,spacing:s}=b.value,l=C.value.xField||"x",u=C.value.yField||"y",d=C.value.valueField||"value",p=[];for(let i=0;i<e.length;i++){const m=e[i];Cesium.defined(m.id)||(m.id=i);const v=c.value.project(Cesium.Cartographic.fromDegrees(m[l],m[u])),h={x:Math.round((v.x-o)/r+s),y:Math.round((v.y-a)/r+s),value:void 0};h.y=n-h.y,(m[d]||0===m[d])&&(h[d]=m[d]),h[d]>t.max||h[d]<t.min||p.push(h)}i.setData({min:t.min,max:t.max,data:p}),m.value=i.getDataURL()}};return h((()=>{w.forEach((e=>e())),w=[]})),Object.assign(r.proxy,{rootRef:l,childRef:v}),()=>{if(y.value){const e=[];return"entity"===t.type&&m.value?e.push(O(Bc,{ref:v,show:t.show,rectangle:{coordinates:d.value,material:p.value}})):"primitive"===t.type?e.push(O(Jc,{ref:v,show:t.show,appearance:g.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Ae(d.value)})})})):"imagery-layer"===t.type&&m.value&&e.push(O(Vc,{ref:v,show:t.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:m.value,rectangle:Ae(d.value)})})),O("i",{ref:l,class:"vc-overlay-heatmap",style:"display: none !important"},e)}return T("v-if")}}});var ru=S({name:"VcOverlayEcharts",props:{options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}},emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(t,i){const n=o();n.cesiumClass="VcOverlayEcharts",n.cesiumEvents=[];const a=Kn(t,i,n);if(void 0===a)return;const{$services:r}=a,s=e(!1),l=e(null),c=b({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let u;const d=e(!0);let p=[];p.push(f((()=>t.options),(e=>{a.reload()}))),n.createCesiumObject=async()=>Ce(l),n.mount=async()=>{const{viewer:e}=r;return s.value=!0,w((()=>{q(t.coordinateSystem,g(e)),u=X(Ce(l)),v(),e.scene.postRender.addEventListener(m)})),!0},n.unmount=async()=>{const{viewer:e}=r;return e.scene.postRender.removeEventListener(m),s.value=!1,!0};const m=()=>{if(d.value){const{viewer:e}=r;u.resize({width:e.canvas.width,height:e.canvas.height})}},v=()=>{d.value&&t.options&&u.setOption(t.options)},g=e=>{const i=function(e){this.viewer=e,this._mapOffset=[0,0]};return i.create=function(n){return n.eachSeries((function(n){n.get("coordinateSystem")===t.coordinateSystem&&(n.coordinateSystem=new i(e))})),[]},i.getDimensionsInfo=function(){return["x","y"]},i.dimensions=["x","y"],i.prototype.dimensions=["x","y"],i.prototype.setMapOffset=function(e){this._mapOffset=e},i.prototype.dataToPoint=function(e){const i=[],n=Cesium.Cartesian3.fromDegrees(e[0],e[1]);if(!n)return i;if(t.autoHidden){const e=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),t=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(e,t)>=0)return i}const o=this.viewer.scene.cartesianToCanvasCoordinates(n);return o?[o.x-this._mapOffset[0],o.y-this._mapOffset[1]]:i},i.prototype.pointToData=function(t){const i=this._mapOffset,n=e.scene.globe.ellipsoid,o=new Cesium.Cartesian3(t[1]+i[1],t[2]+i[2],0),a=n.cartesianToCartographic(o);return a?[a.longitude,a.latitude]:[0,0]},i.prototype.getviewerRect=function(){const e=this.viewer.canvas;return new A(0,0,e.width,e.height)},i.prototype.getRoamTransform=function(){return D()},i},y=e=>{i.emit("click",e)},C=e=>{i.emit("mouseenter",e)},x=e=>{i.emit("mouseleave",e)};return h((()=>{p.forEach((e=>e())),p=[]})),()=>s.value?O("div",{ref:l,class:"vc-echart-container"+(t.customClass?" "+t.customClass:""),style:c,onMouseenter:C,onMouseleave:x,onClick:y},Ca(i.slots.default)):T("v-if")}});function su(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function lu(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function cu(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function uu(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}class du{constructor(e){this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(e){switch(this.commandType){case"Draw":{const t=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(e,t){this.geometry=t;const i=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(e){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class pu{constructor(e,t,i,n){this.data=t,this.createWindTextures(e,t),this.createParticlesTextures(e,i,n),this.createComputingPrimitives(t,i,n)}createWindTextures(e,t){const i={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:lu(i,t.U.array),V:lu(i,t.V.array)}}createParticlesTextures(e,t,i){const n={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},o=this.randomizeParticles(t.maxParticles,i),a=new Float32Array(4*t.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:lu(n,o),currentParticlesPosition:lu(n,o),nextParticlesPosition:lu(n,o),postProcessingPosition:lu(n,o),particlesSpeed:lu(n,a)}}randomizeParticles(e,t){const i=new Float32Array(4*e);for(let n=0;n<e;n++)i[4*n]=Cesium.Math.randomBetween(t.lonRange.x,t.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(t.latRange.x,t.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach((e=>{this.particlesTextures[e].destroy()}))}createComputingPrimitives(e,t,i){const n=new Cesium.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),o=new Cesium.Cartesian3(e.lon.min,e.lat.min,e.lev.min),a=new Cesium.Cartesian3(e.lon.max,e.lat.max,e.lev.max),r=new Cesium.Cartesian3((a.x-o.x)/(n.x-1),(a.y-o.y)/(n.y-1),n.z>1?(a.z-o.z)/(n.z-1):1),s=new Cesium.Cartesian2(e.U.min,e.U.max),l=new Cesium.Cartesian2(e.V.min,e.V.max),c=this;this.primitives={calculateSpeed:new du({commandType:"Compute",uniformMap:{U:function(){return c.windTextures.U},V:function(){return c.windTextures.V},currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},dimension:function(){return n},minimum:function(){return o},maximum:function(){return a},interval:function(){return r},uSpeedRange:function(){return s},vSpeedRange:function(){return l},pixelSize:function(){return i.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind\nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\n// used to calculate the wind norm\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nfloat speedScaleFactor = speedFactor * pixelSize;\n\nvarying vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n  // ensure the range of longitude and latitude\n  lonLatLev.x = mod(lonLatLev.x, 360.0);\n  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n  vec3 index3D = vec3(0.0);\n  index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n  index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n  index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n  // the st texture coordinate corresponding to (col, row) index\n  // example\n  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n  // the content of texture will be\n  // t 1.0\n  //    |  3 4 5\n  //    |\n  //    |  0 1 2\n  //   0.0------1.0 s\n\n  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n  return normalizedIndex2D;\n}\n\nfloat getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {\n  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n  float result = texture2D(componentTexture, normalizedIndex2D).r;\n  return result;\n}\n\nfloat interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {\n  float lon = lonLatLev.x;\n  float lat = lonLatLev.y;\n  float lev = lonLatLev.z;\n\n  float lon0 = floor(lon / interval.x) * interval.x;\n  float lon1 = lon0 + 1.0 * interval.x;\n  float lat0 = floor(lat / interval.y) * interval.y;\n  float lat1 = lat0 + 1.0 * interval.y;\n\n  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));\n  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));\n  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));\n  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));\n\n  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);\n  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);\n  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);\n  return lon_lat;\n}\n\nvec3 linearInterpolation(vec3 lonLatLev) {\n  // https://en.wikipedia.org/wiki/Bilinear_interpolation\n  float u = interpolateTexture(U, lonLatLev);\n  float v = interpolateTexture(V, lonLatLev);\n  float w = 0.0;\n  return vec3(u, v, w);\n}\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n  // unit conversion: meters -> longitude latitude degrees\n  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n  // Calculate the length of a degree of latitude and longitude in meters\n  float latitude = radians(lonLatLev.y);\n\n  float term1 = 111132.92;\n  float term2 = 559.82 * cos(2.0 * latitude);\n  float term3 = 1.175 * cos(4.0 * latitude);\n  float term4 = 0.0023 * cos(6.0 * latitude);\n  float latLength = term1 - term2 + term3 - term4;\n\n  float term5 = 111412.84 * cos(latitude);\n  float term6 = 93.5 * cos(3.0 * latitude);\n  float term7 = 0.118 * cos(5.0 * latitude);\n  float longLength = term5 - term6 + term7;\n\n  return vec2(longLength, latLength);\n}\n\nvec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {\n  vec2 lonLatLength = lengthOfLonLat(lonLatLev);\n  float u = speed.x / lonLatLength.x;\n  float v = speed.y / lonLatLength.y;\n  float w = 0.0;\n  vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n  return windVectorInLonLatLev;\n}\n\nvec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {\n  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail\n  const float h = 0.5;\n\n  vec3 y_n = lonLatLev;\n  vec3 f_n = linearInterpolation(lonLatLev);\n  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;\n  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;\n\n  return speed;\n}\n\nfloat calculateWindNorm(vec3 speed) {\n  vec3 percent = vec3(0.0);\n  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n  float norm = length(percent);\n\n  return norm;\n}\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);\n  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);\n\n  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));\n  gl_FragColor = particleSpeed;\n}\n"]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const e=c.particlesTextures.previousParticlesPosition;c.particlesTextures.previousParticlesPosition=c.particlesTextures.currentParticlesPosition,c.particlesTextures.currentParticlesPosition=c.particlesTextures.postProcessingPosition,c.particlesTextures.postProcessingPosition=e,c.primitives.calculateSpeed.commandToExecute.outputTexture=c.particlesTextures.particlesSpeed}}),updatePosition:new du({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = texture2D(particlesSpeed, v_textureCoordinates).rgb;\n  vec3 nextParticle = lonLatLev + speed;\n\n  gl_FragColor = vec4(nextParticle, 0.0);\n}\n"]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){c.primitives.updatePosition.commandToExecute.outputTexture=c.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new du({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return c.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D particlesSpeed; // (u, v, w, norm)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\n\nuniform float randomCoefficient; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nvarying vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n  vec2 randomSeed = randomCoefficient * seed;\n  float temp = dot(randomConstants.xy, randomSeed);\n  temp = fract(sin(temp) * (randomConstants.z + temp));\n  return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n  // ensure the longitude is in [0, 360]\n  float randomLon = mod(rand(seed, lonRange), 360.0);\n  float randomLat = rand(-seed, latRange);\n\n  return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n  return particle.y < -90.0 || particle.y > 90.0;\n}\n\nvoid main() {\n  vec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\n  vec4 nextSpeed = texture2D(particlesSpeed, v_textureCoordinates);\n  float speedNorm = nextSpeed.a;\n  float particleDropRate = dropRate + dropRateBump * speedNorm;\n\n  vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n  float randomNumber = rand(seed2, normalRange);\n\n  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n    gl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n  } else {\n    gl_FragColor = vec4(nextParticle, 0.0);\n  }\n}\n"]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){c.primitives.postProcessingPosition.commandToExecute.outputTexture=c.particlesTextures.postProcessingPosition}})}}}const mu="\nattribute vec3 position;\nattribute vec2 st;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    textureCoordinate = st;\n    gl_Position = vec4(position, 1.0);\n}\n";class vu{constructor(e,t,i,n,o){this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,i,n,o)}createRenderingTextures(e,t){const i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:lu(i),segmentsDepth:lu(n),currentTrailsColor:lu(i),currentTrailsDepth:lu(n),nextTrailsColor:lu(i),nextTrailsDepth:lu(n)}}createRenderingFramebuffers(e){this.framebuffers={segments:cu(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:cu(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:cu(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(e){const t=[];for(let u=0;u<e.particlesTextureSize;u++)for(let i=0;i<e.particlesTextureSize;i++)for(let n=0;n<6;n++)t.push(u/e.particlesTextureSize),t.push(i/e.particlesTextureSize);const i=new Float32Array(t),n=[],o=[-1,0,1],a=[-1,1];for(let u=0;u<e.maxParticles;u++)for(let e=0;e<o.length;e++)for(let t=0;t<a.length;t++)n.push(o[e]),n.push(a[t]),n.push(0);const r=new Float32Array(n),s=12*e.maxParticles,l=new Uint32Array(s);for(let u=0,d=0,p=0;u<e.maxParticles;u++)l[d++]=p+0,l[d++]=p+1,l[d++]=p+2,l[d++]=p+2,l[d++]=p+1,l[d++]=p+3,l[d++]=p+2,l[d++]=p+4,l[d++]=p+3,l[d++]=p+4,l[d++]=p+3,l[d++]=p+5,p+=6;const c=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new c({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:r})}),indices:l})}createRenderingPrimitives(e,t,i,n){const o=this;this.primitives={segments:new du({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return n.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:["\nattribute vec2 st;\n// it is not normal itself, but used to control lines drawing\nattribute vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D previousParticlesPosition;\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nstruct adjacentPoints {\n  vec4 previous;\n  vec4 current;\n  vec4 next;\n};\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n  // WGS 84 geometric constants\n  float a = 6378137.0; // Semi-major axis\n  float b = 6356752.3142; // Semi-minor axis\n  float e2 = 6.69437999014e-3; // First eccentricity squared\n\n  float latitude = radians(lonLatLev.y);\n  float longitude = radians(lonLatLev.x);\n\n  float cosLat = cos(latitude);\n  float sinLat = sin(latitude);\n  float cosLon = cos(longitude);\n  float sinLon = sin(longitude);\n\n  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n  vec3 cartesian = vec3(0.0);\n  cartesian.x = (N_Phi + h) * cosLat * cosLon;\n  cartesian.y = (N_Phi + h) * cosLat * sinLon;\n  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n  return cartesian;\n}\n\nvec4 calculateProjectedCoordinate(vec3 lonLatLev) {\n  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n  vec3 particlePosition = convertCoordinate(lonLatLev);\n  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);\n  return projectedCoordinate;\n}\n\nvec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;\n  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;\n\n  float offsetLength = lineWidth / 2.0;\n  vec2 direction = normalize(pointB_XY - pointA_XY);\n  vec2 normalVector = vec2(-direction.y, direction.x);\n  normalVector.x = normalVector.x / aspect;\n  normalVector = offsetLength * normalVector;\n\n  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n  return offset;\n}\n\nvec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n\n  vec4 PointA = projectedCoordinates.previous;\n  vec4 PointB = projectedCoordinates.current;\n  vec4 PointC = projectedCoordinates.next;\n\n  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;\n  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;\n  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;\n\n  vec2 AB = normalize(pointB_XY - pointA_XY);\n  vec2 BC = normalize(pointC_XY - pointB_XY);\n\n  vec2 normalA = vec2(-AB.y, AB.x);\n  vec2 tangent = normalize(AB + BC);\n  vec2 miter = vec2(-tangent.y, tangent.x);\n\n  float offsetLength = lineWidth / 2.0;\n  float projection = dot(miter, normalA);\n  vec4 offset = vec4(0.0);\n  // avoid to use values that are too small\n  if (projection > 0.1) {\n    float miterLength = offsetLength / projection;\n    offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);\n    offset.x = offset.x / aspect;\n  } else {\n    offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);\n  }\n\n  return offset;\n}\n\nvoid main() {\n  vec2 particleIndex = st;\n\n  vec3 previousPosition = texture2D(previousParticlesPosition, particleIndex).rgb;\n  vec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\n  vec3 nextPosition = texture2D(postProcessingPosition, particleIndex).rgb;\n\n  float isAnyRandomPointUsed = texture2D(postProcessingPosition, particleIndex).a +\n    texture2D(currentParticlesPosition, particleIndex).a +\n    texture2D(previousParticlesPosition, particleIndex).a;\n\n  adjacentPoints projectedCoordinates;\n  if (isAnyRandomPointUsed > 0.0) {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = projectedCoordinates.previous;\n    projectedCoordinates.next = projectedCoordinates.previous;\n  } else {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);\n    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);\n  }\n\n  int pointToUse = int(normal.x);\n  float offsetSign = normal.y;\n  vec4 offset = vec4(0.0);\n  // render lines with triangles and miter joint\n  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail\n  if (pointToUse == -1) {\n    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);\n    gl_Position = projectedCoordinates.previous + offset;\n  } else {\n    if (pointToUse == 0) {\n      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);\n      gl_Position = projectedCoordinates.current + offset;\n    } else {\n      if (pointToUse == 1) {\n        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);\n        gl_Position = projectedCoordinates.next + offset;\n      } else {\n\n      }\n    }\n  }\n}\n"]}),fragmentShaderSource:new Cesium.ShaderSource({sources:["\nvoid main() {\n  const vec4 white = vec4(1.0);\n  gl_FragColor = white;\n}\n"]}),rawRenderState:uu({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new du({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:su(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return o.textures.segmentsColor},segmentsDepthTexture:function(){return o.textures.segmentsDepth},currentTrailsColor:function(){return o.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[mu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\n  vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\n\n  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n  float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  gl_FragColor = vec4(0.0);\n  if (pointsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + pointsColor;\n  }\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + trailsColor;\n  }\n  gl_FragDepthEXT = min(pointsDepth, trailsDepth);\n}\n"]}),rawRenderState:uu({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const e=o.framebuffers.currentTrails;o.framebuffers.currentTrails=o.framebuffers.nextTrails,o.framebuffers.nextTrails=e,o.primitives.trails.commandToExecute.framebuffer=o.framebuffers.nextTrails,o.primitives.trails.clearCommand.framebuffer=o.framebuffers.nextTrails}}),screen:new du({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:su(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return o.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[mu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = trailsColor;\n  } else {\n    gl_FragColor = vec4(0.0);\n  }\n}\n"]}),rawRenderState:uu({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class hu{constructor(e,t,i,n){this.context=e,this.data=t,this.particleSystemOptions=i,this.viewerParameters=n,this.particlesComputing=new pu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new vu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(e){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach((e=>{this.particlesComputing.windTextures[e].destroy()})),Object.keys(this.particlesRendering.framebuffers).forEach((e=>{this.particlesRendering.framebuffers[e].destroy()})),this.context=e,this.particlesComputing=new pu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new vu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach((t=>{e.framebuffer=this.particlesRendering.framebuffers[t],e.execute(this.context)}))}refreshParticles(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),e){const e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;const t=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=t}}applyParticleSystemOptions(e){let t=!1;this.particleSystemOptions.maxParticles!==e.maxParticles&&(t=!0),Object.keys(e).forEach((t=>{this.particleSystemOptions[t]=e[t]})),this.refreshParticles(t)}applyViewerParameters(e){Object.keys(e).forEach((t=>{this.viewerParameters[t]=e[t]})),this.refreshParticles(!1)}}function gu(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function fu(e){return"string"==typeof e&&e.indexOf("/")>=0&&(e=e.split("/")),function(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!e)return!1;const t=e.length;return"number"==typeof t&&t>=0}(e)&&2===e.length?e[0]/e[1]:+e}var yu=S({name:"VcOverlayWindmap",props:{show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:4096,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object},emits:ms,setup(e,t){const n=o();n.cesiumClass="VcOverlayHtml",n.cesiumEvents=[];const a=Kn(e,t,n);if(void 0===a)return;const{$services:r}=a;let s,l,c,u;const d=i((()=>{const t=Math.ceil(Math.sqrt(e.options.maxParticles));return{particlesTextureSize:t,maxParticles:t*t,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}}));let p=[];p.push(f((()=>e.show),(e=>{c.show=e}))),p.push(f((()=>e.data),(e=>{n.proxy.reload()}))),p.push(f((()=>d.value),(e=>{const t=n.cesiumObject;t&&t.applyParticleSystemOptions(e)}),{deep:!0})),p.push(f((()=>e.viewerParameters),(e=>{O();n.cesiumObject.applyViewerParameters(s)}),{deep:!0})),n.createCesiumObject=async()=>{const{viewer:t}=r;c=new Cesium.PrimitiveCollection,l=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),s={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const i={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},n={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return u=function(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,a=fu(e.delta),r=fu(t.delta),s=fu(e.start),l=fu(t.start),c=Math.floor(i*a)>=360;return{dimensions:function(){return{width:i,height:n}},isCylindrical:function(){return c},forEach:function(e,t){for(let n=t||0;n<o;n++){const t=n%i,o=Math.floor(n/i);if(e(s+t*a,l+o*r,n))return n+1}return NaN},closest:function(e,t){if(e==e&&t==t){const o=gu(e-s,360)/a,u=(t-l)/r,d=Math.round(o),p=Math.round(u);if(0<=p&&p<n&&0<=d&&(d<i||d===i&&c)){const e=p*i+d;return d===i?e-i:e}}return NaN},closest4:function(e,t){if(e==e&&t==t){const o=gu(e-s,360)/a,u=(t-l)/r,d=Math.floor(o),p=Math.floor(u),m=d+1,v=p+1,h=o-d,g=u-p;if(0<=p&&v<n&&0<=d&&(m<i||m===i&&c)){const e=p*i+d;let t=e+1;const n=e+i;let o=n+1;return m===i&&(t-=i,o-=i),[e,t,n,o,h,g]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}}}(i,n),O(),new hu(t.scene.context,e.data,d.value,s)},n.mount=async()=>{const{viewer:e}=r;e.scene.primitives.add(c);const t=e.scene,i=t.camera;return m(),i.moveStart.addEventListener(g),i.moveEnd.addEventListener(y),window.addEventListener("resize",C),t.preRender.addEventListener(w),!0},n.unmount=async()=>{v();const{viewer:e}=r,t=e.scene,i=t.camera;return v(),e.scene.primitives.remove(c),i.moveStart.removeEventListener(g),i.moveEnd.removeEventListener(y),window.removeEventListener("resize",C),t.preRender.removeEventListener(w),!0};const m=()=>{const e=n.cesiumObject;c.add(e.particlesComputing.primitives.calculateSpeed),c.add(e.particlesComputing.primitives.updatePosition),c.add(e.particlesComputing.primitives.postProcessingPosition),c.add(e.particlesRendering.primitives.segments),c.add(e.particlesRendering.primitives.trails),c.add(e.particlesRendering.primitives.screen)},v=()=>{const e=n.cesiumObject;c.remove(e.particlesComputing.primitives.calculateSpeed),c.remove(e.particlesComputing.primitives.updatePosition),c.remove(e.particlesComputing.primitives.postProcessingPosition),c.remove(e.particlesRendering.primitives.segments),c.remove(e.particlesRendering.primitives.trails),c.remove(e.particlesRendering.primitives.screen)},g=()=>{c.show=!1},y=()=>{O();n.cesiumObject.applyViewerParameters(s),c.show=!0};let b=!1;const C=()=>{b=!0,c.show=!1,c.removeAll()},w=()=>{if(b){const{viewer:e}=r,t=e.scene;n.cesiumObject.canvasResize(t.context),b=!1,m(),c.show=!0}},O=()=>{const{viewer:t}=r,i=t.scene,n=i.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))s.lonRange=Oe(e.viewerParameters.lonRange),s.latRange=Oe(e.viewerParameters.latRange);else{const e=function(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let a,r;o>Cesium.Math.THREE_PI_OVER_TWO?(a=0,r=Cesium.Math.TWO_PI):n-i<o?(a=i,r=i+o):(a=i,r=n),t.lon={min:Cesium.Math.toDegrees(a),max:Cesium.Math.toDegrees(r)};const s=e.south,l=e.north,c=e.height,u=c>Cesium.Math.PI/12?c/2:0;let d=Cesium.Math.clampToLatitudeRange(s-u),p=Cesium.Math.clampToLatitudeRange(l+u);return d<-Cesium.Math.PI_OVER_THREE&&(d=-Cesium.Math.PI_OVER_TWO),p>Cesium.Math.PI_OVER_THREE&&(p=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(d),max:Cesium.Math.toDegrees(p)},t}(n.computeViewRectangle(i.globe.ellipsoid));s.lonRange.x=e.lon.min,s.lonRange.y=e.lon.max,s.latRange.x=e.lat.min,s.latRange.y=e.lat.max}const o=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:n.getPixelSize(l,i.drawingBufferWidth,i.drawingBufferHeight);o>0&&(s.pixelSize=o)};return h((()=>{p.forEach((e=>e())),p=[]})),Object.assign(n.proxy,{getNearestUV:(t,i)=>{const n=u.closest(t,i);if(Cesium.defined(n))return[e.data.U.array[n],e.data.V.array[n]]}}),()=>{var e;return T(le((null==(e=n.proxy)?void 0:e.$options.name)||"v-if"))}}});var bu=S({name:"VcOverlayDynamic",props:{...mt,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},emits:{...ms,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:(e,t,i,n)=>!0},setup(t,i){const n=o();n.cesiumClass="VcOverlayDynamic",n.cesiumEvents=[];const a=Kn(t,i,n);if(void 0===a)return;const{$services:r}=a,s=e([]),l=e({}),{emit:c}=i,u=e(null),d=e(null);let p,m=[];m.push(f((()=>t.show),(e=>{const t=n.cesiumObject;t&&(t.show=e)}))),m.push(f((()=>t.name),(e=>{const t=n.cesiumObject;t&&(t.name=e)}))),m.push(f((()=>t.startTime),(e=>{const{viewer:t}=r;Cesium.defined(t)&&e&&(t.clock.startTime=He(e))}))),m.push(f((()=>t.stopTime),(e=>{const{viewer:t}=r;Cesium.defined(t)&&e&&(t.clock.stopTime=He(e))}))),m.push(f((()=>t.currentTime),(e=>{const{viewer:t}=r;Cesium.defined(t)&&e&&(t.clock.currentTime=He(e))}))),m.push(f((()=>t.multiplier),(e=>{const{viewer:t}=r;Cesium.defined(t)&&(t.clock.multiplier=e)}))),m.push(f((()=>t.clockStep),(e=>{const{viewer:t}=r;Cesium.defined(t)&&(t.clock.clockStep=e)}))),m.push(f((()=>t.clockRange),(e=>{const{viewer:t}=r;Cesium.defined(t)&&(t.clock.clockRange=e)}))),m.push(f((()=>t.canAnimate),(e=>{const{viewer:t}=r;Cesium.defined(t)&&(t.clock.canAnimate=e)}))),m.push(f((()=>t.shouldAnimate),(e=>{const{viewer:t}=r;Cesium.defined(t)&&(t.clock.shouldAnimate=e)}))),m.push(f((()=>G(t.dynamicOverlays)),((e,i)=>{if(!n.mounted)return;const o=n.cesiumObject;if(e.length===i.length){const n=[];for(let t=0;t<e.length;t++){const o=e[t],a=i[t],r=(e,t)=>{if("nodeTransformations"!==e&&"_definitionChanged"!==e)return t};JSON.stringify(o,r)!==JSON.stringify(a,r)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const i=o.entities.getById(e.oldOptions.id);if(Cesium.defined(i)){if(e.oldOptions.id===e.newOptions.id)i&&Object.keys(e.newOptions).forEach((t=>{e.oldOptions[t]!==e.newOptions[t]&&(i[t]=a.transformProp(t,e.newOptions[t]))}));else if(i){o.entities.remove(i),Z(s.value,(e=>e.id===i.id));const t=e.newOptions;g(o,[t])}const n=Y(s.value,(e=>e.id===i.id));if(Cesium.defined(n)){const i=e.oldOptions.sampledPositions,o=e.newOptions.sampledPositions,a=W(o,i,"id");W(i,o,"id").forEach((e=>{e.time&&n._sampledPosition.removeSample(e.time)})),a.forEach((e=>{e.time?n.addPosition(e.position,e.time):e.interval&&n.addPosition(e.position,e.interval||t.defaultInterval)}))}}}))}else{const t=W(e,i,"id"),n=W(i,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o.entities.getById(n[e].id);a.push(t)}a.forEach((e=>{o.entities.remove(e),Z(s.value,(t=>t.id===e.id))})),g(o,t)}}),{deep:!0})),n.createCesiumObject=async()=>new Cesium.CustomDataSource(t.name);const v=e=>{let i=be(n,"update:currentTime");t.currentTime!==e.currentTime&&i&&c("update:currentTime",e.currentTime),i=be(n,"update:shouldAnimate"),t.shouldAnimate!==e.shouldAnimate&&i&&c("update:shouldAnimate",e.shouldAnimate),i=be(n,"update:canAnimate"),t.canAnimate!==e.canAnimate&&i&&c("update:canAnimate",e.canAnimate),i=be(n,"update:clockRange"),t.clockRange!==e.clockRange&&i&&c("update:clockRange",e.clockRange),i=be(n,"update:clockStep"),t.clockStep!==e.clockStep&&i&&c("update:clockStep",e.clockStep),i=be(n,"update:multiplier"),t.multiplier!==e.multiplier&&i&&c("update:multiplier",e.multiplier),i=be(n,"update:startTime"),t.startTime!==e.startTime&&i&&c("update:startTime",e.startTime),i=be(n,"update:stopTime"),t.stopTime!==e.stopTime&&i&&c("update:stopTime",e.stopTime),y(e);const{JulianDate:o,Cartesian3:a}=Cesium;if(i=be(n,"stopArrived"),i&&t.shouldAnimate)for(let n=0;n<s.value.length;n++){const i=s.value[n],r=i._sampledPosition.getValue(e.currentTime),l=t.dynamicOverlays[n];for(let n=0;n<l.sampledPositions.length;n++){const s=l.sampledPositions[n],u=xe(s.position),d=He(s.time),m=a.equalsEpsilon(r,u,t.positionPrecision),v=o.equalsEpsilon(e.currentTime,d,t.timePrecision);let h=!1;switch(t.stopArrivedFlag){case"time":h=v;break;case"position":h=m;break;case"both":h=v&&m;break;case"or":h=v||m}if(h){c("stopArrived",i,s,p,e);break}}}},g=(e,i)=>{for(let n=0;n<i.length;n++){const o=i[n],r=a.transformProps(o),l=new na(r);s.value.push(l);const c=e.entities.add(l._entity);r.sampledPositions.forEach((e=>{e.time?l.addPosition(e.position,e.time):e.interval&&(e.time=l.addPosition(e.position,e.interval||t.defaultInterval))})),o.id!==c.id&&(o.id=c.id),me(c,r,["id"])}};n.mount=async()=>{const{viewer:e}=r,i=n.cesiumObject;return i.show=t.show,g(i,t.dynamicOverlays),e.dataSources.add(i).then((()=>{l.value.startTime=e.clock.startTime,l.value.stopTime=e.clock.stopTime,l.value.currentTime=e.clock.currentTime,l.value.multiplier=e.clock.multiplier,l.value.clockStep=e.clock.clockStep,l.value.clockRange=e.clock.clockRange,l.value.canAnimate=e.clock.canAnimate,l.value.shouldAnimate=e.clock.shouldAnimate,t.startTime&&(e.clock.startTime=He(t.startTime)),t.stopTime&&(e.clock.stopTime=He(t.stopTime)),t.currentTime&&(e.clock.currentTime=He(t.currentTime)),e.clock.multiplier=t.multiplier,e.clock.clockStep=t.clockStep,e.clock.clockRange=t.clockRange,e.clock.canAnimate=!1,e.clock.shouldAnimate=t.shouldAnimate,e.clock.onTick.addEventListener(v);const i=be(n,"onStop");return i&&e.clock.onStop.addEventListener(i),!0}))},n.unmount=async()=>{const{viewer:e}=r,t=n.cesiumObject;e.dataSources.remove(t,!0),e.clock.startTime=l.value.startTime,e.clock.stopTime=l.value.stopTime,e.clock.multiplier=l.value.multiplier,e.clock.clockStep=l.value.clockStep,e.clock.clockRange=l.value.clockRange,e.clock.canAnimate=l.value.canAnimate,e.clock.shouldAnimate=l.value.shouldAnimate,s.value.length=0,e.clock.onTick.removeEventListener(v);const i=be(n,"onStop");return i&&e.clock.onStop.removeEventListener(i),u.value&&(e.trackedEntity=void 0),!0};const y=e=>{var t,i,n,o,a,s,l,c;if(d.value&&u.value){const{viewer:m}=r;if(Cesium.JulianDate.greaterThan(e.currentTime,e.stopTime))return void(u.value=null);const v=u.value._sampledPosition.getValue(e.currentTime);let h=new Cesium.HeadingPitchRange;switch(d.value.mode){case"TP":h.heading=0,h.pitch=(null==(i=null==(t=d.value)?void 0:t.offset)?void 0:i.pitch)||Cesium.Math.toRadians(-90),h.range=(null==(o=null==(n=d.value)?void 0:n.offset)?void 0:o.range)||1e3;break;case"FP":{const t=Cesium.JulianDate.addSeconds(e.currentTime,1/60,new Cesium.JulianDate),i=u.value._sampledPosition.getValue(t)||v;v.equals(i)&&p?h=p:(h.heading=Cesium.Math.toRadians(We(v,i)),h.pitch=((null==(s=null==(a=d.value)?void 0:a.offset)?void 0:s.pitch)||Cesium.Math.toRadians(-45))+Ge(v,i),h.range=(null==(c=null==(l=d.value)?void 0:l.offset)?void 0:c.range)||500);break}case"CUSTOM":h=Ue(d.value.offset)}p=h,m.camera.lookAt(v,h)}},b=e=>e instanceof na?e:"string"==typeof e?Y(s.value,(t=>t.id===e)):"number"==typeof e?s.value[e]:s.value[0];return h((()=>{m.forEach((e=>e())),m=[]})),Object.assign(n.proxy,{getOverlays:()=>s.value,getOverlay:b,trackOverlay:(e,t)=>{var i;const{viewer:n}=r;if("FREE"===(t=t||{mode:null===d.value?"FP":"FREE"}).mode)return n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(u.value&&(n.trackedEntity=void 0,u.value=null,d.value=null));u.value=b(e),n.trackedEntity=k(u.value._entity),"TRACKED"===t.mode?((null==(i=null==t?void 0:t.viewFrom)?void 0:i.length)&&(n.trackedEntity.viewFrom=new Cesium.Cartesian3(t.viewFrom[0],t.viewFrom[1],t.viewFrom[2])),d.value=null):d.value=t},zoomToOverlay:(e,t)=>{const{viewer:i}=r;let o;if(u.value&&(i.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=k(b(e)._entity);t.push(i)})),o=t}else o=n.cesiumObject;else o=k(b(e)._entity);else o=n.cesiumObject;return i.zoomTo(o,Cesium.defined(t)?Ue(t):void 0)},flyToOverlay:(e,t)=>{const{viewer:i}=r;let o;if(u.value&&(i.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=k(b(e)._entity);t.push(i)})),o=t}else o=n.cesiumObject;else o=k(b(e)._entity);else o=n.cesiumObject;return t=t||{duration:3},Cesium.defined(t.offset)&&(t.offset=Ue(t.offset)),i.flyTo(o,t)}}),()=>{var e;return T(le((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});[kc,au,ru,yu,bu].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Cu=kc,wu=au,Ou=ru,xu=yu,Su=bu;var _u=S({name:"VcCollectionBillboard",props:{...mn,...vn,...mt,...Un,...dn,...pn,billboards:{type:Array,default:()=>[]}},emits:ys,setup(e,t){const i=o();i.cesiumClass="BillboardCollection";const n=So(e,t,i);let a=[];a.push(f((()=>G(e.billboards)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._billboards.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==n?void 0:n.transformProp(i,e.newOptions[i]))}))}))}else{const i=W(e,t,"id"),n=W(t,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o._billboards.find((t=>t.id===n[e].id));t&&a.push(t)}a.forEach((e=>{o.remove(e)})),r(o,i)}}),{deep:!0})),i.alreadyListening.push("billboards");const r=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=null==n?void 0:n.transformProps(o),r=e.add(a);me(r,a)}};return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e),i=new Cesium.BillboardCollection(t);return r(i,e.billboards),i},h((()=>{a.forEach((e=>e())),a=[]})),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Eu=S({name:"VcBillboard",props:{...Qe,...Je,...et,...tt,...it,...nt,...ot,...at,...hn,...rt,...lt,...ct,...Ye,...ut,...dt,...pt,...mt,...vt,...ht,...gt,...ft,...Un},emits:ys,setup(e,t){const i=o();return i.cesiumClass="Billboard",xo(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Pu=S({name:"VcCumulusCloud",props:{brightness:{type:Number,default:1},...Je,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:xe}},...Ye,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:Oe}},...mt,slice:{type:Number,default:-1}},emits:ys,setup(e,t){const i=o();return i.cesiumClass="CumulusCloud",xo(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Tu=S({name:"VcCollectionCloud",props:{...mt,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}},emits:ms,setup(e,t){var i;const n=o();n.cesiumClass="CloudCollection";const a=So(e,t,n);if(void 0===a)return;n.alreadyListening.push("clouds");let r=[];r.push(f((()=>G(e.clouds)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._clouds.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=a.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._clouds.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=a.transformProps(n,Pu.props),r=e.add(o);me(r,o)}};n.createCesiumObject=async()=>{const t=a.transformProps(e,Pu.props),i=new Cesium.CloudCollection(t);return s(i,e.clouds),i},h((()=>{r.forEach((e=>e())),r=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(l),style:{display:"none !important"}},Ca(t.slots.default)):T(le(l))}});var Mu=S({name:"VcCollectionLabel",props:{...dn,...pn,...mn,...vn,...mt,...Un,labels:{type:Array,default:()=>[]}},emits:ys,setup(e,t){var i;const n=o();n.cesiumClass="LabelCollection";const a=So(e,t,n);if(void 0===a)return;n.alreadyListening.push("labels");let r=[];r.push(f((()=>G(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=a.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=a.transformProps(n),r=e.add(o);me(r,o)}};n.createCesiumObject=async()=>{const t=a.transformProps(e),i=new Cesium.LabelCollection(t);return s(i,e.labels),i},h((()=>{r.forEach((e=>e())),r=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(l),style:{display:"none !important"}},Ca(t.slots.default)):T(le(l))}});var Iu=S({name:"VcLabel",props:{...Kt,...ei,...et,...tt,...it,...ti,...Xt,...ot,...at,...hn,...Ot,...xt,...lt,...ct,...Ye,...dt,...pt,...mt,...Jt,...Qt,...qt,totalScale:{type:Number,default:1},...ht,...gt,...Un},emits:ys,setup(e,t){const i=o();return i.cesiumClass="Label",xo(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ju=S({name:"VcCollectionPoint",props:{...dn,...pn,...vn,...mt,...Un,points:{type:Array,default:()=>[]}},emits:ys,setup(e,t){const i=o();i.cesiumClass="PointPrimitiveCollection";const n=So(e,t,i);if(void 0===n)return;i.alreadyListening.push("points");let a=[];a.push(f((()=>G(e.points)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}))}))}else{const i=W(e,t,"id"),n=W(t,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o._pointPrimitives.find((t=>t.id===n[e].id));t&&a.push(t)}a.forEach((e=>{o.remove(e)})),r(o,i)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=n.transformProps(o),r=e.add(a);me(r,a)}};return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=new Cesium.PointPrimitiveCollection(t);return r(i,e.points),i},h((()=>{a.forEach((e=>e())),a=[]})),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Lu=S({name:"VcPoint",props:{...Je,...et,...tt,...hn,...Ot,...xt,...yi,...Ye,...pt,...mt,...ht,...Un},emits:ys,setup(e,t){const i=o();return i.cesiumClass="PointPrimitive",xo(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Au=S({name:"VcCollectionPolyline",props:{...dn,...pn,...mt,...Un,polylines:{type:Array,default:()=>[]}},emits:ys,setup(e,t){var i;const n=o();n.cesiumClass="PolylineCollection";const a=So(e,t,n);if(void 0===a)return;n.alreadyListening.push("polylines");let r=[];r.push(f((()=>G(e.polylines)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._polylines.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=a.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._polylines.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=a.transformProps(n),r=e.add(o);me(r,o)}};n.createCesiumObject=async()=>{const t=a.transformProps(e),i=new Cesium.PolylineCollection(t);return s(i,e.polylines),i},h((()=>{r.forEach((e=>e())),r=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(l),style:{display:"none !important"}},Ca(t.slots.default)):T(le(l))}});var Du=S({name:"VcPolyline",props:{...tt,...hn,...gn,...Ct,..._t,...mt,...ft,...Un},emits:ys,setup(e,t){const i=o();return i.cesiumClass="Polyline",xo(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ku=S({name:"VcCollectionPrimitive",props:{...mt,destroyPrimitives:{type:Boolean,default:!0},...Un,polygons:{type:Array,default:()=>[]}},emits:ys,setup(e,t){var i;const n=o();n.cesiumClass="PrimitiveCollection";const a=So(e,t,n);if(void 0===a)return;n.alreadyListening.push("polygons");let r=[];r.push(f((()=>G(e.polygons)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._primitives.find((t=>t._id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=a.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._primitives.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const o=a.transformProps(n),r=new ia(o);r._vcParent=e,me(r,o),e.add(r)}};n.createCesiumObject=async()=>{const t=a.transformProps(e),i=new Cesium.PrimitiveCollection(t);return s(i,e.polygons),i},h((()=>{r.forEach((e=>e())),r=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:le(l),style:{display:"none !important"}},Ca(t.slots.default)):T(le(l))}});var Ru=S({name:"VcPolygon",props:{..._t,...xn,...rn,...sn,...mt,...hn,...It,..._i,...zi,...en,...tn,...Un},emits:ys,setup(e,t){const i=o();i.cesiumClass="PolygonPrimitive";const n=xo(e,t,i);if(void 0===n)return;let a=[];return a.push(f((()=>e.clampToGround),(e=>{const t=i.cesiumObject;t&&(t.clampToGround=e)}))),a.push(f((()=>e.positions),(e=>{const t=i.cesiumObject;t&&(t.positions=Se(e))}))),a.push(f((()=>e.polygonHierarchy),(e=>{const t=i.cesiumObject;t&&(t.polygonHierarchy=Te(e))}))),a.push(f((()=>e.appearance),(e=>{const t=i.cesiumObject;t&&(t.appearance=Le.call(i,e))}))),a.push(f((()=>e.depthFailAppearance),(e=>{const t=i.cesiumObject;t&&(t.depthFailAppearance=Le.call(i,e))}))),a.push(f((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),a.push(f((()=>e.classificationType),(e=>{const t=i.cesiumObject;t&&(t.classificationType=e)}))),i.createCesiumObject=async()=>{const t=n.transformProps(e);return new ia(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return t._vcParent=e,e&&e.add(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},h((()=>{a.forEach((e=>e())),a=[]})),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[_u,Tu,Mu,ju,Au,ku,Pu,Eu,Iu,Lu,Du,Ru].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Bu=_u,Nu=Tu,Vu=Mu,zu=ju,Fu=Au,Hu=ku,Uu=Eu,Wu=Pu,Gu=Iu,$u=Lu,Zu=Du,Yu=Ru;var qu=S({name:"VcGeometryInstance",props:{geometry:Object,...dn,...hn,attributes:Object},emits:{...ms,"update:geometry":e=>!0},setup(i,n){const a=o();a.renderByParent=!0,a.cesiumClass="GeometryInstance",a.cesiumEvents=[];const r=Kn(i,n,a);if(void 0===r)return;const{emit:s}=n,l=e(0);a.createCesiumObject=async()=>{const e=r.transformProps(i);return e.geometry||(e.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(e)},a.mount=async()=>{var e;const t=we(a).proxy;void 0!==t.__childCount&&(l.value=t.__childCount.value||0,t.__childCount.value+=1);const i=a.cesiumObject;return null==(e=t.__updateGeometryInstances)||e.call(t,i,l.value),!0},a.unmount=async()=>{var e;const t=a.cesiumObject,i=we(a).proxy;return null==(e=i.__removeGeometryInstances)||e.call(i,t),!0};return t(J,fe(r.getServices(),{get geometryInstance(){return a.cesiumObject}})),Object.assign(a.proxy,{__updateGeometry:e=>{if(be(a,"update:geometry"))s("update:geometry",e);else{a.cesiumObject.geometry=e}return!0}}),()=>{var e,t;return n.slots.default?O("i",{class:le((null==(e=a.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(n.slots.default)):T(le((null==(t=a.proxy)?void 0:t.$options.name)||"v-if"))}}});qu.install=e=>{e.component(qu.name,qu)};const Xu=qu,Qu=Xu;var Ju=S({name:"VcGeometryBox",props:{...yt,...yn},emits:ms,setup(e,t){const i=o();i.cesiumClass="BoxGeometry";const n=to(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Ku=S({name:"VcGeometryBoxOutline",props:{...yt},emits:ms,setup(e,t){const i=o();i.cesiumClass="BoxOutlineGeometry";const n=to(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ed=S({name:"VcGeometryCircle",props:{...bn,...Cn,...zi,...nt,...Mt,...yn,...Et,...Vt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CircleGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var td=S({name:"VcGeometryCircleOutline",props:{...bn,...Cn,...zi,...nt,...Mt,...Et,...kt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CircleOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var id=S({name:"VcGeometryPolygonCoplanar",props:{...xn,...zi,...yn,...Vt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CoplanarPolygonGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var nd=S({name:"VcGeometryPolygonCoplanarOutline",props:{...xn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CoplanarPolygonOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var od=S({name:"VcGeometryCorridor",props:{..._t,...ft,...zi,...Mt,...nt,...Et,...yn,...Tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CorridorGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ad=S({name:"VcGeometryCorridorOutline",props:{..._t,...ft,...zi,...Mt,...nt,...Et,...Tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CorridorOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var rd=S({name:"VcGeometryCylinder",props:{...Lt,...At,...Dt,...Rt,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CylinderGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var sd=S({name:"VcGeometryCylinderOutline",props:{...Lt,...At,...Dt,...Rt,...kt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="CylinderOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ld=S({name:"VcGeometryEllipse",props:{...bn,...Bt,...Nt,...zi,...nt,...Et,...ut,...Vt,...Mt,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipseGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var cd=S({name:"VcGeometryEllipseOutline",props:{...bn,...Bt,...Nt,...zi,...nt,...Et,...ut,...Vt,...Mt,...kt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipseOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ud=S({name:"VcGeometryEllipsoid",props:{...zt,...Ft,...Ht,...Ut,...Wt,...Gt,...$t,...Zt,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipsoidGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var dd=S({name:"VcGeometryEllipsoidOutline",props:{...zt,...Ft,...Ht,...Ut,...Wt,...Gt,...$t,...Zt,...Yt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipsoidOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var pd=S({name:"VcGeometryFrustum",props:{...wn,...On,...Xe,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="FrustumGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var md=S({name:"VcGeometryFrustumOutline",props:{...wn,...On,...Xe},emits:ms,setup(e,t){const i=o();return i.cesiumClass="FrustumOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var vd=S({name:"VcGeometryGroundPolyline",props:{..._t,...ft,...Mt,...gn,...xi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="GroundPolylineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var hd=S({name:"VcGeometryPlane",props:{...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PlaneGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}}),gd=S({name:"VcGeometryPlaneOutline",emits:ms,setup(e,t){const i=o();return i.cesiumClass="PlaneOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var fd=S({name:"VcGeometryPolygon",props:{...xn,...nt,...Et,...yn,...Vt,...zi,...Mt,...Ci,...wi,...Oi,...xi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolygonGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var yd=S({name:"VcGeometryPolygonOutline",props:{...xn,...nt,...Et,...yn,...zi,...Mt,...Ci,...xi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolygonOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var bd=S({name:"VcGeometryPolyline",props:{..._t,...ft,...Rn,colorsPerVertex:{type:Boolean,default:!1},...xi,...Mt,...yn,...zi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolylineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Cd=S({name:"VcGeometryPolylineVolume",props:{...In,...Mn,...zi,...Mt,...yn,...Tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var wd=S({name:"VcGeometryPolylineVolumeOutline",props:{...In,...Mn,...zi,...Mt,...Tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Od=S({name:"VcGeometryRectangle",props:{...Ni,...yn,...zi,...Mt,...nt,...ut,...Vt,...Et},emits:ms,setup(e,t){const i=o();return i.cesiumClass="RectangleGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var xd=S({name:"VcGeometryRectangleOutline",props:{...Ni,...zi,...Mt,...nt,...ut,...Et},emits:ms,setup(e,t){const i=o();return i.cesiumClass="RectangleOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sd=S({name:"VcGeometrySimplePolyline",props:{..._t,...Rn,colorsPerVertex:{type:Boolean,default:!1},...xi,...Mt,...zi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="SimplePolylineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _d=S({name:"VcGeometrySphere",props:{...Cn,...$t,...Zt,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="SphereGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ed=S({name:"VcGeometrySphereOutline",props:{...Cn,...$t,...Zt,...Yt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="SphereOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pd=S({name:"VcGeometryWall",props:{..._t,...Mt,...Ii,...Mi,...zi,...yn},emits:ms,setup(e,t){const i=o();return i.cesiumClass="WallGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Td=S({name:"VcGeometryWallOutline",props:{..._t,...Mt,...Ii,...Mi,...zi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="WallOutlineGeometry",to(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Ju,Ku,ed,td,id,nd,od,ad,rd,sd,ld,cd,ud,dd,pd,md,vd,hd,gd,fd,yd,bd,Cd,wd,Od,xd,Sd,_d,Ed,Pd,Td].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Md=Ju,Id=Ku,jd=ed,Ld=td,Ad=id,Dd=nd,kd=od,Rd=ad,Bd=rd,Nd=sd,Vd=ld,zd=cd,Fd=ud,Hd=dd,Ud=pd,Wd=md,Gd=vd,$d=hd,Zd=gd,Yd=fd,qd=yd,Xd=bd,Qd=Cd,Jd=wd,Kd=Od,ep=xd,tp=Sd,ip=_d,np=Ed,op=Pd,ap=Td;function rp(t,n,o,a,r){o.cesiumClass=a,o.cesiumEvents=[];const{t:s}=Yn(),{emit:l}=n,c=le(a).split("-");"VcMeasurementDistance"===a&&t.showComponentLines&&(c[2]="component-distance"),"VcDrawingRegular"!==a&&"VcMeasurementRegular"!==a||(4===t.edge&&(c[2]="rectangle"),360===t.edge&&(c[2]="circle"));let u=c[2];c[3]&&(u=`${c[2]}-${c[3]}`);const d=e(""),p=i((()=>({drawingTipStart:t.drawtip.drawingTipStart||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipStart`),drawingTipEnd:t.drawtip.drawingTipEnd||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipEnd`),drawingTipEditing:t.drawtip.drawingTipEditing||s(`${c[0]}.${c[1]}.${c[2]}.drawingTipEditing`)}))),m=e(Ho),v=e(!1),h=e([0,0,0]),g=e(!1),f=e([0,0,0]),y=e(null),b=e(null),C=e(null),w=e(""),{registerTimeout:O,removeTimeout:x}=fr();o.createCesiumObject=async()=>C;return{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:h,showEditor:g,editorPosition:f,mouseoverPoint:y,editingPoint:b,primitiveCollectionRef:C,editorType:w,onMouseoverPoints:e=>{var i,n;const{drawingHandlerActive:o,viewer:a}=r;t.editable&&m.value!==Uo&&o&&(e.pickedFeature.primitive.pixelSize=1.5*(null==(i=t.pointOpts)?void 0:i.pixelSize),x(),O((()=>{y.value=e.pickedFeature.primitive,f.value=e.pickedFeature.primitive.position,g.value=!0,v.value=!1,h.value=[0,0,0]}),null==(n=t.editorOpts)?void 0:n.delay)),l("mouseEvt",{type:e.type,name:u,target:e},a)},onMouseoutPoints:e=>{var i,n;const{viewer:o,selectedDrawingActionInstance:a}=r;t.editable&&(e.pickedFeature.primitive.pixelSize=1*(null==(i=t.pointOpts)?void 0:i.pixelSize),x(),O((()=>{f.value=[0,0,0],y.value=void 0,g.value=!1}),null==(n=t.editorOpts)?void 0:n.hideDelay),a&&(v.value=!0)),l("mouseEvt",{type:e.type,name:u,target:e},o)},onMouseenterEditor:e=>{x()},onMouseleaveEditor:e=>{var i;x(),O((()=>{var e;f.value=[0,0,0],y.value.pixelSize=1*(null==(e=t.pointOpts)?void 0:e.pixelSize),y.value=void 0,g.value=!1}),null==(i=t.editorOpts)?void 0:i.hideDelay)},onPrimitiveCollectionReady:e=>{e.cesiumObject._vcId=a},onVcCollectionPointReady:function(e){const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:e=>{if(t.disableDepthTest)return;const i=e.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[n].pass=Cesium.Pass.OPAQUE,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:e=>{if(t.disableDepthTest)return;const i=e.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass=Cesium.Pass.OVERLAY,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function sp(t,n,a){const r=o(),s=Kn(t,n,r);if(void 0===s)return;const{t:l}=Yn(),c=s.$services,{emit:u}=n,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=rp(t,n,r,a,c),D=e([]);let k;t.preRenderDatas&&t.preRenderDatas.length&&t.preRenderDatas.forEach((e=>{const t={positions:Se(e),show:!0,drawStatus:Wo,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===a&&Object.assign(t,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),D.value.push(t)}));const R=i((()=>{const e=[],{Cartesian3:i,Cartographic:n,Rectangle:o,createGuid:r,defined:s,Math:l,Ray:u}=Cesium,{viewer:d}=c;return D.value.forEach((u=>{var p,m,v,h,g,f,y,C,w,O,x,_,E,P,T,M,I,j,L;const A=u.positions[0],D=u.positions[1];if(i.equals(A,D))return;const k=b([]),R=0===(null==(p=t.polylineOpts)?void 0:p.arcType)?i.distance(A,D):Ne(A,D,c.viewer.scene.globe.ellipsoid),V=i.midpoint(A,D,{}),z=We(A,D),F=Ge(A,D);u.points=u.positions.map((e=>({position:e})));const H={...u,distance:R,heading:z,pitch:F},U=Object.assign({},t.labelOpts,H.labelOpts);if("VcDrawingRectangle"===a||"VcMeasurementRectangle"===a){const e=n.fromCartesian(A,d.scene.globe.ellipsoid),a=n.fromCartesian(D,d.scene.globe.ellipsoid),r=e.height;!t.clampToGround&&(a.height=r);const s=o.fromCartesianArray(u.positions,d.scene.globe.ellipsoid),l=[s.west,s.north,r,s.east,s.north,r,s.east,s.south,r,s.west,s.south,r,s.west,s.north,r],c=i.fromRadiansArrayHeights(l,d.scene.globe.ellipsoid);Object.assign(H,{polygonPositions:c,height:r})}else if("VcDrawingRegular"===a||"VcMeasurementRegular"===a){const e=u.positions[0],i=u.positions[1],o=function(e,t,i,n){const{Cartesian3:o}=Cesium;if(o.equals(e,t))return;const a=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),r=Cesium.Cartesian3.normalize(a,new Cesium.Cartesian3),s=Cesium.Transforms.rotationMatrixFromPositionVelocity(e,r,i.globe.ellipsoid),l=Cesium.Matrix4.fromRotationTranslation(s,e),c=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Matrix4.getTranslation(l,new Cesium.Cartesian3),Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),u=Cesium.Matrix4.multiply(Cesium.Matrix4.inverse(c,new Cesium.Matrix4),l,new Cesium.Matrix4),d=Cesium.Matrix4.getMatrix3(u,new Cesium.Matrix3),p=Cesium.Quaternion.fromRotationMatrix(d);return Cesium.HeadingPitchRoll.fromQuaternion(p)}(e,i,d.scene);if(!N(o)&&s(o)){const a=[],r=n.fromCartesian(e,d.scene.globe.ellipsoid),s=n.fromCartesian(i,d.scene.globe.ellipsoid);!t.clampToGround&&(s.height=r.height),a.push(n.toCartesian(s,d.scene.globe.ellipsoid));for(let i=0;i<(t.edge||4)-1;i++){const i=Ve(e,o.heading+=2*Math.PI/(t.edge||4),R,d.scene.globe.ellipsoid);a.push(i)}Object.assign(H,{polygonPositions:a,height:r.height})}}else if("VcAnalysisViewshed"===a)Object.assign(H.viewshedOpts,{startPosition:A,endPosition:D});else if("VcAnalysisSightline"===a)if("segment"===t.sightlineType){const e=[];e.push(A);const t=[];S.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&t.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&t.push(e)}));const n=$e(A,D,c.viewer,t);s(n)&&e.push(n),e.push(D);let o=0;for(let a=0;a<e.length-1;a++){o+=i.distance(e[a],e[a+1])}Object.assign(H,{positions:e,distance:o})}else t.sightlineType;else k.push({position:V,id:r(),text:Xo.distanceToString(R,null==(m=t.measureUnits)?void 0:m.distanceUnits,t.locale,null==(v=t.decimals)?void 0:v.distance),...U});if(H.polygonPositions&&H.polygonPositions.length){const e=Object.assign({},t.labelsOpts,H.labelsOpts),n=H.polygonPositions.slice();t.loop&&n.length>2&&n.push(n[0]);for(let a=0;a<n.length-1;a++){let o=0;if(o=0===(null==(h=t.polylineOpts)?void 0:h.arcType)?Ne(n[a],n[a+1],c.viewer.scene.globe.ellipsoid):i.distance(n[a],n[a+1]),o>0&&n.length>2&&t.showDistanceLabel&&k.push({text:Xo.distanceToString(o,null==(g=t.measureUnits)?void 0:g.distanceUnits,t.locale,null==(f=t.decimals)?void 0:f.distance),position:i.midpoint(n[a],n[a+1],{}),id:r(),...e}),n.length>2&&t.showAngleLabel&&(a>0||t.loop)){const o=n[0===a?n.length-2:a-1],s=n[a],l=n[a+1],c=i.subtract(o,s,{}),u=i.subtract(l,s,{});let d=0;i.ZERO.equals(c)||i.ZERO.equals(u)||(d=i.angleBetween(c,u)),k.push({text:Xo.angleToString(d,null==(y=t.measureUnits)?void 0:y.angleUnits,t.locale,null==(C=t.decimals)?void 0:C.angle),position:s,id:r(),...e})}}const o=ze(n);t.showLabel&&k.push({text:Xo.areaToString(o,null==(w=t.measureUnits)?void 0:w.areaUnits,t.locale,null==(O=t.decimals)?void 0:O.area),position:u.positions[0],id:r(),...U})}t.showComponentLines&&(Object.assign(H,{xyPolylinePositions:[new i,new i,new i],xyBoxPositions:[new i,new i,new i],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),B(H),k.push({position:H.xLabelPosition,id:r(),text:Xo.distanceToString(H.xDistance||0,null==(x=t.measureUnits)?void 0:x.distanceUnits,t.locale,null==(_=t.decimals)?void 0:_.distance),...t.xLabelOpts}),k.push({position:H.yLabelPosition,id:r(),text:Xo.distanceToString(H.yDistance||0,null==(E=t.measureUnits)?void 0:E.distanceUnits,t.locale,null==(P=t.decimals)?void 0:P.distance),...t.yLabelOpts}),k.push({position:H.xAnglePosition,id:r(),text:Xo.angleToString(H.xAngle||0,null==(T=t.measureUnits)?void 0:T.angleUnits,t.locale,null==(M=t.decimals)?void 0:M.angle),...t.xAngleLabelOpts}),k.push({position:H.yAnglePosition,id:r(),text:Xo.angleToString(H.yAngle||0,null==(I=t.measureUnits)?void 0:I.angleUnits,t.locale,null==(j=t.decimals)?void 0:j.angle),...t.yAngleLabelOpts})),Object.assign(H,{labels:k}),H.positionsDegreesArray=H.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]})),(null==(L=null==H?void 0:H.polygonPositions)?void 0:L.length)&&(H.polygonPositionsDegreesArray=H.polygonPositions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]}))),e.push(H)})),e}));r.createCesiumObject=async()=>S,r.mount=async()=>{const{viewer:e}=c;return t.autoUpdateLabelPosition&&("VcMeasurementDistance"===a&&e.scene.preRender.addEventListener(z),("VcMeasurementRegular"===a||"VcMeasurementRectangle"===a||"VcDrawingRegular"===a||"VcDrawingRectangle"===a)&&e.scene.preRender.addEventListener(V)),!0},r.unmount=async()=>{const{viewer:e}=c;return t.autoUpdateLabelPosition&&("VcMeasurementDistance"===a&&e.scene.preRender.removeEventListener(z),("VcMeasurementRegular"===a||"VcMeasurementRectangle"===a||"VcDrawingRegular"===a||"VcDrawingRectangle"===a)&&e.scene.preRender.removeEventListener(V)),!0};const B=e=>{const{Cartesian3:t,Math:i,defined:n}=Cesium,{viewer:o}=c,a=o.scene.frameState.mapProjection.ellipsoid,r=e.positions[0],s=e.positions[1],l=a.cartesianToCartographic(r,{});if(!n(l))return;const u=a.cartesianToCartographic(s,{}),d=l.height,p=u.height;let m,v,h,g;d<p?(m=r,v=s,g=p,h=d):(m=s,v=r,g=d,h=p);const f=e.xyPolylinePositions;if(void 0===f)return;f[0]=m,f[2]=v;let y=a.geodeticSurfaceNormal(m,{});y=t.multiplyByScalar(y,g-h,y);const b=t.add(m,y,f[1]);if(!t.equalsEpsilon(b,v,i.EPSILON10)||!t.equalsEpsilon(b,m,i.EPSILON10)){let i=t.subtract(v,b,{}),n=t.subtract(m,b,{});const o=Math.min(t.magnitude(i),t.magnitude(n)),a=15<o?.15*o:.25*o;i=t.normalize(i,i),n=t.normalize(n,n),i=t.multiplyByScalar(i,a,i),n=t.multiplyByScalar(n,a,n);const r=e.xyBoxPositions;if(void 0===r)return;t.add(b,i,r[0]),t.add(r[0],n,r[1]),t.add(b,n,r[2]),e.xLabelPosition=t.midpoint(b,v,{}),e.yLabelPosition=t.midpoint(m,b,{}),e.xAnglePosition=v,e.yAnglePosition=m;const s=t.subtract(b,v,{}),l=t.subtract(b,m,{});let c=t.subtract(v,m,{});e.yAngle=t.angleBetween(l,c),c=t.negate(c,c),e.xAngle=t.angleBetween(s,c),e.xDistance=t.magnitude(s),e.yDistance=t.magnitude(l)}},V=()=>{R.value.forEach(((e,t)=>{var i;const n=e.polygonPositions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:r,HorizontalOrigin:s}=Cesium,{viewer:l}=c,u=l.scene;let d=e.positions[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?r.clone(p,{}):r.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=S.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];if(!g)return;for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x),o=h[t-1];o&&o!==g&&(o.horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=r.clone(i,m)}e.drawStatus===Wo&&(g.position=d)}}}))},z=()=>{R.value.forEach(((e,i)=>{var n,o,a;const{defined:r,SceneTransforms:s,HorizontalOrigin:l}=Cesium,{viewer:u}=c,d=u.scene,p=null==(n=S.value)?void 0:n.cesiumObject,m=e.positions,v=m[0],h=m[1],g=s.wgs84ToWindowCoordinates(d,v,{}),f=s.wgs84ToWindowCoordinates(d,h,{});if(r(g)&&r(f)){const e=p._primitives.filter((e=>e instanceof Cesium.LabelCollection));if(e.length){const n=e[i].get(0);let r,s,c,u;t.showComponentLines&&(r=e[i].get(2),s=e[i].get(3),c=Oe(null==(o=t.yLabelOpts)?void 0:o.pixelOffset),u=Oe(null==(a=t.xAngleLabelOpts)?void 0:a.pixelOffset)),(g.y-f.y)/(f.x-g.x)>0?(N(r)||N(c)||(c.x=-9,r.pixelOffset=c,r.horizontalOrigin=l.RIGHT),N(s)||N(u)||(u.x=12,s.pixelOffset=u,s.horizontalOrigin=l.LEFT),n.horizontalOrigin=l.LEFT):(N(r)||N(c)||(c.x=9,r.pixelOffset=c,r.horizontalOrigin=l.LEFT),N(s)||N(u)||(u.x=-12,s.pixelOffset=u,s.horizontalOrigin=l.RIGHT),n.horizontalOrigin=l.RIGHT)}}}))},F=(e,t)=>{const{defined:i,defaultValue:n,Cartesian3:o}=Cesium,{viewer:a}=c,r=a.scene,s=e.positions;s[0]=t;const l=r.frameState.mapProjection.ellipsoid,u=l.cartesianToCartographic(t,{}),d=r.globe;u.height=i(d)?n(d.getHeight(u),0):0,s[1]=l.cartographicToCartesian(u,{}),e.distance=o.distance(s[0],s[1]),e.labelPosition=o.midpoint(s[0],s[1],{})},H=()=>{const{Cartesian3:e,Plane:t}=Cesium,i={positions:[new e,new e],show:!1,drawStatus:Ho,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===a&&Object.assign(i,{draggingPlane:new t(e.UNIT_X,0),surfaceNormal:new e}),D.value.push(i),v.value=Ho,h.value=!0,p.value=m.value.drawingTipStart},U=(e=!0)=>{e&&v.value===Uo&&D.value.pop();const t=x.value?x.value._vcPolylineIndx:D.value.length-1,i=D.value[t];i&&(i.drawStatus=Wo),v.value=Wo,h.value=!1,g.value=[0,0,0]},W=e=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!t.editable)return;_.value=e;const{viewer:a,drawingFabInstance:r}=c;if("move"===e){p.value=m.value.drawingTipEditing,v.value=Uo,x.value=C.value,k=D.value[x.value._vcPolylineIndx].positions[x.value._index],h.value=!0;(null==r?void 0:r.proxy).editingActionName=d}else if("remove"===e){const e=C.value._vcPolylineIndx;D.value[e].positions.splice(C.value._index,1)}else if("removeAll"===e){const e=C.value._vcPolylineIndx;D.value.splice(e,1)}else{const a=C.value._vcPolylineIndx,r=D.value[a];null==(o=null==(n=null==(i=t.editorOpts)?void 0:i[e])?void 0:n.callback)||o.call(n,a,r)}u("editorEvt",{type:e,renderDatas:D,name:d,index:C.value._vcPolylineIndx},a)},G={computedRenderDatas:R,renderDatas:D,startNew:H,stop:U,clear:()=>{D.value=[],U()},handleMouseClick:(e,i)=>{var n;const{viewer:o,drawingFabInstance:r,selectedDrawingActionInstance:s,getWorldPosition:l}=c,f=null==r?void 0:r.proxy;if(2===i.button&&i.ctrl){const t=f.getDrawingActionInstance(d);return f.toggleAction(t),void w((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:e,type:"cancel"},o)}))}v.value===Wo&&H();const y=x.value?x.value._vcPolylineIndx:D.value.length-1,b=D.value[y],C=b.positions;if(2===i.button&&x.value)return f.editingActionName=void 0,b.positions[x.value._index]=k,v.value=Wo,b.drawStatus=Wo,x.value=void 0,p.value=m.value.drawingTipStart,"VcMeasurementHeight"===a&&F(b,k),void w((()=>{u("drawEvt",Object.assign({name:d,index:y,renderDatas:D,finished:!0,windowPoistion:e,type:"cancel"},R.value[y]),o)}));if(0!==i.button)return;const{defined:O}=Cesium;let S,E="new",P=!1;const T=o.scene;if(v.value===Ho){const i=l(T,e,{});if(!O(i))return;if(C[0]=i,C[1]=i,b.show=!0,v.value=Uo,b.drawStatus=Uo,p.value=m.value.drawingTipEnd,S=i,P=!1,"VcMeasurementVertical"===a){const e=T.frameState.mapProjection.ellipsoid;b.surfaceNormal=e.geodeticSurfaceNormal(i,b.surfaceNormal)}"VcMeasurementHeight"===a&&(F(b,i),P=!0,b.drawStatus=Wo,v.value=Wo,p.value=m.value.drawingTipStart,1===t.mode&&f.toggleAction(s)),"VcAnalysisViewshed"===a&&(b.viewshedOpts={...t.viewshedOpts})}else{if(b.drawStatus=Wo,v.value=Wo,x.value){if(!0===bo().hasTouch){const i=l(T,e,{});if(O(i)){b.positions.splice(x.value._index,1,i),x.value.pixelSize=1*(null==(n=t.pointOpts)?void 0:n.pixelSize)}}x.value=void 0,f.editingActionName=void 0,h.value=!1,g.value=[0,0,0],E=_.value,s&&(p.value=m.value.drawingTipStart,h.value=!0)}else{if(!0===bo().hasTouch){const t=l(T,e,{});if(O(t)){b.positions[1]=t}}1===t.mode&&f.toggleAction(s)}P=!0,S=b.positions[1]}w((()=>{u("drawEvt",Object.assign({index:y,renderDatas:D,name:d,finished:P,position:S,windowPoistion:e,type:E},R.value[y]),o)}))},handleMouseMove:e=>{const{viewer:i,getWorldPosition:n}=c,o=i.scene,r=n(o,e,{}),{defined:s,Cartographic:l}=Cesium;if(!s(r))return;if(g.value=r,v.value!==Uo)return;if("VcMeasurementVertical"===a&&o.mode===Cesium.SceneMode.SCENE2D)return;const p=x.value?x.value._vcPolylineIndx:D.value.length-1,m=D.value[p];if("VcMeasurementVertical"===a){const t=((e,t)=>{const{defined:i,SceneMode:n,Cartesian3:o,IntersectionTests:a,Plane:r,SceneTransforms:s,Ray:l}=Cesium,{viewer:u}=c,d=u.scene,p=d.camera,m=p.direction,v=d.frameState.mapProjection.ellipsoid,h=e.positions,g=h[0];let f=g,y=h[1],b=e.draggingPlane,C=e.surfaceNormal,w=C;if(d.mode===n.COLUMBUS_VIEW){w=o.UNIT_X;const e=v.cartesianToCartographic(g,{});f=d.mapProjection.project(e,{}),o.fromElements(f.z,f.x,f.y,f)}let O=o.cross(w,m,{});O=o.cross(w,O,O),O=o.normalize(O,O),b=r.fromPointNormal(f,O,b);const x=p.getPickRay(t,new l);if(y=a.rayPlane(x,b,{}),i(y)){if(d.mode===n.COLUMBUS_VIEW){y=o.fromElements(y.y,y.z,y.x,y);const e=d.mapProjection.unproject(y,{});y=v.cartographicToCartesian(e,y)}s.wgs84ToWindowCoordinates(d,h[0],{}).y<t.y&&(C=o.negate(C,{}));let e=o.subtract(y,g,{});return e=o.projectVector(e,C,e),y=o.add(g,e,y),y}})(m,e);if(!N(t)){const e=m.positions.slice();e[x.value?x.value._index:1]=t,m.positions=e}}else if("VcMeasurementHeight"===a)F(m,r);else if("VcDrawingRectangle"===a||"VcDrawingRegular"===a||"VcMeasurementRegular"===a||"VcMeasurementRectangle"===a){const e=m.positions,n=e[0],o=l.fromCartesian(n,i.scene.globe.ellipsoid),a=l.fromCartesian(r,i.scene.globe.ellipsoid);!t.clampToGround&&(a.height=o.height),e[x.value?x.value._index:1]=l.toCartesian(a,i.scene.globe.ellipsoid)}else if("VcAnalysisSightline"===a){const e=m.positions;if(x.value){e[x.value._index>0?1:0]=r}else e[1]=r}else{const e=m.positions.slice();e[x.value?x.value._index:1]=r,m.positions=e}w((()=>{u("drawEvt",Object.assign({index:p,renderDatas:D,name:d,finished:!1,position:m.positions[1],windowPoistion:e,type:x.value?_:"new"},R.value[p]),i)}))}};return Object.assign(r.proxy,G),()=>{var e,i,n;const{createGuid:o}=Cesium,r=[];if(R.value.forEach(((e,i)=>{var n;const s="VcDrawingRectangle"===a||"VcDrawingRegular"===a||"VcMeasurementRegular"===a||"VcMeasurementRectangle"===a,l=s?null==(n=e.polygonPositions)?void 0:n.slice():e.positions;s&&(null==l||l.push(l[0]));const c=Object.assign({},t.polylineOpts,e.polylineOpts);t.clampToGround&&delete c.arcType;const u=Object.assign({},t.primitiveOpts,e.primitiveOpts);if((null==l?void 0:l.length)&&(null==l?void 0:l.length)>1&&(r.push(O(t.clampToGround?Kc:tu,{...u,show:e.show&&u.show||t.editable||e.drawStatus===Uo,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=i}},(()=>O(Qu,{id:o()},(()=>O(t.clampToGround?Gd:Xd,{positions:l,...c})))))),"VcAnalysisViewshed"===a&&r.push(O(ou,{...e.viewshedOpts}))),e.polygonPositions&&e.polygonPositions.length>2){const n=Object.assign({},null==t?void 0:t.polygonOpts,null==e?void 0:e.polygonOpts);n.clampToGround=t.clampToGround,r.push(O(Yu,{positions:l,show:e.show&&(null==n?void 0:n.show),...n,onReady:e=>{var t;A(e),null==(t=null==n?void 0:n.onReady)||t.call(n,e),e.cesiumObject._vcPolylineIndex=i}}))}e.xyPolylinePositions&&e.xyPolylinePositions.length>1&&r.push(O(tu,{show:e.show&&u||t.editable||e.drawStatus===Uo,...u,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=i}},(()=>O(Qu,{id:o()},(()=>O(Xd,{positions:e.xyPolylinePositions,...c})))))),e.xyBoxPositions&&e.xyBoxPositions.length>1&&r.push(O(tu,{show:e.show&&u||t.editable||e.drawStatus===Uo,...u},(()=>O(Qu,{id:o()},(()=>O(Xd,{positions:e.xyBoxPositions,...c}))))));const d=Object.assign({},t.pointOpts,e.pointOpts);r.push(O(zu,{enableMouseEvent:t.enableMouseEvent,show:e.show,points:e.points.map(((n,r)=>{const s=n.position,l=Object.assign({},d,n);return{position:s,id:o(),_vcPolylineIndx:i,...l,show:((null==l?void 0:l.show)||t.editable||e.drawStatus===Uo)&&("VcAnalysisSightline"!==a||3!==e.positions.length||1!==r)}})),onMouseover:E,onMouseout:P,onReady:j})),r.push(O(Vu,{enableMouseEvent:t.enableMouseEvent,show:e.show,labels:e.labels,onReady:L}))})),(null==(e=t.drawtip)?void 0:e.show)&&h.value){const{viewer:e}=c;r.push(O(Cu,{position:g.value,pixelOffset:null==(i=t.drawtip)?void 0:i.pixelOffset,teleport:{to:e.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const e=[];if(C.value){const i=t.editorOpts;for(const t in i)if(!Array.isArray(i[t])&&"number"!=typeof i[t]){const n={...i[t]};delete n.color,e.push(O(Yr,{style:{color:i[t].color,background:i[t].background},...n,onclick:W.bind(void 0,t)},(()=>O(ls,{...i[t].tooltip},(()=>{var e;return O("strong",null,(null==(e=i[t].tooltip)?void 0:e.tip)||l(`vc.measurement.editor.${t}`))})))))}}const{viewer:i}=c;r.push(O(Cu,{position:y.value,pixelOffset:null==(n=t.editorOpts)?void 0:n.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},e))))}return O(Hu,{ref:S,show:t.show,onReady:I},(()=>r))}}var lp=S({name:"VcMeasurementDistance",props:{...cc,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcMeasurementDistance")});function cp(t,n,a){const r=o(),s=Kn(t,n,r);if(void 0===s)return;const{t:l}=Yn(),c=s.$services,{emit:u}=n,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=rp(t,n,r,a,c);let D,k;const R=e([]);t.preRenderDatas&&t.preRenderDatas.length&&t.preRenderDatas.forEach((e=>{const i={show:!0,positions:Se(e),tempPositions:[],drawStatus:Wo,loop:t.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};R.value.push(i)}));const B=i((()=>{const{Cartesian3:e,createGuid:i,defined:n,Math:o}=Cesium,r=[],{viewer:s}=c;return R.value.forEach(((l,u)=>{var d,p,m,v,h,g,f,y,C;const w=b([]),O=[],x=[];let _=0;const E=[];l.points=l.positions.map((e=>({position:e})));const P=l.positions.slice();if("VcAnalysisSightline"===a){const t=P.shift(),i=P;t&&i.forEach((i=>{const o=[];o.push(t);const a=[];S.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&a.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&a.push(e)}));const s=$e(t,i,c.viewer,a);n(s)&&o.push(s),o.push(i);let u=0;const d=[];for(let t=0;t<o.length-1;t++){const i=e.distance(o[t],o[t+1]);d.push(i),u+=i}r.push({...l,positions:o,distance:u,distances:d})}))}else{t.loop&&P.length>2&&P.push(P[0]);for(let o=0;o<P.length-1;o++){let n=0;n=0===(null==(d=t.polylineOpts)?void 0:d.arcType)?Ne(P[o],P[o+1],c.viewer.scene.globe.ellipsoid):e.distance(P[o],P[o+1]),O.push(n),_+=n;const a=Object.assign({},t.labelsOpts,l.labelsOpts);if(n>0&&P.length>2&&t.showDistanceLabel&&w.push({text:Xo.distanceToString(n,null==(p=t.measureUnits)?void 0:p.distanceUnits,t.locale,null==(m=t.decimals)?void 0:m.distance),position:e.midpoint(P[o],P[o+1],{}),id:i(),...a}),P.length>2&&t.showAngleLabel&&(o>0||t.loop)){const n=P[0===o?P.length-2:o-1],r=P[o],s=P[o+1],l=e.subtract(n,r,{}),c=e.subtract(s,r,{});let u=0;e.ZERO.equals(l)||e.ZERO.equals(c)||(u=e.angleBetween(l,c)),x.push(u),w.push({text:Xo.angleToString(u,null==(v=t.measureUnits)?void 0:v.angleUnits,t.locale,null==(h=t.decimals)?void 0:h.angle),position:r,id:i(),...a})}t.showDashedLine&&(E.push({positions:[P[o],N(P[o])]}),o===P.length-2&&E.push({positions:[P[o+1],N(P[o+1])]}))}const n=ze(P),u=Object.assign({},t.labelOpts,l.labelOpts);t.showLabel&&(a.includes("Area")?w.push({text:Xo.areaToString(n,null==(g=t.measureUnits)?void 0:g.areaUnits,t.locale,null==(f=t.decimals)?void 0:f.area),position:P[P.length-1],id:i(),...u}):w.push({text:Xo.distanceToString(_,null==(y=t.measureUnits)?void 0:y.distanceUnits,t.locale,null==(C=t.decimals)?void 0:C.distance),position:P[P.length-1],id:i(),...u})),l.positionsDegreesArray=l.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,s.scene.globe.ellipsoid);return[o.toDegrees(t.longitude),o.toDegrees(t.latitude),t.height]})),r.push({...l,labels:w,distance:_,distances:O,area:n,angles:x,dashedLines:E})}})),r}));r.mount=async()=>{const{viewer:e}=c;return t.autoUpdateLabelPosition&&e.scene.preRender.addEventListener(V),!0},r.unmount=async()=>{const{viewer:e}=c;return t.autoUpdateLabelPosition&&e.scene.preRender.removeEventListener(V),!0};const N=e=>{const{defined:t,defaultValue:i}=Cesium,{viewer:n}=c,o=n.scene,a=o.globe,r=o.frameState.mapProjection.ellipsoid,s=r.cartesianToCartographic(e);return s.height=t(a)?i(a.getHeight(s),0):0,r.cartographicToCartesian(s)},V=()=>{B.value.forEach(((e,t)=>{var i;const n=e.positions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:r,HorizontalOrigin:s}=Cesium,{viewer:l}=c,u=l.scene;let d=n[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?r.clone(p,{}):r.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=S.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x);h[t-1]!==g&&(h[t-1].horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=r.clone(i,m)}e.drawStatus===Wo&&(g.position=d)}}}))},z=()=>{const e={show:!1,positions:[],tempPositions:[],drawStatus:Ho,loop:t.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if("VcMeasurementHorizontal"===a){const{Cartesian3:t,Plane:i}=Cesium;Object.assign(e,{dashedLines:[],heightPlane:new i(t.UNIT_X,0),heightPlaneCV:new i(t.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new t})}v.value=Ho,R.value.push(e),h.value=!0,p.value=m.value.drawingTipStart},F=(e=!0)=>{e&&v.value===Uo&&R.value.pop();const t=x.value?x.value._vcPolylineIndex:R.value.length-1,i=R.value[t];i&&(i.positions=i.tempPositions,i.drawStatus=Wo),v.value=Wo,h.value=!1,g.value=[0,0,0]},H=(e,t)=>{const{viewer:i,getWorldPosition:n}=c,o=i.scene,r=n(o,e,{}),{defined:s}=Cesium;if(!s(r))return;if(g.value=r,v.value!==Uo)return;const l=x.value?x.value._vcPolylineIndex:R.value.length-1,h=R.value[l];let f="new";if("VcMeasurementHorizontal"===a){const{SceneMode:i,IntersectionTests:n,Cartesian3:a}=Cesium,r=o.frameState.mapProjection.ellipsoid,l=h.positions,c=o.camera.getPickRay(e);let u,d;if(o.mode===i.SCENE3D&&h.heightPlane)u=n.rayPlane(c,h.heightPlane);else if(o.mode===i.COLUMBUS_VIEW&&h.heightPlaneCV)u=n.rayPlane(c,h.heightPlaneCV),u=a.fromElements(u.y,u.z,u.x,u),d=o.mapProjection.unproject(u),u=r.cartographicToCartesian(d);else if(u=o.camera.pickEllipsoid(e,r),s(u)){const e=r.cartesianToCartographic(u);e.height=h.height||0,u=r.cartographicToCartesian(e,u)}if(!s(u))return;if(!h.firstMove&&(null==t?void 0:t.shift)){const e=l[l.length-2],t=h.tempNextPos,i=a.subtract(t,e,{});let n=a.subtract(u,e,{});n=a.projectVector(n,i,n),u=a.add(e,n,u)}if(x.value){h.positions.splice(x.value._index,1,u),f=_.value}else{const e=h.tempPositions.slice();e.push(u),h.positions=e,h.firstMove=!1,h.tempNextPos=Object.assign(u),p.value=m.value.drawingTipEnd}}else if(x.value){h.positions.splice(x.value._index,1,r),f=_.value}else{const e=h.tempPositions.slice();e.push(r),h.positions=e}w((()=>{u("drawEvt",Object.assign({index:l,name:d,renderDatas:R,finished:!1,position:"VcMeasurementHorizontal"===a?h.positions[h.positions.length-1]:r,windowPoistion:e,type:f},B.value[l]),i)}))},U=e=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!t.editable)return;const{viewer:r,drawingFabInstance:s}=c,l=null==s?void 0:s.proxy;if(_.value=e,"move"===e){p.value=m.value.drawingTipEditing,v.value=Uo,x.value=C.value,h.value=!0;const e=(()=>{let e=x.value._vcPolylineIndex,t=x.value._index;if("VcAnalysisSightline"===a)for(let i=0;i<R.value.length;i++){const n=R.value[i];for(let o=0;o<n.positions.length;o++){const a=n.positions[o];x.value.position.equals(a)&&(e=i,t=o)}}return[e,t]})();x.value._vcPolylineIndex=e[0],x.value._index=e[1],k=R.value[e[0]].positions[e[1]],l.editingActionName=d}else if("insert"===e){const e=C.value._vcPolylineIndex;R.value[e].positions.splice(C.value._index,0,C.value.position),x.value=C.value,h.value=!0,v.value=Uo,p.value=m.value.drawingTipEditing,l.editingActionName=d}else if("remove"===e){const e=C.value._vcPolylineIndex,t=R.value[e];t.positions.length>2&&t.positions.splice(C.value._index,1)}else if("removeAll"===e){const e=C.value._vcPolylineIndex;R.value.splice(e,1)}else{const a=C.value._vcPolylineIndex,r=R.value[a];null==(o=null==(n=null==(i=t.editorOpts)?void 0:i[e])?void 0:n.callback)||o.call(n,a,r)}u("editorEvt",{type:e,renderDatas:R,name:d,index:C.value._vcPolylineIndex},r)},W={computedRenderDatas:B,renderDatas:R,startNew:z,stop:F,clear:()=>{R.value=[],F()},handleMouseClick:(e,i)=>{var n;const{viewer:o,drawingFabInstance:r,getWorldPosition:s,selectedDrawingActionInstance:l}=c,g=null==r?void 0:r.proxy;if(2===i.button&&i.ctrl){const t=g.getDrawingActionInstance(d);return g.toggleAction(t),void w((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:e,type:"cancel"},o)}))}v.value===Wo&&z();const{defined:f,Cartesian2:y,Plane:b,Cartesian3:C}=Cesium,O=x.value?x.value._vcPolylineIndex:R.value.length-1,S=R.value[O],E=S.tempPositions;if(2===i.button&&x.value)return"insert"===_.value?S.positions.splice(x.value._index,1):S.positions[x.value._index]=k,v.value=Wo,S.drawStatus=Wo,x.value=void 0,p.value=m.value.drawingTipStart,g.editingActionName=void 0,h.value=f(l),void w((()=>{u("drawEvt",Object.assign({index:O,name:d,renderDatas:R,finished:!0,windowPoistion:e,type:"cancel"},B.value[O]),o)}));if(D=D||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.magnitude(y.subtract(D,e,{}))<10)return;if(2===i.button&&v.value===Uo&&E.length>1&&(E.pop(),H(e)),0!==i.button)return;const P=o.scene,T=s(P,e,{});if(!f(T))return;let M=!1,I="new";if("VcMeasurementHorizontal"===a){if(x.value)v.value=Wo,x.value=void 0,M=!0,I=_.value,p.value=m.value.drawingTipStart;else if(0===E.length){const e=P.frameState.mapProjection.ellipsoid;E.push(T),S.positions=E,S.heightPlane=b.fromPointNormal(T,e.geodeticSurfaceNormal(T,{}),S.heightPlane);const t=e.cartesianToCartographic(T,{}),i=P.mapProjection.project(t,{}),n=C.fromElements(i.z,i.x,i.y,i);S.heightPlaneCV=b.fromPointNormal(n,C.UNIT_X,S.heightPlaneCV),S.height=t.height,S.firstMove=!0,S.drawStatus=Uo,S.show=!0,v.value=Uo}else E.push(S.tempNextPos),S.positions=E,S.firstMove=!0;p.value=m.value.drawingTipEnd}else{if(x.value){if(!0===bo().hasTouch){const i=s(P,e,{});if(f(i)){S.positions.splice(x.value._index,1,i),x.value.pixelSize=1*(null==(n=t.pointOpts)?void 0:n.pixelSize)}}v.value=Wo,x.value=void 0,M=!0,I=_.value,p.value=m.value.drawingTipStart}else E.push(T),S.positions=E,S.show=!0,S.drawStatus=Uo,v.value=Uo,h.value=!0,p.value=m.value.drawingTipEnd;"new"!==I&&(g.editingActionName=void 0,h.value=f(l))}y.clone(e,D),w((()=>{u("drawEvt",Object.assign({index:O,name:d,renderDatas:R,finished:M,position:"VcMeasurementHorizontal"===a?S.positions[S.positions.length-1]:T,windowPoistion:e,type:I},B.value[O]),o)}))},handleMouseMove:H,handleDoubleClick:e=>{const{drawingFabInstance:i,selectedDrawingActionInstance:n,viewer:o}=c;if(v.value===Uo){const a=x.value?x.value._vcPolylineIndex:R.value.length-1,r=R.value[a];F(!1),p.value=m.value.drawingTipStart,w((()=>{if(u("drawEvt",Object.assign({index:a,name:d,renderDatas:R,finished:!0,position:r.positions[r.positions.length-1],windowPoistion:e,type:"new"},B.value[a]),o),1===t.mode){(null==i?void 0:i.proxy).toggleAction(n)}}))}}};return Object.assign(r.proxy,W),()=>{var e,i;const{createGuid:n,Cartesian3:o}=Cesium,r=[],s=[];if(B.value.forEach(((e,i)=>{var l,c;const u=e.positions.slice();if(u.length>1){e.loop&&u.push(u[0]);const o=Object.assign({},t.polylineOpts,e.polylineOpts);t.clampToGround&&delete o.arcType;const a=Object.assign({},t.primitiveOpts,e.primitiveOpts);r.push(O(t.clampToGround?Kc:tu,{show:e.show&&a.show||t.editable||e.drawStatus===Uo,...a,onReady:e=>{var t;null==(t=null==a?void 0:a.onReady)||t.call(a,e),e.cesiumObject._vcPolylineIndex=i}},(()=>O(Qu,{id:n()},(()=>O(t.clampToGround?Gd:Xd,{positions:u,...o}))))))}const d=Object.assign({},t.dashLineOpts,e.dashLineOpts),p=Object.assign({},t.dashLinePrimitiveOpts,e.dashLinePrimitiveOpts);null==(l=e.dashedLines)||l.forEach((i=>{r.push(O(tu,{show:e.show&&t.dashLinePrimitiveOpts.show||t.editable||e.drawStatus===Uo,...p},(()=>O(Qu,{id:n()},(()=>O(Xd,{positions:i.positions,...d}))))))}));const m=Object.assign({},t.pointOpts,e.pointOpts);if(r.push(O(zu,{enableMouseEvent:t.enableMouseEvent,show:e.show,points:e.points.map(((r,l)=>{var c;const u=r.position;let d=!1;for(let e=0;e<s.length;e++)o.equals(u,s[e])&&(d=!0);const p=((null==(c=t.pointOpts)?void 0:c.show)||t.editable||e.drawStatus===Uo)&&("VcAnalysisSightline"!==a||3!==e.positions.length||1!==l)&&!d;"VcAnalysisSightline"===a&&s.push(u);const v=Object.assign({},m,r);return{position:u,id:n(),_vcPolylineIndex:i,show:p,...v}})),onMouseover:E,onMouseout:P,onReady:j})),r.push(O(Vu,{enableMouseEvent:t.enableMouseEvent,show:e.show,labels:e.labels,onReady:L})),u.length>2&&(a.includes("Polygon")||a.includes("Area"))){const n=Object.assign({},t.polygonOpts,e.polygonOpts);r.push(O(Yu,{positions:u,clampToGround:t.clampToGround,show:e.show&&(null==(c=t.polygonOpts)?void 0:c.show),...n,onReady:e=>{var t;A(e),null==(t=null==n?void 0:n.onReady)||t.call(n,e),e.cesiumObject._vcPolylineIndex=i}}))}})),(null==(e=t.drawtip)?void 0:e.show)&&h.value){const{viewer:e}=c;r.push(O(Cu,{position:g.value,pixelOffset:t.drawtip.pixelOffset,teleport:{to:e.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const e=[];if(C.value){const i=t.editorOpts;for(const t in i)if(!Array.isArray(i[t])&&"number"!=typeof i[t]){const n={...i[t]};delete n.color,e.push(O(Yr,{style:{color:i[t].color,background:i[t].background},...n,onclick:U.bind("polyline",t)},(()=>O(ls,{...i[t].tooltip},(()=>{var e;return O("strong",null,(null==(e=i[t].tooltip)?void 0:e.tip)||l(`vc.drawing.editor.${t}`))})))))}}const{viewer:n}=c;r.push(O(Cu,{position:y.value,pixelOffset:null==(i=t.editorOpts)?void 0:i.pixelOffset,teleport:{to:n.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},e))))}return O(Hu,{ref:S,show:t.show,onReady:I},(()=>r))}}var up=S({name:"VcMeasurementPolyline",props:{...cc,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>cp(e,t,"VcMeasurementPolyline")}),dp=S({name:"VcMeasurementHorizontal",props:{...cc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>cp(e,t,"VcMeasurementHorizontal")}),pp=S({name:"VcMeasurementVertical",props:{...cc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcMeasurementVertical")}),mp=S({name:"VcMeasurementHeight",props:{...cc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcMeasurementHeight")});function vp(t,i,n){const a=o(),r=Kn(t,i,a);if(void 0===r)return;const{t:s}=Yn(),l=r.$services,{emit:c}=i,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:g,showEditor:y,editorPosition:b,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L}=rp(t,i,a,n,l),A=e([]);let D,k=[];"VcDrawingPin"===n&&""===t.billboardOpts.image&&(t.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),k.push(f((()=>t.editable),(e=>{const{drawingFabInstance:t,selectedDrawingActionInstance:i}=l;if(e&&(null==i?void 0:i.name)===u){(null==t?void 0:t.proxy).toggleAction(i)}})));const R=(e,t,i)=>{const n=Cesium.Cartographic.fromCartesian(e,i.globe.ellipsoid),o=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height];t.positionDegrees=o},B=()=>{const{Cartesian3:e}=Cesium,t={drawStatus:Uo,show:!1,position:new e,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};A.value.push(t),m.value=Uo,v.value=!0,d.value=p.value.drawingTipStart},N=(e=!0)=>{e&&m.value===Uo&&A.value.pop();const t=x.value?x.value._vcPolylineIndx:A.value.length-1,i=A.value[t];i&&(i.drawStatus=Wo),m.value=Wo,v.value=!1,g.value=[0,0,0]},V=(e,i)=>{const{viewer:n}=l,o=n.scene,{defined:a,defaultValue:r,Math:s,SceneMode:c}=Cesium,u=o.frameState.mapProjection.ellipsoid.cartesianToCartographic(e.position,{}),d=o.globe;let p=a(d)?r(d.getHeight(u),0):0;p=0===t.heightReference?u.height:u.height-p,s.equalsEpsilon(p,0,s.EPSILON3)&&(p=0);let m=0;o.mode!==c.SCENE2D&&(i||(i=o.cartesianToCanvasCoordinates(e.position,{})),m=z(o,i)),e.show=!0,e.lng=u.longitude,e.lat=u.latitude,e.height=p,e.slope=m},z=(e,t)=>{const{getWorldPosition:i}=l,{defined:n,Cartesian2:o,Cartesian3:a,Math:r}=Cesium,s=i(e,t,{});if(n(s)){const l=e.camera.position,c=a.distance(s,l),u=[new a,new a,new a,new a,new a],d=new a,p=new a;if(!(1e4<c)){const l=u[0],m=u[1],v=u[2],h=u[3];let g=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(s,d);g=a.negate(g,g);const f=o.clone(t,u[0]);f.x-=2,f.y-=2;const y=o.clone(t,u[1]);y.x-=2,y.y+=2;const b=o.clone(t,u[2]);b.x+=2,b.y+=2;const C=o.clone(t,u[3]);C.x+=2,C.y-=2;const w=i(e,f,l),O=i(e,y,m),x=i(e,b,v),S=i(e,C,h);let _,E,P,T,M,I,j,L;n(w)&&(_=a.subtract(w,s,l),E=a.magnitude(_)/c<=.05?a.normalize(_,l):void 0),n(O)&&(P=a.subtract(O,s,m),T=a.magnitude(P)/c<=.05?a.normalize(P,m):void 0),n(x)&&(M=a.subtract(x,s,v),I=a.magnitude(M)/c<=.05?a.normalize(M,v):void 0),n(S)&&(j=a.subtract(S,s,h),L=a.magnitude(j)/c<=.05?a.normalize(j,h):void 0);let A=a.clone(a.ZERO,p),D=u[4];if(n(E)&&n(T)&&(D=a.normalize(a.cross(E,T,D),D),A=a.add(A,D,A)),n(T)&&n(I)&&(D=a.normalize(a.cross(T,I,D),D),A=a.add(A,D,A)),n(I)&&n(L)&&(D=a.normalize(a.cross(I,L,D),D),A=a.add(A,D,A)),n(L)&&n(E)&&(D=a.normalize(a.cross(L,E,D),D),A=a.add(A,D,A)),!A.equals(a.ZERO))return A=a.normalize(A,A),r.asinClamped(Math.abs(Math.sin(a.angleBetween(A,g))))}}return 0},F=e=>{var i,n,o;if(b.value=[0,0,0],y.value=!1,!t.editable)return;_.value=e;const{viewer:a,drawingFabInstance:r}=l,s=null==r?void 0:r.proxy;if("move"===e)d.value=p.value.drawingTipEditing,m.value=Uo,x.value=C.value,v.value=!0,D=Object.assign({},A.value[x.value._vcPolylineIndx]),s.editingActionName=u;else if("remove"===e){const e=C.value._vcPolylineIndx;A.value.splice(e,1)}else{const a=C.value._vcPolylineIndx,r=A.value[a];null==(o=null==(n=null==(i=t.editorOpts)?void 0:i[e])?void 0:n.callback)||o.call(n,a,r)}c("editorEvt",{type:e,name:u,renderDatas:A,index:C.value._vcPolylineIndx},a)},H=e=>{var i,n,o,a,r,c,u,d;const{viewer:p}=l,m=p.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(e.position,{});return Cesium.defined(m)?`${s("vc.measurement.point.lng")}${Xo.angleToString(m.longitude,null==(i=t.measureUnits)?void 0:i.angleUnits,t.locale,null==(n=t.decimals)?void 0:n.lng)}\n${s("vc.measurement.point.lat")}${Xo.angleToString(m.latitude,null==(o=t.measureUnits)?void 0:o.angleUnits,t.locale,null==(a=t.decimals)?void 0:a.lat)}\n${s("vc.measurement.point.height")}${Xo.distanceToString(e.height,null==(r=t.measureUnits)?void 0:r.distanceUnits,t.locale,null==(c=t.decimals)?void 0:c.height)}\n${s("vc.measurement.point.slope")}${Xo.angleToString(e.slope,null==(u=t.measureUnits)?void 0:u.slopeUnits,t.locale,null==(d=t.decimals)?void 0:d.slope)}`:""};if(t.preRenderDatas&&t.preRenderDatas.length){const{viewer:e}=l;t.preRenderDatas.forEach((t=>{const i={drawStatus:Wo,show:!0,position:xe(t),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},n=Cesium.Cartographic.fromCartesian(i.position,e.scene.globe.ellipsoid);i.positionDegrees=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height],V(i),A.value.push(i)}))}h((()=>{k.forEach((e=>e())),k=[]}));const U={renderDatas:A,startNew:B,stop:N,clear:()=>{A.value=[],N()},handleMouseClick:(e,i)=>{const{viewer:n,drawingFabInstance:o,getWorldPosition:a,selectedDrawingActionInstance:r}=l,s=null==o?void 0:o.proxy;if(2===i.button&&i.ctrl){const t=null==s?void 0:s.getDrawingActionInstance(u);return null==s||s.toggleAction(t),void w((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:e,type:"cancel"},n)}))}const h=x.value?x.value._vcPolylineIndx:A.value.length-1,g=A.value[h];if(2===i.button&&x.value)return s.editingActionName=void 0,A.value[h]=D,m.value=Wo,A.value[h].drawStatus=Wo,x.value=void 0,d.value=p.value.drawingTipStart,void w((()=>{c("drawEvt",{name:u,index:h,renderDatas:A,finished:!0,windowPoistion:e,type:"cancel"},n)}));if(0!==i.button)return;const{defined:f}=Cesium;let y="new";if(m.value===Ho){const t=a(n.scene,e,{});if(!f(t))return;g.position=t,g.show=!0,g.drawStatus=Wo,m.value=Wo,d.value=p.value.drawingTipStart,w((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:t,windowPoistion:e,type:y},n)}))}else{m.value=Wo,g.drawStatus=Wo;const i=n.scene;if(!0===bo().hasTouch){const t=a(i,e,{});R(t,g,i),f(t)&&(g.position=t,g.show=!0)}x.value?(x.value=void 0,s.editingActionName=void 0,v.value=!1,y=_.value):1===t.mode&&w((()=>{s.toggleAction(r)})),r&&(d.value=p.value.drawingTipStart,v.value=!0),w((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:A.value[h].position,positionDegrees:A.value[h].positionDegrees,windowPoistion:e,type:y},n)}))}},handleMouseMove:e=>{const{viewer:t,getWorldPosition:i}=l,n=t.scene,{defined:o,SceneMode:a}=Cesium;if(n.mode!==a.MORPHING){const a=i(n,e,{});if(!o(a))return;if(g.value=a,m.value===Wo&&B(),m.value!==Uo)return;const r=x.value?x.value._vcPolylineIndx:A.value.length-1,s=A.value[r];s.position=a,R(a,s,n),V(s,e);const l=x.value?_.value:"new";w((()=>{c("drawEvt",{index:r,renderDatas:A,name:u,finished:!1,position:a,positionDegrees:s.positionDegrees,windowPoistion:e,type:l},t)}))}}};return Object.assign(a.proxy,U),()=>{var e,i,o;const{createGuid:a}=Cesium,r=[],c=[],u=[],p=[];if(A.value.forEach(((e,i)=>{var o;const r=Object.assign({},t.pointOpts,e.pointOpts);c.push({position:e.position,id:a(),_vcPolylineIndx:i,...r,show:e.show&&(null==(o=t.pointOpts)?void 0:o.show)||t.editable||e.drawStatus===Uo});const s=Object.assign({},t.labelOpts,e.labelOpts);if(t.showLabel)if("VcDrawingPin"===n){const n=Object.assign({},t.billboardOpts,e.billboardOpts);p.push({position:e.position,id:a(),_vcPolylineIndx:i,...n}),s.text&&u.push({position:e.position,id:a(),...s})}else u.push({position:e.position,id:a(),text:H(e),...s})})),r.push(O(zu,{enableMouseEvent:t.enableMouseEvent,points:c,onMouseover:E,onMouseout:P,onReady:j})),r.push(O(Vu,{enableMouseEvent:t.enableMouseEvent,labels:u,onReady:L})),"VcDrawingPin"===n&&r.push(O(Bu,{enableMouseEvent:t.enableMouseEvent,billboards:p})),(null==(e=t.drawtip)?void 0:e.show)&&v.value){const{viewer:e}=l;r.push(O(Cu,{position:g.value,pixelOffset:null==(i=t.drawtip)?void 0:i.pixelOffset,teleport:{to:e.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(y.value){const e=[];if(C.value){const i=t.editorOpts;for(const t in i)if(!Array.isArray(i[t])&&"number"!=typeof i[t]){const n={...i[t]};delete n.color,e.push(O(Yr,{style:{color:i[t].color,background:i[t].background},...n,onclick:F.bind(void 0,t)},(()=>O(ls,{...i[t].tooltip},(()=>{var e;return O("strong",null,(null==(e=i[t].tooltip)?void 0:e.tip)||s(`vc.drawing.editor.${t}`))})))))}}const{viewer:i}=l;r.push(O(Cu,{position:b.value,pixelOffset:null==(o=t.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},e))))}return O(Hu,{ref:S,show:t.show,onReady:I},(()=>r))}}var hp=S({name:"VcMeasurementPoint",props:{...cc,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:Cs,setup:(e,t)=>vp(e,t,"VcMeasurementPoint")}),gp=S({name:"VcMeasurementArea",props:{...cc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>cp(e,t,"VcMeasurementArea")}),fp=S({name:"VcMeasurementRectangle",props:{...cc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcMeasurementRectangle")}),yp=S({name:"VcMeasurementRegular",props:{...cc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcMeasurementRegular")});function bp(i,n,o,a,r,s,l){o.cesiumEvents=[];const c=Kn(i,n,o);if(void 0===c)return;const{t:d}=Yn(),{$services:p}=c,{emit:m}=n,v=e(!1),h=b({}),g=_s(i),f=e(null),y=e(null),C=e(!1),x=e(null);let S,_;const{activate:E,deactivate:P,destroy:M,isActive:I}=function(t,{handleMouseClick:i,handleMouseDown:n,handleMouseUp:o,handleMouseMove:a,handleDoubleClick:r,handleMouseWheel:s,handlePinch:l}){const c=e(void 0),u=e(!1),d=e=>{null==i||i(e,{button:0})},p=e=>{null==i||i(e,{button:0,shift:!0})},m=e=>{null==i||i(e,{button:0,ctrl:!0})},v=e=>{null==i||i(e,{button:1})},h=e=>{null==i||i(e,{button:1,shift:!0})},g=e=>{null==i||i(e,{button:1,ctrl:!0})};let f;const y=e=>{var t;f?null==(t=null==f?void 0:f.promise)||t.then((t=>{t&&(null==i||i(e,{button:2}))})):null==i||i(e,{button:2})},b=e=>{null==i||i(e,{button:2,shift:!0})},C=e=>{null==i||i(e,{button:2,ctrl:!0})},w=e=>{null==n||n(e,{button:0})},O=e=>{null==n||n(e,{button:0,shift:!0})},x=e=>{null==n||n(e,{button:0,ctrl:!0})},S=e=>{null==n||n(e,{button:1})},_=e=>{null==n||n(e,{button:1,shift:!0})},E=e=>{null==n||n(e,{button:1,ctrl:!0})},P=e=>{null==n||n(e,{button:2})},T=e=>{null==n||n(e,{button:2,shift:!0})},M=e=>{null==n||n(e,{button:2,ctrl:!0})},I=e=>{null==o||o(e,{button:0})},j=e=>{null==o||o(e,{button:0,shift:!0})},L=e=>{null==o||o(e,{button:0,ctrl:!0})},A=e=>{null==o||o(e,{button:1,ctrl:!0})},D=e=>{null==o||o(e,{button:1,shift:!0})},k=e=>{null==o||o(e,{button:1,ctrl:!0})},R=e=>{null==o||o(e,{button:2})},B=e=>{null==o||o(e,{button:2,shift:!0})},N=e=>{null==o||o(e,{button:2,ctrl:!0})},V=e=>{null==r||r(e,{button:0})},z=e=>{null==r||r(e,{button:0,shift:!0})},F=e=>{null==r||r(e,{button:0,ctrl:!0})},H=e=>{null==a||a(e)},U=e=>{null==a||a(e,{shift:!0})},W=e=>{null==a||a(e,{ctrl:!0})},G=e=>{null==s||s(e)},$=e=>{null==s||s(e,{shift:!0})},Z=e=>{null==s||s(e,{ctrl:!0})},Y=e=>{null==l||l(e,{start:!0})},q=e=>{null==l||l(e,{start:!0,shift:!0})},X=e=>{null==l||l(e,{start:!0,ctrl:!0})},Q=e=>{null==l||l(e,{end:!0})},J=e=>{null==l||l(e,{end:!0,shift:!0})},K=e=>{null==l||l(e,{end:!0,ctrl:!0})},ee=e=>{null==l||l(e,{move:!0})},te=e=>{null==l||l(e,{move:!0,shift:!0})},ie=e=>{null==l||l(e,{move:!0,ctrl:!0})},ne=e=>{if(e.touch){const t={position:{x:e.position.left,y:e.position.top}};null==r||r(t,{button:0})}f.resolve(!1)},oe=e=>{f.resolve(!0)},ae=e=>{f=Oo()};return{activate:()=>{if(u.value)return;const{ScreenSpaceEventType:e,KeyboardEventModifier:i,ScreenSpaceEventHandler:n}=Cesium;if(!c.value){const{viewer:e}=t;c.value=new n(e.canvas),wo.beforeMount(e.canvas,{arg:"2000",value:ne,touchStart:ae,touchEnd:oe,modifiers:{}})}const o=c.value;o.setInputAction(d,e.LEFT_CLICK),o.setInputAction(p,e.LEFT_CLICK,i.SHIFT),o.setInputAction(m,e.LEFT_CLICK,i.CTRL),o.setInputAction(w,e.LEFT_DOWN),o.setInputAction(O,e.LEFT_DOWN,i.SHIFT),o.setInputAction(x,e.LEFT_DOWN,i.CTRL),o.setInputAction(I,e.LEFT_UP),o.setInputAction(j,e.LEFT_UP,i.SHIFT),o.setInputAction(L,e.LEFT_UP,i.CTRL),o.setInputAction(y,e.RIGHT_CLICK),o.setInputAction(b,e.RIGHT_CLICK,i.SHIFT),o.setInputAction(C,e.RIGHT_CLICK,i.CTRL),o.setInputAction(P,e.RIGHT_DOWN),o.setInputAction(T,e.RIGHT_DOWN,i.SHIFT),o.setInputAction(M,e.RIGHT_DOWN,i.CTRL),o.setInputAction(R,e.RIGHT_UP),o.setInputAction(B,e.RIGHT_UP,i.SHIFT),o.setInputAction(N,e.RIGHT_UP,i.CTRL),o.setInputAction(v,e.MIDDLE_CLICK),o.setInputAction(h,e.MIDDLE_CLICK,i.SHIFT),o.setInputAction(g,e.MIDDLE_CLICK,i.CTRL),o.setInputAction(S,e.MIDDLE_DOWN),o.setInputAction(_,e.MIDDLE_DOWN,i.SHIFT),o.setInputAction(E,e.MIDDLE_DOWN,i.CTRL),o.setInputAction(A,e.MIDDLE_UP),o.setInputAction(D,e.MIDDLE_UP,i.SHIFT),o.setInputAction(k,e.MIDDLE_UP,i.CTRL),o.setInputAction(V,e.LEFT_DOUBLE_CLICK),o.setInputAction(z,e.LEFT_DOUBLE_CLICK,i.SHIFT),o.setInputAction(F,e.LEFT_DOUBLE_CLICK,i.CTRL),o.setInputAction(H,e.MOUSE_MOVE),o.setInputAction(U,e.MOUSE_MOVE,i.SHIFT),o.setInputAction(W,e.MOUSE_MOVE,i.CTRL),o.setInputAction(G,e.WHEEL),o.setInputAction($,e.WHEEL,i.SHIFT),o.setInputAction(Z,e.WHEEL,i.CTRL),o.setInputAction(Y,e.PINCH_START),o.setInputAction(q,e.PINCH_START,i.SHIFT),o.setInputAction(X,e.PINCH_START,i.CTRL),o.setInputAction(Q,e.PINCH_END),o.setInputAction(J,e.PINCH_END,i.SHIFT),o.setInputAction(K,e.PINCH_END,i.CTRL),o.setInputAction(ee,e.PINCH_MOVE),o.setInputAction(te,e.PINCH_MOVE,i.SHIFT),o.setInputAction(ie,e.PINCH_MOVE,i.CTRL),u.value=!0},deactivate:()=>{if(!u.value)return;const{ScreenSpaceEventType:e,KeyboardEventModifier:i}=Cesium,n=c.value;if(!n)return;n.removeInputAction(e.LEFT_CLICK),n.removeInputAction(e.LEFT_CLICK,i.SHIFT),n.removeInputAction(e.LEFT_CLICK,i.CTRL),n.removeInputAction(e.LEFT_DOWN),n.removeInputAction(e.LEFT_DOWN,i.SHIFT),n.removeInputAction(e.LEFT_DOWN,i.CTRL),n.removeInputAction(e.LEFT_UP),n.removeInputAction(e.LEFT_UP,i.SHIFT),n.removeInputAction(e.LEFT_UP,i.CTRL),n.removeInputAction(e.RIGHT_CLICK),n.removeInputAction(e.RIGHT_CLICK,i.SHIFT),n.removeInputAction(e.RIGHT_CLICK,i.CTRL),n.removeInputAction(e.RIGHT_DOWN),n.removeInputAction(e.RIGHT_DOWN,i.SHIFT),n.removeInputAction(e.RIGHT_DOWN,i.CTRL),n.removeInputAction(e.RIGHT_UP),n.removeInputAction(e.RIGHT_UP,i.SHIFT),n.removeInputAction(e.RIGHT_UP,i.CTRL),n.removeInputAction(e.MIDDLE_CLICK),n.removeInputAction(e.MIDDLE_CLICK,i.SHIFT),n.removeInputAction(e.MIDDLE_CLICK,i.CTRL),n.removeInputAction(e.MIDDLE_DOWN),n.removeInputAction(e.MIDDLE_DOWN,i.SHIFT),n.removeInputAction(e.MIDDLE_DOWN,i.CTRL),n.removeInputAction(e.MIDDLE_UP),n.removeInputAction(e.MIDDLE_UP,i.SHIFT),n.removeInputAction(e.MIDDLE_UP,i.CTRL),n.removeInputAction(e.LEFT_DOUBLE_CLICK),n.removeInputAction(e.LEFT_DOUBLE_CLICK,i.SHIFT),n.removeInputAction(e.LEFT_DOUBLE_CLICK,i.CTRL),n.removeInputAction(e.MOUSE_MOVE),n.removeInputAction(e.MOUSE_MOVE,i.SHIFT),n.removeInputAction(e.MOUSE_MOVE,i.CTRL),n.removeInputAction(e.WHEEL),n.removeInputAction(e.WHEEL,i.SHIFT),n.removeInputAction(e.WHEEL,i.CTRL),n.removeInputAction(e.PINCH_START),n.removeInputAction(e.PINCH_START,i.SHIFT),n.removeInputAction(e.PINCH_START,i.CTRL),n.removeInputAction(e.PINCH_END),n.removeInputAction(e.PINCH_END,i.SHIFT),n.removeInputAction(e.PINCH_END,i.CTRL),n.removeInputAction(e.PINCH_MOVE),n.removeInputAction(e.PINCH_MOVE,i.SHIFT),n.removeInputAction(e.PINCH_MOVE,i.CTRL);const{viewer:o}=t;wo.beforeUnmount(o.canvas),u.value=!1},destroy:()=>{var e;null==(e=c.value)||e.destroy(),c.value=void 0},isActive:u}}(p,{handleMouseClick:(e,t)=>{var i,n;const a=null==_?void 0:_.cmpRef.value;let r;null==(i=null==a?void 0:a.handleMouseClick)||i.call(a,e.position,t);const s=o.proxy;if(s.editingActionName&&(r=k(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(n=null==i?void 0:i.handleMouseClick)||n.call(i,e.position,t)}},handleMouseMove:(e,t)=>{var i,n;const a=null==_?void 0:_.cmpRef.value;let r;null==(i=null==a?void 0:a.handleMouseMove)||i.call(a,e.endPosition,t);const s=o.proxy;if(s.editingActionName&&(r=k(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(n=null==i?void 0:i.handleMouseMove)||n.call(i,e.endPosition,t)}},handleDoubleClick:(e,t)=>{var i,n;const a=null==_?void 0:_.cmpRef.value;let r;null==(i=null==a?void 0:a.handleDoubleClick)||i.call(a,e.position,t);const s=o.proxy;if(s.editingActionName&&(r=k(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(n=null==i?void 0:i.handleDoubleClick)||n.call(i,e.position,t)}}});o.createCesiumObject=async()=>(v.value=!0,S=new Fo,a.value),o.mount=async()=>(L(),C.value=!0,E(),!0),o.unmount=async()=>(_&&(D(_),_=void 0),P(),M(),C.value=!1,!0);const j=(e,t,i)=>{const{Cesium3DTileFeature:n,Cesium3DTileset:o,Cartesian3:a,defined:r,Model:s,Ray:l}=Cesium;if(Cesium.SuperMapVersion)return e.pickPosition(t);let c;const u={},d=new l;if(e.pickPositionSupported){S.hide(e);const l=e.pick(t,1,1);if(S.restore(e),r(l)&&(l instanceof n||l.primitive instanceof o||l.primitive instanceof s||Cesium.S3MTilesLayer&&l.primitive instanceof Cesium.S3MTilesLayer)&&(c=e.pickPosition(t,u),r(c)))return a.clone(c,i)}if(r(e.globe)){const n=e.camera.getPickRay(t,d);return c=e.globe.pick(n,e,u),r(c)?a.clone(c,i):void 0}},L=()=>{var e;const t=g.style.value;h.left=t.left,h.top=t.top,h.transform=t.transform;const i=g.attach.value,n=null==(e=Ce(y))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(h,t)},A=e(null),D=e=>{var t;const{viewer:n}=p;if(u(e)&&(e=k(e)),!e)return void c.logger.error("Invalid drawingActionOption or drawingActionOption name");const o=R(e.name);if(-1!==o){if(void 0!==_){_.actionOpts.color=A.value||"";const e=_.cmpRef.value;null==(t=e.stop)||t.call(e),_.isActive=!1,m("activeEvt",{type:_.name,option:_,isActive:!1},n)}(null==_?void 0:_.name)===(null==e?void 0:e.name)?(_=void 0,a.value[o].actionOpts.color=A.value||"red"):w((()=>{a.value[o].cmpRef.value.startNew(),A.value=a.value[o].actionOpts.color,a.value[o].actionOpts.color=i.activeColor,a.value[o].isActive=!0,_=a.value[o],m("activeEvt",{type:_.name,option:_,isActive:!0},n)}))}},k=e=>a.value.find((t=>t.name===e)),R=e=>a.value.findIndex((t=>t.name===e)),B=e=>{e?E():(_&&D(_),P()),r.modelValue=e,m("fabUpdated",e)},N=()=>{a.value.forEach((e=>{var t;null==(t=e.cmpRef.value)||t.clear()})),_&&D(_)},V=({cesiumObject:e})=>{e._vcId=l};t(J,fe(c.getServices(),{get drawingFabInstance(){return o},get selectedDrawingActionInstance(){return _},get getWorldPosition(){return j},get drawingHandlerActive(){return I}})),Object.assign(o.proxy,{clearAll:N,deactivate:P,activate:E,toggleAction:D,getFabRef:()=>y.value,getDrawingActionInstance:k,getDrawingActionInstances:()=>a.value,getSelectedDrawingActionInstance:()=>_});return{renderContent:()=>{if(v.value){const e=[],t=[];a.value.forEach((n=>{e.push(O(ps,{ref:n.actionRef,style:n.actionStyle,class:n.actionClass,...n.actionOpts,onClick:()=>{D(n)}},(()=>O(ls,{...n.actionOpts.tooltip},(()=>O("strong",null,n.tip)))))),n.cmp&&t.push(O(n.cmp,{ref:n.cmpRef,editable:i.editable,clampToGround:i.clampToGround,mode:i.mode,onDrawEvt:(e,t)=>{m("drawEvt",e,t)},onEditorEvt:(e,t)=>{m("editorEvt",e,t)},onMouseEvt:(e,t)=>{m("mouseEvt",e,t)},...n.cmpOpts}))})),a.value.length&&e.push(O(ps,{style:{background:s.color,color:s.textColor},class:"vc-draw-button vc-draw-clear",...s,onClick:N},(()=>O(ls,{...s.tooltip},(()=>O("strong",null,s.tooltip.tip||d(`vc.${l}.clear.tip`)))))));const o=[];return C.value&&o.push(O("div",{ref:f,class:"vc-drawings-container "+g.classes.value,style:h},void 0!==n.slots.body?n.slots.body(a.value):O(ds,{ref:y,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":B},{default:()=>e,tooltip:()=>O(ls,{...r.tooltip},(()=>O("strong",null,r.tooltip.tip||(r.modelValue?d("vc.drawing.collapse"):d("vc.drawing.expand")))))}))),o.push(O(Hu,{ref:x,show:i.show,onReady:V},(()=>t))),o}return T("v-if")}}}var Cp=S({name:"VcMeasurements",props:Ac,emits:{...Cs,fabUpdated:e=>!0},setup(t,n){var a;const r=o();r.cesiumClass="VcMeasurements";const{t:s}=Yn(),l=b(Object.assign({},Dc.clearActionOpts,t.clearActionOpts)),c=b(Object.assign({},Dc.mainFabOpts,t.mainFabOpts)),u=b(Object.assign({},Dc.distanceActionOpts,t.distanceActionOpts)),d=b(Object.assign({},Dc.distanceMeasurementOpts,t.distanceMeasurementOpts)),p=b(Object.assign({},Dc.componentDistanceActionOpts,t.componentDistanceActionOpts)),m=b(Object.assign({},Dc.componentDistanceMeasurementOpts,t.componentDistanceMeasurementOpts)),v=b(Object.assign({},Dc.polylineActionOpts,t.polylineActionOpts)),h=b(Object.assign({},Dc.polylineMeasurementOpts,t.polylineMeasurementOpts)),g=b(Object.assign({},Dc.horizontalActionOpts,t.horizontalActionOpts)),f=b(Object.assign({},Dc.horizontalMeasurementOpts,t.horizontalMeasurementOpts)),y=b(Object.assign({},Dc.verticalActionOpts,t.verticalActionOpts)),C=b(Object.assign({},Dc.verticalMeasurementOpts,t.verticalMeasurementOpts)),w=b(Object.assign({},Dc.heightActionOpts,t.heightActionOpts)),O=b(Object.assign({},Dc.heightMeasurementOpts,t.heightMeasurementOpts)),x=b(Object.assign({},Dc.areaActionOpts,t.areaActionOpts)),S=b(Object.assign({},Dc.areaMeasurementOpts,t.areaMeasurementOpts)),_=b(Object.assign({},Dc.pointActionOpts,t.pointActionOpts)),E=b(Object.assign({},Dc.pointMeasurementOpts,t.pointMeasurementOpts)),P=b(Object.assign({},Dc.rectangleActionOpts,t.rectangleActionOpts)),T=b(Object.assign({},Dc.rectangleMeasurementOpts,t.rectangleMeasurementOpts)),M=b(Object.assign({},Dc.regularActionOpts,t.regularActionOpts)),I=b(Object.assign({},Dc.regularMeasurementOpts,t.regularMeasurementOpts)),j=b(Object.assign({},Dc.circleActionOpts,t.circleActionOpts)),L=b(Object.assign({},Dc.circleMeasurementOpts,t.circleMeasurementOpts)),A={};A.distanceActionOpts=u,A.distanceMeasurementOpts=d,A.componentDistanceActionOpts=p,A.componentDistanceMeasurementOpts=m,A.polylineActionOpts=v,A.polylineMeasurementOpts=h,A.horizontalActionOpts=g,A.horizontalMeasurementOpts=f,A.verticalActionOpts=y,A.verticalMeasurementOpts=C,A.heightActionOpts=w,A.heightMeasurementOpts=O,A.areaActionOpts=x,A.areaMeasurementOpts=S,A.pointActionOpts=_,A.pointMeasurementOpts=E,A.rectangleActionOpts=P,A.rectangleMeasurementOpts=T,A.regularActionOpts=M,A.regularMeasurementOpts=I,A.circleActionOpts=j,A.circleMeasurementOpts=L,A.clearActionOpts=l;const D=i((()=>t.measurements.map((t=>({name:t,type:"measurement",actionStyle:{background:A[`${R(t)}ActionOpts`].color,color:A[`${R(t)}ActionOpts`].textColor},actionClass:`vc-measure-${t} vc-measure-button`,actionRef:e(null),actionOpts:A[`${R(t)}ActionOpts`],cmp:k(t),cmpRef:e(null),cmpOpts:A[`${R(t)}MeasurementOpts`],tip:A[`${R(t)}ActionOpts`].tooltip.tip||s(`vc.measurement.${t}.tip`),isActive:!1})))));function k(e){switch(e){case"distance":case"component-distance":return lp;case"polyline":return up;case"horizontal":return dp;case"vertical":return pp;case"height":return mp;case"point":return hp;case"area":return gp;case"rectangle":return fp;case"regular":case"circle":return yp;default:return}}return null==(a=bp(t,n,r,D,c,l,"measurement"))?void 0:a.renderContent}});Cp.install=e=>{e.component(Cp.name,Cp)};const wp=Cp,Op=Object.assign({},$l,{icon:"vc-icons-drawing-point"}),xp=Object.assign({},$l,{icon:"vc-icons-drawing-polyline"}),Sp=Object.assign({},$l,{icon:"vc-icons-drawing-polygon"}),_p=Object.assign({},$l,{icon:"vc-icons-drawing-rectangle"}),Ep=Object.assign({},$l,{icon:"vc-icons-drawing-pin"}),Pp=Object.assign({},Kl,{pointOpts:Object.assign({},Yl,{show:!1}),billboardOpts:ql,labelOpts:Object.assign({},Ql,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),Tp=Object.assign({},$l,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Mp=["pin","point","polyline","polygon","rectangle","regular","circle"],Ip={...uc,drawings:{type:Array,default:()=>Mp,validator:e=>{let t=!0;return e.forEach((e=>{Mp.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Tp},pinActionOpts:{type:Object,default:()=>Ep},pinDrawingOpts:{type:Object,default:()=>Pp},pointActionOpts:{type:Object,default:()=>Op},pointDrawingOpts:{type:Object,default:()=>Kl},polylineActionOpts:{type:Object,default:()=>xp},polylineDrawingOpts:{type:Object,default:()=>tc},polygonActionOpts:{type:Object,default:()=>Sp},polygonDrawingOpts:{type:Object,default:()=>ic},rectangleActionOpts:{type:Object,default:()=>_p},rectangleDrawingOpts:{type:Object,default:()=>nc},circleActionOpts:{type:Object,default:()=>lc},circleDrawingOpts:{type:Object,default:()=>oc},regularActionOpts:{type:Object,default:()=>sc},regularDrawingOpts:{type:Object,default:()=>ac}},jp=pe(Ip);var Lp=S({name:"VcDrawingPin",props:{...cc,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:Cs,setup:(e,t)=>vp(e,t,"VcDrawingPin")}),Ap=S({name:"VcDrawingPoint",props:{...cc,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:Cs,setup:(e,t)=>vp(e,t,"VcDrawingPoint")}),Dp=S({name:"VcDrawingPolyline",props:{...cc,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>cp(e,t,"VcDrawingPolyline")}),kp=S({name:"VcDrawingPolygon",props:{...cc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>cp(e,t,"VcDrawingPolygon")}),Rp=S({name:"VcDrawingRegular",props:{...cc,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcDrawingRegular")}),Bp=S({name:"VcDrawingRectangle",props:{...cc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Cs,setup:(e,t)=>sp(e,t,"VcDrawingRectangle")});var Np=S({name:"VcDrawings",props:Ip,emits:{...Cs,fabUpdated:e=>!0},setup(t,n){var a;const r=o();r.cesiumClass="VcDrawings";const{t:s}=Yn(),l={},c=b(Object.assign({},jp.clearActionOpts,t.clearActionOpts)),u=b(Object.assign({},jp.mainFabOpts,t.mainFabOpts)),d=b(Object.assign({},jp.pointActionOpts,t.pointActionOpts)),p=b(Object.assign({},jp.pointDrawingOpts,t.pointDrawingOpts)),m=b(Object.assign({},jp.polylineActionOpts,t.polylineActionOpts)),v=b(Object.assign({},jp.polylineDrawingOpts,t.polylineDrawingOpts)),h=b(Object.assign({},jp.polygonActionOpts,t.polygonActionOpts)),g=b(Object.assign({},jp.polygonDrawingOpts,t.polygonDrawingOpts)),f=b(Object.assign({},jp.rectangleActionOpts,t.rectangleActionOpts)),y=b(Object.assign({},jp.rectangleDrawingOpts,t.rectangleDrawingOpts)),C=b(Object.assign({},jp.circleActionOpts,t.circleActionOpts)),w=b(Object.assign({},jp.circleDrawingOpts,t.circleDrawingOpts)),O=b(Object.assign({},jp.regularActionOpts,t.regularActionOpts)),x=b(Object.assign({},jp.regularDrawingOpts,t.regularDrawingOpts)),S=b(Object.assign({},jp.pinActionOpts,t.pinActionOpts)),_=b(Object.assign({},jp.pinDrawingOpts,t.pinDrawingOpts));l.pointActionOpts=d,l.pointDrawingOpts=p,l.polylineActionOpts=m,l.polylineDrawingOpts=v,l.polygonActionOpts=h,l.polygonDrawingOpts=g,l.rectangleActionOpts=f,l.rectangleDrawingOpts=y,l.circleActionOpts=C,l.circleDrawingOpts=w,l.regularActionOpts=O,l.regularDrawingOpts=x,l.pinActionOpts=S,l.pinDrawingOpts=_,l.clearActionOpts=c;const E=i((()=>t.drawings.map((t=>({name:t,type:"drawing",actionStyle:{background:l[`${R(t)}ActionOpts`].color,color:l[`${R(t)}ActionOpts`].textColor},actionClass:`vc-draw-${t} vc-draw-button`,actionRef:e(null),actionOpts:l[`${R(t)}ActionOpts`],cmp:P(t),cmpRef:e(null),cmpOpts:l[`${R(t)}DrawingOpts`],tip:l[`${R(t)}ActionOpts`].tooltip.tip||s(`vc.drawing.${R(t)}.tip`),isActive:!1})))));function P(e){switch(e){case"pin":return Lp;case"point":return Ap;case"polyline":return Dp;case"polygon":return kp;case"rectangle":return y.regular?Rp:Bp;case"circle":case"regular":return Rp;default:return}}return null==(a=bp(t,n,r,E,u,c,"drawing"))?void 0:a.renderContent}});Np.install=e=>{e.component(Np.name,Np)};const Vp=Np;class zp{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._url=e.url;const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=e.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=e.rectangle||this._tilingScheme.rectangle;let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=Oo(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=e.subdomains||["01","02","03","04"],this._domain=e.domain||"webst",this._style=e.mapStyle||"6",this._lang=e.lang||"zh_cn",this._scl=e.scl||"1",this._ltype=e.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,Fp.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function Fp(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{domain}",this._domain).replace("{s}",a[(e+t+i)%a.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i);return this._resource.getDerivedResource({url:o,request:n})}var Hp=S({name:"VcImageryProviderAmap",props:{url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...Fi,...Gi,...Wi,...Ni,...Vi,...Ki},emits:gs,setup(e,t){const i=o();i.cesiumClass="AMapImageryProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||zp,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.AMapImageryProvider(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Up=S({name:"VcImageryProviderArcgis",props:{url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...Di,...ki,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...Ri,...Bi,...Ni,...Vi,...zi,...Fi,...Hi,...Ui,...Wi},emits:gs,setup(e,t){const i=o();return i.cesiumClass="ArcGisMapServerImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});class Wp{constructor(e,t){isNaN(e)&&(e=isNaN(e)?0:e),u(e)&&(e=parseFloat(e)),isNaN(t)&&(t=isNaN(t)?0:t),u(t)&&(t=parseFloat(t)),this.lng=e,this.lat=t}equals(e){return e&&this.lat===e.lat&&this.lng===e.lng}}Wp.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class Gp{constructor(e,t){this.x=e||0,this.y=t||0}equals(e){return e&&e.x===this.x&&e.y===this.y}}const $p=class{lngLatToMercator(e,t){return $p.convertLL2MC(e)}lngLatToPoint(e){const t=$p.convertLL2MC(e);return new Gp(t.lng,t.lat)}mercatorToLngLat(e,t){return $p.convertMC2LL(e)}pointToLngLat(e){const t=new Wp(e.x,e.y);return $p.convertMC2LL(t)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const a=this.getZoomUnits(t),r=Math.round((e.lng-i.lng)/a+n.width/2),s=Math.round((i.lat-e.lat)/a+n.height/2);return new Gp(r,s)}pixelToPoint(e,t,i,n,o){if(!e)return;const a=this.getZoomUnits(t),r=i.lng+a*(e.x-n.width/2),s=i.lat-a*(e.y-n.height/2),l=new Wp(r,s);return this.mercatorToLngLat(l,o)}getZoomUnits(e){return Math.pow(2,18-e)}};let Zp=$p;Zp.EARTHRADIUS=6370996.81,Zp.MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Zp.LLBAND=[75,60,45,30,15,0],Zp.MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Zp.LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Zp.getDistanceByMC=function(e,t){if(!e||!t)return 0;if(!(e=$p.convertMC2LL(e)))return 0;const i=$p.toRadians(e.lng),n=$p.toRadians(e.lat);if(!(t=$p.convertMC2LL(t)))return 0;const o=$p.toRadians(t.lng),a=$p.toRadians(t.lat);return $p.getDistance(i,o,n,a)},Zp.getDistanceByLL=function(e,t){if(!e||!t)return 0;e.lng=$p.getLoop(e.lng,-180,180),e.lat=$p.getRange(e.lat,-74,74),t.lng=$p.getLoop(t.lng,-180,180),t.lat=$p.getRange(t.lat,-74,74);const i=$p.toRadians(e.lng),n=$p.toRadians(e.lat),o=$p.toRadians(t.lng),a=$p.toRadians(t.lat);return $p.getDistance(i,o,n,a)},Zp.convertMC2LL=function(e){let t;const i=new Wp(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<$p.MCBAND.length;o++)if(i.lat>=$p.MCBAND[o]){t=$p.MC2LL[o];break}const n=$p.convertor(e,t);return new Wp(null==n?void 0:n.lng.toFixed(6),null==n?void 0:n.lat.toFixed(6))},Zp.convertLL2MC=function(e){let t;e.lng=$p.getLoop(e.lng,-180,180),e.lat=$p.getRange(e.lat,-74,74);const i=new Wp(e.lng,e.lat);for(let o=0;o<$p.LLBAND.length;o++)if(i.lat>=$p.LLBAND[o]){t=$p.LL2MC[o];break}if(!t)for(let o=$p.LLBAND.length-1;o>=0;o--)if(i.lat<=-$p.LLBAND[o]){t=$p.LL2MC[o];break}const n=$p.convertor(e,t);return new Wp(null==n?void 0:n.lng.toFixed(2),null==n?void 0:n.lat.toFixed(2))},Zp.convertor=function(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new Wp(i,o)},Zp.getDistance=function(e,t,i,n){return $p.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))},Zp.toRadians=function(e){return Math.PI*e/180},Zp.toDegrees=function(e){return 180*e/Math.PI},Zp.getRange=function(e,t,i){return null!=t&&(e=Math.max(e,t)),null!=i&&(e=Math.min(e,i)),e},Zp.getLoop=function(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e};class Yp{constructor(e){const{defaultValue:t,Ellipsoid:i,WebMercatorProjection:n,Cartesian2:o,Cartographic:a,Math:r,Rectangle:s}=Cesium;e=e||{},this._ellipsoid=t(e.ellipsoid,i.WGS84),this._projection=new n(this._ellipsoid);const l=new Zp;this._projection.project=function(t,i){return i=i||{},e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=Lo(r.toDegrees(t.longitude),r.toDegrees(t.latitude)),i=jo(i[0],i[1])):i=jo(r.toDegrees(t.longitude),r.toDegrees(t.latitude))),i[0]=Math.min(i[0],180),i[0]=Math.max(i[0],-180),i[1]=Math.min(i[1],74.000022),i[1]=Math.max(i[1],-71.988531),i=l.lngLatToPoint(new Wp(i[0],i[1])),new o(i.x,i.y)},this._projection.unproject=function(t,i){return i=i||{},(i=l.mercatorToLngLat(new Wp(t.x,t.y)))[0]=(i[0]+180)%360-180,e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=Io(i.lng,i.lat),i=Ao(i[0],i[1])):i=Io(i.lng,i.lat)),new a(Cesium.Math.toRadians(i[0]),Cesium.Math.toRadians(i[1]))},this._rectangleSouthwestInMeters=new o(-20037726.37,-12474104.17),this._rectangleNortheastInMeters=new o(20037726.37,12474104.17);const c=this._projection.unproject(this._rectangleSouthwestInMeters),u=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s(c.longitude,c.latitude,u.longitude,u.latitude),this.resolutions=[];for(let d=0;d<19;d++)this.resolutions[d]=256*Math.pow(2,18-d)}getNumberOfXTilesAtLevel(e){return 1<<e}getNumberOfYTilesAtLevel(e){return 1<<e}rectangleToNativeRectangle(e,t){const{defined:i,Rectangle:n}=Cesium,o=this._projection,a=o.project(n.southwest(e)),r=o.project(n.northeast(e));return i(t)?(t.west=a.x,t.south=a.y,t.east=r.x,t.north=r.y,t):new n(a.x,a.y,r.x,r.y)}tileXYToNativeRectangle(e,t,i,n){const{defined:o,Rectangle:a}=Cesium,r=this.resolutions[i],s=e*r,l=(e+1)*r,c=(1+(t=-t))*r,u=t*r;return o(n)?(n.west=s,n.south=u,n.east=l,n.north=c,n):new a(s,u,l,c)}tileXYToRectangle(e,t,i,n){const{Cartesian2:o}=Cesium,a=this.tileXYToNativeRectangle(e,t,i,n),r=this._projection,s=r.unproject(new o(a.west,a.south)),l=r.unproject(new o(a.east,a.north));return a.west=s.longitude,a.south=s.latitude,a.east=l.longitude,a.north=l.latitude,a}positionToTileXY(e,t,i){const{Rectangle:n,defined:o,Cartesian2:a}=Cesium,r=this._rectangle;if(!n.contains(r,e))return;const s=this._projection.project(e);if(!o(s))return;const l=this.resolutions[t],c=Math.floor(s.x/l),u=-Math.floor(s.y/l);return o(i)?(i.x=c,i.y=u,i):new a(c,u)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class qp{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=i(e.subdomains,["0","1","2","3"]),e.url?this._url=e.url:"img"===e.mapStyle?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":"vec"===e.mapStyle?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi2_0":"traffic"===e.mapStyle?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||18,this._tilingScheme=new Yp(e),this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=Oo(),this._ready=!0,this._readyPromise.resolve(!0),this._labelStyle=e.labelStyle||"web2D",this._qt=e.qt,this._styles=e.styles,this._scale=e.scale,this._ak=e.ak,this._mapStyle=e.mapStyle}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,Xp.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function Xp(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{time}",String((new Date).getTime())).replace("{udt}",String((new Date).getTime()));return this._resource.getDerivedResource({url:o,request:n})}var Qp=S({name:"VcImageryProviderBaidu",props:{...Ai,...Ni,...zi,...ki,...Fi,...Gi,...Wi,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"E4805d16520de693a3fe707cdc962045"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"}},emits:gs,setup(e,t){const i=o();i.cesiumClass="BaiduMapImageryProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||qp,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Jp=S({name:"VcImageryProviderBing",props:{url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...zi,...ki},emits:gs,setup(e,t){const i=o();return i.cesiumClass="BingMapsImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Kp=S({name:"VcImageryProviderGoogle",props:{...Ai,...zi,...ki,...Fi,metadata:Object},emits:gs,setup(e,t){const i=o();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var em=S({name:"VcImageryProviderGrid",props:{...Vi,...zi,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:Ie}},...zn,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:Ie}},...Hi,...Ui,canvasSize:{type:Number,default:256}},emits:gs,setup(e,t){const i=o();return i.cesiumClass="GridImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}}),tm=S({name:"VcImageryProviderIon",props:{assetId:Number,...Zi,server:[String,Object]},emits:gs,setup(e,t){const i=o();return i.cesiumClass="IonImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var im=S({name:"VcImageryProviderMapbox",props:{url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...Zi,tilesize:{type:Number,default:512},scaleFactor:Boolean,...zi,...Gi,...Wi,...Ni,...Fi},emits:gs,setup(e,t){const i=o();return i.cesiumClass="MapboxStyleImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var nm=S({name:"VcImageryProviderOsm",props:{url:{type:String,default:"https://a.tile.openstreetmap.org"},...$i,...Ni,...Gi,...Wi,...zi,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}},emits:gs,setup(e,t){const i=o();return i.cesiumClass="OpenStreetMapImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var om=S({name:"VcImageryProviderSingletile",props:{...Ai,...Ni,...Fi,...zi},emits:gs,setup(e,t){const i=o();return i.cesiumClass="SingleTileImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const am=1,rm=2,sm=3;class lm{constructor(e){if(!Cesium.defined(e.name))throw new Cesium.DeveloperError("options.name is required.");const t=window.indexedDB.open(this.dbname);this.layer=e.layer||null,this.storageType=e.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=e.name;const i=this;return new Promise(((e,n)=>{t.onsuccess=t=>{i.db=t.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},e(i)},t.onupgradeneeded=t=>{i.db=t.target.result,i.version=i.db.version,e(i)},t.onerror=e=>{i.db=null,n("create database fail, error code : "+e.target.errorcode)}}))}checkObjectStoreExist(e){return!!Cesium.defined(this.db)&&this.db.objectStoreNames.contains(e)}createObjectStore(e){return new Promise(((t,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(e))return void i(!1);this.creatingTable=!0;const n=parseInt(this.db.version);this.db.close();const o=this,a=window.indexedDB.open(this.dbname,n+1);a.onupgradeneeded=i=>{const n=i.target.result;o.db=n;const a=n.createObjectStore(e,{keyPath:"id"});if(Cesium.defined(a)){a.createIndex("value","value",{unique:!1}),o.creatingTable=!1,o.cachestatus=o.cachestatus||{},o.cachestatus[e]={},o.db.close();window.indexedDB.open(o.dbname).onsuccess=e=>{o.db=e.target.result,t(!0)}}else o.creatingTable=!1,t(!1)},a.onsuccess=e=>{e.target.result.close(),t(!0)},a.onerror=e=>{o.creatingTable=!1,i(!1)}}}))}putElementInDB(e,t,i){return new Promise(((n,o)=>{if(!Cesium.defined(this.db))return void o(!1);const{cachestatus:a,db:r}=this;if(Cesium.defined(a[e])&&Cesium.defined(a[e][t]&&(a[e][t]===am||a[e][t]===rm)))n(!1);else if(r.objectStoreNames.contains(e)){a[e]=a[e]||{};try{const o=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a[e][t]=am,o.onsuccess=i=>{a[e][t]=rm,n(!0)},o.onerror=i=>{a[e][t]=sm,n(!1)}}catch(s){return void o(null)}}else this.createObjectStore(e).then((()=>{const a=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a.onsuccess=function(e){n(!0)},a.onerror=function(e){o(!1)}}),(()=>{o(!1)}))}))}getElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(!Cesium.defined(o))return null;if(!o.objectStoreNames.contains(e))return null;try{const a=o.transaction([e]),r=a.objectStore(e).get(t);r.onsuccess=e=>Cesium.defined(e.target.result)?i(e.target.result.value):n(null),r.onerror=e=>{n(null)}}catch(a){n(null)}}))}updateElementInDB(e,t,i){return new Promise(((n,o)=>{const{db:a}=this;if(Cesium.defined(a))if(a.objectStoreNames.contains(e))try{const o=a.transaction([e],"readwrite").objectStore(e).put({id:t,value:i});o.onsuccess=()=>{n(!0)},o.onerror=()=>{n(!1)}}catch(Ih){n(!1)}else n(!1);else n(!1)}))}removeElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(Cesium.defined(o))if(o.objectStoreNames.contains(e))try{const n=o.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{i(!0)},n.onerror=()=>{i(!1)}}catch(Ih){i(!1)}else i(!1);else i(!1)}))}clear(e){return new Promise(((t,i)=>{const{db:n}=this;if(Cesium.defined(n))if(n.objectStoreNames.contains(e))try{const i=n.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>{t(!0)},i.onerror=()=>{t(!1)}}catch(Ih){t(!1)}else t(!1);else t(!1)}))}}class cm{constructor(e){const{appendForwardSlash:t,Credit:i,defaultValue:n,defined:o,DeveloperError:a,Event:r,Resource:s,Math:l}=Cesium;e=n(e,{});const{url:c}=e;if(!o(c))throw new a("options.url is required.");const u=c.substring(0,c.indexOf("datas"));this.tablename=c.substring(0,c.indexOf("datas/")+6,c.length);const d=this;new lm({name:u+this.tablename}).then((e=>{d._indexedDBScheduler=e})),this._indexedDBSetting={isOpen:!1,clear:()=>{d._indexedDBScheduler.clear(d.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=t(c);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=e.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new a("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=s.createIfNeeded(p),this._transparent=n(e.transparent,!0),this._name=e.name||"",this._urlTemplate=void 0,this._errorEvent=new r,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._fRatio=n(e.ratio,l.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let m=n(e.credit,new i("MapQuest, SuperMap iServer Imagery"));"string"==typeof m&&(m=new i(m)),this._credit=m,this._ready=!1,this._readyPromise=Oo(),this._options=e,vm.call(this)}get url(){return this._url}get name(){return this._name}set name(e){this._name=e}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(e){this._fRatio=e}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){const{defined:o,DeveloperError:a,ImageryProvider:r}=Cesium;if(!this.ready)throw new a("requestImage must not be called before the imagery provider is ready.");const s=mm.call(this,e,t,i),l=this._resource.getDerivedResource({url:s,request:n}),c=this;if(!this._indexedDBSetting.isOpen)return r.loadImage(this,l);if(o(this._indexedDBScheduler)){const e=this._indexedDBScheduler.getElementFromDB(this.tablename,s);try{return e.then((e=>{if(o(e)){const t=new Image;return t.src=e,t}return r.loadImage(c,l)}))}catch(Ih){return r.loadImage(c,l)}}}pickFeatures(e,t,i,n,o){}}let um={};const dm=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],pm=[1.690163571602655e-9,3.3803271432053056e-9,6.760654286410611e-9,1.3521308572821242e-8,2.7042617145642484e-8,5.408523429128511e-8,1.0817046858256998e-7,2.1634093716513974e-7,4.3268187433028044e-7,8.653637486605571e-7,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function mm(e,t,i){let n;if(this.isTileMap){if("DEGREE"===this._coordUnit){const o=dm[i+1]||dm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if("METER"===this._coordUnit){const o=dm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}function vm(){const{Resource:e}=Cesium;if(this.isTileMap){const t=e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});try{t.then((e=>{Cm.call(this,e)}))}catch(Ih){wm.call(this)}}else try{e.fetchText({url:this.url+"config"}).then((e=>{hm.call(this,e)}))}catch(Ih){wm.call(this)}}function hm(e){const t=gm.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const s=t.levels,l=s.length;if(this._minimumLevel=i(s[0],0),this._maximumLevel=i(s[l-1],l-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const e=a.toRadians(t.left),i=a.toRadians(t.right),n=a.toRadians(t.bottom),o=a.toRadians(t.top);this._rectangle=new r(e,n,i,o)}const c=this._tilingScheme;this._rectangle.west<c.rectangle.west&&(this._rectangle.west=c.rectangle.west),this._rectangle.east>c.rectangle.east&&(this._rectangle.east=c.rectangle.east),this._rectangle.south<c.rectangle.south&&(this._rectangle.south=c.rectangle.south),this._rectangle.north>c.rectangle.north&&(this._rectangle.north=c.rectangle.north);const u=c.positionToTileXY(r.southwest(this._rectangle),this._minimumLevel),d=c.positionToTileXY(r.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(d.x-u.x)+1)*(window.Math.abs(d.y-u.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=c,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function gm(e){const t="http://www.supermap.com/SuperMapCache/sci3d",i=(e=(new DOMParser).parseFromString(e,"application/xml")).childNodes[0],n=function(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),a=o.length;for(let e=0;e<a;e++){const a=o[e];a.localName===t&&-1!==i.indexOf(a.namespaceURI)&&n.push(a)}return n}}(bm(i,"Levels",t),"Level",t)||[],o=[];for(let v=0;v<n.length;v++)o.push(parseInt(n[v].textContent,10));const a=bm(i,"Bounds",t),r=ym(a,"Left",t),s=ym(a,"Right",t),l=ym(a,"Top",t),c=ym(a,"Bottom",t),u=fm(i,"FileExtentName",t),d=ym(i,"CellWidth",t),p=ym(i,"CellHeight",t),m=fm(i,"CacheName",t);return this._name=m||"",{left:r,right:s,top:l,bottom:c,fileExtentName:u,levels:o,imageSizeWidth:d,imageSizeHeight:p}}function fm(e,t,i){const n=bm(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function ym(e,t,i){const n=bm(e,t,i);if(Cesium.defined(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function bm(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let e=0;e<o;e++){const o=n[e];if(o.localName===t&&-1!==i.indexOf(o.namespaceURI))return o}}}function Cm(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r,WebMercatorTilingScheme:s}=Cesium,l=e.prjCoordSys.coordUnit;this._coordUnit=l;const c=e.bounds,u=e.visibleScales;if(n(u)&&u.length>1&&n(this._maximumLevel)){const e=u[u.length-1];this._maximumLevel=function(e){for(let t=pm.length;t--;)if(e[t]<=e)return t}(e)}if("DEGREE"===l)this._tilingScheme=new o,c.left=a.clamp(c.left,-180,180),c.bottom=a.clamp(c.bottom,-90,90),c.right=a.clamp(c.right,-180,180),c.top=a.clamp(c.top,-90,90),this._rectangle=r.fromDegrees(c.left,c.bottom,c.right,c.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const e=new t(c.left,c.bottom,0);e.x=Math.max(-20037508.342789244,e.x),e.y=Math.max(-20037508.342789244,e.y);const i=new t(c.right,c.top,0);i.x=Math.min(20037508.342789244,i.x),i.y=Math.min(20037508.342789244,i.y),this._tilingScheme=new s;const n=this._tilingScheme.projection.unproject(e),o=this._tilingScheme.projection.unproject(i);this._rectangle=new r(n.longitude,n.latitude,o.longitude,o.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function wm(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";um=e.handleError(um,this,this._errorEvent,i,0,0,0,vm.bind(this)),this._readyPromise.reject(new t(i))}var Om=S({name:"VcImageryProviderSupermap",props:{url:String,...Gi,...Wi,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...Ki},emits:gs,setup(e,t){const i=o();i.cesiumClass="SuperMapImageryProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||cm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.SuperMapImageryProvider(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const xm={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class Sm{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=e.subdomains||["1","2","3"],this._url=e.url||[e.protocol||"",xm[e.mapStyle]||xm.vector].join("");const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=Oo(),this._ready=!0,this._readyPromise.resolve(!0),this._style=e.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,_m.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function _m(e,t,i,n){let o=this._url;const a=this._subdomains,r=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",r);return this._resource.getDerivedResource({url:o,request:n})}var Em=S({name:"VcImageryProviderTencent",props:{...Ai,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...Fi,...Gi,...Wi,...Ni,...Vi,...Ki},emits:gs,setup(e,t){const i=o();i.cesiumClass="TencentImageryProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||Sm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TencentImageryProvider(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Pm={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"},Tm={},Mm={},Im={},jm={},Lm={},Am={};class Dm{constructor(e){Object.keys(Pm).forEach((t=>{switch(Tm[Pm[t]]=e.protocol+"://{s}.tianditu.gov.cn/"+Pm[t]+"/wmts",Mm[Pm[t]]=Pm[t].slice(0,3),Im[Pm[t]]=Pm[t].slice(4),jm[Pm[t]]="tiles","w"===Im[Pm[t]]?Lm[Pm[t]]="900913":Lm[Pm[t]]="4490",Pm[t]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":Am[Pm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":Am[Pm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":Am[Pm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":Am[Pm[t]]=["1","2","3","4","5","6","7","8","9","10"]}}));const{Credit:t,defaultValue:i,Event:n,GeographicTilingScheme:o,WebMercatorTilingScheme:a,when:r}=Cesium;e=i(e,{}),this._mapStyle=i(e.mapStyle,Pm.IMG_W),this._url=e.url||i(e.url,Tm[this._mapStyle]),this._token=e.token,this._layer=i(e.layer,Mm[this._mapStyle]),this._style=i(e.style,"default"),this._tileMatrixSetID=i(e.tileMatrixSetID,Im[this._mapStyle]),this._tileMatrixLabels=i(e.tileMatrixLabels,Am[this._mapStyle]),this._format=i(e.format,jm[this._mapStyle]),this._epsgCode=Lm[this._mapStyle],this._tilingScheme="900913"===this._epsgCode?new a:new o,this._tileWidth=i(e.tileWidth,256),this._tileHeight=i(e.tileHeight,256),this._minimumLevel=i(e.minimumLevel,0),this._maximumLevel=i(e.maximumLevel,Am[this._mapStyle].length),this._rectangle=i(e.rectangle,this.tilingScheme.rectangle),this._readyPromise=Promise.resolve(!0),this._errorEvent=new n;const s=i(e.credit,"天地图全球影像服务");this._credit="string"==typeof s?new t(s):s,this._subdomains=i(e.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=e.tileDiscardPolicy}requestImage(e,t,i){const n=km.call(this,e,t,i);return Cesium.ImageryProvider.loadImage(this,n)}pickFeatures(e,t,i,n,o){}get url(){return this._url}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get readyPromise(){return this._readyPromise}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function km(e,t,i){var n;const{combine:o,defined:a,defaultValue:r,queryToObject:s,objectToQuery:l,Uri:c}=Cesium,u=(0,Object.freeze)({service:"WMTS",version:"1.0.0",request:"GetTile"});"900913"===this._epsgCode&&(i-=1);const d=this._tileMatrixLabels,p=a(d)?d[i]:i.toString(),m=this._subdomains;let v=this._url.replace("{s}",m[(e+t+i)%m.length]);const h=new c(v);let g=s(r(null==(n=h.query)?void 0:n.call(h),""));g=o(u,g),g.tilematrix=p,g.layer=this._layer,g.style=this._style,g.tilerow=t,g.tilecol=e,g.tilematrixset=this._tileMatrixSetID,g.format=this._format;const f=l(g);return v=h.toString()+"?"+f,a(this._proxy)&&(v=this._proxy.getURL(v)),a(this._token)&&(v+="&tk="+this._token),v}var Rm=S({name:"VcImageryProviderTianditu",props:{...Ai,...Gi,...Wi,...Ni,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","ela_c","ela_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"天地图全球影像服务"},...Ki},emits:gs,setup(e,t){const i=o();i.cesiumClass="TiandituImageryProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||Dm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TiandituImageryProvider(t)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Bm=S({name:"VcImageryProviderTileCoordinates",props:{...Vi,...zi,color:{type:[Object,String,Array],default:"YELLOW"},...Hi,...Ui},emits:gs,setup(e,t){const i=o();return i.cesiumClass="TileCoordinatesImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Nm=S({name:"VcImageryProviderTms",props:{url:[String,Object],...$i,...Fi,...Gi,...Wi,...Ni,...Vi,...zi,...Hi,...Ui,flipXY:Boolean,...Ki},emits:gs,setup(e,t){const i=o();return i.cesiumClass="TileMapServiceImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Vm=S({name:"VcImageryProviderTiledcache",props:{...Ai,...Yi,...Fi,...Gi,...Wi,...Ni,...Vi,...zi,...Hi,...Ui,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}},emits:gs,setup(e,t){const i=o();i.cesiumClass="UrlTemplateImageryProvider";const n=No(e,t,i);if(void 0===n)return;i.createCesiumObject=async()=>{const t=n.transformProps(e),{Credit:i,defined:o,defaultValue:r,DeveloperError:s,Ellipsoid:l,GeographicTilingScheme:c,Rectangle:u,Resource:d,UrlTemplateImageryProvider:p}=Cesium,{url:m,dir:v,format:h}=t;if(!o(m))throw new s("options.url is required.");if(!o(v))throw new s("options.dir is required.");const g=d.createIfNeeded(m);g.url+=`?dir=${v}&scale={scale}&col={x}&row={y}&format=${h}`;const f=r(t.tilingScheme,new c({ellipsoid:r(t.ellipsoid,l.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),y=r(t.tileWidth,256),b=r(t.tileHeight,256),C=t.maximumLevel,w=r(t.minimumLevel,0),O=r(t.rectangle,f.rectangle),x=f.positionToTileXY(u.southwest(O),w),S=f.positionToTileXY(u.northeast(O),w),_=(Math.abs(S.x-x.x)+1)*(Math.abs(S.y-x.y)+1);if(_>4)throw new s("The rectangle and minimumLevel indicate that there are "+_+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let E=r(t.credit,"");return"string"==typeof E&&(E=new i(E)),new p({url:g,credit:E,tilingScheme:f,tileWidth:y,tileHeight:b,minimumLevel:w,maximumLevel:C,rectangle:O,customTags:{scale:(t,i,n,o)=>{const r=1/e.scales[o];return a(t,"{scale}",r)}}})};const a=(e,t,i)=>{if(e&&e.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(e.urlSchemeZeroPadding,t)){const n=e.urlSchemeZeroPadding[t];if("string"==typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i};return()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var zm=S({name:"VcImageryProviderUrltemplate",props:{...Ai,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...qi,...Fi,...Gi,...Wi,...Ni,...Vi,...zi,...Hi,...Ui,hasAlphaChannel:{type:Boolean,default:!0},...Xi,...Bi,customTags:Object,...Ki},emits:gs,setup(e,t){const i=o();return i.cesiumClass="UrlTemplateImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Fm=S({name:"VcImageryProviderWms",props:{...Ai,...Ri,parameters:Object,getFeatureInfoParameters:Object,...Bi,...Xi,...Ni,...Vi,...zi,...Hi,...Ui,...Gi,...Wi,crs:String,srs:String,...Fi,...qi,...Qi,...Ji,getFeatureInfoUrl:[String,Object]},emits:gs,setup(e,t){const i=o();return i.cesiumClass="WebMapServiceImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Hm=S({name:"VcImageryProviderWmts",props:{...Ai,...Yi,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...Qi,...Ji,dimensions:Object,...Hi,...Ui,...Vi,...Ni,...Gi,...Wi,...zi,...Fi,...qi},emits:gs,setup(e,t){const i=o();return i.cesiumClass="WebMapTileServiceImageryProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Um=S({name:"VcTerrainProviderCesium",props:{url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},...zi,...Fi},emits:gs,setup(e,t){const i=o();i.cesiumClass="CesiumTerrainProvider";const n=No(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return Cesium.defined(t.url)?new Cesium.CesiumTerrainProvider(t):Cesium.createWorldTerrain({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask})},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Wm=S({name:"VcTerrainProviderArcgis",props:{url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...zi,...Di},emits:gs,setup(e,t){const i=o();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Gm=S({name:"VcTerrainProviderVrTheworld",props:{url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...zi,...Fi},emits:gs,setup(e,t){const i=o();return i.cesiumClass="VRTheWorldTerrainProvider",No(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var $m=S({name:"VcTerrainProviderTianditu",props:{url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String},emits:gs,setup(e,t){const i=o();i.cesiumClass="GeoTerrainProvider";const n=No(e,t,i);if(void 0===n)return;const{emit:a}=t,r=Vo();let s;return i.createCesiumObject=async()=>new Promise(((t,i)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const i=[];for(let t=0;t<e.subdomains.length;t++){const n=e.url.replace("{s}",e.subdomains[t])+"mapservice/swdx?tk="+e.token;i.push(n)}t(new Cesium.GeoTerrainProvider({urls:i}))}})),i.unmount=async()=>{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{be(i,"readyPromise")&&a("readyPromise",e,null==r?void 0:r.viewer,i.proxy)})),r&&(r.viewer.terrainProvider=e),null==s||s.parentNode.removeChild(s),!0},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Hp,Up,Qp,Jp,Kp,em,tm,im,nm,om,Om,Em,Rm,Bm,Nm,Vm,zm,Fm,Hm,Um,Wm,Gm,$m].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Zm=Hp,Ym=Up,qm=Qp,Xm=Jp,Qm=Kp,Jm=em,Km=tm,ev=im,tv=nm,iv=om,nv=Om,ov=Em,av=Rm,rv=Bm,sv=Nm,lv=Vm,cv=zm,uv=Fm,dv=Hm,pv=Um,mv=Wm,vv=Gm,hv=$m;var gv=S({name:"VcDatasourceCustom",props:{...mt,...Un,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}},emits:bs,setup(e,t){const i=o();return i.cesiumClass="CustomDataSource",eo(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var fv=S({name:"VcDatasourceCzml",props:{...mt,...Un,entities:{type:Array,default:()=>[]},czml:{type:[String,Object],required:!0},...Nn,...Fi,destroy:{type:Boolean,default:!1}},emits:bs,setup(e,t){const i=o();i.cesiumClass="CzmlDataSource";const n=eo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,t)},()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var yv=S({name:"VcDatasourceGeojson",props:{...mt,...Un,entities:{type:Array,default:()=>[]},...Bn,...Nn,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:Ie}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:Ie}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:Ie}},..._i,...Fi,destroy:{type:Boolean,default:!1}},emits:bs,setup(e,t){const i=o();i.cesiumClass="GeoJsonDataSource";const n=eo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,t)},()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var bv=S({name:"VcDatasourceKml",props:{...mt,...Un,entities:{type:Array,default:()=>[]},...Bn,camera:Object,canvas:HTMLCanvasElement,...Nn,..._i,...zi,...Fi,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]},emits:bs,setup(e,t){const i=o();i.cesiumClass="KmlDataSource";const n=eo(e,t,i),a=Vo();return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.camera||(t.camera=null==a?void 0:a.viewer.camera),t.canvas||(t.canvas=null==a?void 0:a.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",t)},()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[gv,fv,yv,bv].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Cv=gv,wv=fv,Ov=yv,xv=bv;var Sv=S({name:"VcGraphicsBillboard",props:{...rt,...dt,...lt,...it,...at,...gt,...ot,...Je,...ut,...Qe,...vt,...ft,...nt,...pt,...ht,...ct,...et,...mt,...tt,...st},emits:hs,setup(e,t){const i=o();return i.cesiumClass="BillboardGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _v=S({name:"VcGraphicsBox",props:{...mt,...yt,...ot,...bt,...Ct,...wt,...Ot,...xt,...St,...tt},emits:hs,setup(e,t){const i=o();return i.cesiumClass="BoxGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ev=S({name:"VcGraphicsCorridor",props:{...mt,..._t,...ft,...nt,...ot,...Et,...Pt,...Tt,...Mt,...bt,...Ct,...wt,...Ot,...xt,...St,...tt,...It,...jt},emits:hs,setup(e,t){const i=o();return i.cesiumClass="CorridorGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pv=S({name:"VcGraphicsCylinder",props:{...mt,...Lt,...At,...Dt,...ot,...bt,...Ct,...wt,...Ot,...xt,...kt,...Rt,...St,...tt},emits:hs,setup(e,t){const i=o();return i.cesiumClass="CylinderGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Tv=S({name:"VcGraphicsEllipse",props:{...mt,...Bt,...Nt,...nt,...ot,...Et,...Pt,...ut,...Vt,...Mt,...bt,...Ct,...wt,...Ot,...xt,...kt,...St,...tt,...It,...jt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipseGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Mv=S({name:"VcGraphicsEllipsoid",props:{...mt,...zt,...Ft,...Ht,...Ut,...Wt,...Gt,...ot,...bt,...Ct,...wt,...Ot,...xt,...$t,...Zt,...Yt,...St,...tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="EllipsoidGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Iv=S({name:"VcGraphicsLabel",props:{...mt,...qt,...Xt,...Qt,...dt,...Jt,...Kt,...ei,...lt,...it,...at,...gt,...ot,...ti,...Ot,...xt,...ht,...ct,...pt,...tt,...et},emits:ms,setup(e,t){const i=o();return i.cesiumClass="LabelGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var jv=S({name:"VcGraphicsModel",props:{...mt,...ii,...dt,...ni,...oi,...ai,...ri,...si,...St,...ot,...li,...ci,...Je,...ui,...di,...pi,...mi,...tt,...vi,...hi,...gi},emits:ms,setup(e,t){const i=o();return i.cesiumClass="ModelGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Lv=S({name:"VcGraphicsPath",props:{...mt,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...ft,resolution:{type:[Number,Object,Function],default:60},...Ct,...tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PathGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Av=S({name:"VcGraphicsPlane",props:{...mt,...fi,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Oe}},...bt,...Ct,...wt,...Ot,...xt,...St,...tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PlaneGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Dv=S({name:"VcGraphicsPoint",props:{...mt,...yi,...ot,...Je,...Ot,...xt,...pt,...ht,...tt,...et},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PointGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var kv=S({name:"VcGraphicsPolygon",props:{...mt,...bi,...nt,...ot,...Et,...Pt,...Vt,...Mt,...bt,...Ct,...wt,...Ot,...xt,...Ci,...wi,...Oi,...xi,...St,...tt,...It,...jt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolygonGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Rv=S({name:"VcGraphicsPolyline",props:{...mt,..._t,...ft,...Mt,...Ct,...Si,...xi,..._i,...St,...tt,...It,...jt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolylineGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Bv=S({name:"VcGraphicsPolylineVolume",props:{...mt,..._t,...Ei,...Tt,...Mt,...bt,...Ct,...wt,...Ot,...xt,...St,...tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="PolylineVolumeGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Nv=S({name:"VcGraphicsRectangle",props:{...mt,...Pi,...nt,...ot,...Et,...Pt,...ut,...Vt,...Mt,...bt,...Ct,...wt,...Ot,...xt,...St,...tt,...It,...jt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="RectangleGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Vv=S({name:"VcGraphicsTileset",props:{...mt,...ii,...Ti},emits:ms,setup(e,t){const i=o();return i.cesiumClass="Cesium3DTilesetGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var zv=S({name:"VcGraphicsWall",props:{...mt,..._t,...Mi,...Ii,...Mt,...bt,...Ct,...wt,...Ot,...xt,...St,...tt},emits:ms,setup(e,t){const i=o();return i.cesiumClass="WallGraphics",io(e,t,i),()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Sv,_v,Ev,Pv,Tv,Mv,Iv,jv,Lv,Av,Dv,kv,Rv,Bv,Nv,Vv,zv].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Fv=Sv,Hv=_v,Uv=Ev,Wv=Pv,Gv=Tv,$v=Mv,Zv=Iv,Yv=jv,qv=Lv,Xv=Av,Qv=Dv,Jv=kv,Kv=Rv,eh=Bv,th=Nv,ih=Vv,nh=zv;var oh=S({name:"VcPostProcessStage",props:{fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...Fn,...Hn,name:String},emits:ms,setup(e,t){const i=o();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=Kn(e,t,i);if(void 0===n)return;const{$services:a}=n;return i.mount=async()=>{const{postProcessStages:e}=a,t=e.add(i.cesiumObject);return e.contains(t)},i.unmount=async()=>{const{postProcessStages:e}=a;return null==e?void 0:e.remove(i.cesiumObject)},()=>{var e;return T(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const ah={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]};var rh=S({name:"VcPostProcessStageScan",props:{type:{type:String,default:"radar"},options:Object},emits:ms,setup(t,n){const a=o();a.cesiumClass="VcPostProcessStageScan",a.cesiumEvents=[];const r=Kn(t,n,a);if(void 0===r)return;const s=e(""),l=e(null),{$services:c}=r,u=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=new Cesium.Cartographic(n.longitude+Cesium.Math.toRadians(.001),n.latitude,n.height),u=Cesium.Cartographic.toCartesian(c,i.scene.globe.ellipsoid),d=new Cesium.Cartesian4(u.x,u.y,u.z,1),p=new Cesium.Quaternion,m=new Cesium.Matrix3,v=(new Date).getTime(),h=new Cesium.Cartesian4,g=new Cesium.Cartesian4,f=new Cesium.Cartesian4,y=new Cesium.Cartesian3,b=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform vec3 u_scanLineNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 v01 = testPt - ptOnLine;\n    normalize(v01);\n    vec3 temp = cross(v01, lineNormal);\n    float d = dot(temp, u_scanPlaneNormalEC);\n    return d > 0.5;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n    return length(tempPt - ptOnLine);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    float twou_radius = u_radius * 2.0;\n    if(dis < u_radius)\n    {\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n      {\n        float dis1= length(prjOnPlane.xyz - lineEndPt);\n        f = abs(twou_radius -dis1) / twou_radius;\n        f = pow(f, 3.0);\n      }\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g);return y.x=t.x-e.x,y.y=t.y-e.y,y.z=t.z-e.z,Cesium.Cartesian3.normalize(y,y),y},u_radius:t.radius,u_scanLineNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),n=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g),o=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,f);y.x=n.x-e.x,y.y=n.y-e.y,y.z=n.z-e.z,Cesium.Cartesian3.normalize(y,y),b.x=o.x-e.x,b.y=o.y-e.y,b.z=o.z-e.z;const r=((new Date).getTime()-v)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(y,r*Cesium.Math.PI*2,p),Cesium.Matrix3.fromQuaternion(p,m),Cesium.Matrix3.multiplyByVector(m,b,b),Cesium.Cartesian3.normalize(b,b),b},u_scanColor:t.color}}}}}(c),d=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=(new Date).getTime(),u=new Cesium.Cartesian4,d=new Cesium.Cartesian4,p=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius)\n    {\n      float f = 1.0 -abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,d);return p.x=t.x-e.x,p.y=t.y-e.y,p.z=t.z-e.z,Cesium.Cartesian3.normalize(p,p),p},u_radius:function(){return t.radius*(((new Date).getTime()-c)%t.interval)/t.interval},u_scanColor:t.color}}}}}(c);let p=[];const m=i((()=>Object.assign({},ah,t.options)));return p.push(f((()=>m),(e=>{a.mounted&&a.proxy.reload()}),{deep:!0})),a.createCesiumObject=async()=>{const e=r.transformProps(m.value);let i;return"radar"===t.type?i=u.webgl(e):"circle"===t.type&&(i=d.webgl(e)),s.value=i.shaderSource,l.value=i.uniforms,!0},h((()=>{p.forEach((e=>e())),p=[]})),()=>O(oh,{fragmentShader:s.value,uniforms:l.value})}});var sh=S({name:"VcPostProcessStageCollection",props:{postProcesses:{type:Array,default:()=>[]}},emits:ms,setup(e,t){const i=o();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=Kn(e,t,i);if(void 0===n)return;const{$services:a}=n,r=[];let s=[];return s.push(f((()=>e.postProcesses),(e=>{var t,n;i.mounted&&(null==(n=(t=i.proxy).reload)||n.call(t))}),{deep:!0})),i.createCesiumObject=async()=>r,i.mount=async()=>{const{postProcessStages:t}=a;return e.postProcesses.forEach((e=>{const i=n.transformProps(e);r.push(t.add(new Cesium.PostProcessStage(i)))})),!0},i.unmount=async()=>{const{postProcessStages:e}=a;return r.forEach((t=>{e.remove(t)})),r.length=0,!0},h((()=>{s.forEach((e=>e())),s=[]})),()=>{var e,n;return t.slots.default?O("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ca(t.slots.default)):T(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[oh,rh,sh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const lh=oh,ch=rh,uh=sh;var dh=S({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>Gn},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"}},setup(e,{slots:t}){const i=oe(e);return()=>B(t,"default",{config:null==i?void 0:i.value})}});dh.install=e=>{e.component(dh.name,dh)};const ph=dh,mh=ph,vh={...ms,stop:e=>!0};var hh=S({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...xn},emits:vh,setup(t,i){var n;const a=o();a.cesiumClass="VcAnalysisFlood",a.cesiumEvents=[];const r=Kn(t,i,a);if(void 0===r)return;const{emit:s}=i,l=e(!1);null==(n=we(a).proxy.creatingPromise)||n.then((()=>{l.value=!0}));const c=e(!1),u=e(null),d=e(-1),p=e(null);let m=!1,v=[];v.push(f((()=>t.minHeight),(e=>{d.value=e}))),a.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:e}=Cesium;return u.value={color:e.fromColor(Ie(t.color))},p.value},a.mount=async()=>{const{viewer:e}=r.$services;return e.clock.onTick.addEventListener(g),!0},a.unmount=async()=>{const{viewer:e}=r.$services;return e.clock.onTick.removeEventListener(g),d.value=-1,c.value=!1,!0};const g=()=>{if(c.value)if(d.value<=t.maxHeight)d.value+=t.speed,m=!1;else{be(a,"stop")&&s("stop",p.value),m=!0,t.loop?d.value=t.minHeight:c.value=!1}};return h((()=>{v.forEach((e=>e())),v=[]})),Object.assign(a.proxy,{start:e=>{d.value=Cesium.defined(e)?e:t.minHeight,c.value=!0},pause:()=>{c.value=!c.value,m&&(d.value=t.minHeight)},stop:()=>{d.value=-1,c.value=!1},getCurrentHeight:()=>d.value}),()=>{if(l.value){const{createGuid:e}=Cesium;return O(Qc,{asynchronous:!1,ref:p},(()=>O(Qu,{id:e(),attributes:u.value},(()=>O(Yd,{extrudedHeight:d.value,polygonHierarchy:t.polygonHierarchy})))))}return T("v-if")}}});const gh=Object.assign({},$l,{icon:"vc-icons-analysis-sightline"}),fh=Object.assign({},ec,{polylineOpts:Object.assign({},Xl,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Zl,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),yh=Object.assign({},$l,{icon:"vc-icons-analysis-viewshed"}),bh=Object.assign({},ic,{pointOpts:Object.assign({},Yl,{show:!1}),polylineOpts:Object.assign({},Xl,{width:15}),primitiveOpts:Object.assign({},Zl,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Jl),removeAll:Object.assign({},Jl,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),Ch=Object.assign({},$l,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),wh=["sightline","viewshed"],Oh={...uc,analyses:{type:Array,default:()=>wh,validator:e=>{let t=!0;return e.forEach((e=>{wh.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Ch},sightlineActionOpts:{type:Object,default:()=>gh},sightlineAnalysisOpts:{type:Object,default:()=>fh},viewshedActionOpts:{type:Object,default:()=>yh},viewshedAnalysisOpts:{type:Object,default:()=>bh}},xh=pe(Oh);var Sh=S({name:"VcAnalysisSightline",props:{...cc,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:Cs,setup:(e,t)=>"segment"===e.sightlineType||"circle"===e.sightlineType?sp(e,t,"VcAnalysisSightline"):"polyline"===e.sightlineType?cp(e,t,"VcAnalysisSightline"):void 0}),_h=S({name:"VcAnalysisViewshed",props:{...cc,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:Cs,setup:(e,t)=>sp(e,t,"VcAnalysisViewshed")});var Eh=S({name:"VcAnalyses",props:Oh,emits:{...Cs,fabUpdated:e=>!0},setup(t,n){var a;const r=o();r.cesiumClass="VcAnalyses";const{t:s}=Yn(),l={},c=b(Object.assign({},xh.clearActionOpts,t.clearActionOpts)),u=b(Object.assign({},xh.mainFabOpts,t.mainFabOpts)),d=b(Object.assign({},xh.sightlineActionOpts,t.sightlineActionOpts)),p=b(Object.assign({},xh.sightlineAnalysisOpts,t.sightlineAnalysisOpts)),m=b(Object.assign({},xh.viewshedActionOpts,t.viewshedActionOpts)),v=b(Object.assign({},xh.viewshedAnalysisOpts,t.viewshedAnalysisOpts));l.sightlineActionOpts=d,l.sightlineAnalysisOpts=p,l.viewshedActionOpts=m,l.viewshedAnalysisOpts=v,l.clearActionOpts=c;const h=i((()=>t.analyses.map((t=>({name:t,type:"analysis",actionStyle:{background:l[`${R(t)}ActionOpts`].color,color:l[`${R(t)}ActionOpts`].textColor},actionClass:`vc-analysis-${t} vc-analysis-button`,actionRef:e(null),actionOpts:l[`${R(t)}ActionOpts`],cmp:g(t),cmpRef:e(null),cmpOpts:l[`${R(t)}AnalysisOpts`],tip:l[`${R(t)}ActionOpts`].tooltip.tip||s(`vc.analysis.${R(t)}.tip`),isActive:!1})))));function g(e){switch(e){case"sightline":return Sh;case"viewshed":return _h;default:return}}return null==(a=bp(t,n,r,h,u,c,"analysis"))?void 0:a.renderContent}});[hh,Eh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ph=Eh;var Th=((e=[])=>({version:"3.0.18",install:(t,i)=>{if(t[he])return;t[he]=!0,e.forEach((e=>{t.use(e,i)}));const n=Object.assign({cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},i);oe(n,t,!0)}}))([...[xs,Dl,kl,Rl,Bl,Nl,Vl,zl,Fl,Hl,Ul,Wl,Gl,wp,Vp,Vc,Zm,Ym,qm,Xm,Qm,Jm,Km,ev,tv,iv,nv,ov,av,rv,sv,lv,cv,uv,dv,pv,mv,vv,hv,Cv,wv,Ov,xv,Bc,Fv,Hv,Uv,Wv,Gv,$v,Zv,Yv,qv,Xv,Qv,Jv,Kv,eh,th,ih,nh,Qc,Jc,Kc,eu,tu,iu,nu,Bu,Nu,Vu,zu,Fu,Hu,Uu,Wu,Gu,$u,Zu,Yu,Xu,Md,Id,jd,Ld,Ad,Dd,kd,Rd,Bd,Nd,Vd,zd,Fd,Hd,Ud,Wd,Gd,$d,Zd,Yd,qd,Xd,Qd,Jd,Kd,ep,tp,ip,np,op,ap,Cu,wu,xu,Su,Ou,lh,ch,uh,Yr,qr,ls,cs,us,Xr,Qr,Jr,Kr,es,ts,is,ns,os,as,rs,ss,ds,ps,ph,hh,Ph]]),Mh={name:"en-us",nativeName:"English (US)",vc:{loadError:"needs to be child of VcViewer",navigation:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view.",innerTip:"Drag inner gyroscope: free orbit. TIP: You can also free orbit by holding the CTRL key and dragging the map.",title:"Click and drag to rotate the camera."},zoomCotrol:{zoomInTip:"Zoom in",zoomResetTip:"Reset zoom",zoomOutTip:"Zoom out"},print:{printTip:"Viewer screenshot/print",printViewTitle:"VueCesium Print View",credit:"Map Credits",screenshot:"Screenshot"},myLocation:{myLocationTip:"Centre map at your current location",positioning:"Positioning...",fail:"Positioning failed",centreMap:"My Location",lat:"Lat",lng:"Lng",address:"Address"},statusBar:{lat:"Lat",lng:"Lng",zone:"ZONE",e:"E",n:"N",elev:"Elev",level:"Level",heading:"H",pitch:"P",roll:"R",cameraHeight:"CameraH",tip:"Click to switch the mouse display coordinates to UTM projection coordinates"}},navigationSm:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view."},zoomCotrol:{zoomInTip:"Zoom in",zoomBarTip:"Drag the bar up to zoom in, and down to zoom out.",zoomOutTip:"Zoom out"}},measurement:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},distance:{tip:"Distance",drawingTipStart:"Click the left button to draw the starting point of the distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},"component-distance":{tip:"Component Distance",drawingTipStart:"Click the left mouse button to draw the starting point of component distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the component distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Polyline Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},horizontal:{tip:"Horizontal Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},vertical:{tip:"Vertical Distance",drawingTipStart:"Click the left button to draw the starting point of the vertical distance measurement.",drawingTipEnd:"Click the left button to draw the end point of the vertical distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},height:{tip:"Height ",drawingTipStart:"Click the left button to draw the height measurement point.",drawingTipEnd:"Click the left button to draw the height measurement point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},area:{tip:"Area",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Point Coordinate",drawingTipStart:"Click the left button to draw the point coordinate measurement.",drawingTipEnd:"Click the left button to draw the point coordinate measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification.",lng:"lng:",lat:"lat:",height:"height:",slope:"slope:"},rectangle:{tip:"Rectangle",drawingTipStart:"Click the left button to draw the rectangle measurement.",drawingTipEnd:"Click the left button to draw the rectangle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Regular",drawingTipStart:"Click the left button to draw the regular measurement.",drawingTipEnd:"Click the left button to draw the regular measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Circle",drawingTipStart:"Click the left button to draw the circle measurement.",drawingTipEnd:"Click the left button to draw the circle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear measurement results"}},drawing:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},pin:{tip:"Drawing pin",drawingTipStart:"Click the left button to draw a pin.",drawingTipEnd:"Click the left button to draw a pin.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Drawing point",drawingTipStart:"Click the left button to draw a point.",drawingTipEnd:"Click the left button to draw a point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Drawing polyline",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polygon:{tip:"Drawing polygon",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},rectangle:{tip:"Drawing rectangle",drawingTipStart:"Click the left button to draw the starting point of the rectangle.",drawingTipEnd:"Click the left button to draw the end point of the rectangle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Drawing circle",drawingTipStart:"Click the left button to draw the starting point of the circle.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Drawing regular",drawingTipStart:"Click the left button to draw the starting point of the regular.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear drawing results"}},analysis:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},sightline:{tip:"Sightline",drawingTipStart:"Click the left button to draw the view point of the sightline analysis.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the sightline analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},viewshed:{tip:"Viewshed",drawingTipStart:"Click the left button to draw the view point of the viewshed analysis.",drawingTipEnd:"Click the left button to draw the end point of the viewshed analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear analysis results"}},overview:{show:"Show",hidden:"Hidden"}}};export{Gl as A,mh as B,Mh as C,Gn as D,Th as E,Hu as V,fr as a,Se as b,Qu as c,Gd as d,Xd as e,Be as f,Kc as g,tu as h,zu as i,Yu as j,Ph as k,Yr as l,xe as m,Ao as n,Ca as o,Bu as p,Fu as q,Ov as r,Cv as s,Su as t,Vo as u,wu as v,iu as w,zc as x,uv as y,ov as z};
