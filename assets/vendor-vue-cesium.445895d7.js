import{c0 as e,c1 as t,c2 as i,c3 as n,bw as o,bZ as a,bK as r,c4 as s,bz as l,c5 as c,c6 as u,bG as d,c7 as p,c8 as m,bB as v,bH as h,c9 as g,bE as f,bx as y,bF as b,bS as C,bI as w,bN as O,bO as x,bM as S,bP as _,bQ as E,bT as P,ca as T,bL as M,cb as I,cc as j,cd as L,a3 as A,aT as D,bA as R,ce as k,cf as B}from"./vendor.401c7cc2.js";import{i as N,a as V,f as z,c as F,g as H,b as U,d as W,e as G,h as $,r as Z,j as Y}from"./vendor-lodash.65955a29.js";import{r as q,i as X}from"./vendor-echarts.39cb2ec2.js";const Q="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,J=Q?Symbol("VueCesium"):"VueCesium",K=Q?Symbol("_vc_f_"):"_vc_f_",ee=Symbol();function te(e){const t=Object.getPrototypeOf(e),i={};return Object.setPrototypeOf(i,t),Object.keys(e).forEach((t=>{const o=oe(e[t]);if(e[t]&&n(e[t])||e[t]instanceof Element)i[t]=e[t];else if(e[t]&&"object"==typeof e[t]&&!Cesium[o]){const n=te(e[t]);Object.keys(n).length&&(i[t]=n)}else""!==e[t]&&void 0!==e[t]&&null!==e[t]&&(i[t]=e[t])})),i}function ie(e){if(N(e)||V(e))return!0;if(e instanceof Element)return!1;return 0===Object.keys(e).length}const ne=e;function oe(e){if(e&&e.constructor){const t=e.constructor.toString();let i=t.substr(0,t.indexOf("("));return i=i.replace("function",""),i.replace(/(^\s*)|(\s*$)/gi,"")}return typeof e}function ae(e,t){return null!=e?e:t}function re(e,n=[]){const o={};return Object.keys(e).forEach((a=>{if(-1===n.indexOf(a)){const n=e[a];o[a]=t(n)?void 0:i(n)?t(n.default)?n.default():n.default:n}})),o}const se=(e,t,i=[])=>{for(const n in t)e[n]||-1!==i.indexOf(n)||(e[n]=t[n])};const le=o({});function ce(e){const t=l(ee,le);return e?c(t.value)&&u(t.value,e)?r((()=>t.value[e])):o(void 0):t}const ue=(e,t)=>{var i;const n=!!d(),o=n?ce():void 0,l=null!=(i=null==t?void 0:t.provide)?i:n?a:void 0;if(!l)return;const c=r((()=>{const t=s(e);return o?((e,t)=>{var i;const n=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const a of n)o[a]=null!=(i=t[a])?i:e[a];return o})(o.value,t):t}));return l(ee,c),le.value=c.value,c};function de(e){var t,i,n,o;return{log:((e="")=>function(...t){e&&(p(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ${null==(t=null==e?void 0:e.proxy)?void 0:t.$options.name}`),warn:((e="")=>function(...t){e&&(p(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] WARN ${null==(i=null==e?void 0:e.proxy)?void 0:i.$options.name}`),error:((e="")=>function(...t){e&&(p(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ERR ${null==(n=null==e?void 0:e.proxy)?void 0:n.$options.name}`),debug:((e="")=>function(...t){e&&(p(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] Debug ${null==(o=null==e?void 0:e.proxy)?void 0:o.$options.name}`),capsule:(e,t,i="primary")=>{},success:e=>{},warning:e=>{},danger:e=>{},primary:e=>{}}}de(void 0);const pe=Symbol("INSTALLED_KEY"),me=Object.prototype.hasOwnProperty;function ve(...e){let t;return"object"!=typeof e[e.length-1]&&(t=e.pop()),e.slice(1).reduce(((e,i,n)=>function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(t).forEach((function(n){if(!i&&me.call(e,n))return;const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o)})),e}(e,i,t)),e[0])}function he(e,t){return null!==e.vnode.props&&void 0!==e.vnode.props[t]}function ge(e,t){const i=e.vnode.props;if(null===i)return;const n=Object.keys(i);return i[n[z(n,(e=>e.includes(`on${m(t)}`)||e.includes(`on${m(F(t))}`)))]]}function fe(e){return e.value}function ye(e){var t;const i=e.parent;return i.cesiumClass||"VcViewer"===(null==(t=i.proxy)?void 0:t.$options.name)?i:ye(i)}function be(e,o=!1){const{Cartesian2:a,CallbackProperty:r}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof r)return e;if(i(e)&&u(e,"x")&&u(e,"y")){const t=e;return new a(t.x,t.y)}return n(e)?new a(e[0],e[1]):t(e)?new r(e,o):void 0}function Ce(e,o,a=!1){const{CallbackProperty:r,Cartesian3:s,Ellipsoid:l,SampledPositionProperty:c,CompositePositionProperty:d,ConstantPositionProperty:p,TimeIntervalCollectionPositionProperty:m}=Cesium;if(e instanceof s||e instanceof r||e instanceof c||e instanceof d||e instanceof p||e instanceof m)return e;if(o=o||l.WGS84,i(e)){if(u(e,"x")&&u(e,"y")&&u(e,"z")){const t=e;return new s(t.x,t.y,t.z)}if(u(e,"lng")&&u(e,"lat")){const t=e;return s.fromDegrees(t.lng,t.lat,t.height||0,o)}}return n(e)?s.fromDegrees(e[0],e[1],e[2]||0,o):t(e)?new r(e,a):void 0}function we(e,o,a=!1){const{CallbackProperty:r,Cartesian3:s,Ellipsoid:l}=Cesium;if(e instanceof r)return e;if(t(e))return new r(e,a);if(o=o||l.WGS84,n(e)){if(n(e[0])||i(e[0])){const t=[];return e.forEach((e=>{t.push(Ce(e,o))})),t}return s.fromDegreesArrayHeights(e,o)}}function Oe(e,i){const{CallbackProperty:o}=Cesium;if(e instanceof o)return e;if(t(e))return new o(e,i);if(n(e)){const t=[];return e.forEach((e=>{t.push(be(e))})),t}}function xe(e,o=!1){const{CallbackProperty:a,Quaternion:r,VelocityOrientationProperty:s}=Cesium;if(e instanceof r||e instanceof a||e instanceof s)return e;if(i(e)&&u(e,"x")&&u(e,"y")){const t=e;return new r(t.x,t.y,t.z,t.w)}return n(e)?new r(e[0],e[1],e[2],e[3]):t(e)?new a(e,o):void 0}function Se(e,t){e.forEach((e=>{e.positions=we(e.positions,t),e.holes&&Se(e.holes,t)}))}function _e(e,o,a=!1){var r;const{PolygonHierarchy:s,CallbackProperty:l}=Cesium;if(e instanceof s||e instanceof l)return e;if(t(e))return new l(e,a);if(n(e)&&e.length>=3){return new s(we(e,o))}if(i(e)&&u(e,"positions")){const t=e;return t.positions=we(t.positions,o),(null==(r=t.holes)?void 0:r.length)&&Se(t.holes,o),t}}function Ee(e,o=!1){const{NearFarScalar:a,CallbackProperty:r}=Cesium;if(e instanceof a||e instanceof r)return e;if(i(e)&&u(e,"near")&&u(e,"far")){const t=e;return new a(t.near,t.nearValue||0,t.far,t.farValue||1)}return n(e)?new a(e[0],e[1],e[2],e[3]):t(e)?new r(e,o):void 0}function Pe(e,o=!1){const{Color:a,CallbackProperty:r}=Cesium;if(e instanceof a||e instanceof r)return e;if(p(e))return a.fromCssColorString(e);if(i(e)){if(u(e,"red")){const t=e;return a.fromBytes(t.red,t.green||255,t.blue||255,t.alpha||255)}if(u(e,"x")){const t=e;return new a(t.x,t.y||1,t.z||1,t.w||1)}}return n(e)?a.fromBytes(e[0],e[1],e[2],e[3]||255):t(e)?new r(e,o):void 0}function Te(e){var o;const a=null==(o=null==this?void 0:this.proxy)?void 0:o.$options.name;if(a&&(-1!==a.indexOf("Graphics")||-1!==a.indexOf("Datasource")||"VcOverlayDynamic"===a||"VcEntity"===a))return function(e,o=!1){const{CallbackProperty:a,Color:r,CheckerboardMaterialProperty:s,ColorMaterialProperty:l,GridMaterialProperty:c,ImageMaterialProperty:d,PolylineArrowMaterialProperty:m,PolylineDashMaterialProperty:v,PolylineGlowMaterialProperty:h,PolylineOutlineMaterialProperty:g,StripeMaterialProperty:f,StripeOrientation:y}=Cesium;if(e instanceof a||e instanceof r||e instanceof s||e instanceof l||e instanceof d||e instanceof m||e instanceof v||e instanceof h||e instanceof g||e instanceof f||-1!==oe(e).indexOf("MaterialProperty"))return e;if(p(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new d({image:e,repeat:be({x:1,y:1}),color:r.WHITE,transparent:!0});if(n(e)||p(e))return new l(Pe(e));if(i(e)&&u(e,"fabric")){const t=e;switch(t.fabric.type){case"Image":return new d({image:t.fabric.uniforms.image,repeat:be(t.fabric.uniforms.repeat||{x:1,y:1}),color:Pe(t.fabric.uniforms.color)||r.WHITE,transparent:t.fabric.uniforms.transparent||!1});case"Color":return new l(Pe(t.fabric.uniforms.color||r.WHITE));case"PolylineArrow":return new m(Pe(t.fabric.uniforms.color||r.WHITE));case"PolylineDash":return new v({color:Pe(t.fabric.uniforms.color||"white")||r.WHITE,gapColor:Pe(t.fabric.uniforms.gapColor)||r.TRANSPARENT,dashLength:t.fabric.uniforms.taperPower||16,dashPattern:t.fabric.uniforms.taperPower||255});case"PolylineGlow":return new h({color:Pe(t.fabric.uniforms.color)||r.WHITE,glowPower:t.fabric.uniforms.glowPower||.25,taperPower:t.fabric.uniforms.taperPower||1});case"PolylineOutline":return new g({color:Pe(t.fabric.uniforms.color)||r.WHITE,outlineColor:Pe(t.fabric.uniforms.outlineColor)||r.BLACK,outlineWidth:t.fabric.uniforms.outlineWidth||1});case"Checkerboard":return new s({evenColor:Pe(t.fabric.uniforms.evenColor)||r.WHITE,oddColor:Pe(t.fabric.uniforms.oddColor)||r.BLACK,repeat:be(t.fabric.uniforms.repeat||{x:2,y:2})});case"Grid":return new c({color:Pe(t.fabric.uniforms.color)||r.WHITE,cellAlpha:t.fabric.uniforms.cellAlpha||.1,lineCount:be(t.fabric.uniforms.lineCount||{x:8,y:8}),lineThickness:be(t.fabric.uniforms.lineThickness||{x:1,y:1}),lineOffset:be(t.fabric.uniforms.lineOffset||{x:0,y:0})});case"Stripe":return new f({orientation:t.fabric.uniforms.orientation||y.HORIZONTAL,evenColor:Pe(t.fabric.uniforms.evenColor||"white"),oddColor:Pe(t.fabric.uniforms.oddColor||"black"),offset:t.fabric.uniforms.offset||0,repeat:t.fabric.uniforms.repeat||1})}}return t(e)?new a(e,o):e}(e);const{Material:r,combine:s}=Cesium;if(e instanceof r)return e;if(i(e)&&u(e,"fabric")){const t=e=>{for(const o in e)if(!n(e[o])&&i(e[o]))t(e[o]);else if(-1!==o.toLocaleLowerCase().indexOf("color")&&!ie(e[o])){const t=Pe(e[o]);e[o]=s(t,t,!0)}};return t(e),new r(e)}if(n(e)||p(e)){const t=r.fromType("Color");return t.uniforms.color=Pe(e),t}}function Me(e){var t;const{Appearance:n,DebugAppearance:o,MaterialAppearance:a,PolylineColorAppearance:r,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof n||e instanceof o||e instanceof a||e instanceof r||e instanceof s||e instanceof l||e instanceof c||-1!==oe(e).indexOf("Appearance"))return e;if(i(e)&&u(e,"type")){const i={...e.options};return(null==(t=e.options)?void 0:t.material)&&(i.material=Te.call(this,e.options.material)),new Cesium[e.type]({...i})}}function Ie(e,o=!1){const{Rectangle:a,RectangleGraphics:r,CallbackProperty:s}=Cesium;if(e instanceof r||e instanceof a||e instanceof s)return e;if(n(e))return a.fromDegrees(e[0],e[1],e[2],e[3]);if(i(e)){if(u(e,"west")){const t=e;return a.fromDegrees(t.west,t.south,t.east,t.north)}if(u(e,"x")){const t=e;return new a(t.x,t.y,t.z,t.w)}}return t(e)?new s(e,o):void 0}function je(e,o=!1){const{BoundingRectangle:a,CallbackProperty:r}=Cesium;if(e instanceof a||e instanceof r)return e;if(i(e)&&u(e,"x")){const t=e;return new a(t.x,t.y,t.width,t.height)}return n(e)?new a(e[0],e[1],e[2],e[3]):t(e)?new r(e,o):void 0}function Le(e,t){const{Math:i,Rectangle:o}=Cesium;let a,r={};if(u(e,"position")){const o=e.position;a=Ce(o,t),r=u(o,"lng")&&u(o,"lat")||n(o)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}else if(u(e,"rectangle")){const t=e.retangle;a=Ie(t),o.validate(a),r=u(t,"west")&&u(t,"south")&&u(t,"east")&&u(t,"north")||n(t)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}return{destination:a,orientation:r}}function Ae(e,t){const{destination:i,orientation:n}=Le(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function De(e,t,i){const{destination:n,orientation:o}=Le(t,e.scene.globe.ellipsoid);e.camera.flyTo({destination:i.destination||n,orientation:i.orientation||o,duration:i.duration,complete:i.complete,cancel:i.cancel})}function Re(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;return new n((i=i||o.WGS84).cartesianToCartographic(e),i.cartesianToCartographic(t)).surfaceDistance}function ke(e,t,i,n){const{HeadingPitchRoll:o,Transforms:a,Matrix4:r,Cartesian3:s,Cartesian4:l,Quaternion:c,Cartographic:u,Ellipsoid:d}=Cesium;n=n||d.WGS84;const p=new o(t,0,0),m=new s(1,1,1),v=a.headingPitchRollToFixedFrame(e,p),h=r.getColumn(v,1,new l),g=new s(h.x,h.y,h.z),f=c.fromAxisAngle(g,i*n.oneOverRadii.x),y=r.fromTranslationQuaternionRotationScale(s.ZERO,f,m),b=r.multiplyByPoint(y,e,new s),C=u.fromCartesian(e,n),w=u.fromCartesian(b,n);return w.height=C.height,u.toCartesian(w,n)}function Be(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:a}=Cesium,r=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!N(r)&&o(r)){const e=r.indices,i=r.attributes.position.values;for(let n=0;n<e.length;n+=3){const o=e[n],r=e[n+1],s=e[n+2];t+=Ne(a.unpack(i,3*o,{}),a.unpack(i,3*r,{}),a.unpack(i,3*s,{}))}}return t}const Ne=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),a=n.subtract(i,t,{}),r=n.cross(o,a,o);return.5*n.magnitude(r)};function Ve(e){const{JulianDate:t}=Cesium;return e instanceof t?e:p(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function ze(e){const{HeadingPitchRange:t,Math:n}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(n.toRadians(e[0])||0,n.toRadians(e[1])||0,e[2]||0):i(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function Fe(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.atan2(r.x,r.y))}function He(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.asin(r.z))}function Ue(e,t,i,n=[]){const{Cartesian3:o,Ray:a,defined:r}=Cesium,s=new a(e,o.normalize(o.subtract(t,e,new o),new o)),l=i.scene.pickFromRay(s,n);if(r(l)&&r(l.position)){return l.position}}function We(e){const t=-40467.74;return Math.round(t+80955.31/(1+Math.pow(e/91610.74,7096758e-11)))}const Ge={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ce,deep:!0}}},$e={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ce,deep:!0}}},Ze={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xe}}},Ye={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ce}}},qe={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Pe}}},Xe={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Pe}}},Qe={disableDepthTestDistance:[Number,Object,Function]},Je={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,o=!1){const{DistanceDisplayCondition:a,CallbackProperty:r}=Cesium;if(e instanceof a||e instanceof r)return e;if(i(e)&&u(e,"near")&&u(e,"far")){const t=e;return new a(t.near,t.far)}return n(e)?new a(e[0],e[1]):t(e)?new r(e,o):void 0}}}},Ke={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ce}}},et={height:[Number,Object,Function]},tt={heightReference:{type:[Number,Object,Function]}},it={horizontalOrigin:{type:[Number,Object,Function],default:0}},nt={image:[String,Object,HTMLCanvasElement,Function]},ot={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:je}}},at={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>n(e)?2===e.length:c(e)?u(e,"x")&&u(e,"y"):!!t(e),watcherOptions:{cesiumObjectBuilder:be}}},rt={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ee}}},st={rotation:{type:[Number,Object,Function],default:0}},lt={scale:{type:[Number,Object,Function],default:1}},ct={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ee}}},ut={show:{type:[Boolean,Object,Function],default:!0}},dt={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},pt={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ee}}},mt={verticalOrigin:{type:[Number,Object,Function],default:0}},vt={width:[Number,Object,Function]},ht={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ce}}},gt={fill:{type:[Boolean,Object,Function],default:!0}},ft={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Te}}},yt={outline:{type:[Boolean,Object,Function],default:!1}},bt={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:Pe}}},Ct={outlineWidth:{type:[Number,Object,Function],default:1}},wt={shadows:[Number,Object,Function]},Ot={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:we,exclude:"_callback",deep:!0}}},xt={extrudedHeight:[Number,Object,Function]},St={extrudedHeightReference:[Number,Object,Function]},_t={cornerType:{type:[Number,Object,Function],default:0}},Et={granularity:[Number,Object,Function]},Pt={classificationType:{type:[Number,Object,Function]}},Tt={zIndex:[Number,Object,Function]},Mt={length:[Number,Object,Function]},It={topRadius:[Number,Object,Function]},jt={bottomRadius:[Number,Object,Function]},Lt={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},At={slices:{type:[Number,Object,Function],default:128}},Dt={semiMajorAxis:[Number,Object,Function]},Rt={semiMinorAxis:[Number,Object,Function]},kt={stRotation:{type:[Number,Object,Function],default:0}},Bt={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ce}}},Nt={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ce}}},Vt={minimumClock:{type:[Number,Object,Function],default:0}},zt={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},Ft={minimumCone:{type:[Number,Object,Function],default:0}},Ht={maximumCone:{type:[Number,Object,Function],default:Math.PI}},Ut={stackPartitions:{type:[Number,Object,Function],default:64}},Wt={slicePartitions:{type:[Number,Object,Function],default:64}},Gt={subdivisions:{type:[Number,Object,Function],default:128}},$t={text:[String,Object,Function]},Zt={font:{type:[String,Object,Function],default:"30px sans-serif"}},Yt={labelStyle:{type:[Number,Object,Function],default:0}},qt={showBackground:{type:[Boolean,Object,Function],default:!1}},Xt={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:Pe}}},Qt={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:be}}},Jt={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Pe}}},Kt={uri:[String,Object,Function]},ei={minimumPixelSize:{type:[Number,Object,Function],default:0}},ti={maximumScale:[Number,Object,Function]},ii={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},ni={clampAnimations:{type:[Boolean,Object,Function],default:!0}},oi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},ai={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Pe}}},ri={silhouetteSize:{type:[Number,Object,Function],default:0}},si={colorBlendMode:{type:[Number,Object,Function],default:0}},li={colorBlendAmount:{type:[Number,Object,Function],default:.5}},ci={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:be}}},ui={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Pe}}},di={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:function(e,o=!1){const{TranslationRotationScale:a,CallbackProperty:r}=Cesium;if(e instanceof r||e instanceof a)return e;if(i(e)&&u(e,"translation")){const t=e;return new a(Ce(t.translation),xe(t.rotation),Ce(t.scale))}return n(e)?new a(Ce(e[0]),xe(e[1]),Ce(e[2])):t(e)?new r(e,o):e}}}},pi={articulations:[Object,Function]},mi={clippingPlanes:[Object,Function]},vi={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,o=!1){const{Cartesian3:a,Plane:r,PlaneGraphics:s,CallbackProperty:l}=Cesium;if(e instanceof s||e instanceof r||e instanceof l)return e;if(i(e)&&u(e,"normal")){const t=e;return a.normalize(Ce(t.normal),t.normal),new r(t.normal,t.distance)}if(n(e)){const t=Ce(e[0]);return new r(a.normalize(t,new a),e[1])}return t(e)?new l(e,o):void 0}}}},hi={pixelSize:{type:[Number,Object,Function],default:1}},gi={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:_e,deep:!0,exclude:"_callback"}}},fi={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},yi={closeTop:{type:[Boolean,Object,Function],default:!0}},bi={closeBottom:{type:[Boolean,Object,Function],default:!0}},Ci={arcType:{type:[Number,Object,Function],default:1}},wi={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Te}}},Oi={clampToGround:{type:[Boolean,Object,Function],default:!1}},xi={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Oe}}},Si={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ie}}},_i={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},Ei={minimumHeights:[Array,Object,Function]},Pi={maximumHeights:[Array,Object,Function]},Ti={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ie}}},Mi={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Pe}}},Ii={url:[String,Object]},ji={token:String},Li={tileDiscardPolicy:Object},Ai={layers:String},Di={enablePickFeatures:{type:Boolean,default:!0}},Ri={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ie}}},ki={tilingScheme:Object},Bi={ellipsoid:Object},Ni={credit:{type:[String,Object],default:""}},Vi={tileWidth:{type:Number,default:256}},zi={tileHeight:{type:Number,default:256}},Fi={maximumLevel:Number},Hi={minimumLevel:{type:Number,default:0}},Ui={fileExtension:{type:String,default:"png"}},Wi={accessToken:String},Gi={format:{type:String,default:"png"}},$i={subdomains:[String,Array]},Zi={getFeatureInfoFormats:Array},Yi={clock:Object},qi={times:Object},Xi={projectionTransforms:{type:[Boolean,Object],default:!1}},Qi={allowPicking:{type:Boolean,default:!0}},Ji={asynchronous:{type:Boolean,default:!0}},Ki={debugShowShadowVolume:{type:Boolean,default:!1}},en={releaseGeometryInstances:{type:Boolean,default:!0}},tn={interleave:{type:Boolean,default:!1}},nn={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Me,deep:!0}}},on={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Me,deep:!0}}},an={geometryInstances:[Array,Object]},rn={vertexCacheOptimize:{type:Boolean,default:!1}},sn={compressVertices:{type:Boolean,default:!0}},ln={modelMatrix:Object},cn={debugShowBoundingVolume:{tyep:Boolean,default:!1}},un={scene:Object},dn={blendOption:{type:Number,default:2}},pn={id:null},mn={loop:{type:Boolean,default:!1}},vn={debugWireframe:{type:Boolean,default:!1}},hn={vertexFormat:Object},gn={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ce}}},fn={radius:Number},yn={frustum:Object},bn={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ce}}},Cn={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:_e,deep:!0}}},wn={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Pe}}},On={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Pe}}},xn={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:be}}},Sn={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:be}}},_n={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:be}}},En={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Oe}}},Pn={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:we}}},Tn={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ce}}},Mn={luminanceAtZenith:{type:Number,default:.2}},In={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:we}}},jn={specularEnvironmentMaps:String},Ln={backFaceCulling:{type:Boolean,default:!0}},An={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:function(e){if(n(e)){const t=[];return e.forEach((e=>{t.push(Pe(e))})),t}return e}}}},Dn={data:{type:[String,Object],required:!0}},Rn={sourceUri:{type:[String,Object]}},kn={options:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){var t;const i={};return"VcDatasourceGeojson"===(null==(t=this.proxy)?void 0:t.$options.name)?(Object.assign(i,e),i&&i.markerColor&&(i.markerColor=Pe(i.markerColor)),i&&i.stroke&&(i.stroke=Pe(i.stroke)),i&&i.fill&&(i.fill=Pe(i.fill)),i):e},deep:!0}}},Bn={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:Pe}}},Nn={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:Pe}}},Vn={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:je}}},zn={enableMouseEvent:{type:Boolean,default:!0}},Fn=Object.freeze(Object.defineProperty({__proto__:null,accessToken:Wi,alignedAxis:Ye,allowPicking:Qi,appearance:nn,arcType:Ci,articulations:pi,asynchronous:Ji,backFaceCulling:Ln,backgroundColor:Xt,backgroundPadding:Qt,blendOption:dn,bottomRadius:jt,center:gn,clampAnimations:oi,clampToGround:Oi,classificationType:Pt,clearColor:Nn,clippingPlanes:mi,clock:Yi,closeBottom:bi,closeTop:yi,color:qe,colorBlendAmount:li,colorBlendMode:si,colorToAlpha:Mi,colors:An,compressVertices:sn,coordinates:Si,cornerType:_t,credit:Ni,cutoutRectangle:Ti,data:Dn,debugShowBoundingVolume:cn,debugShowShadowVolume:Ki,debugWireframe:vn,depthFailAppearance:on,depthFailColor:Xe,depthFailMaterial:wi,dimensions:ht,disableDepthTestDistance:Qe,distanceDisplayCondition:Je,ellipsoid:Bi,enableMouseEvent:zn,enablePickFeatures:Di,endColor:On,extrudedHeight:xt,extrudedHeightReference:St,eyeOffset:Ke,fileExtension:Ui,fill:gt,fillColor:Jt,font:Zt,format:Gi,frustum:yn,geometryInstances:an,getFeatureInfoFormats:Zi,glowColor:Bn,granularity:Et,height:et,heightReference:tt,hierarchy:gi,horizontalOrigin:it,id:pn,image:nt,imageBasedLightingFactor:ci,imageSize:_n,imageSubRegion:ot,incrementallyLoadTextures:ii,innerRadii:Nt,interleave:tn,labelStyle:Yt,layers:Ai,length:Mt,lightColor:ui,lightColor2:Tn,loop:mn,luminanceAtZenith:Mn,material:ft,maximumClock:zt,maximumCone:Ht,maximumHeights:Pi,maximumImageSize:Sn,maximumLevel:Fi,maximumScale:ti,maximumScreenSpaceError:_i,minimumClock:Vt,minimumCone:Ft,minimumHeights:Ei,minimumImageSize:xn,minimumLevel:Hi,minimumPixelSize:ei,modelMatrix:ln,nodeTransformations:di,numberOfVerticalLines:Lt,options:kn,orientation:Ze,origin:bn,outline:yt,outlineColor:bt,outlineWidth:Ct,perPositionHeight:fi,pixelOffset:at,pixelOffsetScaleByDistance:rt,pixelSize:hi,plane:vi,polygonHierarchy:Cn,polylinePositions:Pn,position:Ge,positions:Ot,projectionTransforms:Xi,radii:Bt,radius:fn,rectangle:Ri,releaseGeometryInstances:en,rotation:st,runAnimations:ni,scale:lt,scaleByDistance:ct,scene:un,scissorRectangle:Vn,semiMajorAxis:Dt,semiMinorAxis:Rt,shadows:wt,shape:xi,shapePositions:En,show:ut,showBackground:qt,silhouetteColor:ai,silhouetteSize:ri,sizeInMeters:dt,slicePartitions:Wt,slices:At,sourceUri:Rn,specularEnvironmentMaps:jn,sphericalHarmonicCoefficients:In,stRotation:kt,stackPartitions:Ut,startColor:wn,subdivisions:Gt,subdomains:$i,text:$t,tileDiscardPolicy:Li,tileHeight:zi,tileWidth:Vi,tilingScheme:ki,times:qi,token:ji,topRadius:It,translucencyByDistance:pt,uri:Kt,url:Ii,vertexCacheOptimize:rn,vertexFormat:hn,verticalOrigin:mt,viewFrom:$e,width:vt,zIndex:Tt},Symbol.toStringTag,{value:"Module"}));var Hn={name:"zh-hans",nativeName:"中文(简体)",vc:{loadError:"加载失败，必须作为 VcViewer 的子组件加载。",navigation:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环。\n重置视图：双击罗盘外环。",innerTip:"翻转视图：由内环向外环拖拽罗盘。\n 或者按住 Ctrl 键的同时拖拽地图。",title:"按住鼠标拖拽旋转相机。"},zoomCotrol:{zoomInTip:"放大",zoomResetTip:"重置视图",zoomOutTip:"缩小"},print:{printTip:"场景截图/打印",printViewTitle:"打印预览",credit:"地图版权",screenshot:"场景截图"},myLocation:{myLocationTip:"定位您的位置",positioning:"定位中...",fail:"定位失败",centreMap:"我的位置",lat:"纬度",lng:"经度",address:"地址"},statusBar:{lat:"纬度",lng:"经度",zone:"带号",e:"X",n:"Y",elev:"高程",level:"层级",heading:"方位",pitch:"俯仰",roll:"侧翻",cameraHeight:"视高",tip:"点击切换鼠标显示坐标为 UTM 投影坐标"}},navigationSm:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环；重置视图：双击罗盘外环。"},zoomCotrol:{zoomInTip:"放大",zoomBarTip:"按住滑块向上放大，向下缩小。",zoomOutTip:"缩小"}},measurement:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},distance:{tip:"距离量算",drawingTipStart:"单击左键绘制距离量算起点。",drawingTipEnd:"单击左键绘制距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},"component-distance":{tip:"三角量算",drawingTipStart:"单击左键绘制三角量算起点。",drawingTipEnd:"单击左键绘制三角量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"折线距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},horizontal:{tip:"水平距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},vertical:{tip:"垂直距离量算",drawingTipStart:"单击左键绘制垂直距离量算起点。",drawingTipEnd:"单击左键绘制垂直距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},height:{tip:"地表高度量算",drawingTipStart:"单击左键绘制高度量算点。",drawingTipEnd:"单击左键绘制高度量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},area:{tip:"面积量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"点击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"坐标量算",drawingTipStart:"点击左键绘制坐标量算点。",drawingTipEnd:"点击左键绘制坐标量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。",lng:"经度：",lat:"纬度：",height:"高度：",slope:"坡度："},rectangle:{tip:"矩形量算",drawingTipStart:"单击左键绘制矩形量算起点。",drawingTipEnd:"单击左键绘制矩形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"正多边形量算",drawingTipStart:"单击左键绘制正多边形量算起点。",drawingTipEnd:"单击左键绘制正多边形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"圆形量算",drawingTipStart:"单击左键绘制圆形量算起点。",drawingTipEnd:"单击左键绘制圆形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除量算结果"}},drawing:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},pin:{tip:"绘制图标点",drawingTipStart:"点击左键绘制图标点。",drawingTipEnd:"点击左键绘制图标点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"绘制点",drawingTipStart:"点击左键绘制点。",drawingTipEnd:"点击左键绘制点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"绘制线",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polygon:{tip:"绘制面",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},rectangle:{tip:"绘制矩形",drawingTipStart:"单击左键绘制矩形起点。",drawingTipEnd:"单击左键绘制矩形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"绘制圆",drawingTipStart:"单击左键绘制圆形起点。",drawingTipEnd:"单击左键绘制圆形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"绘制正多边形",drawingTipStart:"单击左键绘制正多边形起点。",drawingTipEnd:"单击左键绘制正多边形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除绘制结果"}},analysis:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},sightline:{tip:"通视分析",drawingTipStart:"单击左键绘制观测点。",drawingTipEnd:"单击左键绘制目标点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},viewshed:{tip:"可视域分析",drawingTipStart:"单击左键绘制可视域分析起点。",drawingTipEnd:"单击左键绘制可视域分析终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除分析结果"}},overview:{show:"显示鹰眼",hidden:"隐藏鹰眼"}}};const Un=e=>(t,i)=>Wn(t,i,s(e)),Wn=(e,t,i)=>H(i,e,e).replace(/\{(\w+)\}/g,((e,i)=>{var n;return`${null!=(n=null==t?void 0:t[i])?n:`{${i}}`}`})),Gn=()=>{const e=ce("locale");return(e=>({lang:r((()=>s(e).name)),locale:v(e)?e:o(e),t:Un(e)}))(r((()=>e.value||Hn)))};function $n(e,t,i){const o=(e,n,o=!0)=>{const a=n||t.cesiumEvents||[];a&&a.forEach((n=>{if(e[n]){const i=ge(t,n),a=o?"addEventListener":"removeEventListener";i&&e[n][a](i)}else process.env.VUECESIUM_DEBUG&&i.warn("Add event linstener of "+n+" failed, try to upgrade Cesium to latest version.")}))};function a(t){if(!e.enableMouseEvent||!t)return;const i=this.viewer,{eventName:o}=this,a=t.position||t.endPosition;if(!a)return;const r=[];let s,l;-1!==o.indexOf("LEFT_DOUBLE_CLICK")?s="dblclick":-1!==o.indexOf("CLICK")?s="click":-1!==o.indexOf("DOWN")?s="mousedown":-1!==o.indexOf("UP")?s="mouseup":-1!==o.indexOf("MOUSE_MOVE")&&(s="mousemove"),"mousemove"===s?l="mouseout":"click"===s&&(l="clickout");const c=i.scene.pick(a);if(Cesium.defined(c)?(this.pickedFeature&&this.pickedFeature.id!==c.id&&r.push({callbackName:l,pickedFeature:this.pickedFeature}),"mousemove"!==s||this.pickedFeature&&this.pickedFeature.id===c.id||r.push({callbackName:"mouseover",pickedFeature:c}),r.push({callbackName:s,pickedFeature:c})):(this.pickedFeature&&r.push({callbackName:l,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),0===r.length)return;let u;const d=i.scene;if(d.mode===Cesium.SceneMode.SCENE3D){const e=d.camera.getPickRay(a);u=d.globe.pick(e,d)}else u=d.camera.pickEllipsoid(a,d.globe.ellipsoid);let p=-1;-1!==o.indexOf("LEFT")?p=0:-1!==o.indexOf("MIDDLE")?p=1:-1!==o.indexOf("RIGHT")&&(p=2);const v=[];r.forEach((e=>{const t=e.callbackName,i=e.pickedFeature;i.id&&(n(i.id)&&i.id[0]instanceof Cesium.Entity?v.push({callbackName:t,cesiumObject:i.id[0].entityCollection.owner,pickedFeature:i}):i.id instanceof Cesium.Entity&&(v.push({callbackName:t,cesiumObject:i.id,pickedFeature:i}),v.push({callbackName:t,cesiumObject:i.id.entityCollection.owner,pickedFeature:i})));const o=e=>{v.push({callbackName:t,cesiumObject:e,pickedFeature:i}),e._vcParent&&o(e._vcParent)};i.primitive&&(i.primitive._vcParent&&o(i.primitive._vcParent),v.push({callbackName:t,cesiumObject:i.primitive,pickedFeature:i})),i.collection&&(i.collection._vcParent&&o(i.collection._vcParent),v.push({callbackName:t,cesiumObject:i.collection,pickedFeature:i}))})),v.forEach((e=>{if(e.callbackName){const t=e.cesiumObject[e.callbackName]||e.cesiumObject[`on${m(e.callbackName)}`]||e.cesiumObject[ne(`on${m(e.callbackName)}`)];if(Cesium.defined(t)){const i={type:`on${e.callbackName}`,windowPosition:a,surfacePosition:u,pickedFeature:e.pickedFeature,button:p,cesiumObject:e.cesiumObject};t instanceof Cesium.CallbackProperty?t._callback(i):t(i)}}})),this.pickedFeature=c}return{bindEvents:o,registerEvents:i=>{var r;const{viewer:s,cesiumObject:l}=t;if(void 0===l)return;const{ScreenSpaceEventHandler:c,ScreenSpaceEventType:u}=Cesium;s._vcPickScreenSpaceEventHandler&&s._vcViewerScreenSpaceEventHandler||(s._vcPickScreenSpaceEventHandler=new c(s.canvas),s._vcViewerScreenSpaceEventHandler=new c(s.canvas),Zn.forEach((e=>{const i=ge(t,e);i&&s._vcViewerScreenSpaceEventHandler.setInputAction(i,u[e]),s._vcPickScreenSpaceEventHandler.setInputAction(a.bind({eventName:e,viewer:s}),u[e])}))),o(l,t.cesiumEvents||[],i),null==(r=t.cesiumMembersEvents)||r.forEach((e=>{const t=n(e.name)&&e.name.length>0&&l[e.name[0]]?l[e.name[0]][e.name[1]]:l[e.name];t&&o(t,e.events,i)})),e.enableMouseEvent&&Yn.forEach((e=>{const n=ge(t,e);i?n&&(l[e]=n):n&&delete l[e]}))}}}const Zn=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],Yn=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"],qn=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function Xn(e,{emit:i},n){const o=de(n);n.alreadyListening=[],n.removeCallbacks=[];let a=[];n.mounted=!1;const r=g();n.vcMitt=r;const s=l(J),{t:c}=Gn();if(void 0===s)return;const u=ye(n),d=$n(e,n,o);n.children=[];const p=["billboard","box","corridor","cylinder","ellipse","ellipsoid","label","model","tileset","path","plane","point","polygon","polyline","polylineVolume","rectangle","wall"],m=async()=>{var e;if(n.mounted)return!1;o.debug(`${n.cesiumClass}---loading`),await(async()=>{if(i("beforeLoad",n),u.nowaiting)return!0;await u.proxy.creatingPromise})();const{Cesium:t,viewer:a}=s;return n.viewer=a,n.Cesium=t,u.cesiumObject||u.nowaiting?(O(!0),C().then((async e=>(n.cesiumObject=e,y().then((()=>{n.mounted=!0,u.children.push(n),Object.assign(n.proxy,{cesiumObject:n.cesiumObject});const s={Cesium:t,viewer:a,cesiumObject:e,vm:n.proxy};return i("ready",s),r.emit("ready",s),o.debug(`${n.cesiumClass}---loaded`),s})))))):await(null==(e=u.proxy)?void 0:e.load())},v=async()=>{await(async()=>{await n.unloadingPromise})();for(let e=0;e<n.children.length;e++){const t=n.children[e].proxy;await t.unload()}return n.children.length=0,!!n.mounted&&b().then((async()=>(O(!1),n.cesiumObject=void 0,n.mounted=!1,n.removeCallbacks.forEach((e=>{e()})),i("destroyed",n),o.debug(`${n.cesiumClass}---unmounted`),!(n.renderByParent&&!n.unloadingPromise)||u.proxy.unload())))},f=async()=>v().then((()=>m())),y=async()=>{var e;return d.registerEvents(!0),(null==(e=n.mount)?void 0:e.call(n))||!0},b=async()=>{var e;return d.registerEvents(!1),(null==(e=n.unmount)?void 0:e.call(n))||!0},C=async()=>{if(o.debug("do createCesiumObject"),t(n.createCesiumObject))return n.createCesiumObject();{const t=x(e);return new Cesium[n.cesiumClass](t)}},w=(e,t)=>{let i=null==t?void 0:t.deep;const{SampledPositionProperty:o,Appearance:a,DebugAppearance:r,MaterialAppearance:s,PolylineColorAppearance:l,EllipsoidSurfaceAppearance:c,PerInstanceColorAppearance:u,PolylineMaterialAppearance:d}=Cesium;if("position"===e)i=!(n.proxy[e]instanceof o);else if("appearance"===e||"depthFailAppearance"===e){const t=n.proxy[e];i=!(t instanceof a||t instanceof r||t instanceof s||t instanceof l||t instanceof c||t instanceof u||t instanceof d||-1!==oe(t).indexOf("Appearance"))}return i},O=t=>{if(t){if(!n.cesiumClass||!Cesium[n.cesiumClass])return;e&&Object.keys(e).forEach((e=>{var t,i,o,r,s;let l=e;if("labelStyle"===e||"wmtsStyle"===e?l="style":"bmKey"===e&&(l="key"),(null==(i=null==(t=n.proxy)?void 0:t.$options.watch)?void 0:i[e])||-1!==n.alreadyListening.indexOf(e))return;const c=null==(r=null==(o=n.proxy)?void 0:o.$options.props[e])?void 0:r.watcherOptions,u=null==(s=n.proxy)?void 0:s.$watch(e,(async(e,t)=>{await n.proxy.creatingPromise;const{cesiumObject:i}=n,o=i&&Object.getOwnPropertyDescriptor(i,l),a=i&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),l);if(o&&(o.writable||o.set)||a&&(a.writable||a.set)){if(c&&c.cesiumObjectBuilder){const t=c.cesiumObjectBuilder.call(n,e,n.viewer.scene.globe.ellipsoid);Cesium.defined(i[l])&&Cesium.defined(i[l]._callback)||(i[l]=t)}else i[l]=S(l,e);return!0}U(e,t)||n.proxy.reload()}),{deep:w(e,c)});a.push(u)}))}else a.forEach((e=>e())),a=[]},x=(e,t)=>{let i={};return e&&Object.keys(e).forEach((o=>{let a=o;"labelStyle"===o||"wmtsStyle"===o?a="style":"bmKey"===o&&(a="key");const r=oe(e[o]);r&&-1===r.indexOf("Graphics")&&-1!==p.indexOf(a)&&("Entity"===n.cesiumClass||n.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===n.cesiumClass)?i[a]=x(e[o],t):i[a]=S(o,e[o],t)})),i=te(i),i},S=(e,i,o)=>{var a,r;const s=oe(i);if(s&&-1===s.indexOf("Graphics")&&-1!==p.indexOf(e)&&("Entity"===n.cesiumClass||n.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===n.cesiumClass))return x(i,o);{const s=null==(a=n.proxy)?void 0:a.$options.name;let l=!1;t(i)&&s&&qn.forEach((e=>{-1!==s.indexOf(e)&&(l=!0)}));const c=(null==(r=n.proxy)?void 0:r.$options.props[e])||(null==o?void 0:o[e])||Fn[e]&&Fn[e][e];return(null==c?void 0:c.watcherOptions)&&!ie(i)?c.watcherOptions.cesiumObjectBuilder.call(n,i,n.viewer.scene.globe.ellipsoid):l?new Cesium.CallbackProperty(i,!1):i}},_=new Promise(((e,t)=>{try{let t=!1;s.viewer&&(t=!0,m().then((i=>{e(i),t=!1}))),u.vcMitt.on("ready",(()=>{t||n.isUnmounted||e(m())}))}catch(i){t(i)}}));return o.debug(`${n.cesiumClass}---onCreated`),h((()=>{o.debug(`${n.cesiumClass}---onUnmounted`),n.unloadingPromise=new Promise(((e,t)=>{v().then((()=>{o.debug(`${n.cesiumClass}---unloaded`),e(!0),n.unloadingPromise=void 0,r.all.clear()}))})),n.alreadyListening=[]})),Object.assign(n.proxy,{creatingPromise:_,load:m,unload:v,reload:f,getCreatingPromise:()=>_,getCesiumObject:()=>n.cesiumObject}),{$services:s,load:m,unload:v,reload:f,creatingPromise:_,transformProp:S,transformProps:x,unwatchFns:a,setPropsWatcher:O,logger:o,getServices:()=>ve({},s||{})}}function Qn(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],"KmlDataSource"===i.cesiumClass&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=Xn(e,t,i);if(void 0===n)return;i.alreadyListening.push("entities");let o=[];o.push(f((()=>G(e.entities)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o.entities.getById(e.oldOptions.id);if(e.oldOptions.id===e.newOptions.id)t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}));else{o.entities.remove(t);const i=e.newOptions;r(o,[i])}}))}else{const i=W(e,t,"id"),n=W(t,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o.entities.getById(n[e].id);a.push(t)}a.forEach((e=>{o.entities.remove(e)})),r(o,i)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i],a=n.transformProps(o),r=e.entities.add(a);o.id!==r.id&&(o.id=r.id),se(r,a)}};i.mount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return o.show=e.show,r(o,e.entities),t.add(o).then((()=>!0))},i.unmount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return t&&t.remove(o,e.destroy)};const s=()=>ve(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var e;return null==(e=i.cesiumObject)?void 0:e.entities}});return h((()=>{o.forEach((e=>e())),o=[]})),a(J,s()),i.appContext.config.globalProperties.$VueCesium=s(),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Jn(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=Xn(e,t,i);if(void 0!==n)return i.mount=async()=>{var e;const t=i.cesiumObject,n=ye(i).proxy;return null==(e=n.__updateGeometry)?void 0:e.call(n,t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Kn(e,t,i){i.cesiumEvents=["definitionChanged"];void 0!==Xn(e,t,i)&&(i.mount=async()=>{var e,t;const n=i.cesiumObject;if(void 0===n)return!1;const o=ne((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),a=3===o.length?`update:${o[2]}`:"update:polylineVolume",r=ye(i).proxy;return r&&(null==(t=r.__updateGraphics)?void 0:t.call(r,n,a))},i.unmount=async()=>{var e,t;const n=ne((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),o=3===n.length?`update:${n[2]}`:"update:polylineVolume",a=ye(i).proxy;return a&&(null==(t=a.__updateGraphics)?void 0:t.call(a,void 0,o))})}const eo=e=>y(e);function to(e,t){const i=e.style;Object.keys(t).forEach((e=>{i[e]=t[e]}))}const io={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(io,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(_h){}function no(){}function oo(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function ao(e){e.stopPropagation()}function ro(e){!1!==e.cancelable&&e.preventDefault()}function so(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function lo(e,t,i){const n=`__vc_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],io[t[3]])}))}function co(e,t){const i=`__vc_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],io[t[3]])})),e[i]=void 0)}function uo(e,t){return!0!==function(e){return e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}(e)&&[].concat(t).includes(e.keyCode)}function po(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function mo(e,t,i,n){!0===i.modifiers.stop&&ao(e);const o=i.modifiers.color;let a=i.modifiers.center;a=!0===a||!0===n;const r=document.createElement("span"),s=document.createElement("span"),l=oo(e),{left:c,top:u,width:d,height:p}=t.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),v=m/2,h=(d-m)/2+"px",g=a?h:l.left-c-v+"px",f=(p-m)/2+"px",y=a?f:l.top-u-v+"px";s.className="vc-ripple__inner",to(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${y},0) scale3d(.2,.2,1)`,opacity:0}),r.className="vc-ripple"+(o?" text-"+o:""),r.setAttribute("dir","ltr"),r.appendChild(s),t.appendChild(r);const b=()=>{r.remove(),clearTimeout(C)};i.abort.push(b);let C=setTimeout((()=>{s.classList.add("vc-ripple__inner--enter"),s.style.transform=`translate3d(${h},${f},0) scale3d(1,1,1)`,s.style.opacity="0.2",C=setTimeout((()=>{s.classList.remove("vc-ripple__inner--enter"),s.classList.add("vc-ripple__inner--leave"),s.style.opacity="0",C=setTimeout((()=>{r.remove(),i.abort.splice(i.abort.indexOf(b),1)}),275)}),250)}),50)}function vo(e,{modifiers:t,value:i,arg:n,instance:o}){const a=Object.assign({},t,i);e.modifiers={early:!0===a.early,stop:!0===a.stop,center:!0===a.center,color:a.color||n,keyCodes:[].concat(a.keyCodes||13)}}var ho=eo({name:"ripple",beforeMount(e,t){const i={enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===i.enabled&&!0!==t.qSkipRipple&&(!0===i.modifiers.early?!0===["mousedown","touchstart"].includes(t.type):"click"===t.type)&&mo(t,e,i,!0===t.qKeyEvent)},keystart:po((t=>{!0===i.enabled&&!0!==t.qSkipRipple&&!0===uo(t,i.modifiers.keyCodes)&&t.type==="key"+(!0===i.modifiers.early?"down":"up")&&mo(t,e,i,!0)}),300)};vo(i,t),e.__vcripple=i,lo(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&vo(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach((e=>{e()})),co(t,"main"),delete e._vcripple}});function go(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),a=/(?:Chrome|CriOS)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r;return{isTablet:r,isPhone:s,isAndroid:n,isPc:!s&&!n&&!i,isChrome:a,isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function fo(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==(null==e?void 0:e.empty)?e.empty():void 0!==(null==e?void 0:e.removeAllRanges)&&(e.removeAllRanges(),!0!==go().isPhone&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var yo=eo({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==go().hasTouch)return;const n={handler:t.value,noop:no,mouseStart(e){"function"==typeof n.handler&&!0==(0===e.button)&&(lo(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){var i;if(void 0!==e.target&&"function"==typeof n.handler){const o=e.target;lo(n,"temp",[[o,"touchmove","move","passiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(e),null==(i=null==t?void 0:t.touchStart)||i.call(t,e)}},start(e,t){n.origin=oo(e);const i=Date.now();!0===go().isPhone&&(document.body.classList.add("non-selectable"),fo(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(fo(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{fo(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=oo(e);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(e){var i;co(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==e&&so(e):clearTimeout(n.timer),null==(i=null==t?void 0:t.touchEnd)||i.call(t,e)}},o=[600,5,7];"string"==typeof t.arg&&t.arg.length>0&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,!0===i.mouse&&lo(n,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture?"Capture":"")]]),!0===go().hasTouch&&lo(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;void 0!==t&&(co(t,"main"),co(t,"temp"),clearTimeout(t.timer),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchhold)}});function bo(){let e,t;const i=new Promise((function(i,n){e=i,t=n}));return{resolve:e,reject:t,promise:i}}function Co(e,t,i){const n=Xn(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=n.$services.primitives;return i&&i.add(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.contains(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function wo(e,t,i){const n=Xn(e,t,i);if(void 0===n)return;i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject,o=e&&e.add(t);return Cesium.defined(o)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};const o=()=>ve(n.getServices(),{get primitives(){return i.cesiumObject}});return a(J,o()),i.appContext.config.globalProperties.$VueCesium=o(),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Oo(e,t,i){const r=Xn(e,t,i);if(void 0===r)return;const{emit:s}=t,l=o(0),c=o([]);i.createCesiumObject=async()=>{var t,o;const a=r.transformProps(e);return a.asynchronous||await(null==(o=(t=Cesium[i.cesiumClass]).initializeTerrainHeights)?void 0:o.call(t)),e.geometryInstances&&(n(e.geometryInstances)?(c.value.push(...e.geometryInstances),l.value+=e.geometryInstances.length):(l.value+=1,c.value.push(e.geometryInstances))),new Cesium[i.cesiumClass](a)},i.mount=async()=>{const e=i.cesiumClass.includes("Ground")?r.$services.groundPrimitives:r.$services.primitives,t=i.cesiumObject;t.readyPromise&&t.readyPromise.then((e=>{ge(i,"readyPromise")&&s("readyPromise",e,r.$services.viewer,i.proxy)})),t._vcParent=e;const n=e&&e.add(t);if("ParticleSystem"===i.cesiumClass){const e=setInterval((()=>{Cesium.defined(n._billboardCollection)&&(n._billboardCollection._vcParent=n,clearInterval(e))}),500)}return Cesium.defined(n)},i.unmount=async()=>{l.value=0,c.value=[];const e=i.cesiumClass.includes("Ground")?r.$services.groundPrimitives:r.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};const u=()=>ve(r.getServices(),{get primitive(){return i.cesiumObject}});return a(J,u()),i.appContext.config.globalProperties.$VueCesium=u(),Object.assign(i.proxy,{__updateGeometryInstances:(e,n)=>{if(c.value.push(e),n===l.value-1){if(ge(i,"update:geometryInstances"))t.emit("update:geometryInstances",c.value);else{i.cesiumObject.geometryInstances=0===n?e:c.value}}return!0},__removeGeometryInstances:e=>{const t=c.value.indexOf(e);return c.value.splice(t,1),!0},__childCount:l}),{transformProps:r.transformProps,unwatchFns:r.unwatchFns,setPropsWatcher:r.setPropsWatcher}}const xo=52.35987755982988,So=3.141592653589793,_o=6378245,Eo=.006693421622965943,Po=function(e,t){const i=(e=+e)-.0065,n=(t=+t)-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*xo),a=Math.atan2(n,i)-3e-6*Math.cos(i*xo);return[o*Math.cos(a),o*Math.sin(a)]},To=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*xo),n=Math.atan2(t,e)+3e-6*Math.cos(e*xo);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},Mo=function(e,t){if(Ao(e=+e,t=+t))return[e,t];{let i=jo(e-105,t-35),n=Lo(e-105,t-35);const o=t/180*So;let a=Math.sin(o);a=1-Eo*a*a;const r=Math.sqrt(a);i=180*i/(_o*(1-Eo)/(a*r)*So),n=180*n/(_o/r*Math.cos(o)*So);return[e+n,t+i]}},Io=function(e,t){if(Ao(e=+e,t=+t))return[e,t];{let i=jo(e-105,t-35),n=Lo(e-105,t-35);const o=t/180*So;let a=Math.sin(o);a=1-Eo*a*a;const r=Math.sqrt(a);i=180*i/(_o*(1-Eo)/(a*r)*So),n=180*n/(_o/r*Math.cos(o)*So);return[2*e-(e+n),2*t-(t+i)]}};var jo=function(e,t){let i=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*So)+20*Math.sin(2*e*So))/3,i+=2*(20*Math.sin(t*So)+40*Math.sin(t/3*So))/3,i+=2*(160*Math.sin(t/12*So)+320*Math.sin(t*So/30))/3,i},Lo=function(e,t){let i=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*So)+20*Math.sin(2*e*So))/3,i+=2*(20*Math.sin(e*So)+40*Math.sin(e/3*So))/3,i+=2*(150*Math.sin(e/12*So)+300*Math.sin(e/30*So))/3,i},Ao=function(e,t){t=+t;return!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)};const Do=Object.freeze(Object.defineProperty({__proto__:null,bd09togcj02:Po,gcj02tobd09:To,gcj02towgs84:Io,wgs84togcj02:Mo},Symbol.toStringTag,{value:"Module"}));function Ro(e,t,i){i.cesiumEvents=["errorEvent"];const n=Xn(e,t,i);if(void 0===n)return;const{emit:o}=t;return i.mount=async()=>{var t,a,r,s;const{viewer:l}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){i.renderByParent=!0;const n=i.cesiumObject;if(null==(t=null==n?void 0:n.readyPromise)||t.then((()=>{ge(i,"readyPromise")&&o("readyPromise",n,l,i.proxy)})),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to){if(!("VcImageryProviderBaidu"===(null==(a=i.proxy)?void 0:a.$options.name)||"VcImageryProviderTianditu"===(null==(r=i.proxy)?void 0:r.$options.name)&&"4490"===n._epsgCode)){const{WebMercatorTilingScheme:t,Cartographic:i,Math:o}=Cesium,a=new t,r=a.projection,s=r.project,l=r.unproject;let c,u;"WGS84"===e.projectionTransforms.to.toUpperCase()?(c="wgs84togcj02",u="gcj02towgs84"):"GCJ02"===e.projectionTransforms.to.toUpperCase()&&(c="gcj02towgs84",u="wgs84togcj02"),c&&u&&(r.project=function(e,t){return t=t||new Cesium.Cartesian3,t=Do[c](o.toDegrees(e.longitude),o.toDegrees(e.latitude)),s.call(this,new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1])))},r.unproject=function(e,t){t=t||new i;const n=l.call(this,e);return t=Do[u](o.toDegrees(n.longitude),o.toDegrees(n.latitude)),new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1]))},n._tilingScheme=a)}}const c=ye(i).proxy;return c&&(null==(s=c.__updateProvider)?void 0:s.call(c,n))}{const e=i.cesiumObject;return e.readyPromise.then((()=>{ge(i,"readyPromise")&&o("readyPromise",e,l,i.proxy)})),l.terrainProvider=e,!0}},i.unmount=async()=>{var e;const{viewer:t}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){const t=ye(i).proxy;return t&&(null==(e=t.__updateProvider)?void 0:e.call(t,void 0))}{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{ge(i,"readyPromise")&&o("readyPromise",e,t,i.proxy)})),t.terrainProvider=e,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function ko(){const e=d(),t=de(void 0);if(e)return l(J)||e.appContext.config.globalProperties.$VueCesium;t.warn("VueCesium useVueCesium() can only be used inside setup().")}var Bo={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object};class No{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(e){const{PrimitiveCollection:t,Cesium3DTileset:i,Model:n}=Cesium,o=e.length;for(let a=0;a<o;a++){const o=e.get(a);o instanceof t?this.hidePrimitiveCollection(o):(this.states.push(o.show),o instanceof i||o instanceof n||(o.show=!1))}}restorePrimitiveCollection(e){const{PrimitiveCollection:t}=Cesium,i=e.length;for(let n=0;n<i;n++){const i=e.get(n);i instanceof t?this.restorePrimitiveCollection(i):i.show=this.states.get(this.count++)}}hide(e){this.states.length=0,this.hidePrimitiveCollection(e.primitives),this.hidePrimitiveCollection(e.groundPrimitives)}restore(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)}}var Vo=0,zo=1,Fo=2;const Ho=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),Uo=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Wo=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),Go=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),$o=class{constructor(e){e=ae(e,{}),this.distanceUnits=ae(e.distanceUnits,Ho.METERS),this.areaUnits=ae(e.areaUnits,Uo.SQUARE_METERS),this.volumeUnits=ae(e.volumeUnits,Wo.CUBIC_METERS),this.angleUnits=ae(e.angleUnits,Go.DEGREES),this.slopeUnits=ae(e.slopeUnits,Go.DEGREES)}static distanceToString(e,t,i,n){return Jo(e=$o.convertDistance(e,Ho.METERS,t),i,n)+$o.getDistanceUnitSpacing(t)+$o.getDistanceUnitSymbol(t)}static areaToString(e,t,i,n){return Jo(e=$o.convertArea(e,Uo.SQUARE_METERS,t),i,n)+$o.getAreaUnitSpacing(t)+$o.getAreaUnitSymbol(t)}static angleToString(e,t,i,n){const{Math:o}=Cesium;if(t===Go.DEGREES||t===Go.RADIANS||t===Go.GRADE)return Jo(e=Qo(e,t),i,n)+$o.getAngleUnitSpacing(t)+$o.getAngleUnitSymbol(t);if(t===Go.DEGREES_MINUTES_SECONDS){const t=o.toDegrees(e),i=t<0?"-":"",a=Math.floor(t),r=60*(t-a),s=Math.floor(r);return i+a+"° "+s+"' "+Jo(60*(r-s),void 0,n)+'"'}Go.RATIO}static volumeToString(e,t,i,n){return Jo(e=$o.convertArea(e,Wo.CUBIC_METERS,t),i,n)+$o.getVolumeUnitSpacing(t)+$o.getVolumeUnitSymbol(t)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===Go.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case Ho.METERS:return"m";case Ho.CENTIMETERS:return"cm";case Ho.KILOMETERS:return"km";case Ho.FEET:case Ho.US_SURVEY_FEET:return"ft";case Ho.INCHES:return"in";case Ho.YARDS:return"yd";case Ho.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case Uo.SQUARE_METERS:return"m²";case Uo.SQUARE_CENTIMETERS:return"cm²";case Uo.SQUARE_KILOMETERS:return"km²";case Uo.SQUARE_FEET:return"sq ft";case Uo.SQUARE_INCHES:return"sq in";case Uo.SQUARE_YARDS:return"sq yd";case Uo.SQUARE_MILES:return"sq mi";case Uo.ACRES:return"ac";case Uo.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case Wo.CUBIC_METERS:return"m³";case Wo.CUBIC_CENTIMETERS:return"cm³";case Wo.CUBIC_KILOMETERS:return"km³";case Wo.CUBIC_FEET:return"cu ft";case Wo.CUBIC_INCHES:return"cu in";case Wo.CUBIC_YARDS:return"cu yd";case Wo.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===Go.DEGREES?"°":e===Go.RADIANS?"rad":e===Go.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*Yo(t)*(1/Yo(i))}static convertArea(e,t,i){return t===i?e:e*qo(t)*(1/qo(i))}static convertVolume(e,t,i){return t===i?e:e*Xo(t)*(1/Xo(i))}static convertAngle(e,t,i){return t===i?e:Qo(function(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===Go.RADIANS)return e;if(t===Go.DEGREES)return n.toRadians(e);if(t===Go.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===Go.RATIO)return Math.atan(e);if(t===Go.DEGREES_MINUTES_SECONDS){const t=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(t))throw new o("Could not convert angle to radians: "+e);let a=0<t[1].length?-1:1;const r=parseInt(t[2]),s=parseInt(t[3]),l=parseFloat(t[4]);let c=t[5];1===c.length&&("W"!==(c=c.toUpperCase())&&"S"!==c||(a*=-1));const u=a*(r+s/60+l/3600);return n.toRadians(u)}}(e,t),i)}static longitudeToString(e,t,i,n){return $o.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"W":"E")}static latitudeToString(e,t,i,n){return $o.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"S":"N")}};let Zo=$o;function Yo(e){switch(e){case Ho.METERS:return 1;case Ho.CENTIMETERS:return.01;case Ho.KILOMETERS:return 1e3;case Ho.FEET:return.3048;case Ho.US_SURVEY_FEET:return 1200/3937;case Ho.INCHES:return.254;case Ho.YARDS:return.9144;case Ho.MILES:return 1609.344;default:return 1}}function qo(e){switch(e){case Uo.SQUARE_METERS:return 1;case Uo.SQUARE_CENTIMETERS:return 1e-4;case Uo.SQUARE_KILOMETERS:return 1e6;case Uo.SQUARE_FEET:return.09290304;case Uo.SQUARE_INCHES:return 64516e-8;case Uo.SQUARE_YARDS:return.83612736;case Uo.SQUARE_MILES:return 2589988.110336;case Uo.ACRES:return 4046.85642232;case Uo.HECTARES:return 1e4;default:return 1}}function Xo(e){switch(e){case Wo.CUBIC_METERS:return 1;case Wo.CUBIC_CENTIMETERS:return 1e-6;case Wo.CUBIC_KILOMETERS:return 1e9;case Wo.CUBIC_FEET:return.09290304*.3048;case Wo.CUBIC_INCHES:return 16387064e-12;case Wo.CUBIC_YARDS:return.764554857984;case Wo.CUBIC_MILES:return 4168181825.44058;default:return 1}}function Qo(e,t){const{Math:i}=Cesium;return t===Go.RADIANS?e:t===Go.DEGREES?i.toDegrees(e):t===Go.GRADE?i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e):t===Go.RATIO?Math.sin(e)/Math.cos(e):void 0}function Jo(e,t,i){const n=function(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};"number"==typeof(e=Cesium.defaultValue(e,2))?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n="function"==typeof e?e(t,i):e;return n}(i,e,t),o=e.toLocaleString(t,n);return o===(-0).toLocaleString(t,n)?(0).toLocaleString(t,n):o}Zo.numberToString=function(e,t,i){return Jo(e,t,i)};class Ko{constructor(e){const{defined:t,defaultValue:i,Color:n,createGuid:o,BoundingSphere:a,Ellipsoid:r,ClassificationType:s}=Cesium;e=i(e,{}),this.show=i(e.show,!0),this._id=t(e.id)?e.id:o(),this._ellipsoid=i(e.ellipsoid,r.WGS84),this._appearance=i(e.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=e.depthFailAppearance,this._positions=i(e.positions,[]),this._polygonHierarchy=e.polygonHierarchy,this._clampToGround=i(e.clampToGround,!1),this._classificationType=i(e.classificationType,s.BOTH),this._allowPicking=i(e.allowPicking,!0),this._asynchronous=i(e.asynchronous,!1),this._boundingSphere=new a,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(e){this._positions=e,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(e){this._polygonHierarchy=e,this._update=!0}get appearance(){return this._appearance}set appearance(e){this._appearance=e,void 0!==this._primitive&&(this._primitive.appearance=e)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(e){this._depthFailAppearance=e,void 0!==this._primitive&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=e)}get id(){return this._id}set id(e){this._id=e}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get classificationType(){return this._classificationType}set classificationType(e){this._classificationType=e,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(e){this._allowPicking=e}get asynchronous(){return this._asynchronous}set asynchronous(e){this._asynchronous=e}async update(e){if(this.show){const t=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(t.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){let e;this._update=!1,e=this._clampToGround?this._createGroundPolygon():this._createPolygon(),e.then((e=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=e,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(t,this._boundingSphere)}))}this._primitive&&this._primitive.update(e)}}}async _createPolygon(){const{Primitive:e,GeometryInstance:t,CoplanarPolygonGeometry:i,Cartesian3:n}=Cesium;return new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:e,GeometryInstance:t,PolygonGeometry:i,Cartesian3:n}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class ea{constructor(e){const{SampledPositionProperty:t,Entity:i,ExtrapolationType:n,VelocityOrientationProperty:o,CallbackProperty:a}=Cesium;this._lastTime=void 0,this._sampledPosition=new t,this._sampledPosition.forwardExtrapolationType=e.forwardExtrapolationType||n.HOLD,this._sampledPosition.backwardExtrapolationType=e.backwardExtrapolationType||n.HOLD,this._cache=[],this._maxCacheSize=e.maxCacheSize||10;const r=new i(e);r.position=this._sampledPosition;const s=new o(this._sampledPosition);let l;r.orientation=new a(((e,t)=>{const i=s.getValue(e);return i?(l=i,i):l}),!1),this._entity=r,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(e){this._entity.id=e}set maxCacheSize(e){this._maxCacheSize=e}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const e=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),t=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(e,t){let i;if(this._removePosition(),"number"==typeof t){const e=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(e,t,new Cesium.JulianDate),Cesium.destroyObject(e)}else i=Ve(t);return this._sampledPosition.addSample(i,Ce(e)),this._lastTime=i,this._cache.push(this._lastTime),i}}const ta={position:0,normal:1};class ia{constructor(e){const{defaultValue:t,Matrix4:i,Math:n,Color:o,BoundingSphere:a}=Cesium;this.modelMatrix=t(e.modelMatrix,new i),this.fovH=t(e.fovH,n.toRadians(60)),this.fovV=t(e.fovV,n.toRadians(30)),this.segmentH=t(e.segmentH,16),this.segmentV=t(e.segmentV,8),this.subSegmentH=t(e.subSegmentH,3),this.subSegmentV=t(e.subSegmentV,3),this._faceColor=t(e.faceColor,new o(1,1,1,.1)),this._lineColor=t(e.lineColor,new o(1,1,1,.4)),this.show=t(e.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new a,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(e){this._faceColor=e}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e}update(e){if(this.show&&e.passes.render){const{clone:t,Matrix4:i,defined:n,BoundingSphere:o}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),n(this._command)||this._createCommand(e.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&e.commandList.push(this._command),this._lineCommand&&e.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(e){const{Appearance:t,RenderState:i,ShaderSource:n,ShaderProgram:o,BufferUsage:a,IndexDatatype:r,VertexArray:s,ComponentDatatype:l,BoundingSphere:c,DrawCommand:u,PrimitiveType:d,Pass:p,Matrix4:m}=Cesium,v=this,h=this._subSegmentH*this._segmentH,g=this._subSegmentV*this._segmentV,f=na(this._fovH,this._fovV,h,g),y=na(this._fovH,this._fovV,h,g),b=function(e,t){const i=new Uint16Array(e*t*6);for(let n=0;n<e;n++)for(let o=0;o<t;o++){const t=o*(1+e)+n,a=o*(1+e)+n+1,r=(o+1)*(1+e)+n,s=(o+1)*(1+e)+n+1,l=6*(o*e+n);i[0+l]=t,i[1+l]=a,i[2+l]=s,i[3+l]=t,i[4+l]=s,i[5+l]=r}return i}(h,g),C=function(e,t,i,n){const o=e*i,a=t*n,r=new Uint16Array((e+1)*(2*a)+(t+1)*(2*o)+8);for(let c=0;c<e+1;c++)for(let e=0;e<a;e++){const t=c*i;r[2*(c*a+e)+0]=e*(1+o)+t,r[2*(c*a+e)+1]=(e+1)*(1+o)+t}const s=(e+1)*(2*a);for(let c=0;c<t;c++)for(let e=0;e<o;e++){const t=c*n;r[s+2*(e+c*o)]=t*(1+o)+e,r[s+2*(e+c*o)+1]=t*(1+o)+e+1}const l=(e+1)*(2*a)+(t+1)*(2*o);return r[l]=0,r[l+1]=(1+o)*(1+a),r[l+2]=o,r[l+3]=(1+o)*(1+a),r[l+4]=(1+o)*a,r[l+5]=(1+o)*(1+a),r[l+6]=(1+o)*(1+a)-1,r[l+7]=(1+o)*(1+a),r}(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),w=t.getDefaultRenderState(!0,!1,void 0),O=i.fromCache(w),x=new n({sources:["\n        // 使用double类型的position进行计算\n        // attribute vec3 position3DHigh;\n        // attribute vec3 position3DLow;\n        attribute vec3 position;\n        attribute vec3 normal;\n        // attribute vec2 st;\n        // attribute float batchId;\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        void main()\n          {\n            // 使用double类型的position进行计算\n            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            // position in eye coordinates\n            // v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            // gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;\n            // position in eye coordinates\n            v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n          }\n        "]}),S=new n({sources:["\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        // uniform sampler2D myImage;\n        uniform vec4 vcColor;\n        void main()\n        {\n          vec3 positionToEyeEC = -v_positionEC;\n          vec3 normalEC = normalize(v_normalEC);\n          #ifdef FACE_FORWARD\n          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n          #endif\n          czm_materialInput materialInput;\n          materialInput.normalEC = normalEC;\n          materialInput.positionToEyeEC = positionToEyeEC;\n          // materialInput.st = v_st;\n          //czm_material material = czm_getMaterial(materialInput);\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          // material.diffuse = texture2D(myImage, materialInput.st).rgb;\n          material.diffuse = vcColor.rgb;\n          material.alpha = vcColor.a;\n          #ifdef FLAT\n          gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n          #else\n          gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n          #endif\n        }\n        "]}),_={vcColor:function(){return v._faceColor}},E={vcColor:function(){return v._lineColor}},P=o.fromCache({context:e,vertexShaderSource:x,fragmentShaderSource:S,attributeLocations:ta});this._shaderprogram=P;const T=Cesium.Buffer.createVertexBuffer({context:e,typedArray:f,usage:a.STATIC_DRAW}),M=Cesium.Buffer.createVertexBuffer({context:e,typedArray:y,usage:a.STATIC_DRAW}),I=Cesium.Buffer.createIndexBuffer({context:e,typedArray:b,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),j=Cesium.Buffer.createIndexBuffer({context:e,typedArray:C,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),L=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:I}),A=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:j});this._initBoundingSphere=c.fromVertices(f),this._command=new u({vertexArray:L,primitiveType:d.TRIANGLES,renderState:O,shaderProgram:P,uniformMap:_,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0}),this._lineCommand=new u({vertexArray:A,primitiveType:d.LINES,renderState:O,shaderProgram:P,uniformMap:E,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0})}_destroyVideoMemory(){const{defined:e}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),e(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),e(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function na(e,t,i,n){const o=new Float32Array((i+1)*(n+1)*3+3);for(let a=0;a<i+1;a++)for(let r=0;r<n+1;r++){const s=e*(a/i-.5),l=t*(r/n-.5),c=[Math.cos(-s)*Math.cos(-l),Math.sin(-s)*Math.cos(-l),Math.sin(l)];o[3*(r*(i+1)+a)+0]=c[0],o[3*(r*(i+1)+a)+1]=c[1],o[3*(r*(i+1)+a)+2]=c[2]}return o[(i+1)*(n+1)*3+0]=0,o[(i+1)*(n+1)*3+1]=0,o[(i+1)*(n+1)*3+2]=0,o}let oa=!1;let aa,ra=!1;class sa{constructor(e,t){const{defined:i,DeveloperError:n,PerspectiveFrustum:o,Math:a,Camera:r,ShadowMap:s,ShadowMode:l,Event:c,Cartesian3:u,defaultValue:d,Color:p}=Cesium;if(!i(e))throw new n("scene is required.");this._scene=e,this._frustum=new o,this._frustum.fov=a.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new r(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new s({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),t=t||{},this._scene.globe.shadows=l.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new ia({}),this._enabledChangedEvent=new c,this._position=new u,this._offsetHeight=d(t.offsetHeight,1.8),this._visibleColor=d(t.visibleColor,new p(0,1,0,1)),this._invisibleColor=d(t.invisibleColor,new p(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=t.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=d(t.lineColor,new p(1,1,1,.4)),this._debugCameraPrimitive.faceColor=d(t.faceColor,new p(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(e){this.frustum.near!==e&&(this.frustum.near=e)}get far(){return this.far.near}set far(e){this.frustum.far!==e&&(this.frustum.far=e)}get position(){return this._position}set position(e){e instanceof Cesium.Cartesian3&&this.setView({destination:e.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(e){if(isNaN(e)||null==e||null==e)throw new Error("Unacceptable offset.");this._offsetHeight=Number(e),this.setView({destination:this._position,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(e){this._spotLightCamera.heading!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:e,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(e){this._spotLightCamera.pitch!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:e,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(e){this._spotLightCamera.roll!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:e}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(e){this._viewshedShadowMap.enabled!==e&&(e?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(e))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e,this._viewshedShadowMap._viewshedColors.visible=e}get invisibleColor(){return this._invisibleColor}set invisibleColor(e){this._invisibleColor=e,this._viewshedShadowMap._viewshedColors.invisible=e}get showGridLine(){return this._showGridLine}set showGridLine(e){this._showGridLine=e,this._debugCameraPrimitive.show=e}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(e){this._debugCameraPrimitive.faceColor=e}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(e){this._debugCameraPrimitive.lineColor=e}update(e){if(this._viewshedShadowMap.enabled){const{ShadowMode:t,Matrix3:i,Matrix4:n,Math:o}=Cesium;if(this._scene.globe.shadows!==t.ENABLED&&(this._scene.globe.shadows=t.ENABLED),e.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const t=this._debugCameraPrimitive.modelMatrix;n.clone(this._spotLightCamera.inverseViewMatrix,t);const a=i.fromRotationZ(.5*o.PI),r=i.fromRotationY(.5*o.PI),s=new i;i.multiply(a,r,s),n.multiplyByMatrix3(t,s,t),n.multiplyByUniformScale(t,this._spotLightCamera.frustum.far,t);const l=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=l.aspectRatio<=1?l.fov:2*Math.atan(Math.tan(.5*l.fov)/l.aspectRatio),this._debugCameraPrimitive.fovH=1<l.aspectRatio?l.fov:2*Math.atan(Math.tan(.5*l.fov)*l.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(e)}}}setView(e){const t=(e=e||{}).destination;if(t instanceof Cesium.Cartesian3){this._position=t.clone();const i=this._offsetHeight,n=Cesium.Cartographic.fromCartesian(t,this._scene.globe.ellipsoid);if(n){n.height=n.height+i;const t=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this._scene.globe.ellipsoid);e.destination=t}}this._spotLightCamera.setView(e)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}const la=[class{static extend(e){if(oa)return;const{Rectangle:t}=Cesium;t.prototype.expand=function(e,i,n){return e=(n=n&&n instanceof t?n:this.clone()).width*(1-e)/2,i=n.height*(1-i)/2,n.west+=e,n.south+=i,n.east-=e,n.north-=i,n.west=n.west<-Math.PI?-Math.PI:n.west,n.east=n.east>Math.PI?Math.PI:n.east,n.north=n.north>Math.PI/2?Math.PI/2:n.north,n.south=n.south<-Math.PI/2?-Math.PI/2:n.south,n},oa=!0}static revoke(e){if(!oa)return;const{Rectangle:t}=Cesium;t.prototype.expand=void 0,oa=!1}},class{static extend(e){if(ra)return;const t=Cesium.ShadowMapShader;aa=t.createShadowReceiveFragmentShader,t.createShadowReceiveFragmentShader=function(e,t,i,n,o){e=aa.bind(this)(e,t,i,n,o);return t._isSpotLight&&(e.sources[0]=`\n          uniform vec4 shadowMap_viewshedVisibleColor;\n          uniform vec4 shadowMap_viewshedInvisibleColor;\n          ${e.sources[0]}\n        `,e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("gl_FragColor.rgb *= visibility;","\n          float _depth = shadowPosition.z - shadowParameters.depthBias;\n          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);\n          gl_FragColor.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);\n          "),e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")),e},ra=!0}static revoke(e){if(!ra)return;Cesium.ShadowMapShader.createShadowReceiveFragmentShader=aa,ra=!1}}];const ca=Bo;function ua(e,t,i){let n,a;const r=new Promise(((e,t)=>{n=e,a=t})),s=o(null),l=o(!1),c=g(),{emit:d}=t,p=ce(),m=de(i);i.mounted=!1,i.vcMitt=c,i.cesiumClass="Viewer",i.children=[];const v=$n(e,i,m),y=b({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let O=[];m.debug("viewer creating");const{t:x}=Gn(),{invokeExtensions:S,revokeExtensions:_}={invokeExtensions:e=>{la.forEach((t=>{t.extend(e)}))},revokeExtensions:e=>{la.forEach((t=>{t.revoke(e)}))}};f((()=>e.selectionIndicator),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,SelectionIndicator:a}=Cesium;let r;if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()||e){if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-selectionIndicatorContainer",null==n||n.appendChild(r);const e=new a(r,t.scene);t._selectionIndicator=e}}else r=t.selectionIndicator.container,null==n||n.removeChild(r),t.selectionIndicator.destroy(),t._selectionIndicator=void 0;t.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:e?"added":"removed",target:r})})),f((()=>e.infoBox),(e=>{var t,n;const{viewer:o,viewerElement:a}=i,{defined:r,InfoBox:s}=Cesium,l=["cameraClicked","closeClicked"];let c;if(!r(o.infoBox)||o.infoBox.isDestroyed()||e){if(!r(o.infoBox)||o.infoBox.isDestroyed()){c=document.createElement("div"),c.className="cesium-viewer-infoBoxContainer",null==a||a.appendChild(c);const e=new s(c),i=e.viewModel;o._onInfoBoxCameraClicked&&(null==(t=o._eventHelper)||t.add(i.cameraClicked,o._onInfoBoxCameraClicked,o)),o._onInfoBoxClockClicked&&(null==(n=o._eventHelper)||n.add(i.closeClicked,o._onInfoBoxClockClicked,o)),i&&v.bindEvents(i,l,!0),o._infoBox=e}}else{const e=o.infoBox.viewModel;e&&v.bindEvents(e,l,!1),c=o.infoBox.container,null==a||a.removeChild(c),o.infoBox.destroy(),o._infoBox=void 0}o.forceResize(),o.viewerWidgetResized.raiseEvent({type:"infoBox",status:e?"added":"removed",target:c})})),f((()=>e.geocoder),(t=>{var n;const{viewer:o}=i,a=o._toolbar,{defined:r,Geocoder:s}=Cesium;let l;if(!r(o.geocoder)||o.geocoder.isDestroyed()||t){if(!r(o.geocoder)||o.geocoder.isDestroyed()){l=document.createElement("div"),l.className="cesium-viewer-geocoderContainer",null==a||a.appendChild(l);const t=new s({container:l,geocoderServices:r(e.geocoder)&&"boolean"!=typeof e.geocoder?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:o.scene});o._clearObjects&&(null==(n=o._eventHelper)||n.add(t.viewModel.search.beforeExecute,o._clearObjects,o)),o._geocoder=t,B(a)}}else l=o.geocoder.container,null==a||a.removeChild(l),o.geocoder.destroy(),o._geocoder=void 0;o.viewerWidgetResized.raiseEvent({type:"geocoder",status:t?"added":"removed",target:l})})),f((()=>e.homeButton),(e=>{var t,n;const{viewer:o}=i,a=o._toolbar,{defined:r,HomeButton:s}=Cesium;if(!r(o.homeButton)||o.homeButton.isDestroyed()||e){if(!r(o.homeButton)||o.homeButton.isDestroyed()){const e=new s(a,o.scene);r(o.geocoder)&&(null==(t=o._eventHelper)||t.add(e.viewModel.command.afterExecute,(function(){const e=o.geocoder.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}))),o._clearTrackedObject&&(null==(n=o._eventHelper)||n.add(e.viewModel.command.beforeExecute,o._clearTrackedObject,o)),o._homeButton=e,B(a)}}else o.homeButton.destroy(),o._homeButton=void 0;o.viewerWidgetResized.raiseEvent({type:"homeButton",status:e?"added":"removed",target:a})})),f((()=>e.sceneModePicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,DeveloperError:r,SceneModePicker:s}=Cesium;if(!a(n.sceneModePicker)||n.sceneModePicker.isDestroyed()||t){if(!a(n.sceneModePicker)||n.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new r("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const e=new s(o,n.scene);n._sceneModePicker=e,B(o)}}}else n.sceneModePicker.destroy(),n._sceneModePicker=void 0;n.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:t?"added":"removed",target:o})})),f((()=>e.projectionPicker),(e=>{const{viewer:t}=i,n=t._toolbar,{defined:o,ProjectionPicker:a}=Cesium;if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()||e){if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()){const e=new a(n,t.scene);t._projectionPicker=e,B(n)}}else t.projectionPicker.destroy(),t._projectionPicker=void 0;t.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:e?"added":"removed",target:n})})),f((()=>e.baseLayerPicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,buildModuleUrl:r,DeveloperError:s,defaultValue:l,createDefaultImageryProviderViewModels:c,createDefaultTerrainProviderViewModels:u,BaseLayerPicker:d}=Cesium;if(!a(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()||t){if(!a(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()){const t=!(Cesium.defined(n.scene.globe)&&!1===e.globe||Cesium.defined(n.baseLayerPicker)&&!1===e.baseLayerPicker);if(t&&a(e.imageryProvider))throw new s("options.imageryProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&a(e.selectedImageryProviderViewModel))throw new s("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(t&&a(e.terrainProvider))throw new s("options.terrainProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&a(e.selectedTerrainProviderViewModel))throw new s("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(t){const t=l(e.imageryProviderViewModels,c()),i=l(e.terrainProviderViewModels,u()),a=new d(o,{globe:n.scene.globe,imageryProviderViewModels:t,selectedImageryProviderViewModel:t[0],terrainProviderViewModels:i,selectedTerrainProviderViewModel:i[0]}),r=null==o?void 0:o.getElementsByClassName("cesium-baseLayerPicker-dropDown"),s=null==r?void 0:r[0];n._baseLayerPickerDropDown=s,n._baseLayerPicker=a,n.imageryLayers.raiseToTop(n.imageryLayers.get(0)),B(o)}}}else{n.baseLayerPicker.destroy(),n._baseLayerPicker=void 0,n.imageryLayers.remove(n.imageryLayers.get(n.imageryLayers.length-1));const e=r("Assets/Textures/NaturalEarthII"),t=n.imageryLayers.addImageryProvider(new Cesium.TileMapServiceImageryProvider({url:e}));n.imageryLayers.lowerToBottom(t)}n.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:t?"added":"removed",target:o})})),f((()=>e.navigationHelpButton),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,defaultValue:r,NavigationHelpButton:s}=Cesium;if(!a(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()||t){if(!a(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()){let t=!0;try{if(a(window.localStorage)){const e=window.localStorage.getItem("cesium-hasSeenNavHelp");a(e)&&Boolean(e)?t=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(_h){}const i=new s({container:o,instructionsInitiallyVisible:r(e.navigationInstructionsInitiallyVisible,t)});n._navigationHelpButton=i,B(o)}}else n.navigationHelpButton.destroy(),n._navigationHelpButton=void 0;n.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:t?"added":"removed",target:o})})),f((()=>e.animation),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,Animation:a,AnimationViewModel:r}=Cesium;let s;if(!o(t.animation)||t.animation.isDestroyed()||e){if(!o(t.animation)||t.animation.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-animationContainer",null==n||n.appendChild(s);const e=new a(s,new r(t.clockViewModel));e.viewModel.dateFormatter=A,e.viewModel.timeFormatter=D,t._animation=e}}else s=t.animation.container,null==n||n.removeChild(s),t.animation.destroy(),t._animation=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"animation",status:e?"added":"removed",target:s})})),f((()=>e.timeline),(e=>{var t;const{viewer:n,viewerElement:o}=i,{defined:a,Timeline:r}=Cesium;let s;if(!a(n.timeline)||n.timeline.isDestroyed()||e){if(!a(n.timeline)||n.timeline.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-timelineContainer",null==o||o.appendChild(s);const e=new r(s,n.clock);e.makeLabel=e=>A(e),null==(t=e.addEventListener)||t.call(e,"settime",R,!1),e.zoomTo(n.clock.startTime,n.clock.stopTime),n._timeline=e}}else s=n.timeline.container,null==o||o.removeChild(s),n.timeline.destroy(),n._timeline=void 0;n.forceResize(),n.viewerWidgetResized.raiseEvent({type:"timeline",status:e?"added":"removed",target:s})})),f((()=>e.fullscreenButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,FullscreenButton:a}=Cesium;let r;if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()||e){if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-fullscreenContainer",null==n||n.appendChild(r);const e=new a(r,n);t._fullscreenButton=e}}else r=t.fullscreenButton.container,null==n||n.removeChild(r),t.fullscreenButton.destroy(),t._fullscreenButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),f((()=>e.fullscreenElement),(e=>{const{viewer:t}=i,{defined:n}=Cesium;n(t.fullscreenButton)&&n(e)&&(t.fullscreenButton.viewModel.fullscreenElement=e)})),f((()=>e.vrButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,VRButton:a}=Cesium;let r;if(!o(t.vrButton)||t.vrButton.isDestroyed()||e){if(!o(t.vrButton)||t.vrButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-vrContainer",null==n||n.appendChild(r);const e=new a(r,t.scene,n),i=e.viewModel.command;e.viewModel._command=function(e){i(),k(t,e.isVRMode)},t._vrButton=e}}else r=t.vrButton.container,null==n||n.removeChild(r),t.vrButton.destroy(),t._vrButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),f((()=>e.useDefaultRenderLoop),(e=>{i.viewer.useDefaultRenderLoop=e})),f((()=>e.sceneMode),(e=>{const{SceneMode:t}=Cesium;t.COLUMBUS_VIEW!==e&&t.MORPHING!==e&&t.SCENE2D!==e&&t.SCENE3D!==e||(i.viewer.scene.mode=e)})),f((()=>e.shouldAnimate),(e=>{i.viewer.clock.shouldAnimate=e})),f((()=>e.terrainExaggeration),(e=>{i.viewer._terrainExaggeration=e})),f((()=>e.shadows),(e=>{i.viewer.scene.shadowMap.enabled=e})),f((()=>e.terrainProvider),(e=>{e&&(i.viewer.terrainProvider=e)})),f((()=>e.camera),(e=>{Ae(i.viewer,e)}),{deep:!0}),f((()=>e.imageryProvider),((e,t)=>{const{viewer:n}=i,{defined:o}=Cesium;if(o(e)){for(let e=0;e<n.imageryLayers.length;e++)n.imageryLayers.get(e).imageryProvider===t&&n.imageryLayers.remove(n.imageryLayers[e]);e&&n.imageryLayers.addImageryProvider(e)}})),f((()=>e.showCredit),(e=>{const{viewer:t}=i;t.cesiumWidget.creditContainer.style.display=e?"inline":"none",t.viewerWidgetResized.raiseEvent({type:"credit",status:e?"added":"removed",target:t.cesiumWidget.creditContainer})})),f((()=>e.debugShowFramesPerSecond),(e=>{const{viewer:t}=i;t.scene.debugShowFramesPerSecond=e}));const E=async function(){var t,n,o;if(m.debug("loading-viewer"),i.mounted)return!1;if(await async function(){m.debug("beforeLoad - viewer"),ge(i,"beforeLoad")&&d("beforeLoad",i),p.value.__scriptPromise=p.value.__scriptPromise||T(),await p.value.__scriptPromise}(),"undefined"==typeof Cesium)return!1;const{Ion:a,buildModuleUrl:r,TileMapServiceImageryProvider:h,Viewer:g,defined:f,Math:y,Event:b}=Cesium,C=e.accessToken?e.accessToken:p.value.accessToken;a.defaultAccessToken=C;const{animation:O,baseLayerPicker:x,fullscreenButton:_,vrButton:E,geocoder:P,homeButton:M,infoBox:I,sceneModePicker:R,selectionIndicator:k,timeline:B,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:ne,automaticallyTrackDataSourceClocks:oe,contextOptions:ae,sceneMode:re,mapProjection:se,globe:le,orderIndependentTranslucency:ce,creditContainer:ue,creditViewport:de,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ye,projectionPicker:be,requestRenderMode:Ce,maximumRenderTimeChange:we,camera:Oe,navigation:xe}=e,Se=r("Assets/Textures/NaturalEarthII");let _e,Ee={animation:O,baseLayerPicker:x,fullscreenButton:_,vrButton:E,geocoder:P,homeButton:M,infoBox:I,sceneModePicker:R,selectionIndicator:k,timeline:B,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:ie(Z)?new h({url:Se}):Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:ie(Q)?fe(s):Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:ne,automaticallyTrackDataSourceClocks:oe,contextOptions:ae,sceneMode:re,mapProjection:se,globe:le,orderIndependentTranslucency:ce,creditContainer:ue,creditViewport:de,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ye,projectionPicker:be,requestRenderMode:Ce,maximumRenderTimeChange:we,navigation:xe};Ee=te(Ee),Cesium.VERSION>="1.83"&&delete Ee.terrainExaggeration,e.viewerCreator?_e=e.viewerCreator(i,fe(s),Ee):globalThis.mars3d?(i.map=new mars3d.Map(fe(s).id,Ee),_e=null==(t=i.map)?void 0:t._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(fe(s).id,Ee),_e=null==(n=i.dcViewer)?void 0:n.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(fe(s),Ee),_e=null==(o=i.earth)?void 0:o.czm.viewer):_e=new g(fe(s),Ee),S(_e),i.Cesium=Cesium,i.viewer=_e,i.viewerElement=_e._element,i.mounted=!0,Cesium.VERSION>="1.83"&&(_e.scene.globe.terrainExaggeration=me),f(Oe)&&Ae(_e,Oe);ge(i,"update:camera")&&_e.camera.changed.addEventListener((()=>{const e=_e.camera.positionCartographic;let t;t=u(Oe.position,"lng")?{position:{lng:y.toDegrees(e.longitude),lat:y.toDegrees(e.latitude),height:e.height},heading:y.toDegrees(_e.camera.heading||360),pitch:y.toDegrees(_e.camera.pitch||-90),roll:y.toDegrees(_e.camera.roll||0)}:{position:{x:_e.camera.position.x,y:_e.camera.position.y,z:_e.camera.position.z},heading:_e.camera.heading||2*Math.PI,pitch:_e.camera.pitch||-Math.PI/2,roll:_e.camera.roll||0},d("update:camera",t)})),f(_e.animation)&&(_e.animation.viewModel.dateFormatter=A,_e.animation.viewModel.timeFormatter=D),f(_e.timeline)&&(_e.timeline.makeLabel=e=>A(e),_e.timeline.zoomTo(_e.clock.startTime,_e.clock.stopTime)),!e.showCredit&&(_e.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(_e.scene.debugShowFramesPerSecond=!0),_e.viewerWidgetResized=_e.viewerWidgetResized||new b,_e.viewerWidgetResized.addEventListener(j),_e.imageryLayers.layerAdded.addEventListener(L),v.registerEvents(!0);const Pe={Cesium:Cesium,viewer:_e,vm:i.proxy};globalThis.XE?Object.assign(Pe,{earth:i.earth}):globalThis.mars3d?Object.assign(Pe,{map:i.map}):globalThis.DC&&Object.assign(Pe,{dcViewer:i.dcViewer});return ge(i,"ready")&&d("ready",Pe),null==c||c.emit("ready",Pe),w((()=>{_e.resize(),j({type:"viewer",status:"added",target:_e.container}),l.value=!0})),m.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:_e}),Pe},P=async function(){if(!i.mounted)return!1;let t;m.debug("viewer---unloading"),p.value.__viewerUnloadingPromise=new Promise(((e,i)=>{t=e}));for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}i.children.length=0;const{viewer:n,earth:o,map:a,dcViewer:r}=i;globalThis.Cesium&&(n.imageryLayers.layerAdded.removeEventListener(L),v.registerEvents(!1)),n._vcPickScreenSpaceEventHandler&&n._vcPickScreenSpaceEventHandler.destroy(),n._vcViewerScreenSpaceEventHandler&&n._vcViewerScreenSpaceEventHandler.destroy(),n._vcPickScreenSpaceEventHandler=void 0,n._vcViewerScreenSpaceEventHandler=void 0,_(n),globalThis.XE?o&&o.destroy():globalThis.mars3d?a&&a.destroy():globalThis.DC?r&&r.destroy():n&&n.destroy(),i.viewer=void 0,i.mounted=!1;const{removeCesiumScript:s}=e;if(s&&globalThis.Cesium){const e=document.getElementsByTagName("script"),t=[];for(const n of e)n.src.indexOf("/Cesium.js")>-1&&t.push(n),n.src.indexOf("/Workers/zlib.min.js")>-1&&t.push(n),globalThis.XE&&(n.src.indexOf("/rxjs.umd.min.js")>-1&&t.push(n),n.src.indexOf("/XbsjCesium.js")>-1&&t.push(n),n.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&t.push(n),n.src.indexOf("/XbsjEarth.js")>-1&&t.push(n)),O.includes(n.src)&&!t.includes(n)&&t.push(n);const i=document.getElementsByTagName("link");for(const n of i)n.href.includes("Widgets/widgets.css")&&!t.includes(n)&&t.push(n),O.includes(n.href)&&!t.includes(n)&&t.push(n);t.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),p.value.__scriptPromise=void 0,O=[]}return ge(i,"destroyed")&&d("destroyed",i),m.debug("viewer---unloaded"),t(!0),p.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},T=async function(){var t,n;if(m.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{let o=e.cesiumPath?e.cesiumPath:p.value.cesiumPath;const r=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";let t=e.charCodeAt(0);const i=47===t;let n=-1,o=!0;for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!o){n=a;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)}(o);if(null==o?void 0:o.includes(".js"))o.includes("dc.base")?(O.push(o),O.push(o.replace("dc.base","dc.core")),O.push(o.replace("dc.base","dc.core").replace(".js",".css"))):o.includes("/XbsjEarth.js")?O.push(o):(O.push(o),O.push(`${r}/Widgets/widgets.css`));else{(null==o?void 0:o.lastIndexOf("/"))!==(null==o?void 0:o.length)-1&&(o+="/");const i=e.mars3dConfig||{"font-awesome":[(n=o)+"fonts/font-awesome/css/font-awesome.min.css"],haoutil:[n+"hao/haoutil.js"],turf:[n+"turf/turf.min.js"],"mars3d-space":[n+"mars3d/plugins/space/mars3d-space.js"],"mars3d-echarts":[n+"echarts/echarts.min.js",n+"echarts/echarts-gl.min.js",n+"mars3d/plugins/echarts/mars3d-echarts.js"],"mars3d-mapv":[n+"mapV/mapv.min.js",n+"mars3d/plugins/mapv/mars3d-mapv.js"],"mars3d-heatmap":[n+"mars3d/plugins/heatmap/heatmap.min.js",n+"mars3d/plugins/heatmap/mars3d-heatmap.js"],"mars3d-wind":[n+"mars3d/plugins/wind/netcdfjs.js",n+"mars3d/plugins/wind/mars3d-wind.js"],mars3d:[n+"Cesium/Widgets/widgets.css",n+"Cesium/Cesium.js",n+"mars3d/mars3d.css",n+"mars3d/mars3d.js"]},a=((null==(t=p.value.cfg)?void 0:t.include)||"mars3d").split(","),r={};for(let e=0,t=a.length;e<t;e++){const t=a[e];r[t]||(r[t]=!0,O.push(...i[t]))}}const s=O;if(!(null==o?void 0:o.includes(".js"))){const e=O.find((e=>e.includes("Cesium.js")));await M(e),s.splice(s.indexOf(e),1)}const l=[];return s.forEach((e=>{new RegExp("\\.css").test(e)?l.push(I(e)):l.push(M(e))})),Promise.all(l).then((()=>{if(globalThis.Cesium){return ge(i,"cesiumReady")&&d("cesiumReady",globalThis.Cesium),globalThis.Cesium}return globalThis.XE?globalThis.XE.ready().then((()=>(ge(i,"cesiumReady")&&d("cesiumReady",globalThis.Cesium),globalThis.Cesium))):globalThis.DC?(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${r}/resources/`,globalThis.DC.ready((()=>{globalThis.Cesium=DC.Namespace.Cesium;return ge(i,"cesiumReady")&&d("cesiumReady",globalThis.DC),globalThis.Cesium})),globalThis.Cesium):void a(new Error("VueCesium ERROR: Error loading CesiumJS!"))}))}},M=e=>{const t=document.createElement("script");return t.async=!0,t.src=e,document.body.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},I=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.href=e,document.head.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},j=e=>{var t,n;const{viewer:o}=i,a=o._toolbar;void 0!==a&&"hidden"!==getComputedStyle(a).visibility&&"none"!==getComputedStyle(a).display?y.toolbarContainerRC=a.getBoundingClientRect():y.toolbarContainerRC=void 0;const r=o.bottomContainer;void 0!==r&&"hidden"!==getComputedStyle(r).visibility&&"none"!==getComputedStyle(r).display?y.bottomContainerRC=r.getBoundingClientRect():y.bottomContainerRC=void 0;const s=null==(t=o.timeline)?void 0:t.container;void 0!==s&&"hidden"!==getComputedStyle(s).visibility&&"none"!==getComputedStyle(s).display?y.timelineContainerRC=s.getBoundingClientRect():y.timelineContainerRC=void 0;const l=null==(n=o.animation)?void 0:n.container;void 0!==l&&"hidden"!==getComputedStyle(l).visibility&&"none"!==getComputedStyle(l).display?y.animationContainerRC=l.getBoundingClientRect():y.animationContainerRC=void 0,o.resize();ge(i,"viewerWidgetResized")&&d("viewerWidgetResized",e)},L=t=>{const n=i.viewer,{autoSortImageryLayers:o}=e;n.baseLayerPicker&&n.imageryLayers.raiseToTop(t);const{defined:a}=Cesium;o&&(t.sortOrder=a(t.sortOrder)?t.sortOrder:9999,n.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),n.imageryLayers._update())},A=function(t,i,n){const{JulianDate:o}=Cesium;let a;if(e.UTCOffset){t=o.addMinutes(t,e.UTCOffset,new o);const i=(new Date).getTimezoneOffset()-e.UTCOffset;a=0===i?"UTC":"UTC+"+-i/60}else a=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const r=o.toDate(t),s=r.toLocaleString(x("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=r.toLocaleString(x("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!i&&r.getHours()+r.getMinutes()!==0?(e.TZCode&&(a=e.TZCode),n?`${s} ${a}`:`${l} ${s} ${a}`):l},D=function(e,t){return A(e,t,!0)},R=function(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1},k=function(e,t){const i=e._geocoder,n=e._homeButton,o=e._sceneModePicker,a=e._projectionPicker,r=e._baseLayerPicker,s=e._animation,l=e._timeline,c=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,p=t?"hidden":"visible",{defined:m}=Cesium;if(m(i)&&(i.container.style.visibility=p),m(n)&&(n.container.style.visibility=p),m(o)&&(o.container.style.visibility=p),m(a)&&(a.container.style.visibility=p),m(r)&&(r.container.style.visibility=p),m(s)&&(s.container.style.visibility=p),m(l)&&(l.container.style.visibility=p),m(c)&&c.viewModel.isFullscreenEnabled&&(c.container.style.visibility=p),m(u)&&(u.container.style.visibility=p),m(d)&&(d.container.style.visibility=p),e._container){const i=t||!m(c)?0:c.container.clientWidth;e._vrButton.container.style.right=i+"px",e.forceResize()}},B=function(e,t){Array.prototype.slice.call(e.children).forEach((e=>{switch(e.className){case"cesium-viewer-geocoderContainer":e.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":e.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":e.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":e.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":e.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":e.customIndex=6}}));const i=[];Array.prototype.slice.call(e.children).forEach((e=>{i.push(e)})),i.sort((function(e,t){return e.customIndex-t.customIndex}));for(let n=0;n<i.length;n++)e.appendChild(i[n])};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),C((async()=>{var e;try{m.debug("viewer - onMounted"),await(null==(e=p.value)?void 0:e.__viewerUnloadingPromise),n(E())}catch(_h){a(_h)}})),h((()=>{m.debug("viewer - onUnmounted"),P().then((()=>{c.all.clear()}))})),{isReady:l,load:E,unload:P,reload:function(){return P().then((()=>E()))},getServices:function(){return ve({},{get layout(){return y},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var e;return null==(e=i.viewer)?void 0:e.dataSources},get entities(){var e;return null==(e=i.viewer)?void 0:e.entities},get imageryLayers(){var e;return null==(e=i.viewer)?void 0:e.imageryLayers},get primitives(){var e;return null==(e=i.viewer)?void 0:e.scene.primitives},get groundPrimitives(){var e;return null==(e=i.viewer)?void 0:e.scene.groundPrimitives},get postProcessStages(){var e;return null==(e=i.viewer)?void 0:e.postProcessStages},get creatingPromise(){return r}})},viewerRef:s,creatingPromise:r}}const da=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],pa=Zn.map((e=>F(e))),ma=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...Zn,...pa,...Yn];da.reduce(((e,t)=>e.concat(t.events)),ma);const va={xs:18,sm:24,md:32,lg:38,xl:46},ha={size:String};function ga(e,t=va){return r((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function fa(e,t){return void 0!==e?e():t}function ya(e,t){return void 0!==e?t.concat(e()):t}var ba=S({name:"VcIcon",props:{...ha,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const i=ga(e),n=r((()=>{const t=i.value;if(t)return e.color&&(t.color=e.color),e.hoverColor&&(t["--hover-color"]=e.hoverColor),t})),o=r((()=>"vc-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),a=r((()=>{let t,i=e.name;if(!i)return{none:!0,cls:o.value};if(!0===i.startsWith("M")){const[e,t]=i.split("|");return{svg:!0,cls:o.value,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return O("path",{style:i,d:t,transform:n})})),viewBox:void 0!==t?t:"0 0 24 24"}}if(!0===i.startsWith("img:"))return{img:!0,cls:o.value,src:i.substring(4)};if(!0===i.startsWith("svguse:")){const[e,t]=i.split("|");return{svguse:!0,cls:o.value,src:e.substring(7),viewBox:void 0!==t?t:"0 0 24 24"}}let n=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(i)||!0===i.startsWith("icon-")?t=i:!0===i.startsWith("bt-")?t=`bt ${i}`:!0===i.startsWith("eva-")?t=`eva ${i}`:!0===/^ion-(md|ios|logo)/.test(i)?t=`ionicons ${i}`:!0===i.startsWith("ion-")?t=`ionicons ion-md${i.substr(3)}`:!0===i.startsWith("mdi-")?t=`mdi ${i}`:!0===i.startsWith("iconfont ")?t=`${i}`:!0===i.startsWith("ti-")?t=`themify-icon ${i}`:!0===i.startsWith("vc-")?t=`vc-icons ${i}`:(t="notranslate material-icons",!0===i.startsWith("o_")?(i=i.substring(2),t+="-outlined"):!0===i.startsWith("r_")?(i=i.substring(2),t+="-round"):!0===i.startsWith("s_")&&(i=i.substring(2),t+="-sharp"),n=i),{cls:t+" "+o.value,content:n}}));return()=>{const i={class:a.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return!0===a.value.none?O(e.tag,i,fa(t.default)):!0===a.value.img?(i.src=a.value.src,i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("img",i)):!0===a.value.svg?(i.viewBox=a.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("svg",i,ya(t.default,a.value.nodes))):!0===a.value.svguse?(i.viewBox=a.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),O("svg",i,ya(t.default,[O("use",{"xlink:href":a.value.src})]))):O(e.tag,i,ya(t.default,[a.value.content]))}}});const Ca={size:{type:[Number,String],default:"1em"},color:String};function wa(e){return{cSize:r((()=>e.size in va?`${va[e.size]}px`:e.size)),classes:r((()=>"vc-spinner"+(e.color?` text-${e.color}`:"")))}}const Oa=[O("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[O("circle",{cx:"5",cy:"50",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"27",cy:"5",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"49",cy:"50",r:"5"},[O("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var xa=S({name:"VcSpinnerBall",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},Oa)}});const Sa=[O("rect",{y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"60",width:"15",height:"140",rx:"6"},[O("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),O("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[O("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var _a=S({name:"VcSpinnerBars",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},Sa)}});const Ea=[O("circle",{cx:"15",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[O("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"105",cy:"15",r:"15"},[O("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Pa=S({name:"VcSpinnerDots",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ea)}});const Ta=[O("g",{transform:"translate(-20,-20)"},[O("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),O("g",{transform:"translate(20,20) rotate(15 50 50)"},[O("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var Ma=S({name:"VcSpinnerGears",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ta)}});const Ia=[O("g",[O("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),O("clipPath",{id:"uil-hourglass-clip1"},[O("rect",{x:"15",y:"20",width:" 70",height:"25"},[O("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),O("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),O("clipPath",{id:"uil-hourglass-clip2"},[O("rect",{x:"15",y:"55",width:" 70",height:"25"},[O("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),O("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),O("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),O("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var ja=S({name:"VcSpinnerHourglass",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ia)}});const La=[O("g",{"stroke-width":"4","stroke-linecap":"round"},[O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),O("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[O("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Aa=S({name:"VcSpinnerIos",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},La)}});const Da=[O("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),O("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Ra=S({name:"VcSpinnerOrbit",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Da)}});const ka=[O("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[O("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),O("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var Ba=S({name:"VcSpinnerOval",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},ka)}});const Na=[O("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[O("circle",{cx:"22",cy:"22",r:"1"},[O("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"1"},[O("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Va=S({name:"VcSpinnerPuff",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},Na)}});const za=[O("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[O("circle",{cx:"22",cy:"22",r:"6"},[O("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"6"},[O("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),O("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),O("circle",{cx:"22",cy:"22",r:"8"},[O("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Fa=S({name:"VcSpinnerRings",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},za)}});const Ha=[O("defs",[O("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[O("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),O("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),O("stop",{"stop-color":"currentColor",offset:"100%"})])]),O("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[O("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),O("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[O("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var Ua=S({name:"VcSpinnerTail",props:Ca,setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Ha)}}),Wa=S({name:"VcSpinner",props:{...Ca,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=wa(e);return()=>O("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[O("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const Ga={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},$a=Object.keys(Ga),Za={type:String,validator:e=>$a.includes(e)};const Ya={none:0,xs:4,sm:8,md:16,lg:24,xl:32},qa={xs:8,sm:10,md:14,lg:20,xl:24},Xa={...ha,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Za,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function Qa(e){const t=ga(e,qa),i=function(e){return r((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${Ga[t]}`}))}(e),n=r((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in Ya?Ya[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),o=r((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),a=r((()=>!0!==e.disable&&!0!==e.loading)),s=r((()=>!0===a.value?e.tabindex||0:-1)),l=r((()=>!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":"standard")),c=r((()=>{const t={tabindex:s.value};return"a"!==e.type&&(t.type=e.type),t.role="a"===e.type?"link":"button",!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),t}));return{classes:r((()=>{let t;return void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${!0===e.round?"round":"rectangle"+(!0===o.value?" vc-btn--rounded":"")}`+(void 0!==t?" "+t:"")+(!0===a.value?" vc-btn--actionable vc-focusable vc-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" vc-btn--fab":!0===e.fabMini?" vc-btn--fab-mini":"")+(!0===e.noCaps?" vc-btn--no-uppercase":"")+(!0===e.dense?" vc-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")})),style:n,innerClasses:r((()=>i.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" vc-btn__content--hidden":""))),attributes:c,isActionable:a}}const Ja=go().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e,{passiveCapture:Ka}=io;let er,tr,ir;var nr=S({name:"VcBtn",props:{...Xa,percentage:{type:Number,default:0},darkPercentage:Boolean},emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var n;const a=null==(n=d())?void 0:n.proxy,{classes:s,style:l,innerClasses:c,attributes:u,isActionable:p}=Qa(e),m=o(null),v=o(null);let h,g,f=null;const y=r((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),b=r((()=>!1!==e.ripple&&{keyCodes:13,...!0===e.ripple?{}:e.ripple})),C=r((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),w=r((()=>!0===e.loading?{onMousedown:D,onTouchstart:D,onClick:D,onKeydown:D,onKeyup:D}:!0===p.value?{onClick:T,onKeydown:M,onMousedown:j,onTouchstart:I}:{})),S=r((()=>[[ho,b.value,void 0,{center:e.round}]])),P=r((()=>({ref:m,class:"vc-btn vc-btn-item non-selectable no-outline "+s.value,style:l.value,...u.value,...w.value})));function T(t){var n;if(void 0!==t){if(!0===t.defaultPrevented)return;const i=document.activeElement;if("submit"===e.type&&i!==document.body&&!1===(null==(n=m.value)?void 0:n.contains(i))&&!1===(null==i?void 0:i.contains(m.value))){m.value.focus();const e=()=>{document.removeEventListener("keydown",so,!0),document.removeEventListener("keyup",e,Ka),null!==m.value&&m.value.removeEventListener("blur",e,Ka)};document.addEventListener("keydown",so,!0),document.addEventListener("keyup",e,Ka),m.value.addEventListener("blur",e,Ka)}}i("click",t,(()=>{}))}function M(e){var t,n,o;!0===uo(e,[13,32])&&(so(e),tr!==m.value&&(null!==tr&&A(),null==(t=m.value)||t.focus(),tr=m.value,null==(n=m.value)||n.classList.add("vc-btn--active"),document.addEventListener("keyup",L,!0),null==(o=m.value)||o.addEventListener("blur",L,Ka))),i("keydown",e)}function I(e){er!==m.value&&(null!==er&&A(),er=m.value,f=Ja(e.target),null==f||f.addEventListener("touchcancel",L,Ka),null==f||f.addEventListener("touchend",L,Ka)),h=!0,clearTimeout(g),g=setTimeout((()=>{h=!1}),200),i("touchstart",e)}function j(e){var t;ir!==m.value&&(null!==ir&&A(),ir=m.value,null==(t=m.value)||t.classList.add("vc-btn--active"),document.addEventListener("mouseup",L,Ka)),e.qSkipRipple=!0===h,i("mousedown",e)}function L(e){var t;if(void 0===e||"blur"!==e.type||document.activeElement!==m.value){if(void 0!==e&&"keyup"===e.type){if(tr===m.value&&!0===uo(e,[13,32])){const i=new MouseEvent("click",e);i.qKeyEvent=!0,!0===e.defaultPrevented&&ro(i),!0===e.cancelBubble&&ao(i),null==(t=m.value)||t.dispatchEvent(i),so(e),e.qKeyEvent=!0}i("keyup",e)}A()}}function A(e){const t=v.value;!0===e||er!==m.value&&ir!==m.value||null===t||t===document.activeElement||(t.setAttribute("tabindex","-1"),t.focus()),er===m.value&&(null!==f&&(f.removeEventListener("touchcancel",L,Ka),f.removeEventListener("touchend",L,Ka)),er=f=null),ir===m.value&&(document.removeEventListener("mouseup",L,Ka),ir=null),tr===m.value&&(document.removeEventListener("keyup",L,!0),null!==m.value&&m.value.removeEventListener("blur",L,Ka),tr=null),null!==m.value&&m.value.classList.remove("vc-btn--active")}function D(e){so(e),e.qSkipRipple=!0}return _((()=>{A(!0)})),Object.assign(a,{click:T}),()=>{let i=[];void 0!==e.icon&&i.push(O(ba,{name:e.icon,left:!1===e.stack&&!0===y.value,role:"img","aria-hidden":"true"})),!0===y.value&&i.push(O("span",{class:"block"},[e.label])),i=ya(t.default,i),void 0!==e.iconRight&&!1===e.round&&i.push(O(ba,{name:e.iconRight,right:!1===e.stack&&!0===y.value,role:"img","aria-hidden":"true"}));const n=[O("span",{class:"vc-focus-helper",ref:v})];return!0===e.loading&&void 0!==e.percentage&&n.push(O("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[O("span",{class:"vc-btn__progress-indicator fit block"+(!0===e.darkPercentage?" vc-btn__progress--dark":""),style:C.value})])),n.push(O("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+c.value},i)),null!==e.loading&&n.push(O(E,{name:"vc-transition--fade"},(()=>!0===e.loading?[O("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[O(Wa)])]:null))),function(e,t,i,n,o,a){t.key=n+o;const r=O(e,t,i);return!0===o?x(r,a()):r}("button",P.value,n,"ripple",!0!==e.disable&&!1!==e.ripple,(()=>S.value))}}});const or={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function ar({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:a,emit:r}=d(),s=o(null);let l;function c(e){return null!==s.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const u={};function p(){co(u,"anchor")}function m(){if(!1===n.target||""===n.target)s.value=null;else if(!0===n.target)!function(e){for(s.value=e;s.value.classList.contains("vc-anchor--skip");)s.value=s.value.parentNode;i()}(null==a?void 0:a.$el.parentNode);else{let t=n.target;if("string"==typeof n.target)try{t=document.querySelector(n.target)}catch(e){t=void 0}null!=t?(s.value=t.$el||t,i()):s.value=null}}return void 0===i&&(Object.assign(u,{hide(e){a.hide(e)},toggle(e){a.toggle(e)},toggleKey(e){!0===uo(e,13)&&a.toggle(e)},contextClick(e){a.hide(e),w((()=>{a.show(e)})),ro(e)},mobilePrevent:ro,mobileTouch(e){var t;if(u.mobileCleanup(e),!0!==c(e))return;a.hide(e),null==(t=s.value)||t.classList.add("non-selectable");const i=Ja(e.target);lo(u,"anchor",[[i,"touchmove","mobileCleanup","passive"],[i,"touchend","mobileCleanup","passive"],[i,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","mobilePrevent","notPassive"]]),l=setTimeout((()=>{a.show(e)}),300)},mobileCleanup(t){s.value.classList.remove("non-selectable"),clearTimeout(l),!0===e.value&&void 0!==t&&fo()}}),i=function(e=n.contextMenu){if(!0===n.noParentEvent||null===s.value)return;let t;t=!0===e?!0===go().isPhone?[[s.value,"touchstart","mobileTouch","passive"]]:[[s.value,"click","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],lo(u,"anchor",t)}),f((()=>n.contextMenu),(e=>{null!==s.value&&(p(),i(e))})),f((()=>n.target),(()=>{null!==s.value&&p(),m()})),f((()=>n.noParentEvent),(e=>{null!==s.value&&(!0===e?p():i())})),C((()=>{m(),!0!==t&&!0===n.modelValue&&null===s.value&&r("update:modelValue",!1)})),_((()=>{clearTimeout(l),p()})),{anchorEl:s,canShow:c,anchorEvents:u}}const rr={modelValue:{type:Boolean,default:null}},sr=["update:modelValue","before-show","show","before-hide","hide"];function lr({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:o,processOnMount:a}){const r=d(),{props:s,emit:l,proxy:c}=r;let u;function p(e){if(!0===s.disable||void 0!==t&&!0!==t(e))return;const i=!0===he(r,"onUpdate:modelValue");!0===i&&(l("update:modelValue",!0),u=e,w((()=>{u===e&&(u=void 0)}))),null!==s.modelValue&&!1!==i||m(e)}function m(t){!0!==(null==e?void 0:e.value)&&(e&&(e.value=!0),l("before-show",t),t&&!0===t.cancel||(void 0!==n?n(t):l("show",t)))}function v(e){if(!0===s.disable)return;const t=!0===he(r,"onUpdate:modelValue");!0===t&&(l("update:modelValue",!1),u=e,w((()=>{u===e&&(u=void 0)}))),null!==s.modelValue&&!1!==t||h(e)}function h(t){!1!==(null==e?void 0:e.value)&&(e&&(e.value=!1),l("before-hide",t),void 0!==o?o(t):l("hide",t))}function g(t){if(!0===s.disable&&!0===t)!0===he(r,"onUpdate:modelValue")&&l("update:modelValue",!1);else if(!0===t!==(null==e?void 0:e.value)){(!0===t?m:h)(u)}}f((()=>s.modelValue),g),void 0!==i&&!0===function(e){return void 0!==e.appContext.config.globalProperties.$router}(r)&&f((()=>c.$route),(()=>{!0===i.value&&!0===(null==e?void 0:e.value)&&v()})),!0===a&&C((()=>{g(s.modelValue)}));const y={show:p,hide:v,toggle:function(t){!0===(null==e?void 0:e.value)?v(t):p(t)}};return Object.assign(c,y),y}const cr=[];let ur=document.body;const dr=[];function pr(e,t,i,n){var a,r,s,l;let c=null;(null==(r=null==(a=e.props)?void 0:a.teleport)?void 0:r.to)&&(c=null==(l=null==(s=e.props)?void 0:s.teleport)?void 0:l.to);const u=!0===n&&function(e){for(e=e.parent;null!=e;){if("VcGlobalDialog"===e.type.name)return!0;if("VcDialog"===e.type.name||"VcMenu"===e.type.name)return!1;e=e.parent}return!1}(e),d=o(!1);function p(){var t,i;d.value=!1;const n=dr.indexOf(e.proxy);var o;n>-1&&dr.splice(n,1),null===c||(null==(i=null==(t=e.props)?void 0:t.teleport)?void 0:i.to)||(o=c,cr.splice(cr.indexOf(o),1),o.remove(),c=null)}return h(p),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:function(){!1===u&&null===c&&(c=function(e){const t=document.createElement("div");return void 0!==e&&(t.id=e),ur.appendChild(t),cr.push(t),t}()),d.value=!0,dr.push(e.proxy)},hidePortal:p,portalIsActive:d,renderPortal:()=>!0===u?i():!0===d.value?[O(P,{to:c},i())]:void 0}}const mr={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function vr(){let e;return _((()=>{clearTimeout(e)})),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const hr=[null,document,document.body,document.scrollingElement,document.documentElement];function gr(e,t){let i=function(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch(i){return}const t=!0===v(e)?e.value:e;return t?t.$el||t:void 0}(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return hr.includes(i)?window:i}let fr,yr,br;function Cr(e){const t=e.split(" ");return 2===t.length&&(!0===["top","center","bottom"].includes(t[0])&&!0===["left","middle","right","start","end"].includes(t[1]))}const wr={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function Or(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:wr[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function xr(e){if(!0===go().isIOS&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==yr&&(e.setProperty("--vc-pe-left",t+"px"),yr=t),i!==br&&(e.setProperty("--vc-pe-top",i+"px"),br=i)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(void 0===e.absoluteOffset)t=function(e,t){let{top:i,left:n,right:o,bottom:a,width:r,height:s}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],a+=t[1],o+=t[0],r+=t[0],s+=t[1]),{top:i,left:n,right:o,bottom:a,width:r,height:s,middle:n+(o-n)/2,center:i+(a-i)/2}}(e.anchorEl,!0===e.cover?[0,0]:e.offset);else{const{top:i,left:n}=e.anchorEl.getBoundingClientRect(),o=i+e.absoluteOffset.top,a=n+e.absoluteOffset.left;t={top:o,left:a,width:1,height:1,right:a+1,center:o,middle:a,bottom:o+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};!0!==e.fit&&!0!==e.cover||(o.minWidth=t.width+"px",!0===e.cover&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const a={top:0,center:(s=e.el).offsetHeight/2,bottom:s.offsetHeight,left:0,middle:s.offsetWidth/2,right:s.offsetWidth},r={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};var s;!function(e,t,i,n,o){const a=i.bottom,r=i.right,s=function(){if(void 0!==fr)return fr;const e=document.createElement("p"),t=document.createElement("div");to(e,{width:"100%",height:"200px"}),to(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),fr=i-n,fr}(),l=window.innerHeight-s,c=document.body.clientWidth;if(e.top<0||e.top+a>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-a):0,e.maxHeight=Math.min(a,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,i),e.top=Math.max(0,i-a)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,l-e.top);if(e.left<0||e.left+r>c)if(e.maxWidth=Math.min(r,c),"middle"===o.horizontal)e.left=t[n.horizontal]>c/2?Math.max(0,c-r):0;else if(t[n.horizontal]>c/2){const i=Math.min(c,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(r,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(r,c-e.left)}(r,t,a,e.anchorOrigin,e.selfOrigin),o={top:r.top+"px",left:r.left+"px"},void 0!==r.maxHeight&&(o.maxHeight=r.maxHeight+"px",t.height>r.maxHeight&&(o.minHeight=o.maxHeight)),void 0!==r.maxWidth&&(o.maxWidth=r.maxWidth+"px",t.width>r.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}["left","middle","right"].forEach((e=>{wr[`${e}#ltr`]=e,wr[`${e}#rtl`]=e}));var Sr=S({name:"VcTooltip",inheritAttrs:!1,props:{...or,...rr,...mr,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Cr},self:{type:String,default:"top middle",validator:Cr},offset:{type:Array,default:()=>[14,14],validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}},emits:[...sr],setup(e,{slots:t,emit:i,attrs:n}){let a,s;const l=d(),c=o(null),u=o(!1),p=r((()=>Or(e.anchor,!0))),m=r((()=>Or(e.self,!0))),v=r((()=>!0!==e.persistent)),{registerTick:h,removeTick:g,prepareTick:y}=function(){let e;return _((()=>{e=void 0})),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(void 0!==e){const t=e;w((()=>{e===t&&(e(),e=void 0)}))}}}}(),{registerTimeout:b,removeTimeout:C}=vr(),{transition:x,transitionStyle:S}=function(e,t){const i=o(t.value);return f(t,(e=>{w((()=>{i.value=e}))})),{transition:r((()=>"vc-transition--"+(!0===i.value?e.transitionHide:e.transitionShow))),transitionStyle:r((()=>`--vc-transition-duration: ${e.transitionDuration}ms`))}}(e,u),{localScrollTarget:P,changeScrollEvent:T,unconfigureScrollTarget:M}=function(e,t){const i=o(null);let n;function a(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",o=void 0!==t?t:n;e!==window&&e[i]("scroll",o,io.passive),window[i]("scroll",o,io.passive),n=t}function r(){null!==i.value&&(a(i.value),i.value=null)}const s=f((()=>e.noParentEvent),(()=>{null!==i.value&&(r(),t())}));return _(s),{localScrollTarget:i,unconfigureScrollTarget:r,changeScrollEvent:a}}(e,z),{anchorEl:I,canShow:j,anchorEvents:L}=ar({showing:u,configureAnchorEl:function(){if(!0===e.noParentEvent||void 0===I.value)return;const t=!0===go().isPhone?[[I.value,"touchstart","delayShow","passive"]]:[[I.value,"mouseenter","delayShow","passive"],[I.value,"mouseleave","delayHide","passive"]];lo(L,"anchor",t)},avoidEmit:void 0}),{show:A,hide:D}=lr({showing:u,canShow:j,handleShow:function(t){g(),C(),R(),h((()=>{s=new MutationObserver((()=>V())),s.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),z()})),y(),void 0===a&&(a=f((()=>e.self+"|"+e.anchor),V));b((()=>{i("show",t)}),e.transitionDuration)},handleHide:function(t){g(),C(),N(),b((()=>{k(),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:v,processOnMount:!0});Object.assign(L,{delayShow:function(t){if(!0===go().isPhone){fo(),document.body.classList.add("non-selectable");const e=Ja(I.value),t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"__delayHide","passiveCapture"]));lo(L,"tooltipTemp",t)}b((()=>{A(t)}),e.delay)},delayHide:function(t){C(),!0===go().isPhone&&(co(L,"tooltipTemp"),fo(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));b((()=>{D(t)}),e.hideDelay)}});const{showPortal:R,hidePortal:k,renderPortal:B}=pr(l,c,(function(){return O(E,{name:x.value,appear:!0},F)}));function N(){void 0!==s&&(s.disconnect(),s=void 0),void 0!==a&&(a(),a=void 0),M(),co(L,"tooltipTemp")}function V(){const t=c.value;void 0!==I.value&&t&&xr({el:t,offset:e.offset,anchorEl:I.value,anchorOrigin:p.value,selfOrigin:m.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function z(){if(void 0!==I.value||void 0!==e.scrollTarget){P.value=gr(I.value,e.scrollTarget);const t=!0===e.noParentEvent?V:D;T(P.value,t)}}function F(){return!0===u.value?O("div",{...n,ref:c,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",n.class],style:S.value,role:"complementary"},fa(t.default)):null}return _(N),Object.assign(null==l?void 0:l.proxy,{updatePosition:V}),B}});const _r=XMLHttpRequest,Er=_r.prototype.open,Pr=["top","right","bottom","left"];let Tr=[],Mr=0;function Ir(e,t){return"number"!=typeof t&&(t=e<25?3*Math.random()+3:e<65?3*Math.random():e<85?2*Math.random():e<99?.6:0),i=e+t,(o=100)<=(n=0)?n:Math.min(o,Math.max(n,i));var i,n,o}var jr=S({name:"VcAjaxBar",props:{position:{type:String,default:"top",validator:e=>Pr.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function},emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=d(),n=o(0),a=o(!1),s=o(!0);let l,c,u=0;const p=r((()=>`vc-loading-bar vc-loading-bar--${e.position}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===s.value?"":" no-transition"))),m=r((()=>"top"===e.position||"bottom"===e.position)),v=r((()=>!0===m.value?"height":"width")),h=r((()=>{const t=a.value,i=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:a}){let r=1,s=1;return!0===n?(!0===o&&(r=-1),"bottom"===t&&(s=-1),{transform:`translate3d(${r*(e-100)}%,${i?0:-200*s}%,0)`}):(!0===o&&(s=-1),"right"===t&&(r=-1),{transform:`translate3d(${i?0:a*r*-200}%,${s*(e-100)}%,0)`})}({p:n.value,pos:e.position,active:t,horiz:m.value,reverse:e.reverse,dir:1});return i[v.value]=e.size,i.opacity=t?1:0,i.position="absolute"===e.positioning?"absolute":"fixed",i.backgroundColor=e.color,i})),g=r((()=>!0===a.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"}));function f(e=300){const i=c;return c=Math.max(0,e)||0,u++,u>1?(0===i&&e>0?w():i>0&&e<=0&&clearTimeout(l),u):(clearTimeout(l),t("start"),n.value=0,l=setTimeout((()=>{s.value=!0,e>0&&w()}),!0===a.value?500:1),!0!==a.value&&(a.value=!0,s.value=!1),u)}function y(e){return u>0&&(n.value=Ir(n.value,e)),u}function b(){if(u=Math.max(0,u-1),u>0)return u;clearTimeout(l),t("stop");const e=()=>{s.value=!0,n.value=100,l=setTimeout((()=>{a.value=!1}),1e3)};0===n.value?l=setTimeout(e,1):e()}function w(){n.value<100&&(l=setTimeout((()=>{y(),w()}),c))}let x;return C((()=>{var t;!0!==e.skipHijack&&(x=!0,t={start:f,stop:b,hijackFilter:r((()=>e.hijackFilter||null))},Mr++,Tr.push(t),Mr>1||(_r.prototype.open=function(e,t){const i=[],n=()=>{Tr.forEach((e=>{null!==e.hijackFilter.value&&!0!==e.hijackFilter.value(t)||(e.start(),i.push(e.stop))}))},o=()=>{i.forEach((e=>{e()}))};this.addEventListener("loadstart",n,{once:!0}),this.addEventListener("loadend",o,{once:!0}),Er.apply(this,arguments)}))})),_((()=>{clearTimeout(l),!0===x&&function(e){Tr=Tr.filter((t=>t.start!==e)),Mr=Math.max(0,Mr-1),0===Mr&&(_r.prototype.open=Er)}(f)})),Object.assign(i,{start:f,stop:b,increment:y}),()=>O("div",{class:p.value,style:h.value,...g.value})}});const Lr={dark:{type:Boolean,default:null}};const Ar=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],Dr=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var Rr=S({name:"VcSkeleton",props:{...Lr,tag:{type:String,default:"div"},type:{type:String,validator:e=>Ar.includes(e),default:"rect"},animation:{type:String,validator:e=>Dr.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const i=function(e){return r((()=>e.dark))}(e),n=r((()=>void 0!==e.size?{width:e.size,height:e.size}:{width:e.width,height:e.height})),o=r((()=>`vc-skeleton vc-skeleton--${!0===i.value?"dark":"light"} vc-skeleton--type-${e.type}`+("none"!==e.animation?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(!0===e.square?" vc-skeleton--square":"")+(!0===e.bordered?" vc-skeleton--bordered":"")));return()=>O(e.tag,{class:o.value,style:n.value},fa(t.default))}});const kr=["top","right","bottom","left"],Br={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>kr.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Nr(e,t){return{formClass:r((()=>"vc-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:r((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:r((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(!0===i?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}const Vr=["up","right","down","left"],zr=["left","center","right"];var Fr=S({name:"VcFab",props:{...Br,...rr,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>Vr.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>zr.includes(e)}},emits:sr,setup(e,{slots:t}){const i=o(null),n=o(!0===e.modelValue),{formClass:s,labelProps:l}=Nr(e,n),c=r((()=>!0!==e.persistent)),{hide:u,toggle:d}=lr({showing:n,hideOnRouteChange:c}),p=r((()=>({opened:n.value}))),m=r((()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${s.value}`+(!0===n.value?" vc-fab--opened":" vc-fab--closed"))),v=r((()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${!0===n.value?"opened":"closed"}`)),h=r((()=>"vc-fab__icon-holder  vc-fab__icon-holder--"+(!0===n.value?"opened":"closed")));function g(i,n){const o=t[i],a=`q-fab__${i} absolute-full`;return void 0===o?O(ba,{class:a,name:e[i]}):O("div",{class:a},o(p.value))}function f(){const i=[];return!0!==e.hideIcon&&i.push(O("div",{class:h.value},[g("icon"),g("active-icon")])),""===e.label&&void 0===t.label||i[l.value.action](O("div",l.value.data,void 0!==t.label?t.label(p.value):[e.label])),ya(t.tooltip,i)}return a(K,{showing:n,onChildClick(t){e.hideActionOnClick&&u(t),null!==i.value&&i.value.$el.focus()}}),()=>O("div",{class:m.value},[O(nr,{ref:i,class:s.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":!0===n.value?"true":"false","aria-haspopup":"true",onClick:d},f),O("div",{class:v.value},fa(t.default))])}});const Hr={start:"self-end",center:"self-center",end:"self-start"},Ur=Object.keys(Hr);var Wr=S({name:"VcFabAction",props:{...Br,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>Ur.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:i}){const n=l(K),{formClass:o,labelProps:a}=Nr(e,null==n?void 0:n.showing),s=r((()=>{let t;return e.anchor&&(t=Hr[e.anchor]),o.value+(void 0!==t?` ${t}`:"")})),c=r((()=>{var t;return!0===e.disable||!0!==(null==(t=null==n?void 0:n.showing)?void 0:t.value)}));function u(e){var t;null==(t=null==n?void 0:n.onChildClick)||t.call(n,e),i("click",e)}function p(){const i=[];return""!==e.icon&&i.push(O(ba,{name:e.icon})),""!==e.label&&i[a.value.action](O("div",a.value.data,[e.label])),ya(t.default,i)}const m=d();return Object.assign(null==m?void 0:m.proxy,{click:u}),()=>O(nr,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:c.value,size:e.size,onClick:u},p)}});[nr,ba,xa,_a,Pa,Ma,ja,Aa,Ra,Ba,Va,Fa,Ua,Wa,Sr,jr,Rr,Fr,Wr].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Gr=nr,$r=ba,Zr=xa,Yr=_a,qr=Pa,Xr=Ma,Qr=ja,Jr=Aa,Kr=Ra,es=Ba,ts=Va,is=Fa,ns=Ua,os=Wa,as=Sr,rs=jr,ss=Rr,ls=Fr,cs=Wr,us={beforeLoad:e=>!0,ready:e=>e.viewer instanceof Cesium.Viewer,destroyed:e=>!0},ds={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},ps={...us,definitionChanged:e=>!0},ms={...us,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},vs={...us,...ds,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},hs={...us,...ds},gs={...us,...ds,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,a,r)=>!0},fs={...us,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0};var ys=S({name:"VcViewer",props:ca,emits:{...us,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0},setup(e,t){const n=d();n.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],n.cesiumMembersEvents=da;const o=ua(e,t,n);a(J,o.getServices()),n.appContext.config.globalProperties.$VueCesium=o.getServices(),Object.assign(n.proxy,{creatingPromise:o.creatingPromise,load:o.load,unload:o.unload,reload:o.reload,cesiumObject:n.cesiumObject,getCesiumObject:()=>n.cesiumObject});const r=e=>{t.emit("touchEnd",e)};return()=>{var a;const s=[];return i(e.skeleton)&&!o.isReady.value?s.push(O(ss,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):s.push(T("v-if")),s.push(T("vc-viewer"),x(O("div",{ref:o.viewerRef,class:ne((null==(a=n.proxy)?void 0:a.$options.name)||""),id:t.attrs.id||"cesiumContainer",style:t.attrs.style||{width:"100%",height:"100%"}},fa(t.slots.default)),[[yo,r,e.touchHoldArg]])),s}}});ys.install=(e,t)=>{e.component(ys.name,ys)};const bs=ys,Cs=bs,ws={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length}};function Os(e,t){const i=r((()=>{const t=e.position;return{top:t.indexOf("top")>-1,right:t.indexOf("right")>-1,bottom:t.indexOf("bottom")>-1,left:t.indexOf("left")>-1,vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}})),n=o(0),a=o(0),s=o(0),l=o(0),c=r((()=>{let t=0,o=0;const r=i.value;!0===r.top&&0!==n.value?o=`${n.value}px`:!0===r.bottom&&0!==l.value&&(o=-l.value+"px"),!0===r.left&&0!==s.value?t=1*s.value+"px":!0===r.right&&0!==a.value&&(t=-1*a.value+"px");const c={transform:`translate(${t}, ${o})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===r.vertical?(0!==s.value&&(c.right=`${s.value}px`),0!==a.value&&(c.left=`${a.value}px`)):!0===r.horizontal&&(0!==n.value&&(c.top=`${n.value}px`),0!==l.value&&(c.bottom=`${l.value}px`)),c})),u=r((()=>`absolute absolute-${e.position}`));return{attach:i,style:c,classes:u}}const xs={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...ws,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})}},Ss=re(xs);class _s{static createTween(e,t){const{Cartesian2:i,Cartesian3:n,defaultValue:o,defined:a,DeveloperError:r,EasingFunction:s,Math:l,SceneMode:c}=Cesium;let u=(t=o(t,{})).destination;if(!a(e))throw new r("scene is required.");if(!a(u))throw new r("destination is required.");const d=e.mode;if(d===c.MORPHING)return Ns();const p=o(t.convert,!0),m=e.mapProjection,v=m.ellipsoid,h=t.maximumHeight,g=t.flyOverLongitude,f=t.flyOverLongitudeWeight,y=t.pitchAdjustHeight;let b=t.easingFunction;p&&d!==c.SCENE3D&&(v.cartesianToCartographic(u,ks),u=m.project(ks,Bs));const C=e.camera,w=t.endTransform;a(w)&&C._setTransform(w);let O=t.duration;a(O)||(O=Math.ceil(n.distance(C.position,u)/1e6)+2,O=Math.min(O,3));const x=o(t.heading,0),S=o(t.pitch,-l.PI_OVER_TWO),_=o(t.roll,0),E=e.screenSpaceCameraController;E.enableInputs=!1;const P=Vs(E,t.complete),T=Vs(E,t.cancel),M=C.frustum;let I=e.mode===c.SCENE2D;if(I=I&&i.equalsEpsilon(C.position,u,l.EPSILON6),I=I&&l.equalsEpsilon(Math.max(M.right-M.left,M.top-M.bottom),u.z,l.EPSILON6),I=I||e.mode!==c.SCENE2D&&n.equalsEpsilon(u,C.position,l.EPSILON10),I=I&&l.equalsEpsilon(l.negativePiToPi(x),l.negativePiToPi(C.heading),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(S),l.negativePiToPi(C.pitch),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(_),l.negativePiToPi(C.roll),l.EPSILON10),I)return Ns(P,T);const j=new Array(4);if(j[c.SCENE2D]=Rs,j[c.SCENE3D]=Ds,j[c.COLUMBUS_VIEW]=js,O<=0){return Ns((function(){j[d](e,1,u,x,S,_,h,g,f,y)({time:1}),"function"==typeof P&&P()}),T)}const L=j[d](e,O,u,x,S,_,h,g,f,y);if(!a(b)){const e=C.positionCartographic.height;b=e>(d===c.SCENE3D?v.cartesianToCartographic(u).height:u.z)&&e>11500?s.CUBIC_OUT:s.QUINTIC_IN_OUT}return{duration:O,easingFunction:b,startObject:{time:0},stopObject:{time:O},update:L,complete:P,cancel:T}}}const Es={},Ps={};function Ts(e,t,i,n,o){const{Cartesian3:a,defined:r,Math:s}=Cesium;let l=o;const c=Math.max(i,n);if(!r(l)){const i=e.position,n=t,o=e.up,r=e.right,s=e.frustum,c=a.subtract(i,n,Es),u=a.magnitude(a.multiplyByScalar(o,a.dot(c,o),Ps)),d=a.magnitude(a.multiplyByScalar(r,a.dot(c,r),Ps));l=Math.min(.2*function(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let a,r,s;if(e instanceof n){const n=Math.tan(.5*e.fovy);return a=e.near,r=e.near*n,s=e.aspectRatio*r,Math.max(t*a/s,i*a/r)}return e instanceof o?(a=e.near,r=e.top,s=e.right,Math.max(t*a/s,i*a/r)):Math.max(t,i)}(s,u,d),1e9)}if(c<l){const e=8,t=1e6,o=-Math.pow((l-i)*t,1/e),a=Math.pow((l-n)*t,1/e);return function(i){const n=i*(a-o)+o;return-Math.pow(n,e)/t+l}}return function(e){return s.lerp(i,n,e)}}function Ms(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const Is={};function js(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Is),p=u.pitch,m=Ms(u.heading,n),v=Ms(u.roll,a),h=Ts(u,i,d.z,i.z,r);return function(e){const r=e.time/t;u.setView({orientation:{heading:c.lerp(m,n,r),pitch:c.lerp(p,o,r),roll:c.lerp(v,a,r)}}),s.lerp(d,i,r,u.position),u.position.z=h(r)}}const Ls={},As={};function Ds(e,t,i,n,o,a,r,s,l,c){const{Cartesian3:u,Cartographic:d,defined:p,Math:m}=Cesium,v=e.camera,h=e.mapProjection.ellipsoid,g=d.clone(v.positionCartographic,Ls),f=v.pitch,y=Ms(v.heading,n),b=Ms(v.roll,a),C=h.cartesianToCartographic(i,As);g.longitude=m.zeroToTwoPi(g.longitude),C.longitude=m.zeroToTwoPi(C.longitude);let w=!1;if(p(s)){const e=m.zeroToTwoPi(s),t=Math.min(g.longitude,C.longitude),i=Math.max(g.longitude,C.longitude),n=e>=t&&e<=i;if(p(l)){const e=Math.abs(g.longitude-C.longitude),t=m.TWO_PI-e;(n?e:t)<(n?t:e)*l&&!n&&(w=!0)}else n||(w=!0)}w?function(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}(g,C):function(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}(g,C);const O=Ts(v,i,g.height,C.height,r),x=function(e,t,i,n){const{defined:o,Math:a}=Cesium;if(o(n)&&i(.5)>n){const n=i(0),o=i(1),r=i(.5),s=r-n,l=r-o;return function(r){const c=i(r);if(r<=.5){const t=(c-n)/s;return a.lerp(e,-a.PI_OVER_TWO,t)}const u=(c-o)/l;return a.lerp(-a.PI_OVER_TWO,t,1-u)}}return function(i){return a.lerp(e,t,i)}}(f,o,O,c);return function(){const i=g.longitude,o=C.longitude,r=g.latitude,s=C.latitude;return function(l){const c=l.time/t,d=u.fromRadians(m.lerp(i,o,c),m.lerp(r,s,c),O(c),e.globe.ellipsoid);v.setView({destination:d,orientation:{heading:m.lerp(y,n,c),pitch:x(c),roll:m.lerp(b,a,c)}})}}()}function Rs(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Is),p=Ms(u.heading,n),m=u.frustum.right-u.frustum.left,v=Ts(u,i,m,i.z,r);return function(e){const o=e.time/t;u.setView({orientation:{heading:c.lerp(p,n,o)}}),s.lerp(d,i,o,u.position);const a=v(o),r=u.frustum,l=r.top/r.right,m=.5*(a-(r.right-r.left));r.right+=m,r.left-=m,r.top=l*r.right,r.bottom=-r.top}}const ks={},Bs={};function Ns(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function Vs(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}const zs={...us,compassEvt:e=>!0};var Fs=S({name:"VcCompass",props:xs,emits:zs,setup(e,t){var i;const n=d();n.cesiumClass="VcCompass";const a=Xn(e,t,n);if(void 0===a)return;const{t:s}=Gn(),l=ye(n),{$services:u}=a,p=function(e,{emit:t},i){const n={},a={},r={},s={};let l,u,d,p,m;const v=o(0),h=o(0),g=o(0);let f,y,b=0,C={},w=!1,O=0,x={},S=0;const _=o(null),E=o(null),P=()=>{g.value=0,h.value=0},T=()=>{const{defined:e}=Cesium;e(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener((function(){v.value!==i.viewer.scene.camera.heading&&(v.value=i.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},M=(e,o)=>{const{Cartesian2:l,Cartesian3:c,defined:v,getTimestamp:f,Math:y,Matrix4:O,Ray:x,SceneMode:S,Transforms:_}=Cesium;let E=i.viewer.scene,T=E.camera;const M=E.screenSpaceCameraController;if(E.mode===S.MORPHING||!M.enableInputs)return;switch(E.mode){case S.COLUMBUS_VIEW:if(M.enableLook)break;if(!M.enableTranslate||!M.enableTilt)return;break;case S.SCENE3D:if(M.enableLook)break;if(!M.enableTilt||!M.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!M.enableTranslate)return}const I=ge(i,"compassEvt");I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"start",target:e}),document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),v(m)&&i.viewer.clock.onTick.removeEventListener(m),d=void 0,p=void 0,m=void 0,b=f();const j=new l;j.x=E.canvas.clientWidth/2,j.y=E.canvas.clientHeight/2;const L=new x,A=T.getPickRay(j,L),D=E.globe.pick(A,E,s);function R(e,t){const i=Math.atan2(-e.y,e.x);h.value=y.zeroToTwoPi(i-y.PI_OVER_TWO);const n=l.magnitude(e),o=t/2,a=Math.min(n/o,1),r=.5*a*a+.5;g.value=r}v(D)?(C=_.eastNorthUpToFixedFrame(D||new Cesium.Cartesian3,E.globe.ellipsoid,r),w=!1):(C=_.eastNorthUpToFixedFrame(T.positionWC,E.globe.ellipsoid,r),w=!0),m=function(e){const t=f(),n=(t-b)*(2.5*(g.value-.5)/1e3),o=h.value+y.PI_OVER_TWO,r=Math.cos(o)*n,s=Math.sin(o)*n;E=i.viewer.scene,T=E.camera;const l=O.clone(T.transform,a);T.lookAtTransform(C),w?(T.look(c.UNIT_Z,-r),T.look(T.right,-s)):(T.rotateLeft(r),T.rotateUp(s)),T.lookAtTransform(l),b=t},d=function(i){const o=e.getBoundingClientRect(),a=new l((o.right-o.left)/2,(o.bottom-o.top)/2);let r;i instanceof MouseEvent?r=new l(i.clientX-o.left,i.clientY-o.top):i instanceof TouchEvent&&(r=new l(i.changedTouches[0].clientX-o.left,i.changedTouches[0].clientY-o.top)),R(l.subtract(r,a,n),o.width),I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"changing",target:e})},p=function(n){document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),v(m)&&i.viewer.clock.onTick.removeEventListener(m),d=void 0,p=void 0,m=void 0,P(),I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"end",target:e})},document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",p,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("touchend",p,!1),u=i.viewer.clock.onTick.addEventListener(m),R(o,e.getBoundingClientRect().width)},I=(o,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1);const{Cartesian2:p,Cartesian3:m,defined:v,Math:h,Matrix4:g,Ray:b,Transforms:C}=Cesium;y=void 0,f=void 0;const w=ge(i,"compassEvt");w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:o}),O=Math.atan2(-l.y,l.x);const _=new p;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new b,P=u.getPickRay(_,E),T=c.globe.pick(P,c,s);x=v(T)?C.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,r):C.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,r);let M=g.clone(u.transform,a);u.lookAtTransform(x),S=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(M),y=function(e){const r=o.getBoundingClientRect(),s=new p((r.right-r.left)/2,(r.bottom-r.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-r.left,e.clientY-r.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-r.left,e.changedTouches[0].clientY-r.top));const d=p.subtract(l,s,n),m=Math.atan2(-d.y,d.x)-O,v=h.zeroToTwoPi(S-m);u=i.viewer.scene.camera,M=g.clone(u.transform,a),u.lookAtTransform(x);const f=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-f),u.lookAtTransform(M),w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:o})},f=function(e){document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),y=void 0,f=void 0,w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:o})},document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",y,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1)};return{heading:v,orbitCursorAngle:h,orbitCursorOpacity:g,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:a,defined:r,Ellipsoid:l,Matrix4:u,Ray:d,SceneMode:p,Transforms:m}=Cesium,{viewer:v}=i,h=v.scene,g=h.camera,f=h.screenSpaceCameraController;if(h.mode===p.MORPHING||!f.enableInputs)return!0;if(h.mode===p.COLUMBUS_VIEW&&!f.enableTranslate)return;if(h.mode===p.SCENE3D||h.mode===p.COLUMBUS_VIEW){if(!f.enableLook)return;if(h.mode===p.SCENE3D&&!f.enableRotate)return}const y=new o;y.x=h.canvas.clientWidth/2,y.y=h.canvas.clientHeight/2;const b=new d,C=g.getPickRay(y,b),w=h.globe.pick(C,h,s);if(!c(w)||!r(w))return void v.camera.flyHome();const O=ge(i,"compassEvt");O&&t("compassEvt",{type:"reset",camera:v.camera,status:"start",target:n.currentTarget});const x=m.eastNorthUpToFixedFrame(w,v.scene.globe.ellipsoid),S=a.subtract(w,g.position,new a),_=_s.createTween(h,{destination:u.multiplyByPoint(x,new a(0,0,a.magnitude(S)),new a),direction:u.multiplyByPointAsVector(x,new a(0,0,-1),new a),up:u.multiplyByPointAsVector(x,new a(0,1,0),new a),duration:e.duration,complete:()=>{O&&t("compassEvt",{type:"reset",camera:v.camera,status:"end",target:n.currentTarget})},cancel:()=>{O&&t("compassEvt",{type:"reset",camera:v.camera,status:"cancel",target:n.currentTarget})}});h.tweens.add(_)},handleMouseDown:e=>{var t,o;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=fe(_))||t.hide(),null==(o=fe(E))||o.hide();const{SceneMode:a,Cartesian2:r}=Cesium;if(i.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=s.getBoundingClientRect(),c=l.width/2,u=new r((l.right-l.left)/2,(l.bottom-l.top)/2);let d;e instanceof MouseEvent?d=new r(e.clientX-l.left,e.clientY-l.top):e instanceof TouchEvent&&(d=new r(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top));const p=r.subtract(d,u,n),m=r.magnitude(p)/c;if(m<50/145)M(s,p);else{if(!(m<1))return!0;I(s,p)}},resetRotater:P,onTooltipBeforeShow:e=>{void 0===y&&void 0===d||(e.cancel=!0)},viewerChange:T,load:async e=>(i.viewer=e,T(),!0),unload:async()=>(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),u&&u(),l&&l(),!0),iconOuterTooltipRef:_,iconInnerTooltipRef:E}}(e,t,n),m=Os(e),v=o(null),h=o(null),g="VcNavigation"===(null==(i=l.proxy)?void 0:i.$options.name),y=o(g),C=b({});f((()=>e),(e=>{w((()=>{n.mounted&&I()}))}),{deep:!0});const x=r((()=>Object.assign({},Ss.innerOptions,e.innerOptions))),S=r((()=>Object.assign({},Ss.outerOptions,e.outerOptions))),_=r((()=>Object.assign({},Ss.markerOptions,e.markerOptions))),E=r((()=>({transform:"translate(-50%,-50%) rotate(-"+p.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+p.heading.value+"rad)",opacity:void 0,background:S.value.background,color:S.value.color}))),P=r((()=>({transform:"rotate(-"+p.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+p.orbitCursorAngle.value+"rad)",opacity:p.orbitCursorOpacity.value,color:_.value.color}))),M=r((()=>({background:x.value.background,color:x.value.color})));n.createCesiumObject=async()=>{y.value=!0;const{viewer:e}=u;return new Promise(((t,i)=>{w((()=>{if(g)t(fe(v));else{e._element.appendChild(fe(v)),t(fe(v))}}))}))},n.mount=async()=>{var e;I();const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:fe(v)}),p.load(u.viewer)},n.unmount=async()=>{var e;const{viewer:t}=u,i=t._element;return g||i.contains(fe(v))&&i.removeChild(fe(v)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:fe(v)}),p.unload()};const I=()=>{var e;const t=m.style.value;C.left=t.left,C.top=t.top,C.transform=t.transform;const i=m.attach.value,n=null==(e=fe(h))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(C,t)};return()=>{if(y.value){let i=[];return i=ya(t.slots.default,i),i.push(O(Gr,{ref:h,class:"vc-compass-outerRing absolute-center",style:E.value,size:S.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},(()=>[O($r,{size:S.value.size,name:S.value.icon}),S.value.tooltip?O(as,{ref:p.iconOuterTooltipRef,...S.value.tooltip,onBeforeShow:p.onTooltipBeforeShow},(()=>O("strong",{},S.value.tooltip.tip||s("vc.navigation.compass.outerTip")))):T("v-if")]))),i.push(O(Gr,{class:"vc-compass-innerRing absolute-center",style:M.value,size:x.value.size,dense:!0,round:!0},(()=>[O($r,{size:x.value.size,name:x.value.icon}),x.value.tooltip?O(as,{ref:p.iconInnerTooltipRef,...x.value.tooltip,onBeforeShow:p.onTooltipBeforeShow},(()=>O("strong",{},x.value.tooltip.tip||s("vc.navigation.compass.innerTip")))):T("v-if")]))),i.push(P.value.opacity?O(Gr,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},(()=>[O($r,{size:_.value.size,name:_.value.icon,style:P.value})])):T("v-if")),O("div",{ref:v,class:"vc-compass "+m.classes.value,style:C,onDblclick:p.handleDoubleClick,onMousedown:p.handleMouseDown,onMouseup:p.resetRotater,onTouchend:p.resetRotater,onTouchstart:p.handleMouseDown},i)}return T("v-if")}}});const Hs={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:19059568.5}})},overrideViewerCamera:{type:Boolean,default:!1},...ws,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})}},Us=re(Hs);const Ws={...us,zoomEvt:e=>!0};var Gs=S({name:"VcZoomControl",props:Hs,emits:Ws,setup(e,t){var i;const n=d();n.cesiumClass="VcZoomControl",n.cesiumEvents=[];const a=Xn(e,t,n);if(void 0===a)return;const{t:s}=Gn(),{$services:l}=a,c=function(e,{emit:t},i,n){const a=o(null),r=o(null),s=o(null),l=(o,s)=>{var l,u;null==(l=fe(a))||l.hide(),null==(u=fe(r))||u.hide();const{Cartesian3:d,defined:p,IntersectionTests:m,Ray:v,SceneMode:h}=Cesium,{viewer:g}=n;if(p(g)){const n=g.scene,a=n.screenSpaceCameraController;if(!a.enableInputs||!a.enableZoom)return;if(n.mode===h.COLUMBUS_VIEW&&!a.enableTranslate)return;const r=n.camera;let l;switch(n.mode){case h.MORPHING:break;case h.SCENE2D:r.zoomIn(r.positionCartographic.height*(1-o));break;default:{let a;if(a=p(g.trackedEntity)?new Cesium.Cartesian3:c(g.scene),Cesium.defined(a))l={direction:r.direction,up:r.up};else{const e=new v(r.worldToCameraCoordinatesPoint(n.globe.ellipsoid.cartographicToCartesian(r.positionCartographic)),r.directionWC);a=m.grazingAltitudeLocation(e,n.globe.ellipsoid),l={heading:r.heading,pitch:r.pitch,roll:r.roll}}const u=new d,f=d.subtract(r.position,a,u),y=d.multiplyByScalar(f,o,f),b=d.add(a,y,a),C=o<1?"zoomIn":"zoomOut",w=s.currentTarget,O=We(r.positionCartographic.height).toFixed(0),x=ge(i,"zoomEvt");x&&t("zoomEvt",{type:C,camera:g.camera,status:"start",target:w,level:O}),Cesium.defined(g.trackedEntity)||n.mode===h.COLUMBUS_VIEW?r.position=b:r.flyTo({destination:b,orientation:l,duration:e.duration,convert:!1,complete:()=>{x&&t("zoomEvt",{type:C,camera:g.camera,status:"end",target:w,level:O})},cancel:()=>{x&&t("zoomEvt",{type:C,camera:g.camera,status:"cancel",target:w,level:O})}})}}}},c=e=>{const{defined:t,IntersectionTests:i,Ray:n}=Cesium,o=new n(e.camera.positionWC,e.camera.directionWC),a=i.rayEllipsoid(o,e.globe.ellipsoid);return t(a)?n.getPoint(o,a.start):i.grazingAltitudeLocation(o,e.globe.ellipsoid)};return{zoomIn:t=>{l(1/e.zoomAmount,t)},zoomOut:t=>{l(e.zoomAmount,t)},zoomReset:o=>{var a;null==(a=fe(s))||a.hide();const{viewer:r}=n;if(r.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(r.trackedEntity)){const e=r.trackedEntity;r.trackedEntity=void 0,r.trackedEntity=e}else{const n=ge(i,"zoomEvt"),a=o.currentTarget,s=We(r.camera.positionCartographic.height).toFixed(0);n&&t("zoomEvt",{type:"zoomReset",camera:r.camera,status:"start",target:a,level:s});const l=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:r.camera,status:"end",target:a,level:s})},c=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:r.camera,status:"cancel",target:a,level:s})},u=e.defaultResetView,d={duration:e.durationReset,complete:l,cancel:c};De(r,u,d)}},zoomInTooltipRef:a,zoomOutTooltipRef:r,resetTooltipRef:s}}(e,t,n,l),u=Os(e),p=o(null),m=o(null),v=o(null),h=o(null),g="VcNavigation"===(null==(i=ye(n).proxy)?void 0:i.$options.name),y=o(g),C=b({});f((()=>e),(e=>{w((()=>{n.mounted&&E()}))}),{deep:!0});const x=r((()=>Object.assign({},Us.zoomOutOptions,e.zoomOutOptions))),S=r((()=>Object.assign({},Us.zoomInOptions,e.zoomInOptions))),_=r((()=>Object.assign({},Us.zoomResetOptions,e.zoomResetOptions)));n.createCesiumObject=async()=>new Promise(((t,i)=>{y.value=!0,w((()=>{const{viewer:i}=l;if(e.overrideViewerCamera){Ae(i,e.defaultResetView)}if(g)t(fe(p));else{i._element.appendChild(fe(p)),t(fe(p))}}))})),n.mount=async()=>{var e;E();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:fe(p)}),!0},n.unmount=async()=>{var e;const{viewer:t}=l;if(!g){const e=t._element;e.contains(fe(p))&&e.removeChild(fe(p))}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:fe(p)}),!0};const E=()=>{var t,i,n;const o=u.style.value;if(C.left=o.left,C.top=o.top,C.transform=o.transform,o.flexDirection="vertical"===e.direction?"column":"row",o.background=e.background,o.borderRadius=e.borderRadius,o.border=e.border,!g){const a=null==(t=fe(m))?void 0:t.$el,r=null==(i=fe(v))?void 0:i.$el,s=null==(n=fe(h))?void 0:n.$el;let l=0,c=0;if(void 0!==a){const t=a.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==r){const t=r.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==s){const t=s.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}o.width=`${l+4}px`,o.height=`${c+4}px`;const d=u.attach.value;!d.bottom&&!d.top||d.left||d.right||(o.left="50%",o.transform="translate(-50%, 0)"),!d.left&&!d.right||d.top||d.bottom||(o.top="50%",o.transform="translate(0, -50%)")}Object.assign(C,o)},P=(e,i)=>{var n,o,a;let r,l,u,d;"zoomIn"===i?(r=m,l=c.zoomInTooltipRef,u=(null==(n=e.tooltip)?void 0:n.tip)||s("vc.navigation.zoomCotrol.zoomInTip"),d=c.zoomIn):"zoomOut"===i?(r=h,l=c.zoomOutTooltipRef,u=(null==(o=e.tooltip)?void 0:o.tip)||s("vc.navigation.zoomCotrol.zoomOutTip"),d=c.zoomOut):"zoomReset"===i&&(r=v,l=c.resetTooltipRef,u=(null==(a=e.tooltip)?void 0:a.tip)||s("vc.navigation.zoomCotrol.zoomResetTip"),d=c.zoomReset);const p=[];p.push(O($r,{name:e.icon,size:e.size})),p.push(O("div",null,e.label)),e.tooltip?p.push(O(as,{ref:l,...e.tooltip},(()=>O("strong",null,u)))):p.push(T("v-if"));return O(Gr,{class:`vc-${ne(i)}`,ref:r,size:e.size,flat:e.flat,stack:e.stack,round:e.round,dense:!0,style:{color:e.color,background:e.background},onClick:d},(()=>ya(t.slots.default,p)))};return()=>{if(y.value){const t=[];return t.push(O("li",null,P(S.value,"zoomIn"))),e.enableResetButton?t.push(O("li",null,P(_.value,"zoomReset"))):t.push(T("v-if")),t.push(O("li",null,P(x.value,"zoomOut"))),O("div",{ref:p,class:"vc-zoom-control "+u.classes.value,style:C},O("ul",{class:"vc-list"},t))}return T("v-if")}}});const $s=S({name:"VcPrintView",props:{options:Object},setup(e){const t=o(!1),i=o(!1);d().cesiumClass="VcPrintView";const{t:n}=Gn(),a=()=>{var n,o;if(t.value)return;const a=null==(n=e.options)?void 0:n.printWindow.document.getElementsByTagName("img");if(0===a.length)return;let r=!0;for(let e=0;r&&e<a.length;++e)r=a[e].complete;r&&(s(),t.value=r,t.value&&!i.value&&((null==(o=e.options)?void 0:o.readyCallback)&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let r;const s=()=>{r&&r()};return C((()=>{var t;const i=null==(t=e.options)?void 0:t.printWindow,n=window,o=null==i?void 0:i.setInterval(a,200),s=n.setInterval(a,200);r=()=>{i.clearInterval(o),n.clearInterval(s),r=void 0}})),h((()=>{s()})),()=>{var t,i,o,a,r,s;const l=[];if(l.push(O("p",{},O("img",{src:null==(t=e.options)?void 0:t.image,alt:n("vc.navigation.screenshot"),class:"vc-map-image"}))),(null==(i=e.options)?void 0:i.credits.length)&&(null==(o=e.options)?void 0:o.showCredit)?l.push(O("h1",{},n("vc.navigation.credit"))):l.push(T("v-if")),(null==(a=e.options)?void 0:a.credits.length)&&(null==(r=e.options)?void 0:r.showCredit)){const t=[];null==(s=e.options)||s.credits.forEach((e=>{t.push(O("li",{innerHTML:e}))})),l.push(O("ul",{},t))}else l.push(T("v-if"));return O("div",{},l)}}});var Zs={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...ws,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String};const Ys={...us,printEvt:e=>!0};var qs=S({name:"VcPrint",props:Zs,emits:Ys,setup(e,t){var n;const a=d();a.cesiumClass="VcPrint",a.cesiumEvents=[];const r=Xn(e,t,a);if(void 0===r)return;const{t:s}=Gn(),{$services:l}=r,c=o(null),u=o(null),p=o(null),m=Os(e),v=o(!1),h="VcNavigation"===(null==(n=ye(a).proxy)?void 0:n.$options.name),g=o(h),y=b({});f((()=>e),(e=>{w((()=>{a.mounted&&C()}))}),{deep:!0}),a.createCesiumObject=async()=>new Promise(((e,t)=>{g.value=!0,w((()=>{const{viewer:t}=l;if(h)e(fe(c));else{t._element.appendChild(fe(c)),e(fe(c))}}))})),a.mount=async()=>{var e;C();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:fe(c)}),!0},a.unmount=async()=>{var e;const t=l.viewer._element;h||t.contains(fe(c))&&t.removeChild(fe(c));const{viewer:i}=l;return null==(e=i.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:fe(c)}),!0};const C=()=>{var e;const t=m.style.value;if(y.left=t.left,y.top=t.top,y.transform=t.transform,!h){const i=m.attach.value;void 0!==(null==(e=fe(p))?void 0:e.$el)&&(!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"))}Object.assign(y,t)},x=()=>{var i;null==(i=fe(u))||i.hide();const{viewer:n}=l;(function(e){const t=e.scene,i=new Promise(((t,i)=>{const n=e.scene.postRender.addEventListener((()=>{n();try{const i=e.scene.canvas;t(i.toDataURL("image/png"))}catch(_h){i(_h)}}))}));return t.render(e.clock.currentTime),i})(n).then((i=>{if(e.downloadAutomatically){const t=document.createElement("a");t.download=e.screenshotName||s("vc.navigation.print.screenshot"),t.style.display="none",t.href=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?_(i):e.printAutomatically&&S(i));ge(a,"printEvt")&&t.emit("printEvt",{type:"capture",image:i,status:"end"})}))},S=e=>{E(!0,!0,e)},_=e=>{E(!1,!1,e)},E=(t,i,n)=>{let o;v.value=!0,t&&(o=document.createElement("iframe"),document.body.appendChild(o));const{viewer:a}=l;(e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",(()=>{i(t)})),t.document.open(),t.document.close(),t.document.head.innerHTML=`\n    <meta charset="UTF-8">\n    <title>${e.title}</title>\n    <style>\n  .background {\n    width: 100%;\n    fill: rgba(255, 255, 255, 1.0);\n  }\n\n  .map-image {\n    max-width: 95vw;\n    max-height: 95vh;\n  }\n\n  .layer-legends {\n    display: inline;\n    float: left;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n\n  .layer-title {\n    font-weight: bold;\n  }\n\n  h1, h2, h3 {\n    clear: both;\n  }\n</style>\n    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,M($s,{options:e}).mount(t.document.getElementById("print"))})({image:n,showCredit:e.showCredit,credits:P(a),printWindow:o?o.contentWindow:void 0,title:s("vc.navigation.print.printViewTitle"),readyCallback:e=>{i&&function(e){const t=bo();let i=0;const n=setTimeout((function(){t.reject(!1)}),1e4);function o(){clearTimeout(n)}function a(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener((function(e){o(),e.matches?++i:(--i,a())})),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,a()},e.document.execCommand("print",!0,null)||e.print(),t.promise}(e).catch((e=>{r.logger.warn(e)})).then((()=>{o&&document.body.removeChild(o),t&&(v.value=!1)}))},closeCallback:e=>{t&&(v.value=!1)}}),t||(v.value=!1)},P=e=>e.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(e.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map((e=>e.html)),I=e=>{v.value&&(e.cancel=!0)};return()=>{if(g.value){const t=[];t.push(O($r,{name:e.icon,size:e.size})),t.push(O("div",null,e.label)),i(e.tooltip)?t.push(O(as,{ref:u,onBeforeShow:I,...e.tooltip},(()=>O("strong",null,i(e.tooltip)&&e.tooltip.tip||s("vc.navigation.print.printTip"))))):t.push(T("v-if"));const n=[O(Gr,{ref:p,size:e.size,disabled:v.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:x},(()=>t))];return O("div",{ref:c,class:"vc-print "+m.classes.value,style:y},n)}return T("v-if")}}}),Xs={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:12.5},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,description:Function,...ws,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"}};const Qs={...us,locationEvt:e=>!0};var Js=S({name:"VcMyLocation",props:Xs,emits:Qs,setup(e,a){var s;const l=d();l.cesiumClass="VcMyLocation",l.cesiumEvents=[];const c=Xn(e,a,l);if(void 0===c)return;const{$services:u}=c,{t:p}=Gn(),m=o(null),v=o(null),h=o(null),g=o(!1),y=Os(e),C="VcNavigation"===(null==(s=ye(l).proxy)?void 0:s.$options.name),x=o(C),S=b({});let _,E;f((()=>e),(e=>{w((()=>{l.mounted&&M()}))}),{deep:!0});const P=r((()=>g.value?p("vc.navigation.myLocation.positioning"):i(e.tooltip)&&e.tooltip.tip||p("vc.navigation.myLocation.myLocationTip")));l.createCesiumObject=async()=>{x.value=!0;const{viewer:t}=u,{CustomDataSource:i}=Cesium,n=t.dataSources.getByName("__vc-myLocation__");let o;if(n.length?_=n[0]:t.dataSources.add(new i("__vc-myLocation__")).then((e=>{_=e})),e.amap&&e.amap.key){const t=e.amap.options;o=new Promise(((i,n)=>{var o,a;I.load({key:null==(o=e.amap)?void 0:o.key,version:null==(a=e.amap)?void 0:a.version,plugins:["AMap.Geolocation"]}).then((e=>{E=new e.Geolocation(t),i(E)})).catch((e=>{c.logger.error(e),n(e)}))}))}const a=new Promise(((e,t)=>{w((()=>{if(C)e(fe(m));else{u.viewer._element.appendChild(fe(m)),e(fe(m))}}))}));return Promise.all([a,o]).then((e=>e[0]))},l.mount=async()=>{var e;M();const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"mounted",target:fe(m)}),!0},l.unmount=async()=>{var e;const{viewer:t}=u;if(E){const e=document.getElementsByTagName("script"),t=[];for(const i of e)i.src.indexOf("/webapi.amap.com/maps")>-1&&t.push(i);t.forEach((e=>{document.getElementsByTagName("body")[0].removeChild(e)}))}const i=u.viewer._element;return C||i.contains(fe(m))&&i.removeChild(fe(m)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"unmounted",target:fe(m)}),t.dataSources.remove(_,!0)};const M=()=>{var e;const t=y.style.value;if(S.left=t.left,S.top=t.top,S.transform=t.transform,!C){const i=y.attach.value,n=null==(e=fe(h))?void 0:e.$el;void 0!==n&&(n.getBoundingClientRect(),!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"))}Object.assign(S,t)},j=()=>{var i;if(null==(i=fe(v))||i.hide(),g.value=!0,t(e.customAPI)){const t=e.customAPI(D);L(t)}else E&&e.amap&&e.amap.key?E.getCurrentPosition(((t,i)=>{var n;if("complete"===t){let t=[i.position.lng,i.position.lat];(null==(n=e.amap)?void 0:n.transformToWGS84)&&(t=Io(t[0],t[1])),L({lng:t[0],lat:t[1],address:i.formattedAddress},i)}else D(p("vc.navigation.myLocation.fail"),i.message)})):e.geolocation?navigator.geolocation.getCurrentPosition((e=>{L({lng:e.coords.longitude,lat:e.coords.latitude},e)}),D,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):D(p("vc.navigation.myLocation.fail"))},L=(t,i)=>{var o;const r=t.lng,s=t.lat,c=t.address,{Rectangle:d,sampleTerrain:m,defined:v,SceneMode:h}=Cesium,{viewer:f}=u;_.entities.removeAll();const y=_.entities.add({id:e.id,position:Ce([r,s],f.scene.globe.ellipsoid),point:{color:Pe(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:Pe(e.outlineColor)},properties:{...i},description:(null==(o=e.description)?void 0:o.call(this,t,i))||A({[p("vc.navigation.myLocation.lng")]:r,[p("vc.navigation.myLocation.lat")]:s,[p("vc.navigation.myLocation.address")]:c})}),b=ge(l,"locationEvt");b&&a.emit("locationEvt",{type:"location",position:t,detail:i,entity:y});const C={duration:e.duration};if(v(e.maximumHeight)&&(C.maximumHeight=e.maximumHeight),v(e.hpr)&&n(e.hpr)&&(C.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),f.scene.mode===h.SCENE2D||f.scene.mode===h.COLUMBUS_VIEW)return f.flyTo(y,C).then((()=>{g.value=!1,b&&a.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})}));const w=e.factor,O=d.fromDegrees(r-w,s-w,r+w,s+w),x=f.scene.camera,S=x.getRectangleCameraCoordinates(O),E=f.scene.globe.ellipsoid.cartesianToCartographic(S);return m(f.scene.globe.terrainProvider,e.level,[d.center(O)]).then((function(t){const i={longitude:E.longitude,latitude:E.latitude,height:E.height+t[0].height},n=f.scene.globe.ellipsoid.cartographicToCartesian(i);b&&a.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"start"}),x.flyTo({duration:e.duration,destination:n,complete:()=>{g.value=!1,b&&a.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})},cancel:()=>{g.value=!1,b&&a.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"cancel"})}})}))},A=(e,t)=>{let i="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n===t)continue;let o=e[n];"object"==typeof o&&(o=A(o)),n=n.replace(/_/g," "),Cesium.defined(o)&&(i+="<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i},D=(...e)=>{g.value=!1,c.logger.error(...e)},R=e=>{g.value&&(e.cancel=!0)};return()=>{if(x.value){const t=[];return t.push(O($r,{name:e.icon,size:e.size})),t.push(O("div",null,e.label)),i(e.tooltip)?t.push(O(as,{ref:v,onBeforeShow:R,...e.tooltip},(()=>O("strong",null,P.value)))):t.push(T("v-if")),O("div",{ref:m,class:"vc-my-location "+y.classes.value,style:S},[O(Gr,{ref:h,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:g.value,dense:!0,style:{color:e.color,background:e.background},onClick:j},{default:()=>t,loading:()=>O((()=>{switch(e.loadingType){case"bars":default:return Yr;case"ios":return Jr;case"orbit":return Kr;case"oval":return es;case"puff":return ts;case"tail":return ns}})())})])}return T("v-if")}}});class Ks{constructor(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array}getHeight(e,t){return el(this).then((function(i){return tl(i,e,t)}))}getHeights(e){return el(this).then((function(t){for(let i=0;i<e.length;++i){const n=e[i];n.height=tl(t,n.longitude,n.latitude)}return e}))}}async function el(e){const{defined:t}=Cesium;t(e.data)||(e.data=function(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const t=new Uint8Array(i);for(let e=0;e<t.length;e+=2){const i=t[e];t[e]=t[e+1],t[e+1]=i}e.data=new Int16Array(i)}return e.data}function tl(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720);let a=1440*(t=n.zeroToTwoPi(t))/n.TWO_PI;a<0?a=0:a>1440&&(a=1440);const r=0|a,s=0|o,l=a-r,c=o-s,u=1-l,d=1-c;return(il(e,s,r)*u*d+il(e,s,r+1)*l*d+il(e,s+1,r)*u*c+il(e,s+1,r+1)*l*c)/100}function il(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[1440*t+i]}class nl{constructor(e){const{Cartographic:t,knockout:i}=Cesium,n=e.gridFileUrl;n&&(this.geoidModel=new Ks(n)),this.proj4Projection=e.proj4Projection,this.projectionUnits=e.projectionUnits,this.proj4longlat=e.proj4longlat,this.lastHeightSamplePosition=new t,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=$(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=e.decimal||5,this.rangeType=e.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(e,t){const{Cartographic:i,defined:n,EllipsoidTerrainProvider:o,Intersections2D:a,SceneMode:r}=Cesium,s=e.scene,l=s.camera.getPickRay(t),c=s.globe,u=c.pickTriangle(l,s);if(n(u)){const e=c.ellipsoid,t=e.cartesianToCartographic(u.v0),n=e.cartesianToCartographic(u.v1),d=e.cartesianToCartographic(u.v2),p=e.cartesianToCartographic(s.mode===r.SCENE3D?u.intersection:s.globe.pick(l,s));let m;if(c.terrainProvider instanceof o)p.height=void 0;else{const e=a.computeBarycentricCoordinates(p.longitude,p.latitude,t.longitude,t.latitude,n.longitude,n.latitude,d.longitude,d.latitude);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const i=e.x*t.height+e.y*n.height+e.z*d.height;p.height=i}const i=c.terrainProvider.getLevelMaximumGeometricError(u.tile.level),o=p.height,r=Math.max(u.tile.data.tileBoundingRegion.minimumHeight,o-i),s=Math.min(u.tile.data.tileBoundingRegion.maximumHeight,o+i),l=r-(this.geoidModel?this.geoidModel.minimumHeight:0),v=s+(this.geoidModel?this.geoidModel.maximumHeight:0);m=Math.max(Math.abs(o-l),Math.abs(v-o))}i.clone(p,this.lastHeightSamplePosition);const v=c.terrainProvider;this.cartographicToFields(p,m),v instanceof o||this.debounceSampleAccurateHeight(v,p)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(e,t){const{Math:i}=Cesium,n=i.toDegrees(e.latitude),o=i.toDegrees(e.longitude);if(this.useProjection){const e=function(e,t,i,n,o){const a=1+Math.floor((e+180)/6),r=j(n,i+" +zone="+a+(t<0?" +south":""),[e,t]);return{utmZone:a+(t<0?"S":"N"),north:r[1].toFixed(2)+o,east:r[0].toFixed(2)+o}}(o,n,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=e.utmZone,this.north=e.north,this.east=e.east}const a=function(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:a}=Cesium,r=o(i,{}),s=o(r.decimal,5);return 0===r.rangeType?(n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E")):1===r.rangeType?(n.latitude=t.toFixed(s)+"°",n.longitude=e.toFixed(s)+"°"):2===r.rangeType&&(n.latitude=t.toFixed(s)+"°",n.longitude=(e<0?360+e:e).toFixed(s)+"°"),a(r.height)?n.elevation=Math.round(r.height)+(a(r.errorBar)?"±"+Math.round(r.errorBar):"")+"m":n.elevation="",n}(o,n,{height:e.height,errorBar:t,decimal:this.decimal,rangeType:this.rangeType});this.latitude=a.latitude,this.longitude=a.longitude,this.elevation=a.elevation}sampleAccurateHeight(e,t){const{Cartographic:i,sampleTerrainMostDetailed:n,when:o}=Cesium;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);const a=i.clone(t),r=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,s=n(e,[a]);this.tileRequestInFlight=Promise.all([r,s]).then((e=>{const n=e[0]||0;this.tileRequestInFlight=void 0,i.equals(t,this.lastHeightSamplePosition)&&(t.height=a.height-n,this.cartographicToFields(t))})).catch((()=>{this.tileRequestInFlight=void 0}))}}const ol=[],al={start:0,stop:0},rl={},sl={},ll={};function cl(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:a,DeveloperError:r,IntersectionTests:s,SceneMode:l}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(e,t,c,u){if(!a(e))throw new r("ray is required");if(!a(t))throw new r("scene is required");c=n(c,!0);const d=t.mode,p=t.mapProjection,m=ol;m.length=0;const v=this._surface._tilesToRender;let h,g,f,y=v.length;for(g=0;g<y;++g){h=v[g];const t=h.data;if(!a(t))continue;const n=t.pickBoundingSphere;d!==l.SCENE3D?(i.fromRectangleWithHeights2D(h.rectangle,p,t.minimumHeight,t.maximumHeight,n),o.fromElements(n.center.z,n.center.x,n.center.y,n.center)):i.clone(t.boundingSphere3D,n);const r=s.raySphere(e,n,al);a(r)&&m.push(h)}for(m.sort(function(e){const{BoundingSphere:t}=Cesium;return function(i,n){return t.distanceSquaredTo(i.data.pickBoundingSphere,e)-t.distanceSquaredTo(n.data.pickBoundingSphere,e)}}(e.origin)),y=m.length,g=0;g<y;++g)if(f=m[g].data.pickTriangle(e,t.mode,t.mapProjection,c,u),a(f)){f.tile=m[g];break}return f},t.prototype.pickTriangle=t.prototype.pickTriangle||function(e,t,i,n){const r=this.renderedMesh;if(!a(r))return;const l=r.vertices,c=r.indices,u=r.encoding,d=c.length;for(let p=0;p<d;p+=3){const r=c[p],d=c[p+1],m=c[p+2],v=ul(u,t,i,l,r,rl),h=ul(u,t,i,l,d,sl),g=ul(u,t,i,l,m,ll),f=s.rayTriangle(e,v,h,g,n,new o);if(a(f))return{intersection:f,v0:v,v1:h,v2:g}}}}function ul(e,t,i,n,o,a){e.decodePosition(n,o,a);const{Cartesian3:r,defined:s,SceneMode:l}=Cesium;if(s(t)&&t!==l.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(a);i.project(e,a),r.fromElements(a.z,a.x,a.y,a)}return a}var dl={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})}};const pl={...us,statusBarEvt:e=>!0};var ml=S({name:"VcStatusBar",props:dl,emits:pl,setup(e,t){var n;const a=d();a.cesiumClass="VcStatusBar",a.cesiumEvents=[];const r=Xn(e,t,a);if(void 0===r)return;const s=ye(a),{$services:l}=r,c=o(null),u=o(null),{t:p}=Gn();let m=-1,v=-1;const h=b({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),g=b({fps:"NaN",ms:"NaN"}),y=o(),C=Os(e),x="VcNavigation"===(null==(n=s.proxy)?void 0:n.$options.name),S=o(x),_=b({});f((()=>e),(e=>{w((()=>{a.mounted&&E()}))}),{deep:!0}),a.createCesiumObject=async()=>{S.value=!0;const{viewer:t}=l,i=t._element;return e.showMouseInfo&&(y.value=new nl({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),i.addEventListener("wheel",I,!1),i.addEventListener("mousemove",I,!1),i.addEventListener("touchmove",I,!1),cl()),e.showCameraInfo&&(t.camera.changed.addEventListener(M),M()),e.showPerformanceInfo&&(t.scene.debugShowFramesPerSecond=!0,t.scene.postRender.addEventListener(P)),new Promise(((e,i)=>{w((()=>{var i,n,o;if(x)e(null==(o=fe(c))?void 0:o.$el);else{t._element.appendChild(null==(i=fe(c))?void 0:i.$el),e(null==(n=fe(c))?void 0:n.$el)}}))}))},a.mount=async()=>{var e,t;E();const{viewer:i}=l;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"mounted",target:null==(e=fe(c))?void 0:e.$el}),!0},a.unmount=async()=>{var t,i,n,o;const{viewer:r}=l,s=r._element;return e.showMouseInfo&&(y.value=void 0,s.removeEventListener("wheel",I),s.removeEventListener("mousemove",I),s.removeEventListener("touchmove",I)),e.showCameraInfo&&r.camera.changed.removeEventListener(M),e.showPerformanceInfo&&(r.scene._performanceDisplay&&(r.scene._performanceDisplay._container.style.display="block"),r.scene.postRender.removeEventListener(P)),x||s.contains(null==(t=fe(c))?void 0:t.$el)&&s.removeChild(null==(i=fe(c))?void 0:i.$el),null==(o=r.viewerWidgetResized)||o.raiseEvent({type:a.cesiumClass,status:"unmounted",target:null==(n=fe(c))?void 0:n.$el}),!0};const E=()=>{const t=C.style.value;_.left=t.left,_.top=t.top,_.transform=t.transform,t.background=e.background,t.color=e.color;const i=C.attach.value;!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"),Object.assign(_,t)},P=po((e=>{var t,i;g.fps=null==(t=e._performanceDisplay)?void 0:t._fpsText.nodeValue,g.ms=null==(i=e._performanceDisplay)?void 0:i._msText.nodeValue,e._performanceDisplay._container.style.display="none"}),500),M=()=>{const{viewer:e}=l,{Math:t}=Cesium;h.heading=t.toDegrees(e.camera.heading).toFixed(1),h.pitch=t.toDegrees(e.camera.pitch).toFixed(1),h.roll=t.toDegrees(e.camera.roll).toFixed(1),h.height=e.camera.positionCartographic.height.toFixed(2),h.level=We(Number(h.height)).toFixed(0)},I=i=>{var n;const{Cartesian2:o,SceneMode:r}=Cesium,{viewer:s}=l;if(s.scene.mode===r.MORPHING)return;const c="mousemove"===i.type||"wheel"===i.type?i.clientX:i.changedTouches[0].clientX,u="mousemove"===i.type||"wheel"===i.type?i.clientY:i.changedTouches[0].clientY;if(c===m&&u===v)return;m=c,v=u;const d=s._element;if(s){if(e.showMouseInfo){const e=d.getBoundingClientRect(),t=new o(c-e.left,u-e.top);null==(n=y.value)||n.updateCoordinatesFromCesium(s,t)}ge(a,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:y.value,cameraInfo:h,performanceInfo:g})}},j=()=>{var t,i;e.useProjection&&(null==(t=fe(u))||t.hide(),e.showMouseInfo&&(null==(i=y.value)||i.toggleUseProjection()))};return Object.assign(a.proxy,{getMouseCoordsInfo:()=>y.value,getCameraInfo:()=>h,getPerformanceInfo:()=>g}),()=>{var n,o,a,r,s,l,d,m;if(S.value){const v=[];return e.showMouseInfo?((null==(n=y.value)?void 0:n.useProjection)?v.push(O("div",{class:"vc-section-short ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.zone")),O("span",null,null==(r=y.value)?void 0:r.utmZone)]),O("div",{class:"vc-section ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.e")),O("span",null,null==(s=y.value)?void 0:s.east)]),O("div",{class:"vc-section ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.n")),O("span",null,null==(l=y.value)?void 0:l.north)])):v.push(O("div",{class:"vc-section ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.lng")),O("span",{},null==(o=y.value)?void 0:o.longitude)]),O("div",{class:"vc-section ellipsis"},[O("span",{},p("vc.navigation.statusBar.lat")),O("span",{},null==(a=y.value)?void 0:a.latitude)])),(null==(d=y.value)?void 0:d.elevation)?v.push(O("div",{class:"vc-section ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.elev")),O("span",{},null==(m=y.value)?void 0:m.elevation)])):v.push(T("v-if"))):v.push(T("v-if")),e.showCameraInfo?v.push(O("div",{class:"vc-section-short-mini ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.level")),O("span",null,h.level)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.heading")),O("span",null,`${h.heading}°`)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.pitch")),O("span",null,`${h.pitch}°`)]),O("div",{class:"vc-section-short ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.roll")),O("span",null,`${h.roll}°`)]),O("div",{class:"vc-section ellipsis"},[O("span",{...t.attrs},p("vc.navigation.statusBar.cameraHeight")),O("span",null,`${h.height}m`)])):v.push(T("v-if")),e.showPerformanceInfo?v.push(O("div",{class:"vc-section-short-mini ellipsis"},[O("span",null,g.ms)]),O("div",{class:"vc-section-short-mini ellipsis"},[O("span",null,g.fps)])):v.push(T("v-if")),i(e.tooltip)&&e.showMouseInfo&&e.useProjection?v.push(O(as,{ref:u,...e.tooltip},(()=>O("strong",null,i(e.tooltip)&&e.tooltip.tip||p("vc.navigation.statusBar.tip"))))):v.push(T("v-if")),O(Gr,{ref:c,class:"vc-status-bar "+C.classes.value,style:_,noCaps:!0,onClick:j},(()=>v))}return T("v-if")}}}),vl={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"}};const hl={...us,distanceLegendEvt:e=>!0};var gl=S({name:"VcDistanceLegend",props:vl,emits:hl,setup(e,t){var i;const n=d();n.cesiumClass="VcDistanceLegend",n.cesiumEvents=[];const a=Xn(e,t,n);if(void 0===a)return;const s=ye(n),{$services:l}=a,c=o(null),u=o(""),p=Os(e),m="VcNavigation"===(null==(i=s.proxy)?void 0:i.$options.name),v=o(m),h=b({});let g=0;const y=o(0);let C=0;f((()=>e),(e=>{w((()=>{n.mounted&&S()}))}),{deep:!0});const x=r((()=>({width:`${y.value}px`,left:5+(e.width+15-y.value)/2+"px",height:"2px",background:e.barBackground})));n.createCesiumObject=async()=>(v.value=!0,u.value="",new Promise(((e,t)=>{w((()=>{var t,i,n;const{viewer:o}=l;if(m)e(null==(n=fe(c))?void 0:n.$el);else{o._element.appendChild(null==(t=fe(c))?void 0:t.$el),e(null==(i=fe(c))?void 0:i.$el)}o.scene.postRender.addEventListener(_)}))}))),n.mount=async()=>{var e,t;S();const{viewer:i}=l;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:n.cesiumClass,status:"mounted",target:null==(e=fe(c))?void 0:e.$el}),!0},n.unmount=async()=>{var e,t,i,o;const{viewer:a}=l;a.scene.postRender.removeEventListener(_);const r=a._element;return m||r.contains(null==(e=fe(c))?void 0:e.$el)&&r.removeChild(null==(t=fe(c))?void 0:t.$el),null==(o=a.viewerWidgetResized)||o.raiseEvent({type:n.cesiumClass,status:"unmounted",target:null==(i=fe(c))?void 0:i.$el}),!0};const S=()=>{const t=p.style.value;h.left=t.left,h.top=t.top,h.transform=t.transform,t.background=e.background,t.color=e.color;const i=p.attach.value;!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"),t.width=`${e.width}px`,Object.assign(h,t)},_=po((i=>{const{Cartesian2:o,defined:a,getTimestamp:r,EllipsoidGeodesic:s}=Cesium,l=r();if(l<g+250)return;g=l;const c=new s,d=i.canvas.clientWidth,p=i.canvas.clientHeight,m=i.camera.getPickRay(new o(d/2|0,p-1)),v=i.camera.getPickRay(new o(1+d/2|0,p-1)),h=i.globe,f=h.pick(m,i),b=h.pick(v,i);if(!a(f)||!a(b))return y.value=0,void(u.value="");const w=h.ellipsoid.cartesianToCartographic(f),O=h.ellipsoid.cartesianToCartographic(b);c.setEndPoints(w,O);const x=c.surfaceDistance,S=e.width-10;let _;for(let e=fl.length-1;!a(_)&&e>=0;--e)if(fl[e]/x<S&&(_=fl[e],C!==_)){C=_;ge(n,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:C,status:"changed"})}if(a(_)){let e;e=C>=1e3?(_/1e3).toString()+" km":_.toString()+" m",y.value=_/x|0,u.value=e}else y.value=0,u.value=""}),500);return()=>v.value&&void 0!==u.value?O(Gr,{ref:c,class:"vc-distance-legend "+p.classes.value,style:h,stack:!0,noCaps:!0},(()=>[O("label",null,u.value),O("div",{style:x.value,class:"vc-bar"})])):T("v-if")}});const fl=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],yl={...ws,compassOpts:{type:[Object,Boolean],default:()=>re(xs,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>re(Hs,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>re(Zs,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>re(Xs,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:re(dl,["position","offset"]),distancelegendOpts:re(vl,["position","offset"])})}},bl=re(yl);var Cl=S({name:"VcNavigation",inheritAttrs:!1,props:yl,emits:{...us,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},setup(e,t){const i=d();i.cesiumClass="VcNavigation";const n=Xn(e,t,i);if(void 0===n)return;const a=o(!1),{$services:s}=n,l=Os(e),c=Os(e.otherOpts||{position:"bottom-right"}),u=o(null),p=o(null),m=o(null),v=o(null),h=o(null),g=o(null),y=o(null),C=o(null),x=b({}),S=b({}),{emit:_}=t;f((()=>e),(()=>{w((()=>{var e,t,i,n,o,a;V(),null==(e=fe(m))||e.reload(),null==(t=fe(v))||t.reload(),null==(i=fe(g))||i.reload(),null==(n=fe(h))||n.reload(),null==(o=fe(y))||o.reload(),null==(a=fe(C))||a.reload()}))}),{deep:!0});const E=r((()=>Object.assign({},bl.compassOpts,e.compassOpts))),P=r((()=>Object.assign({},bl.zoomOpts,e.zoomOpts))),M=r((()=>Object.assign({},bl.printOpts,e.printOpts))),I=r((()=>Object.assign({},bl.locationOpts,e.locationOpts))),j=r((()=>Object.assign({},bl.otherOpts,e.otherOpts))),L=e=>{ge(i,"compassEvt")&&_("compassEvt",e)},A=e=>{ge(i,"zoomEvt")&&_("zoomEvt",e)},D=e=>{ge(i,"printEvt")&&_("printEvt",e)},R=e=>{ge(i,"locationEvt")&&_("locationEvt",e)},k=e=>{ge(i,"statusBarEvt")&&_("statusBarEvt",e)},B=e=>{ge(i,"distanceLegendEvt")&&_("distanceLegendEvt",e)};i.createCesiumObject=async()=>{var e;a.value=!0;const{viewer:t}=s;return null==(e=t.viewerWidgetResized)||e.addEventListener(N),new Promise(((e,i)=>{w((()=>{const i=t._element;i.appendChild(fe(u)),fe(p)&&i.appendChild(fe(p)),e([fe(u),fe(p)])}))}))},i.mount=async()=>{var e;V();const{viewer:t}=s;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:fe(u)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=s,o=n._element;return o.contains(fe(u))&&o.removeChild(fe(u)),o.contains(fe(p))&&o.removeChild(fe(p)),null==(e=n.viewerWidgetResized)||e.removeEventListener(N),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:fe(u)}),!0};const N=()=>{w((()=>{V()}))},V=()=>{var e,t,i,n,o;const a=null==(e=fe(m))?void 0:e.$el;let r=0,s=0;if(void 0!==a){const e=getComputedStyle(a.parentNode).margin;s=parseInt(e),r+=a.getBoundingClientRect().height+2*s}const u=null==(t=fe(v))?void 0:t.$el;void 0!==u&&(r+=u.getBoundingClientRect().height+2*s);const d=null==(i=fe(h))?void 0:i.$el;void 0!==d&&(r+=d.getBoundingClientRect().height+2*s);const p=null==(n=fe(g))?void 0:n.$el;void 0!==p&&(r+=p.getBoundingClientRect().height+2*s);const f=l.style.value,b=l.attach.value;x.left=f.left,x.top=f.top,x.transform=f.transform,!b.bottom&&!b.top||b.left||b.right||(f.left="50%",f.transform="translate(-50%, 0)"),!b.left&&!b.right||b.top||b.bottom||(f.top="50%",f.transform="translate(0, -50%)"),Object.assign(x,f,{height:`${r}px`});const C=c.style.value,w=c.attach.value;S.left=C.left,S.top=C.top,S.transform=C.transform,!w.bottom&&!w.top||w.left||w.right||(C.left="50%",C.transform="translate(-50%, 0)"),!w.left&&!w.right||w.top||w.bottom||(C.top="50%",C.transform="translate(0, -50%)");let O=0;const _=null==(o=fe(y))?void 0:o.$el;void 0!==_&&(O+=_.getBoundingClientRect().height),Object.assign(S,C,{height:`${O}px`})};return()=>{if(a.value){const i=[];E.value&&!1!==e.compassOpts?i.push(O("div",{class:"vc-navigation-control"},[O(Fs,{ref:m,...E.value,onCompassEvt:L})])):i.push(T("v-if")),P.value&&!1!==e.zoomOpts?i.push(O("div",{class:"vc-navigation-control"},[O(Gs,{ref:v,...P.value,onZoomEvt:A})])):i.push(T("v-if")),M.value&&!1!==e.printOpts?i.push(O("div",{class:"vc-navigation-control"},[O(qs,{ref:h,...M.value,onPrintEvt:D})])):i.push(T("v-if")),I.value&&!1!==e.locationOpts?i.push(O("div",{class:"vc-navigation-control"},[O(Js,{ref:g,...I.value,onLocationEvt:R})])):i.push(T("v-if"));let n=[O("div",{class:"vc-navigation-controls"},i)];n=ya(t.slots.default,n);const o=[];return o.push(O("div",{ref:u,class:"vc-navigation "+l.classes.value,style:x},n)),!1!==e.otherOpts&&o.push(O("div",{ref:p,class:"vc-location-other-controls "+c.classes.value,style:S},[O(ml,{ref:y,...j.value.statusBarOpts,onStatusBarEvt:k}),O(gl,{ref:C,...j.value.distancelegendOpts,onDistanceLegendEvt:B})])),o}return T("v-if")}}});function wl(e,{emit:t},i){const n={},a={},r={},s={};let l,u,d,p;const m=o(0);let v,h,g,f,y,b=0,C={},w=0,O={},x=0;const S=o(56),_=o(3);let E;const P=o(null),T=()=>{const{defined:e}=Cesium;e(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener((function(){m.value!==i.viewer.scene.camera.heading&&(m.value=i.viewer.scene.camera.heading)}))):l&&(l(),l=void 0)},M=(e,n)=>{const{defined:o,getTimestamp:a,SceneMode:r,Math:s,ScreenSpaceEventType:l}=Cesium,c=i.viewer.scene,m=c.screenSpaceCameraController;if(c.mode===r.MORPHING||!m.enableInputs)return;switch(c.mode){case r.COLUMBUS_VIEW:if(m.enableLook)break;if(!m.enableTranslate||!m.enableTilt)return;break;case r.SCENE3D:if(m.enableLook)break;if(!m.enableTilt||!m.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!m.enableTranslate)return}g.removeInputAction(l.LEFT_UP),o(p)&&i.viewer.clock.onTick.removeEventListener(p),d=void 0,p=void 0,a();let v=s.PI_OVER_TWO-Math.atan2(-n.y,n.x);const h=Math.PI/4;let f=0;const y=1,b=2,C=3,w=4;f=v>=-h&&h>=v?w:v>=h&&3*h>=v?b:v>=3*h&&5*h>=v?C:y;const O=ge(i,"compassEvt");let x="rotateEast";switch(f){case y:x="rotateWest";break;case b:x="rotateEast";break;case C:x="rotateNorth";break;case w:x="rotateSouth"}O&&t("compassEvt",{type:x,camera:c.camera,status:"start",target:e}),p=function(n){const o=i.viewer.scene,r=o.camera;switch(a(),v=20*Math.abs(r.positionCartographic.height/6378317)*5e-4,f){case y:r.rotateLeft(v);break;case b:r.rotateRight(v);break;case C:r.rotate(r.right,-v);break;case w:r.rotate(r.right,v)}O&&t("compassEvt",{type:x,camera:o.camera,status:"changing",target:e})},d=function(n){g.removeInputAction(l.LEFT_UP),o(p)&&i.viewer.clock.onTick.removeEventListener(p),d=void 0,p=void 0,O&&t("compassEvt",{type:x,camera:c.camera,status:"end",target:e})},g.setInputAction(d,l.LEFT_UP),u=i.viewer.clock.onTick.addEventListener(p)},I=(o,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1);const{Cartesian2:p,Cartesian3:m,defined:g,Math:f,Matrix4:y,Ray:O,Transforms:x}=Cesium;h=void 0,v=void 0;const S=ge(i,"compassEvt");S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:o}),b=Math.atan2(-l.y,l.x);const _=new p;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new O,P=u.getPickRay(_,E),T=c.globe.pick(P,c,s);C=g(T)?x.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,r):x.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,r);let M=y.clone(u.transform,a);u.lookAtTransform(C),w=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(M),h=function(e){const r=o.getBoundingClientRect(),s=new p((r.right-r.left)/2,(r.bottom-r.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-r.left,e.clientY-r.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-r.left,e.changedTouches[0].clientY-r.top));const d=p.subtract(l,s,n),m=Math.atan2(-d.y,d.x)-b,v=f.zeroToTwoPi(w-m);u=i.viewer.scene.camera,M=y.clone(u.transform,a),u.lookAtTransform(C);const h=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-h),u.lookAtTransform(M),S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:o})},v=function(e){document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),h=void 0,v=void 0,S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:o})},document.addEventListener("mousemove",h,!1),document.addEventListener("touchmove",h,!1),document.addEventListener("mouseup",v,!1),document.addEventListener("touchend",v,!1)},j=(e,o)=>{const{Cartesian2:r,defined:s,Math:l,Matrix4:u,ScreenSpaceEventType:d,Transforms:p}=Cesium;g.removeInputAction(d.MOUSE_MOVE),g.removeInputAction(d.LEFT_UP),f=void 0,y=void 0,x=l.PI_OVER_TWO-Math.atan2(-o.y,o.x),x=x<0?0:x,x=x>l.PI_OVER_TWO?l.PI_OVER_TWO:x;const m=i.viewer.scene,v=m.camera,h=new r;h.x=m.canvas.clientWidth/2,h.y=m.canvas.clientHeight/2;let b=v.pickEllipsoid(h,m.globe.ellipsoid);if(!s(b))for(;h.y<m.canvas.clientHeight;)h.y+=5,b=v.pickEllipsoid(h,m.globe.ellipsoid);const C=ge(i,"compassEvt");C&&t("compassEvt",{type:"tilt",camera:m.camera,status:"start",target:e}),c(b)&&s(b)&&(O=p.eastNorthUpToFixedFrame(b,m.globe.ellipsoid)),f=o=>{const s=e.getBoundingClientRect(),c=new Cesium.Cartesian2((s.right-s.left)/2,(s.bottom-s.top)/2),d=r.clone(o.endPosition),p=r.subtract(d,c,n);let v=l.PI_OVER_TWO-Math.atan2(-p.y,p.x);v=v<0?0:v,v=v>l.PI_OVER_TWO?l.PI_OVER_TWO:v;const h=i.viewer.scene.camera,g=u.clone(h.transform,a);h.lookAtTransform(O);const f=v-x;h.rotateUp(f),x=v,h.lookAtTransform(g);let y=Math.ceil(v/(Math.PI/40));y=y>19?19:y;const b=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][y];S.value=b.x,_.value=b.y,C&&t("compassEvt",{type:"tilt",camera:m.camera,status:"changing",target:e})},y=function(i){g.removeInputAction(d.MOUSE_MOVE),g.removeInputAction(d.LEFT_UP),f=void 0,y=void 0,C&&t("compassEvt",{type:"tilt",camera:m.camera,status:"end",target:e})},g.setInputAction(f,d.MOUSE_MOVE),g.setInputAction(y,d.LEFT_UP)};return{heading:m,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:a,defined:r,Matrix4:l,Ray:c,SceneMode:u,Transforms:d}=Cesium,{viewer:p}=i,m=p.scene,v=m.camera,h=m.screenSpaceCameraController;if(m.mode===u.MORPHING||!h.enableInputs)return!0;if(m.mode===u.COLUMBUS_VIEW&&!h.enableTranslate)return;if(m.mode===u.SCENE3D||m.mode===u.COLUMBUS_VIEW){if(!h.enableLook)return;if(m.mode===u.SCENE3D&&!h.enableRotate)return}const g=new o;g.x=m.canvas.clientWidth/2,g.y=m.canvas.clientHeight/2;const f=new c,y=v.getPickRay(g,f),b=m.globe.pick(y,m,s);if(!r(b))return void p.camera.flyHome();const C=ge(i,"compassEvt");C&&t("compassEvt",{type:"reset",camera:p.camera,status:"start",target:n.currentTarget});const w=d.eastNorthUpToFixedFrame(b||new a,p.scene.globe.ellipsoid),O=a.subtract(b||new a,v.position,new a),x=_s.createTween(m,{destination:l.multiplyByPoint(w,new a(0,0,a.magnitude(O)),new a),direction:l.multiplyByPointAsVector(w,new a(0,0,-1),new a),up:l.multiplyByPointAsVector(w,new a(0,1,0),new a),duration:e.duration,complete:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"end",target:n.currentTarget})},cancel:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"cancel",target:n.currentTarget})}});m.tweens.add(x)},handleMouseDown:e=>{var t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=fe(P))||t.hide();const{Cartesian2:o,SceneMode:a,Math:r}=Cesium;if(i.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),c=new o((l.right-l.left)/2,(l.bottom-l.top)/2);let u;e instanceof MouseEvent?(u=new o(e.clientX-l.left,e.clientY-l.top),E=new o(e.clientX,e.clientY)):e instanceof TouchEvent&&(u=new o(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top),E=new o(e.changedTouches[0].clientX,e.changedTouches[0].clientY));const d=o.subtract(u,c,n),p=o.magnitude(d);if(p>30&&p<45)I(s,d);else if(p>50&&p<70){const e=r.PI_OVER_TWO-Math.atan2(-d.y,d.x);e>=0&&e<=r.PI_OVER_TWO&&j(s,d)}else M(s,d)},handleMouseUp:e=>{const{Cartesian2:t,Math:o}=Cesium,a=e.currentTarget.getBoundingClientRect(),r=new t((a.right-a.left)/2,(a.bottom-a.top)/2),s="mouseup"===e.type?new t(e.clientX-a.left,e.clientY-a.top):new t(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top),l=t.subtract(s,r,n),c=t.magnitude(l);if(c>30&&c<45){const n=o.toDegrees(Math.atan2(-l.y,l.x)),a="mouseup"===e.type?new t(e.clientX,e.clientY):new t(e.changedTouches[0].clientX,e.changedTouches[0].clientY),r=a.x-E.x,s=a.y-E.y;if(Math.sqrt(r*r+s*s)>5)return;const c=o.toDegrees(m.value),u=Math.abs(n-c),d=i.viewer.scene;(n>0&&c>0&&c<90&&u>80&&u<100||u>260&&u<280)&&d.camera.flyTo({destination:d.camera.position,orientation:{heading:0,pitch:d.camera.pitch}})}},onTooltipBeforeShow:e=>{void 0!==h&&(e.cancel=!0)},viewerChange:T,load:async(e,t)=>(i.viewer=e,m.value=e.scene.camera.heading,T(),g=new Cesium.ScreenSpaceEventHandler(t),(()=>{const{Math:e}=Cesium,t=e.PI_OVER_TWO+i.viewer.scene.camera.pitch,n=Math.PI/2/20;let o=Math.floor(t/n);o=o>19?19:o,o=o<0?0:o,S.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].x,_.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].y})(),!0),unload:async()=>(document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),u&&u(),l&&l(),null==g||g.destroy(),!0),tiltbarLeft:S,tiltbarTop:_,tooltipRef:P}}var Ol=S({name:"VcCompassSm",props:{enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...ws},emits:{...us,compassEvt:e=>!0},setup(e,t){var i;const n=d();n.cesiumClass="VcCompassSm";const a=Xn(e,t,n);if(void 0===a)return;const{t:s}=Gn(),l=ye(n),{$services:c}=a,u=wl(e,t,n),p=Os(e),m=o(null),v=o(null),h="VcNavigationSm"===(null==(i=l.proxy)?void 0:i.$options.name),g=o(h),y=b({});f((()=>e),(e=>{w((()=>{n.mounted&&_()}))}),{deep:!0});const C=r((()=>({left:u.tiltbarLeft.value+"px",top:u.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"}))),x=r((()=>({visibility:e.autoHidden?"hidden":"visible"}))),S=r((()=>({transform:"rotate(-"+u.heading.value+"rad)",WebkitTransform:"rotate(-"+u.heading.value+"rad)"})));n.createCesiumObject=async()=>{g.value=!0;const{viewer:e}=c;return new Promise(((t,i)=>{w((()=>{if(h)t(fe(m));else{e._element.appendChild(fe(m)),t(fe(m))}}))}))},n.mount=async()=>{var e;_();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:fe(m)}),u.load(c.viewer,fe(m))},n.unmount=async()=>{var e;const{viewer:t}=c,i=t._element;return h||i.contains(fe(m))&&i.removeChild(fe(m)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:fe(m)}),u.unload()};const _=()=>{const e=p.style.value;y.left=e.left,y.top=e.top,y.transform=e.transform;const t=p.attach.value,i=fe(v);if(void 0!==i){const n=null==i?void 0:i.getBoundingClientRect();e.width=`${null==n?void 0:n.width}px`,e.height=`${null==n?void 0:n.height}px`,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(y,e)};return()=>{if(g.value){let i=[];return i=ya(t.slots.default,i),i.push(O("div",{class:"vc-compass-tilt-sm",style:x.value})),i.push(O("div",{class:"vc-compass-tiltbar-sm",style:C.value})),i.push(O("div",{class:"vc-compass-arrows-sm",style:x.value})),i.push(O("div",{ref:v,class:"vc-compass-outer-ring-sm",style:S.value},e.tooltip?O(as,{ref:u.tooltipRef,...e.tooltip,onBeforeShow:u.onTooltipBeforeShow},(()=>O("strong",{},e.tooltip.tip||s("vc.navigationSm.compass.outerTip")))):T("v-if"))),i.push(O("div",{class:"vc-arrows-e-sm",style:x.value})),i.push(O("div",{class:"vc-arrows-n-sm",style:x.value})),i.push(O("div",{class:"vc-arrows-s-sm",style:x.value})),i.push(O("div",{class:"vc-arrows-w-sm",style:x.value})),O("div",{ref:m,class:"vc-compass-sm "+p.classes.value,style:y,onDblclick:u.handleDoubleClick,onMousedown:u.handleMouseDown,onMouseup:u.handleMouseUp,onTouchend:u.handleMouseUp,onTouchstart:u.handleMouseDown},i)}return T("v-if")}}});var xl=S({name:"VcZoomControlSm",props:{...ws,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},emits:{...us,zoomEvt:e=>!0},setup(e,t){var i;const n=d();n.cesiumClass="VcZoomControlSm",n.cesiumEvents=[];const a=o(null),s=o(null),l=o(null),u=o(null),p="VcNavigationSm"===(null==(i=ye(n).proxy)?void 0:i.$options.name),m=o(p),v=b({}),h=Xn(e,t,n);if(void 0===h)return;const{t:g}=Gn(),{$services:y}=h,C=Os(e),x=function(e,{emit:t},i,n){const a=o(65),r=o(null),s=o(null),l=o(null);let u,d,p,m,v,h,g,f,y,b,C,w;const O=e=>{const{Cartesian2:o,Cartesian3:a,defined:r,Ellipsoid:s,Math:l}=Cesium,{viewer:u}=n,d=u.scene,p=d.camera,m=d.canvas,v=new o;v.x=m.clientWidth/2,v.y=m.clientHeight/2;const h=x(v);if(r(h)){const n=a.distance(p.position,h);let o=.0618*e*.2;o=n>300?o:2*o;const s=n*o,d=new a;a.subtract(h,p.position,d);const m=a.clone(p.right),g=a.dot(d,m),f=new a;a.multiplyByScalar(m,g,f),a.subtract(d,f,d),a.normalize(d,d),p.move(d,s);const y=new a;a.normalize(h,y);const b=p.pickEllipsoid(v,u.scene.globe.ellipsoid);if(c(b)&&r(b)&&!isNaN(b.x)&&!isNaN(b.y)&&!isNaN(b.z)&&!(p.positionCartographic.height<0)){a.normalize(b,b);const n=a.angleBetween(y,b);if(!l.equalsEpsilon(n,0,l.EPSILON10)){const o=a.cross(y,b,new a);p.rotate(o,n),ge(i,"zoomEvt")&&t("zoomEvt",{type:1===e?"zoomIn":"zoomOut",camera:u.camera,status:"end"})}}}},x=e=>{const{defined:t,Cartesian3:i}=Cesium,{viewer:o}=n,a=o.scene,r=a.globe,s=a.camera;if(t(r)){let n;a.pickPositionSupported&&(n=a.pickPositionWorldCoordinates(e));const o=s.getPickRay(e),l=r.pick(o,a),u=t(n)?i.distance(n,s.positionWC):Number.POSITIVE_INFINITY;return(c(l)&&t(l)?i.distance(l,s.positionWC):Number.POSITIVE_INFINITY)>u?n:l}};return{handleZoomInMouseDown:e=>{var t,i,o;const{defined:a,getTimestamp:c,SceneMode:v,ScreenSpaceEventType:h}=Cesium,{viewer:g}=n;null==(t=fe(r))||t.hide(),null==(i=fe(s))||i.hide(),null==(o=fe(l))||o.hide(),u.removeInputAction(h.LEFT_UP),a(d)&&g.clock.onTick.removeEventListener(d),p=void 0,d=void 0,c();const f=g.scene.camera;d=()=>{g.scene.mode===v.COLUMBUS_VIEW?f.zoomIn():O(1)},p=()=>{u.removeInputAction(h.LEFT_UP),a(d)&&g.clock.onTick.removeEventListener(d),p=void 0,d=void 0},u.setInputAction(p,h.LEFT_UP),m=g.clock.onTick.addEventListener(d)},handleZoomOutMouseDown:e=>{var t,i,o;null==(t=fe(r))||t.hide(),null==(i=fe(s))||i.hide(),null==(o=fe(l))||o.hide();const{defined:a,getTimestamp:c,SceneMode:d,ScreenSpaceEventType:p}=Cesium,{viewer:m}=n;u.removeInputAction(p.LEFT_UP),a(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0,c();const f=m.scene.camera;v=()=>{m.scene.mode===d.COLUMBUS_VIEW?f.zoomOut():O(-1)},h=()=>{u.removeInputAction(p.LEFT_UP),a(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0},u.setInputAction(h,p.LEFT_UP),g=m.clock.onTick.addEventListener(v)},handleZoomBarScrollMouseDown:e=>{var t,i,o;null==(t=fe(r))||t.hide(),null==(i=fe(s))||i.hide(),null==(o=fe(l))||o.hide();const{Cartesian2:c,defined:u,SceneMode:d}=Cesium,{viewer:p}=n;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,b=void 0;const m=p.scene.camera;b=()=>{const e=a.value-65;e>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):e<0&&(p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1))},f=e=>{const t=a.value,i=e.target.parentElement.getBoundingClientRect(),n=w.getBoundingClientRect(),o=new Cesium.Cartesian2;o.x="touchmove"===e.type?e.changedTouches[0].clientX-n.left:e.clientX-n.left,o.y="touchmove"===e.type?e.changedTouches[0].clientY-n.top:e.clientY-n.top;let r=new c(i.width-o.x,i.height-o.y).y-16;r=r<0?0:r,r=r>120?120:r,a.value=120-r,a.value-t>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1)},y=()=>{document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,f=void 0,b=void 0,a.value=65},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",y,!1),document.addEventListener("touchend",y,!1),C=p.clock.onTick.addEventListener(b)},load:e=>(w=e,u=new Cesium.ScreenSpaceEventHandler(e),!0),unload:()=>(document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),null==m||m(),null==g||g(),null==C||C(),null==u||u.destroy(),!0),zoombarTop:a,zoomInTooltipRef:r,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:e=>{void 0===f&&void 0===d&&void 0===v||(e.cancel=!0)}}}(0,t,n,y);f((()=>e),(e=>{w((()=>{n.mounted&&_()}))}),{deep:!0});const S=r((()=>({top:x.zoombarTop.value+"px"})));n.createCesiumObject=async()=>new Promise(((e,t)=>{m.value=!0,w((()=>{const t=fe(a),{viewer:i}=y;if(p)e(t);else{const n=i._element;c(t)&&(null==n||n.appendChild(t)),e(t)}}))})),n.mount=async()=>{var e;_();const{viewer:t}=y;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:fe(a)}),x.load(fe(a))},n.unmount=async()=>{var e;const{viewer:t}=y;if(!p){const e=t._element,i=fe(a);c(i)&&(null==e?void 0:e.contains(i))&&e.removeChild(i)}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:fe(a)}),x.unload()};const _=()=>{const t=C.style.value;if(v.left=t.left,v.top=t.top,v.transform=t.transform,v.visibility=e.autoHidden?"hidden":"visible",!p){const e=C.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(v,t)};return()=>{if(m.value){let i=[];return i=ya(t.slots.default,i),i.push(O("div",{ref:s,class:"vc-zoomin-sm",onMousedown:x.handleZoomInMouseDown,onTouchstart:x.handleZoomInMouseDown},e.tooltip?O(as,{ref:x.zoomInTooltipRef,...e.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},e.tooltip.zoomInTip||g("vc.navigationSm.zoomCotrol.zoomInTip")))):T("v-if"))),i.push(O("div",{ref:u,class:"vc-zoomout-sm",onMousedown:x.handleZoomOutMouseDown,onTouchstart:x.handleZoomOutMouseDown},e.tooltip?O(as,{ref:x.zoomInTooltipRef,...e.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},e.tooltip.zoomOutTip||g("vc.navigationSm.zoomCotrol.zoomOutTip")))):T("v-if"))),i.push(O("div",{ref:l,class:"vc-zoombar-sm",style:S.value,onMousedown:x.handleZoomBarScrollMouseDown,onTouchstart:x.handleZoomBarScrollMouseDown},e.tooltip?O(as,{ref:x.zoomInTooltipRef,...e.tooltip,onBeforeShow:x.onTooltipBeforeShow},(()=>O("strong",{},e.tooltip.zoomBarTip||g("vc.navigationSm.zoomCotrol.zoomBarTip")))):T("v-if"))),O("div",{ref:a,class:"vc-zoom-control-sm "+C.classes.value,style:v},i)}return T("v-if")}}});const Sl={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},_l={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}};var El=S({name:"VcNavigationSm",inheritAttrs:!1,props:{...ws,compassOpts:{type:[Boolean,Object],default:()=>Sl},zoomOpts:{type:[Boolean,Object],default:()=>_l}},emits:{...us,zoomEvt:e=>!0,compassEvt:e=>!0},setup(e,t){const i=d();i.cesiumClass="VcNavigationSm";const n=Xn(e,t,i);if(void 0===n)return;const a=o(!1),{$services:s}=n,l=Os(e),c=o(null),u=o(null),p=o(null),m=b({}),{emit:v}=t;f((()=>e),(()=>{w((()=>{var e,t;S(),null==(e=fe(u))||e.reload(),null==(t=fe(p))||t.reload()}))}),{deep:!0});const h=r((()=>Object.assign({},Sl,e.compassOpts))),g=r((()=>Object.assign({},_l,e.zoomOpts))),y=e=>{ge(i,"compassEvt")&&v("compassEvt",e)},C=e=>{ge(i,"zoomEvt")&&v("zoomEvt",e)};i.createCesiumObject=async()=>{var e;a.value=!0;const{viewer:t}=s;return null==(e=t.viewerWidgetResized)||e.addEventListener(x),new Promise(((e,i)=>{w((()=>{t._element.appendChild(fe(c)),e(fe(c))}))}))},i.mount=async()=>{var e;S();const{viewer:t}=s;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:fe(c)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=s,o=n._element;return o.contains(fe(c))&&o.removeChild(fe(c)),null==(e=n.viewerWidgetResized)||e.removeEventListener(x),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:fe(c)}),!0};const x=()=>{w((()=>{S()}))},S=()=>{const e=l.style.value,t=l.attach.value;m.left=e.left,m.top=e.top,m.transform=e.transform,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)"),Object.assign(m,e)};return()=>{if(a.value){let i=[];return i=ya(t.slots.default,i),h.value&&!1!==e.compassOpts&&i.push(O(Ol,{ref:u,onCompassEvt:y,...h.value})),g.value&&!1!==e.zoomOpts&&i.push(O(xl,{ref:p,onZoomEvt:C,...g.value})),O("div",{ref:c,class:"vc-navigation-sm "+l.classes.value,style:m},i)}return T("v-if")}}});var Pl=S({name:"VcOverviewMap",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}},emits:{...us,"update:modelValue":e=>!0},setup(e,t){const i=d();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{t:a}=Gn(),{$services:s}=n,l=o(null),c=o(null),u=b({}),p=o(null),m=o(null),v=Os(e),g=o(e.modelValue);let f,y,C=[];const w=r((()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts))),x=r((()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2},e.viewerOpts)));i.createCesiumObject=async()=>{const{viewer:e}=s;return e._element.appendChild(fe(l)),[fe(l),fe(m)]},i.mount=async()=>{E();const{viewer:e}=s;return e.clock.onTick.addEventListener(S),!0},i.unmount=async()=>{const{viewer:e}=s,t=e._element;return e.clock.onTick.removeEventListener(S),t.contains(fe(l))&&t.removeChild(fe(l)),!0};const S=()=>{if(f){const{viewer:t}=s,i=t.camera.computeViewRectangle(),{defined:n}=Cesium;if(!n(i))return;const o=i.expand(e.widthFactor,e.heightFactor);f.camera.flyTo({destination:o.clone(),orientation:{heading:t.camera.heading,pitch:t.camera.pitch,roll:t.camera.roll},duration:0});const{Cartesian3:a,SceneTransforms:r}=Cesium,l=a.fromRadians(i.west,i.north),c=a.fromRadians(i.east,i.north),u=a.fromRadians(i.west,i.south),d=a.fromRadians(i.east,i.south),p=f.scene,m=r.wgs84ToWindowCoordinates(p,l),v=r.wgs84ToWindowCoordinates(p,c),h=r.wgs84ToWindowCoordinates(p,u),g=r.wgs84ToWindowCoordinates(p,d);if(!(n(m)&&n(v)&&n(h)&&n(g)))return;const b=v.x-m.x,C=h.y-m.y,w=(m.x+v.x)/2-b/2,O=(m.y+h.y)/2-C/2;if(b<=0||C<=0)return;const x=new Cesium.BoundingRectangle(w,O,b,C);y.rectangle=x,y.material.uniforms.color=Pe(e.centerRectColor),y.show=!0}},_=e=>{const{viewer:t}=e;f=t;const i=t.scene.screenSpaceCameraController;i.enableRotate=!1,i.enableTranslate=!1,i.enableZoom=!1,i.enableTilt=!1,i.enableLook=!1,f.scene.highDynamicRange=!1,f.scene.globe.enableLighting=!1,f.scene.globe.showWaterEffect=!1,f.scene.globe.depthTestAgainstTerrain=!1,f.scene.skyAtmosphere.show=!1,f.scene.fog.enabled=!1,f.scene.skyBox.show=!1,f.scene.sun.show=!1,f.scene.moon.show=!1,f.scene.highDynamicRange=!1,f.scene.globe.showGroundAtmosphere=!1,y=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),y.show=!1,f.scene.primitives.add(y)},E=()=>{var t;const i=v.style.value;if(u.left=i.left,u.top=i.top,u.transform=i.transform,u["pointer-events"]="none",i.borderRadius=e.borderRadius,i.border=e.border,g.value)i.width=e.width,i.height=e.height;else{const n=/(\d+)/g.exec(e.border),o=(null==n?void 0:n.length)?parseFloat(n[0]):0,a=getComputedStyle(null==(t=fe(c))?void 0:t.$el);i.width=`${parseFloat(a.width)+parseFloat(a.padding)+o}px`,i.height=`${parseFloat(a.height)+parseFloat(a.padding)+o}px`}Object.assign(u,i)},P=()=>{g.value?M():I(),g.value=!g.value,t.emit("update:modelValue",g.value)},M=()=>{var t;const i=/(\d+)/g.exec(e.border),n=(null==i?void 0:i.length)?parseFloat(i[0]):0,o=getComputedStyle(null==(t=fe(c))?void 0:t.$el);u.width=`${parseFloat(o.width)+parseFloat(o.padding)+n}px`,u.height=`${parseFloat(o.height)+parseFloat(o.padding)+n}px`},I=()=>{u.width=e.width,u.height=e.height};return h((()=>{C.forEach((e=>e())),C=[]})),()=>{const i=[];return i.push(O(Gr,{ref:c,class:"toggle toggle-"+e.position+(g.value?"":" minimized "),flat:!0,dense:!0,icon:w.value.icon,size:w.value.size,style:{color:w.value.color,background:w.value.background,"pointer-events":"auto"},onClick:P},(()=>w.value.tooltip?O(as,{ref:p,...w.value.tooltip},(()=>O("strong",{},w.value.tooltip.tip||a("vc.overview."+(g.value?"hidden":"show"))))):T("v-if")))),i.push(O(bs,{ref:m,...x.value,onReady:_},(()=>fa(t.slots.default)))),O("div",{ref:l,class:"vc-overview-map "+v.classes.value,style:u},i)}}});class Tl{constructor(e){this.id=e.id||Cesium.createGuid()}static getBoundingSphere(e,t){var i,n,o,a;const{Primitive:r,ClassificationPrimitive:s,GroundPolylinePrimitive:l,GroundPrimitive:c,Polyline:u}=Cesium;let d;return e instanceof s||e instanceof l?d=null==(n=null==(i=e._primitive)?void 0:i._boundingSphereWC)?void 0:n[0]:e instanceof r?d=null==(o=e._boundingSphereWC)?void 0:o[0]:e instanceof c?d=null==(a=e._boundingVolumes)?void 0:a[0]:e instanceof u?d=e._boundingVolumeWC:e instanceof Cesium.Entity&&(d=new Cesium.BoundingSphere,t.dataSourceDisplay.getBoundingSphere(e,!0,d)),d}static fromPickedFeature(e,t,i,n){var o;const a=new Tl({id:e.id});return e.position?a.position=e.position:e instanceof Cesium.Model?a.position=Cesium.Matrix4.getTranslation(e.modelMatrix,new Cesium.Cartesian3):e instanceof Cesium.Cesium3DTileset?a.position=Cesium.Matrix4.getTranslation(t.content._contentModelMatrix,new Cesium.Cartesian3):a.position=null==(o=Tl.getBoundingSphere(e,i))?void 0:o.center,a.cesiumObject=e,a.pickedFeature=t,a.windowPosition=n,a}static fromImageryLayerFeature(e,t){const i=new Tl({id:e.name});return i.name=e.name,i.description=e.description,i.properties=e.properties,i.data=e.data,i.imageryLayer=e.imageryLayer,i.position=t.scene.globe.ellipsoid.cartographicToCartesian(e.position),i.coords=e.coords,i}}class Ml{constructor(){const{knockout:e}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,e.track(this,["isLoading","features","error"])}}var Il=S({name:"VcSelectionIndicator",props:{show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},limit:{type:Number,default:25}},emits:{...us,pickEvt:e=>!0},setup(e,t){const i=d();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const a=Xn(e,t,i);if(void 0===a)return;const{$services:r}=a;let s;const l=function(e,t,i){const a="-1000px",r=o(a),s=o(a),l=o(),c=o();let u,d;const p=o(null),m=o(null);let v=[],g=!1;const y=b({top:s.value,left:r.value,transform:"",opacity:1});v.push(f(m,(t=>{var n,o,a;const r=t,{defined:s}=Cesium;if(s(r)&&s(null==r?void 0:r.position)){const{viewer:t}=i;l.value=(null==r?void 0:r.position)instanceof Cesium.Cartesian3?null==r?void 0:r.position:null==(n=null==r?void 0:r.position)?void 0:n.getValue(t.clock.currentTime),P(),null==(o=e.proxy)||o.$emit("pickEvt",r)}else T(),null==(a=e.proxy)||a.$emit("pickEvt",r);E()}))),v.push(f(p,(e=>{const{defined:t,Entity:i}=Cesium,n=e;if(t(n)){const e=new i({id:"__Vc__Pick__Location__"});e.position=n.pickPosition,m.value=e}else m.value=void 0;w((()=>{t(n.allFeaturesAvailablePromise)&&n.allFeaturesAvailablePromise.then((()=>{var e,i,o;const a=n.features.filter((e=>t(e)));m.value=a.filter(C)[0],!t(m.value)&&a.length>0&&(m.value=a[0],g&&m.value instanceof Tl&&(null==(o=null==(i=null==(e=m.value)?void 0:e.pickedFeature)?void 0:i.primitive)?void 0:o.position)&&(m.value.position=m.value.pickedFeature.primitive.position))}))}))})));const C=e=>{const{defined:t}=Cesium;return t(e.properties)||t(e.description)},O=(e,t,i,n,o,a,r,s)=>{const{defined:l,defaultValue:c,when:u}=Cesium;r=c(r,!1);const d=new Ml;return d.providerCoords=e,d.pickPosition=t,d.allFeaturesAvailablePromise=Promise.all(n).then((function(e){d.isLoading=!1,d.features=e.reduce(function(e,i,n){if(!l(i))return e;const r=i.map(function(e){return l(o)&&(e.imageryLayer=o[n]),l(e.position)||(e.position=s.scene.globe.ellipsoid.cartesianToCartographic(t)),l(e.position.height)&&0!==e.position.height||(e.position.height=a),Tl.fromImageryLayerFeature(e,s)}.bind(this));return e.concat(r)}.bind(this),c(i,[]))})).catch((function(){d.isLoading=!1,d.error="An unknown error occurred while picking features."})),d},x=e=>{var o,a;const r=[],{defined:s}=Cesium,{viewer:l}=i,c=l.scene.drillPick(e,t.limit);for(let t=0;t<c.length;++t){const i=c[t];let u=i.id;!s(u)&&s(i.primitive)&&(u=i.primitive);const d=null!=(a=null==(o=null==i?void 0:i.primitive)?void 0:o._catalogItem)?a:null==u?void 0:u._catalogItem;if("function"==typeof(null==d?void 0:d.getFeaturesFromPickResult)){const t=d.getFeaturesFromPickResult.bind(d)(e,i);t&&(Array.isArray(t)?r.push(...t):r.push(t))}else{const t=i;if(t.id){if(n(t.id)&&t.id[0]instanceof Cesium.Entity){g=!0,t.id.forEach((i=>{const n=Tl.fromPickedFeature(i,t,l,e);r.push(n)}));continue}if(t.id instanceof Cesium.Entity){const i=Tl.fromPickedFeature(t.id,t,l,e);r.push(i),g=!1;continue}g=!1}if(t.primitive){const i=Tl.fromPickedFeature(t.primitive,t,l,e);r.push(i)}else if(t.collection){const i=Tl.fromPickedFeature(t.collection,t,l,e);r.push(i)}}}return r},S=()=>{const e={},{viewer:t}=i,n=t.scene,o=function(t,i,n,o,a,r,s){if(i){const l=i.call(t,n,o,a,r,s);return t.url&&(e[t.url]={x:n,y:o,level:a}),t.pickFeatures=i,l}return Promise.reject(!1)};for(let i=0;i<n.imageryLayers.length;i++){const e=n.imageryLayers.get(i).imageryProvider;e.pickFeatures=o.bind(void 0,e,e.pickFeatures)}return e},_=(e,t)=>{const{viewer:n}=i;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(n.scene,e,t)},E=()=>{const{defined:e,Cartesian2:n}=Cesium;if(t.show&&e(l.value)){const o=_(l.value,new n);if(e(o)){const{viewer:e}=i,n=e.container,a=n.clientWidth,r=n.clientHeight,s=t.width,l=.5*s;o.x=Math.min(Math.max(o.x,-s),a+s)-l,o.y=Math.min(Math.max(o.y,-s),r+s)-l,y.left=Math.floor(o.x+.25)+"px",y.top=Math.floor(o.y+.25)+"px"}}},P=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(u)){if(d)return;u.cancelTween(),u=void 0}d=!0,u=e.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){y.opacity=e.opacity,y.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){u=void 0},cancel:function(){u=void 0}})},T=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(u)){if(!d)return;u.cancelTween(),u=void 0}d=!1,u=e.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){y.opacity=e.opacity,y.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){u=void 0},cancel:function(){u=void 0}})};return h((()=>{v.forEach((e=>e())),v=[]})),Object.assign(e.proxy,{selectedFeature:m,position:l,computeScreenSpacePosition:_,update:E,animateAppear:P,animateDepart:T,getPickedFeatures:()=>p}),{pickFromScreenPosition:e=>{const{defined:n}=Cesium,{viewer:o}=i,a=o.scene,r=a.camera.getPickRay(e);let s=a.globe.pick(r,a);if(!n(s)&&(s=a.pickPosition(e),!n(s)))return;const l=a.globe.ellipsoid.cartesianToCartographic(s||new Cesium.Cartesian3),c=x(e),u=S(),d=t.allowFeatureInfoRequests?a.imageryLayers.pickImageryLayerFeatures(r,a):Promise.resolve(),m=O(u,s,c,[d],void 0,l.height,!1,o);p.value=m},rootRef:c,rootStyle:y,onPostRender:()=>{E()}}}(i,e,r);return i.createCesiumObject=async()=>{const{viewer:e}=r;return e._element.appendChild(fe(l.rootRef)),fe(l.rootRef)},i.mount=async()=>{const{viewer:e}=r,{ScreenSpaceEventHandler:t,ScreenSpaceEventType:i}=Cesium;return s=new t(e.canvas),s.setInputAction((e=>{l.pickFromScreenPosition(e.position)}),i.LEFT_CLICK),e.scene.postRender.addEventListener(l.onPostRender),!0},i.unmount=async()=>{const{viewer:e}=r,t=e._element;return t.contains(fe(l.rootRef))&&t.removeChild(fe(l.rootRef)),e.scene.postRender.removeEventListener(l.onPostRender),s.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),s.destroy(),s=void 0,!0},()=>O("div",{ref:l.rootRef,class:"vc-selection-indicator",style:l.rootStyle},O("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[Fs,Gs,qs,Js,ml,gl,Cl,Ol,xl,El,Pl,Il].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const jl=Fs,Ll=Gs,Al=qs,Dl=Js,Rl=ml,kl=gl,Bl=Cl,Nl=Ol,Vl=xl,zl=El,Fl=Pl,Hl=Il,Ul={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Wl={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},Gl={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},$l={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},Zl={width:2,arcType:0,ellipsoid:void 0},Yl={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},ql={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},Xl={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Gl,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},ql),remove:Object.assign({},ql,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},Ql={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Gl,polylineOpts:Zl,primitiveOpts:Wl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},disableDepthTest:!1},Jl={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Gl,polylineOpts:Zl,primitiveOpts:Wl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),insert:Object.assign({},ql,{icon:"vc-icons-insert"}),remove:Object.assign({},ql,{icon:"vc-icons-remove"}),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Yl,labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},Kl={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Gl,polylineOpts:Zl,primitiveOpts:Object.assign({},Wl,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:{show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),insert:Object.assign({},ql,{icon:"vc-icons-insert"}),remove:Object.assign({},ql,{icon:"vc-icons-remove"}),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!0,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:Yl,labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},ec=Object.assign({},Kl,{pointOpts:Object.assign({},Gl,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Yl,labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5],text:"1dsa"})}),tc=Object.assign({},ec,{edge:360}),ic=Object.assign({},ec,{edge:6,loop:!0}),nc=Object.assign({},Ul,{icon:"vc-icons-clear",color:"red"}),oc=Object.assign({},Ul,{icon:"vc-icons-drawing-regular"}),ac=Object.assign({},Ul,{icon:"vc-icons-drawing-circle"}),rc={...zn,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean},sc={...ut,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>nc}},lc=Object.assign({},Ul,{icon:"vc-icons-measure-distance"}),cc=Object.assign({},Ql,{labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Zo,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),uc=Object.assign({},Ul,{icon:"vc-icons-measure-component-distance"}),dc=Object.assign({},cc,{showComponentLines:!0,xLabelOpts:Yl,xAngleLabelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},Yl,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},Yl,{verticalOrigin:-1,pixelOffset:[0,9]})}),pc=Object.assign({},Ul,{icon:"vc-icons-measure-polyline-distance"}),mc=Object.assign({},Jl,{measureUnits:new Zo,labelOpts:Yl,labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),vc=Object.assign({},Ul,{icon:"vc-icons-measure-horizontal-distance"}),hc=Object.assign({},mc,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Wl,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),gc=Object.assign({},Ul,{icon:"vc-icons-measure-vertical-distance"}),fc=Object.assign({},Ql,{labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Zo,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),yc=Object.assign({},Ul,{icon:"vc-icons-measure-height-from-terrain"}),bc=Object.assign({},Xl,{polylineOpts:Zl,labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},measureUnits:new Zo,decimals:{distance:2},locale:void 0,primitiveOpts:Wl}),Cc=Object.assign({},Ul,{icon:"vc-icons-measure-area"}),wc=Object.assign({},Kl,{labelOpts:Yl,labelsOpts:Object.assign({},Yl,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new Zo,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),Oc=Object.assign({},Ul,{icon:"vc-icons-measure-point-coordinates"}),xc=Object.assign({},Xl,{heightReference:1,measureUnits:new Zo,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},Yl,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),Sc=Object.assign({},Ul,{icon:"vc-icons-drawing-rectangle"}),_c=Object.assign({},wc,{pointOpts:Object.assign({},Gl,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),Ec=Object.assign({},_c,{edge:6,loop:!0}),Pc=Object.assign({},_c,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),Tc=Object.assign({},Ul,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Mc=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],Ic={...sc,measurements:{type:Array,default:()=>Mc,validator:e=>{let t=!0;return e.forEach((e=>{Mc.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Tc},distanceActionOpts:{type:Object,default:()=>lc},distanceMeasurementOpts:{type:Object,default:()=>cc},componentDistanceActionOpts:{type:Object,default:()=>uc},componentDistanceMeasurementOpts:{type:Object,default:()=>dc},polylineActionOpts:{type:Object,default:()=>pc},polylineMeasurementOpts:{type:Object,default:()=>mc},horizontalActionOpts:{type:Object,default:()=>vc},horizontalMeasurementOpts:{type:Object,default:()=>hc},verticalActionOpts:{type:Object,default:()=>gc},verticalMeasurementOpts:{type:Object,default:()=>fc},heightActionOpts:{type:Object,default:()=>yc},heightMeasurementOpts:{type:Object,default:()=>bc},areaActionOpts:{type:Object,default:()=>Cc},areaMeasurementOpts:{type:Object,default:()=>wc},pointActionOpts:{type:Object,default:()=>Oc},pointMeasurementOpts:{type:Object,default:()=>xc},rectangleActionOpts:{type:Object,default:()=>Sc},rectangleMeasurementOpts:{type:Object,default:()=>_c},regularActionOpts:{type:Object,default:()=>oc},regularMeasurementOpts:{type:Object,default:()=>Ec},circleActionOpts:{type:Object,default:()=>ac},circleMeasurementOpts:{type:Object,default:()=>Pc}},jc=re(Ic);var Lc=S({name:"VcOverlayHtml",props:{...Ge,...at,...ut,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},emits:{...us,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0},setup(e,t){const i=d();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:a}=n,r=o(!1),s=o(null),l=b({}),c=o(null),u=o(null),p=o(null);let m=[];m.push(f((()=>e.position),(e=>{u.value=Ce(e,a.viewer.scene.globe.ellipsoid)}))),m.push(f((()=>e.pixelOffset),(e=>{c.value=be(e)}))),m.push(f((()=>e.show),(e=>{l.display=e?"block":"none"}))),i.createCesiumObject=async()=>fe(s),i.mount=async()=>{const{viewer:t}=a;return r.value=!0,x(),c.value=be(e.pixelOffset),u.value=Ce(e.position,t.scene.globe.ellipsoid),t.scene.preRender.addEventListener(v),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.preRender.removeEventListener(v),r.value=!1,S(),!0};const v=()=>{const{viewer:t}=a;if(u.value){const i=t.scene.cartesianToCanvasCoordinates(u.value,{});if(Cesium.defined(i)&&!Cesium.Cartesian2.equals(p.value,i))if(l.left=i.x+c.value.x+"px",l.top=i.y+c.value.y+"px",e.autoHidden){const i=t.camera.position,n=t.scene.globe.ellipsoid.cartesianToCartographic(i);if(Cesium.defined(n)){let o=n.height;o+=1*t.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(i,u.value)>o||!e.show?l.display="none":l.display="block"}}else l.display="block";p.value=i}};h((()=>{m.forEach((e=>e())),m=[]}));const g=()=>r.value?O("div",{ref:s,class:"vc-html-container"+(e.customClass?" "+e.customClass:""),style:l,onMouseenter:C,onMouseleave:w,onClick:y},fa(t.slots.default)):T("v-if"),y=e=>{t.emit("click",e)},C=e=>{t.emit("mouseenter",e)},w=e=>{t.emit("mouseleave",e)},{showPortal:x,hidePortal:S,renderPortal:_}=pr(i,s,(()=>g()));return e.teleport&&e.teleport.to&&!e.teleport.disabled?_:()=>g()}});var Ac=S({name:"VcEntity",props:{id:String,name:String,availability:Object,...ut,description:[String,Object],...Ge,orientation:Object,...$e,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...zn},emits:{...us,...ds,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0},setup(e,t){const i=d();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=Xn(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.mount=async()=>{var e;const t=null==(e=null==o?void 0:o.entities)?void 0:e.add(i.cesiumObject);return null==o?void 0:o.entities.contains(t)},i.unmount=async()=>{var e;return null==(e=null==o?void 0:o.entities)?void 0:e.remove(i.cesiumObject)};return Object.assign(i.proxy,{__updateGraphics:(e,t)=>(ge(i,t)?a(t,e):i.cesiumObject&&(i.cesiumObject[t.substring(7)]=e),e&&(e._vcParent=i.cesiumObject),!0)}),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});Ac.install=e=>{e.component(Ac.name,Ac)};const Dc=Ac;var Rc=S({name:"VcLayerImagery",props:{imageryProvider:Object,...Ri,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...ut,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...Ti,...Mi,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number},emits:{...us,"update:imageryProvider":e=>!0},setup(e,t){const i=d();i.cesiumClass="ImageryLayer",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.createCesiumObject=async()=>{const t=n.transformProps(e),i=e.imageryProvider||{};return new Cesium.ImageryLayer(i,t)},i.mount=async()=>{const{viewer:t}=o,n=i.cesiumObject;return n.sortOrder=e.sortOrder,t.imageryLayers.add(n),!t.isDestroyed()&&t.imageryLayers.contains(n)},i.unmount=async()=>{const{viewer:e}=o,t=i.cesiumObject;return!e.isDestroyed()&&e.imageryLayers.remove(t)};return Object.assign(i.proxy,{__updateProvider:e=>{var t;if(N(e))return null==(t=i.unmount)?void 0:t.call(i);i.cesiumObject._imageryProvider=e;ge(i,"update:imageryProvider")&&a("update:imageryProvider",e);return!0}}),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Rc.install=e=>{e.component(Rc.name,Rc)};const kc=Rc;var Bc=S({name:"VcPrimitiveClassification",props:{...an,...nn,...ut,...rn,...tn,...sn,...en,...Qi,...Ji,...Pt,...cn,...Ki,...zn},emits:vs,setup(e,t){var i;const n=d();n.cesiumClass="ClassificationPrimitive",Oo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(o),style:{display:"none !important"}},fa(t.slots.default)):T(ne(o))}});var Nc=S({name:"VcPrimitiveGround",props:{...an,...nn,...ut,...rn,...tn,...sn,...en,...Qi,...Ji,...Pt,...cn,...Ki,...zn},emits:vs,setup(e,t){var i;const n=d();n.cesiumClass="GroundPrimitive",Oo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(o),style:{display:"none !important"}},fa(t.slots.default)):T(ne(o))}});var Vc=S({name:"VcPrimitiveGroundPolyline",props:{...an,...nn,...ut,...tn,...sn,...en,...Qi,...Ji,...Pt,...cn,...Ki,...zn},emits:vs,setup(e,t){var i;const n=d();n.cesiumClass="GroundPolylinePrimitive",Oo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(o),style:{display:"none !important"}},fa(t.slots.default)):T(ne(o))}});var zc=S({name:"VcPrimitiveModel",props:{...Ii,basePath:String,...ut,...ln,...lt,...ei,...ti,...pn,...Qi,...ii,...Ji,...oi,...wt,...cn,...vn,...tt,...un,...Je,...qe,...si,...li,...ai,...ri,...mi,dequantizeInShader:{type:Boolean,default:!0},...ci,...ui,...Mn,...In,...jn,...Ni,...Ln,showOutline:{type:Boolean,default:!0},...zn},emits:vs,setup(e,t){const i=d();i.cesiumClass="Model";const n=Oo(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.Model.fromGltf(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Fc=S({name:"VcPrimitive",props:{...an,...nn,...on,...ut,...ln,...rn,...tn,...sn,...en,...Qi,cull:{type:Boolean,default:!0},...Ji,...cn,...wt,...zn},emits:vs,setup(e,t){var i;const n=d();n.cesiumClass="Primitive",Oo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>{var e;return t.slots.default?O("i",{class:ne(o),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});const Hc={...vs,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0};var Uc=S({name:"VcPrimitiveTileset",props:{url:[String,Object],...ut,...ln,...wt,..._i,maximumMemoryUsage:{type:Number,default:512},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...mi,...Pt,...Bi,pointCloudShading:Object,...ci,...Tn,...Mn,...In,...jn,...Ln,showOutline:{type:Boolean,default:!0},vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...vn,...cn,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...zn,enableModelExperimental:{type:Boolean,default:!1},customShader:{type:Object},properties:{type:Array},fragmentShader:String,replaceFS:Boolean},emits:Hc,setup(e,t){const i=d();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],Oo(e,t,i),i.proxy.creatingPromise.then((e=>{const t=e.cesiumObject;i.removeCallbacks.push(t.tileVisible.addEventListener(n))}));const n=t=>{const i=t.content,n=i._model;for(let o=0;o<i.featuresLength;o++){const t=i.getFeature(o);e.properties&&e.properties.length&&e.properties.forEach((e=>{t.hasProperty(e.key)&&t.getProperty(e.key)===e.keyValue&&t.setProperty(e.propertyName,e.propertyValue)}))}e.fragmentShader&&n&&n._sourcePrograms&&n._rendererResources&&(Object.keys(n._sourcePrograms).forEach((t=>{const i=n._sourcePrograms[t],o=n._rendererResources.sourceShaders;if(e.replaceFS)o[i.fragmentShader]=e.fragmentShader;else{const t=o[i.fragmentShader];o[i.fragmentShader]=t.replace("gl_FragColor = vec4(color, 1.0);\n}",`gl_FragColor = vec4(color, 1.0);\n             ${e.fragmentShader}\n}\n            `)}})),n._shouldRegenerateShaders=!0)};return()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Wc={...vs,complete:e=>!0};var Gc=S({name:"VcPrimitiveParticle",props:{...ut,updateCallback:Function,emitter:Object,...ln,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...qe,...wn,...On,...nt,..._n,...xn,...Sn,...dt,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...zn},emits:Wc,setup(e,t){const i=d();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],Oo(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var $c=S({name:"VcViewshed",props:{...un,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String,default:"\n  uniform sampler2D colorTexture;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n  uniform float u_isShed;\n  uniform sampler2D shadowMap_depthTexture;\n  uniform mat4 shadowMap_matrix;\n  uniform vec4 shadowMap_lightPositionEC;\n  uniform vec3 shadowMap_lightDirectionEC;\n  uniform float u_radius;\n  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n  uniform float czzj;\n  uniform float dis;\n  uniform float spzj;\n  uniform float mixNum;\n  uniform vec3 shadowMap_lightUp;\n  uniform vec3 shadowMap_lightDir;\n  uniform vec3 shadowMap_lightRight;\n  varying vec2 v_textureCoordinates;\n  vec4 toEye(in vec2 uv, in float depth){\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  float getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){\n    return texture2D(shadowMap, uv).r;\n  }\n  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){\n    return step(depth, _czm_sampleShadowMap(shadowMap, uv));\n  }\n  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n    depth -= depthBias;\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility =\n    (\n    _czm_shadowDepthCompare(shadowMap, uv, depth)\n    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0)\n    ;\n    return visibility;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float ptm(vec3 pt){\n    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);\n  }\n  void main()\n  {\n    const float PI = 3.141592653589793;\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    gl_FragColor = color;\n    if ( u_isShed < 0.5 )\n        return;\n    vec4 currD = texture2D(czm_globeDepthTexture, v_textureCoordinates);\n    if( currD.r >= 1.0 )\n        return;\n\n    float depth = getDepth(currD);\n    vec4 positionEC = toEye(v_textureCoordinates, depth);\n    vec3 normalEC = vec3(1.0);\n    czm_shadowParameters shadowParameters;\n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n    shadowParameters.depthBias *= max(depth * 0.01, 1.0);\n    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);\n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);\n    vec4 shadowPosition = shadowMap_matrix * positionEC;\n    shadowPosition /= shadowPosition.w;\n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))\n      return;\n\n    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);\n    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);\n    if(distance(lw.xyz,vw.xyz)> u_radius)\n        return;\n\n    shadowParameters.texCoords = shadowPosition.xy;\n    shadowParameters.depth = shadowPosition.z;\n    shadowParameters.nDotL = nDotL;\n    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);\n    if(visibility > 0.3 ){\n      gl_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);\n    }\n    else{\n      if(abs(shadowPosition.z-0.0)<0.01){\n        return;\n      }\n      gl_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);\n    }\n  }\n"},uniforms:Object},emits:us,setup(e,t){const i=d();i.cesiumClass="VcViewshed";const n=Xn(e,t,i);if(void 0===n)return;const o=[];let a;o.push(f([()=>e.startPosition,()=>e.endPosition],(([e,t])=>{i.mounted&&r(e,t)}),{deep:!0})),o.push(f((()=>e.fovH),(e=>{if(!i.mounted)return;i.cesiumObject.fovH=e}))),o.push(f((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(f((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(f((()=>e.offsetHeight),(e=>{if(!i.mounted)return;i.cesiumObject.offsetHeight=e}))),o.push(f((()=>e.visibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.visibleColor=Pe(e)}))),o.push(f((()=>e.invisibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.invisibleColor=Pe(e)}))),o.push(f((()=>e.showGridLine),(e=>{if(!i.mounted)return;i.cesiumObject.showGridLine=e}))),o.push(f((()=>e.show),(e=>{if(!i.mounted)return;i.cesiumObject.enabled=e}))),h((()=>{o.forEach((e=>e())),o.length=0})),i.createCesiumObject=async()=>{const t=n.$services.viewer,i=new sa(t.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:Pe(e.visibleColor),invisibleColor:Pe(e.invisibleColor),showGridLine:e.showGridLine});return i._viewshedShadowMap.cascadesEnabled=!1,i._viewshedShadowMap.softShadows=!1,i._viewshedShadowMap.normalOffset=!1,i._viewshedShadowMap.fromLightSource=!1,i._viewshedShadowMap.enabled=!1,i.fovH=Cesium.Math.toRadians(e.fovH),i.fovV=Cesium.Math.toRadians(e.fovV),i.offsetHeight=e.offsetHeight,i.showGridLine=e.showGridLine,i.enabled=e.show,i.lineColor=Pe(e.lineColor),i.faceColor=Pe(e.faceColor),i},i.mount=async()=>{const t=n.$services.viewer,o=i.cesiumObject,{Cartesian4:s,PostProcessStage:l,Cartesian2:c}=Cesium;r(e.startPosition,e.endPosition),a=new l({fragmentShader:e.fragmentShader,uniforms:e.uniforms||{u_color1:function(){return o.visibleColor},u_color2:function(){return o.invisibleColor},u_isShed:function(){return o.shadowMap.enabled},u_radius:function(){return o.lightCamera.frustum.far},shadowMap_depthTexture:function(){return o.shadowMap.enabled?o.shadowMap._shadowMapTexture:t.scene.context.defaultTexture},shadowMap_matrix:function(){return o.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return o.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return o.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return o.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return o.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return o.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const e=o.shadowMap._pointBias;return s.fromElements(e.normalOffsetScale,o.shadowMap._distance,o.shadowMap.maximumDistance,0,new s)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const e=o.shadowMap._pointBias,t=new c;return t.x=1/o.shadowMap._textureSize.x,t.y=1/o.shadowMap._textureSize.y,s.fromElements(t.x,t.y,e.depthBias,e.normalShadingSmooth,new s)},czzj:function(){return o.lightCamera.frustum.fov},spzj:function(){return o.lightCamera.frustum.fov},mixNum:function(){return.5},shadowMap_lightUp:function(){return o.lightCamera.up},shadowMap_lightDir:function(){return o.lightCamera.direction},shadowMap_lightRight:function(){return o.lightCamera.right}}}),t.scene.postProcessStages.add(a);const u=n.$services.primitives;return u&&u.add(o)},i.unmount=async()=>{const e=n.$services.viewer;a&&e.scene.postProcessStages.remove(a);const t=n.$services.primitives,o=i.cesiumObject;return t&&t.remove(o)};const r=(e,t)=>{const n=i.cesiumObject,{Cartesian3:o}=Cesium;let a=o.subtract(t,e,new o);const r=o.magnitudeSquared(a),s=o.distance(t,e);if(r<.01||n.frustum.near>s)n.enabled=!1;else{n.enabled=!0,a=o.normalize(a,a);const i=o.normalize(t,new o);n.setView({destination:e,orientation:{direction:a,up:i}}),n.frustum.far=Math.max(s,1.1)}};return()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Bc,Nc,Vc,zc,Fc,Uc,Gc].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Zc=Bc,Yc=Nc,qc=Vc,Xc=zc,Qc=Fc,Jc=Uc,Kc=Gc,eu=$c;var tu=S({name:"VcOverlayHeatmap",props:{...ut,...Ri,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}},emits:us,setup(e,t){var i;const n=d();n.cesiumClass="VcOverlayHeatmap",n.cesiumEvents=[];const a=Xn(e,t,n);if(void 0===a)return;const s=o(null),l=o(null),c={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},u=o(null),p=o(null),m=o(null),v=o(null),g=o(null),y=o(!1),b=o(null);null==(i=ye(n).proxy.creatingPromise)||i.then((()=>{y.value=!0}));const C=r((()=>Object.assign({},c,e.options)));let w=[];w.push(f((()=>m),(e=>{p.value.fabric.uniforms.image=e.value,g.value.options.material.fabric.uniforms.image=e.value}),{deep:!0})),w.push(f((()=>e.data),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;Array.isArray(e)&&Array.isArray(t)?(_(e,i),m.value=i.getDataURL()):a.reload()}),{deep:!0})),w.push(f((()=>[e.max,e.min]),(e=>{const t=n.cesiumObject;t.setDataMax(e[0]||0),t.setDataMin(e[1]||0),m.value=t.getDataURL()}))),w.push(f((()=>[e.type,e.projection,e.rectangle]),(e=>{a.reload()}))),w.push(f((()=>e.options),(e=>{const t=n.cesiumObject;t.configure(e),m.value=t.getDataURL()}),{deep:!0})),n.createCesiumObject=async()=>{const{WebMercatorProjection:t,GeographicProjection:i}=Cesium;l.value="3857"===e.projection?new t:new i;const n=x();b.value=S(e.rectangle);const o=document.createElement("div");if(Cesium.defined(n)&&o.setAttribute("id",n),o.setAttribute("style","width: "+b.value.width+"px; height: "+b.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(o),C.value.container=o,e.segments.length){C.value.gradient={};const t=e.max-e.min;for(let i=0;i<e.segments.length;i++)C.value.gradient[""+(e.segments[i][0]-e.min)/t]=Pe(e.segments[i][1]).toCssColorString()}const a=L.create(C.value);return o.children[0].setAttribute("id",n+"-hm"),Array.isArray(e.data)&&(_(e.data,a),p.value={fabric:{type:"Image",uniforms:{image:m.value,transparent:!0}}},g.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:m.value}}}}}),a},n.unmount=async()=>(document.body.removeChild(n.cesiumObject._config.container),!0);const x=e=>{let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<(e||8);n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},S=e=>{const t=Ie(e),i=l.value.project(new Cesium.Cartographic(t.west,t.south)),n=l.value.project(new Cesium.Cartographic(t.east,t.north)),o={north:n.y,east:n.x,south:i.y,west:i.x};let a=o.east>0&&o.west<0?o.east+Math.abs(o.west):Math.abs(o.east-o.west),r=o.north>0&&o.south<0?o.north+Math.abs(o.south):Math.abs(o.north-o.south),s=1;a>r&&a>C.value.maxCanvasSize?(s=a/C.value.maxCanvasSize,r/s<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize)):r>a&&r>C.value.maxCanvasSize?(s=r/C.value.maxCanvasSize,r/s<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize)):a<r&&a<C.value.minCanvasSize?(s=a/C.value.minCanvasSize,r/s>C.value.maxCanvasSize&&(s=r/C.value.maxCanvasSize)):r<a&&r<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize,a/s>C.value.maxCanvasSize&&(s=a/C.value.maxCanvasSize)),a/=s,r/=s,Cesium.defined(C.value.radius)||(C.value.radius=a>r?a/C.value.radiusFactor:r/C.value.radiusFactor);const c=(C.value.radius||1)*C.value.spacingFactor,d=o.west,p=o.south;a=Math.round(a+2*c),r=Math.round(r+2*c),o.west-=c*s,o.east+=c*s,o.south-=c*s,o.north+=c*s;const m=l.value.unproject(new Cesium.Cartesian3(o.west,o.south)),v=l.value.unproject(new Cesium.Cartesian3(o.east,o.north)),h={north:Cesium.Math.toDegrees(v.latitude),east:Cesium.Math.toDegrees(v.longitude),south:Cesium.Math.toDegrees(m.latitude),west:Cesium.Math.toDegrees(m.longitude)};return u.value=h,{height:r,width:a,factor:s,xoffset:d,yoffset:p,spacing:c}},_=(t,i)=>{if(t){const{height:n,xoffset:o,yoffset:a,factor:r,spacing:s}=b.value,c=C.value.xField||"x",u=C.value.yField||"y",d=C.value.valueField||"value",p=[];for(let i=0;i<t.length;i++){const m=t[i];Cesium.defined(m.id)||(m.id=i);const v=l.value.project(Cesium.Cartographic.fromDegrees(m[c],m[u])),h={x:Math.round((v.x-o)/r+s),y:Math.round((v.y-a)/r+s),value:void 0};h.y=n-h.y,(m[d]||0===m[d])&&(h[d]=m[d]),h[d]>e.max||h[d]<e.min||p.push(h)}i.setData({min:e.min,max:e.max,data:p}),m.value=i.getDataURL()}};return h((()=>{w.forEach((e=>e())),w=[]})),Object.assign(n.proxy,{rootRef:s,childRef:v}),()=>{if(y.value){const t=[];return"entity"===e.type&&m.value?t.push(O(Dc,{ref:v,show:e.show,rectangle:{coordinates:u.value,material:p.value}})):"primitive"===e.type?t.push(O(Yc,{ref:v,show:e.show,appearance:g.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Ie(u.value)})})})):"imagery-layer"===e.type&&m.value&&t.push(O(kc,{ref:v,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:m.value,rectangle:Ie(u.value)})})),O("i",{ref:s,class:"vc-overlay-heatmap",style:"display: none !important"},t)}return T("v-if")}}});var iu=S({name:"VcOverlayEcharts",props:{options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}},emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=d();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:a}=n,r=o(!1),s=o(null),l=b({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let c;const u=o(!0);let p=[];p.push(f((()=>e.options),(e=>{n.reload()}))),i.createCesiumObject=async()=>fe(s),i.mount=async()=>{const{viewer:t}=a;return r.value=!0,w((()=>{q(e.coordinateSystem,g(t)),c=X(fe(s)),v(),t.scene.postRender.addEventListener(m)})),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.postRender.removeEventListener(m),r.value=!1,!0};const m=()=>{if(u.value){const{viewer:e}=a;c.resize({width:e.canvas.width,height:e.canvas.height})}},v=()=>{u.value&&e.options&&c.setOption(e.options)},g=t=>{const i=function(e){this.viewer=e,this._mapOffset=[0,0]};return i.create=function(n){return n.eachSeries((function(n){n.get("coordinateSystem")===e.coordinateSystem&&(n.coordinateSystem=new i(t))})),[]},i.getDimensionsInfo=function(){return["x","y"]},i.dimensions=["x","y"],i.prototype.dimensions=["x","y"],i.prototype.setMapOffset=function(e){this._mapOffset=e},i.prototype.dataToPoint=function(t){const i=[],n=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!n)return i;if(e.autoHidden){const e=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),t=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(e,t)>=0)return i}const o=this.viewer.scene.cartesianToCanvasCoordinates(n);return o?[o.x-this._mapOffset[0],o.y-this._mapOffset[1]]:i},i.prototype.pointToData=function(e){const i=this._mapOffset,n=t.scene.globe.ellipsoid,o=new Cesium.Cartesian3(e[1]+i[1],e[2]+i[2],0),a=n.cartesianToCartographic(o);return a?[a.longitude,a.latitude]:[0,0]},i.prototype.getviewerRect=function(){const e=this.viewer.canvas;return new A(0,0,e.width,e.height)},i.prototype.getRoamTransform=function(){return D()},i},y=e=>{t.emit("click",e)},C=e=>{t.emit("mouseenter",e)},x=e=>{t.emit("mouseleave",e)};return h((()=>{p.forEach((e=>e())),p=[]})),()=>r.value?O("div",{ref:s,class:"vc-echart-container"+(e.customClass?" "+e.customClass:""),style:l,onMouseenter:C,onMouseleave:x,onClick:y},fa(t.slots.default)):T("v-if")}});function nu(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function ou(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function au(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function ru(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}class su{constructor(e){this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(e){switch(this.commandType){case"Draw":{const t=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(e,t){this.geometry=t;const i=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(e){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class lu{constructor(e,t,i,n){this.data=t,this.createWindTextures(e,t),this.createParticlesTextures(e,i,n),this.createComputingPrimitives(t,i,n)}createWindTextures(e,t){const i={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:ou(i,t.U.array),V:ou(i,t.V.array)}}createParticlesTextures(e,t,i){const n={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},o=this.randomizeParticles(t.maxParticles,i),a=new Float32Array(4*t.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:ou(n,o),currentParticlesPosition:ou(n,o),nextParticlesPosition:ou(n,o),postProcessingPosition:ou(n,o),particlesSpeed:ou(n,a)}}randomizeParticles(e,t){const i=new Float32Array(4*e);for(let n=0;n<e;n++)i[4*n]=Cesium.Math.randomBetween(t.lonRange.x,t.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(t.latRange.x,t.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach((e=>{this.particlesTextures[e].destroy()}))}createComputingPrimitives(e,t,i){const n=new Cesium.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),o=new Cesium.Cartesian3(e.lon.min,e.lat.min,e.lev.min),a=new Cesium.Cartesian3(e.lon.max,e.lat.max,e.lev.max),r=new Cesium.Cartesian3((a.x-o.x)/(n.x-1),(a.y-o.y)/(n.y-1),n.z>1?(a.z-o.z)/(n.z-1):1),s=new Cesium.Cartesian2(e.U.min,e.U.max),l=new Cesium.Cartesian2(e.V.min,e.V.max),c=this;this.primitives={calculateSpeed:new su({commandType:"Compute",uniformMap:{U:function(){return c.windTextures.U},V:function(){return c.windTextures.V},currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},dimension:function(){return n},minimum:function(){return o},maximum:function(){return a},interval:function(){return r},uSpeedRange:function(){return s},vSpeedRange:function(){return l},pixelSize:function(){return i.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind\nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\n// used to calculate the wind norm\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nfloat speedScaleFactor = speedFactor * pixelSize;\n\nvarying vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n  // ensure the range of longitude and latitude\n  lonLatLev.x = mod(lonLatLev.x, 360.0);\n  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n  vec3 index3D = vec3(0.0);\n  index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n  index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n  index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n  // the st texture coordinate corresponding to (col, row) index\n  // example\n  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n  // the content of texture will be\n  // t 1.0\n  //    |  3 4 5\n  //    |\n  //    |  0 1 2\n  //   0.0------1.0 s\n\n  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n  return normalizedIndex2D;\n}\n\nfloat getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {\n  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n  float result = texture2D(componentTexture, normalizedIndex2D).r;\n  return result;\n}\n\nfloat interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {\n  float lon = lonLatLev.x;\n  float lat = lonLatLev.y;\n  float lev = lonLatLev.z;\n\n  float lon0 = floor(lon / interval.x) * interval.x;\n  float lon1 = lon0 + 1.0 * interval.x;\n  float lat0 = floor(lat / interval.y) * interval.y;\n  float lat1 = lat0 + 1.0 * interval.y;\n\n  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));\n  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));\n  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));\n  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));\n\n  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);\n  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);\n  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);\n  return lon_lat;\n}\n\nvec3 linearInterpolation(vec3 lonLatLev) {\n  // https://en.wikipedia.org/wiki/Bilinear_interpolation\n  float u = interpolateTexture(U, lonLatLev);\n  float v = interpolateTexture(V, lonLatLev);\n  float w = 0.0;\n  return vec3(u, v, w);\n}\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n  // unit conversion: meters -> longitude latitude degrees\n  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n  // Calculate the length of a degree of latitude and longitude in meters\n  float latitude = radians(lonLatLev.y);\n\n  float term1 = 111132.92;\n  float term2 = 559.82 * cos(2.0 * latitude);\n  float term3 = 1.175 * cos(4.0 * latitude);\n  float term4 = 0.0023 * cos(6.0 * latitude);\n  float latLength = term1 - term2 + term3 - term4;\n\n  float term5 = 111412.84 * cos(latitude);\n  float term6 = 93.5 * cos(3.0 * latitude);\n  float term7 = 0.118 * cos(5.0 * latitude);\n  float longLength = term5 - term6 + term7;\n\n  return vec2(longLength, latLength);\n}\n\nvec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {\n  vec2 lonLatLength = lengthOfLonLat(lonLatLev);\n  float u = speed.x / lonLatLength.x;\n  float v = speed.y / lonLatLength.y;\n  float w = 0.0;\n  vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n  return windVectorInLonLatLev;\n}\n\nvec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {\n  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail\n  const float h = 0.5;\n\n  vec3 y_n = lonLatLev;\n  vec3 f_n = linearInterpolation(lonLatLev);\n  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;\n  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;\n\n  return speed;\n}\n\nfloat calculateWindNorm(vec3 speed) {\n  vec3 percent = vec3(0.0);\n  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n  float norm = length(percent);\n\n  return norm;\n}\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);\n  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);\n\n  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));\n  gl_FragColor = particleSpeed;\n}\n"]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const e=c.particlesTextures.previousParticlesPosition;c.particlesTextures.previousParticlesPosition=c.particlesTextures.currentParticlesPosition,c.particlesTextures.currentParticlesPosition=c.particlesTextures.postProcessingPosition,c.particlesTextures.postProcessingPosition=e,c.primitives.calculateSpeed.commandToExecute.outputTexture=c.particlesTextures.particlesSpeed}}),updatePosition:new su({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = texture2D(particlesSpeed, v_textureCoordinates).rgb;\n  vec3 nextParticle = lonLatLev + speed;\n\n  gl_FragColor = vec4(nextParticle, 0.0);\n}\n"]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){c.primitives.updatePosition.commandToExecute.outputTexture=c.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new su({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return c.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D particlesSpeed; // (u, v, w, norm)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\n\nuniform float randomCoefficient; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nvarying vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n  vec2 randomSeed = randomCoefficient * seed;\n  float temp = dot(randomConstants.xy, randomSeed);\n  temp = fract(sin(temp) * (randomConstants.z + temp));\n  return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n  // ensure the longitude is in [0, 360]\n  float randomLon = mod(rand(seed, lonRange), 360.0);\n  float randomLat = rand(-seed, latRange);\n\n  return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n  return particle.y < -90.0 || particle.y > 90.0;\n}\n\nvoid main() {\n  vec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\n  vec4 nextSpeed = texture2D(particlesSpeed, v_textureCoordinates);\n  float speedNorm = nextSpeed.a;\n  float particleDropRate = dropRate + dropRateBump * speedNorm;\n\n  vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n  float randomNumber = rand(seed2, normalRange);\n\n  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n    gl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n  } else {\n    gl_FragColor = vec4(nextParticle, 0.0);\n  }\n}\n"]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){c.primitives.postProcessingPosition.commandToExecute.outputTexture=c.particlesTextures.postProcessingPosition}})}}}const cu="\nattribute vec3 position;\nattribute vec2 st;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    textureCoordinate = st;\n    gl_Position = vec4(position, 1.0);\n}\n";class uu{constructor(e,t,i,n,o){this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,i,n,o)}createRenderingTextures(e,t){const i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:ou(i),segmentsDepth:ou(n),currentTrailsColor:ou(i),currentTrailsDepth:ou(n),nextTrailsColor:ou(i),nextTrailsDepth:ou(n)}}createRenderingFramebuffers(e){this.framebuffers={segments:au(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:au(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:au(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(e){const t=[];for(let u=0;u<e.particlesTextureSize;u++)for(let i=0;i<e.particlesTextureSize;i++)for(let n=0;n<6;n++)t.push(u/e.particlesTextureSize),t.push(i/e.particlesTextureSize);const i=new Float32Array(t),n=[],o=[-1,0,1],a=[-1,1];for(let u=0;u<e.maxParticles;u++)for(let e=0;e<o.length;e++)for(let t=0;t<a.length;t++)n.push(o[e]),n.push(a[t]),n.push(0);const r=new Float32Array(n),s=12*e.maxParticles,l=new Uint32Array(s);for(let u=0,d=0,p=0;u<e.maxParticles;u++)l[d++]=p+0,l[d++]=p+1,l[d++]=p+2,l[d++]=p+2,l[d++]=p+1,l[d++]=p+3,l[d++]=p+2,l[d++]=p+4,l[d++]=p+3,l[d++]=p+4,l[d++]=p+3,l[d++]=p+5,p+=6;const c=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new c({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:r})}),indices:l})}createRenderingPrimitives(e,t,i,n){const o=this;this.primitives={segments:new su({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return n.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:["\nattribute vec2 st;\n// it is not normal itself, but used to control lines drawing\nattribute vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D previousParticlesPosition;\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nstruct adjacentPoints {\n  vec4 previous;\n  vec4 current;\n  vec4 next;\n};\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n  // WGS 84 geometric constants\n  float a = 6378137.0; // Semi-major axis\n  float b = 6356752.3142; // Semi-minor axis\n  float e2 = 6.69437999014e-3; // First eccentricity squared\n\n  float latitude = radians(lonLatLev.y);\n  float longitude = radians(lonLatLev.x);\n\n  float cosLat = cos(latitude);\n  float sinLat = sin(latitude);\n  float cosLon = cos(longitude);\n  float sinLon = sin(longitude);\n\n  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n  vec3 cartesian = vec3(0.0);\n  cartesian.x = (N_Phi + h) * cosLat * cosLon;\n  cartesian.y = (N_Phi + h) * cosLat * sinLon;\n  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n  return cartesian;\n}\n\nvec4 calculateProjectedCoordinate(vec3 lonLatLev) {\n  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n  vec3 particlePosition = convertCoordinate(lonLatLev);\n  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);\n  return projectedCoordinate;\n}\n\nvec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;\n  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;\n\n  float offsetLength = lineWidth / 2.0;\n  vec2 direction = normalize(pointB_XY - pointA_XY);\n  vec2 normalVector = vec2(-direction.y, direction.x);\n  normalVector.x = normalVector.x / aspect;\n  normalVector = offsetLength * normalVector;\n\n  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n  return offset;\n}\n\nvec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n\n  vec4 PointA = projectedCoordinates.previous;\n  vec4 PointB = projectedCoordinates.current;\n  vec4 PointC = projectedCoordinates.next;\n\n  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;\n  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;\n  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;\n\n  vec2 AB = normalize(pointB_XY - pointA_XY);\n  vec2 BC = normalize(pointC_XY - pointB_XY);\n\n  vec2 normalA = vec2(-AB.y, AB.x);\n  vec2 tangent = normalize(AB + BC);\n  vec2 miter = vec2(-tangent.y, tangent.x);\n\n  float offsetLength = lineWidth / 2.0;\n  float projection = dot(miter, normalA);\n  vec4 offset = vec4(0.0);\n  // avoid to use values that are too small\n  if (projection > 0.1) {\n    float miterLength = offsetLength / projection;\n    offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);\n    offset.x = offset.x / aspect;\n  } else {\n    offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);\n  }\n\n  return offset;\n}\n\nvoid main() {\n  vec2 particleIndex = st;\n\n  vec3 previousPosition = texture2D(previousParticlesPosition, particleIndex).rgb;\n  vec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\n  vec3 nextPosition = texture2D(postProcessingPosition, particleIndex).rgb;\n\n  float isAnyRandomPointUsed = texture2D(postProcessingPosition, particleIndex).a +\n    texture2D(currentParticlesPosition, particleIndex).a +\n    texture2D(previousParticlesPosition, particleIndex).a;\n\n  adjacentPoints projectedCoordinates;\n  if (isAnyRandomPointUsed > 0.0) {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = projectedCoordinates.previous;\n    projectedCoordinates.next = projectedCoordinates.previous;\n  } else {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);\n    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);\n  }\n\n  int pointToUse = int(normal.x);\n  float offsetSign = normal.y;\n  vec4 offset = vec4(0.0);\n  // render lines with triangles and miter joint\n  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail\n  if (pointToUse == -1) {\n    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);\n    gl_Position = projectedCoordinates.previous + offset;\n  } else {\n    if (pointToUse == 0) {\n      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);\n      gl_Position = projectedCoordinates.current + offset;\n    } else {\n      if (pointToUse == 1) {\n        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);\n        gl_Position = projectedCoordinates.next + offset;\n      } else {\n\n      }\n    }\n  }\n}\n"]}),fragmentShaderSource:new Cesium.ShaderSource({sources:["\nvoid main() {\n  const vec4 white = vec4(1.0);\n  gl_FragColor = white;\n}\n"]}),rawRenderState:ru({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new su({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:nu(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return o.textures.segmentsColor},segmentsDepthTexture:function(){return o.textures.segmentsDepth},currentTrailsColor:function(){return o.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[cu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\n  vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\n\n  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n  float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  gl_FragColor = vec4(0.0);\n  if (pointsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + pointsColor;\n  }\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + trailsColor;\n  }\n  gl_FragDepthEXT = min(pointsDepth, trailsDepth);\n}\n"]}),rawRenderState:ru({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const e=o.framebuffers.currentTrails;o.framebuffers.currentTrails=o.framebuffers.nextTrails,o.framebuffers.nextTrails=e,o.primitives.trails.commandToExecute.framebuffer=o.framebuffers.nextTrails,o.primitives.trails.clearCommand.framebuffer=o.framebuffers.nextTrails}}),screen:new su({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:nu(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return o.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[cu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = trailsColor;\n  } else {\n    gl_FragColor = vec4(0.0);\n  }\n}\n"]}),rawRenderState:ru({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class du{constructor(e,t,i,n){this.context=e,this.data=t,this.particleSystemOptions=i,this.viewerParameters=n,this.particlesComputing=new lu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new uu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(e){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach((e=>{this.particlesComputing.windTextures[e].destroy()})),Object.keys(this.particlesRendering.framebuffers).forEach((e=>{this.particlesRendering.framebuffers[e].destroy()})),this.context=e,this.particlesComputing=new lu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new uu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach((t=>{e.framebuffer=this.particlesRendering.framebuffers[t],e.execute(this.context)}))}refreshParticles(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),e){const e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;const t=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=t}}applyParticleSystemOptions(e){let t=!1;this.particleSystemOptions.maxParticles!==e.maxParticles&&(t=!0),Object.keys(e).forEach((t=>{this.particleSystemOptions[t]=e[t]})),this.refreshParticles(t)}applyViewerParameters(e){Object.keys(e).forEach((t=>{this.viewerParameters[t]=e[t]})),this.refreshParticles(!1)}}function pu(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function mu(e){return"string"==typeof e&&e.indexOf("/")>=0&&(e=e.split("/")),function(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!e)return!1;const t=e.length;return"number"==typeof t&&t>=0}(e)&&2===e.length?e[0]/e[1]:+e}var vu=S({name:"VcOverlayWindmap",props:{show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:4096,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object},emits:us,setup(e,t){const i=d();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:o}=n;let a,s,l,c;const u=r((()=>{const t=Math.ceil(Math.sqrt(e.options.maxParticles));return{particlesTextureSize:t,maxParticles:t*t,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}}));let p=[];p.push(f((()=>e.show),(e=>{l.show=e}))),p.push(f((()=>e.data),(e=>{i.proxy.reload()}))),p.push(f((()=>u.value),(e=>{const t=i.cesiumObject;t&&t.applyParticleSystemOptions(e)}),{deep:!0})),p.push(f((()=>e.viewerParameters),(e=>{O();i.cesiumObject.applyViewerParameters(a)}),{deep:!0})),i.createCesiumObject=async()=>{const{viewer:t}=o;l=new Cesium.PrimitiveCollection,s=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),a={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const i={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},n={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return c=function(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,a=mu(e.delta),r=mu(t.delta),s=mu(e.start),l=mu(t.start),c=Math.floor(i*a)>=360;return{dimensions:function(){return{width:i,height:n}},isCylindrical:function(){return c},forEach:function(e,t){for(let n=t||0;n<o;n++){const t=n%i,o=Math.floor(n/i);if(e(s+t*a,l+o*r,n))return n+1}return NaN},closest:function(e,t){if(e==e&&t==t){const o=pu(e-s,360)/a,u=(t-l)/r,d=Math.round(o),p=Math.round(u);if(0<=p&&p<n&&0<=d&&(d<i||d===i&&c)){const e=p*i+d;return d===i?e-i:e}}return NaN},closest4:function(e,t){if(e==e&&t==t){const o=pu(e-s,360)/a,u=(t-l)/r,d=Math.floor(o),p=Math.floor(u),m=d+1,v=p+1,h=o-d,g=u-p;if(0<=p&&v<n&&0<=d&&(m<i||m===i&&c)){const e=p*i+d;let t=e+1;const n=e+i;let o=n+1;return m===i&&(t-=i,o-=i),[e,t,n,o,h,g]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}}}(i,n),O(),new du(t.scene.context,e.data,u.value,a)},i.mount=async()=>{const{viewer:e}=o;e.scene.primitives.add(l);const t=e.scene,i=t.camera;return m(),i.moveStart.addEventListener(g),i.moveEnd.addEventListener(y),window.addEventListener("resize",C),t.preRender.addEventListener(w),!0},i.unmount=async()=>{v();const{viewer:e}=o,t=e.scene,i=t.camera;return v(),e.scene.primitives.remove(l),i.moveStart.removeEventListener(g),i.moveEnd.removeEventListener(y),window.removeEventListener("resize",C),t.preRender.removeEventListener(w),!0};const m=()=>{const e=i.cesiumObject;l.add(e.particlesComputing.primitives.calculateSpeed),l.add(e.particlesComputing.primitives.updatePosition),l.add(e.particlesComputing.primitives.postProcessingPosition),l.add(e.particlesRendering.primitives.segments),l.add(e.particlesRendering.primitives.trails),l.add(e.particlesRendering.primitives.screen)},v=()=>{const e=i.cesiumObject;l.remove(e.particlesComputing.primitives.calculateSpeed),l.remove(e.particlesComputing.primitives.updatePosition),l.remove(e.particlesComputing.primitives.postProcessingPosition),l.remove(e.particlesRendering.primitives.segments),l.remove(e.particlesRendering.primitives.trails),l.remove(e.particlesRendering.primitives.screen)},g=()=>{l.show=!1},y=()=>{O();i.cesiumObject.applyViewerParameters(a),l.show=!0};let b=!1;const C=()=>{b=!0,l.show=!1,l.removeAll()},w=()=>{if(b){const{viewer:e}=o,t=e.scene;i.cesiumObject.canvasResize(t.context),b=!1,m(),l.show=!0}},O=()=>{const{viewer:t}=o,i=t.scene,n=i.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))a.lonRange=be(e.viewerParameters.lonRange),a.latRange=be(e.viewerParameters.latRange);else{const e=function(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let a,r;o>Cesium.Math.THREE_PI_OVER_TWO?(a=0,r=Cesium.Math.TWO_PI):n-i<o?(a=i,r=i+o):(a=i,r=n),t.lon={min:Cesium.Math.toDegrees(a),max:Cesium.Math.toDegrees(r)};const s=e.south,l=e.north,c=e.height,u=c>Cesium.Math.PI/12?c/2:0;let d=Cesium.Math.clampToLatitudeRange(s-u),p=Cesium.Math.clampToLatitudeRange(l+u);return d<-Cesium.Math.PI_OVER_THREE&&(d=-Cesium.Math.PI_OVER_TWO),p>Cesium.Math.PI_OVER_THREE&&(p=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(d),max:Cesium.Math.toDegrees(p)},t}(n.computeViewRectangle(i.globe.ellipsoid));a.lonRange.x=e.lon.min,a.lonRange.y=e.lon.max,a.latRange.x=e.lat.min,a.latRange.y=e.lat.max}const r=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:n.getPixelSize(s,i.drawingBufferWidth,i.drawingBufferHeight);r>0&&(a.pixelSize=r)};return h((()=>{p.forEach((e=>e())),p=[]})),Object.assign(i.proxy,{getNearestUV:(t,i)=>{const n=c.closest(t,i);if(Cesium.defined(n))return[e.data.U.array[n],e.data.V.array[n]]}}),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var hu=S({name:"VcOverlayDynamic",props:{...ut,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},emits:{...us,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:(e,t,i)=>!0},setup(e,t){const i=d();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:a}=n,r=o([]),s=o({}),{emit:l}=t,c=o(null),u=o(null);let p,m=[];m.push(f((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),m.push(f((()=>e.name),(e=>{const t=i.cesiumObject;t&&(t.name=e)}))),m.push(f((()=>e.startTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.startTime=Ve(e))}))),m.push(f((()=>e.stopTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.stopTime=Ve(e))}))),m.push(f((()=>e.currentTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.currentTime=Ve(e))}))),m.push(f((()=>e.multiplier),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.multiplier=e)}))),m.push(f((()=>e.clockStep),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockStep=e)}))),m.push(f((()=>e.clockRange),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockRange=e)}))),m.push(f((()=>e.canAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.canAnimate=e)}))),m.push(f((()=>e.shouldAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.shouldAnimate=e)}))),m.push(f((()=>G(e.dynamicOverlays)),((t,o)=>{if(!i.mounted)return;const a=i.cesiumObject;if(t.length===o.length){const i=[];for(let e=0;e<t.length;e++){const n=t[e],a=o[e],r=(e,t)=>{if("nodeTransformations"!==e&&"_definitionChanged"!==e)return t};JSON.stringify(n,r)!==JSON.stringify(a,r)&&i.push({newOptions:n,oldOptions:a})}i.forEach((t=>{const i=a.entities.getById(t.oldOptions.id);if(Cesium.defined(i)){if(t.oldOptions.id===t.newOptions.id)i&&Object.keys(t.newOptions).forEach((e=>{t.oldOptions[e]!==t.newOptions[e]&&(i[e]=n.transformProp(e,t.newOptions[e]))}));else if(i){a.entities.remove(i),Z(r.value,(e=>e.id===i.id));const e=t.newOptions;g(a,[e])}const o=Y(r.value,(e=>e.id===i.id));if(Cesium.defined(o)){const i=t.oldOptions.sampledPositions,n=t.newOptions.sampledPositions,a=W(n,i,"id");W(i,n,"id").forEach((e=>{e.time&&o._sampledPosition.removeSample(e.time)})),a.forEach((t=>{t.time?o.addPosition(t.position,t.time):t.interval&&o.addPosition(t.position,t.interval||e.defaultInterval)}))}}}))}else{const e=W(t,o,"id"),i=W(o,t,"id"),n=[];for(let t=0;t<i.length;t++){const e=a.entities.getById(i[t].id);n.push(e)}n.forEach((e=>{a.entities.remove(e),Z(r.value,(t=>t.id===e.id))})),g(a,e)}}),{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const v=t=>{let n=ge(i,"update:currentTime");e.currentTime!==t.currentTime&&n&&l("update:currentTime",t.currentTime),n=ge(i,"update:shouldAnimate"),e.shouldAnimate!==t.shouldAnimate&&n&&l("update:shouldAnimate",t.shouldAnimate),n=ge(i,"update:canAnimate"),e.canAnimate!==t.canAnimate&&n&&l("update:canAnimate",t.canAnimate),n=ge(i,"update:clockRange"),e.clockRange!==t.clockRange&&n&&l("update:clockRange",t.clockRange),n=ge(i,"update:clockStep"),e.clockStep!==t.clockStep&&n&&l("update:clockStep",t.clockStep),n=ge(i,"update:multiplier"),e.multiplier!==t.multiplier&&n&&l("update:multiplier",t.multiplier),n=ge(i,"update:startTime"),e.startTime!==t.startTime&&n&&l("update:startTime",t.startTime),n=ge(i,"update:stopTime"),e.stopTime!==t.stopTime&&n&&l("update:stopTime",t.stopTime),y(t);const{JulianDate:o,Cartesian3:a}=Cesium;if(n=ge(i,"stopArrived"),n&&e.shouldAnimate)for(let i=0;i<r.value.length;i++){const n=r.value[i],s=n._sampledPosition.getValue(t.currentTime),c=e.dynamicOverlays[i];for(let i=0;i<c.sampledPositions.length;i++){const r=c.sampledPositions[i],u=Ce(r.position),d=Ve(r.time),m=a.equalsEpsilon(s,u,e.positionPrecision),v=o.equalsEpsilon(t.currentTime,d,e.timePrecision);let h=!1;switch(e.stopArrivedFlag){case"time":h=v;break;case"position":h=m;break;case"both":h=v&&m;break;case"or":h=v||m}if(h){l("stopArrived",n,r,p);break}}}},g=(t,i)=>{for(let o=0;o<i.length;o++){const a=i[o],s=n.transformProps(a),l=new ea(s);r.value.push(l);const c=t.entities.add(l._entity);s.sampledPositions.forEach((t=>{t.time?l.addPosition(t.position,t.time):t.interval&&(t.time=l.addPosition(t.position,t.interval||e.defaultInterval))})),a.id!==c.id&&(a.id=c.id),se(c,s,["id"])}};i.mount=async()=>{const{viewer:t}=a,n=i.cesiumObject;return n.show=e.show,g(n,e.dynamicOverlays),t.dataSources.add(n).then((()=>{s.value.startTime=t.clock.startTime,s.value.stopTime=t.clock.stopTime,s.value.currentTime=t.clock.currentTime,s.value.multiplier=t.clock.multiplier,s.value.clockStep=t.clock.clockStep,s.value.clockRange=t.clock.clockRange,s.value.canAnimate=t.clock.canAnimate,s.value.shouldAnimate=t.clock.shouldAnimate,e.startTime&&(t.clock.startTime=Ve(e.startTime)),e.stopTime&&(t.clock.stopTime=Ve(e.stopTime)),e.currentTime&&(t.clock.currentTime=Ve(e.currentTime)),t.clock.multiplier=e.multiplier,t.clock.clockStep=e.clockStep,t.clock.clockRange=e.clockRange,t.clock.canAnimate=!1,t.clock.shouldAnimate=e.shouldAnimate,t.clock.onTick.addEventListener(v);const n=ge(i,"onStop");return n&&t.clock.onStop.addEventListener(n),!0}))},i.unmount=async()=>{const{viewer:e}=a,t=i.cesiumObject;e.dataSources.remove(t,!0),e.clock.startTime=s.value.startTime,e.clock.stopTime=s.value.stopTime,e.clock.multiplier=s.value.multiplier,e.clock.clockStep=s.value.clockStep,e.clock.clockRange=s.value.clockRange,e.clock.canAnimate=s.value.canAnimate,e.clock.shouldAnimate=s.value.shouldAnimate,r.value.length=0,e.clock.onTick.removeEventListener(v);const n=ge(i,"onStop");return n&&e.clock.onStop.removeEventListener(n),c.value&&(e.trackedEntity=void 0),!0};const y=e=>{var t,i,n,o,r,s,l,d;if(u.value&&c.value){const{viewer:m}=a;if(Cesium.JulianDate.greaterThan(e.currentTime,e.stopTime))return void(c.value=null);const v=c.value._sampledPosition.getValue(e.currentTime);let h=new Cesium.HeadingPitchRange;switch(u.value.mode){case"TP":h.heading=0,h.pitch=(null==(i=null==(t=u.value)?void 0:t.offset)?void 0:i.pitch)||Cesium.Math.toRadians(-90),h.range=(null==(o=null==(n=u.value)?void 0:n.offset)?void 0:o.range)||1e3;break;case"FP":{const t=Cesium.JulianDate.addSeconds(e.currentTime,1/60,new Cesium.JulianDate),i=c.value._sampledPosition.getValue(t)||v;v.equals(i)&&p?h=p:(h.heading=Cesium.Math.toRadians(Fe(v,i)),h.pitch=((null==(s=null==(r=u.value)?void 0:r.offset)?void 0:s.pitch)||Cesium.Math.toRadians(-45))+He(v,i),h.range=(null==(d=null==(l=u.value)?void 0:l.offset)?void 0:d.range)||500);break}case"CUSTOM":h=ze(u.value.offset)}p=h,m.camera.lookAt(v,h)}},b=e=>e instanceof ea?e:"string"==typeof e?Y(r.value,(t=>t.id===e)):"number"==typeof e?r.value[e]:r.value[0];return h((()=>{m.forEach((e=>e())),m=[]})),Object.assign(i.proxy,{getOverlays:()=>r.value,getOverlay:b,trackOverlay:(e,t)=>{var i;const{viewer:n}=a;if("FREE"===(t=t||{mode:null===u.value?"FP":"FREE"}).mode)return n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(c.value&&(n.trackedEntity=void 0,c.value=null,u.value=null));c.value=b(e),n.trackedEntity=R(c.value._entity),"TRACKED"===t.mode?((null==(i=null==t?void 0:t.viewFrom)?void 0:i.length)&&(n.trackedEntity.viewFrom=new Cesium.Cartesian3(t.viewFrom[0],t.viewFrom[1],t.viewFrom[2])),u.value=null):u.value=t},zoomToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(c.value&&(n.trackedEntity=void 0,c.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=R(b(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=R(b(e)._entity);else o=i.cesiumObject;return n.zoomTo(o,Cesium.defined(t)?ze(t):void 0)},flyToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(c.value&&(n.trackedEntity=void 0,c.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=R(b(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=R(b(e)._entity);else o=i.cesiumObject;return t=t||{duration:3},Cesium.defined(t.offset)&&(t.offset=ze(t.offset)),n.flyTo(o,t)}}),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Lc,tu,iu,vu,hu].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const gu=Lc,fu=tu,yu=iu,bu=vu,Cu=hu;var wu=S({name:"VcCollectionBillboard",props:{...un,...dn,...ut,...zn,...ln,...cn,billboards:{type:Array,default:()=>[]}},emits:hs,setup(e,t){const i=d();i.cesiumClass="BillboardCollection";const n=wo(e,t,i);let o=[];o.push(f((()=>G(e.billboards)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._billboards.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==n?void 0:n.transformProp(i,e.newOptions[i]))}))}))}else{const i=W(e,t,"id"),n=W(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._billboards.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0})),i.alreadyListening.push("billboards");const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=null==n?void 0:n.transformProps(o),r=e.add(a);se(r,a)}};return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e),i=new Cesium.BillboardCollection(t);return a(i,e.billboards),i},h((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Ou=S({name:"VcBillboard",props:{...Ye,...qe,...Qe,...Je,...Ke,...et,...tt,...it,...pn,...nt,...at,...rt,...Ge,...st,...lt,...ct,...ut,...dt,...pt,...mt,...vt,...zn},emits:hs,setup(e,t){const i=d();return i.cesiumClass="Billboard",Co(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var xu=S({name:"VcCumulusCloud",props:{brightness:{type:Number,default:1},...qe,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:Ce}},...Ge,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:be}},...ut,slice:{type:Number,default:-1}},emits:hs,setup(e,t){const i=d();return i.cesiumClass="CumulusCloud",Co(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Su=S({name:"VcCollectionCloud",props:{...ut,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}},emits:us,setup(e,t){var i;const n=d();n.cesiumClass="CloudCollection";const o=wo(e,t,n);if(void 0===o)return;n.alreadyListening.push("clouds");let a=[];a.push(f((()=>G(e.clouds)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._clouds.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._clouds.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n,xu.props),r=e.add(a);se(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e,xu.props),i=new Cesium.CloudCollection(t);return r(i,e.clouds),i},h((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(s),style:{display:"none !important"}},fa(t.slots.default)):T(ne(s))}});var _u=S({name:"VcCollectionLabel",props:{...ln,...cn,...un,...dn,...ut,...zn,labels:{type:Array,default:()=>[]}},emits:hs,setup(e,t){var i;const n=d();n.cesiumClass="LabelCollection";const o=wo(e,t,n);if(void 0===o)return;n.alreadyListening.push("labels");let a=[];a.push(f((()=>G(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=e.add(a);se(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.LabelCollection(t);return r(i,e.labels),i},h((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(s),style:{display:"none !important"}},fa(t.slots.default)):T(ne(s))}});var Eu=S({name:"VcLabel",props:{...Xt,...Qt,...Qe,...Je,...Ke,...Jt,...Zt,...tt,...it,...pn,...bt,...Ct,...at,...rt,...Ge,...lt,...ct,...ut,...qt,...Yt,...$t,totalScale:{type:Number,default:1},...pt,...mt,...zn},emits:hs,setup(e,t){const i=d();return i.cesiumClass="Label",Co(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Pu=S({name:"VcCollectionPoint",props:{...ln,...cn,...dn,...ut,...zn,points:{type:Array,default:()=>[]}},emits:hs,setup(e,t){const i=d();i.cesiumClass="PointPrimitiveCollection";const n=wo(e,t,i);if(void 0===n)return;i.alreadyListening.push("points");let o=[];o.push(f((()=>G(e.points)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}))}))}else{const i=W(e,t,"id"),n=W(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._pointPrimitives.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0}));const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=n.transformProps(o),r=e.add(a);se(r,a)}};return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=new Cesium.PointPrimitiveCollection(t);return a(i,e.points),i},h((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Tu=S({name:"VcPoint",props:{...qe,...Qe,...Je,...pn,...bt,...Ct,...hi,...Ge,...ct,...ut,...pt,...zn},emits:hs,setup(e,t){const i=d();return i.cesiumClass="PointPrimitive",Co(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Mu=S({name:"VcCollectionPolyline",props:{...ln,...cn,...ut,...zn,polylines:{type:Array,default:()=>[]}},emits:hs,setup(e,t){var i;const n=d();n.cesiumClass="PolylineCollection";const o=wo(e,t,n);if(void 0===o)return;n.alreadyListening.push("polylines");let a=[];a.push(f((()=>G(e.polylines)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._polylines.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._polylines.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=e.add(a);se(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PolylineCollection(t);return r(i,e.polylines),i},h((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(s),style:{display:"none !important"}},fa(t.slots.default)):T(ne(s))}});var Iu=S({name:"VcPolyline",props:{...Je,...pn,...mn,...ft,...Ot,...ut,...vt,...zn},emits:hs,setup(e,t){const i=d();return i.cesiumClass="Polyline",Co(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ju=S({name:"VcCollectionPrimitive",props:{...ut,destroyPrimitives:{type:Boolean,default:!0},...zn,polygons:{type:Array,default:()=>[]}},emits:hs,setup(e,t){var i;const n=d();n.cesiumClass="PrimitiveCollection";const o=wo(e,t,n);if(void 0===o)return;n.alreadyListening.push("polygons");let a=[];a.push(f((()=>G(e.polygons)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._primitives.find((t=>t._id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=W(e,t,"id"),o=W(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._primitives.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=new Ko(a);r._vcParent=e,se(r,a),e.add(r)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PrimitiveCollection(t);return r(i,e.polygons),i},h((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?O("i",{class:ne(s),style:{display:"none !important"}},fa(t.slots.default)):T(ne(s))}});var Lu=S({name:"VcPolygon",props:{...Ot,...Cn,...nn,...on,...ut,...pn,...Pt,...Oi,...Bi,...Qi,...Ji,...zn},emits:hs,setup(e,t){const i=d();i.cesiumClass="PolygonPrimitive";const n=Co(e,t,i);if(void 0===n)return;let o=[];return o.push(f((()=>e.clampToGround),(e=>{const t=i.cesiumObject;t&&(t.clampToGround=e)}))),o.push(f((()=>e.positions),(e=>{const t=i.cesiumObject;t&&(t.positions=we(e))}))),o.push(f((()=>e.polygonHierarchy),(e=>{const t=i.cesiumObject;t&&(t.polygonHierarchy=_e(e))}))),o.push(f((()=>e.appearance),(e=>{const t=i.cesiumObject;t&&(t.appearance=Me.call(i,e))}))),o.push(f((()=>e.depthFailAppearance),(e=>{const t=i.cesiumObject;t&&(t.depthFailAppearance=Me.call(i,e))}))),o.push(f((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),o.push(f((()=>e.classificationType),(e=>{const t=i.cesiumObject;t&&(t.classificationType=e)}))),i.createCesiumObject=async()=>{const t=n.transformProps(e);return new Ko(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return t._vcParent=e,e&&e.add(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},h((()=>{o.forEach((e=>e())),o=[]})),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[wu,Su,_u,Pu,Mu,ju,xu,Ou,Eu,Tu,Iu,Lu].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Au=wu,Du=Su,Ru=_u,ku=Pu,Bu=Mu,Nu=ju,Vu=Ou,zu=xu,Fu=Eu,Hu=Tu,Uu=Iu,Wu=Lu;var Gu=S({name:"VcGeometryInstance",props:{geometry:Object,...ln,...pn,attributes:Object},emits:{...us,"update:geometry":e=>!0},setup(e,t){const i=d();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{emit:r}=t,s=o(0);i.createCesiumObject=async()=>{const t=n.transformProps(e);return t.geometry||(t.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(t)},i.mount=async()=>{var e;const t=ye(i).proxy;void 0!==t.__childCount&&(s.value=t.__childCount.value||0,t.__childCount.value+=1);const n=i.cesiumObject;return null==(e=t.__updateGeometryInstances)||e.call(t,n,s.value),!0},i.unmount=async()=>{var e;const t=i.cesiumObject,n=ye(i).proxy;return null==(e=n.__removeGeometryInstances)||e.call(n,t),!0};const l=()=>ve(n.getServices(),{get geometryInstance(){return i.cesiumObject}});return a(J,l()),i.appContext.config.globalProperties.$VueCesium=l(),Object.assign(i.proxy,{__updateGeometry:e=>{if(ge(i,"update:geometry"))r("update:geometry",e);else{i.cesiumObject.geometry=e}return!0}}),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Gu.install=e=>{e.component(Gu.name,Gu)};const $u=Gu,Zu=$u;var Yu=S({name:"VcGeometryBox",props:{...ht,...hn},emits:us,setup(e,t){const i=d();i.cesiumClass="BoxGeometry";const n=Jn(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var qu=S({name:"VcGeometryBoxOutline",props:{...ht},emits:us,setup(e,t){const i=d();i.cesiumClass="BoxOutlineGeometry";const n=Jn(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Xu=S({name:"VcGeometryCircle",props:{...gn,...fn,...Bi,...et,...Et,...hn,...xt,...kt},emits:us,setup(e,t){const i=d();return i.cesiumClass="CircleGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Qu=S({name:"VcGeometryCircleOutline",props:{...gn,...fn,...Bi,...et,...Et,...xt,...Lt},emits:us,setup(e,t){const i=d();return i.cesiumClass="CircleOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ju=S({name:"VcGeometryPolygonCoplanar",props:{...Cn,...Bi,...hn,...kt},emits:us,setup(e,t){const i=d();return i.cesiumClass="CoplanarPolygonGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ku=S({name:"VcGeometryPolygonCoplanarOutline",props:{...Cn},emits:us,setup(e,t){const i=d();return i.cesiumClass="CoplanarPolygonOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ed=S({name:"VcGeometryCorridor",props:{...Ot,...vt,...Bi,...Et,...et,...xt,...hn,..._t},emits:us,setup(e,t){const i=d();return i.cesiumClass="CorridorGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var td=S({name:"VcGeometryCorridorOutline",props:{...Ot,...vt,...Bi,...Et,...et,...xt,..._t},emits:us,setup(e,t){const i=d();return i.cesiumClass="CorridorOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var id=S({name:"VcGeometryCylinder",props:{...Mt,...It,...jt,...At,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="CylinderGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var nd=S({name:"VcGeometryCylinderOutline",props:{...Mt,...It,...jt,...At,...Lt},emits:us,setup(e,t){const i=d();return i.cesiumClass="CylinderOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var od=S({name:"VcGeometryEllipse",props:{...gn,...Dt,...Rt,...Bi,...et,...xt,...st,...kt,...Et,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipseGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ad=S({name:"VcGeometryEllipseOutline",props:{...gn,...Dt,...Rt,...Bi,...et,...xt,...st,...kt,...Et,...Lt},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipseOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var rd=S({name:"VcGeometryEllipsoid",props:{...Bt,...Nt,...Vt,...zt,...Ft,...Ht,...Ut,...Wt,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipsoidGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var sd=S({name:"VcGeometryEllipsoidOutline",props:{...Bt,...Nt,...Vt,...zt,...Ft,...Ht,...Ut,...Wt,...Gt},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipsoidOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ld=S({name:"VcGeometryFrustum",props:{...yn,...bn,...Ze,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="FrustumGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var cd=S({name:"VcGeometryFrustumOutline",props:{...yn,...bn,...Ze},emits:us,setup(e,t){const i=d();return i.cesiumClass="FrustumOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ud=S({name:"VcGeometryGroundPolyline",props:{...Ot,...vt,...Et,...mn,...Ci},emits:us,setup(e,t){const i=d();return i.cesiumClass="GroundPolylineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var dd=S({name:"VcGeometryPlane",props:{...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="PlaneGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}}),pd=S({name:"VcGeometryPlaneOutline",emits:us,setup(e,t){const i=d();return i.cesiumClass="PlaneOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var md=S({name:"VcGeometryPolygon",props:{...Cn,...et,...xt,...hn,...kt,...Bi,...Et,...fi,...yi,...bi,...Ci},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolygonGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var vd=S({name:"VcGeometryPolygonOutline",props:{...Cn,...et,...xt,...hn,...Bi,...Et,...fi,...Ci},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolygonOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var hd=S({name:"VcGeometryPolyline",props:{...Ot,...vt,...An,colorsPerVertex:{type:Boolean,default:!1},...Ci,...Et,...hn,...Bi},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolylineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var gd=S({name:"VcGeometryPolylineVolume",props:{...Pn,...En,...Bi,...Et,...hn,..._t},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolylineVolumeGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var fd=S({name:"VcGeometryPolylineVolumeOutline",props:{...Pn,...En,...Bi,...Et,..._t},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolylineVolumeOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var yd=S({name:"VcGeometryRectangle",props:{...Ri,...hn,...Bi,...Et,...et,...st,...kt,...xt},emits:us,setup(e,t){const i=d();return i.cesiumClass="RectangleGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var bd=S({name:"VcGeometryRectangleOutline",props:{...Ri,...Bi,...Et,...et,...st,...xt},emits:us,setup(e,t){const i=d();return i.cesiumClass="RectangleOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Cd=S({name:"VcGeometrySimplePolyline",props:{...Ot,...An,colorsPerVertex:{type:Boolean,default:!1},...Ci,...Et,...Bi},emits:us,setup(e,t){const i=d();return i.cesiumClass="SimplePolylineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var wd=S({name:"VcGeometrySphere",props:{...fn,...Ut,...Wt,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="SphereGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Od=S({name:"VcGeometrySphereOutline",props:{...fn,...Ut,...Wt,...Gt},emits:us,setup(e,t){const i=d();return i.cesiumClass="SphereOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var xd=S({name:"VcGeometryWall",props:{...Ot,...Et,...Pi,...Ei,...Bi,...hn},emits:us,setup(e,t){const i=d();return i.cesiumClass="WallGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sd=S({name:"VcGeometryWallOutline",props:{...Ot,...Et,...Pi,...Ei,...Bi},emits:us,setup(e,t){const i=d();return i.cesiumClass="WallOutlineGeometry",Jn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Yu,qu,Xu,Qu,Ju,Ku,ed,td,id,nd,od,ad,rd,sd,ld,cd,ud,dd,pd,md,vd,hd,gd,fd,yd,bd,Cd,wd,Od,xd,Sd].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const _d=Yu,Ed=qu,Pd=Xu,Td=Qu,Md=Ju,Id=Ku,jd=ed,Ld=td,Ad=id,Dd=nd,Rd=od,kd=ad,Bd=rd,Nd=sd,Vd=ld,zd=cd,Fd=ud,Hd=dd,Ud=pd,Wd=md,Gd=vd,$d=hd,Zd=gd,Yd=fd,qd=yd,Xd=bd,Qd=Cd,Jd=wd,Kd=Od,ep=xd,tp=Sd;function ip(e,t,i,n,a){i.cesiumClass=n,i.cesiumEvents=[];const{t:r}=Gn(),{emit:s}=t,l=ne(n).split("-");"VcMeasurementDistance"===n&&e.showComponentLines&&(l[2]="component-distance"),"VcDrawingRegular"!==n&&"VcMeasurementRegular"!==n||(4===e.edge&&(l[2]="rectangle"),360===e.edge&&(l[2]="circle"));let c=l[2];l[3]&&(c=`${l[2]}-${l[3]}`);const u=o(""),d=o({drawingTipStart:e.drawtip.drawingTipStart||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||r(`${l[0]}.${l[1]}.${l[2]}.drawingTipEditing`)}),p=o(Vo),m=o(!1),v=o([0,0,0]),h=o(!1),g=o([0,0,0]),f=o(null),y=o(null),b=o(null),C=o(""),{registerTimeout:w,removeTimeout:O}=vr();i.createCesiumObject=async()=>b;return{drawingType:c,drawTip:u,drawTipOpts:d,drawStatus:p,canShowDrawTip:m,drawTipPosition:v,showEditor:h,editorPosition:g,mouseoverPoint:f,editingPoint:y,primitiveCollectionRef:b,editorType:C,onMouseoverPoints:t=>{var i,n;const{drawingHandlerActive:o,viewer:r}=a;e.editable&&p.value!==zo&&o&&(t.pickedFeature.primitive.pixelSize=1.5*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),w((()=>{f.value=t.pickedFeature.primitive,g.value=t.pickedFeature.primitive.position,h.value=!0,m.value=!1,v.value=[0,0,0]}),null==(n=e.editorOpts)?void 0:n.delay)),s("mouseEvt",{type:t.type,name:c,target:t},r)},onMouseoutPoints:t=>{var i,n;const{viewer:o,selectedDrawingActionInstance:r}=a;e.editable&&(t.pickedFeature.primitive.pixelSize=1*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),w((()=>{g.value=[0,0,0],f.value=void 0,h.value=!1}),null==(n=e.editorOpts)?void 0:n.hideDelay),r&&(m.value=!0)),s("mouseEvt",{type:t.type,name:c,target:t},o)},onMouseenterEditor:e=>{O()},onMouseleaveEditor:t=>{var i;O(),w((()=>{var t;g.value=[0,0,0],f.value.pixelSize=1*(null==(t=e.pointOpts)?void 0:t.pixelSize),f.value=void 0,h.value=!1}),null==(i=e.editorOpts)?void 0:i.hideDelay)},onPrimitiveCollectionReady:e=>{e.cesiumObject._vcId=n},onVcCollectionPointReady:function(e){const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[n].pass=Cesium.Pass.OPAQUE,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass=Cesium.Pass.OVERLAY,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function np(e,t,i){const n=d(),a=Xn(e,t,n);if(void 0===a)return;const{t:s}=Gn(),l=a.$services,{emit:c}=t,{drawingType:u,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=ip(e,t,n,i,l),D=o([]);let R;e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((e=>{const t={positions:we(e),show:!0,drawStatus:Fo,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(t,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),D.value.push(t)}));const k=r((()=>{const t=[],{Cartesian3:n,Cartographic:o,Rectangle:a,createGuid:r,defined:s,Math:c,Ray:u}=Cesium,{viewer:d}=l;return D.value.forEach((u=>{var p,m,v,h,g,f,y,C,w,O,x,_,E,P,T,M,I,j,L;const A=u.positions[0],D=u.positions[1];if(n.equals(A,D))return;const R=b([]),k=0===(null==(p=e.polylineOpts)?void 0:p.arcType)?n.distance(A,D):Re(A,D,l.viewer.scene.globe.ellipsoid),V=n.midpoint(A,D,{}),z=Fe(A,D),F=He(A,D);u.points=u.positions.map((e=>({position:e})));const H={...u,distance:k,heading:z,pitch:F},U=Object.assign({},e.labelOpts,H.labelOpts);if("VcDrawingRectangle"===i||"VcMeasurementRectangle"===i){const t=o.fromCartesian(A,d.scene.globe.ellipsoid),i=o.fromCartesian(D,d.scene.globe.ellipsoid),r=t.height;!e.clampToGround&&(i.height=r);const s=a.fromCartesianArray(u.positions,d.scene.globe.ellipsoid),l=[s.west,s.north,r,s.east,s.north,r,s.east,s.south,r,s.west,s.south,r,s.west,s.north,r],c=n.fromRadiansArrayHeights(l,d.scene.globe.ellipsoid);Object.assign(H,{polygonPositions:c,height:r})}else if("VcDrawingRegular"===i||"VcMeasurementRegular"===i){const t=u.positions[0],i=u.positions[1],n=function(e,t,i,n){const{Camera:o,Cartesian3:a,Math:r}=Cesium,s=new o(i);if(a.equals(e,t))return;let l=a.subtract(t,e,{});l=a.normalize(l,l);let c=a.subtract(e,new a,{});c=a.normalize(c,c),s.setView({destination:e,orientation:{direction:l,up:c}}),n=n||[0,0,0];let u=s.heading;return u-=r.PI_OVER_TWO,u<0&&(u+=r.TWO_PI),n.splice(0,n.length,u,s.pitch,s.roll),n}(t,i,d.scene);if(!N(n)&&s(n)){const a=[],r=o.fromCartesian(t,d.scene.globe.ellipsoid),s=o.fromCartesian(i,d.scene.globe.ellipsoid);!e.clampToGround&&(s.height=r.height),a.push(o.toCartesian(s,d.scene.globe.ellipsoid));for(let i=0;i<(e.edge||4)-1;i++){const i=ke(t,n[0]+=2*Math.PI/(e.edge||4),k,d.scene.globe.ellipsoid);a.push(i)}Object.assign(H,{polygonPositions:a,height:r.height})}}else if("VcAnalysisViewshed"===i)Object.assign(H.viewshedOpts,{startPosition:A,endPosition:D});else if("VcAnalysisSightline"===i)if("segment"===e.sightlineType){const e=[];e.push(A);const t=[];S.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&t.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&t.push(e)}));const i=Ue(A,D,l.viewer,t);s(i)&&e.push(i),e.push(D);let o=0;for(let a=0;a<e.length-1;a++){o+=n.distance(e[a],e[a+1])}Object.assign(H,{positions:e,distance:o})}else e.sightlineType;else R.push({position:V,id:r(),text:Zo.distanceToString(k,null==(m=e.measureUnits)?void 0:m.distanceUnits,e.locale,null==(v=e.decimals)?void 0:v.distance),...U});if(H.polygonPositions&&H.polygonPositions.length){const t=Object.assign({},e.labelsOpts,H.labelsOpts),i=H.polygonPositions.slice();e.loop&&i.length>2&&i.push(i[0]);for(let a=0;a<i.length-1;a++){let o=0;if(o=0===(null==(h=e.polylineOpts)?void 0:h.arcType)?Re(i[a],i[a+1],l.viewer.scene.globe.ellipsoid):n.distance(i[a],i[a+1]),o>0&&i.length>2&&e.showDistanceLabel&&R.push({text:Zo.distanceToString(o,null==(g=e.measureUnits)?void 0:g.distanceUnits,e.locale,null==(f=e.decimals)?void 0:f.distance),position:n.midpoint(i[a],i[a+1],{}),id:r(),...t}),i.length>2&&e.showAngleLabel&&(a>0||e.loop)){const o=i[0===a?i.length-2:a-1],s=i[a],l=i[a+1],c=n.subtract(o,s,{}),u=n.subtract(l,s,{});let d=0;n.ZERO.equals(c)||n.ZERO.equals(u)||(d=n.angleBetween(c,u)),R.push({text:Zo.angleToString(d,null==(y=e.measureUnits)?void 0:y.angleUnits,e.locale,null==(C=e.decimals)?void 0:C.angle),position:s,id:r(),...t})}}const o=Be(i);e.showLabel&&R.push({text:Zo.areaToString(o,null==(w=e.measureUnits)?void 0:w.areaUnits,e.locale,null==(O=e.decimals)?void 0:O.area),position:u.positions[0],id:r(),...U})}e.showComponentLines&&(Object.assign(H,{xyPolylinePositions:[new n,new n,new n],xyBoxPositions:[new n,new n,new n],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),B(H),R.push({position:H.xLabelPosition,id:r(),text:Zo.distanceToString(H.xDistance||0,null==(x=e.measureUnits)?void 0:x.distanceUnits,e.locale,null==(_=e.decimals)?void 0:_.distance),...e.xLabelOpts}),R.push({position:H.yLabelPosition,id:r(),text:Zo.distanceToString(H.yDistance||0,null==(E=e.measureUnits)?void 0:E.distanceUnits,e.locale,null==(P=e.decimals)?void 0:P.distance),...e.yLabelOpts}),R.push({position:H.xAnglePosition,id:r(),text:Zo.angleToString(H.xAngle||0,null==(T=e.measureUnits)?void 0:T.angleUnits,e.locale,null==(M=e.decimals)?void 0:M.angle),...e.xAngleLabelOpts}),R.push({position:H.yAnglePosition,id:r(),text:Zo.angleToString(H.yAngle||0,null==(I=e.measureUnits)?void 0:I.angleUnits,e.locale,null==(j=e.decimals)?void 0:j.angle),...e.yAngleLabelOpts})),Object.assign(H,{labels:R}),H.positionsDegreesArray=H.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[c.toDegrees(t.longitude),c.toDegrees(t.latitude),t.height]})),(null==(L=null==H?void 0:H.polygonPositions)?void 0:L.length)&&(H.polygonPositionsDegreesArray=H.polygonPositions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[c.toDegrees(t.longitude),c.toDegrees(t.latitude),t.height]}))),t.push(H)})),t}));n.createCesiumObject=async()=>S,n.mount=async()=>{const{viewer:t}=l;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.addEventListener(z),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.addEventListener(V)),!0},n.unmount=async()=>{const{viewer:t}=l;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.removeEventListener(z),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.removeEventListener(V)),!0};const B=e=>{const{Cartesian3:t,Math:i,defined:n}=Cesium,{viewer:o}=l,a=o.scene.frameState.mapProjection.ellipsoid,r=e.positions[0],s=e.positions[1],c=a.cartesianToCartographic(r,{});if(!n(c))return;const u=a.cartesianToCartographic(s,{}),d=c.height,p=u.height;let m,v,h,g;d<p?(m=r,v=s,g=p,h=d):(m=s,v=r,g=d,h=p);const f=e.xyPolylinePositions;if(void 0===f)return;f[0]=m,f[2]=v;let y=a.geodeticSurfaceNormal(m,{});y=t.multiplyByScalar(y,g-h,y);const b=t.add(m,y,f[1]);if(!t.equalsEpsilon(b,v,i.EPSILON10)||!t.equalsEpsilon(b,m,i.EPSILON10)){let i=t.subtract(v,b,{}),n=t.subtract(m,b,{});const o=Math.min(t.magnitude(i),t.magnitude(n)),a=15<o?.15*o:.25*o;i=t.normalize(i,i),n=t.normalize(n,n),i=t.multiplyByScalar(i,a,i),n=t.multiplyByScalar(n,a,n);const r=e.xyBoxPositions;if(void 0===r)return;t.add(b,i,r[0]),t.add(r[0],n,r[1]),t.add(b,n,r[2]),e.xLabelPosition=t.midpoint(b,v,{}),e.yLabelPosition=t.midpoint(m,b,{}),e.xAnglePosition=v,e.yAnglePosition=m;const s=t.subtract(b,v,{}),l=t.subtract(b,m,{});let c=t.subtract(v,m,{});e.yAngle=t.angleBetween(l,c),c=t.negate(c,c),e.xAngle=t.angleBetween(s,c),e.xDistance=t.magnitude(s),e.yDistance=t.magnitude(l)}},V=()=>{k.value.forEach(((e,t)=>{var i;const n=e.polygonPositions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:r,HorizontalOrigin:s}=Cesium,{viewer:c}=l,u=c.scene;let d=e.positions[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?r.clone(p,{}):r.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=S.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];if(!g)return;for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x),o=h[t-1];o&&o!==g&&(o.horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=r.clone(i,m)}e.drawStatus===Fo&&(g.position=d)}}}))},z=()=>{k.value.forEach(((t,i)=>{var n,o,a;const{defined:r,SceneTransforms:s,HorizontalOrigin:c}=Cesium,{viewer:u}=l,d=u.scene,p=null==(n=S.value)?void 0:n.cesiumObject,m=t.positions,v=m[0],h=m[1],g=s.wgs84ToWindowCoordinates(d,v,{}),f=s.wgs84ToWindowCoordinates(d,h,{});if(r(g)&&r(f)){const t=p._primitives.filter((e=>e instanceof Cesium.LabelCollection));if(t.length){const n=t[i].get(0);let r,s,l,u;e.showComponentLines&&(r=t[i].get(2),s=t[i].get(3),l=be(null==(o=e.yLabelOpts)?void 0:o.pixelOffset),u=be(null==(a=e.xAngleLabelOpts)?void 0:a.pixelOffset)),(g.y-f.y)/(f.x-g.x)>0?(N(r)||N(l)||(l.x=-9,r.pixelOffset=l,r.horizontalOrigin=c.RIGHT),N(s)||N(u)||(u.x=12,s.pixelOffset=u,s.horizontalOrigin=c.LEFT),n.horizontalOrigin=c.LEFT):(N(r)||N(l)||(l.x=9,r.pixelOffset=l,r.horizontalOrigin=c.LEFT),N(s)||N(u)||(u.x=-12,s.pixelOffset=u,s.horizontalOrigin=c.RIGHT),n.horizontalOrigin=c.RIGHT)}}}))},F=(e,t)=>{const{defined:i,defaultValue:n,Cartesian3:o}=Cesium,{viewer:a}=l,r=a.scene,s=e.positions;s[0]=t;const c=r.frameState.mapProjection.ellipsoid,u=c.cartesianToCartographic(t,{}),d=r.globe;u.height=i(d)?n(d.getHeight(u),0):0,s[1]=c.cartographicToCartesian(u,{}),e.distance=o.distance(s[0],s[1]),e.labelPosition=o.midpoint(s[0],s[1],{})},H=()=>{const{Cartesian3:e,Plane:t}=Cesium,n={positions:[new e,new e],show:!1,drawStatus:Vo,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(n,{draggingPlane:new t(e.UNIT_X,0),surfaceNormal:new e}),D.value.push(n),v.value=Vo,h.value=!0,p.value=m.value.drawingTipStart},U=(e=!0)=>{e&&v.value===zo&&D.value.pop();const t=x.value?x.value._vcPolylineIndx:D.value.length-1,i=D.value[t];i&&(i.drawStatus=Fo),v.value=Fo,h.value=!1,g.value=[0,0,0]},W=t=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!e.editable)return;_.value=t;const{viewer:a,drawingFabInstance:r}=l;if("move"===t){p.value=m.value.drawingTipEditing,v.value=zo,x.value=C.value,R=D.value[x.value._vcPolylineIndx].positions[x.value._index],h.value=!0;(null==r?void 0:r.proxy).editingActionName=u}else if("remove"===t){const e=C.value._vcPolylineIndx;D.value[e].positions.splice(C.value._index,1)}else if("removeAll"===t){const e=C.value._vcPolylineIndx;D.value.splice(e,1)}else{const a=C.value._vcPolylineIndx,r=D.value[a];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,a,r)}c("editorEvt",{type:t,renderDatas:D,name:u,index:C.value._vcPolylineIndx},a)},G={computedRenderDatas:k,renderDatas:D,startNew:H,stop:U,clear:()=>{D.value=[],U()},handleMouseClick:(t,n)=>{var o;const{viewer:a,drawingFabInstance:r,selectedDrawingActionInstance:s,getWorldPosition:d}=l,f=null==r?void 0:r.proxy;if(2===n.button&&n.ctrl){const e=f.getDrawingActionInstance(u);return f.toggleAction(e),void w((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},a)}))}v.value===Fo&&H();const y=x.value?x.value._vcPolylineIndx:D.value.length-1,b=D.value[y],C=b.positions;if(2===n.button&&x.value)return f.editingActionName=void 0,b.positions[x.value._index]=R,v.value=Fo,b.drawStatus=Fo,x.value=void 0,p.value=m.value.drawingTipStart,"VcMeasurementHeight"===i&&F(b,R),void w((()=>{c("drawEvt",Object.assign({name:u,index:y,renderDatas:D,finished:!0,windowPoistion:t,type:"cancel"},k.value[y]),a)}));if(0!==n.button)return;const{defined:O}=Cesium;let S,E="new",P=!1;const T=a.scene;if(v.value===Vo){const n=d(T,t,{});if(!O(n))return;if(C[0]=n,C[1]=n,b.show=!0,v.value=zo,b.drawStatus=zo,p.value=m.value.drawingTipEnd,S=n,P=!1,"VcMeasurementVertical"===i){const e=T.frameState.mapProjection.ellipsoid;b.surfaceNormal=e.geodeticSurfaceNormal(n,b.surfaceNormal)}"VcMeasurementHeight"===i&&(F(b,n),P=!0,b.drawStatus=Fo,v.value=Fo,p.value=m.value.drawingTipStart,1===e.mode&&f.toggleAction(s)),"VcAnalysisViewshed"===i&&(b.viewshedOpts={...e.viewshedOpts})}else{if(b.drawStatus=Fo,v.value=Fo,x.value){if(!0===go().hasTouch){const i=d(T,t,{});if(O(i)){b.positions.splice(x.value._index,1,i),x.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}x.value=void 0,f.editingActionName=void 0,h.value=!1,g.value=[0,0,0],E=_.value,s&&(p.value=m.value.drawingTipStart,h.value=!0)}else{if(!0===go().hasTouch){const e=d(T,t,{});if(O(e)){b.positions[1]=e}}1===e.mode&&f.toggleAction(s)}P=!0,S=b.positions[1]}w((()=>{c("drawEvt",Object.assign({index:y,renderDatas:D,name:u,finished:P,position:S,windowPoistion:t,type:E},k.value[y]),a)}))},handleMouseMove:t=>{const{viewer:n,getWorldPosition:o}=l,a=n.scene,r=o(a,t,{}),{defined:s,Cartographic:d}=Cesium;if(!s(r))return;if(g.value=r,v.value!==zo)return;if("VcMeasurementVertical"===i&&a.mode===Cesium.SceneMode.SCENE2D)return;const p=x.value?x.value._vcPolylineIndx:D.value.length-1,m=D.value[p];if("VcMeasurementVertical"===i){const e=((e,t)=>{const{defined:i,SceneMode:n,Cartesian3:o,IntersectionTests:a,Plane:r,SceneTransforms:s,Ray:c}=Cesium,{viewer:u}=l,d=u.scene,p=d.camera,m=p.direction,v=d.frameState.mapProjection.ellipsoid,h=e.positions,g=h[0];let f=g,y=h[1],b=e.draggingPlane,C=e.surfaceNormal,w=C;if(d.mode===n.COLUMBUS_VIEW){w=o.UNIT_X;const e=v.cartesianToCartographic(g,{});f=d.mapProjection.project(e,{}),o.fromElements(f.z,f.x,f.y,f)}let O=o.cross(w,m,{});O=o.cross(w,O,O),O=o.normalize(O,O),b=r.fromPointNormal(f,O,b);const x=p.getPickRay(t,new c);if(y=a.rayPlane(x,b,{}),i(y)){if(d.mode===n.COLUMBUS_VIEW){y=o.fromElements(y.y,y.z,y.x,y);const e=d.mapProjection.unproject(y,{});y=v.cartographicToCartesian(e,y)}s.wgs84ToWindowCoordinates(d,h[0],{}).y<t.y&&(C=o.negate(C,{}));let e=o.subtract(y,g,{});return e=o.projectVector(e,C,e),y=o.add(g,e,y),y}})(m,t);if(!N(e)){const t=m.positions.slice();t[x.value?x.value._index:1]=e,m.positions=t}}else if("VcMeasurementHeight"===i)F(m,r);else if("VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i){const t=m.positions,i=t[0],o=d.fromCartesian(i,n.scene.globe.ellipsoid),a=d.fromCartesian(r,n.scene.globe.ellipsoid);!e.clampToGround&&(a.height=o.height),t[x.value?x.value._index:1]=d.toCartesian(a,n.scene.globe.ellipsoid)}else if("VcAnalysisSightline"===i){const e=m.positions;if(x.value){e[x.value._index>0?1:0]=r}else e[1]=r}else{const e=m.positions.slice();e[x.value?x.value._index:1]=r,m.positions=e}w((()=>{c("drawEvt",Object.assign({index:p,renderDatas:D,name:u,finished:!1,position:m.positions[1],windowPoistion:t,type:x.value?_:"new"},k.value[p]),n)}))}};return Object.assign(n.proxy,G),()=>{var t,n,o;const{createGuid:a}=Cesium,r=[];if(k.value.forEach(((t,n)=>{var o;const s="VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i,l=s?null==(o=t.polygonPositions)?void 0:o.slice():t.positions;s&&(null==l||l.push(l[0]));const c=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete c.arcType;const u=Object.assign({},e.primitiveOpts,t.primitiveOpts);if((null==l?void 0:l.length)&&(null==l?void 0:l.length)>1&&(r.push(O(e.clampToGround?qc:Qc,{...u,show:t.show&&u.show||e.editable||t.drawStatus===zo,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>O(Zu,{id:a()},(()=>O(e.clampToGround?Fd:$d,{positions:l,...c})))))),"VcAnalysisViewshed"===i&&r.push(O(eu,{...t.viewshedOpts}))),t.polygonPositions&&t.polygonPositions.length>2){const i=Object.assign({},null==e?void 0:e.polygonOpts,null==t?void 0:t.polygonOpts);i.clampToGround=e.clampToGround,r.push(O(Wu,{positions:l,show:t.show&&(null==i?void 0:i.show),...i,onReady:e=>{var t;A(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}t.xyPolylinePositions&&t.xyPolylinePositions.length>1&&r.push(O(Qc,{show:t.show&&u||e.editable||t.drawStatus===zo,...u,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>O(Zu,{id:a()},(()=>O($d,{positions:t.xyPolylinePositions,...c})))))),t.xyBoxPositions&&t.xyBoxPositions.length>1&&r.push(O(Qc,{show:t.show&&u||e.editable||t.drawStatus===zo,...u},(()=>O(Zu,{id:a()},(()=>O($d,{positions:t.xyBoxPositions,...c}))))));const d=Object.assign({},e.pointOpts,t.pointOpts);r.push(O(ku,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((o,r)=>{const s=o.position,l=Object.assign({},d,o);return{position:s,id:a(),_vcPolylineIndx:n,...l,show:((null==l?void 0:l.show)||e.editable||t.drawStatus===zo)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==r)}})),onMouseover:E,onMouseout:P,onReady:j})),r.push(O(Ru,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:L}))})),(null==(t=e.drawtip)?void 0:t.show)&&h.value){const{viewer:t}=l;r.push(O(gu,{position:g.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(O(Gr,{style:{color:i[e].color,background:i[e].background},...n,onclick:W.bind(void 0,e)},(()=>O(as,{...i[e].tooltip},(()=>{var t;return O("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||s(`vc.measurement.editor.${e}`))})))))}}const{viewer:i}=l;r.push(O(gu,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},t))))}return O(Nu,{ref:S,show:e.show,onReady:I},(()=>r))}}var op=S({name:"VcMeasurementDistance",props:{...rc,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcMeasurementDistance")});function ap(e,t,i){const n=d(),a=Xn(e,t,n);if(void 0===a)return;const{t:s}=Gn(),l=a.$services,{emit:c}=t,{drawingType:u,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=ip(e,t,n,i,l);let D,R;const k=o([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((t=>{const i={show:!0,positions:we(t),tempPositions:[],drawStatus:Fo,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};k.value.push(i)}));const B=r((()=>{const{Cartesian3:t,createGuid:n,defined:o,Math:a}=Cesium,r=[],{viewer:s}=l;return k.value.forEach(((c,u)=>{var d,p,m,v,h,g,f,y,C;const w=b([]),O=[],x=[];let _=0;const E=[];c.points=c.positions.map((e=>({position:e})));const P=c.positions.slice();if("VcAnalysisSightline"===i){const e=P.shift(),i=P;e&&i.forEach((i=>{const n=[];n.push(e);const a=[];S.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&a.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&a.push(e)}));const s=Ue(e,i,l.viewer,a);o(s)&&n.push(s),n.push(i);let u=0;const d=[];for(let e=0;e<n.length-1;e++){const i=t.distance(n[e],n[e+1]);d.push(i),u+=i}r.push({...c,positions:n,distance:u,distances:d})}))}else{e.loop&&P.length>2&&P.push(P[0]);for(let i=0;i<P.length-1;i++){let o=0;o=0===(null==(d=e.polylineOpts)?void 0:d.arcType)?Re(P[i],P[i+1],l.viewer.scene.globe.ellipsoid):t.distance(P[i],P[i+1]),O.push(o),_+=o;const a=Object.assign({},e.labelsOpts,c.labelsOpts);if(o>0&&P.length>2&&e.showDistanceLabel&&w.push({text:Zo.distanceToString(o,null==(p=e.measureUnits)?void 0:p.distanceUnits,e.locale,null==(m=e.decimals)?void 0:m.distance),position:t.midpoint(P[i],P[i+1],{}),id:n(),...a}),P.length>2&&e.showAngleLabel&&(i>0||e.loop)){const o=P[0===i?P.length-2:i-1],r=P[i],s=P[i+1],l=t.subtract(o,r,{}),c=t.subtract(s,r,{});let u=0;t.ZERO.equals(l)||t.ZERO.equals(c)||(u=t.angleBetween(l,c)),x.push(u),w.push({text:Zo.angleToString(u,null==(v=e.measureUnits)?void 0:v.angleUnits,e.locale,null==(h=e.decimals)?void 0:h.angle),position:r,id:n(),...a})}e.showDashedLine&&(E.push({positions:[P[i],N(P[i])]}),i===P.length-2&&E.push({positions:[P[i+1],N(P[i+1])]}))}const o=Be(P),u=Object.assign({},e.labelOpts,c.labelOpts);e.showLabel&&(i.includes("Area")?w.push({text:Zo.areaToString(o,null==(g=e.measureUnits)?void 0:g.areaUnits,e.locale,null==(f=e.decimals)?void 0:f.area),position:P[P.length-1],id:n(),...u}):w.push({text:Zo.distanceToString(_,null==(y=e.measureUnits)?void 0:y.distanceUnits,e.locale,null==(C=e.decimals)?void 0:C.distance),position:P[P.length-1],id:n(),...u})),c.positionsDegreesArray=c.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,s.scene.globe.ellipsoid);return[a.toDegrees(t.longitude),a.toDegrees(t.latitude),t.height]})),r.push({...c,labels:w,distance:_,distances:O,area:o,angles:x,dashedLines:E})}})),r}));n.mount=async()=>{const{viewer:t}=l;return e.autoUpdateLabelPosition&&t.scene.preRender.addEventListener(V),!0},n.unmount=async()=>{const{viewer:t}=l;return e.autoUpdateLabelPosition&&t.scene.preRender.removeEventListener(V),!0};const N=e=>{const{defined:t,defaultValue:i}=Cesium,{viewer:n}=l,o=n.scene,a=o.globe,r=o.frameState.mapProjection.ellipsoid,s=r.cartesianToCartographic(e);return s.height=t(a)?i(a.getHeight(s),0):0,r.cartographicToCartesian(s)},V=()=>{B.value.forEach(((e,t)=>{var i;const n=e.positions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:r,HorizontalOrigin:s}=Cesium,{viewer:c}=l,u=c.scene;let d=n[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?r.clone(p,{}):r.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=S.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x);h[t-1]!==g&&(h[t-1].horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=r.clone(i,m)}e.drawStatus===Fo&&(g.position=d)}}}))},z=()=>{const t={show:!1,positions:[],tempPositions:[],drawStatus:Vo,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if("VcMeasurementHorizontal"===i){const{Cartesian3:e,Plane:i}=Cesium;Object.assign(t,{dashedLines:[],heightPlane:new i(e.UNIT_X,0),heightPlaneCV:new i(e.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new e})}v.value=Vo,k.value.push(t),h.value=!0,p.value=m.value.drawingTipStart},F=(e=!0)=>{e&&v.value===zo&&k.value.pop();const t=x.value?x.value._vcPolylineIndex:k.value.length-1,i=k.value[t];i&&(i.positions=i.tempPositions,i.drawStatus=Fo),v.value=Fo,h.value=!1,g.value=[0,0,0]},H=(e,t)=>{const{viewer:n,getWorldPosition:o}=l,a=n.scene,r=o(a,e,{}),{defined:s}=Cesium;if(!s(r))return;if(g.value=r,v.value!==zo)return;const d=x.value?x.value._vcPolylineIndex:k.value.length-1,h=k.value[d];let f="new";if("VcMeasurementHorizontal"===i){const{SceneMode:i,IntersectionTests:n,Cartesian3:o}=Cesium,r=a.frameState.mapProjection.ellipsoid,l=h.positions,c=a.camera.getPickRay(e);let u,d;if(a.mode===i.SCENE3D&&h.heightPlane)u=n.rayPlane(c,h.heightPlane);else if(a.mode===i.COLUMBUS_VIEW&&h.heightPlaneCV)u=n.rayPlane(c,h.heightPlaneCV),u=o.fromElements(u.y,u.z,u.x,u),d=a.mapProjection.unproject(u),u=r.cartographicToCartesian(d);else if(u=a.camera.pickEllipsoid(e,r),s(u)){const e=r.cartesianToCartographic(u);e.height=h.height||0,u=r.cartographicToCartesian(e,u)}if(!s(u))return;if(!h.firstMove&&(null==t?void 0:t.shift)){const e=l[l.length-2],t=h.tempNextPos,i=o.subtract(t,e,{});let n=o.subtract(u,e,{});n=o.projectVector(n,i,n),u=o.add(e,n,u)}if(x.value){h.positions.splice(x.value._index,1,u),f=_.value}else{const e=h.tempPositions.slice();e.push(u),h.positions=e,h.firstMove=!1,h.tempNextPos=Object.assign(u),p.value=m.value.drawingTipEnd}}else if(x.value){h.positions.splice(x.value._index,1,r),f=_.value}else{const e=h.tempPositions.slice();e.push(r),h.positions=e}w((()=>{c("drawEvt",Object.assign({index:d,name:u,renderDatas:k,finished:!1,position:"VcMeasurementHorizontal"===i?h.positions[h.positions.length-1]:r,windowPoistion:e,type:f},B.value[d]),n)}))},U=t=>{var n,o,a;if(y.value=[0,0,0],f.value=!1,!e.editable)return;const{viewer:r,drawingFabInstance:s}=l,d=null==s?void 0:s.proxy;if(_.value=t,"move"===t){p.value=m.value.drawingTipEditing,v.value=zo,x.value=C.value,h.value=!0;const e=(()=>{let e=x.value._vcPolylineIndex,t=x.value._index;if("VcAnalysisSightline"===i)for(let i=0;i<k.value.length;i++){const n=k.value[i];for(let o=0;o<n.positions.length;o++){const a=n.positions[o];x.value.position.equals(a)&&(e=i,t=o)}}return[e,t]})();x.value._vcPolylineIndex=e[0],x.value._index=e[1],R=k.value[e[0]].positions[e[1]],d.editingActionName=u}else if("insert"===t){const e=C.value._vcPolylineIndex;k.value[e].positions.splice(C.value._index,0,C.value.position),x.value=C.value,h.value=!0,v.value=zo,p.value=m.value.drawingTipEditing,d.editingActionName=u}else if("remove"===t){const e=C.value._vcPolylineIndex,t=k.value[e];t.positions.length>2&&t.positions.splice(C.value._index,1)}else if("removeAll"===t){const e=C.value._vcPolylineIndex;k.value.splice(e,1)}else{const i=C.value._vcPolylineIndex,r=k.value[i];null==(a=null==(o=null==(n=e.editorOpts)?void 0:n[t])?void 0:o.callback)||a.call(o,i,r)}c("editorEvt",{type:t,renderDatas:k,name:u,index:C.value._vcPolylineIndex},r)},W={computedRenderDatas:B,renderDatas:k,startNew:z,stop:F,clear:()=>{k.value=[],F()},handleMouseClick:(t,n)=>{var o;const{viewer:a,drawingFabInstance:r,getWorldPosition:s,selectedDrawingActionInstance:d}=l,g=null==r?void 0:r.proxy;if(2===n.button&&n.ctrl){const e=g.getDrawingActionInstance(u);return g.toggleAction(e),void w((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},a)}))}v.value===Fo&&z();const{defined:f,Cartesian2:y,Plane:b,Cartesian3:C}=Cesium,O=x.value?x.value._vcPolylineIndex:k.value.length-1,S=k.value[O],E=S.tempPositions;if(2===n.button&&x.value)return"insert"===_.value?S.positions.splice(x.value._index,1):S.positions[x.value._index]=R,v.value=Fo,S.drawStatus=Fo,x.value=void 0,p.value=m.value.drawingTipStart,g.editingActionName=void 0,h.value=f(d),void w((()=>{c("drawEvt",Object.assign({index:O,name:u,renderDatas:k,finished:!0,windowPoistion:t,type:"cancel"},B.value[O]),a)}));if(D=D||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.magnitude(y.subtract(D,t,{}))<10)return;if(2===n.button&&v.value===zo&&E.length>1&&(E.pop(),H(t)),0!==n.button)return;const P=a.scene,T=s(P,t,{});if(!f(T))return;let M=!1,I="new";if("VcMeasurementHorizontal"===i){if(x.value)v.value=Fo,x.value=void 0,M=!0,I=_.value,p.value=m.value.drawingTipStart;else if(0===E.length){const e=P.frameState.mapProjection.ellipsoid;E.push(T),S.positions=E,S.heightPlane=b.fromPointNormal(T,e.geodeticSurfaceNormal(T,{}),S.heightPlane);const t=e.cartesianToCartographic(T,{}),i=P.mapProjection.project(t,{}),n=C.fromElements(i.z,i.x,i.y,i);S.heightPlaneCV=b.fromPointNormal(n,C.UNIT_X,S.heightPlaneCV),S.height=t.height,S.firstMove=!0,S.drawStatus=zo,S.show=!0,v.value=zo}else E.push(S.tempNextPos),S.positions=E,S.firstMove=!0;p.value=m.value.drawingTipEnd}else{if(x.value){if(!0===go().hasTouch){const i=s(P,t,{});if(f(i)){S.positions.splice(x.value._index,1,i),x.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}v.value=Fo,x.value=void 0,M=!0,I=_.value,p.value=m.value.drawingTipStart}else E.push(T),S.positions=E,S.show=!0,S.drawStatus=zo,v.value=zo,h.value=!0,p.value=m.value.drawingTipEnd;"new"!==I&&(g.editingActionName=void 0,h.value=f(d))}y.clone(t,D),w((()=>{c("drawEvt",Object.assign({index:O,name:u,renderDatas:k,finished:M,position:"VcMeasurementHorizontal"===i?S.positions[S.positions.length-1]:T,windowPoistion:t,type:I},B.value[O]),a)}))},handleMouseMove:H,handleDoubleClick:t=>{const{drawingFabInstance:i,selectedDrawingActionInstance:n,viewer:o}=l;if(v.value===zo){const a=x.value?x.value._vcPolylineIndex:k.value.length-1,r=k.value[a];F(!1),p.value=m.value.drawingTipStart,w((()=>{if(c("drawEvt",Object.assign({index:a,name:u,renderDatas:k,finished:!0,position:r.positions[r.positions.length-1],windowPoistion:t,type:"new"},B.value[a]),o),1===e.mode){(null==i?void 0:i.proxy).toggleAction(n)}}))}}};return Object.assign(n.proxy,W),()=>{var t,n;const{createGuid:o,Cartesian3:a}=Cesium,r=[],c=[];if(B.value.forEach(((t,n)=>{var s,l;const u=t.positions.slice();if(u.length>1){t.loop&&u.push(u[0]);const i=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete i.arcType;const a=Object.assign({},e.primitiveOpts,t.primitiveOpts);r.push(O(e.clampToGround?qc:Qc,{show:t.show&&a.show||e.editable||t.drawStatus===zo,...a,onReady:e=>{var t;null==(t=null==a?void 0:a.onReady)||t.call(a,e),e.cesiumObject._vcPolylineIndex=n}},(()=>O(Zu,{id:o()},(()=>O(e.clampToGround?Fd:$d,{positions:u,...i}))))))}const d=Object.assign({},e.dashLineOpts,t.dashLineOpts),p=Object.assign({},e.dashLinePrimitiveOpts,t.dashLinePrimitiveOpts);null==(s=t.dashedLines)||s.forEach((i=>{r.push(O(Qc,{show:t.show&&e.dashLinePrimitiveOpts.show||e.editable||t.drawStatus===zo,...p},(()=>O(Zu,{id:o()},(()=>O($d,{positions:i.positions,...d}))))))}));const m=Object.assign({},e.pointOpts,t.pointOpts);if(r.push(O(ku,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((r,s)=>{var l;const u=r.position;let d=!1;for(let e=0;e<c.length;e++)a.equals(u,c[e])&&(d=!0);const p=((null==(l=e.pointOpts)?void 0:l.show)||e.editable||t.drawStatus===zo)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==s)&&!d;"VcAnalysisSightline"===i&&c.push(u);const v=Object.assign({},m,r);return{position:u,id:o(),_vcPolylineIndex:n,show:p,...v}})),onMouseover:E,onMouseout:P,onReady:j})),r.push(O(Ru,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:L})),u.length>2&&(i.includes("Polygon")||i.includes("Area"))){const i=Object.assign({},e.polygonOpts,t.polygonOpts);r.push(O(Wu,{positions:u,clampToGround:e.clampToGround,show:t.show&&(null==(l=e.polygonOpts)?void 0:l.show),...i,onReady:e=>{var t;A(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}})),(null==(t=e.drawtip)?void 0:t.show)&&h.value){const{viewer:t}=l;r.push(O(gu,{position:g.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:t.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(O(Gr,{style:{color:i[e].color,background:i[e].background},...n,onclick:U.bind("polyline",e)},(()=>O(as,{...i[e].tooltip},(()=>{var t;return O("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||s(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=l;r.push(O(gu,{position:y.value,pixelOffset:null==(n=e.editorOpts)?void 0:n.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},t))))}return O(Nu,{ref:S,show:e.show,onReady:I},(()=>r))}}var rp=S({name:"VcMeasurementPolyline",props:{...rc,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>ap(e,t,"VcMeasurementPolyline")}),sp=S({name:"VcMeasurementHorizontal",props:{...rc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>ap(e,t,"VcMeasurementHorizontal")}),lp=S({name:"VcMeasurementVertical",props:{...rc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcMeasurementVertical")}),cp=S({name:"VcMeasurementHeight",props:{...rc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcMeasurementHeight")});function up(e,t,i){const n=d(),a=Xn(e,t,n);if(void 0===a)return;const{t:r}=Gn(),s=a.$services,{emit:l}=t,{drawingType:c,drawTip:u,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:g,showEditor:y,editorPosition:b,mouseoverPoint:C,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L}=ip(e,t,n,i,s),A=o([]);let D,R=[];"VcDrawingPin"===i&&""===e.billboardOpts.image&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),R.push(f((()=>e.editable),(e=>{const{drawingFabInstance:t,selectedDrawingActionInstance:i}=s;if(e&&(null==i?void 0:i.name)===c){(null==t?void 0:t.proxy).toggleAction(i)}})));const k=(e,t,i)=>{const n=Cesium.Cartographic.fromCartesian(e,i.globe.ellipsoid),o=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height];t.positionDegrees=o},B=()=>{const{Cartesian3:e}=Cesium,t={drawStatus:zo,show:!1,position:new e,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};A.value.push(t),m.value=zo,v.value=!0,u.value=p.value.drawingTipStart},N=(e=!0)=>{e&&m.value===zo&&A.value.pop();const t=x.value?x.value._vcPolylineIndx:A.value.length-1,i=A.value[t];i&&(i.drawStatus=Fo),m.value=Fo,v.value=!1,g.value=[0,0,0]},V=(t,i)=>{const{viewer:n}=s,o=n.scene,{defined:a,defaultValue:r,Math:l,SceneMode:c}=Cesium,u=o.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{}),d=o.globe;let p=a(d)?r(d.getHeight(u),0):0;p=0===e.heightReference?u.height:u.height-p,l.equalsEpsilon(p,0,l.EPSILON3)&&(p=0);let m=0;o.mode!==c.SCENE2D&&(i||(i=o.cartesianToCanvasCoordinates(t.position,{})),m=z(o,i)),t.show=!0,t.lng=u.longitude,t.lat=u.latitude,t.height=p,t.slope=m},z=(e,t)=>{const{getWorldPosition:i}=s,{defined:n,Cartesian2:o,Cartesian3:a,Math:r}=Cesium,l=i(e,t,{});if(n(l)){const s=e.camera.position,c=a.distance(l,s),u=[new a,new a,new a,new a,new a],d=new a,p=new a;if(!(1e4<c)){const s=u[0],m=u[1],v=u[2],h=u[3];let g=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(l,d);g=a.negate(g,g);const f=o.clone(t,u[0]);f.x-=2,f.y-=2;const y=o.clone(t,u[1]);y.x-=2,y.y+=2;const b=o.clone(t,u[2]);b.x+=2,b.y+=2;const C=o.clone(t,u[3]);C.x+=2,C.y-=2;const w=i(e,f,s),O=i(e,y,m),x=i(e,b,v),S=i(e,C,h);let _,E,P,T,M,I,j,L;n(w)&&(_=a.subtract(w,l,s),E=a.magnitude(_)/c<=.05?a.normalize(_,s):void 0),n(O)&&(P=a.subtract(O,l,m),T=a.magnitude(P)/c<=.05?a.normalize(P,m):void 0),n(x)&&(M=a.subtract(x,l,v),I=a.magnitude(M)/c<=.05?a.normalize(M,v):void 0),n(S)&&(j=a.subtract(S,l,h),L=a.magnitude(j)/c<=.05?a.normalize(j,h):void 0);let A=a.clone(a.ZERO,p),D=u[4];if(n(E)&&n(T)&&(D=a.normalize(a.cross(E,T,D),D),A=a.add(A,D,A)),n(T)&&n(I)&&(D=a.normalize(a.cross(T,I,D),D),A=a.add(A,D,A)),n(I)&&n(L)&&(D=a.normalize(a.cross(I,L,D),D),A=a.add(A,D,A)),n(L)&&n(E)&&(D=a.normalize(a.cross(L,E,D),D),A=a.add(A,D,A)),!A.equals(a.ZERO))return A=a.normalize(A,A),r.asinClamped(Math.abs(Math.sin(a.angleBetween(A,g))))}}return 0},F=t=>{var i,n,o;if(b.value=[0,0,0],y.value=!1,!e.editable)return;_.value=t;const{viewer:a,drawingFabInstance:r}=s,d=null==r?void 0:r.proxy;if("move"===t)u.value=p.value.drawingTipEditing,m.value=zo,x.value=C.value,v.value=!0,D=Object.assign({},A.value[x.value._vcPolylineIndx]),d.editingActionName=c;else if("remove"===t){const e=C.value._vcPolylineIndx;A.value.splice(e,1)}else{const a=C.value._vcPolylineIndx,r=A.value[a];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,a,r)}l("editorEvt",{type:t,name:c,renderDatas:A,index:C.value._vcPolylineIndx},a)},H=t=>{var i,n,o,a,l,c,u,d;const{viewer:p}=s,m=p.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{});return Cesium.defined(m)?`${r("vc.measurement.point.lng")}${Zo.angleToString(m.longitude,null==(i=e.measureUnits)?void 0:i.angleUnits,e.locale,null==(n=e.decimals)?void 0:n.lng)}\n${r("vc.measurement.point.lat")}${Zo.angleToString(m.latitude,null==(o=e.measureUnits)?void 0:o.angleUnits,e.locale,null==(a=e.decimals)?void 0:a.lat)}\n${r("vc.measurement.point.height")}${Zo.distanceToString(t.height,null==(l=e.measureUnits)?void 0:l.distanceUnits,e.locale,null==(c=e.decimals)?void 0:c.height)}\n${r("vc.measurement.point.slope")}${Zo.angleToString(t.slope,null==(u=e.measureUnits)?void 0:u.slopeUnits,e.locale,null==(d=e.decimals)?void 0:d.slope)}`:""};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:t}=s;e.preRenderDatas.forEach((e=>{const i={drawStatus:Fo,show:!0,position:Ce(e),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},n=Cesium.Cartographic.fromCartesian(i.position,t.scene.globe.ellipsoid);i.positionDegrees=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height],V(i),A.value.push(i)}))}h((()=>{R.forEach((e=>e())),R=[]}));const U={renderDatas:A,startNew:B,stop:N,clear:()=>{A.value=[],N()},handleMouseClick:(t,i)=>{const{viewer:n,drawingFabInstance:o,getWorldPosition:a,selectedDrawingActionInstance:r}=s,d=null==o?void 0:o.proxy;if(2===i.button&&i.ctrl){const e=null==d?void 0:d.getDrawingActionInstance(c);return null==d||d.toggleAction(e),void w((()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:t,type:"cancel"},n)}))}const h=x.value?x.value._vcPolylineIndx:A.value.length-1,g=A.value[h];if(2===i.button&&x.value)return d.editingActionName=void 0,A.value[h]=D,m.value=Fo,A.value[h].drawStatus=Fo,x.value=void 0,u.value=p.value.drawingTipStart,void w((()=>{l("drawEvt",{name:c,index:h,renderDatas:A,finished:!0,windowPoistion:t,type:"cancel"},n)}));if(0!==i.button)return;const{defined:f}=Cesium;let y="new";if(m.value===Vo){const e=a(n.scene,t,{});if(!f(e))return;g.position=e,g.show=!0,g.drawStatus=Fo,m.value=Fo,u.value=p.value.drawingTipStart,w((()=>{l("drawEvt",{index:h,renderDatas:A,name:c,finished:!0,position:e,windowPoistion:t,type:y},n)}))}else{m.value=Fo,g.drawStatus=Fo;const i=n.scene;if(!0===go().hasTouch){const e=a(i,t,{});k(e,g,i),f(e)&&(g.position=e,g.show=!0)}x.value?(x.value=void 0,d.editingActionName=void 0,v.value=!1,y=_.value):1===e.mode&&w((()=>{d.toggleAction(r)})),r&&(u.value=p.value.drawingTipStart,v.value=!0),w((()=>{l("drawEvt",{index:h,renderDatas:A,name:c,finished:!0,position:A.value[h].position,positionDegrees:A.value[h].positionDegrees,windowPoistion:t,type:y},n)}))}},handleMouseMove:e=>{const{viewer:t,getWorldPosition:i}=s,n=t.scene,{defined:o,SceneMode:a}=Cesium;if(n.mode!==a.MORPHING){const a=i(n,e,{});if(!o(a))return;if(g.value=a,m.value===Fo&&B(),m.value!==zo)return;const r=x.value?x.value._vcPolylineIndx:A.value.length-1,s=A.value[r];s.position=a,k(a,s,n),V(s,e);const u=x.value?_.value:"new";w((()=>{l("drawEvt",{index:r,renderDatas:A,name:c,finished:!1,position:a,positionDegrees:s.positionDegrees,windowPoistion:e,type:u},t)}))}}};return Object.assign(n.proxy,U),()=>{var t,n,o;const{createGuid:a}=Cesium,l=[],c=[],d=[],p=[];if(A.value.forEach(((t,n)=>{var o;const r=Object.assign({},e.pointOpts,t.pointOpts);c.push({position:t.position,id:a(),_vcPolylineIndx:n,...r,show:t.show&&(null==(o=e.pointOpts)?void 0:o.show)||e.editable||t.drawStatus===zo});const s=Object.assign({},e.labelOpts,t.labelOpts);if(e.showLabel)if("VcDrawingPin"===i){const i=Object.assign({},e.billboardOpts,t.billboardOpts);p.push({position:t.position,id:a(),_vcPolylineIndx:n,...i}),s.text&&d.push({position:t.position,id:a(),...s})}else d.push({position:t.position,id:a(),text:H(t),...s})})),l.push(O(ku,{enableMouseEvent:e.enableMouseEvent,points:c,onMouseover:E,onMouseout:P,onReady:j})),l.push(O(Ru,{enableMouseEvent:e.enableMouseEvent,labels:d,onReady:L})),"VcDrawingPin"===i&&l.push(O(Au,{enableMouseEvent:e.enableMouseEvent,billboards:p})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=s;l.push(O(gu,{position:g.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>O("div",{class:"vc-drawtip vc-tooltip--style"},u.value))))}if(y.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(O(Gr,{style:{color:i[e].color,background:i[e].background},...n,onclick:F.bind(void 0,e)},(()=>O(as,{...i[e].tooltip},(()=>{var t;return O("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||r(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=s;l.push(O(gu,{position:b.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>O("div",{class:"vc-editor"},t))))}return O(Nu,{ref:S,show:e.show,onReady:I},(()=>l))}}var dp=S({name:"VcMeasurementPoint",props:{...rc,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:fs,setup:(e,t)=>up(e,t,"VcMeasurementPoint")}),pp=S({name:"VcMeasurementArea",props:{...rc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>ap(e,t,"VcMeasurementArea")}),mp=S({name:"VcMeasurementRectangle",props:{...rc,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcMeasurementRectangle")}),vp=S({name:"VcMeasurementRegular",props:{...rc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcMeasurementRegular")});function hp(e,t,i,n,r,s,l){i.cesiumEvents=[];const c=Xn(e,t,i);if(void 0===c)return;const{t:u}=Gn(),{$services:d}=c,{emit:m}=t,v=o(!1),h=b({}),g=Os(e),f=o(null),y=o(null),C=o(!1),x=o(null);let S,_;const{activate:E,deactivate:P,destroy:M,isActive:I}=function(e,{handleMouseClick:t,handleMouseDown:i,handleMouseUp:n,handleMouseMove:a,handleDoubleClick:r,handleMouseWheel:s,handlePinch:l}){const c=o(void 0),u=o(!1),d=e=>{null==t||t(e,{button:0})},p=e=>{null==t||t(e,{button:0,shift:!0})},m=e=>{null==t||t(e,{button:0,ctrl:!0})},v=e=>{null==t||t(e,{button:1})},h=e=>{null==t||t(e,{button:1,shift:!0})},g=e=>{null==t||t(e,{button:1,ctrl:!0})};let f;const y=e=>{var i;f?null==(i=null==f?void 0:f.promise)||i.then((i=>{i&&(null==t||t(e,{button:2}))})):null==t||t(e,{button:2})},b=e=>{null==t||t(e,{button:2,shift:!0})},C=e=>{null==t||t(e,{button:2,ctrl:!0})},w=e=>{null==i||i(e,{button:0})},O=e=>{null==i||i(e,{button:0,shift:!0})},x=e=>{null==i||i(e,{button:0,ctrl:!0})},S=e=>{null==i||i(e,{button:1})},_=e=>{null==i||i(e,{button:1,shift:!0})},E=e=>{null==i||i(e,{button:1,ctrl:!0})},P=e=>{null==i||i(e,{button:2})},T=e=>{null==i||i(e,{button:2,shift:!0})},M=e=>{null==i||i(e,{button:2,ctrl:!0})},I=e=>{null==n||n(e,{button:0})},j=e=>{null==n||n(e,{button:0,shift:!0})},L=e=>{null==n||n(e,{button:0,ctrl:!0})},A=e=>{null==n||n(e,{button:1,ctrl:!0})},D=e=>{null==n||n(e,{button:1,shift:!0})},R=e=>{null==n||n(e,{button:1,ctrl:!0})},k=e=>{null==n||n(e,{button:2})},B=e=>{null==n||n(e,{button:2,shift:!0})},N=e=>{null==n||n(e,{button:2,ctrl:!0})},V=e=>{null==r||r(e,{button:0})},z=e=>{null==r||r(e,{button:0,shift:!0})},F=e=>{null==r||r(e,{button:0,ctrl:!0})},H=e=>{null==a||a(e)},U=e=>{null==a||a(e,{shift:!0})},W=e=>{null==a||a(e,{ctrl:!0})},G=e=>{null==s||s(e)},$=e=>{null==s||s(e,{shift:!0})},Z=e=>{null==s||s(e,{ctrl:!0})},Y=e=>{null==l||l(e,{start:!0})},q=e=>{null==l||l(e,{start:!0,shift:!0})},X=e=>{null==l||l(e,{start:!0,ctrl:!0})},Q=e=>{null==l||l(e,{end:!0})},J=e=>{null==l||l(e,{end:!0,shift:!0})},K=e=>{null==l||l(e,{end:!0,ctrl:!0})},ee=e=>{null==l||l(e,{move:!0})},te=e=>{null==l||l(e,{move:!0,shift:!0})},ie=e=>{null==l||l(e,{move:!0,ctrl:!0})},ne=e=>{if(e.touch){const t={position:{x:e.position.left,y:e.position.top}};null==r||r(t,{button:0})}f.resolve(!1)},oe=e=>{f.resolve(!0)},ae=e=>{f=bo()};return{activate:()=>{if(u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i,ScreenSpaceEventHandler:n}=Cesium;if(!c.value){const{viewer:t}=e;c.value=new n(t.canvas),yo.beforeMount(t.canvas,{arg:"2000",value:ne,touchStart:ae,touchEnd:oe,modifiers:{}})}const o=c.value;o.setInputAction(d,t.LEFT_CLICK),o.setInputAction(p,t.LEFT_CLICK,i.SHIFT),o.setInputAction(m,t.LEFT_CLICK,i.CTRL),o.setInputAction(w,t.LEFT_DOWN),o.setInputAction(O,t.LEFT_DOWN,i.SHIFT),o.setInputAction(x,t.LEFT_DOWN,i.CTRL),o.setInputAction(I,t.LEFT_UP),o.setInputAction(j,t.LEFT_UP,i.SHIFT),o.setInputAction(L,t.LEFT_UP,i.CTRL),o.setInputAction(y,t.RIGHT_CLICK),o.setInputAction(b,t.RIGHT_CLICK,i.SHIFT),o.setInputAction(C,t.RIGHT_CLICK,i.CTRL),o.setInputAction(P,t.RIGHT_DOWN),o.setInputAction(T,t.RIGHT_DOWN,i.SHIFT),o.setInputAction(M,t.RIGHT_DOWN,i.CTRL),o.setInputAction(k,t.RIGHT_UP),o.setInputAction(B,t.RIGHT_UP,i.SHIFT),o.setInputAction(N,t.RIGHT_UP,i.CTRL),o.setInputAction(v,t.MIDDLE_CLICK),o.setInputAction(h,t.MIDDLE_CLICK,i.SHIFT),o.setInputAction(g,t.MIDDLE_CLICK,i.CTRL),o.setInputAction(S,t.MIDDLE_DOWN),o.setInputAction(_,t.MIDDLE_DOWN,i.SHIFT),o.setInputAction(E,t.MIDDLE_DOWN,i.CTRL),o.setInputAction(A,t.MIDDLE_UP),o.setInputAction(D,t.MIDDLE_UP,i.SHIFT),o.setInputAction(R,t.MIDDLE_UP,i.CTRL),o.setInputAction(V,t.LEFT_DOUBLE_CLICK),o.setInputAction(z,t.LEFT_DOUBLE_CLICK,i.SHIFT),o.setInputAction(F,t.LEFT_DOUBLE_CLICK,i.CTRL),o.setInputAction(H,t.MOUSE_MOVE),o.setInputAction(U,t.MOUSE_MOVE,i.SHIFT),o.setInputAction(W,t.MOUSE_MOVE,i.CTRL),o.setInputAction(G,t.WHEEL),o.setInputAction($,t.WHEEL,i.SHIFT),o.setInputAction(Z,t.WHEEL,i.CTRL),o.setInputAction(Y,t.PINCH_START),o.setInputAction(q,t.PINCH_START,i.SHIFT),o.setInputAction(X,t.PINCH_START,i.CTRL),o.setInputAction(Q,t.PINCH_END),o.setInputAction(J,t.PINCH_END,i.SHIFT),o.setInputAction(K,t.PINCH_END,i.CTRL),o.setInputAction(ee,t.PINCH_MOVE),o.setInputAction(te,t.PINCH_MOVE,i.SHIFT),o.setInputAction(ie,t.PINCH_MOVE,i.CTRL),u.value=!0},deactivate:()=>{if(!u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i}=Cesium,n=c.value;if(!n)return;n.removeInputAction(t.LEFT_CLICK),n.removeInputAction(t.LEFT_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_CLICK,i.CTRL),n.removeInputAction(t.LEFT_DOWN),n.removeInputAction(t.LEFT_DOWN,i.SHIFT),n.removeInputAction(t.LEFT_DOWN,i.CTRL),n.removeInputAction(t.LEFT_UP),n.removeInputAction(t.LEFT_UP,i.SHIFT),n.removeInputAction(t.LEFT_UP,i.CTRL),n.removeInputAction(t.RIGHT_CLICK),n.removeInputAction(t.RIGHT_CLICK,i.SHIFT),n.removeInputAction(t.RIGHT_CLICK,i.CTRL),n.removeInputAction(t.RIGHT_DOWN),n.removeInputAction(t.RIGHT_DOWN,i.SHIFT),n.removeInputAction(t.RIGHT_DOWN,i.CTRL),n.removeInputAction(t.RIGHT_UP),n.removeInputAction(t.RIGHT_UP,i.SHIFT),n.removeInputAction(t.RIGHT_UP,i.CTRL),n.removeInputAction(t.MIDDLE_CLICK),n.removeInputAction(t.MIDDLE_CLICK,i.SHIFT),n.removeInputAction(t.MIDDLE_CLICK,i.CTRL),n.removeInputAction(t.MIDDLE_DOWN),n.removeInputAction(t.MIDDLE_DOWN,i.SHIFT),n.removeInputAction(t.MIDDLE_DOWN,i.CTRL),n.removeInputAction(t.MIDDLE_UP),n.removeInputAction(t.MIDDLE_UP,i.SHIFT),n.removeInputAction(t.MIDDLE_UP,i.CTRL),n.removeInputAction(t.LEFT_DOUBLE_CLICK),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.CTRL),n.removeInputAction(t.MOUSE_MOVE),n.removeInputAction(t.MOUSE_MOVE,i.SHIFT),n.removeInputAction(t.MOUSE_MOVE,i.CTRL),n.removeInputAction(t.WHEEL),n.removeInputAction(t.WHEEL,i.SHIFT),n.removeInputAction(t.WHEEL,i.CTRL),n.removeInputAction(t.PINCH_START),n.removeInputAction(t.PINCH_START,i.SHIFT),n.removeInputAction(t.PINCH_START,i.CTRL),n.removeInputAction(t.PINCH_END),n.removeInputAction(t.PINCH_END,i.SHIFT),n.removeInputAction(t.PINCH_END,i.CTRL),n.removeInputAction(t.PINCH_MOVE),n.removeInputAction(t.PINCH_MOVE,i.SHIFT),n.removeInputAction(t.PINCH_MOVE,i.CTRL);const{viewer:o}=e;yo.beforeUnmount(o.canvas),u.value=!1},destroy:()=>{var e;null==(e=c.value)||e.destroy(),c.value=void 0},isActive:u}}(d,{handleMouseClick:(e,t)=>{var n,o;const a=null==_?void 0:_.cmpRef.value;let r;null==(n=null==a?void 0:a.handleMouseClick)||n.call(a,e.position,t);const s=i.proxy;if(s.editingActionName&&(r=R(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleMouseClick)||o.call(i,e.position,t)}},handleMouseMove:(e,t)=>{var n,o;const a=null==_?void 0:_.cmpRef.value;let r;null==(n=null==a?void 0:a.handleMouseMove)||n.call(a,e.endPosition,t);const s=i.proxy;if(s.editingActionName&&(r=R(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleMouseMove)||o.call(i,e.endPosition,t)}},handleDoubleClick:(e,t)=>{var n,o;const a=null==_?void 0:_.cmpRef.value;let r;null==(n=null==a?void 0:a.handleDoubleClick)||n.call(a,e.position,t);const s=i.proxy;if(s.editingActionName&&(r=R(s.editingActionName)),r&&r!==_){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleDoubleClick)||o.call(i,e.position,t)}}});i.createCesiumObject=async()=>(v.value=!0,S=new No,n.value),i.mount=async()=>(L(),C.value=!0,E(),!0),i.unmount=async()=>(_&&(D(_),_=void 0),P(),M(),C.value=!1,!0);const j=(e,t,i)=>{const{Cesium3DTileFeature:n,Cesium3DTileset:o,Cartesian3:a,defined:r,Model:s,Ray:l}=Cesium;if(Cesium.SuperMapVersion)return e.pickPosition(t);let c;const u={},d=new l;if(e.pickPositionSupported){S.hide(e);const l=e.pick(t,1,1);if(S.restore(e),r(l)&&(l instanceof n||l.primitive instanceof o||l.primitive instanceof s||Cesium.S3MTilesLayer&&l.primitive instanceof Cesium.S3MTilesLayer)&&(c=e.pickPosition(t,u),r(c)))return a.clone(c,i)}if(r(e.globe)){const n=e.camera.getPickRay(t,d);return c=e.globe.pick(n,e,u),r(c)?a.clone(c,i):void 0}},L=()=>{var e;const t=g.style.value;h.left=t.left,h.top=t.top,h.transform=t.transform;const i=g.attach.value,n=null==(e=fe(y))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(h,t)},A=o(null),D=t=>{var i;const{viewer:o}=d;if(p(t)&&(t=R(t)),!t)return void c.logger.error("Invalid drawingActionOption or drawingActionOption name");const a=k(t.name);if(-1!==a){if(void 0!==_){_.actionOpts.color=A.value||"";const e=_.cmpRef.value;null==(i=e.stop)||i.call(e),_.isActive=!1,m("activeEvt",{type:_.name,option:_,isActive:!1},o)}(null==_?void 0:_.name)===(null==t?void 0:t.name)?(_=void 0,n.value[a].actionOpts.color=A.value||"red"):w((()=>{n.value[a].cmpRef.value.startNew(),A.value=n.value[a].actionOpts.color,n.value[a].actionOpts.color=e.activeColor,n.value[a].isActive=!0,_=n.value[a],m("activeEvt",{type:_.name,option:_,isActive:!0},o)}))}},R=e=>n.value.find((t=>t.name===e)),k=e=>n.value.findIndex((t=>t.name===e)),B=e=>{e?E():(_&&D(_),P()),r.modelValue=e,m("fabUpdated",e)},N=()=>{n.value.forEach((e=>{var t;null==(t=e.cmpRef.value)||t.clear()})),_&&D(_)},V=()=>ve(c.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return _},get getWorldPosition(){return j},get drawingHandlerActive(){return I}}),z=({cesiumObject:e})=>{e._vcId=l};a(J,V()),i.appContext.config.globalProperties.$VueCesium=V(),Object.assign(i.proxy,{clearAll:N,deactivate:P,activate:E,toggleAction:D,getFabRef:()=>y.value,getDrawingActionInstance:R,getDrawingActionInstances:()=>n.value,getSelectedDrawingActionInstance:()=>_});return{renderContent:()=>{if(v.value){const i=[],o=[];n.value.forEach((t=>{i.push(O(cs,{ref:t.actionRef,style:t.actionStyle,class:t.actionClass,...t.actionOpts,onClick:()=>{D(t)}},(()=>O(as,{...t.actionOpts.tooltip},(()=>O("strong",null,t.tip)))))),t.cmp&&o.push(O(t.cmp,{ref:t.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(e,t)=>{m("drawEvt",e,t)},onEditorEvt:(e,t)=>{m("editorEvt",e,t)},onMouseEvt:(e,t)=>{m("mouseEvt",e,t)},...t.cmpOpts}))})),n.value.length&&i.push(O(cs,{style:{background:s.color,color:s.textColor},class:"vc-draw-button vc-draw-clear",...s,onClick:N},(()=>O(as,{...s.tooltip},(()=>O("strong",null,s.tooltip.tip||u(`vc.${l}.clear.tip`)))))));const a=[];return C.value&&a.push(O("div",{ref:f,class:"vc-drawings-container "+g.classes.value,style:h},void 0!==t.slots.body?t.slots.body(n.value):O(ls,{ref:y,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":B},{default:()=>i,tooltip:()=>O(as,{...r.tooltip},(()=>O("strong",null,r.tooltip.tip||(r.modelValue?u("vc.drawing.collapse"):u("vc.drawing.expand")))))}))),a.push(O(Nu,{ref:x,show:e.show,onReady:z},(()=>o))),a}return T("v-if")}}}var gp=S({name:"VcMeasurements",props:Ic,emits:{...fs,fabUpdated:e=>!0},setup(e,t){var i;const n=d();n.cesiumClass="VcMeasurements";const{t:a}=Gn(),s=b(Object.assign({},jc.clearActionOpts,e.clearActionOpts)),l=b(Object.assign({},jc.mainFabOpts,e.mainFabOpts)),c=b(Object.assign({},jc.distanceActionOpts,e.distanceActionOpts)),u=b(Object.assign({},jc.distanceMeasurementOpts,e.distanceMeasurementOpts)),p=b(Object.assign({},jc.componentDistanceActionOpts,e.componentDistanceActionOpts)),m=b(Object.assign({},jc.componentDistanceMeasurementOpts,e.componentDistanceMeasurementOpts)),v=b(Object.assign({},jc.polylineActionOpts,e.polylineActionOpts)),h=b(Object.assign({},jc.polylineMeasurementOpts,e.polylineMeasurementOpts)),g=b(Object.assign({},jc.horizontalActionOpts,e.horizontalActionOpts)),f=b(Object.assign({},jc.horizontalMeasurementOpts,e.horizontalMeasurementOpts)),y=b(Object.assign({},jc.verticalActionOpts,e.verticalActionOpts)),C=b(Object.assign({},jc.verticalMeasurementOpts,e.verticalMeasurementOpts)),w=b(Object.assign({},jc.heightActionOpts,e.heightActionOpts)),O=b(Object.assign({},jc.heightMeasurementOpts,e.heightMeasurementOpts)),x=b(Object.assign({},jc.areaActionOpts,e.areaActionOpts)),S=b(Object.assign({},jc.areaMeasurementOpts,e.areaMeasurementOpts)),_=b(Object.assign({},jc.pointActionOpts,e.pointActionOpts)),E=b(Object.assign({},jc.pointMeasurementOpts,e.pointMeasurementOpts)),P=b(Object.assign({},jc.rectangleActionOpts,e.rectangleActionOpts)),T=b(Object.assign({},jc.rectangleMeasurementOpts,e.rectangleMeasurementOpts)),M=b(Object.assign({},jc.regularActionOpts,e.regularActionOpts)),I=b(Object.assign({},jc.regularMeasurementOpts,e.regularMeasurementOpts)),j=b(Object.assign({},jc.circleActionOpts,e.circleActionOpts)),L=b(Object.assign({},jc.circleMeasurementOpts,e.circleMeasurementOpts)),A={};A.distanceActionOpts=c,A.distanceMeasurementOpts=u,A.componentDistanceActionOpts=p,A.componentDistanceMeasurementOpts=m,A.polylineActionOpts=v,A.polylineMeasurementOpts=h,A.horizontalActionOpts=g,A.horizontalMeasurementOpts=f,A.verticalActionOpts=y,A.verticalMeasurementOpts=C,A.heightActionOpts=w,A.heightMeasurementOpts=O,A.areaActionOpts=x,A.areaMeasurementOpts=S,A.pointActionOpts=_,A.pointMeasurementOpts=E,A.rectangleActionOpts=P,A.rectangleMeasurementOpts=T,A.regularActionOpts=M,A.regularMeasurementOpts=I,A.circleActionOpts=j,A.circleMeasurementOpts=L,A.clearActionOpts=s;const D=r((()=>e.measurements.map((e=>({name:e,type:"measurement",actionStyle:{background:A[`${k(e)}ActionOpts`].color,color:A[`${k(e)}ActionOpts`].textColor},actionClass:`vc-measure-${e} vc-measure-button`,actionRef:o(null),actionOpts:A[`${k(e)}ActionOpts`],cmp:R(e),cmpRef:o(null),cmpOpts:A[`${k(e)}MeasurementOpts`],tip:A[`${k(e)}ActionOpts`].tooltip.tip||a(`vc.measurement.${e}.tip`),isActive:!1})))));function R(e){switch(e){case"distance":case"component-distance":return op;case"polyline":return rp;case"horizontal":return sp;case"vertical":return lp;case"height":return cp;case"point":return dp;case"area":return pp;case"rectangle":return mp;case"regular":case"circle":return vp;default:return}}return null==(i=hp(e,t,n,D,l,s,"measurement"))?void 0:i.renderContent}});gp.install=e=>{e.component(gp.name,gp)};const fp=gp,yp=Object.assign({},Ul,{icon:"vc-icons-drawing-point"}),bp=Object.assign({},Ul,{icon:"vc-icons-drawing-polyline"}),Cp=Object.assign({},Ul,{icon:"vc-icons-drawing-polygon"}),wp=Object.assign({},Ul,{icon:"vc-icons-drawing-rectangle"}),Op=Object.assign({},Ul,{icon:"vc-icons-drawing-pin"}),xp=Object.assign({},Xl,{pointOpts:Object.assign({},Gl,{show:!1}),billboardOpts:$l,labelOpts:Object.assign({},Yl,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),Sp=Object.assign({},Ul,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),_p=["pin","point","polyline","polygon","rectangle","regular","circle"],Ep={...sc,drawings:{type:Array,default:()=>_p,validator:e=>{let t=!0;return e.forEach((e=>{_p.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Sp},pinActionOpts:{type:Object,default:()=>Op},pinDrawingOpts:{type:Object,default:()=>xp},pointActionOpts:{type:Object,default:()=>yp},pointDrawingOpts:{type:Object,default:()=>Xl},polylineActionOpts:{type:Object,default:()=>bp},polylineDrawingOpts:{type:Object,default:()=>Jl},polygonActionOpts:{type:Object,default:()=>Cp},polygonDrawingOpts:{type:Object,default:()=>Kl},rectangleActionOpts:{type:Object,default:()=>wp},rectangleDrawingOpts:{type:Object,default:()=>ec},circleActionOpts:{type:Object,default:()=>ac},circleDrawingOpts:{type:Object,default:()=>tc},regularActionOpts:{type:Object,default:()=>oc},regularDrawingOpts:{type:Object,default:()=>ic}},Pp=re(Ep);var Tp=S({name:"VcDrawingPin",props:{...rc,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:fs,setup:(e,t)=>up(e,t,"VcDrawingPin")}),Mp=S({name:"VcDrawingPoint",props:{...rc,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:fs,setup:(e,t)=>up(e,t,"VcDrawingPoint")}),Ip=S({name:"VcDrawingPolyline",props:{...rc,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>ap(e,t,"VcDrawingPolyline")}),jp=S({name:"VcDrawingPolygon",props:{...rc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>ap(e,t,"VcDrawingPolygon")}),Lp=S({name:"VcDrawingRegular",props:{...rc,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcDrawingRegular")}),Ap=S({name:"VcDrawingRectangle",props:{...rc,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fs,setup:(e,t)=>np(e,t,"VcDrawingRectangle")});var Dp=S({name:"VcDrawings",props:Ep,emits:{...fs,fabUpdated:e=>!0},setup(e,t){var i;const n=d();n.cesiumClass="VcDrawings";const{t:a}=Gn(),s={},l=b(Object.assign({},Pp.clearActionOpts,e.clearActionOpts)),c=b(Object.assign({},Pp.mainFabOpts,e.mainFabOpts)),u=b(Object.assign({},Pp.pointActionOpts,e.pointActionOpts)),p=b(Object.assign({},Pp.pointDrawingOpts,e.pointDrawingOpts)),m=b(Object.assign({},Pp.polylineActionOpts,e.polylineActionOpts)),v=b(Object.assign({},Pp.polylineDrawingOpts,e.polylineDrawingOpts)),h=b(Object.assign({},Pp.polygonActionOpts,e.polygonActionOpts)),g=b(Object.assign({},Pp.polygonDrawingOpts,e.polygonDrawingOpts)),f=b(Object.assign({},Pp.rectangleActionOpts,e.rectangleActionOpts)),y=b(Object.assign({},Pp.rectangleDrawingOpts,e.rectangleDrawingOpts)),C=b(Object.assign({},Pp.circleActionOpts,e.circleActionOpts)),w=b(Object.assign({},Pp.circleDrawingOpts,e.circleDrawingOpts)),O=b(Object.assign({},Pp.regularActionOpts,e.regularActionOpts)),x=b(Object.assign({},Pp.regularDrawingOpts,e.regularDrawingOpts)),S=b(Object.assign({},Pp.pinActionOpts,e.pinActionOpts)),_=b(Object.assign({},Pp.pinDrawingOpts,e.pinDrawingOpts));s.pointActionOpts=u,s.pointDrawingOpts=p,s.polylineActionOpts=m,s.polylineDrawingOpts=v,s.polygonActionOpts=h,s.polygonDrawingOpts=g,s.rectangleActionOpts=f,s.rectangleDrawingOpts=y,s.circleActionOpts=C,s.circleDrawingOpts=w,s.regularActionOpts=O,s.regularDrawingOpts=x,s.pinActionOpts=S,s.pinDrawingOpts=_,s.clearActionOpts=l;const E=r((()=>e.drawings.map((e=>({name:e,type:"drawing",actionStyle:{background:s[`${k(e)}ActionOpts`].color,color:s[`${k(e)}ActionOpts`].textColor},actionClass:`vc-draw-${e} vc-draw-button`,actionRef:o(null),actionOpts:s[`${k(e)}ActionOpts`],cmp:P(e),cmpRef:o(null),cmpOpts:s[`${k(e)}DrawingOpts`],tip:s[`${k(e)}ActionOpts`].tooltip.tip||a(`vc.drawing.${k(e)}.tip`),isActive:!1})))));function P(e){switch(e){case"pin":return Tp;case"point":return Mp;case"polyline":return Ip;case"polygon":return jp;case"rectangle":return y.regular?Lp:Ap;case"circle":case"regular":return Lp;default:return}}return null==(i=hp(e,t,n,E,c,l,"drawing"))?void 0:i.renderContent}});Dp.install=e=>{e.component(Dp.name,Dp)};const Rp=Dp;class kp{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._url=e.url;const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=e.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=e.rectangle||this._tilingScheme.rectangle;let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=bo(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=e.subdomains||["01","02","03","04"],this._domain=e.domain||"webst",this._style=e.mapStyle||"6",this._lang=e.lang||"zh_cn",this._scl=e.scl||"1",this._ltype=e.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,Bp.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function Bp(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{domain}",this._domain).replace("{s}",a[(e+t+i)%a.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i);return this._resource.getDerivedResource({url:o,request:n})}var Np=S({name:"VcImageryProviderAmap",props:{url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...Ni,...Hi,...Fi,...Ri,...ki,...Xi},emits:ms,setup(e,t){const i=d();i.cesiumClass="AMapImageryProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||kp,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.AMapImageryProvider(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Vp=S({name:"VcImageryProviderArcgis",props:{url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...ji,...Li,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...Ai,...Di,...Ri,...ki,...Bi,...Ni,...Vi,...zi,...Fi},emits:ms,setup(e,t){const i=d();return i.cesiumClass="ArcGisMapServerImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});class zp{constructor(e,t){isNaN(e)&&(e=isNaN(e)?0:e),p(e)&&(e=parseFloat(e)),isNaN(t)&&(t=isNaN(t)?0:t),p(t)&&(t=parseFloat(t)),this.lng=e,this.lat=t}equals(e){return e&&this.lat===e.lat&&this.lng===e.lng}}zp.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class Fp{constructor(e,t){this.x=e||0,this.y=t||0}equals(e){return e&&e.x===this.x&&e.y===this.y}}const Hp=class{lngLatToMercator(e,t){return Hp.convertLL2MC(e)}lngLatToPoint(e){const t=Hp.convertLL2MC(e);return new Fp(t.lng,t.lat)}mercatorToLngLat(e,t){return Hp.convertMC2LL(e)}pointToLngLat(e){const t=new zp(e.x,e.y);return Hp.convertMC2LL(t)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const a=this.getZoomUnits(t),r=Math.round((e.lng-i.lng)/a+n.width/2),s=Math.round((i.lat-e.lat)/a+n.height/2);return new Fp(r,s)}pixelToPoint(e,t,i,n,o){if(!e)return;const a=this.getZoomUnits(t),r=i.lng+a*(e.x-n.width/2),s=i.lat-a*(e.y-n.height/2),l=new zp(r,s);return this.mercatorToLngLat(l,o)}getZoomUnits(e){return Math.pow(2,18-e)}};let Up=Hp;Up.EARTHRADIUS=6370996.81,Up.MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Up.LLBAND=[75,60,45,30,15,0],Up.MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Up.LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Up.getDistanceByMC=function(e,t){if(!e||!t)return 0;if(!(e=Hp.convertMC2LL(e)))return 0;const i=Hp.toRadians(e.lng),n=Hp.toRadians(e.lat);if(!(t=Hp.convertMC2LL(t)))return 0;const o=Hp.toRadians(t.lng),a=Hp.toRadians(t.lat);return Hp.getDistance(i,o,n,a)},Up.getDistanceByLL=function(e,t){if(!e||!t)return 0;e.lng=Hp.getLoop(e.lng,-180,180),e.lat=Hp.getRange(e.lat,-74,74),t.lng=Hp.getLoop(t.lng,-180,180),t.lat=Hp.getRange(t.lat,-74,74);const i=Hp.toRadians(e.lng),n=Hp.toRadians(e.lat),o=Hp.toRadians(t.lng),a=Hp.toRadians(t.lat);return Hp.getDistance(i,o,n,a)},Up.convertMC2LL=function(e){let t;const i=new zp(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<Hp.MCBAND.length;o++)if(i.lat>=Hp.MCBAND[o]){t=Hp.MC2LL[o];break}const n=Hp.convertor(e,t);return new zp(null==n?void 0:n.lng.toFixed(6),null==n?void 0:n.lat.toFixed(6))},Up.convertLL2MC=function(e){let t;e.lng=Hp.getLoop(e.lng,-180,180),e.lat=Hp.getRange(e.lat,-74,74);const i=new zp(e.lng,e.lat);for(let o=0;o<Hp.LLBAND.length;o++)if(i.lat>=Hp.LLBAND[o]){t=Hp.LL2MC[o];break}if(!t)for(let o=Hp.LLBAND.length-1;o>=0;o--)if(i.lat<=-Hp.LLBAND[o]){t=Hp.LL2MC[o];break}const n=Hp.convertor(e,t);return new zp(null==n?void 0:n.lng.toFixed(2),null==n?void 0:n.lat.toFixed(2))},Up.convertor=function(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new zp(i,o)},Up.getDistance=function(e,t,i,n){return Hp.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))},Up.toRadians=function(e){return Math.PI*e/180},Up.toDegrees=function(e){return 180*e/Math.PI},Up.getRange=function(e,t,i){return null!=t&&(e=Math.max(e,t)),null!=i&&(e=Math.min(e,i)),e},Up.getLoop=function(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e};class Wp{constructor(e){const{defaultValue:t,Ellipsoid:i,WebMercatorProjection:n,Cartesian2:o,Cartographic:a,Math:r,Rectangle:s}=Cesium;e=e||{},this._ellipsoid=t(e.ellipsoid,i.WGS84),this._projection=new n(this._ellipsoid);const l=new Up;this._projection.project=function(t,i){return i=i||{},e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=Mo(r.toDegrees(t.longitude),r.toDegrees(t.latitude)),i=To(i[0],i[1])):i=To(r.toDegrees(t.longitude),r.toDegrees(t.latitude))),i[0]=Math.min(i[0],180),i[0]=Math.max(i[0],-180),i[1]=Math.min(i[1],74.000022),i[1]=Math.max(i[1],-71.988531),i=l.lngLatToPoint(new zp(i[0],i[1])),new o(i.x,i.y)},this._projection.unproject=function(t,i){return i=i||{},(i=l.mercatorToLngLat(new zp(t.x,t.y)))[0]=(i[0]+180)%360-180,e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=Po(i.lng,i.lat),i=Io(i[0],i[1])):i=Po(i.lng,i.lat)),new a(Cesium.Math.toRadians(i[0]),Cesium.Math.toRadians(i[1]))},this._rectangleSouthwestInMeters=new o(-20037726.37,-12474104.17),this._rectangleNortheastInMeters=new o(20037726.37,12474104.17);const c=this._projection.unproject(this._rectangleSouthwestInMeters),u=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s(c.longitude,c.latitude,u.longitude,u.latitude),this.resolutions=[];for(let d=0;d<19;d++)this.resolutions[d]=256*Math.pow(2,18-d)}getNumberOfXTilesAtLevel(e){return 1<<e}getNumberOfYTilesAtLevel(e){return 1<<e}rectangleToNativeRectangle(e,t){const{defined:i,Rectangle:n}=Cesium,o=this._projection,a=o.project(n.southwest(e)),r=o.project(n.northeast(e));return i(t)?(t.west=a.x,t.south=a.y,t.east=r.x,t.north=r.y,t):new n(a.x,a.y,r.x,r.y)}tileXYToNativeRectangle(e,t,i,n){const{defined:o,Rectangle:a}=Cesium,r=this.resolutions[i],s=e*r,l=(e+1)*r,c=(1+(t=-t))*r,u=t*r;return o(n)?(n.west=s,n.south=u,n.east=l,n.north=c,n):new a(s,u,l,c)}tileXYToRectangle(e,t,i,n){const{Cartesian2:o}=Cesium,a=this.tileXYToNativeRectangle(e,t,i,n),r=this._projection,s=r.unproject(new o(a.west,a.south)),l=r.unproject(new o(a.east,a.north));return a.west=s.longitude,a.south=s.latitude,a.east=l.longitude,a.north=l.latitude,a}positionToTileXY(e,t,i){const{Rectangle:n,defined:o,Cartesian2:a}=Cesium,r=this._rectangle;if(!n.contains(r,e))return;const s=this._projection.project(e);if(!o(s))return;const l=this.resolutions[t],c=Math.floor(s.x/l),u=-Math.floor(s.y/l);return o(i)?(i.x=c,i.y=u,i):new a(c,u)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class Gp{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=i(e.subdomains,["0","1","2","3"]),e.url?this._url=e.url:"img"===e.mapStyle?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":"vec"===e.mapStyle?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi2_0":"traffic"===e.mapStyle?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||18,this._tilingScheme=new Wp(e),this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=bo(),this._ready=!0,this._readyPromise.resolve(!0),this._labelStyle=e.labelStyle||"web2D",this._qt=e.qt,this._styles=e.styles,this._scale=e.scale,this._ak=e.ak,this._mapStyle=e.mapStyle}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,$p.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function $p(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{time}",String((new Date).getTime())).replace("{udt}",String((new Date).getTime()));return this._resource.getDerivedResource({url:o,request:n})}var Zp=S({name:"VcImageryProviderBaidu",props:{...Ii,...Ri,...Bi,...Li,...Ni,...Hi,...Fi,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"E4805d16520de693a3fe707cdc962045"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"}},emits:ms,setup(e,t){const i=d();i.cesiumClass="BaiduMapImageryProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||Gp,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Yp=S({name:"VcImageryProviderBing",props:{url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...Bi,...Li},emits:ms,setup(e,t){const i=d();return i.cesiumClass="BingMapsImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var qp=S({name:"VcImageryProviderGoogle",props:{...Ii,...Bi,...Li,...Ni,metadata:Object},emits:ms,setup(e,t){const i=d();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Xp=S({name:"VcImageryProviderGrid",props:{...ki,...Bi,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:Pe}},...Bn,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:Pe}},...Vi,...zi,canvasSize:{type:Number,default:256}},emits:ms,setup(e,t){const i=d();return i.cesiumClass="GridImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}}),Qp=S({name:"VcImageryProviderIon",props:{assetId:Number,...Wi,server:[String,Object]},emits:ms,setup(e,t){const i=d();return i.cesiumClass="IonImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Jp=S({name:"VcImageryProviderMapbox",props:{url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...Wi,tilesize:{type:Number,default:512},scaleFactor:Boolean,...Bi,...Hi,...Fi,...Ri,...Ni},emits:ms,setup(e,t){const i=d();return i.cesiumClass="MapboxStyleImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Kp=S({name:"VcImageryProviderOsm",props:{url:{type:String,default:"https://a.tile.openstreetmap.org"},...Ui,...Ri,...Hi,...Fi,...Bi,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}},emits:ms,setup(e,t){const i=d();return i.cesiumClass="OpenStreetMapImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var em=S({name:"VcImageryProviderSingletile",props:{...Ii,...Ri,...Ni,...Bi},emits:ms,setup(e,t){const i=d();return i.cesiumClass="SingleTileImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const tm=1,im=2,nm=3;class om{constructor(e){if(!Cesium.defined(e.name))throw new Cesium.DeveloperError("options.name is required.");const t=window.indexedDB.open(this.dbname);this.layer=e.layer||null,this.storageType=e.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=e.name;const i=this;return new Promise(((e,n)=>{t.onsuccess=t=>{i.db=t.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},e(i)},t.onupgradeneeded=t=>{i.db=t.target.result,i.version=i.db.version,e(i)},t.onerror=e=>{i.db=null,n("create database fail, error code : "+e.target.errorcode)}}))}checkObjectStoreExist(e){return!!Cesium.defined(this.db)&&this.db.objectStoreNames.contains(e)}createObjectStore(e){return new Promise(((t,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(e))return void i(!1);this.creatingTable=!0;const n=parseInt(this.db.version);this.db.close();const o=this,a=window.indexedDB.open(this.dbname,n+1);a.onupgradeneeded=i=>{const n=i.target.result;o.db=n;const a=n.createObjectStore(e,{keyPath:"id"});if(Cesium.defined(a)){a.createIndex("value","value",{unique:!1}),o.creatingTable=!1,o.cachestatus=o.cachestatus||{},o.cachestatus[e]={},o.db.close();window.indexedDB.open(o.dbname).onsuccess=e=>{o.db=e.target.result,t(!0)}}else o.creatingTable=!1,t(!1)},a.onsuccess=e=>{e.target.result.close(),t(!0)},a.onerror=e=>{o.creatingTable=!1,i(!1)}}}))}putElementInDB(e,t,i){return new Promise(((n,o)=>{if(!Cesium.defined(this.db))return void o(!1);const{cachestatus:a,db:r}=this;if(Cesium.defined(a[e])&&Cesium.defined(a[e][t]&&(a[e][t]===tm||a[e][t]===im)))n(!1);else if(r.objectStoreNames.contains(e)){a[e]=a[e]||{};try{const o=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a[e][t]=tm,o.onsuccess=i=>{a[e][t]=im,n(!0)},o.onerror=i=>{a[e][t]=nm,n(!1)}}catch(s){return void o(null)}}else this.createObjectStore(e).then((()=>{const a=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a.onsuccess=function(e){n(!0)},a.onerror=function(e){o(!1)}}),(()=>{o(!1)}))}))}getElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(!Cesium.defined(o))return null;if(!o.objectStoreNames.contains(e))return null;try{const a=o.transaction([e]),r=a.objectStore(e).get(t);r.onsuccess=e=>Cesium.defined(e.target.result)?i(e.target.result.value):n(null),r.onerror=e=>{n(null)}}catch(a){n(null)}}))}updateElementInDB(e,t,i){return new Promise(((n,o)=>{const{db:a}=this;if(Cesium.defined(a))if(a.objectStoreNames.contains(e))try{const o=a.transaction([e],"readwrite").objectStore(e).put({id:t,value:i});o.onsuccess=()=>{n(!0)},o.onerror=()=>{n(!1)}}catch(_h){n(!1)}else n(!1);else n(!1)}))}removeElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(Cesium.defined(o))if(o.objectStoreNames.contains(e))try{const n=o.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{i(!0)},n.onerror=()=>{i(!1)}}catch(_h){i(!1)}else i(!1);else i(!1)}))}clear(e){return new Promise(((t,i)=>{const{db:n}=this;if(Cesium.defined(n))if(n.objectStoreNames.contains(e))try{const i=n.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>{t(!0)},i.onerror=()=>{t(!1)}}catch(_h){t(!1)}else t(!1);else t(!1)}))}}class am{constructor(e){const{appendForwardSlash:t,Credit:i,defaultValue:n,defined:o,DeveloperError:a,Event:r,Resource:s,Math:l}=Cesium;e=n(e,{});const{url:c}=e;if(!o(c))throw new a("options.url is required.");const u=c.substring(0,c.indexOf("datas"));this.tablename=c.substring(0,c.indexOf("datas/")+6,c.length);const d=this;new om({name:u+this.tablename}).then((e=>{d._indexedDBScheduler=e})),this._indexedDBSetting={isOpen:!1,clear:()=>{d._indexedDBScheduler.clear(d.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=t(c);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=e.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new a("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=s.createIfNeeded(p),this._transparent=n(e.transparent,!0),this._name=e.name||"",this._urlTemplate=void 0,this._errorEvent=new r,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._fRatio=n(e.ratio,l.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let m=n(e.credit,new i("MapQuest, SuperMap iServer Imagery"));"string"==typeof m&&(m=new i(m)),this._credit=m,this._ready=!1,this._readyPromise=bo(),this._options=e,um.call(this)}get url(){return this._url}get name(){return this._name}set name(e){this._name=e}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(e){this._fRatio=e}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){const{defined:o,DeveloperError:a,ImageryProvider:r}=Cesium;if(!this.ready)throw new a("requestImage must not be called before the imagery provider is ready.");const s=cm.call(this,e,t,i),l=this._resource.getDerivedResource({url:s,request:n}),c=this;if(!this._indexedDBSetting.isOpen)return r.loadImage(this,l);if(o(this._indexedDBScheduler)){const e=this._indexedDBScheduler.getElementFromDB(this.tablename,s);try{return e.then((e=>{if(o(e)){const t=new Image;return t.src=e,t}return r.loadImage(c,l)}))}catch(_h){return r.loadImage(c,l)}}}pickFeatures(e,t,i,n,o){}}let rm={};const sm=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],lm=[1.690163571602655e-9,3.3803271432053056e-9,6.760654286410611e-9,1.3521308572821242e-8,2.7042617145642484e-8,5.408523429128511e-8,1.0817046858256998e-7,2.1634093716513974e-7,4.3268187433028044e-7,8.653637486605571e-7,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function cm(e,t,i){let n;if(this.isTileMap){if("DEGREE"===this._coordUnit){const o=sm[i+1]||sm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if("METER"===this._coordUnit){const o=sm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}function um(){const{Resource:e}=Cesium;if(this.isTileMap){const t=e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});try{t.then((e=>{gm.call(this,e)}))}catch(_h){fm.call(this)}}else try{e.fetchText({url:this.url+"config"}).then((e=>{dm.call(this,e)}))}catch(_h){fm.call(this)}}function dm(e){const t=pm.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const s=t.levels,l=s.length;if(this._minimumLevel=i(s[0],0),this._maximumLevel=i(s[l-1],l-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const e=a.toRadians(t.left),i=a.toRadians(t.right),n=a.toRadians(t.bottom),o=a.toRadians(t.top);this._rectangle=new r(e,n,i,o)}const c=this._tilingScheme;this._rectangle.west<c.rectangle.west&&(this._rectangle.west=c.rectangle.west),this._rectangle.east>c.rectangle.east&&(this._rectangle.east=c.rectangle.east),this._rectangle.south<c.rectangle.south&&(this._rectangle.south=c.rectangle.south),this._rectangle.north>c.rectangle.north&&(this._rectangle.north=c.rectangle.north);const u=c.positionToTileXY(r.southwest(this._rectangle),this._minimumLevel),d=c.positionToTileXY(r.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(d.x-u.x)+1)*(window.Math.abs(d.y-u.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=c,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function pm(e){const t="http://www.supermap.com/SuperMapCache/sci3d",i=(e=(new DOMParser).parseFromString(e,"application/xml")).childNodes[0],n=function(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),a=o.length;for(let e=0;e<a;e++){const a=o[e];a.localName===t&&-1!==i.indexOf(a.namespaceURI)&&n.push(a)}return n}}(hm(i,"Levels",t),"Level",t)||[],o=[];for(let v=0;v<n.length;v++)o.push(parseInt(n[v].textContent,10));const a=hm(i,"Bounds",t),r=vm(a,"Left",t),s=vm(a,"Right",t),l=vm(a,"Top",t),c=vm(a,"Bottom",t),u=mm(i,"FileExtentName",t),d=vm(i,"CellWidth",t),p=vm(i,"CellHeight",t),m=mm(i,"CacheName",t);return this._name=m||"",{left:r,right:s,top:l,bottom:c,fileExtentName:u,levels:o,imageSizeWidth:d,imageSizeHeight:p}}function mm(e,t,i){const n=hm(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function vm(e,t,i){const n=hm(e,t,i);if(Cesium.defined(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function hm(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let e=0;e<o;e++){const o=n[e];if(o.localName===t&&-1!==i.indexOf(o.namespaceURI))return o}}}function gm(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r,WebMercatorTilingScheme:s}=Cesium,l=e.prjCoordSys.coordUnit;this._coordUnit=l;const c=e.bounds,u=e.visibleScales;if(n(u)&&u.length>1&&n(this._maximumLevel)){const e=u[u.length-1];this._maximumLevel=function(e){for(let t=lm.length;t--;)if(e[t]<=e)return t}(e)}if("DEGREE"===l)this._tilingScheme=new o,c.left=a.clamp(c.left,-180,180),c.bottom=a.clamp(c.bottom,-90,90),c.right=a.clamp(c.right,-180,180),c.top=a.clamp(c.top,-90,90),this._rectangle=r.fromDegrees(c.left,c.bottom,c.right,c.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const e=new t(c.left,c.bottom,0);e.x=Math.max(-20037508.342789244,e.x),e.y=Math.max(-20037508.342789244,e.y);const i=new t(c.right,c.top,0);i.x=Math.min(20037508.342789244,i.x),i.y=Math.min(20037508.342789244,i.y),this._tilingScheme=new s;const n=this._tilingScheme.projection.unproject(e),o=this._tilingScheme.projection.unproject(i);this._rectangle=new r(n.longitude,n.latitude,o.longitude,o.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function fm(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";rm=e.handleError(rm,this,this._errorEvent,i,0,0,0,um.bind(this)),this._readyPromise.reject(new t(i))}var ym=S({name:"VcImageryProviderSupermap",props:{url:String,...Hi,...Fi,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...Xi},emits:ms,setup(e,t){const i=d();i.cesiumClass="SuperMapImageryProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||am,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.SuperMapImageryProvider(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const bm={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class Cm{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=e.subdomains||["1","2","3"],this._url=e.url||[e.protocol||"",bm[e.mapStyle]||bm.vector].join("");const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=bo(),this._ready=!0,this._readyPromise.resolve(!0),this._style=e.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,wm.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function wm(e,t,i,n){let o=this._url;const a=this._subdomains,r=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",r);return this._resource.getDerivedResource({url:o,request:n})}var Om=S({name:"VcImageryProviderTencent",props:{...Ii,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...Ni,...Hi,...Fi,...Ri,...ki,...Xi},emits:ms,setup(e,t){const i=d();i.cesiumClass="TencentImageryProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||Cm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TencentImageryProvider(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const xm={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"},Sm={},_m={},Em={},Pm={},Tm={},Mm={};class Im{constructor(e){Object.keys(xm).forEach((t=>{switch(Sm[xm[t]]=e.protocol+"://{s}.tianditu.gov.cn/"+xm[t]+"/wmts",_m[xm[t]]=xm[t].slice(0,3),Em[xm[t]]=xm[t].slice(4),Pm[xm[t]]="tiles","w"===Em[xm[t]]?Tm[xm[t]]="900913":Tm[xm[t]]="4490",xm[t]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":Mm[xm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":Mm[xm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":Mm[xm[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":Mm[xm[t]]=["1","2","3","4","5","6","7","8","9","10"]}}));const{Credit:t,defaultValue:i,Event:n,GeographicTilingScheme:o,WebMercatorTilingScheme:a,when:r}=Cesium;e=i(e,{}),this._mapStyle=i(e.mapStyle,xm.IMG_W),this._url=e.url||i(e.url,Sm[this._mapStyle]),this._token=e.token,this._layer=i(e.layer,_m[this._mapStyle]),this._style=i(e.style,"default"),this._tileMatrixSetID=i(e.tileMatrixSetID,Em[this._mapStyle]),this._tileMatrixLabels=i(e.tileMatrixLabels,Mm[this._mapStyle]),this._format=i(e.format,Pm[this._mapStyle]),this._epsgCode=Tm[this._mapStyle],this._tilingScheme="900913"===this._epsgCode?new a:new o,this._tileWidth=i(e.tileWidth,256),this._tileHeight=i(e.tileHeight,256),this._minimumLevel=i(e.minimumLevel,0),this._maximumLevel=i(e.maximumLevel,Mm[this._mapStyle].length),this._rectangle=i(e.rectangle,this.tilingScheme.rectangle),this._readyPromise=Promise.resolve(!0),this._errorEvent=new n;const s=i(e.credit,"天地图全球影像服务");this._credit="string"==typeof s?new t(s):s,this._subdomains=i(e.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=e.tileDiscardPolicy}requestImage(e,t,i){const n=jm.call(this,e,t,i);return Cesium.ImageryProvider.loadImage(this,n)}pickFeatures(e,t,i,n,o){}get url(){return this._url}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get readyPromise(){return this._readyPromise}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function jm(e,t,i){var n;const{combine:o,defined:a,defaultValue:r,queryToObject:s,objectToQuery:l,Uri:c}=Cesium,u=(0,Object.freeze)({service:"WMTS",version:"1.0.0",request:"GetTile"});"900913"===this._epsgCode&&(i-=1);const d=this._tileMatrixLabels,p=a(d)?d[i]:i.toString(),m=this._subdomains;let v=this._url.replace("{s}",m[(e+t+i)%m.length]);const h=new c(v);let g=s(r(null==(n=h.query)?void 0:n.call(h),""));g=o(u,g),g.tilematrix=p,g.layer=this._layer,g.style=this._style,g.tilerow=t,g.tilecol=e,g.tilematrixset=this._tileMatrixSetID,g.format=this._format;const f=l(g);return v=h.toString()+"?"+f,a(this._proxy)&&(v=this._proxy.getURL(v)),a(this._token)&&(v+="&tk="+this._token),v}var Lm=S({name:"VcImageryProviderTianditu",props:{...Ii,...Hi,...Fi,...Ri,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","ela_c","ela_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"天地图全球影像服务"},...Xi},emits:ms,setup(e,t){const i=d();i.cesiumClass="TiandituImageryProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||Im,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TiandituImageryProvider(t)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Am=S({name:"VcImageryProviderTileCoordinates",props:{...ki,...Bi,color:{type:[Object,String,Array],default:"YELLOW"},...Vi,...zi},emits:ms,setup(e,t){const i=d();return i.cesiumClass="TileCoordinatesImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Dm=S({name:"VcImageryProviderTms",props:{url:[String,Object],...Ui,...Ni,...Hi,...Fi,...Ri,...ki,...Bi,...Vi,...zi,flipXY:Boolean,...Xi},emits:ms,setup(e,t){const i=d();return i.cesiumClass="TileMapServiceImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Rm=S({name:"VcImageryProviderTiledcache",props:{...Ii,...Gi,...Ni,...Hi,...Fi,...Ri,...ki,...Bi,...Vi,...zi,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}},emits:ms,setup(e,t){const i=d();i.cesiumClass="UrlTemplateImageryProvider";const n=Ro(e,t,i);if(void 0===n)return;i.createCesiumObject=async()=>{const t=n.transformProps(e),{Credit:i,defined:a,defaultValue:r,DeveloperError:s,Ellipsoid:l,GeographicTilingScheme:c,Rectangle:u,Resource:d,UrlTemplateImageryProvider:p}=Cesium,{url:m,dir:v,format:h}=t;if(!a(m))throw new s("options.url is required.");if(!a(v))throw new s("options.dir is required.");const g=d.createIfNeeded(m);g.url+=`?dir=${v}&scale={scale}&col={x}&row={y}&format=${h}`;const f=r(t.tilingScheme,new c({ellipsoid:r(t.ellipsoid,l.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),y=r(t.tileWidth,256),b=r(t.tileHeight,256),C=t.maximumLevel,w=r(t.minimumLevel,0),O=r(t.rectangle,f.rectangle),x=f.positionToTileXY(u.southwest(O),w),S=f.positionToTileXY(u.northeast(O),w),_=(Math.abs(S.x-x.x)+1)*(Math.abs(S.y-x.y)+1);if(_>4)throw new s("The rectangle and minimumLevel indicate that there are "+_+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let E=r(t.credit,"");return"string"==typeof E&&(E=new i(E)),new p({url:g,credit:E,tilingScheme:f,tileWidth:y,tileHeight:b,minimumLevel:w,maximumLevel:C,rectangle:O,customTags:{scale:(t,i,n,a)=>{const r=1/e.scales[a];return o(t,"{scale}",r)}}})};const o=(e,t,i)=>{if(e&&e.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(e.urlSchemeZeroPadding,t)){const n=e.urlSchemeZeroPadding[t];if("string"==typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i};return()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var km=S({name:"VcImageryProviderUrltemplate",props:{...Ii,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...$i,...Ni,...Hi,...Fi,...Ri,...ki,...Bi,...Vi,...zi,hasAlphaChannel:{type:Boolean,default:!0},...Zi,...Di,customTags:Object,...Xi},emits:ms,setup(e,t){const i=d();return i.cesiumClass="UrlTemplateImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Bm=S({name:"VcImageryProviderWms",props:{...Ii,...Ai,parameters:Object,getFeatureInfoParameters:Object,...Di,...Zi,...Ri,...ki,...Bi,...Vi,...zi,...Hi,...Fi,crs:String,srs:String,...Ni,...$i,...Yi,...qi,getFeatureInfoUrl:[String,Object]},emits:ms,setup(e,t){const i=d();return i.cesiumClass="WebMapServiceImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Nm=S({name:"VcImageryProviderWmts",props:{...Ii,...Gi,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...Yi,...qi,dimensions:Object,...Vi,...zi,...ki,...Ri,...Hi,...Fi,...Bi,...Ni,...$i},emits:ms,setup(e,t){const i=d();return i.cesiumClass="WebMapTileServiceImageryProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Vm=S({name:"VcTerrainProviderCesium",props:{url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},...Bi,...Ni},emits:ms,setup(e,t){const i=d();i.cesiumClass="CesiumTerrainProvider";const n=Ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return Cesium.defined(t.url)?new Cesium.CesiumTerrainProvider(t):Cesium.createWorldTerrain({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask})},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var zm=S({name:"VcTerrainProviderArcgis",props:{url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...Bi,...ji},emits:ms,setup(e,t){const i=d();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Fm=S({name:"VcTerrainProviderVrTheworld",props:{url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...Bi,...Ni},emits:ms,setup(e,t){const i=d();return i.cesiumClass="VRTheWorldTerrainProvider",Ro(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Hm=S({name:"VcTerrainProviderTianditu",props:{url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String},emits:ms,setup(e,t){const i=d();i.cesiumClass="GeoTerrainProvider";const n=Ro(e,t,i);if(void 0===n)return;const{emit:o}=t,a=ko();let r;return i.createCesiumObject=async()=>new Promise(((t,i)=>{r=document.createElement("script"),document.body.appendChild(r),r.src=e.pluginPath,r.onload=()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const i=[];for(let t=0;t<e.subdomains.length;t++){const n=e.url.replace("{s}",e.subdomains[t])+"mapservice/swdx?tk="+e.token;i.push(n)}t(new Cesium.GeoTerrainProvider({urls:i}))}})),i.unmount=async()=>{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{ge(i,"readyPromise")&&o("readyPromise",e,null==a?void 0:a.viewer,i.proxy)})),a&&(a.viewer.terrainProvider=e),null==r||r.parentNode.removeChild(r),!0},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Np,Vp,Zp,Yp,qp,Xp,Qp,Jp,Kp,em,ym,Om,Lm,Am,Dm,Rm,km,Bm,Nm,Vm,zm,Fm,Hm].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Um=Np,Wm=Vp,Gm=Zp,$m=Yp,Zm=qp,Ym=Xp,qm=Qp,Xm=Jp,Qm=Kp,Jm=em,Km=ym,ev=Om,tv=Lm,iv=Am,nv=Dm,ov=Rm,av=km,rv=Bm,sv=Nm,lv=Vm,cv=zm,uv=Fm,dv=Hm;var pv=S({name:"VcDatasourceCustom",props:{...ut,...zn,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}},emits:gs,setup(e,t){const i=d();return i.cesiumClass="CustomDataSource",Qn(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var mv=S({name:"VcDatasourceCzml",props:{...ut,...zn,entities:{type:Array,default:()=>[]},czml:{type:[String,Object],required:!0},...Rn,...Ni,destroy:{type:Boolean,default:!1}},emits:gs,setup(e,t){const i=d();i.cesiumClass="CzmlDataSource";const n=Qn(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,t)},()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var vv=S({name:"VcDatasourceGeojson",props:{...ut,...zn,entities:{type:Array,default:()=>[]},...Dn,...Rn,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:Pe}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:Pe}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:Pe}},...Oi,...Ni,destroy:{type:Boolean,default:!1}},emits:gs,setup(e,t){const i=d();i.cesiumClass="GeoJsonDataSource";const n=Qn(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,t)},()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var hv=S({name:"VcDatasourceKml",props:{...ut,...zn,entities:{type:Array,default:()=>[]},...Dn,camera:Object,canvas:HTMLCanvasElement,...Rn,...Oi,...Bi,...Ni,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]},emits:gs,setup(e,t){const i=d();i.cesiumClass="KmlDataSource";const n=Qn(e,t,i),o=ko();return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.camera||(t.camera=null==o?void 0:o.viewer.camera),t.canvas||(t.canvas=null==o?void 0:o.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",t)},()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[pv,mv,vv,hv].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const gv=pv,fv=mv,yv=vv,bv=hv;var Cv=S({name:"VcGraphicsBillboard",props:{...nt,...lt,...at,...Ke,...it,...mt,...tt,...qe,...st,...Ye,...dt,...vt,...et,...ct,...pt,...rt,...Qe,...ut,...Je,...ot},emits:ps,setup(e,t){const i=d();return i.cesiumClass="BillboardGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var wv=S({name:"VcGraphicsBox",props:{...ut,...ht,...tt,...gt,...ft,...yt,...bt,...Ct,...wt,...Je},emits:ps,setup(e,t){const i=d();return i.cesiumClass="BoxGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ov=S({name:"VcGraphicsCorridor",props:{...ut,...Ot,...vt,...et,...tt,...xt,...St,..._t,...Et,...gt,...ft,...yt,...bt,...Ct,...wt,...Je,...Pt,...Tt},emits:ps,setup(e,t){const i=d();return i.cesiumClass="CorridorGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var xv=S({name:"VcGraphicsCylinder",props:{...ut,...Mt,...It,...jt,...tt,...gt,...ft,...yt,...bt,...Ct,...Lt,...At,...wt,...Je},emits:ps,setup(e,t){const i=d();return i.cesiumClass="CylinderGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sv=S({name:"VcGraphicsEllipse",props:{...ut,...Dt,...Rt,...et,...tt,...xt,...St,...st,...kt,...Et,...gt,...ft,...yt,...bt,...Ct,...Lt,...wt,...Je,...Pt,...Tt},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipseGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _v=S({name:"VcGraphicsEllipsoid",props:{...ut,...Bt,...Nt,...Vt,...zt,...Ft,...Ht,...tt,...gt,...ft,...yt,...bt,...Ct,...Ut,...Wt,...Gt,...wt,...Je},emits:us,setup(e,t){const i=d();return i.cesiumClass="EllipsoidGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ev=S({name:"VcGraphicsLabel",props:{...ut,...$t,...Zt,...Yt,...lt,...qt,...Xt,...Qt,...at,...Ke,...it,...mt,...tt,...Jt,...bt,...Ct,...pt,...rt,...ct,...Je,...Qe},emits:us,setup(e,t){const i=d();return i.cesiumClass="LabelGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pv=S({name:"VcGraphicsModel",props:{...ut,...Kt,...lt,...ei,...ti,...ii,...ni,...oi,...wt,...tt,...ai,...ri,...qe,...si,...li,...ci,...ui,...Je,...di,...pi,...mi},emits:us,setup(e,t){const i=d();return i.cesiumClass="ModelGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Tv=S({name:"VcGraphicsPath",props:{...ut,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...vt,resolution:{type:[Number,Object,Function],default:60},...ft,...Je},emits:us,setup(e,t){const i=d();return i.cesiumClass="PathGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Mv=S({name:"VcGraphicsPlane",props:{...ut,...vi,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:be}},...gt,...ft,...yt,...bt,...Ct,...wt,...Je},emits:us,setup(e,t){const i=d();return i.cesiumClass="PlaneGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Iv=S({name:"VcGraphicsPoint",props:{...ut,...hi,...tt,...qe,...bt,...Ct,...ct,...pt,...Je,...Qe},emits:us,setup(e,t){const i=d();return i.cesiumClass="PointGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var jv=S({name:"VcGraphicsPolygon",props:{...ut,...gi,...et,...tt,...xt,...St,...kt,...Et,...gt,...ft,...yt,...bt,...Ct,...fi,...yi,...bi,...Ci,...wt,...Je,...Pt,...Tt},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolygonGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Lv=S({name:"VcGraphicsPolyline",props:{...ut,...Ot,...vt,...Et,...ft,...wi,...Ci,...Oi,...wt,...Je,...Pt,...Tt},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolylineGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Av=S({name:"VcGraphicsPolylineVolume",props:{...ut,...Ot,...xi,..._t,...Et,...gt,...ft,...yt,...bt,...Ct,...wt,...Je},emits:us,setup(e,t){const i=d();return i.cesiumClass="PolylineVolumeGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Dv=S({name:"VcGraphicsRectangle",props:{...ut,...Si,...et,...tt,...xt,...St,...st,...kt,...Et,...gt,...ft,...yt,...bt,...Ct,...wt,...Je,...Pt,...Tt},emits:us,setup(e,t){const i=d();return i.cesiumClass="RectangleGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Rv=S({name:"VcGraphicsTileset",props:{...ut,...Kt,..._i},emits:us,setup(e,t){const i=d();return i.cesiumClass="Cesium3DTilesetGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var kv=S({name:"VcGraphicsWall",props:{...ut,...Ot,...Ei,...Pi,...Et,...gt,...ft,...yt,...bt,...Ct,...wt,...Je},emits:us,setup(e,t){const i=d();return i.cesiumClass="WallGraphics",Kn(e,t,i),()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Cv,wv,Ov,xv,Sv,_v,Ev,Pv,Tv,Mv,Iv,jv,Lv,Av,Dv,Rv,kv].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Bv=Cv,Nv=wv,Vv=Ov,zv=xv,Fv=Sv,Hv=_v,Uv=Ev,Wv=Pv,Gv=Tv,$v=Mv,Zv=Iv,Yv=jv,qv=Lv,Xv=Av,Qv=Dv,Jv=Rv,Kv=kv;var eh=S({name:"VcPostProcessStage",props:{fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...Nn,...Vn,name:String},emits:us,setup(e,t){const i=d();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:o}=n;return i.mount=async()=>{const{postProcessStages:e}=o,t=e.add(i.cesiumObject);return e.contains(t)},i.unmount=async()=>{const{postProcessStages:e}=o;return null==e?void 0:e.remove(i.cesiumObject)},()=>{var e;return T(ne((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const th={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]};var ih=S({name:"VcPostProcessStageScan",props:{type:{type:String,default:"radar"},options:Object},emits:us,setup(e,t){const i=d();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const a=o(""),s=o(null),{$services:l}=n,c=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=new Cesium.Cartographic(n.longitude+Cesium.Math.toRadians(.001),n.latitude,n.height),u=Cesium.Cartographic.toCartesian(c,i.scene.globe.ellipsoid),d=new Cesium.Cartesian4(u.x,u.y,u.z,1),p=new Cesium.Quaternion,m=new Cesium.Matrix3,v=(new Date).getTime(),h=new Cesium.Cartesian4,g=new Cesium.Cartesian4,f=new Cesium.Cartesian4,y=new Cesium.Cartesian3,b=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform vec3 u_scanLineNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 v01 = testPt - ptOnLine;\n    normalize(v01);\n    vec3 temp = cross(v01, lineNormal);\n    float d = dot(temp, u_scanPlaneNormalEC);\n    return d > 0.5;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n    return length(tempPt - ptOnLine);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    float twou_radius = u_radius * 2.0;\n    if(dis < u_radius)\n    {\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n      {\n        float dis1= length(prjOnPlane.xyz - lineEndPt);\n        f = abs(twou_radius -dis1) / twou_radius;\n        f = pow(f, 3.0);\n      }\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g);return y.x=t.x-e.x,y.y=t.y-e.y,y.z=t.z-e.z,Cesium.Cartesian3.normalize(y,y),y},u_radius:t.radius,u_scanLineNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),n=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g),o=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,f);y.x=n.x-e.x,y.y=n.y-e.y,y.z=n.z-e.z,Cesium.Cartesian3.normalize(y,y),b.x=o.x-e.x,b.y=o.y-e.y,b.z=o.z-e.z;const r=((new Date).getTime()-v)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(y,r*Cesium.Math.PI*2,p),Cesium.Matrix3.fromQuaternion(p,m),Cesium.Matrix3.multiplyByVector(m,b,b),Cesium.Cartesian3.normalize(b,b),b},u_scanColor:t.color}}}}}(l),u=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=(new Date).getTime(),u=new Cesium.Cartesian4,d=new Cesium.Cartesian4,p=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius)\n    {\n      float f = 1.0 -abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,d);return p.x=t.x-e.x,p.y=t.y-e.y,p.z=t.z-e.z,Cesium.Cartesian3.normalize(p,p),p},u_radius:function(){return t.radius*(((new Date).getTime()-c)%t.interval)/t.interval},u_scanColor:t.color}}}}}(l);let p=[];const m=r((()=>Object.assign({},th,e.options)));return p.push(f((()=>m),(e=>{i.mounted&&i.proxy.reload()}),{deep:!0})),i.createCesiumObject=async()=>{const t=n.transformProps(m.value);let i;return"radar"===e.type?i=c.webgl(t):"circle"===e.type&&(i=u.webgl(t)),a.value=i.shaderSource,s.value=i.uniforms,!0},h((()=>{p.forEach((e=>e())),p=[]})),()=>O(eh,{fragmentShader:a.value,uniforms:s.value})}});var nh=S({name:"VcPostProcessStageCollection",props:{postProcesses:{type:Array,default:()=>[]}},emits:us,setup(e,t){const i=d();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=Xn(e,t,i);if(void 0===n)return;const{$services:o}=n,a=[];let r=[];return r.push(f((()=>e.postProcesses),(e=>{var t,n;i.mounted&&(null==(n=(t=i.proxy).reload)||n.call(t))}),{deep:!0})),i.createCesiumObject=async()=>a,i.mount=async()=>{const{postProcessStages:t}=o;return e.postProcesses.forEach((e=>{const i=n.transformProps(e);a.push(t.add(new Cesium.PostProcessStage(i)))})),!0},i.unmount=async()=>{const{postProcessStages:e}=o;return a.forEach((t=>{e.remove(t)})),a.length=0,!0},h((()=>{r.forEach((e=>e())),r=[]})),()=>{var e,n;return t.slots.default?O("i",{class:ne((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},fa(t.slots.default)):T(ne((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[eh,ih,nh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const oh=eh,ah=ih,rh=nh;var sh=S({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>Hn},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"}},setup(e,{slots:t}){const i=ue(e);return()=>B(t,"default",{config:null==i?void 0:i.value})}});sh.install=e=>{e.component(sh.name,sh)};const lh=sh,ch=lh,uh={...us,stop:e=>!0};var dh=S({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...Cn},emits:uh,setup(e,t){var i;const n=d();n.cesiumClass="VcAnalysisFlood",n.cesiumEvents=[];const a=Xn(e,t,n);if(void 0===a)return;const{emit:r}=t,s=o(!1);null==(i=ye(n).proxy.creatingPromise)||i.then((()=>{s.value=!0}));const l=o(!1),c=o(null),u=o(-1),p=o(null);let m=!1,v=[];v.push(f((()=>e.minHeight),(e=>{u.value=e}))),n.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:t}=Cesium;return c.value={color:t.fromColor(Pe(e.color))},p.value},n.mount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.addEventListener(g),!0},n.unmount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.removeEventListener(g),u.value=-1,l.value=!1,!0};const g=()=>{if(l.value)if(u.value<=e.maxHeight)u.value+=e.speed,m=!1;else{ge(n,"stop")&&r("stop",p.value),m=!0,e.loop?u.value=e.minHeight:l.value=!1}};return h((()=>{v.forEach((e=>e())),v=[]})),Object.assign(n.proxy,{start:()=>{u.value=e.minHeight,l.value=!0},pause:()=>{l.value=!l.value,m&&(u.value=e.minHeight)},stop:()=>{u.value=-1,l.value=!1}}),()=>{if(s.value){const{createGuid:t}=Cesium;return O(Zc,{asynchronous:!1,ref:p},(()=>O(Zu,{id:t(),attributes:c.value},(()=>O(Wd,{extrudedHeight:u.value,polygonHierarchy:e.polygonHierarchy})))))}return T("v-if")}}});const ph=Object.assign({},Ul,{icon:"vc-icons-analysis-sightline"}),mh=Object.assign({},Ql,{polylineOpts:Object.assign({},Zl,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Wl,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),vh=Object.assign({},Ul,{icon:"vc-icons-analysis-viewshed"}),hh=Object.assign({},Kl,{pointOpts:Object.assign({},Gl,{show:!1}),polylineOpts:Object.assign({},Zl,{width:15}),primitiveOpts:Object.assign({},Wl,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ql),removeAll:Object.assign({},ql,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),gh=Object.assign({},Ul,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),fh=["sightline","viewshed"],yh={...sc,analyses:{type:Array,default:()=>fh,validator:e=>{let t=!0;return e.forEach((e=>{fh.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>gh},sightlineActionOpts:{type:Object,default:()=>ph},sightlineAnalysisOpts:{type:Object,default:()=>mh},viewshedActionOpts:{type:Object,default:()=>vh},viewshedAnalysisOpts:{type:Object,default:()=>hh}},bh=re(yh);var Ch=S({name:"VcAnalysisSightline",props:{...rc,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:fs,setup:(e,t)=>"segment"===e.sightlineType||"circle"===e.sightlineType?np(e,t,"VcAnalysisSightline"):"polyline"===e.sightlineType?ap(e,t,"VcAnalysisSightline"):void 0}),wh=S({name:"VcAnalysisViewshed",props:{...rc,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:fs,setup:(e,t)=>np(e,t,"VcAnalysisViewshed")});var Oh=S({name:"VcAnalyses",props:yh,emits:{...fs,fabUpdated:e=>!0},setup(e,t){var i;const n=d();n.cesiumClass="VcAnalyses";const{t:a}=Gn(),s={},l=b(Object.assign({},bh.clearActionOpts,e.clearActionOpts)),c=b(Object.assign({},bh.mainFabOpts,e.mainFabOpts)),u=b(Object.assign({},bh.sightlineActionOpts,e.sightlineActionOpts)),p=b(Object.assign({},bh.sightlineAnalysisOpts,e.sightlineAnalysisOpts)),m=b(Object.assign({},bh.viewshedActionOpts,e.viewshedActionOpts)),v=b(Object.assign({},bh.viewshedAnalysisOpts,e.viewshedAnalysisOpts));s.sightlineActionOpts=u,s.sightlineAnalysisOpts=p,s.viewshedActionOpts=m,s.viewshedAnalysisOpts=v,s.clearActionOpts=l;const h=r((()=>e.analyses.map((e=>({name:e,type:"analysis",actionStyle:{background:s[`${k(e)}ActionOpts`].color,color:s[`${k(e)}ActionOpts`].textColor},actionClass:`vc-analysis-${e} vc-analysis-button`,actionRef:o(null),actionOpts:s[`${k(e)}ActionOpts`],cmp:g(e),cmpRef:o(null),cmpOpts:s[`${k(e)}AnalysisOpts`],tip:s[`${k(e)}ActionOpts`].tooltip.tip||a(`vc.analysis.${k(e)}.tip`),isActive:!1})))));function g(e){switch(e){case"sightline":return Ch;case"viewshed":return wh;default:return}}return null==(i=hp(e,t,n,h,c,l,"analysis"))?void 0:i.renderContent}});[dh,Oh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));var xh=((e=[])=>({version:"3.0.15",install:(t,i)=>{if(t[pe])return;t[pe]=!0,e.forEach((e=>{t.use(e,i)}));const n=Object.assign({cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},i);ue(n,t)}}))([...[Cs,jl,Ll,Al,Dl,Rl,kl,Bl,Nl,Vl,zl,Fl,Hl,fp,Rp,kc,Um,Wm,Gm,$m,Zm,Ym,qm,Xm,Qm,Jm,Km,ev,tv,iv,nv,ov,av,rv,sv,lv,cv,uv,dv,gv,fv,yv,bv,Dc,Bv,Nv,Vv,zv,Fv,Hv,Uv,Wv,Gv,$v,Zv,Yv,qv,Xv,Qv,Jv,Kv,Zc,Yc,qc,Xc,Qc,Jc,Kc,Au,Du,Ru,ku,Bu,Nu,Vu,zu,Fu,Hu,Uu,Wu,$u,_d,Ed,Pd,Td,Md,Id,jd,Ld,Ad,Dd,Rd,kd,Bd,Nd,Vd,zd,Fd,Hd,Ud,Wd,Gd,$d,Zd,Yd,qd,Xd,Qd,Jd,Kd,ep,tp,gu,fu,bu,Cu,yu,oh,ah,rh,Gr,$r,as,rs,ss,Zr,Yr,qr,Xr,Qr,Jr,Kr,es,ts,is,ns,os,ls,cs,lh,dh,Oh]]),Sh={name:"en-us",nativeName:"English (US)",vc:{loadError:"needs to be child of VcViewer",navigation:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view.",innerTip:"Drag inner gyroscope: free orbit. TIP: You can also free orbit by holding the CTRL key and dragging the map.",title:"Click and drag to rotate the camera."},zoomCotrol:{zoomInTip:"Zoom in",zoomResetTip:"Reset zoom",zoomOutTip:"Zoom out"},print:{printTip:"Viewer screenshot/print",printViewTitle:"VueCesium Print View",credit:"Map Credits",screenshot:"Screenshot"},myLocation:{myLocationTip:"Centre map at your current location",positioning:"Positioning...",fail:"Positioning failed",centreMap:"My Location",lat:"Lat",lng:"Lng",address:"Address"},statusBar:{lat:"Lat",lng:"Lng",zone:"ZONE",e:"E",n:"N",elev:"Elev",level:"Level",heading:"H",pitch:"P",roll:"R",cameraHeight:"CameraH",tip:"Click to switch the mouse display coordinates to UTM projection coordinates"}},navigationSm:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view."},zoomCotrol:{zoomInTip:"Zoom in",zoomBarTip:"Drag the bar up to zoom in, and down to zoom out.",zoomOutTip:"Zoom out"}},measurement:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},distance:{tip:"Distance",drawingTipStart:"Click the left button to draw the starting point of the distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},"component-distance":{tip:"Component Distance",drawingTipStart:"Click the left mouse button to draw the starting point of component distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the component distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Polyline Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},horizontal:{tip:"Horizontal Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},vertical:{tip:"Vertical Distance",drawingTipStart:"Click the left button to draw the starting point of the vertical distance measurement.",drawingTipEnd:"Click the left button to draw the end point of the vertical distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},height:{tip:"Height ",drawingTipStart:"Click the left button to draw the height measurement point.",drawingTipEnd:"Click the left button to draw the height measurement point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},area:{tip:"Area",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Point Coordinate",drawingTipStart:"Click the left button to draw the point coordinate measurement.",drawingTipEnd:"Click the left button to draw the point coordinate measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification.",lng:"lng:",lat:"lat:",height:"height:",slope:"slope:"},rectangle:{tip:"Rectangle",drawingTipStart:"Click the left button to draw the rectangle measurement.",drawingTipEnd:"Click the left button to draw the rectangle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Regular",drawingTipStart:"Click the left button to draw the regular measurement.",drawingTipEnd:"Click the left button to draw the regular measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Circle",drawingTipStart:"Click the left button to draw the circle measurement.",drawingTipEnd:"Click the left button to draw the circle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear measurement results"}},drawing:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},pin:{tip:"Drawing pin",drawingTipStart:"Click the left button to draw a pin.",drawingTipEnd:"Click the left button to draw a pin.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Drawing point",drawingTipStart:"Click the left button to draw a point.",drawingTipEnd:"Click the left button to draw a point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Drawing polyline",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polygon:{tip:"Drawing polygon",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},rectangle:{tip:"Drawing rectangle",drawingTipStart:"Click the left button to draw the starting point of the rectangle.",drawingTipEnd:"Click the left button to draw the end point of the rectangle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Drawing circle",drawingTipStart:"Click the left button to draw the starting point of the circle.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Drawing regular",drawingTipStart:"Click the left button to draw the starting point of the regular.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear drawing results"}},analysis:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},sightline:{tip:"Sightline",drawingTipStart:"Click the left button to draw the view point of the sightline analysis.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the sightline analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},viewshed:{tip:"Viewshed",drawingTipStart:"Click the left button to draw the view point of the viewshed analysis.",drawingTipEnd:"Click the left button to draw the end point of the viewshed analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear analysis results"}},overview:{show:"Show",hidden:"Hidden"}}};export{Nu as V,vr as a,Au as b,ku as c,Bu as d,yv as e,De as f,Io as g,fa as h,gv as i,Cu as j,fu as k,Jc as l,Ce as m,Hl as n,ch as o,Sh as p,Hn as q,xh as r,ko as u};
