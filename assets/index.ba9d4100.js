import{c7 as e,bD as t,c2 as o,cg as a,ch as r,ci as s,cj as n,bx as i,ck as l,cl as c,cm as d,cn as u,co as m,cp as p,cq as h,cr as g,cs as f,bF as v,bK as y,bM as b,ct as C,cu as k,cv as w,cw as _,cx as S,cy as x,ca as L,bE as O,cz as D,c4 as T,cA as V,c6 as P,cB as R,bO as B,cC as I,bw as j,cD as M,bS as E,bH as N,bY as A,cE as z,cF as F,cG as H,cH as $,cI as U,cJ as q,cf as G,cK as Q,cL as W,bP as J,bN as Y,bG as K,bI as Z,bB as X,cM as ee,cN as te,cO as oe,cP as ae,bL as re}from"./vendor.401c7cc2.js";import{P as se,N as ne,Q as ie,a as le,b as ce,c as de,d as ue,e as me,f as pe,g as he,h as ge,i as fe,R as ve,j as ye,k as be,l as Ce,u as ke,m as we,n as _e,o as Se,p as xe,q as Le,r as Oe,s as De,C as Te,t as Ve,v as Pe,w as Re,x as Be,y as Ie,z as je,A as Me,B as Ee,D as Ne,E as Ae,F as ze,G as Fe,H as He,I as $e,J as Ue,K as qe,L as Ge,M as Qe}from"./vendor-quasar.9f4cb57f.js";import{d as We,s as Je,c as Ye}from"./vendor-pinia.9e8d6e37.js";import{s as Ke,a as Ze}from"./vendor-axios.38020cb0.js";import{l as Xe}from"./vendor-lodash.65955a29.js";import{L as et,m as tt}from"./vendor-lowdb.baa14648.js";import{m as ot,u as at,f as rt,g as st,a as nt,h as it,V as lt,b as ct,c as dt,d as ut,e as mt,i as pt,j as ht,k as gt,l as ft,n as vt,o as yt,p as bt,q as Ct,r as kt}from"./vendor-vue-cesium.445895d7.js";import{i as wt}from"./vendor-interactjs.2ee380fa.js";import"./vendor-echarts.39cb2ec2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function _t(e="default",t=""){se.set(`VueCesiumDemo-0.0.0-${e}`,t)}function St(e="default"){return se.getItem(`VueCesiumDemo-0.0.0-${e}`)}function xt(e="default"){se.remove(`VueCesiumDemo-0.0.0-${e}`)}const Lt={},Ot=function(e,t,o){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=function(e){return"/vue-cesium-demo/"+e}(e))in Lt)return;Lt[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,o)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},Dt=[{path:"/",name:"layout",component:()=>Ot((()=>Promise.resolve().then((()=>cr))),void 0),redirect:{path:"index"},children:[{name:"login",path:"/login",component:()=>Ot((()=>Promise.resolve().then((()=>ua))),void 0)}]}],Tt=[{path:"/:catchAll(.*)*",name:"404",component:()=>Ot((()=>Promise.resolve().then((()=>aa))),void 0)}],Vt=Dt,Pt=[...Dt,...Tt];const Rt=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);Mr.system.useLogStore(jr).push({message:"业务逻辑警告",type:"warning",meta:{error:r}}),ne.create({message:a,timeout:3e3,type:"warning"})})("[VueCesiumDemo] WARN "),Bt=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);Mr.system.useLogStore(jr).push({message:"业务逻辑异常",type:"danger",meta:{error:r}}),ne.create({message:a,timeout:3e3,type:"negative"})})("[VueCesiumDemo] ERR "),It=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o])})("[VueCesiumDemo] Debug ");function jt(e,t,o){return At(e,t.geometry.coordinates,o,t)}function Mt(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(At(e,r[s],o,t));return a}function Et(e,t,o){return zt(e,t.geometry.coordinates,o,t)}function Nt(e,a,r,s){var n,i;const l=t(s.properties,"checked");s.properties.actualRenderingType=r;const c={position:a,show:l,feature:Xe.exports.cloneDeep(s)},d=null==(n=s.properties)?void 0:n.props,u=d&&o(d)?d:d?JSON.parse(d):{},m=Object.assign({},e[r],u[r]);if(c[r]={...m},"model"===r){const e=JSON.parse((null==(i=s.properties)?void 0:i.hpr)||"{}");if(Array.isArray(e)){const t=ot(a),o=new Cesium.HeadingPitchRoll(...e);c.orientation=Cesium.Transforms.headingPitchRollQuaternion(t,o)}}return c}function At(e,o,n,i){var l,c,d,u,m,p,h,g;const f=t(i.properties,"checked");if(i.properties.actualRenderingType=n,"polygon"===n){return Et(e,a(i),n)}if("billboard"===n||"point"===n||"label"===n){const t={show:f,position:("MultiPolygon"===i.geometry.type?r(i):s(i)).geometry.coordinates,feature:Xe.exports.cloneDeep(i)};switch(n){case"billboard":{const o=Object.assign({},e.billboard,null==(c=null==(l=i.properties)?void 0:l.props)?void 0:c.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(u=null==(d=i.properties)?void 0:d.props)?void 0:u.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(p=null==(m=i.properties)?void 0:m.props)?void 0:p.label);t.label={text:i.properties.text||i.properties.name,...o}}}return t}return{show:f,polyline:{positions:o,...Object.assign({},e.polyline,null==(g=null==(h=i.properties)?void 0:h.props)?void 0:g.polyline)},feature:Xe.exports.cloneDeep(i)}}function zt(e,o,a,i){var l,c,d,u,m,p,h,g;const f=t(i.properties,"checked");if(i.properties.actualRenderingType=a,"polyline"===a){if("MultiPolygon"===i.geometry.type){const t=n(i),o=[];return t.features.forEach((t=>{"LineString"===t.geometry.type?o.push(jt(e,t,a)):o.push(...Mt(e,t,a))})),o}if("Polygon"===i.geometry.type){const t=n(i);return jt(e,t,a)}}else{if("polygon"===a){const t=[];for(let e=1;e<o.length;e++)t.push({positions:o[e]});const a=Object.assign({},e.polygon,null==(c=null==(l=i.properties)?void 0:l.props)?void 0:c.polygon);return{show:f,polygon:{hierarchy:{positions:o[0],holes:t},height:0,...a},feature:Xe.exports.cloneDeep(i)}}if("billboard"===a||"point"===a||"label"===a){const t={show:f,position:("MultiPolygon"===i.geometry.type?r(i):s(i)).geometry.coordinates,feature:Xe.exports.cloneDeep(i)};switch(a){case"billboard":{const o=Object.assign({},e.billboard,null==(u=null==(d=i.properties)?void 0:d.props)?void 0:u.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(p=null==(m=i.properties)?void 0:m.props)?void 0:p.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(g=null==(h=i.properties)?void 0:h.props)?void 0:g.label);t.label={text:i.properties.text||i.properties.name,...o}}}return t}}}const Ft={LineString:jt,MultiLineString:Mt,MultiPoint:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(Nt(e,r[s],o,t));return a},MultiPolygon:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++){const n=zt(e,r[s],o,t),i=Array.isArray(n)?n:[n];a.push(...i)}return a},Point:function(e,t,o){return Nt(e,t.geometry.coordinates,o,t)},Polygon:Et};function Ht(e){Mr.viewer.useRenderStore(jr).addRenderDatas(e)}function $t(e){Mr.viewer.useRenderStore(jr).removeRenderDataByPage(e)}function Ut(e){return Mr.viewer.useRenderStore(jr).getRenderDataByDatasetId(e)}function qt(e){Mr.viewer.useRenderStore(jr).setSelectedRenderData(e)}function Gt(){var e;const t=Mr.viewer.useRenderStore(jr).selectedRenderData;t.model&&(null==(e=null==t?void 0:t.restoreHandler)||e.call(t)),qt({model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]})}function Qt(e,t,o,a=[],r){var s;Gt();const n=function(e,t,o,a){const r=Ut(t);if(!r)return;let s,n;switch(e){case"label":case"point":case"billboard":case"model":s="primitive"===a?"VcCollectionBillboard":"VcDatasourceCustom",n="primitive"===a?"billboards":"entities";break;case"polyline":s="primitive"===a?"VcCollectionPolyline":"VcDatasourceCustom",n="primitive"===a?"polylines":"entities";break;case"polygon":s="primitive"===a?"VcCollectionPrimitive":"VcDatasourceCustom",n="primitive"===a?"polygons":"entities";break;case"geojson":s="VcDatasourceGeojson",n="data";break;case"tileset":s="VcPrimitiveTileset"}const i=Xe.exports.find(r.datasets,(e=>e.cmpName===s));if("geojson"===e)return i;return Xe.exports.find(i.props[n],(t=>t.feature.properties.id===o&&t.feature.properties.actualRenderingType===e))}(e,t,o);if(!n)return!1;if("point"===e){const t="primitive"===r?n:n.point,o=t.pixelSize||1,s=t.color||[255,255,255,0];t.pixelSize=1.5*o,qt({model:t,renderingType:e,restoreHandler:()=>{t.pixelSize=o,t.color=s},feature:n.feature,featureInfoListItems:a})}else if("billboard"===e){const t="primitive"===r?n:n.billboard,o=t.scale||1;t.scale=1.5*o,qt({model:t,renderingType:e,restoreHandler:()=>{t.scale=o},feature:n.feature,featureInfoListItems:a})}else if("polyline"===e){const e="primitive"===r?n:n.polyline,t=e.material||"white",o=e.width||1;e.width=1.5*o,e.material="#ffc107",qt({model:e,renderingType:"polyline",restoreHandler:()=>{e.width=o,e.material=t},feature:n.feature,featureInfoListItems:a})}else if("polygon"===e)if("primitive"===r){const e=n,t=e.color||"white";e.color="#ffc107",qt({model:e,renderingType:"polygon",restoreHandler:()=>{e.color=t},feature:n.feature,featureInfoListItems:a})}else{const e=n.polygon,t=e.material||"white";"observationElementPattern"===(null==(s=n.feature.properties)?void 0:s.datasetId)&&(e.extrudedHeight=1e3),e.material="#ffc107",qt({model:e,renderingType:"polygon",restoreHandler:()=>{e.material=t,e.extrudedHeight=void 0},feature:n.feature,featureInfoListItems:a})}else"geojson"===e&&n.polygon}function Wt(e,t){var o;const a=[];if(!Cesium.defined(e.geometry))return Rt("feature.geometry is required.","要素：",e),"添加渲染模型失败，原因：该要素没有 geometry 属性";const r=e.geometry.type,s=e.properties,n=null==(o=null==s?void 0:s.renderingType)?void 0:o.trim().split(",");if(!n||!n.length)return Rt("添加渲染模型失败，原因：未知的显示类型。","要素：",e),"添加渲染模型失败，原因：未知的显示类型。";const i=Ft[r];return Cesium.defined(i)?(n.forEach((o=>{const r=i(t,e,o),s=Array.isArray(r)?r:[r];a.push(...s)})),a):(Rt(`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`,"要素：",e),`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`)}function Jt(e,t){return t().then((t=>{var o,a,r;if(0!==t.code)return Bt(`添加渲染数据集失败，原因：数据请求失败。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(!t.data)return Bt(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(null==(o=t.data)?void 0:o.type){switch(null==(a=t.data)?void 0:a.type){case"Feature":e.children=[t.data];break;case"FeatureCollection":e.children=t.data.features,e.children.forEach((t=>{Cesium.defined(t.properties.renderingType)||(t.properties.renderingType=e.renderingType||"billboard"),Cesium.defined(t.properties.id)||(t.properties.id=Cesium.createGuid()),Cesium.defined(t.properties.checked)||(t.properties.checked=!1)}));break;default:return Bt(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,void(e.checked=!1)}}else"heatmap"===e.renderingType&&(e.children=[t.data]);return!!(null==(r=e.children)?void 0:r.length)||(Bt(`添加渲染数据集失败，原因：请求数据成功，但结果为空。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1)})).catch((t=>(Bt("添加渲染数据集失败，原因：数据请求异常。",t),e.loading=!1,e.checked=!1,!1)))}const Yt=(e,a,r)=>{var s,n;e.cesiumObjects=e.cesiumObjects||[];const l={id:e.id,name:e.name,page:a,type:r,datasets:[]};let c=[];if("tileset"===e.renderingType){for(let a=0;a<e.children.length;a++){const r=e.children[a];r.properties.datasetId=e.id;const i=e.props&&o(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{},c=Object.assign({},i[e.renderingType],null==(n=null==(s=r.properties)?void 0:s.props)?void 0:n[e.renderingType]);r.properties.actualRenderingType=e.renderingType,l.datasets.push({cmpName:"VcPrimitiveTileset",props:{...c,show:t(r.properties,"checked"),maximumMemoryUsage:128,maximumScreenSpaceError:64,onReady:()=>{e.loading=!1}}})}Ht(l)}else{for(let t=0;t<e.children.length;t++){const a=e.children[t];a.properties.datasetId=e.id;const r=Wt(a,e.props&&o(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{});if("string"==typeof r)continue;const s=Xe.exports.intersectionWith(r,c,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type));c.push(...r),s.length&&(s.forEach((e=>{Rt(`已添加相同id和类型的渲染数据集，可能有重复数据，请核实。对象 id: ${e.feature.properties.id}，对象类型: ${e.feature.geometry.type}`,"数据模型：",e)})),c=Xe.exports.uniqWith(c,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type)))}c.length&&l.datasets.push({cmpName:"VcDatasourceCustom",props:{entities:c,onReady:({cesiumObject:t})=>{const o=`VcDatasourceCustom_${e.id}`;t.datasetId=o;!Xe.exports.find(e.cesiumObjects,(e=>e.datasetId===o))&&e.cesiumObjects.push(i(t)),e.loading=!1}}}),Ht(l)}return!0};function Kt(e){return e.map((e=>({...e,path:e.path||Xe.exports.uniqueId("vc-menu-empty-"),...e.children?{children:Kt(e.children)}:{}})))}function Zt(e={},t="",o=0){return[200,{code:o,msg:t,data:e}]}function Xt(e){Mr.system.useLogStore(jr).push({message:"数据请求异常",type:"danger",meta:{error:e}}),ne.create({message:e.message,type:"negative",timeout:3e3})}function eo(e){const t=new Error(e);throw Xt(t),t}const to=Object.freeze(Object.defineProperty({__proto__:null,parse:function(e="{}",t={}){let o=t;try{o=JSON.parse(e)}catch(a){Bt(a)}return o},response:Zt,responseSuccess:function(e={},t="成功"){return Zt(e,t)},responseError:function(e={},t="请求失败",o=500){return Zt(e,t,o)},errorLog:Xt,errorCreate:eo},Symbol.toStringTag,{value:"Module"})),oo=()=>{const e=Ze.create({});return e.interceptors.request.use((e=>e),(e=>(Xt(e),Promise.reject(e)))),e.interceptors.response.use((e=>{const t=e.data,{code:o}=t;if(void 0===o)return t;switch(o){case 0:case 200:return t;case"xxx":eo(`[ code: xxx ] ${t.msg}: ${e.config.url}`);break;default:return eo(`${t.msg}: ${e.config.url}`),Promise.reject(t)}}),(e=>{switch(Xe.exports.get(e,"response.status")){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",xt("token"),xt("uuid"),bo.push("/login");break;case 403:e.message="拒绝访问";break;case 404:e.message=`请求地址出错: ${e.response.config.url}`;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return Xt(e),Promise.reject(e)})),e};function ao(e){return function(t){const o=St("token"),a={headers:{Authorization:o,"Content-Type":Xe.exports.get(t,"headers.Content-Type","application/json")},timeout:2e4,baseURL:e.baseURL||"/",data:{}};return o&&(a.headers.Authorization="Bearer "+o),e(Object.assign(a,t))}}const ro=oo(),so=ao(ro),no=oo(),io=ao(no),lo=new Ke.exports(no),co=[{username:"admin",password:"admin",id:"admin-uuid",name:"Admin"},{username:"editor",password:"editor",id:"editor-uuid",name:"Editor"}],uo=[{id:l(),component:"MainLayout",icon:"cog",islock:!1,hidden:!1,name:"layout",path:"/",permission:"",sort:1e3,title:"VueCesiumDemo",type:10,children:[{id:l(),component:"/index",icon:"cog",islock:!1,hidden:!1,name:"index",path:"/index",permission:"permission-index",sort:1e3,caption:"首页",title:"message.header.index",type:10,children:[{id:l(),component:"",icon:"eye",islock:!1,hidden:!1,name:"left-panel",path:"",permission:"permission-left-panel-view",sort:100101,title:"查看左侧面板",type:20}]},{id:l(),component:"/dynamic-render",icon:"cog",islock:!1,hidden:!1,name:"dynamic-render",path:"/dynamic-render",permission:"permission-dynamic-render",sort:1e3,caption:"动态渲染",title:"message.header.dynamicRender",type:10,redirect:"/dynamic-render/datasource",children:[{id:l(),component:"/dynamic-render/datasource",icon:"dataset",islock:!1,hidden:!1,name:"datasource",path:"/dynamic-render/datasource",permission:"permission-datasource",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.datasource",type:10},{id:l(),component:"/dynamic-render/historical-track",icon:"inbox",islock:!1,hidden:!1,name:"historical-track",path:"/dynamic-render/historical-track",permission:"permission-historical-track",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.historicalTrack",type:10}]}]}],mo=[{id:l(),name:"DataSource",label:"数据源",icon:"",children:[{id:"555",name:"机场",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/机场.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"billboard",props:{billboard:{image:"/vue-cesium-demo/images/飞机场.svg",color:"#ffc10",scale:.25,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e7]}}},{id:"666",name:"水系",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/水系.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polyline",props:{polyline:{width:1}}},{id:"777",name:"岛屿",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/岛屿.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polygon,polyline,billboard",props:{billboard:{image:"/vue-cesium-demo/images/岛屿.svg",scale:.2,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e6]},polygon:{width:2,material:"rgba(137,207,240,0.5)"},polyline:{width:4,material:"#0033ff"}}},{id:"888",name:"Tileset 模型",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/Tileset模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"tileset",props:{tileset:{}}},{id:"999",name:"GLTF 模型",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/GLTF模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"model",props:{model:{scale:1}}}]}],po={service:ro,request:so,serviceForMock:no,requestForMock:io,mock:lo,tools:to},ho=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({login:(e={})=>(r.onAny("/auth/login").reply((e=>{const t=s.parse(e.data),o=Xe.exports.find(co,{username:t.username,password:t.password});return o?s.responseSuccess(Xe.exports.assign({},o,{token:"f5befe1a-962c-4cdd-bf45-77ce306dbbce"})):s.responseError({},"账号或密码不正确")})),a({url:"/auth/login",method:"post",data:e})),getUserInfo:()=>(r.onAny("/user/info").reply((e=>{const t=St("uuid"),o=Xe.exports.find(co,{id:t});return o?s.responseSuccess(Xe.exports.assign({},o)):(xt("token"),xt("uuid"),bo.push("/login"),s.responseError({},"未授权, 请登录!"))})),a({url:"/user/info",method:"post"})),getAccessibleMenus:(e={})=>(r.onAny("/api/menu/accessible").reply((e=>s.responseSuccess(uo))),a({url:"/api/menu/accessible",method:"post",data:e}))}))(po),go=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({getStaticData:(e,o)=>t({baseURL:o=o||"/vue-cesium-demo/",url:e,method:"get"}).then((e=>({code:0,data:e,msg:"success"}))),inverseGeocode:e=>t({baseURL:"/vue-cesium-demo/",url:"/reverse_geocoding/v3",method:"get",params:e}),getLocationList:e=>t({baseURL:"/vue-cesium-demo/",url:"/v3/place/text",method:"get",params:e})}))(po),fo=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({getTreeData:()=>(r.onAny("/dynamic-render/datasource/datatree").reply((e=>s.responseSuccess(mo))),a({url:"/dynamic-render/datasource/datatree",method:"post"})),inverseGeocode:e=>t({baseURL:"/vue-cesium-demo/",url:"/reverse_geocoding/v3",method:"get",params:e})}))(po),vo={"zh-CN":{message:{header:{index:"首页",dynamicRender:"动态渲染"},sideBar:{dynamicRender:{datasource:"数据源",historicalTrack:"历史轨迹"}},panel:{layerManager:"图层管理"},baseLayer:"底图图层",overlayLayer:"叠加图层",vectorLayer:"矢量图层"}},"en-US":{message:{header:{index:"Index",dynamicRender:"DynamicRender"},sideBar:{dynamicRender:{datasource:"Datasource",historicalTrack:"HistoricalTrack"}},panel:{layerManager:"LayerManager"},baseLayer:"BaseLayer",overlayLayer:"OverlayLayer",vectorLayer:"VectorLayer"}}},yo=c({legacy:!1,locale:St("locale"),fallbackLocale:"zh-CN",globalInjection:!0,messages:vo}),bo=d({scrollBehavior:()=>({left:0,top:0}),routes:Pt,history:({VITE_VUE_APP_TITLE:"VueCesium Demo",VITE_VUE_ROUTER_MODE:"history",VITE_VUE_ROUTER_BASE:"/vue-cesium-demo/",VITE_VUE_APP_API:"/",VITE_MOCK_ENABLED:"true",VITE_VUE_APP_PREFIX:"VueCesiumDemo",VITE_VUE_APP_AMAP_KEY:"7370d0574108a3c8778e3b2ad20ce9ee",VITE_VUE_CESIUMJS_PATH:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",BASE_URL:"/vue-cesium-demo/",MODE:"production",DEV:!1,PROD:!0}.SERVER?m:p)("/vue-cesium-demo/")}),Co=["/login","/404"];bo.beforeEach((async(e,t,o)=>{u.start(),Mr.system.useSearchStore(jr).set(!1);const a=St("token");if("/login"!==e.path&&ho.getUserInfo(),a)try{if(!Mr.system.usePermissionStore(jr).inited){const t=[...(await ho.getAccessibleMenus()).data];return await Mr.system.usePermissionStore(jr).generateRoutes({menuTree:t}),void o(e.path)}"/login"===e.path?o({path:"/index"}):o()}catch(r){-1!==Co.indexOf(e.path)?o():o("/login")}else-1!==Co.indexOf(e.path)?o():o("/login")})),bo.afterEach((e=>{var t;u.done(),t=yo.global.t(e.meta.title),window.document.title="VueCesium Demo"+(t?` | ${t}`:"")}));const ko=tt(new et("VueCesiumDemo-0.0.0"));function wo({dbName:e="database",path:t="",user:o=!0,validator:a=(e=>!0),defaultValue:r=""}){const s=St("uuid")||"ghost-uuid",n=`${e}.${o?`user.${s}`:"public"}${t?`.${t}`:""}`,i=ko.get(n).value();return void 0!==i&&a(i)||ko.set(n,r).write(),n}function _o({dbName:e="database",path:t="",user:o=!1,validator:a=(()=>!0),defaultValue:r=""}={}){return ko.get(wo({dbName:e,path:t,user:o,validator:a,defaultValue:r}))}ko.defaults({sys:{},database:{}}).write();const So=We("db",{state:()=>({}),getters:{},actions:{set({dbName:e="database",path:t="",value:o="",user:a=!1}){!function({dbName:e="database",path:t="",value:o="",user:a=!1}){ko.set(wo({dbName:e,path:t,user:a}),o).write()}({dbName:e,path:t,value:o,user:a})},get:({dbName:e="database",path:t="",defaultValue:o="",user:a=!1})=>function({dbName:e="database",path:t="",defaultValue:o="",user:a=!1}){return Xe.exports.cloneDeep(ko.get(wo({dbName:e,path:t,user:a,defaultValue:o})).value())}({dbName:e,path:t,defaultValue:o,user:a}),database:({user:e=!1}={})=>_o({user:e,defaultValue:""}),databaseClear:({user:e=!1}={})=>_o({user:e,validator:()=>!0,defaultValue:""})}}),xo=We("user",{state:()=>({info:{}}),getters:{},actions:{async set(e){this.info=e;So().set({dbName:"sys",path:"user.info",value:e,user:!0})},async load(){const e=So().get({dbName:"sys",path:"user.info",defaultValue:"",user:!0});this.set(e)}}}),Lo=(e,t)=>{const o=e.__vccOpts||e;for(const[a,r]of t)o[a]=r;return o};const Oo=Lo({},[["render",function(e,t){const o=h("router-view");return f(),g(o)}]]),Do=Object.freeze(Object.defineProperty({__proto__:null,default:Oo},Symbol.toStringTag,{value:"Module"}));function To(){const e=at(),{toggleGlobalLayout:t,toggleDynamicRenderPageLayout:o}=Mr.system.useLayoutStore(),a=v({selectedId:"",datasourceCategories:[],loading:!1,hasLoadingError:!1,filterText:""}),r=Mr.system.useLayoutStore().dynamicRender,s=y((()=>{let e=[];try{null==a||a.datasourceCategories.forEach((t=>{if(t.id===a.selectedId)throw e=t.children,new Error("endForEach")}))}catch(t){if("endForEach"!==t.message)throw t}return e}));return{workBenchModel:a,dynamicRenderLayout:r,selectedDatasetCategories:s,init:()=>{a.loading=!0,(async()=>(a.hasLoadingError=!1,fo.getTreeData().then((e=>{if(e.code)return;const t=e.data;return a.selectedId=t[0].id,a.datasourceCategories=t,!0})).catch((e=>{a.hasLoadingError=!0}))))().then((()=>{a.loading=!1,t({navigation:!0}),o({datasource:{workBench:!0}})}))},addOrRemoveDataset:async(e,t,o,a)=>{if(e){if(await Ut(t.id))t.children.forEach((e=>{e.properties&&(e.properties.checked=!0)}));else{if(407==t.id)return;if(t.renderingType){const e=()=>go.getStaticData(t.fetchStr);await function(e,t,o,a){var r;if(e.loading=!0,null==(r=e.children)?void 0:r.length)return Promise.resolve(Yt(e,o,a));try{return Jt(e,t).then((t=>{if(t)return Yt(e,o,a)}))}catch(s){return Bt(`添加渲染数据集失败，原因：数据请求发生错误。数据集id: ${e.id}，数据集名称: ${e.name}`,"数据模型：",e),e.loading=!1,void(e.checked=!1)}}(t,e,"/dynamic-render/datasource"),t.children.forEach((e=>{a?e.properties&&(e.properties.checked=e===a):e.properties&&(e.properties.checked=!0)}))}else Bt("添加渲染数据集失败，原因：未知的显示类型。","数据模型：",t),t.checked=!1,t.loading=!1}}else r=t.id,Mr.viewer.useRenderStore(jr).removeRenderDataById(r),t.cesiumObjects=[],t.loading=!1,t.children.forEach((e=>{e.properties&&(e.properties.checked=!1)}));var r},showFeatureInfo:(e,t,o)=>{e.hasDetail&&It("属性展示逻辑待完善")},flyToFeature:(t,o,a)=>{!async function(e,t,o={isHighlightRenderData:!0,showBillboardOverlayMenu:!0,duration:1.5}){var a,r,s,n;const i=null==(a=null==t?void 0:t.properties)?void 0:a.actualRenderingType;if(!i)return void Bt("定位到要素失败，原因：未知的显示类型。","要素模型：",t);const l=t.properties.datasetId,c=await Ut(l);if(!c)return void Bt("定位到要素失败，原因：未找到该要素所在的渲染数据。","要素模型：",t);const d=t.properties.id;o.isHighlightRenderData&&Qt(i,l,d);const{toggleGlobalLayout:u}=Mr.system.useLayoutStore(jr);switch(i){case"billboard":case"point":case"label":case"polyline":case"polygon":case"model":if(u({featureInfo:!1}),null==(r=null==c?void 0:c.datasets)?void 0:r.length){const t=(null==(s=c.datasets[0].cmpRef)?void 0:s.cesiumObject).entities.values.filter((e=>e.feature.properties.id===d))[0];e.flyTo(t,{...o}).then((()=>{}))}break;case"tileset":if(u({featureInfo:!1}),null==(n=null==c?void 0:c.datasets)?void 0:n.length){const a=c.datasets.filter((e=>e.props.url===t.properties.props.tileset.url))[0].cmpRef.cesiumObject;e.flyTo(a,{...o}).then((()=>{}))}}}(e.viewer,o)},showOrHideDatasetList:(e,t)=>{if(e&&t.renderingType&&0===t.children.length){const e=()=>go.getStaticData(t.fetchStr);t.loading=!0,Jt(t,e).then((()=>{t.loading=!1}))}},toggleDynamicRenderPageLayout:o}}const Vo={class:"loading-ios flex column justify-center items-center z-top"},Po={key:2},Ro={key:0,class:"q-pt-md"},Bo=b({props:{size:{type:String,default:"3em"},dense:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMsg:{type:String,default:""},errorTip:{type:String,default:"数据加载失败，点我重试"},tipText:{type:String,default:"加载中..."}},emits:["retry"],setup(e,{emit:t}){const o=()=>{t("retry")};return(t,a)=>(f(),C("div",Vo,[e.hasError?(f(),g(ce,{key:1,icon:"error",size:e.size,color:"red",round:"",flat:"",dense:""},{default:k((()=>[w(le,null,{default:k((()=>[_("加载失败，原因："+S(e.errorMsg),1)])),_:1})])),_:1},8,["size"])):(f(),g(ie,{key:0,size:e.size},null,8,["size"])),e.dense?L("",!0):(f(),C("div",Po,[e.hasError?(f(),g(de,{key:1,clickable:"",color:"red","text-color":"white",icon:"error",onClick:o},{default:k((()=>[_(S(e.errorTip),1)])),_:1})):(f(),C("div",Ro,[x("span",null,S(e.tipText),1)]))]))]))}}),Io=Lo(b({props:{nodes:{type:Array,default:()=>[]},filter:String},emits:{addOrRemoveDataset:(e,t,o,a)=>!0,flyToFeature:(e,t,o)=>!0,showFeatureInfo:(e,t,o)=>!0,showOrHideDatasetList:(e,t)=>!0},setup(e,{emit:t}){const o=e,a=y((()=>(e,t)=>{const o=t.toLowerCase();return(e.name||e.properties.name).toLowerCase().indexOf(o)>-1})),r=y((()=>{const e={},t=(r,s)=>{let n,i;if(P(r,"type")&&P(r,"properties")){n=r.properties.id,i=!1}else{const e=r;n=e.id,i=(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0}const l={key:n,parent:s,isParent:i,children:[],matchesFilter:!o.filter||a.value(r,o.filter)};if(e[n]=l,!0===i){const e=r;l.children=e.children.map((e=>t(e,l))),o.filter&&!0!==l.matchesFilter&&(l.matchesFilter=l.children.some((e=>e.matchesFilter)))}return l};return o.nodes.forEach((e=>t(e,null))),e}));O((()=>o.filter),(e=>{s(o.nodes,!0)}));const s=(e,t)=>(o.filter?e.filter((e=>r.value[e.id||e.properties.id].matchesFilter)):e).map((e=>((e,t)=>{const o=e.id||e.properties.id,a=!0===r.value[o].isParent?s(e.children):[];return t?e.children=e._children:(e._children=e.children,e.children=a),e})(e,t))),n=y((()=>s(o.nodes))),i=e=>{var t;return null==(t=null==e?void 0:e.children)?void 0:t.length};return(e,o)=>{const a=h("index",!0);return f(),g(ue,{dense:""},{default:k((()=>[(f(!0),C(V,null,D(T(n),((o,r)=>(f(),C(V,{key:r},[o.isGroup?(f(),g(me,{key:0,class:"group-caption",caption:"",header:""},{default:k((()=>[_(S(o.name),1)])),_:2},1024)):L("",!0),o.hasDetail?(f(),g(pe,{key:1,modelValue:o.expanded,"onUpdate:modelValue":[e=>o.expanded=e,e=>((e,o)=>{t("showOrHideDatasetList",e,o)})(e,o)],"expand-icon":"arrow_circle_down","expand-separator":"",clickable:"",dark:""},{header:k((()=>[(f(!0),C(V,null,D(o.level>0?o.level-1:0,(e=>(f(),g(he,{key:e,side:""})))),128)),w(he,{side:""},{default:k((()=>[w(ge,{modelValue:o.checked,"onUpdate:modelValue":[e=>o.checked=e,e=>((e,o,a,r)=>{t("addOrRemoveDataset",e,o,a,r)})(e,o)],dense:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),w(he,{side:""},{default:k((()=>[w(fe,{size:"16px",class:R(`spd-icons ${o.iconHtV2}`),style:{color:"#00e472"}},null,8,["class"])])),_:2},1024),w(he,null,{default:k((()=>[w(me,null,{default:k((()=>[_(S(o.name),1)])),_:2},1024)])),_:2},1024),0!==i(o)?(f(),g(he,{key:0,side:""},{default:k((()=>[w(de,{dense:"",dark:""},{default:k((()=>[_(S(i(o))+" 条",1)])),_:2},1024)])),_:2},1024)):L("",!0),o.loading?(f(),g(he,{key:1,side:""},{default:k((()=>[w(Bo,{size:"1.5em",dense:""})])),_:1})):L("",!0)])),default:k((()=>[o.fetchStr?(f(!0),C(V,{key:0},D(o.children,((e,a)=>B((f(),g(ye,{key:a,clickable:"","active-class":"text-amber-6",dense:""},{default:k((()=>[(f(!0),C(V,null,D(o.level>0?o.level:1,(e=>(f(),g(he,{key:e,side:""})))),128)),w(he,{side:""},{default:k((()=>[w(ge,{modelValue:e.properties.checked,"onUpdate:modelValue":[t=>e.properties.checked=t,r=>((e,o,a,r)=>{e&&(o.checked||(o.checked=!0,t("addOrRemoveDataset",e,o,a,r)))})(r,o,a,e)],disable:o.loading||e.loading||""===o.renderingType},null,8,["modelValue","onUpdate:modelValue","disable"])])),_:2},1024),w(he,{onClick:r=>((e,o,a)=>{t("showFeatureInfo",e,o,a)})(o,e,a)},{default:k((()=>[w(me,null,{default:k((()=>[_(S(e.properties.name),1)])),_:2},1024)])),_:2},1032,["onClick"]),e.loading?(f(),g(he,{key:0,side:""},{default:k((()=>[w(Bo,{size:"1.5em",dense:""})])),_:1})):L("",!0),e.properties.checked?(f(),g(he,{key:1,side:"",onClick:I((r=>((e,o,a)=>{t("flyToFeature",e,o,a)})(o,e,a)),["prevent"])},{default:k((()=>[w(fe,{size:"20px",class:"location-icon",name:"room"})])),_:2},1032,["onClick"])):L("",!0)])),_:2},1024)),[[ve]]))),128)):L("",!0),o.children&&!o.canRenderDirectly?(f(),g(a,{key:1,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"])):L("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])):(f(),g(a,{key:2,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"]))],64)))),128))])),_:1})}}}),[["__scopeId","data-v-2e475ab6"]]),jo=Object.freeze(Object.defineProperty({__proto__:null,default:Io},Symbol.toStringTag,{value:"Module"}));const Mo={class:"work-bench"},Eo={class:"dataset-category"},No={class:"dataset-category-header"},Ao={class:"q-ml-md q-mr-md"},zo=_("回到顶部"),Fo=Lo(b({setup(e){M((e=>({"2b2bf401":T(S).commonPanel.themeCommonPanelListBorderColor,"4d34c198":T(S).commonPanel.themeCommonPanelContentBackgroundColor})));const t=Je(Mr.system.useLayoutStore()).global,{contentStyle:o,contentActiveStyle:a,thumbStyle:r,scrollAreaRef:s,verticalPositionRef:n,setScrollPosition:i,onScrollHandler:l}=function(){const e=j(null),t=j(null);return{scrollAreaRef:e,verticalPositionRef:t,contentStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},contentActiveStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},thumbStyle:{right:"2px",borderRadius:"3px",backgroundColor:"#EBB107",width:"3px",opacity:.6},onScrollHandler:e=>{t.value=e.verticalPosition},setScrollPosition:(t,o,a)=>{e.value.setScrollPosition("vertical",0,300)}}}(),{workBenchModel:c,dynamicRenderLayout:d,selectedDatasetCategories:u,init:m,addOrRemoveDataset:p,showFeatureInfo:h,flyToFeature:v,showOrHideDatasetList:b,toggleDynamicRenderPageLayout:_}=To(),S=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));return E((()=>{m()})),N((()=>{$t("/dynamic-render/datasource")})),(e,r)=>(f(),C("div",Mo,[B(x("div",{class:R(["datasources-container",{"full-width-drawer":!T(t).leftDrawerMini}])},[x("div",Eo,[x("div",No,[w(ce,{dense:"",flat:"",round:"",class:"close text-white",icon:"close",size:"sm",onClick:r[0]||(r[0]=e=>T(_)({datasource:{workBench:!1}}))}),x("div",Ao,[w(be,{modelValue:T(c).filterText,"onUpdate:modelValue":r[1]||(r[1]=e=>T(c).filterText=e),disable:T(c).loading,label:"搜索",dark:"",dense:"",clearable:""},{prepend:k((()=>[w(fe,{color:"white",name:"search"})])),_:1},8,["modelValue","disable"])])]),T(n)>600?(f(),g(ce,{key:0,dense:"",fab:"",round:"",glossy:"","fab-mini":"",ripple:"",icon:"expand_less",padding:"2px",class:"absolute-bottom-right non-selectable z-top scroll-top",onClick:r[2]||(r[2]=e=>T(i)("vertical",0,300))},{default:k((()=>[w(le,null,{default:k((()=>[zo])),_:1})])),_:1})):L("",!0),w(Ce,{ref_key:"scrollAreaRef",ref:s,class:"dataset-category-area","content-style":T(o),"content-active-style":T(a),onScroll:T(l)},{default:k((()=>[T(c).loading?(f(),g(Bo,{key:0,class:"absolute-center","has-error":T(c).hasLoadingError},null,8,["has-error"])):L("",!0),w(Io,{nodes:T(u),class:"data-list-tree",filter:T(c).filterText,onAddOrRemoveDataset:T(p),onShowFeatureInfo:T(h),onFlyToFeature:T(v),onShowOrHideDatasetList:T(b)},null,8,["nodes","filter","onAddOrRemoveDataset","onShowFeatureInfo","onFlyToFeature","onShowOrHideDatasetList"])])),_:1},8,["content-style","content-active-style","onScroll"])])],2),[[A,T(d).datasource.workBench]]),T(d).datasource.workBench?L("",!0):(f(),g(ce,{key:0,class:"toggle-btn",round:"",loading:T(c).loading,flat:"",color:"white",onClick:r[3]||(r[3]=e=>T(_)({datasource:{workBench:!0}}))},{default:k((()=>[w(fe,{size:"50px",name:"keyboard_double_arrow_right"})])),_:1},8,["loading"]))]))}}),[["__scopeId","data-v-cff979aa"]]),Ho=Object.freeze(Object.defineProperty({__proto__:null,default:Fo},Symbol.toStringTag,{value:"Module"})),$o={class:"page-dynamic-render-datasource absolute z-top"},Uo=b({setup(e){const{loadDefaultLayers:t}=Mr.viewer.useLayerStore();return E((()=>{t(!0)})),(e,t)=>(f(),C("div",$o,[w(Fo)]))}}),qo=Object.freeze(Object.defineProperty({__proto__:null,default:Uo},Symbol.toStringTag,{value:"Module"})),Go={class:"page-demo-dynamic-overlay absolute z-top"},Qo=b({setup(e){const{loadDefaultLayers:o}=Mr.viewer.useLayerStore(),a=j(null),r=j(!1),s=j(null),n=j(null),i=j(null);E((()=>{o(!0),go.getStaticData("/datas/dynamic-overlay.json").then((e=>{c([e.data])}))})),N((()=>{$t("/dynamic-render/historical-track")}));const c=async e=>{if(await Ut("DynamicOverlay"));else{const t={id:"DynamicOverlay",name:"历史轨迹",page:"/dynamic-render/historical-track",datasets:[]},{overlays:o,stops:l}=d(e),c={show:!0,dynamicOverlays:o};t.datasets.push({cmpName:"VcOverlayDynamic",props:{shouldAnimate:r,"onUpdate:shouldAnimate":e=>{r.value=e},currentTime:s,startTime:n,stopTime:i,multiplier:1e3,onReady:e=>{a.value=e.vm,u(202106)},...c}}),t.datasets.push({cmpName:"VcCollectionPoint",props:{points:l}}),Ht(t)}},d=e=>{const o=[],a=[];return e.forEach((e=>{const r=[],s=[],n=t(e,"checked");e.stops.forEach((e=>{r.push({position:[e.lon,e.lat],time:e.DATE_TIME,id:l()}),s.push([e.lon,e.lat]),a.push({id:l(),position:[e.lon,e.lat],color:"rgb(255,229,0)",show:n,...e,distanceDisplayCondition:[0,5e6],scaleByDistance:[100,2,25e5,.5],onMouseover:e=>{},onMouseout:e=>{}})})),o.push({id:String(e.TYPHOON_ID),show:n,maxCacheSize:e.stops.length,polyline:{positions:s,width:3,material:e.TYPHOON_CODE?"#2d8cf0":"#69B273",depthFailMaterial:e.TYPHOON_CODE?"#2d8cf0":"#69B273",clampToGround:!0},sampledPositions:r})})),{overlays:o,stops:a}},u=e=>{const t=Ut("DynamicOverlay");if(t){t.datasets[0].cmpRef.zoomToOverlay(String(e))}else Bt("定位到该对象失败，原因：还未添加。")};return(e,t)=>(f(),C("div",Go))}}),Wo=Object.freeze(Object.defineProperty({__proto__:null,default:Qo},Symbol.toStringTag,{value:"Module"})),Jo={class:"z-top absolute-center page-index"},Yo=b({setup(e){const t=j({position:[108,32],point:{pixelSize:28,color:"red"},label:{text:"Hello World",pixelOffset:[0,150]}}),{loadDefaultLayers:o,toggle:a}=Mr.viewer.useLayerStore();E((()=>{o(!0)})),N((()=>{a({names:"admin",show:!1})}));const r=e=>{};return(e,o)=>{const a=h("vc-graphics-billboard"),s=h("vc-graphics-rectangle"),n=h("vc-entity");return f(),C("div",Jo,[w(n,{ref_key:"entity",ref:t,position:t.value.position,point:t.value.point,label:t.value.label,onClick:r},{default:k((()=>[w(a,{ref:"billboard",image:"https://zouyaoji.top/vue-cesium/favicon.png",scale:.5},null,8,["scale"]),w(s,{coordinates:[130,20,80,25],material:"green"})])),_:1},8,["position","point","label"])])}}}),Ko=Object.freeze(Object.defineProperty({__proto__:null,default:Yo},Symbol.toStringTag,{value:"Module"})),Zo=b({name:"Error404"}),Xo={class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},ea=x("div",{style:{"font-size":"30vh"}},"404",-1),ta=x("div",{class:"text-h2",style:{opacity:"0.4"}},"噢. 这儿什么也没有...",-1);const oa=Lo(Zo,[["render",function(e,t,o,a,r,s){return f(),C("div",Xo,[x("div",null,[ea,ta,w(ce,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/onemap",label:"返回主页","no-caps":""})])])}]]),aa=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),ra=e=>(F("data-v-193dcca0"),e=e(),H(),e),sa={class:"q-pa-md page-login z-top"},na={class:"login-container col row"},ia=ra((()=>x("div",{class:"text-h4 q-my-sm"},"登录",-1))),la=ra((()=>x("div",{class:"oath flex"},[x("div",{class:"title full-width text-center q-pt-md"},"社交帐号登录"),x("div",{class:"q-gutter-md full-width text-center q-pt-sm flex justify-center"},[x("svg",{t:"1615200042776",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5886",width:"200",height:"200"},[x("path",{d:"M579.867 511.932c-11.67 0-23.344 10.837-23.344 24.178 0 10.839 11.668 21.678 23.344 21.678 17.514 0 30.020-10.839 30.020-21.678 0-13.34-12.505-24.178-30.020-24.178v0zM503.154 399.36c18.345 0 30.020-11.67 30.020-29.185 0-18.345-11.675-29.183-30.020-29.183-17.51 0-34.188 10.839-34.188 29.183-0.001 17.517 16.678 29.185 34.188 29.185v0zM512.326 0.56c-282.655 0-511.788 229.133-511.788 511.788 0 282.653 229.133 511.786 511.788 511.786 282.653 0 511.786-229.133 511.786-511.786 0.001-282.655-229.132-511.788-511.786-511.788v0zM415.602 642.009c-30.855 0-53.369-4.999-82.553-13.341l-84.218 42.53 24.186-71.715c-59.204-41.689-94.228-94.221-94.228-158.428 0-113.403 106.733-200.123 236.814-200.123 115.069 0 217.633 68.377 237.644 165.106-8.338-1.671-15.844-2.502-22.514-2.502-113.403 0-200.954 85.049-200.954 187.613 0 17.508 2.502 33.351 6.671 50.030-6.671 0.829-14.178 0.829-20.849 0.829v0zM763.314 723.724l16.674 60.041-63.371-35.854c-24.18 4.999-47.529 12.505-71.709 12.505-111.737 0-200.123-76.711-200.123-171.769 0-95.058 88.388-171.771 200.123-171.771 105.895 0 200.954 76.713 200.954 171.771 0 53.362-35.854 100.891-82.548 135.078v0zM338.053 340.992c-17.51 0-35.854 10.839-35.854 29.183 0 17.516 18.343 29.19 35.854 29.19 16.679 0 30.020-11.675 30.020-29.19 0-18.343-13.341-29.183-30.020-29.183v0zM710.783 511.932c-12.51 0-23.349 10.837-23.349 24.178 0 10.839 10.839 21.678 23.349 21.678 16.674 0 29.183-10.839 29.183-21.678 0-13.34-12.509-24.178-29.183-24.178v0zM710.783 511.932z","p-id":"5887","data-spm-anchor-id":"a313x.7781069.0.i22",class:"",fill:"#2dc100"})]),x("svg",{t:"1615199447339",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2522",width:"200",height:"200"},[x("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m210.385455 641.396364c-7.447273 9.309091-26.996364-1.861818-41.89091-32.581819-3.723636 13.963636-13.032727 36.305455-34.443636 64.232728 35.374545 8.378182 44.683636 42.821818 33.512727 61.44-8.378182 13.032727-26.996364 24.203636-59.578181 24.203636-58.647273 0-83.781818-15.825455-95.883637-26.996364-1.861818-2.792727-5.585455-3.723636-10.24-3.723636-4.654545 0-7.447273 0.930909-10.24 3.723636-11.170909 11.170909-37.236364 26.996364-95.883636 26.996364-32.581818 0-52.130909-11.170909-59.578182-24.203636-12.101818-18.618182-1.861818-53.061818 33.512727-61.44-20.48-27.927273-29.789091-50.269091-34.443636-64.232728-13.963636 30.72-34.443636 42.821818-41.890909 32.581819-5.585455-8.378182-8.378182-26.065455-7.447273-38.167273 3.723636-46.545455 34.443636-85.643636 53.061818-106.123636-2.792727-5.585455-8.378182-40.029091 14.894546-63.301819v-1.861818c0-92.16 65.163636-158.254545 148.014545-158.254545 81.92 0 148.014545 66.094545 148.014546 158.254545v1.861818c23.272727 23.272727 17.687273 57.716364 14.894545 63.301819 17.687273 20.48 49.338182 59.578182 53.061818 106.123636 0.930909 12.101818-0.930909 29.789091-7.447272 38.167273z",fill:"#30A5DD","p-id":"2523"})]),x("svg",{t:"1615199464855",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3380",width:"200",height:"200"},[x("path",{d:"M448.698182 482.210909c-96.814545 4.654545-175.010909 56.785455-175.010909 121.949091s78.196364 114.501818 175.010909 109.847273S623.709091 647.912727 623.709091 582.749091c-0.930909-64.232727-79.127273-105.192727-175.010909-100.538182z m65.163636 164.770909c-29.789091 39.098182-88.436364 57.716364-145.221818 26.065455-26.996364-14.894545-26.065455-43.752727-26.065455-43.752728s-11.170909-92.16 85.643637-103.330909c97.745455-12.101818 115.432727 81.92 85.643636 121.018182z",fill:"#EA5D5C","p-id":"3381"}),x("path",{d:"M448.698182 584.610909c-6.516364 4.654545-7.447273 13.032727-3.723637 18.618182 2.792727 5.585455 11.170909 6.516364 16.756364 1.861818 5.585455-4.654545 8.378182-13.032727 4.654546-18.618182-2.792727-5.585455-10.24-6.516364-17.687273-1.861818zM403.083636 597.643636c-18.618182 1.861818-30.72 17.687273-30.72 33.512728 0 14.894545 14.894545 26.065455 32.581819 24.203636 17.687273-1.861818 32.581818-15.825455 32.581818-31.650909s-13.963636-27.927273-34.443637-26.065455z",fill:"#EA5D5C","p-id":"3382"}),x("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m197.352727 626.501818C669.323636 712.145455 538.065455 754.036364 441.250909 746.589091c-92.16-7.447273-211.316364-38.167273-223.418182-151.738182 0 0-6.516364-51.2 42.821818-117.294545 0 0 70.749091-99.607273 152.669091-128.465455 82.850909-27.927273 92.16 19.549091 92.16 48.407273-4.654545 24.203636-12.101818 38.167273 18.618182 28.858182 0 0 80.989091-38.167273 114.501818-4.654546 26.996364 26.996364 4.654545 65.163636 4.654546 65.163637s-11.170909 12.101818 12.101818 16.756363c21.410909 3.723636 94.021818 37.236364 53.992727 122.88z m-80.058182-236.450909c-8.378182 0-15.825455-7.447273-15.825454-15.825454 0-9.309091 7.447273-15.825455 15.825454-15.825455 0 0 99.607273-18.618182 87.505455 89.367273v1.861818c-0.930909 7.447273-7.447273 13.963636-15.825455 13.963636-9.309091 0-15.825455-7.447273-15.825454-15.825454 0-1.861818 15.825455-73.541818-55.854546-57.716364zM797.789091 493.381818c-2.792727 18.618182-12.101818 11.170909-22.341818 11.170909-13.032727 0-23.272727-16.756364-23.272728-29.789091 0-11.170909 4.654545-22.341818 4.654546-22.341818 0.930909-4.654545 12.101818-34.443636-7.447273-78.196363-35.374545-60.509091-106.123636-60.509091-114.501818-57.716364-8.378182 3.723636-21.410909 5.585455-21.410909 5.585454-13.032727 0-23.272727-10.24-23.272727-23.272727 0-11.170909 7.447273-19.549091 16.756363-22.341818 0 0 0 0.930909 0.930909 0.930909s1.861818 0.930909 1.861819 0.930909c10.24-1.861818 45.614545-4.654545 79.127272 3.723637 62.370909 14.894545 146.152727 83.781818 108.916364 211.316363z",fill:"#EA5D5C","p-id":"3383"})])])],-1))),ca=ra((()=>x("div",{class:"row justify-between q-pt-md text-grey-8"},[x("span",null,"忘记密码"),x("span",{class:"sign-up text-center cursor-pointer"}," 还没有账号？现在注册！ ")],-1))),da=Lo(b({setup(e){M((e=>({c03cf714:T(r).pageLogin.themePageLoginBackground,"29c0d9ca":T(r).pageLogin.themePageLoginColor,65716948:T(r).global.themeColorAlpha,"2d05c9bc":T(r).global.themeColor}))),ke();const t=z(),o=j({username:"admin",password:"admin"}),a={username:[e=>e&&e.length>0||"请输入用户名"],password:[e=>e&&e.length>0||"请输入用户名"],rememberMe:[e=>!!e||"You need to accept the license and terms first"]},r=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]})),s=async()=>{Mr.system.useAccountStore().login(o.value).then((()=>{t.replace(t.currentRoute.value.query.redirect||"/index")}))},n=()=>{o.value={username:"",password:""}};return(e,t)=>(f(),C("div",sa,[x("div",na,[w(we,{greedy:"",class:"form-login",onSubmit:s,onReset:n},{default:k((()=>[ia,w(be,{modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.username=e),outlined:"",label:"用户名","lazy-rules":"",rules:a.username},{prepend:k((()=>[w(fe,{class:"icon",name:"perm_identity"})])),_:1},8,["modelValue","rules"]),w(be,{modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.password=e),outlined:"",label:"密码","lazy-rules":"",type:"password",rules:a.password},{prepend:k((()=>[w(fe,{class:"icon",name:"lock"})])),_:1},8,["modelValue","rules"]),x("div",null,[w(ce,{class:"btn-submit full-width no-outline text-h6",color:"primary",label:"登录",type:"submit"})]),la,ca])),_:1})])]))}}),[["__scopeId","data-v-193dcca0"]]),ua=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"})),ma=Lo(b({setup(e){M((e=>({"372905ce":T(r).global.themeQCardColor,"8c05f900":T(r).global.themeQCardBackgroundColor,e42ac686:T(r).global.themeColorActive})));const t=v({sortBy:"desc",descending:!1,rowsPerPage:10}),o=j([{id:"time",label:"时间",field:"time",align:"center"},{id:"message",label:"信息",field:"message",align:"center"},{id:"url",label:"触发页面",field:"url",align:"center"},{id:"more",label:"查看详情",align:"center"}]),a=y((()=>Mr.system.useLogStore().log)),r=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>(f(),g(xe,{class:"log-table-list",rows:T(a),columns:o.value,pagination:T(t)},{body:k((e=>[w(Se,{props:e},{default:k((()=>[w(_e,{key:"time",class:"text-center"},{default:k((()=>[_(S(e.row.time),1)])),_:2},1024),w(_e,{key:"message",class:"text-center"},{default:k((()=>[_(S(e.row.message),1)])),_:2},1024),w(_e,{key:"url",class:"text-center"},{default:k((()=>[_(S(e.row.meta.url),1)])),_:2},1024),w(_e,{key:"more",class:"text-center"},{default:k((()=>[w(ce,{icon:"more",rounded:"",onClick:t=>(e.row,void ne.create({type:"info",caption:"日志详情",message:"完整的日志内容已经打印到控制台"}))},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"]))}}),[["__scopeId","data-v-21f71763"]]),pa=x("div",{class:"text-h6"},"日志列表",-1),ha=_("关闭"),ga=b({setup(e){const t=j(!1),o=y((()=>Mr.system.useLogStore().length)),a=y((()=>Mr.system.useLogStore().lengthError)),r=y((()=>0===o.value?"没有日志或异常":`${o.value} 条日志${a.value>0?` | 包含 ${a.value} 个异常`:""}`)),s=()=>{t.value=!0};return(e,o)=>(f(),C(V,null,[w(ce,{icon:"adjust",size:"md",flat:"",round:"",onClick:s},{default:k((()=>[w(le,null,{default:k((()=>[_(S(T(r)),1)])),_:1})])),_:1}),w(Ve,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e)},{default:k((()=>[w(Le,{style:{width:"1440px","max-width":"960px"}},{default:k((()=>[w(Oe,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:k((()=>[pa,w(De),B((f(),g(ce,{icon:"close",flat:"",round:"",dense:""},{default:k((()=>[w(le,null,{default:k((()=>[ha])),_:1})])),_:1})),[[Te]])])),_:1}),w(Oe,{class:"theme-card"},{default:k((()=>[w(ma)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64))}}),fa=b({setup(e){const t=y((()=>Mr.system.useFullscreenStore().active)),o=()=>{Mr.system.useFullscreenStore().toggle()};return(e,a)=>(f(),g(ce,{icon:T(t)?"fullscreen_exit":"fullscreen",size:"md",flat:"",round:"",onClick:o},{default:k((()=>[w(le,null,{default:k((()=>[_(S(T(t)?"退出全屏":"全屏"),1)])),_:1})])),_:1},8,["icon"]))}}),va=_("已激活"),ya=_("使用"),ba=b({setup(e){M((e=>({"8eb8b804":T(r).global.themeQCardColor,"3bc3c48d":T(r).global.themeColorActive})));const t=j([{id:"title",label:"名称",field:"title",align:"center"},{id:"preview",label:"预览",field:"preview",align:"center"},{id:"handler",label:"操作",align:"center"}]),o=y((()=>Mr.system.useThemeStore().list)),a=y((()=>Mr.system.useThemeStore().activeName)),r=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>(f(),g(xe,{class:"theme-table-list",rows:T(o),"hide-header":"","hide-pagination":"",columns:t.value},{body:k((e=>[w(Se,{props:e},{default:k((()=>[w(_e,{key:"title"},{default:k((()=>[_(S(e.row.title),1)])),_:2},1024),w(_e,{key:"preview"},{default:k((()=>[_(S(e.row.preview),1)])),_:2},1024),w(_e,{key:"handler"},{default:k((()=>[T(a)===e.row.name?(f(),g(ce,{key:0,class:"active",icon:"done",rounded:"",outline:""},{default:k((()=>[va])),_:1})):(f(),g(ce,{key:1,rounded:"",outline:"",onClick:t=>{return o=e.row.name,void Mr.system.useThemeStore().set(o);var o}},{default:k((()=>[ya])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"]))}}),Ca=_("主题"),ka=x("div",{class:"text-h6"},"主题",-1),wa=_("关闭"),_a=b({setup(e){const t=j(!1);return(e,o)=>(f(),C(V,null,[w(ce,{icon:"style",size:"md",flat:"",round:"",onClick:o[0]||(o[0]=e=>t.value=!0)},{default:k((()=>[w(le,null,{default:k((()=>[Ca])),_:1})])),_:1}),w(Ve,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e)},{default:k((()=>[w(Le,{style:{width:"650px"}},{default:k((()=>[w(Oe,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:k((()=>[ka,w(De),B((f(),g(ce,{icon:"close",flat:"",round:"",dense:""},{default:k((()=>[w(le,null,{default:k((()=>[wa])),_:1})])),_:1})),[[Te]])])),_:1}),w(Oe,{class:"theme-card"},{default:k((()=>[w(ba)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64))}}),Sa=_("注销"),xa=b({setup(e){const{toggleGlobalLayout:t}=Mr.system.useLayoutStore(),{loadDefaultLayers:o}=Mr.viewer.useLayerStore(),a=Mr.system.useUserStore(),r=at(),s=()=>{Mr.system.useAccountStore().logout({confirm:!0}).then((e=>{if(e){o(!1),t({featureInfo:!1,layerManager:!1}),Mr.viewer.useRenderStore(jr).removeAllRenderData();const e={position:[105,30,21634101],heading:360,pitch:-90,roll:0};(null==r?void 0:r.viewer)&&rt(null==r?void 0:r.viewer,e,{duration:3})}}))};return(e,t)=>{var o;return f(),g(ce,{dense:"",rounded:"","no-caps":"",size:"md",class:"q-mr-sm","auto-close":"",icon:"person",label:null==(o=T(a).info)?void 0:o.username},{default:k((()=>[w(Re,null,{default:k((()=>[w(ue,{dense:""},{default:k((()=>[B((f(),g(ye,{clickable:"",dense:"",onClick:s},{default:k((()=>[w(he,{avatar:""},{default:k((()=>[w(Pe,{icon:"logout"})])),_:1}),w(he,null,{default:k((()=>[w(me,null,{default:k((()=>[Sa])),_:1})])),_:1})])),_:1})),[[Te]])])),_:1})])),_:1})])),_:1},8,["label"])}}}),La=_("简体中文"),Oa=_("English"),Da=b({setup(e){const{locale:t}=$(),o=j(!1),a=e=>{t.value=e,_t("locale",e)};return(e,t)=>(f(),g(Be,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),dense:"",color:"#fff","fab-mini":"",size:"md","dropdown-icon":"language",flat:""},{default:k((()=>[w(ue,null,{default:k((()=>[B((f(),g(ye,{clickable:"",onClick:t[0]||(t[0]=e=>a("zh-CN"))},{default:k((()=>[w(he,null,{default:k((()=>[w(me,null,{default:k((()=>[La])),_:1})])),_:1})])),_:1})),[[Te]]),B((f(),g(ye,{clickable:"",onClick:t[1]||(t[1]=e=>a("en-US"))},{default:k((()=>[w(he,null,{default:k((()=>[w(me,null,{default:k((()=>[Oa])),_:1})])),_:1})])),_:1})),[[Te]])])),_:1})])),_:1},8,["modelValue"]))}}),Ta=_("图层管理"),Va=b({setup(e){const{toggleGlobalLayout:t}=Mr.system.useLayoutStore(),o=()=>{t({layerManager:!Mr.system.useLayoutStore().global.layerManager})};return(e,t)=>(f(),g(ce,{size:"md",flat:"",round:"",color:"#fff",icon:"layers",onClick:o},{default:k((()=>[w(le,null,{default:k((()=>[Ta])),_:1})])),_:1}))}}),Pa={class:"vc-geocoder q-gutter-md row z-fab"},Ra=_(" 没有结果 "),Ba=Lo(b({setup(e){const t=at(),o=j(null),a=j([]),r=j(null),s=j([]),n=async(e,t,r)=>{const s={keywords:e=""===e?o.value:e,citylimit:!0,output:"json",key:"7370d0574108a3c8778e3b2ad20ce9ee"},n=await go.getLocationList(s);let i=[];if("1"===n.status){const e=n.pois,t=[];e.forEach((e=>{t.push({value:e.id,label:e.name,pname:e.pname,cityname:e.cityname,adname:e.adname,address:e.address,location:e.location,type:e.type})})),i=[...new Set(t)]}t((()=>{const t=null==e?void 0:e.toLocaleLowerCase();a.value=i.filter((e=>e.label.toLocaleLowerCase().indexOf(t)>-1))}))},i=e=>{o.value=e},l=()=>{o.value=null,s.value.length=0},c=e=>{if(e){const t=st(Number(e.location.trim().split(",")[0]),Number(e.location.trim().split(",")[1])),o={lng:t[0],lat:t[1],address:e.address};d(o,e)}else s.value.length=0},d=(e,o)=>{const a=e.lng,r=e.lat,n=e.address,{Rectangle:i,sampleTerrain:l}=Cesium,{viewer:c}=t;s.value.length=0,s.value.push({position:[a,r],point:{color:"#08ABD5",pixelSize:12,outlineWidth:3,outlineColor:"#fff"},properties:{...o},description:u({"经度":a,"纬度":r,"地址":n})}),new Cesium.HeadingPitchRange(0,0,3e3);const d=.01,m=i.fromDegrees(a-d,r-d,a+d,r+d),p=c.scene.camera,h=p.getRectangleCameraCoordinates(m),g=c.scene.globe.ellipsoid.cartesianToCartographic(h);l(c.scene.globe.terrainProvider,6,[i.center(m)]).then((function(e){const t={longitude:g.longitude,latitude:g.latitude,height:g.height+e[0].height},o=c.scene.globe.ellipsoid.cartographicToCartesian(t);p.flyTo({duration:3,destination:o})}))},u=(e,t)=>{let o="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(a===t)continue;let r=e[a];"object"==typeof r&&(r=u(r)),a=a.replace(/_/g," "),Cesium.defined(r)&&(o+="<tr><th>"+a+"</th><td>"+r+"</td></tr>")}return o.length>0&&(o='<table class="cesium-infoBox-defaultTable"><tbody>'+o+"</tbody></table>"),o};return(e,t)=>{const d=h("vc-datasource-custom");return f(),C(V,null,[x("div",Pa,[w(Ie,{outlined:"","model-value":o.value,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:a.value,label:"输入关键字搜索位置",style:{width:"250px"},dense:"","hide-dropdown-icon":"",onFilter:n,onInputValue:i,"onUpdate:modelValue":c},{prepend:k((()=>[w(fe,{name:"place",color:"white"})])),"no-option":k((()=>[w(ye,null,{default:k((()=>[w(he,{class:"text-grey"},{default:k((()=>[Ra])),_:1})])),_:1})])),append:k((()=>[null!==o.value?(f(),g(fe,{key:0,name:"cancel",class:"cursor-pointer",onClick:I(l,["stop"])},null,8,["onClick"])):L("",!0),w(fe,{name:"search",color:"orange"})])),_:1},8,["model-value","options"])]),w(d,{ref_key:"datasoureceRef",ref:r,entities:s.value},null,8,["entities"])],64)}}}),[["__scopeId","data-v-997632a4"]]),Ia={class:"left"},ja={class:"content"},Ma=(e=>(F("data-v-faa7a2c0"),e=e(),H(),e))((()=>x("div",{size:"60px",class:"logo-img float"},[x("img",{src:"https://zouyaoji.top/vue-cesium/favicon.png"})],-1))),Ea={class:"title text-h4 float"},Na={class:"nav float"},Aa={class:"right q-ml-sm q-mr-sm"},za={key:0,class:"content"},Fa=Lo(b({setup(e){M((e=>({"2fc39714":T(m).header.themeHeaderBackgroundColor,d641974a:T(m).header.themeHeaderContentBackgroundColor,"2fe102cb":T(m).header.themeHeaderLogoBackgroundColor,"101fd5aa":T(m).header.themeHeaderTitleColor,b0a25b78:T(m).header.themeHeaderColor,"1ff0d13e":T(m).global.themeColorActive})));const t=U(),o=j(!1),a=j(""),{registerTimeout:r}=nt(),s=j(100),n=Mr.system.useMenuStore(),i=Mr.system.useLayoutStore(),{global:l}=Je(i),c=y((()=>"VueCesium Demo")),d=y((()=>{const e=n.header;return e.length?e[0].children:[]})),u=y((()=>n.aside)),m=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));O((()=>t.matched),(e=>{r((()=>{if(e.length>1){const t=e[1].path.substring(1,e[1].path.length);t&&(a.value=t)}else a.value="index"}),s.value)}),{immediate:!0}),E((()=>{s.value=5}));const p=()=>{Ee("https://github.com/zouyaoji/vue-cesium-demo")},h=()=>{i.toggleGlobalLayout({leftDrawerMini:!l.value.leftDrawerMini})},v=e=>{null===e&&t.matched.length>1?a.value=t.matched[1].path.substring(1,t.matched[1].path.length):a.value=e};return(e,t)=>(f(),C("div",{class:"main-header",style:q({opacity:o.value?.5:1})},[x("div",Ia,[x("div",ja,[Ma,T(u).length?(f(),g(ce,{key:0,flat:"",icon:"menu",class:"text-white",round:"",style:{height:"24px"},onClick:h})):L("",!0),x("div",Ea,[x("div",null,S(T(c)),1)]),x("div",Na,[w(Me,{"model-value":a.value,"onUpdate:model-value":t[0]||(t[0]=e=>a.value=e),"onUpdate:modelValueOnce":v},{default:k((()=>[(f(!0),C(V,null,D(T(d),((t,o)=>(f(),g(je,{key:o,name:t.name,to:t.path,exact:"",label:e.$t(t.title),"active-class":"menu-active"},null,8,["name","to","label"])))),128))])),_:1},8,["model-value"])])])]),x("div",Aa,[T(d).length?(f(),C("div",za,[w(Ba),w(ce,{size:"md",flat:"",round:"",color:"#fff",onClick:p},{default:k((()=>[w(fe,{name:"fa fa-github"})])),_:1}),w(Va),w(ga),w(fa),w(_a),w(Da),w(xa)])):L("",!0)])],4))}}),[["__scopeId","data-v-faa7a2c0"]]),Ha={key:0,class:"text-weight-bold"},$a={class:"content"},Ua=Lo(b({props:{title:{type:String,default:""},titleClass:{type:String,default:""},closeTip:{type:String,default:"关闭"},showCloseBtn:{type:Boolean,default:!0},separatorOpts:{type:Object,default:()=>({show:!0,dark:!0,color:"white",size:"1px"})}},emits:["close"],setup(e,{emit:t}){M((e=>({ae362eba:T(a).commonPanel.themeCommonPanelHeaderColor,"460f2015":T(a).commonPanel.themeCommonPanelHeaderBackgroundColor,"47ca6c3d":T(a).commonPanel.themeCommonPanelContentColor,"387f29a2":T(a).commonPanel.themeCommonPanelContentBackgroundColor,"7010cc72":T(a).commonPanel.themeCommonPanelListColor,a2da4734:T(a).commonPanel.themeCommonPanelListBorderColor,e16129f2:T(a).global.themeColorAlpha,"70a49c97":T(a).global.themeColor})));const o=e=>{t("close",e)},a=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));return(t,a)=>(f(),g(Le,{class:"common-panel"},{default:k((()=>[w(Ne,{class:R(["header",e.titleClass])},{default:k((()=>[""!==e.title?(f(),C("div",Ha,S(e.title),1)):L("",!0),G(t.$slots,"header-left",{},void 0,!0),w(De),G(t.$slots,"header-right",{},void 0,!0),e.showCloseBtn?B((f(),g(ce,{key:1,dense:"",flat:"",icon:"close",onClick:o},{default:k((()=>[w(le,null,{default:k((()=>[_(S(e.closeTip),1)])),_:1})])),_:1})),[[Te]]):L("",!0)])),_:3},8,["class"]),e.separatorOpts.show?(f(),g(Ae,Q(W({key:0},e.separatorOpts)),null,16)):L("",!0),x("div",$a,[G(t.$slots,"default",{},void 0,!0)])])),_:3}))}}),[["__scopeId","data-v-dfd8cb64"]]),qa=b({name:"DragWrapper",props:{restriction:{type:[String,Object,Function],default:"parent"}},setup(e,t){const o=j(null),a=K(),r=e=>{const t=e.target,o=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+o+"px, "+a+"px)",t.setAttribute("data-x",o),t.setAttribute("data-y",a)},s=()=>{const e=o.value;wt(e).reflow({name:"drag",axis:"xy"})};return E((()=>{const t=o.value;wt(t).draggable({ignoreFrom:"button, .ignore-drag",allowFrom:".drag-handle",inertia:!0,onmove:r,restrict:{restriction:e.restriction,endOnly:!0,elementRect:{left:0,right:1,top:0,bottom:1}}}),addEventListener("resize",s,!1)})),J((()=>{const e=o.value;wt.isSet(e)&&wt(e).unset(),removeEventListener("resize",s,!1)})),Object.assign(null==a?void 0:a.proxy,{resizeListener:s}),()=>Y("div",{ref:o,class:"drag-wrapper absolute"},it(t.slots.default))}}),Ga={class:"text-subtitle2"},Qa={class:"q-gutter-sm"},Wa={class:"text-subtitle2"},Ja={class:"q-gutter-sm"},Ya={class:"text-subtitle2"},Ka={class:"q-gutter-sm"},Za=Lo(b({setup(e){const t=j(null),o=Mr.system.useLayoutStore(),{global:a,dynamicRender:r}=Je(o),{overlayLayers:s,baseLayers:n,vectorLayers:i,toggle:l}=Mr.viewer.useLayerStore();O(r,(e=>{Z((()=>{var e,o;t.value&&(null==(o=(e=t.value).resizeListener)||o.call(e))}))}),{deep:!0});const c=y((()=>({overlayLayers:s,baseLayers:n,vectorLayers:i}))),d=y({get(){var e,t;return null==(t=null==(e=c.value.baseLayers.filter((e=>e.show)))?void 0:e[0])?void 0:t.name},set(e){}}),u=(e,t)=>{c.value.baseLayers.forEach((t=>{t.name===e?l({names:t.name,show:!0}):l({names:t.name,show:!1})}))},m=(e,t)=>{const o=e.name;l({names:o,show:t})},p=()=>{o.toggleGlobalLayout({layerManager:!a.value.layerManager})};return(e,o)=>(f(),C("div",{class:R(["layer-manager",T(r).datasource.workBench?"":"full-srceen"])},[w(T(qa),{ref_key:"dragWrapperRef",ref:t},{default:k((()=>[B(w(Ua,{class:"layer-manager-panel",title:e.$t("message.panel.layerManager"),"title-class":"drag-handle",onClose:p},{default:k((()=>[w(Oe,{class:"q-pt-sm"},{default:k((()=>[x("div",Ga,S(e.$t("message.baseLayer")),1),x("div",Qa,[(f(!0),C(V,null,D(T(c).baseLayers,((e,t)=>(f(),g(ze,{key:t,modelValue:T(d),"onUpdate:modelValue":[o[0]||(o[0]=e=>X(d)?d.value=e:null),u],val:e.name,label:e.text},null,8,["modelValue","val","label"])))),128))])])),_:1}),w(Ae,{inset:""}),w(Oe,{class:"q-pt-sm"},{default:k((()=>[x("div",Wa,S(e.$t("message.overlayLayer")),1),x("div",Ja,[(f(!0),C(V,null,D(T(c).overlayLayers,((e,t)=>(f(),g(ge,{key:t,modelValue:e.show,"onUpdate:modelValue":[t=>e.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1}),w(Ae,{inset:""}),w(Oe,{class:"q-pt-sm"},{default:k((()=>[x("div",Ya,S(e.$t("message.vectorLayer")),1),x("div",Ka,[(f(!0),C(V,null,D(T(c).vectorLayers,((e,t)=>(f(),g(ge,{key:t,modelValue:e.props.show,"onUpdate:modelValue":[t=>e.props.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1})])),_:1},8,["title"]),[[A,T(a).layerManager]])])),_:1},512)],2))}}),[["__scopeId","data-v-6033cd15"]]),Xa={class:"main-interaction"},er={class:"layer-manager-wrapper"},tr=Lo(b({setup:e=>(y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]})),(e,t)=>(f(),C("div",Xa,[x("div",er,[w(Za)])])))}),[["__scopeId","data-v-121206f4"]]),or={VcCollectionPrimitive:lt,VcCollectionBillboard:ct,VcCollectionPoint:dt,VcCollectionPolyline:ut,VcDatasourceGeojson:mt,VcDatasourceCustom:pt,VcOverlayDynamic:ht,VcOverlayHeatmap:gt,VcPrimitiveTileset:ft},ar=b({name:"RenderData",setup(e,t){const o=at(),a=Mr.viewer.useRenderStore().renderDatas,r=Mr.viewer.useRenderStore().selectedRenderData,s=j(null);let n=!1;const{registerTimeout:i,removeTimeout:l}=nt(),{toggleGlobalLayout:c}=Mr.system.useLayoutStore(),{setMouseOverlayLabel:d,clearMouseOverlayLabel:u}=Mr.viewer.useOverlayStore();let m=!1;O((()=>Xe.exports.cloneDeep(r)),((e,t)=>{var o,a,r;if(e.model){const c=e.feature,d=t.feature;if(!n&&c.properties.id!==(null==(o=null==d?void 0:d.properties)?void 0:o.id)){const t=e.model.position||[Number(null==(a=c.properties)?void 0:a.longitude),Number(null==(r=c.properties)?void 0:r.latitude)];e.model&&t&&!isNaN(t[0])&&(l(),i((()=>{s.value.position.value=Cesium.Cartesian3.fromDegrees(t[0],t[1]),s.value.animateAppear(),m=!0}),1500))}n=!1}else(m&&!n||!n&&s.value.selectedFeature.value)&&s.value.animateDepart(),m=!1}),{deep:!0});const p=e=>{var t,a,r,s;const{viewer:n}=o;n.canvas.setAttribute("style","cursor: pointer");const{defined:i,JulianDate:l,BoundingSphere:c,PointPrimitiveCollection:u,BillboardCollection:m,PolylineCollection:p,PrimitiveCollection:h,GeoJsonDataSource:g,CustomDataSource:f}=Cesium;let v,y="",b=[0,0];if(e.cesiumObject instanceof m||e.cesiumObject instanceof u){const o=e.pickedFeature.primitive,a=null==o?void 0:o.feature;i(a)&&(y=null==(t=a.properties)?void 0:t.name,v=o.position||e.surfacePosition,b=[16,16])}else if(e.cesiumObject instanceof p){const t=e.pickedFeature.primitive,o=null==t?void 0:t.feature;if(i(o)){y=null==(a=o.properties)?void 0:a.name;const e=t.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof h){const t=null==(r=e.pickedFeature.primitive)?void 0:r._vcParent,o=null==t?void 0:t.feature;if(i(o)){y=null==(s=o.properties)?void 0:s.name;const e=t.positions.length?t.positions:t.polygonHierarchy.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof f||e.cesiumObject instanceof g){const t=e.pickedFeature.id,o=null==t?void 0:t.feature;if(i(o)){const e=o.properties;y=null==e?void 0:e.name;let a,r;switch(null==e?void 0:e.actualRenderingType){case"label":case"point":case"billboard":case"model":v=t.position.getValue(l.now());break;case"polyline":r=t.polyline.positions.getValue(),a=c.fromPoints(r),v=a.center;break;case"polygon":r=t.polygon.hierarchy.getValue().positions,a=c.fromPoints(r),v=a.center;break;case"geojson":y=t.properties.dValue.getValue(),a=new Cesium.BoundingSphere,n.dataSourceDisplay.getBoundingSphere(t,!0,a),v=a.center}b=[16,16]}}y&&""!==y&&d({position:v,show:!0,text:y,pixelOffset:b})},h=e=>{const{viewer:t}=o;t.canvas.setAttribute("style","cursor: auto"),u()},g=e=>{e?"__Vc__Pick__Location__"!==e.id&&(n=!0,c({featureInfo:!1}),setTimeout((()=>{var t,a,r;const{viewer:s}=o,{defined:n,JulianDate:i,BoundingSphere:l}=Cesium,d=(null==(t=e.cesiumObject)?void 0:t.feature)||(null==(r=null==(a=e.cesiumObject)?void 0:a._vcParent)?void 0:r.feature);n(d)?Z((()=>{var t,o;const{actualRenderingType:a,datasetId:r,id:n,renderingApi:c}=d.properties;let u,m;Qt(a,r,n);const p=e.cesiumObject;switch(a){case"label":case"point":case"billboard":case"model":"primitive"===c?p.position:p.position.getValue(i.now());break;case"polyline":m="primitive"===c?p.positions:p.polyline.positions.getValue(),u=l.fromPoints(m),u.center;break;case"polygon":m="primitive"===c?null==(t=p._vcParent)?void 0:t.polygonHierarchy.positions:p.polygon.hierarchy.getValue().positions,u=l.fromPoints(m),u.center;break;case"geojson":u=new Cesium.BoundingSphere,s.dataSourceDisplay.getBoundingSphere(p,!0,u),u.center}(!Cesium.defined(null==(o=null==d?void 0:d.properties)?void 0:o.showBillboardMenu)||d.properties.showBillboardMenu)&&f()})):(Gt(),c({featureInfo:!1}))}),100)):(Gt(),c({featureInfo:!1}))},f=()=>{r.feature.properties.id?It("属性展示逻辑待完善"):Rt("显示详情数据失败，原因：要素 id 值为空。","要素model：",r.model)};function v(e){this.cmpRef=e}const y=e=>{const t=[];return null==e||e.forEach((e=>{const o=or[e.cmpName];o?t.push(Y(o,{...e.props,ref:v.bind(e),onMouseover:p,onMouseout:h},(()=>y(null==e?void 0:e.children)))):Bt(`添加渲染数据集失败，原因：没要找到渲染组件名【${e.cmpName}】。`,"渲染集合数据模型：",e)})),t};return()=>{const e=[];return e.push(Y(vt,{ref:s,onPickEvt:g})),a.forEach((t=>{null==t||t.datasets.forEach((t=>{const o=or[t.cmpName];o?e.push(Y(o,{...t.props,ref:v.bind(t),onMouseover:p,onMouseout:h},(()=>y(null==t?void 0:t.children)))):Bt(`添加渲染数据集失败，原因：没要找到渲染组件名【${t.cmpName}】。`,"渲染集合数据模型：",t)}))})),e}}}),rr={class:"vc-drawtip vc-tooltip--style"},sr=b({emits:["viewerReady","cesiumReady","leftClick","destroyed"],setup(e,{emit:t}){const o={"en-US":bt,"zh-CN":Ct},{locale:a}=$(),r=y((()=>o[a.value])),s=Mr.system.useThemeStore(),n=y((()=>s.themeConfig[s.activeName])),{toggleGlobalLayout:i}=Mr.system.useLayoutStore(),{registerTimeout:l}=nt(),c=j(null),d=j([0,75]),u=y((()=>({outerOptions:{icon:n.value.navigation.themeVcCompassOuterIcon,color:n.value.navigation.themeVcCompassOuterColor},innerOptions:{icon:n.value.navigation.themeVcCompassInnerIcon,color:n.value.navigation.themeVcCompassInnerColor,background:n.value.navigation.themeVcCompassInnerBackgroundColor},markerOptions:{color:n.value.global.themeColorAlpha},duration:5}))),m=y((()=>({background:n.value.navigation.themeVcZoomControlBackgroundColor,color:n.value.global.themeColor,border:`solid 1px ${n.value.commonPanel.themeCommonPanelListBorderColor}`,zoomInOptions:{color:n.value.global.themeColor},zoomOutOptions:{color:n.value.global.themeColor},zoomResetOptions:{color:n.value.global.themeColor}}))),p=y((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),v=y((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),b=y((()=>({position:"bottom-right",offset:[0,10],statusBarOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcStatusBarBackgroundColor},distancelegendOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcDistanceLegendBackgroundColor}}))),_=Mr.viewer.useOverlayStore().mouseOverNameOpts;Mr.viewer.useRenderStore().selectedRenderData;const O=y((()=>[...Mr.viewer.useLayerStore().baseLayers,...Mr.viewer.useLayerStore().overlayLayers])),P=y((()=>Mr.viewer.useLayerStore().vectorLayers)),R=e=>{t("viewerReady",e),e.viewer.imageryLayers.removeAll(),i({header:!0}),l((()=>{i({content:!0})}),500)},B=e=>{t("cesiumReady",e)};return(e,t)=>{const o=h("vc-navigation"),a=h("vc-ajax-bar"),s=h("vc-layer-imagery"),n=h("vc-overlay-html"),i=h("vc-viewer");return f(),g(T(yt),{locale:T(r),"cesium-path":T("https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js")},{default:k((()=>[w(i,{ref_key:"viewerRef",ref:c,class:"main-viewer",onReady:R,onCesiumReady:B},{default:k((()=>[w(o,{offset:d.value,"compass-opts":T(u),"zoom-opts":T(m),"print-opts":T(p),"location-opts":T(v),"other-opts":T(b)},null,8,["offset","compass-opts","zoom-opts","print-opts","location-opts","other-opts"]),w(a,{position:"bottom",color:"#21BA45",size:"3px",positioning:"fixed"}),w(T(ar)),(f(!0),C(V,null,D(T(O),((e,t)=>(f(),g(s,{key:"layer"+t,alpha:e.alpha,brightness:e.brightness,contrast:e.contrast,"sort-order":e.sortOrder,show:e.show},{default:k((()=>[(f(),g(ee(e.component),Q(te(e.props)),null,16))])),_:2},1032,["alpha","brightness","contrast","sort-order","show"])))),128)),(f(!0),C(V,null,D(T(P),((e,t)=>(f(),C(V,{key:"vector"+t},["VcTerrainProviderCesium"!==e.component||e.props.show?(f(),g(ee(e.component),Q(W({key:0},e.props)),null,16)):L("",!0)],64)))),128)),T(_).show?(f(),g(n,{key:0,position:T(_).position,"pixel-offset":T(_).pixelOffset},{default:k((()=>[x("div",rr,S(T(_).text),1)])),_:1},8,["position","pixel-offset"])):L("",!0),G(e.$slots,"default")])),_:3},512)])),_:3},8,["locale","cesium-path"])}}}),nr={elevated:"",reveal:"",class:"absolute text-h4 text-center"},ir={key:0,class:"content"},lr=Lo(b({setup(e){M((e=>({"1549d95f":T(c).menu.themeMenuColor,"1dab70f9":T(c).menu.themeMenuActiveColor,"7f1fb4eb":T(c).menu.themeMenuActiveBackgroundColor})));const t=U(),o=Je(Mr.system.useLayoutStore()).global,{active:a}=Je(Mr.system.useGrayStore()),r=Mr.system.useMenuStore(),s=j(!1),n=y((()=>{const e=r.header;return e.length?e[0].children:[]})),i=y((()=>r.aside)),l=y((()=>t.name)),c=y((()=>{const e=Mr.system.useThemeStore();return e.themeConfig[e.activeName]}));return O((()=>t.matched),(e=>{if(e.length>1){const t=n.value.filter((t=>t.path===e[1].path));if(t.length){const e=t[0].children.filter((e=>10===e.type));e.length?r.asideSet(e):r.asideSet([])}else r.asideSet([])}}),{immediate:!0}),E((()=>{Mr.system.useAccountStore().load(),Mr.system.useFullscreenStore().listen(),window.onunhandledrejection=e=>{Mr.system.useLogStore(jr).push({message:Xe.exports.get(e,"reason.message","Unknown error"),type:"danger",meta:{error:Xe.exports.get(e,"reason"),trace:Xe.exports.get(e,"reason.stack")}})},window.onerror=(e,t,o,a,r)=>{Mr.system.useLogStore(jr).push({message:Xe.exports.get(r,"message","Unknown error"),type:"danger",meta:{error:r,trace:Xe.exports.get(r,"stack"),source:`${t}@${o}:${a}`,event:e}})}})),(e,t)=>{const r=h("router-view");return f(),g(Fe,{view:"hHh Lpr fFf",class:R(["main-layout",{"gray-mode":T(a)}])},{default:k((()=>{var a;return[(null==(a=T(i))?void 0:a.length)&&T(o).header?(f(),g(He,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"show-if-above":"",width:180,breakpoint:500,bordered:"",mini:T(o).leftDrawerMini},{default:k((()=>[w(Ce,{class:"fit"},{default:k((()=>[w(ue,{class:"drawer-menu-list"},{default:k((()=>[(f(!0),C(V,null,D(T(i),((t,a)=>(f(),C(V,{key:a},[B((f(),g(ye,{clickable:"","active-class":"menu-active-item",active:t.name===T(l),onClick:o=>e.$router.push(t.path)},{default:k((()=>[w(he,{avatar:""},{default:k((()=>[w(fe,{name:t.icon},null,8,["name"])])),_:2},1024),w(he,null,{default:k((()=>[_(S(e.$t(t.title)||t.caption),1)])),_:2},1024),T(o).leftDrawerMini?(f(),g(le,{key:0,"transition-show":"scale","transition-hide":"scale",anchor:"center right",self:"center left"},{default:k((()=>[_(S(e.$t(t.title)||t.caption),1)])),_:2},1024)):L("",!0)])),_:2},1032,["active","onClick"])),[[ve]]),t.separator?(f(),g(Ae,{key:"sep"+a})):L("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue","mini"])):L("",!0),w(Ue,{class:"no-padding"},{default:k((()=>[w($e,{class:"interaction-root"},{default:k((()=>[w(sr,null,{default:k((()=>[B(x("header",nr,[w(Fa)],512),[[A,T(o).header]]),T(o).content?(f(),C("div",ir,[w(tr),w(r)])):L("",!0)])),_:1})])),_:1})])),_:1})]})),_:1},8,["class"])}}}),[["__scopeId","data-v-3b478710"]]),cr=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),dr=Kt([]);Kt([]);const ur={theme:{list:[{title:"经典",name:"classic",preview:"images/theme/classic/preview@2x.png"},{title:"Element",name:"element",preview:"images/theme/element/preview@2x.png"}]},menu:{asideCollapse:!1,asideTransition:!0},hotkey:{search:{open:"s",close:"esc"}},transition:{active:!0}},mr=We("menu",{state:()=>({header:[],aside:[],asideCollapse:ur.menu.asideCollapse,asideTransition:ur.menu.asideTransition,moduleHeader:[]}),getters:{},actions:{async asideCollapseSet(e){this.asideCollapse=e;So().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideCollapseToggle(){this.asideCollapse=!this.asideCollapse;So().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideTransitionSet(e){this.asideTransition=e;So().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideTransitionToggle(){this.asideTransition=!this.asideTransition;So().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideLoad(){So().get({dbName:"sys",path:"menu",defaultValue:String(ur.menu),user:!0})},headerSet(e){this.header=e},asideSet(e){this.aside=e},clear(){this.header=[],this.aside=[]},moduleHeaderSet(e){this.moduleHeader=e}}}),pr=We("search",{state:()=>({active:!1,hotkey:{open:ur.hotkey.search.open,close:ur.hotkey.search.close},pool:[]}),actions:{toggle(){this.active=!this.active},set(e){this.active=e},init(e){const t=[],o=function(e,a=[]){e.forEach((e=>{e.children?o(e.children,[...a,e.title]):t.push({...e,fullTitle:[...a,e.title].join(" / ")})}))};o(e),this.pool=t}}}),hr=[...dr];const gr=Object.assign({"../../pages/dynamic-render/Index.vue":Do,"../../pages/dynamic-render/datasource/Index.vue":qo,"../../pages/dynamic-render/datasource/data-list-tree/Index.vue":jo,"../../pages/dynamic-render/datasource/work-bench/Index.vue":Ho,"../../pages/dynamic-render/historical-track/Index.vue":Wo,"../../pages/index/Index.vue":Ko,"../../pages/system/Error404.vue":aa,"../../pages/system/Login.vue":ua});function fr(e,t){return null==e&&(e={path:"/",children:[]}),t.forEach((t=>{let o=e;if(20!==t.type&&(null!=(a=t.component)&&""!==a)){let a=null;a="MainLayout"===t.component?lr:(e=>{const t=gr[`../../pages${e}/Index.vue`];if(t)return t.default;Rt(`动态路由页面【${e}】加载失败。请检查页面文件是否存在。`)})(t.path);const r=e.children;o={path:t.path,name:t.name,component:a,meta:{title:t.title,auth:!0,cache:!0}},t.redirect&&(o.redirect=t.redirect),r.push(o)}var a;null!=t.children&&t.children.length>0&&(null==o.children&&(o.children=[]),fr(o,t.children))})),e.children}function vr(e,t){return null==e&&(e=[]),e.forEach((e=>{null!=e.permission&&""!==e.permission&&t.push(e.permission),null!=e.children&&e.children.length>0&&vr(e.children,t)})),t}function yr(e){null==e&&(e=[]);let t=[];return e.forEach((e=>{if(10!==e.type)return;let o,a;null!=e.children&&e.children.length>0&&(o=yr(e.children)),null!=e.icon&&""!==e.icon&&(a=e.icon),t.push({icon:a,children:o,...e})})),0===t.length&&(t=void 0),t}const br=We("permission",{state:()=>({routes:[],addRoutes:[],permissions:[],inited:!1}),getters:{},actions:{setRoutes({accessedRoutes:e,permissions:t}){this.addRoutes=e,this.routes=Pt.concat(e),this.inited=!0,this.permissions=t},clear(){this.addRoutes=[],this.routes=[],this.inited=!1,this.permissions=[]},generateRoutes({menuTree:e}){return new Promise((t=>{const o=fr(null,e),a=vr(e,[]);this.setRoutes({accessedRoutes:o,permissions:a}),o.forEach((e=>{"layout"===e.name&&"/"===e.path&&(e.children=e.children.concat(Vt[0].children)),bo.addRoute(e)}));const r=Kt(yr(e));dr.splice(0,dr.length),dr.push(...hr),dr.push(...r);mr().headerSet(dr);pr().init(dr),t(!0)}))},async getAccessibleMenus({state:e,dispatch:t}){}}}),Cr=We("gray",{state:()=>({active:!1}),getters:{},actions:{toggle(){this.active=!this.active},set(e){this.active=e}}}),kr={themeName:"classic",global:{themeBGColor:"#ebf1f6",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#cbe1e5",themeColorAlpha:"rgba(255, 255, 255, 0.6)",themeColorActive:"#fff",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#fff",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#1976d2",themeQMenuColor:"#fff",themeQMenuBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQCardColor:"#fff",themeQCardHeaderBackgroundColor:"rgba(0, 101, 122, 0.5)",themeQCardBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQScrollAreaColor:"#fff"},header:{themeHeaderColor:"#cbe1e5",themeHeaderTitleColor:"#fff",themeHeaderLogoBackgroundColor:"rgba(255, 255, 255, 0)",themeHeaderBackgroundColor:"rgba(29, 29, 29, 0)",themeHeaderContentBackgroundColor:"rgba(0, 68, 82, 0.6)"},commonPanel:{themeCommonPanelHeaderColor:"#fff",themeCommonPanelHeaderBackgroundColor:"rgba(0, 101, 122, 0.8)",themeCommonPanelContentColor:"#fff",themeCommonPanelContentBackgroundColor:"rgba(0, 68, 82, 0.6)",themeCommonPanelListColor:"#fff",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"svguse:#vc-icons-compass-outer",themeVcCompassOuterColor:"rgba(0, 68, 82)",themeVcCompassInnerIcon:"fa fa-compass",themeVcCompassInnerColor:"rgba(255, 255, 255, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcZoomControlBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcPrintBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcStatusBarBackgroundColor:"rgba(0, 68, 82, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(0, 68, 82, 0.8)"},pageLogin:{themePageLoginColor:"#fff",themePageLoginBackground:"rgba(29,29,29, 0.5)"},menu:{themeMenuColor:"#cbe1e5",themeMenuActiveColor:"#fff",themeMenuActiveBackgroundColor:"#F2C037"}},wr={themeName:"element",global:{themeBGColor:"#314255",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#bfcbd9",themeColorAlpha:"rgba(70, 160, 252, 0.6)",themeColorActive:"#46a0fc",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#bfcbd9",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#46a0fc",themeQMenuColor:"#bfcbd9",themeQMenuBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQCardColor:"#bfcbd9",themeQCardHeaderBackgroundColor:"rgba(49, 66, 85, 0.5)",themeQCardBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQScrollAreaColor:"#46a0fc"},header:{themeHeaderColor:"#bfcbd9",themeHeaderTitleColor:"#bfcbd9",themeHeaderLogoBackgroundColor:"#314255",themeHeaderBackgroundColor:"#202d3d",themeHeaderContentBackgroundColor:"#314255"},commonPanel:{themeCommonPanelHeaderColor:"#bfcbd9",themeCommonPanelHeaderBackgroundColor:"rgba(49, 66, 85, 0.8)",themeCommonPanelContentColor:"#bfcbd9",themeCommonPanelContentBackgroundColor:"rgba(32, 45, 61, 0.6)",themeCommonPanelListColor:"#bfcbd9",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"fa fa-circle-o-notch",themeVcCompassOuterColor:"rgb(49, 66, 85)",themeVcCompassInnerIcon:"fa fa-circle",themeVcCompassInnerColor:"rgba(49, 66, 85, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcZoomControlBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcPrintBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcStatusBarBackgroundColor:"rgba(49, 66, 85, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(49, 66, 85, 0.8)"},pageLogin:{themePageLoginColor:"#bfcbd9",themePageLoginBackground:"rgba(32, 45, 61, 0.5)"},menu:{themeMenuColor:"#bfcbd9",themeMenuActiveColor:"#bfcbd9",themeMenuActiveBackgroundColor:"#F2C037"}};let _r="";const Sr=We("theme",{state:()=>({list:Xe.exports.get(ur,"theme.list",[]),activeName:Xe.exports.get(ur,"theme.list[0].name","h2o"),themeConfig:{classic:kr,element:wr}}),getters:{activeSetting:e=>e.list.find((t=>t.name===e.activeName))},actions:{dom(){const e=`theme-${_r}`,t=`theme-${this.activeName}`;document.body.className.includes(e)?document.body.className=document.body.className.replace(e,t):document.body.className+=" "+t;const o=this.themeConfig[this.activeName];Object.keys(o.global).forEach((e=>{document.body.style.setProperty(`--${e}`,o.global[e])}))},async set(e){_r=this.activeName,this.activeName=this.list.find((t=>t.name===e))?e:this.list[0].name,this.dom();So().set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})},async load(){_r=this.activeName;const e=So(),t=e.get({dbName:"sys",path:"theme.activeName",defaultValue:this.list[0].name,user:!0});this.list.find((e=>e.name===t))?this.activeName=t:(this.activeName=this.list[0].name,e.set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})),this.dom()}}}),xr=We("transition",{state:()=>({active:ur.transition.active}),actions:{async set(e){this.active=e;So().set({dbName:"sys",path:"transition.active",value:String(this.active),user:!0})},async load(){const e=So();this.active=e.get({dbName:"sys",path:"transition.active",defaultValue:String(ur.transition.active),user:!0})}}}),Lr=We("account",{state:()=>({}),getters:{},actions:{async login(e){const t=(await ho.login(e)).data;_t("token",t.token),_t("uuid",t.id);xo().set({...t}),this.load()},logout:({confirm:e=!1}={})=>new Promise(((t,o)=>{async function a(){xt("token"),xt("uuid");xo().set({});br().clear();mr().clear(),bo.push({name:"login"}),t(!0)}if(e){const e=Cr();e.set(!0),qe.create({title:"注销用户",message:"确定要注销当前用户吗？",cancel:!0}).onOk((()=>{e.set(!1),a()})).onCancel((()=>{e.set(!1),ne.create({message:"取消注销操作"}),t(!1)}))}else a()})),async load(){xo().load();Sr().load();xr().load();mr().asideLoad()}}}),Or=We("fullscreen",{state:()=>({active:!1}),getters:{},actions:{listen(){const e=this;oe.isEnabled&&oe.on("change",(()=>{oe.isFullscreen||(e.active=!1)}))},toggle(){oe.isFullscreen?(oe.exit(),this.active=!1):(oe.request(),this.active=!0)}}}),Dr=We("layout",{state:()=>({global:{header:!1,leftDrawerMini:!0,content:!1,footer:!1,layerManager:!1,navigation:!1,featureInfo:!1},dynamicRender:{datasource:{workBench:!1}}}),getters:{},actions:{toggleGlobalLayout(e){Object.keys(e).forEach((t=>{Xe.exports.isBoolean(e[t])&&(this.global[t]=e[t])}))},toggleDynamicRenderPageLayout(e){const t=(e,a)=>{Object.keys(e).forEach((r=>{o(e[r])?t(e[r],a[r]):Xe.exports.isBoolean(e[r])&&(a[r]=e[r])}))};t(e,this.dynamicRender)}}}),Tr=We("log",{state:()=>({log:[]}),getters:{length:e=>e.log.length,lengthError:e=>e.log.filter((e=>"danger"===e.type)).length},actions:{push({message:e,type:t="info",meta:o}){this.log.push({message:e,type:t,time:ae().format("YYYY-MM-DD HH:mm:ss"),meta:{uuid:St("uuid"),token:St("token"),url:Xe.exports.get(window,"location.href",""),...o}})},clean(){this.log=[]}}}),Vr={useAccountStore:e=>Lr(e),useDBStore:e=>So(e),useFullscreenStore:e=>Or(e),useGrayStore:e=>Cr(e),useLayoutStore:e=>Dr(e),useLogStore:e=>Tr(e),useMenuStore:e=>mr(e),usePermissionStore:e=>br(e),useSearchStore:e=>pr(e),useThemeStore:e=>Sr(e),useTransitionStore:e=>xr(e),useUserStore:e=>xo(e)},Pr=We("layer",{state:()=>({baseLayers:[{name:"tianditu_img",text:"天地图影像",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"tianditu_vec",text:"天地图电子",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"baidu_img",text:"百度影像",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu",text:"百度电子",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_midnight",text:"百度地图_午夜蓝",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"midnight",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_dark",text:"百度地图_黑夜",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"dark",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_img",text:"高德影像",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"6",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_vec",text:"高德地图",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"7",scl:"2",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_img",text:"腾讯影像",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_vec",text:"腾讯电子",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_my",text:"腾讯电子_墨渊",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},styleId:"4",minimumLevel:0,maximumLevel:17}},{name:"osm",text:"OSM",component:"VcImageryProviderOsm",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1},{name:"arcgis",text:"ArcGIS",component:"VcImageryProviderArcgis",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1}],overlayLayers:[{name:"tianditu_cva",text:"天地图注记",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"cva_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"amap_label",text:"高德注记",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"8",ltype:"4",minimumLevel:0,maximumLevel:17}},{name:"amap_traffictile",text:"高德路况",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{url:"/traffictile?v=1.0&x={x}&y={y}&z={z}&t=1",minimumLevel:0,maximumLevel:17}},{name:"baidu_traffic",text:"百度路况",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"traffic",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}}],vectorLayers:[{name:"admin",text:"行政区划",component:"VcDatasourceGeojson",props:{strokeWidth:5,stroke:"#ffc107",fill:"transparent",show:!1,data:"/vue-cesium-demo/datas/china.json"}},{name:"terrain",text:"全球地形",component:"VcTerrainProviderCesium",props:{show:!1}}]}),getters:{},actions:{toggle({names:e,show:t}){const o=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers];(e=Array.isArray(e)?e:[e]).forEach((e=>{var a;const r=Xe.exports.find(o,(t=>t.name===e));!Xe.exports.isUndefined(null==r?void 0:r.show)&&(r.show=t),!Xe.exports.isUndefined(null==(a=null==r?void 0:r.props)?void 0:a.show)&&(r.props.show=t)}))},loadDefaultLayers(e){const t=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers].map((e=>e.name));this.toggle({names:t,show:!1});this.toggle({names:["tianditu_img","admin"],show:!0})}}}),Rr=We("overlay",{state:()=>({mouseOverNameOpts:{position:[117.186419,45.66446,20],show:!1,text:"",pixelOffset:[0,0]}}),getters:{},actions:{setMouseOverlayLabel({position:e,show:t,text:o,pixelOffset:a}){this.mouseOverNameOpts.position=e,this.mouseOverNameOpts.show=t,this.mouseOverNameOpts.text=o,this.mouseOverNameOpts.pixelOffset=a},clearMouseOverlayLabel(){this.mouseOverNameOpts.position=void 0,this.mouseOverNameOpts.show=!1,this.mouseOverNameOpts.text=void 0}}}),Br=We("render",{state:()=>({renderDatas:[],selectedRenderData:{model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]}}),getters:{},actions:{addRenderDatas(e){(e=Array.isArray(e)?e:[e]).forEach((e=>{-1===Xe.exports.findIndex(this.renderDatas,(t=>t.id===e.id))?this.renderDatas.push(e):Bt(`添加渲染数据集失败，原因：id 为【${e.id} 】的数据已经存在。`,"渲染数据模型：",e)}))},removeRenderDataById(e){Xe.exports.remove(this.renderDatas,(t=>t.id===e))},removeRenderDataByType(e){Xe.exports.remove(this.renderDatas,(t=>t.type===e))},removeRenderDataByPage(e){Xe.exports.remove(this.renderDatas,(t=>t.page===e))},removeAllRenderData(){this.renderDatas.length=0},setSelectedRenderData(e){this.selectedRenderData.model=e.model,this.selectedRenderData.renderingType=e.renderingType,this.selectedRenderData.restoreHandler=e.restoreHandler,this.selectedRenderData.feature=e.feature,this.selectedRenderData.featureInfoListItems=e.featureInfoListItems},getRenderDataByDatasetId(e){return Xe.exports.find(this.renderDatas,(t=>t.id===e))}}}),Ir={useLayerStore:e=>Pr(e),useOverlayStore:e=>Rr(e),useRenderStore:e=>Br(e)},jr=Ye(),Mr={system:{...Vr},viewer:{...Ir}};const Er=re(Lo({},[["render",function(e,t){const o=h("router-view");return f(),g(o)}]]));Er.use(Ge,{plugins:{Notify:ne,Dialog:qe,LocalStorage:se},lang:Qe}),Er.use(yo),Er.use(kt),Er.use(jr),Er.use(bo),Er.mount("#app");
