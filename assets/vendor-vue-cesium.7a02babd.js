var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,s=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&r(e,i,t[i]);if(n)for(var i of n(t))a.call(t,i)&&r(e,i,t[i]);return e},l=(e,n)=>t(e,i(n));import{z as c,A as u,B as d,C as p,D as m,E as v,r as h,v as g,b as f,F as y,p as b,G as C,H as w,g as O,I as x,J as S,K as _,L as E,M as P,i as T,k as M,N as I,O as j,f as L,P as A,Q as D,m as R,a as k,n as B,j as N,w as V,h as z,d as F,o as H,T as U,l as W,R as G,c as $,S as Z,U as Y,V as q,W as X,X as Q,Y as J,Z as K,_ as ee,u as te,$ as ie,a0 as ne}from"./vendor.bd0e1271.js";import{r as oe,i as ae}from"./vendor-echarts.1c7e604f.js";const re="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,se=re?Symbol("VueCesium"):"VueCesium",le=re?Symbol("_vc_f_"):"_vc_f_",ce=Symbol();function ue(e){const t=Object.getPrototypeOf(e),i={};return Object.setPrototypeOf(i,t),Object.keys(e).forEach((t=>{const n=me(e[t]);if(e[t]&&p(e[t])||e[t]instanceof Element)i[t]=e[t];else if(e[t]&&"object"==typeof e[t]&&!Cesium[n]){const n=ue(e[t]);Object.keys(n).length&&(i[t]=n)}else""!==e[t]&&void 0!==e[t]&&null!==e[t]&&(i[t]=e[t])})),i}function de(e){if(m(e)||v(e))return!0;if(e instanceof Element)return!1;return 0===Object.keys(e).length}const pe=c;function me(e){if(e&&e.constructor){const t=e.constructor.toString();let i=t.substr(0,t.indexOf("("));return i=i.replace("function",""),i.replace(/(^\s*)|(\s*$)/gi,"")}return typeof e}function ve(e,t){return null!=e?e:t}function he(e,t=[]){const i={};return Object.keys(e).forEach((n=>{if(-1===t.indexOf(n)){const t=e[n];i[n]=u(t)?void 0:d(t)?u(t.default)?t.default():t.default:t}})),i}const ge=(e,t,i=[])=>{for(const n in t)e[n]||-1!==i.indexOf(n)||(e[n]=t[n])};const fe=h({});function ye(e){const t=b(ce,fe);return e?C(t.value)&&w(t.value,e)?f((()=>t.value[e])):h(void 0):t}const be=(e,t)=>{var i;const n=!!O(),o=n?ye():void 0,a=null!=(i=null==t?void 0:t.provide)?i:n?g:void 0;if(!a)return;const r=f((()=>{const t=y(e);return o?((e,t)=>{var i;const n=[...new Set([...Object.keys(e),...Object.keys(t)])],o={};for(const a of n)o[a]=null!=(i=t[a])?i:e[a];return o})(o.value,t):t}));return a(ce,r),fe.value=r.value,r};function Ce(e){var t,i,n,o;return{log:((e="")=>function(...t){e&&(x(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ${null==(t=null==e?void 0:e.proxy)?void 0:t.$options.name}`),warn:((e="")=>function(...t){e&&(x(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] WARN ${null==(i=null==e?void 0:e.proxy)?void 0:i.$options.name}`),error:((e="")=>function(...t){e&&(x(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ERR ${null==(n=null==e?void 0:e.proxy)?void 0:n.$options.name}`),debug:((e="")=>function(...t){e&&(x(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] Debug ${null==(o=null==e?void 0:e.proxy)?void 0:o.$options.name}`),capsule:(e,t,i="primary")=>{},success:e=>{},warning:e=>{},danger:e=>{},primary:e=>{}}}Ce(void 0);const we=Symbol("INSTALLED_KEY"),Oe=Object.prototype.hasOwnProperty;function xe(...e){let t;return"object"!=typeof e[e.length-1]&&(t=e.pop()),e.slice(1).reduce(((e,i,n)=>function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(t).forEach((function(n){if(!i&&Oe.call(e,n))return;const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o)})),e}(e,i,t)),e[0])}function Se(e,t){return null!==e.vnode.props&&void 0!==e.vnode.props[t]}function _e(e,t){const i=e.vnode.props;if(null===i)return;const n=Object.keys(i);return i[n[S(n,(e=>e.includes(`on${_(t)}`)||e.includes(`on${_(E(t))}`)))]]}function Ee(e){return e.value}function Pe(e){var t;const i=e.parent;return i.cesiumClass||"VcViewer"===(null==(t=i.proxy)?void 0:t.$options.name)?i:Pe(i)}function Te(e,t=!1){const{Cartesian2:i,CallbackProperty:n}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof n)return e;if(d(e)&&w(e,"x")&&w(e,"y")){const t=e;return new i(t.x,t.y)}return p(e)?new i(e[0],e[1]):u(e)?new n(e,t):void 0}function Me(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:a,SampledPositionProperty:r,CompositePositionProperty:s,ConstantPositionProperty:l,TimeIntervalCollectionPositionProperty:c}=Cesium;if(e instanceof o||e instanceof n||e instanceof r||e instanceof s||e instanceof l||e instanceof c)return e;if(t=t||a.WGS84,d(e)){if(w(e,"x")&&w(e,"y")&&w(e,"z")){const t=e;return new o(t.x,t.y,t.z)}if(w(e,"lng")&&w(e,"lat")){const i=e;return o.fromDegrees(i.lng,i.lat,i.height||0,t)}}return p(e)?o.fromDegrees(e[0],e[1],e[2]||0,t):u(e)?new n(e,i):void 0}function Ie(e,t,i=!1){const{CallbackProperty:n,Cartesian3:o,Ellipsoid:a}=Cesium;if(e instanceof n)return e;if(u(e))return new n(e,i);if(t=t||a.WGS84,p(e)){if(p(e[0])||d(e[0])){const i=[];return e.forEach((e=>{i.push(Me(e,t))})),i}return o.fromDegreesArrayHeights(e,t)}}function je(e,t){const{CallbackProperty:i}=Cesium;if(e instanceof i)return e;if(u(e))return new i(e,t);if(p(e)){const t=[];return e.forEach((e=>{t.push(Te(e))})),t}}function Le(e,t=!1){const{CallbackProperty:i,Quaternion:n,VelocityOrientationProperty:o}=Cesium;if(e instanceof n||e instanceof i||e instanceof o)return e;if(d(e)&&w(e,"x")&&w(e,"y")){const t=e;return new n(t.x,t.y,t.z,t.w)}return p(e)?new n(e[0],e[1],e[2],e[3]):u(e)?new i(e,t):void 0}function Ae(e,t){e.forEach((e=>{e.positions=Ie(e.positions,t),e.holes&&Ae(e.holes,t)}))}function De(e,t,i=!1){var n;const{PolygonHierarchy:o,CallbackProperty:a}=Cesium;if(e instanceof o||e instanceof a)return e;if(u(e))return new a(e,i);if(p(e)&&e.length>=3){return new o(Ie(e,t))}if(d(e)&&w(e,"positions")){const i=e;return i.positions=Ie(i.positions,t),(null==(n=i.holes)?void 0:n.length)&&Ae(i.holes,t),i}}function Re(e,t=!1){const{NearFarScalar:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(d(e)&&w(e,"near")&&w(e,"far")){const t=e;return new i(t.near,t.nearValue||0,t.far,t.farValue||1)}return p(e)?new i(e[0],e[1],e[2],e[3]):u(e)?new n(e,t):void 0}function ke(e,t=!1){const{Color:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(x(e))return i.fromCssColorString(e);if(d(e)){if(w(e,"red")){const t=e;return i.fromBytes(t.red,t.green||255,t.blue||255,t.alpha||255)}if(w(e,"x")){const t=e;return new i(t.x,t.y||1,t.z||1,t.w||1)}}return p(e)?i.fromBytes(e[0],e[1],e[2],e[3]||255):u(e)?new n(e,t):void 0}function Be(e){var t;const i=null==(t=null==this?void 0:this.proxy)?void 0:t.$options.name;if(i&&(-1!==i.indexOf("Graphics")||-1!==i.indexOf("Datasource")||"VcOverlayDynamic"===i||"VcEntity"===i))return function(e,t=!1){const{CallbackProperty:i,Color:n,CheckerboardMaterialProperty:o,ColorMaterialProperty:a,GridMaterialProperty:r,ImageMaterialProperty:s,PolylineArrowMaterialProperty:l,PolylineDashMaterialProperty:c,PolylineGlowMaterialProperty:m,PolylineOutlineMaterialProperty:v,StripeMaterialProperty:h,StripeOrientation:g}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof a||e instanceof s||e instanceof l||e instanceof c||e instanceof m||e instanceof v||e instanceof h||-1!==me(e).indexOf("MaterialProperty"))return e;if(x(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new s({image:e,repeat:Te({x:1,y:1}),color:n.WHITE,transparent:!0});if(p(e)||x(e))return new a(ke(e));if(d(e)&&w(e,"fabric")){const t=e;switch(t.fabric.type){case"Image":return new s({image:t.fabric.uniforms.image,repeat:Te(t.fabric.uniforms.repeat||{x:1,y:1}),color:ke(t.fabric.uniforms.color)||n.WHITE,transparent:t.fabric.uniforms.transparent||!1});case"Color":return new a(ke(t.fabric.uniforms.color||n.WHITE));case"PolylineArrow":return new l(ke(t.fabric.uniforms.color||n.WHITE));case"PolylineDash":return new c({color:ke(t.fabric.uniforms.color||"white")||n.WHITE,gapColor:ke(t.fabric.uniforms.gapColor)||n.TRANSPARENT,dashLength:t.fabric.uniforms.taperPower||16,dashPattern:t.fabric.uniforms.taperPower||255});case"PolylineGlow":return new m({color:ke(t.fabric.uniforms.color)||n.WHITE,glowPower:t.fabric.uniforms.glowPower||.25,taperPower:t.fabric.uniforms.taperPower||1});case"PolylineOutline":return new v({color:ke(t.fabric.uniforms.color)||n.WHITE,outlineColor:ke(t.fabric.uniforms.outlineColor)||n.BLACK,outlineWidth:t.fabric.uniforms.outlineWidth||1});case"Checkerboard":return new o({evenColor:ke(t.fabric.uniforms.evenColor)||n.WHITE,oddColor:ke(t.fabric.uniforms.oddColor)||n.BLACK,repeat:Te(t.fabric.uniforms.repeat||{x:2,y:2})});case"Grid":return new r({color:ke(t.fabric.uniforms.color)||n.WHITE,cellAlpha:t.fabric.uniforms.cellAlpha||.1,lineCount:Te(t.fabric.uniforms.lineCount||{x:8,y:8}),lineThickness:Te(t.fabric.uniforms.lineThickness||{x:1,y:1}),lineOffset:Te(t.fabric.uniforms.lineOffset||{x:0,y:0})});case"Stripe":return new h({orientation:t.fabric.uniforms.orientation||g.HORIZONTAL,evenColor:ke(t.fabric.uniforms.evenColor||"white"),oddColor:ke(t.fabric.uniforms.oddColor||"black"),offset:t.fabric.uniforms.offset||0,repeat:t.fabric.uniforms.repeat||1})}}return u(e)?new i(e,t):e}(e);const{Material:n,combine:o}=Cesium;if(e instanceof n)return e;if(d(e)&&w(e,"fabric")){const t=e=>{for(const i in e)if(!p(e[i])&&d(e[i]))t(e[i]);else if(-1!==i.toLocaleLowerCase().indexOf("color")&&!de(e[i])){const t=ke(e[i]);e[i]=o(t,t,!0)}};return t(e),new n(e)}if(p(e)||x(e)){const t=n.fromType("Color");return t.uniforms.color=ke(e),t}}function Ne(e){var t;const{Appearance:i,DebugAppearance:n,MaterialAppearance:o,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:r,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof i||e instanceof n||e instanceof o||e instanceof a||e instanceof r||e instanceof l||e instanceof c||-1!==me(e).indexOf("Appearance"))return e;if(d(e)&&w(e,"type")){const i=s({},e.options);return(null==(t=e.options)?void 0:t.material)&&(i.material=Be.call(this,e.options.material)),new Cesium[e.type](s({},i))}}function Ve(e,t=!1){const{Rectangle:i,RectangleGraphics:n,CallbackProperty:o}=Cesium;if(e instanceof n||e instanceof i)return e;if(p(e))return i.fromDegrees(e[0],e[1],e[2],e[3]);if(d(e)){if(w(e,"west")){const t=e;return i.fromDegrees(t.west,t.south,t.east,t.north)}if(w(e,"x")){const t=e;return new i(t.x,t.y,t.z,t.w)}}return u(e)?new o(e,t):void 0}function ze(e,t=!1){const{BoundingRectangle:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(d(e)&&w(e,"x")){const t=e;return new i(t.x,t.y,t.width,t.height)}return p(e)?new i(e[0],e[1],e[2],e[3]):u(e)?new n(e,t):void 0}function Fe(e,t){const{Math:i,Rectangle:n}=Cesium;let o,a={};if(w(e,"position")){const n=e.position;o=Me(n,t),a=w(n,"lng")&&w(n,"lat")||p(n)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}else if(w(e,"rectangle")){const t=e.retangle;o=Ve(t),n.validate(o),a=w(t,"west")&&w(t,"south")&&w(t,"east")&&w(t,"north")||p(t)?{heading:i.toRadians(e.heading||360),pitch:i.toRadians(e.pitch||-90),roll:i.toRadians(e.roll||0)}:{heading:e.heading||2*Math.PI,pitch:e.pitch||-Math.PI/2,roll:e.roll||0}}return{destination:o,orientation:a}}function He(e,t){const{destination:i,orientation:n}=Fe(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function Ue(e,t,i){const{destination:n,orientation:o}=Fe(t,e.scene.globe.ellipsoid);e.camera.flyTo({destination:i.destination||n,orientation:i.orientation||o,duration:i.duration,complete:i.complete,cancel:i.cancel})}function We(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;return new n((i=i||o.WGS84).cartesianToCartographic(e),i.cartesianToCartographic(t)).surfaceDistance}function Ge(e,t,i,n){const{HeadingPitchRoll:o,Transforms:a,Matrix4:r,Cartesian3:s,Cartesian4:l,Quaternion:c,Cartographic:u,Ellipsoid:d}=Cesium;n=n||d.WGS84;const p=new o(t,0,0),m=new s(1,1,1),v=a.headingPitchRollToFixedFrame(e,p),h=r.getColumn(v,1,new l),g=new s(h.x,h.y,h.z),f=c.fromAxisAngle(g,i*n.oneOverRadii.x),y=r.fromTranslationQuaternionRotationScale(s.ZERO,f,m),b=r.multiplyByPoint(y,e,new s),C=u.fromCartesian(e,n),w=u.fromCartesian(b,n);return w.height=C.height,u.toCartesian(w,n)}function $e(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:a}=Cesium,r=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!m(r)&&o(r)){const e=r.indices,i=r.attributes.position.values;for(let n=0;n<e.length;n+=3){const o=e[n],r=e[n+1],s=e[n+2];t+=Ze(a.unpack(i,3*o,{}),a.unpack(i,3*r,{}),a.unpack(i,3*s,{}))}}return t}const Ze=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),a=n.subtract(i,t,{}),r=n.cross(o,a,o);return.5*n.magnitude(r)};function Ye(e){const{JulianDate:t}=Cesium;return e instanceof t?e:x(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function qe(e){const{HeadingPitchRange:t,Math:i}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(i.toRadians(e[0])||0,i.toRadians(e[1])||0,e[2]||0):d(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function Xe(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.atan2(r.x,r.y))}function Qe(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:a}=Cesium,r=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,r),i.normalize(r,r),a.toDegrees(Math.asin(r.z))}function Je(e,t,i,n=[]){const{Cartesian3:o,Ray:a,defined:r}=Cesium,s=new a(e,o.normalize(o.subtract(t,e,new o),new o)),l=i.scene.pickFromRay(s,n);if(r(l)&&r(l.position)){return l.position}}function Ke(e){const t=-40467.74;return Math.round(t+80955.31/(1+Math.pow(e/91610.74,7096758e-11)))}const et={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me,deep:!0}}},tt={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me,deep:!0}}},it={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Le}}},nt={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Me}}},ot={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:ke}}},at={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:ke}}},rt={disableDepthTestDistance:[Number,Object,Function]},st={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{DistanceDisplayCondition:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(d(e)&&w(e,"near")&&w(e,"far")){const t=e;return new i(t.near,t.far)}return p(e)?new i(e[0],e[1]):u(e)?new n(e,t):void 0}}}},lt={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Me}}},ct={height:[Number,Object,Function]},ut={heightReference:{type:[Number,Object,Function]}},dt={horizontalOrigin:{type:[Number,Object,Function],default:0}},pt={image:[String,Object,HTMLCanvasElement,Function]},mt={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ze}}},vt={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>p(e)?2===e.length:C(e)?w(e,"x")&&w(e,"y"):!!u(e),watcherOptions:{cesiumObjectBuilder:Te}}},ht={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Re}}},gt={rotation:{type:[Number,Object,Function],default:0}},ft={scale:{type:[Number,Object,Function],default:1}},yt={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Re}}},bt={show:{type:[Boolean,Object,Function],default:!0}},Ct={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},wt={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Re}}},Ot={verticalOrigin:{type:[Number,Object,Function],default:0}},xt={width:[Number,Object,Function]},St={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},_t={fill:{type:[Boolean,Object,Function],default:!0}},Et={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Be}}},Pt={outline:{type:[Boolean,Object,Function],default:!1}},Tt={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:ke}}},Mt={outlineWidth:{type:[Number,Object,Function],default:1}},It={shadows:[Number,Object,Function]},jt={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Ie,exclude:"_callback",deep:!0}}},Lt={extrudedHeight:[Number,Object,Function]},At={extrudedHeightReference:[Number,Object,Function]},Dt={cornerType:{type:[Number,Object,Function],default:0}},Rt={granularity:[Number,Object,Function]},kt={classificationType:{type:[Number,Object,Function]}},Bt={zIndex:[Number,Object,Function]},Nt={length:[Number,Object,Function]},Vt={topRadius:[Number,Object,Function]},zt={bottomRadius:[Number,Object,Function]},Ft={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Ht={slices:{type:[Number,Object,Function],default:128}},Ut={semiMajorAxis:[Number,Object,Function]},Wt={semiMinorAxis:[Number,Object,Function]},Gt={stRotation:{type:[Number,Object,Function],default:0}},$t={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},Zt={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Me}}},Yt={minimumClock:{type:[Number,Object,Function],default:0}},qt={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},Xt={minimumCone:{type:[Number,Object,Function],default:0}},Qt={maximumCone:{type:[Number,Object,Function],default:Math.PI}},Jt={stackPartitions:{type:[Number,Object,Function],default:64}},Kt={slicePartitions:{type:[Number,Object,Function],default:64}},ei={subdivisions:{type:[Number,Object,Function],default:128}},ti={text:[String,Object,Function]},ii={font:{type:[String,Object,Function],default:"30px sans-serif"}},ni={labelStyle:{type:[Number,Object,Function],default:0}},oi={showBackground:{type:[Boolean,Object,Function],default:!1}},ai={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:ke}}},ri={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:Te}}},si={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:ke}}},li={uri:[String,Object,Function]},ci={minimumPixelSize:{type:[Number,Object,Function],default:0}},ui={maximumScale:[Number,Object,Function]},di={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},pi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},mi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},vi={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:ke}}},hi={silhouetteSize:{type:[Number,Object,Function],default:0}},gi={colorBlendMode:{type:[Number,Object,Function],default:0}},fi={colorBlendAmount:{type:[Number,Object,Function],default:.5}},yi={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:Te}}},bi={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:ke}}},Ci={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{TranslationRotationScale:i,CallbackProperty:n}=Cesium;if(e instanceof n||e instanceof i)return e;if(d(e)&&w(e,"translation")){const t=e;return new i(Me(t.translation),Le(t.rotation),Me(t.scale))}return p(e)?new i(Me(e[0]),Le(e[1]),Me(e[2])):u(e)?new n(e,t):e}}}},wi={articulations:[Object,Function]},Oi={clippingPlanes:[Object,Function]},xi={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{Cartesian3:i,Plane:n,PlaneGraphics:o,CallbackProperty:a}=Cesium;if(e instanceof o||e instanceof n||e instanceof a)return e;if(d(e)&&w(e,"normal")){const t=e;return i.normalize(Me(t.normal),t.normal),new n(t.normal,t.distance)}if(p(e)){const t=Me(e[0]);return new n(i.normalize(t,new i),e[1])}return u(e)?new a(e,t):void 0}}}},Si={pixelSize:{type:[Number,Object,Function],default:1}},_i={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:De,deep:!0,exclude:"_callback"}}},Ei={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},Pi={closeTop:{type:[Boolean,Object,Function],default:!0}},Ti={closeBottom:{type:[Boolean,Object,Function],default:!0}},Mi={arcType:{type:[Number,Object,Function],default:1}},Ii={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Be}}},ji={clampToGround:{type:[Boolean,Object,Function],default:!1}},Li={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:je}}},Ai={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ve}}},Di={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},Ri={minimumHeights:[Array,Object,Function]},ki={maximumHeights:[Array,Object,Function]},Bi={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ve}}},Ni={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:ke}}},Vi={url:[String,Object]},zi={token:String},Fi={tileDiscardPolicy:Object},Hi={layers:String},Ui={enablePickFeatures:{type:Boolean,default:!0}},Wi={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ve}}},Gi={tilingScheme:Object},$i={ellipsoid:Object},Zi={credit:{type:[String,Object],default:""}},Yi={tileWidth:{type:Number,default:256}},qi={tileHeight:{type:Number,default:256}},Xi={maximumLevel:Number},Qi={minimumLevel:{type:Number,default:0}},Ji={fileExtension:{type:String,default:"png"}},Ki={accessToken:String},en={format:{type:String,default:"png"}},tn={subdomains:[String,Array]},nn={getFeatureInfoFormats:Array},on={clock:Object},an={times:Object},rn={projectionTransforms:{type:[Boolean,Object],default:!1}},sn={allowPicking:{type:Boolean,default:!0}},ln={asynchronous:{type:Boolean,default:!0}},cn={debugShowShadowVolume:{type:Boolean,default:!1}},un={releaseGeometryInstances:{type:Boolean,default:!0}},dn={interleave:{type:Boolean,default:!1}},pn={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Ne,deep:!0}}},mn={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Ne,deep:!0}}},vn={geometryInstances:[Array,Object]},hn={vertexCacheOptimize:{type:Boolean,default:!1}},gn={compressVertices:{type:Boolean,default:!0}},fn={modelMatrix:Object},yn={debugShowBoundingVolume:{tyep:Boolean,default:!1}},bn={scene:Object},Cn={blendOption:{type:Number,default:2}},wn={id:null},On={loop:{type:Boolean,default:!1}},xn={debugWireframe:{type:Boolean,default:!1}},Sn={vertexFormat:Object},_n={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Me}}},En={radius:Number},Pn={frustum:Object},Tn={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Me}}},Mn={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:De,deep:!0}}},In={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:ke}}},jn={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:ke}}},Ln={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Te}}},An={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Te}}},Dn={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Te}}},Rn={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:je}}},kn={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Ie}}},Bn={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Me}}},Nn={luminanceAtZenith:{type:Number,default:.2}},Vn={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:Ie}}},zn={specularEnvironmentMaps:String},Fn={backFaceCulling:{type:Boolean,default:!0}},Hn={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:function(e){if(p(e)){const t=[];return e.forEach((e=>{t.push(ke(e))})),t}return e}}}},Un={data:{type:[String,Object],required:!0}},Wn={sourceUri:{type:[String,Object]}},Gn={options:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){var t;const i={};return"VcDatasourceGeojson"===(null==(t=this.proxy)?void 0:t.$options.name)?(Object.assign(i,e),i&&i.markerColor&&(i.markerColor=ke(i.markerColor)),i&&i.stroke&&(i.stroke=ke(i.stroke)),i&&i.fill&&(i.fill=ke(i.fill)),i):e},deep:!0}}},$n={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:ke}}},Zn={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:ke}}},Yn={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ze}}},qn={enableMouseEvent:{type:Boolean,default:!0}};var Xn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",accessToken:Ki,alignedAxis:nt,allowPicking:sn,appearance:pn,arcType:Mi,articulations:wi,asynchronous:ln,backFaceCulling:Fn,backgroundColor:ai,backgroundPadding:ri,blendOption:Cn,bottomRadius:zt,center:_n,clampAnimations:mi,clampToGround:ji,classificationType:kt,clearColor:Zn,clippingPlanes:Oi,clock:on,closeBottom:Ti,closeTop:Pi,color:ot,colorBlendAmount:fi,colorBlendMode:gi,colorToAlpha:Ni,colors:Hn,compressVertices:gn,coordinates:Ai,cornerType:Dt,credit:Zi,cutoutRectangle:Bi,data:Un,debugShowBoundingVolume:yn,debugShowShadowVolume:cn,debugWireframe:xn,depthFailAppearance:mn,depthFailColor:at,depthFailMaterial:Ii,dimensions:St,disableDepthTestDistance:rt,distanceDisplayCondition:st,ellipsoid:$i,enableMouseEvent:qn,enablePickFeatures:Ui,endColor:jn,extrudedHeight:Lt,extrudedHeightReference:At,eyeOffset:lt,fileExtension:Ji,fill:_t,fillColor:si,font:ii,format:en,frustum:Pn,geometryInstances:vn,getFeatureInfoFormats:nn,glowColor:$n,granularity:Rt,height:ct,heightReference:ut,hierarchy:_i,horizontalOrigin:dt,id:wn,image:pt,imageBasedLightingFactor:yi,imageSize:Dn,imageSubRegion:mt,incrementallyLoadTextures:di,innerRadii:Zt,interleave:dn,labelStyle:ni,layers:Hi,length:Nt,lightColor:bi,lightColor2:Bn,loop:On,luminanceAtZenith:Nn,material:Et,maximumClock:qt,maximumCone:Qt,maximumHeights:ki,maximumImageSize:An,maximumLevel:Xi,maximumScale:ui,maximumScreenSpaceError:Di,minimumClock:Yt,minimumCone:Xt,minimumHeights:Ri,minimumImageSize:Ln,minimumLevel:Qi,minimumPixelSize:ci,modelMatrix:fn,nodeTransformations:Ci,numberOfVerticalLines:Ft,options:Gn,orientation:it,origin:Tn,outline:Pt,outlineColor:Tt,outlineWidth:Mt,perPositionHeight:Ei,pixelOffset:vt,pixelOffsetScaleByDistance:ht,pixelSize:Si,plane:xi,polygonHierarchy:Mn,polylinePositions:kn,position:et,positions:jt,projectionTransforms:rn,radii:$t,radius:En,rectangle:Wi,releaseGeometryInstances:un,rotation:gt,runAnimations:pi,scale:ft,scaleByDistance:yt,scene:bn,scissorRectangle:Yn,semiMajorAxis:Ut,semiMinorAxis:Wt,shadows:It,shape:Li,shapePositions:Rn,show:bt,showBackground:oi,silhouetteColor:vi,silhouetteSize:hi,sizeInMeters:Ct,slicePartitions:Kt,slices:Ht,sourceUri:Wn,specularEnvironmentMaps:zn,sphericalHarmonicCoefficients:Vn,stRotation:Gt,stackPartitions:Jt,startColor:In,subdivisions:ei,subdomains:tn,text:ti,tileDiscardPolicy:Fi,tileHeight:qi,tileWidth:Yi,tilingScheme:Gi,times:an,token:zi,topRadius:Vt,translucencyByDistance:wt,uri:li,url:Vi,vertexCacheOptimize:hn,vertexFormat:Sn,verticalOrigin:Ot,viewFrom:tt,width:xt,zIndex:Bt}),Qn={name:"zh-hans",nativeName:"中文(简体)",vc:{loadError:"加载失败，必须作为 VcViewer 的子组件加载。",navigation:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环。\n重置视图：双击罗盘外环。",innerTip:"翻转视图：由内环向外环拖拽罗盘。\n 或者按住 Ctrl 键的同时拖拽地图。",title:"按住鼠标拖拽旋转相机。"},zoomCotrol:{zoomInTip:"放大",zoomResetTip:"重置视图",zoomOutTip:"缩小"},print:{printTip:"场景截图/打印",printViewTitle:"打印预览",credit:"地图版权",screenshot:"场景截图"},myLocation:{myLocationTip:"定位您的位置",positioning:"定位中...",fail:"定位失败",centreMap:"我的位置",lat:"纬度",lng:"经度",address:"地址"},statusBar:{lat:"纬度",lng:"经度",zone:"带号",e:"X",n:"Y",elev:"高程",level:"层级",heading:"方位",pitch:"俯仰",roll:"侧翻",cameraHeight:"视高",tip:"点击切换鼠标显示坐标为 UTM 投影坐标"}},navigationSm:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环；重置视图：双击罗盘外环。"},zoomCotrol:{zoomInTip:"放大",zoomBarTip:"按住滑块向上放大，向下缩小。",zoomOutTip:"缩小"}},measurement:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},distance:{tip:"距离量算",drawingTipStart:"单击左键绘制距离量算起点。",drawingTipEnd:"单击左键绘制距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},"component-distance":{tip:"三角量算",drawingTipStart:"单击左键绘制三角量算起点。",drawingTipEnd:"单击左键绘制三角量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"折线距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},horizontal:{tip:"水平距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},vertical:{tip:"垂直距离量算",drawingTipStart:"单击左键绘制垂直距离量算起点。",drawingTipEnd:"单击左键绘制垂直距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},height:{tip:"地表高度量算",drawingTipStart:"单击左键绘制高度量算点。",drawingTipEnd:"单击左键绘制高度量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},area:{tip:"面积量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"点击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"坐标量算",drawingTipStart:"点击左键绘制坐标量算点。",drawingTipEnd:"点击左键绘制坐标量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。",lng:"经度：",lat:"纬度：",height:"高度：",slope:"坡度："},rectangle:{tip:"矩形量算",drawingTipStart:"单击左键绘制矩形量算起点。",drawingTipEnd:"单击左键绘制矩形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"正多边形量算",drawingTipStart:"单击左键绘制正多边形量算起点。",drawingTipEnd:"单击左键绘制正多边形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"圆形量算",drawingTipStart:"单击左键绘制圆形量算起点。",drawingTipEnd:"单击左键绘制圆形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除量算结果"}},drawing:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},pin:{tip:"绘制图标点",drawingTipStart:"点击左键绘制图标点。",drawingTipEnd:"点击左键绘制图标点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"绘制点",drawingTipStart:"点击左键绘制点。",drawingTipEnd:"点击左键绘制点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"绘制线",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polygon:{tip:"绘制面",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},rectangle:{tip:"绘制矩形",drawingTipStart:"单击左键绘制矩形起点。",drawingTipEnd:"单击左键绘制矩形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"绘制圆",drawingTipStart:"单击左键绘制圆形起点。",drawingTipEnd:"单击左键绘制圆形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"绘制正多边形",drawingTipStart:"单击左键绘制正多边形起点。",drawingTipEnd:"单击左键绘制正多边形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除绘制结果"}},analysis:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},sightline:{tip:"通视分析",drawingTipStart:"单击左键绘制观测点。",drawingTipEnd:"单击左键绘制目标点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},viewshed:{tip:"可视域分析",drawingTipStart:"单击左键绘制可视域分析起点。",drawingTipEnd:"单击左键绘制可视域分析终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除分析结果"}},overview:{show:"显示鹰眼",hidden:"隐藏鹰眼"}}};const Jn=e=>(t,i)=>Kn(t,i,y(e)),Kn=(e,t,i)=>P(i,e,e).replace(/\{(\w+)\}/g,((e,i)=>{var n;return`${null!=(n=null==t?void 0:t[i])?n:`{${i}}`}`})),eo=()=>{const e=ye("locale");return(e=>({lang:f((()=>y(e).name)),locale:T(e)?e:h(e),t:Jn(e)}))(f((()=>e.value||Qn)))};function to(e,t,i){const n=(e,i,n=!0)=>{const o=i||t.cesiumEvents||[];o&&o.forEach((i=>{if(e[i]){const o=_e(t,i),a=n?"addEventListener":"removeEventListener";o&&e[i][a](o)}}))};function o(t){if(!e.enableMouseEvent||!t)return;const i=this.viewer,{eventName:n}=this,o=t.position||t.endPosition;if(!o)return;const a=[];let r,s;-1!==n.indexOf("LEFT_DOUBLE_CLICK")?r="dblclick":-1!==n.indexOf("CLICK")?r="click":-1!==n.indexOf("DOWN")?r="mousedown":-1!==n.indexOf("UP")?r="mouseup":-1!==n.indexOf("MOUSE_MOVE")&&(r="mousemove"),"mousemove"===r?s="mouseout":"click"===r&&(s="clickout");const l=i.scene.pick(o);if(Cesium.defined(l)?(this.pickedFeature&&this.pickedFeature.id!==l.id&&a.push({callbackName:s,pickedFeature:this.pickedFeature}),"mousemove"!==r||this.pickedFeature&&this.pickedFeature.id===l.id||a.push({callbackName:"mouseover",pickedFeature:l}),a.push({callbackName:r,pickedFeature:l})):(this.pickedFeature&&a.push({callbackName:s,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),0===a.length)return;let c;const u=i.scene;if(u.mode===Cesium.SceneMode.SCENE3D){const e=u.camera.getPickRay(o);c=u.globe.pick(e,u)}else c=u.camera.pickEllipsoid(o,u.globe.ellipsoid);let d=-1;-1!==n.indexOf("LEFT")?d=0:-1!==n.indexOf("MIDDLE")?d=1:-1!==n.indexOf("RIGHT")&&(d=2);const m=[];a.forEach((e=>{const t=e.callbackName,i=e.pickedFeature;i.id&&(p(i.id)&&i.id[0]instanceof Cesium.Entity?m.push({callbackName:t,cesiumObject:i.id[0].entityCollection.owner,pickedFeature:i}):i.id instanceof Cesium.Entity&&(m.push({callbackName:t,cesiumObject:i.id,pickedFeature:i}),m.push({callbackName:t,cesiumObject:i.id.entityCollection.owner,pickedFeature:i})));const n=e=>{m.push({callbackName:t,cesiumObject:e,pickedFeature:i}),e._vcParent&&n(e._vcParent)};i.primitive&&(i.primitive._vcParent&&n(i.primitive._vcParent),m.push({callbackName:t,cesiumObject:i.primitive,pickedFeature:i})),i.collection&&(i.collection._vcParent&&n(i.collection._vcParent),m.push({callbackName:t,cesiumObject:i.collection,pickedFeature:i}))})),m.forEach((e=>{if(e.callbackName){const t=e.cesiumObject[e.callbackName]||e.cesiumObject[`on${_(e.callbackName)}`]||e.cesiumObject[pe(`on${_(e.callbackName)}`)];if(Cesium.defined(t)){const i={type:`on${e.callbackName}`,windowPosition:o,surfacePosition:c,pickedFeature:e.pickedFeature,button:d,cesiumObject:e.cesiumObject};t instanceof Cesium.CallbackProperty?t._callback(i):t(i)}}})),this.pickedFeature=l}return{bindEvents:n,registerEvents:i=>{var a;const{viewer:r,cesiumObject:s}=t;if(void 0===s)return;const{ScreenSpaceEventHandler:l,ScreenSpaceEventType:c}=Cesium;r._vcPickScreenSpaceEventHandler&&r._vcViewerScreenSpaceEventHandler||(r._vcPickScreenSpaceEventHandler=new l(r.canvas),r._vcViewerScreenSpaceEventHandler=new l(r.canvas),io.forEach((e=>{const i=_e(t,e);i&&r._vcViewerScreenSpaceEventHandler.setInputAction(i,c[e]),r._vcPickScreenSpaceEventHandler.setInputAction(o.bind({eventName:e,viewer:r}),c[e])}))),n(s,t.cesiumEvents||[],i),null==(a=t.cesiumMembersEvents)||a.forEach((e=>{const t=p(e.name)&&e.name.length>0&&s[e.name[0]]?s[e.name[0]][e.name[1]]:s[e.name];t&&n(t,e.events,i)})),e.enableMouseEvent&&no.forEach((e=>{const n=_e(t,e);i?n&&(s[e]=n):n&&delete s[e]}))}}}const io=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],no=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"],oo=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function ao(e,{emit:t},i){const n=Ce(i);i.alreadyListening=[],i.removeCallbacks=[];let o=[];i.mounted=!1;const a=I();i.vcMitt=a;const r=b(se),{t:s}=eo();if(void 0===r)return;const l=Pe(i),c=to(e,i);i.children=[];const d=["billboard","box","corridor","cylinder","ellipse","ellipsoid","label","model","tileset","path","plane","point","polygon","polyline","polylineVolume","rectangle","wall"],p=async()=>{var e;if(i.mounted)return!1;n.debug(`${i.cesiumClass}---loading`),await(async()=>{if(t("beforeLoad",i),l.nowaiting)return!0;await l.proxy.creatingPromise})();const{Cesium:o,viewer:s}=r;return i.viewer=s,i.Cesium=o,l.cesiumObject||l.nowaiting?(C(!0),f().then((async e=>(i.cesiumObject=e,h().then((()=>{i.mounted=!0,l.children.push(i),Object.assign(i.proxy,{cesiumObject:i.cesiumObject});const r={Cesium:o,viewer:s,cesiumObject:e,vm:i.proxy};return t("ready",r),a.emit("ready",r),n.debug(`${i.cesiumClass}---loaded`),r})))))):await(null==(e=l.proxy)?void 0:e.load())},m=async()=>{await(async()=>{await i.unloadingPromise})();for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}return i.children.length=0,!!i.mounted&&g().then((async()=>(C(!1),i.cesiumObject=void 0,i.mounted=!1,i.removeCallbacks.forEach((e=>{e()})),t("destroyed",i),n.debug(`${i.cesiumClass}---unmounted`),!(i.renderByParent&&!i.unloadingPromise)||l.proxy.unload())))},v=async()=>m().then((()=>p())),h=async()=>{var e;return c.registerEvents(!0),(null==(e=i.mount)?void 0:e.call(i))||!0},g=async()=>{var e;return c.registerEvents(!1),(null==(e=i.unmount)?void 0:e.call(i))||!0},f=async()=>{if(n.debug("do createCesiumObject"),u(i.createCesiumObject))return i.createCesiumObject();{const t=w(e);return new Cesium[i.cesiumClass](t)}},y=(e,t)=>{let n=null==t?void 0:t.deep;const{SampledPositionProperty:o,Appearance:a,DebugAppearance:r,MaterialAppearance:s,PolylineColorAppearance:l,EllipsoidSurfaceAppearance:c,PerInstanceColorAppearance:u,PolylineMaterialAppearance:d}=Cesium;if("position"===e)n=!(i.proxy[e]instanceof o);else if("appearance"===e||"depthFailAppearance"===e){const t=i.proxy[e];n=!(t instanceof a||t instanceof r||t instanceof s||t instanceof l||t instanceof c||t instanceof u||t instanceof d||-1!==me(t).indexOf("Appearance"))}return n},C=t=>{if(t){if(!i.cesiumClass||!Cesium[i.cesiumClass])return;e&&Object.keys(e).forEach((e=>{var t,n,a,r,s;let l=e;if("labelStyle"===e||"wmtsStyle"===e?l="style":"bmKey"===e&&(l="key"),(null==(n=null==(t=i.proxy)?void 0:t.$options.watch)?void 0:n[e])||-1!==i.alreadyListening.indexOf(e))return;const c=null==(r=null==(a=i.proxy)?void 0:a.$options.props[e])?void 0:r.watcherOptions,u=null==(s=i.proxy)?void 0:s.$watch(e,(async(e,t)=>{await i.proxy.creatingPromise;const{cesiumObject:n}=i,o=n&&Object.getOwnPropertyDescriptor(n,l),a=n&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(n),l);if(o&&(o.writable||o.set)||a&&(a.writable||a.set)){if(c&&c.cesiumObjectBuilder){const t=c.cesiumObjectBuilder.call(i,e,i.viewer.scene.globe.ellipsoid);Cesium.defined(n[l])&&Cesium.defined(n[l]._callback)||(n[l]=t)}else n[l]=O(l,e);return!0}j(e,t)||i.proxy.reload()}),{deep:y(e,c)});o.push(u)}))}else o.forEach((e=>e())),o=[]},w=(e,t)=>{let n={};return e&&Object.keys(e).forEach((o=>{let a=o;"labelStyle"===o||"wmtsStyle"===o?a="style":"bmKey"===o&&(a="key");const r=me(e[o]);r&&-1===r.indexOf("Graphics")&&-1!==d.indexOf(a)&&("Entity"===i.cesiumClass||i.cesiumClass.indexOf("DataSource")>0)?n[a]=w(e[o],t):n[a]=O(o,e[o],t)})),n=ue(n),n},O=(e,t,n)=>{var o,a;const r=me(t);if(r&&-1===r.indexOf("Graphics")&&-1!==d.indexOf(e)&&("Entity"===i.cesiumClass||i.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===i.cesiumClass))return w(t,n);{const r=null==(o=i.proxy)?void 0:o.$options.name;let s=!1;u(t)&&r&&oo.forEach((e=>{-1!==r.indexOf(e)&&(s=!0)}));const l=(null==(a=i.proxy)?void 0:a.$options.props[e])||(null==n?void 0:n[e])||Xn[e]&&Xn[e][e];return(null==l?void 0:l.watcherOptions)&&!de(t)?l.watcherOptions.cesiumObjectBuilder.call(i,t,i.viewer.scene.globe.ellipsoid):s?new Cesium.CallbackProperty(t,!1):t}},x=new Promise(((e,t)=>{try{let t=!1;r.viewer&&(t=!0,p().then((i=>{e(i),t=!1}))),l.vcMitt.on("ready",(()=>{t||i.isUnmounted||e(p())}))}catch(n){t(n)}}));return n.debug(`${i.cesiumClass}---onCreated`),M((()=>{n.debug(`${i.cesiumClass}---onUnmounted`),i.unloadingPromise=new Promise(((e,t)=>{m().then((()=>{n.debug(`${i.cesiumClass}---unloaded`),e(!0),i.unloadingPromise=void 0,a.all.clear()}))})),i.alreadyListening=[]})),Object.assign(i.proxy,{creatingPromise:x,load:p,unload:m,reload:v,getCreatingPromise:()=>x,getCesiumObject:()=>i.cesiumObject}),{$services:r,load:p,unload:m,reload:v,creatingPromise:x,transformProp:O,transformProps:w,unwatchFns:o,setPropsWatcher:C,logger:n,getServices:()=>xe({},r||{})}}function ro(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],"KmlDataSource"===i.cesiumClass&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=ao(e,t,i);if(void 0===n)return;i.alreadyListening.push("entities");let o=[];o.push(L((()=>D(e.entities)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o.entities.getById(e.oldOptions.id);if(e.oldOptions.id===e.newOptions.id)t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}));else{o.entities.remove(t);const i=e.newOptions;a(o,[i])}}))}else{const i=A(e,t,"id"),n=A(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o.entities.getById(n[e].id);r.push(t)}r.forEach((e=>{o.entities.remove(e)})),a(o,i)}}),{deep:!0}));const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i],a=n.transformProps(o),r=e.entities.add(a);o.id!==r.id&&(o.id=r.id),ge(r,a)}};i.mount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return o.show=e.show,a(o,e.entities),t.add(o).then((()=>!0))},i.unmount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return t&&t.remove(o,e.destroy)};const r=()=>xe(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var e;return null==(e=i.cesiumObject)?void 0:e.entities}});return M((()=>{o.forEach((e=>e())),o=[]})),g(se,r()),i.appContext.config.globalProperties.$VueCesium=r(),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function so(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=ao(e,t,i);if(void 0!==n)return i.mount=async()=>{var e;const t=i.cesiumObject,n=Pe(i).proxy;return null==(e=n.__updateGeometry)?void 0:e.call(n,t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function lo(e,t,i){i.cesiumEvents=["definitionChanged"];void 0!==ao(e,t,i)&&(i.mount=async()=>{var e,t;const n=i.cesiumObject;if(void 0===n)return!1;const o=pe((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),a=3===o.length?`update:${o[2]}`:"update:polylineVolume",r=Pe(i).proxy;return r&&(null==(t=r.__updateGraphics)?void 0:t.call(r,n,a))},i.unmount=async()=>{var e,t;const n=pe((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),o=3===n.length?`update:${n[2]}`:"update:polylineVolume",a=Pe(i).proxy;return a&&(null==(t=a.__updateGraphics)?void 0:t.call(a,void 0,o))})}const co=e=>R(e);function uo(e,t){const i=e.style;Object.keys(t).forEach((e=>{i[e]=t[e]}))}const po={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(po,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(Rh){}function mo(){}function vo(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function ho(e){e.stopPropagation()}function go(e){!1!==e.cancelable&&e.preventDefault()}function fo(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function yo(e,t,i){const n=`__vc_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],po[t[3]])}))}function bo(e,t){const i=`__vc_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],po[t[3]])})),e[i]=void 0)}function Co(e,t){return!0!==function(e){return e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}(e)&&[].concat(t).includes(e.keyCode)}function wo(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function Oo(e,t,i,n){!0===i.modifiers.stop&&ho(e);const o=i.modifiers.color;let a=i.modifiers.center;a=!0===a||!0===n;const r=document.createElement("span"),s=document.createElement("span"),l=vo(e),{left:c,top:u,width:d,height:p}=t.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),v=m/2,h=(d-m)/2+"px",g=a?h:l.left-c-v+"px",f=(p-m)/2+"px",y=a?f:l.top-u-v+"px";s.className="vc-ripple__inner",uo(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${y},0) scale3d(.2,.2,1)`,opacity:0}),r.className="vc-ripple"+(o?" text-"+o:""),r.setAttribute("dir","ltr"),r.appendChild(s),t.appendChild(r);const b=()=>{r.remove(),clearTimeout(C)};i.abort.push(b);let C=setTimeout((()=>{s.classList.add("vc-ripple__inner--enter"),s.style.transform=`translate3d(${h},${f},0) scale3d(1,1,1)`,s.style.opacity="0.2",C=setTimeout((()=>{s.classList.remove("vc-ripple__inner--enter"),s.classList.add("vc-ripple__inner--leave"),s.style.opacity="0",C=setTimeout((()=>{r.remove(),i.abort.splice(i.abort.indexOf(b),1)}),275)}),250)}),50)}function xo(e,{modifiers:t,value:i,arg:n,instance:o}){const a=Object.assign({},t,i);e.modifiers={early:!0===a.early,stop:!0===a.stop,center:!0===a.center,color:a.color||n,keyCodes:[].concat(a.keyCodes||13)}}var So=co({name:"ripple",beforeMount(e,t){const i={enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===i.enabled&&!0!==t.qSkipRipple&&(!0===i.modifiers.early?!0===["mousedown","touchstart"].includes(t.type):"click"===t.type)&&Oo(t,e,i,!0===t.qKeyEvent)},keystart:wo((t=>{!0===i.enabled&&!0!==t.qSkipRipple&&!0===Co(t,i.modifiers.keyCodes)&&t.type==="key"+(!0===i.modifiers.early?"down":"up")&&Oo(t,e,i,!0)}),300)};xo(i,t),e.__vcripple=i,yo(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&xo(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach((e=>{e()})),bo(t,"main"),delete e._vcripple}});function _o(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),a=/(?:Chrome|CriOS)/.test(e),r=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!r;return{isTablet:r,isPhone:s,isAndroid:n,isPc:!s&&!n&&!i,isChrome:a,isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function Eo(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==(null==e?void 0:e.empty)?e.empty():void 0!==(null==e?void 0:e.removeAllRanges)&&(e.removeAllRanges(),!0!==_o().isPhone&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var Po=co({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==_o().hasTouch)return;const n={handler:t.value,noop:mo,mouseStart(e){"function"==typeof n.handler&&!0==(0===e.button)&&(yo(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){var i;if(void 0!==e.target&&"function"==typeof n.handler){const o=e.target;yo(n,"temp",[[o,"touchmove","move","passiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(e),null==(i=null==t?void 0:t.touchStart)||i.call(t,e)}},start(e,t){n.origin=vo(e);const i=Date.now();!0===_o().isPhone&&(document.body.classList.add("non-selectable"),Eo(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(Eo(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{Eo(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=vo(e);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(e){var i;bo(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==e&&fo(e):clearTimeout(n.timer),null==(i=null==t?void 0:t.touchEnd)||i.call(t,e)}},o=[600,5,7];"string"==typeof t.arg&&t.arg.length>0&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,!0===i.mouse&&yo(n,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture?"Capture":"")]]),!0===_o().hasTouch&&yo(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;void 0!==t&&(bo(t,"main"),bo(t,"temp"),clearTimeout(t.timer),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchhold)}});function To(){let e,t;const i=new Promise((function(i,n){e=i,t=n}));return{resolve:e,reject:t,promise:i}}function Mo(e,t,i){const n=ao(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=n.$services.primitives;return i&&i.add(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.contains(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function Io(e,t,i){const n=ao(e,t,i);if(void 0===n)return;i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject,o=e&&e.add(t);return Cesium.defined(o)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};const o=()=>xe(n.getServices(),{get primitives(){return i.cesiumObject}});return g(se,o()),i.appContext.config.globalProperties.$VueCesium=o(),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function jo(e,t,i){const n=ao(e,t,i);if(void 0===n)return;const{emit:o}=t,a=h(0),r=h([]);i.createCesiumObject=async()=>{var t,o;const s=n.transformProps(e);return s.asynchronous||await(null==(o=(t=Cesium[i.cesiumClass]).initializeTerrainHeights)?void 0:o.call(t)),e.geometryInstances&&(p(e.geometryInstances)?(r.value.push(...e.geometryInstances),a.value+=e.geometryInstances.length):(a.value+=1,r.value.push(e.geometryInstances))),new Cesium[i.cesiumClass](s)},i.mount=async()=>{const e=i.cesiumClass.includes("Ground")?n.$services.groundPrimitives:n.$services.primitives,t=i.cesiumObject;t.readyPromise&&t.readyPromise.then((e=>{_e(i,"readyPromise")&&o("readyPromise",e,n.$services.viewer,i.proxy)})),t._vcParent=e;const a=e&&e.add(t);if("ParticleSystem"===i.cesiumClass){const e=setInterval((()=>{Cesium.defined(a._billboardCollection)&&(a._billboardCollection._vcParent=a,clearInterval(e))}),500)}return Cesium.defined(a)},i.unmount=async()=>{a.value=0,r.value=[];const e=i.cesiumClass.includes("Ground")?n.$services.groundPrimitives:n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};const s=()=>xe(n.getServices(),{get primitive(){return i.cesiumObject}});return g(se,s()),i.appContext.config.globalProperties.$VueCesium=s(),Object.assign(i.proxy,{__updateGeometryInstances:(e,n)=>{if(r.value.push(e),n===a.value-1){if(_e(i,"update:geometryInstances"))t.emit("update:geometryInstances",r.value);else{i.cesiumObject.geometryInstances=0===n?e:r.value}}return!0},__removeGeometryInstances:e=>{const t=r.value.indexOf(e);return r.value.splice(t,1),!0},__childCount:a}),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}const Lo=52.35987755982988,Ao=3.141592653589793,Do=6378245,Ro=.006693421622965943,ko=function(e,t){const i=(e=+e)-.0065,n=(t=+t)-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*Lo),a=Math.atan2(n,i)-3e-6*Math.cos(i*Lo);return[o*Math.cos(a),o*Math.sin(a)]},Bo=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*Lo),n=Math.atan2(t,e)+3e-6*Math.cos(e*Lo);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},No=function(e,t){if(Ho(e=+e,t=+t))return[e,t];{let i=zo(e-105,t-35),n=Fo(e-105,t-35);const o=t/180*Ao;let a=Math.sin(o);a=1-Ro*a*a;const r=Math.sqrt(a);i=180*i/(Do*(1-Ro)/(a*r)*Ao),n=180*n/(Do/r*Math.cos(o)*Ao);return[e+n,t+i]}},Vo=function(e,t){if(Ho(e=+e,t=+t))return[e,t];{let i=zo(e-105,t-35),n=Fo(e-105,t-35);const o=t/180*Ao;let a=Math.sin(o);a=1-Ro*a*a;const r=Math.sqrt(a);i=180*i/(Do*(1-Ro)/(a*r)*Ao),n=180*n/(Do/r*Math.cos(o)*Ao);return[2*e-(e+n),2*t-(t+i)]}};var zo=function(e,t){let i=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Ao)+20*Math.sin(2*e*Ao))/3,i+=2*(20*Math.sin(t*Ao)+40*Math.sin(t/3*Ao))/3,i+=2*(160*Math.sin(t/12*Ao)+320*Math.sin(t*Ao/30))/3,i},Fo=function(e,t){let i=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*Ao)+20*Math.sin(2*e*Ao))/3,i+=2*(20*Math.sin(e*Ao)+40*Math.sin(e/3*Ao))/3,i+=2*(150*Math.sin(e/12*Ao)+300*Math.sin(e/30*Ao))/3,i},Ho=function(e,t){t=+t;return!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)},Uo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",bd09togcj02:ko,gcj02tobd09:Bo,gcj02towgs84:Vo,wgs84togcj02:No});function Wo(e,t,i){i.cesiumEvents=["errorEvent"];const n=ao(e,t,i);if(void 0===n)return;const{emit:o}=t;return i.mount=async()=>{var t,a,r,s;const{viewer:l}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){i.renderByParent=!0;const n=i.cesiumObject;if(null==(t=null==n?void 0:n.readyPromise)||t.then((()=>{_e(i,"readyPromise")&&o("readyPromise",n,l,i.proxy)})),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to){if(!("VcImageryProviderBaidu"===(null==(a=i.proxy)?void 0:a.$options.name)||"VcImageryProviderTianditu"===(null==(r=i.proxy)?void 0:r.$options.name)&&"4490"===n._epsgCode)){const{WebMercatorTilingScheme:t,Cartographic:i,Math:o}=Cesium,a=new t,r=a.projection,s=r.project,l=r.unproject;let c,u;"WGS84"===e.projectionTransforms.to.toUpperCase()?(c="wgs84togcj02",u="gcj02towgs84"):"GCJ02"===e.projectionTransforms.to.toUpperCase()&&(c="gcj02towgs84",u="wgs84togcj02"),c&&u&&(r.project=function(e,t){return t=t||new Cesium.Cartesian3,t=Uo[c](o.toDegrees(e.longitude),o.toDegrees(e.latitude)),s.call(this,new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1])))},r.unproject=function(e,t){t=t||new i;const n=l.call(this,e);return t=Uo[u](o.toDegrees(n.longitude),o.toDegrees(n.latitude)),new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1]))},n._tilingScheme=a)}}const c=Pe(i).proxy;return c&&(null==(s=c.__updateProvider)?void 0:s.call(c,n))}{const e=i.cesiumObject;return e.readyPromise.then((()=>{_e(i,"readyPromise")&&o("readyPromise",e,l,i.proxy)})),l.terrainProvider=e,!0}},i.unmount=async()=>{var e;const{viewer:t}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){const t=Pe(i).proxy;return t&&(null==(e=t.__updateProvider)?void 0:e.call(t,void 0))}{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{_e(i,"readyPromise")&&o("readyPromise",e,t,i.proxy)})),t.terrainProvider=e,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Go(){const e=O(),t=Ce(void 0);if(e)return b(se)||e.appContext.config.globalProperties.$VueCesium;t.warn("VueCesium useVueCesium() can only be used inside setup().")}var $o={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"}};class Zo{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(e){const{PrimitiveCollection:t,Cesium3DTileset:i,Model:n}=Cesium,o=e.length;for(let a=0;a<o;a++){const o=e.get(a);o instanceof t?this.hidePrimitiveCollection(o):(this.states.push(o.show),o instanceof i||o instanceof n||(o.show=!1))}}restorePrimitiveCollection(e){const{PrimitiveCollection:t}=Cesium,i=e.length;for(let n=0;n<i;n++){const i=e.get(n);i instanceof t?this.restorePrimitiveCollection(i):i.show=this.states.get(this.count++)}}hide(e){this.states.length=0,this.hidePrimitiveCollection(e.primitives),this.hidePrimitiveCollection(e.groundPrimitives)}restore(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)}}var Yo=0,qo=1,Xo=2;const Qo=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),Jo=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Ko=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),ea=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),ta=class{constructor(e){e=ve(e,{}),this.distanceUnits=ve(e.distanceUnits,Qo.METERS),this.areaUnits=ve(e.areaUnits,Jo.SQUARE_METERS),this.volumeUnits=ve(e.volumeUnits,Ko.CUBIC_METERS),this.angleUnits=ve(e.angleUnits,ea.DEGREES),this.slopeUnits=ve(e.slopeUnits,ea.DEGREES)}static distanceToString(e,t,i,n){return sa(e=ta.convertDistance(e,Qo.METERS,t),i,n)+ta.getDistanceUnitSpacing(t)+ta.getDistanceUnitSymbol(t)}static areaToString(e,t,i,n){return sa(e=ta.convertArea(e,Jo.SQUARE_METERS,t),i,n)+ta.getAreaUnitSpacing(t)+ta.getAreaUnitSymbol(t)}static angleToString(e,t,i,n){const{Math:o}=Cesium;if(t===ea.DEGREES||t===ea.RADIANS||t===ea.GRADE)return sa(e=ra(e,t),i,n)+ta.getAngleUnitSpacing(t)+ta.getAngleUnitSymbol(t);if(t===ea.DEGREES_MINUTES_SECONDS){const t=o.toDegrees(e),i=t<0?"-":"",a=Math.floor(t),r=60*(t-a),s=Math.floor(r);return i+a+"° "+s+"' "+sa(60*(r-s),void 0,n)+'"'}ea.RATIO}static volumeToString(e,t,i,n){return sa(e=ta.convertArea(e,Ko.CUBIC_METERS,t),i,n)+ta.getVolumeUnitSpacing(t)+ta.getVolumeUnitSymbol(t)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===ea.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case Qo.METERS:return"m";case Qo.CENTIMETERS:return"cm";case Qo.KILOMETERS:return"km";case Qo.FEET:case Qo.US_SURVEY_FEET:return"ft";case Qo.INCHES:return"in";case Qo.YARDS:return"yd";case Qo.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case Jo.SQUARE_METERS:return"m²";case Jo.SQUARE_CENTIMETERS:return"cm²";case Jo.SQUARE_KILOMETERS:return"km²";case Jo.SQUARE_FEET:return"sq ft";case Jo.SQUARE_INCHES:return"sq in";case Jo.SQUARE_YARDS:return"sq yd";case Jo.SQUARE_MILES:return"sq mi";case Jo.ACRES:return"ac";case Jo.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case Ko.CUBIC_METERS:return"m³";case Ko.CUBIC_CENTIMETERS:return"cm³";case Ko.CUBIC_KILOMETERS:return"km³";case Ko.CUBIC_FEET:return"cu ft";case Ko.CUBIC_INCHES:return"cu in";case Ko.CUBIC_YARDS:return"cu yd";case Ko.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===ea.DEGREES?"°":e===ea.RADIANS?"rad":e===ea.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*na(t)*(1/na(i))}static convertArea(e,t,i){return t===i?e:e*oa(t)*(1/oa(i))}static convertVolume(e,t,i){return t===i?e:e*aa(t)*(1/aa(i))}static convertAngle(e,t,i){return t===i?e:ra(function(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===ea.RADIANS)return e;if(t===ea.DEGREES)return n.toRadians(e);if(t===ea.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===ea.RATIO)return Math.atan(e);if(t===ea.DEGREES_MINUTES_SECONDS){const t=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(t))throw new o("Could not convert angle to radians: "+e);let a=0<t[1].length?-1:1;const r=parseInt(t[2]),s=parseInt(t[3]),l=parseFloat(t[4]);let c=t[5];1===c.length&&("W"!==(c=c.toUpperCase())&&"S"!==c||(a*=-1));const u=a*(r+s/60+l/3600);return n.toRadians(u)}}(e,t),i)}static longitudeToString(e,t,i,n){return ta.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"W":"E")}static latitudeToString(e,t,i,n){return ta.angleToString(Math.abs(e),t,i,n)+" "+(e<0?"S":"N")}};let ia=ta;function na(e){switch(e){case Qo.METERS:return 1;case Qo.CENTIMETERS:return.01;case Qo.KILOMETERS:return 1e3;case Qo.FEET:return.3048;case Qo.US_SURVEY_FEET:return 1200/3937;case Qo.INCHES:return.254;case Qo.YARDS:return.9144;case Qo.MILES:return 1609.344;default:return 1}}function oa(e){switch(e){case Jo.SQUARE_METERS:return 1;case Jo.SQUARE_CENTIMETERS:return 1e-4;case Jo.SQUARE_KILOMETERS:return 1e6;case Jo.SQUARE_FEET:return.09290304;case Jo.SQUARE_INCHES:return 64516e-8;case Jo.SQUARE_YARDS:return.83612736;case Jo.SQUARE_MILES:return 2589988.110336;case Jo.ACRES:return 4046.85642232;case Jo.HECTARES:return 1e4;default:return 1}}function aa(e){switch(e){case Ko.CUBIC_METERS:return 1;case Ko.CUBIC_CENTIMETERS:return 1e-6;case Ko.CUBIC_KILOMETERS:return 1e9;case Ko.CUBIC_FEET:return.09290304*.3048;case Ko.CUBIC_INCHES:return 16387064e-12;case Ko.CUBIC_YARDS:return.764554857984;case Ko.CUBIC_MILES:return 4168181825.44058;default:return 1}}function ra(e,t){const{Math:i}=Cesium;return t===ea.RADIANS?e:t===ea.DEGREES?i.toDegrees(e):t===ea.GRADE?i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e):t===ea.RATIO?Math.sin(e)/Math.cos(e):void 0}function sa(e,t,i){const n=function(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};"number"==typeof(e=Cesium.defaultValue(e,2))?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n="function"==typeof e?e(t,i):e;return n}(i,e,t),o=e.toLocaleString(t,n);return o===(-0).toLocaleString(t,n)?(0).toLocaleString(t,n):o}ia.numberToString=function(e,t,i){return sa(e,t,i)};class la{constructor(e){const{defined:t,defaultValue:i,Color:n,createGuid:o,BoundingSphere:a,Ellipsoid:r,ClassificationType:s}=Cesium;e=i(e,{}),this.show=i(e.show,!0),this._id=t(e.id)?e.id:o(),this._ellipsoid=i(e.ellipsoid,r.WGS84),this._appearance=i(e.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=e.depthFailAppearance,this._positions=i(e.positions,[]),this._polygonHierarchy=e.polygonHierarchy,this._clampToGround=i(e.clampToGround,!1),this._classificationType=i(e.classificationType,s.BOTH),this._allowPicking=i(e.allowPicking,!0),this._asynchronous=i(e.asynchronous,!1),this._boundingSphere=new a,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(e){this._positions=e,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(e){this._polygonHierarchy=e,this._update=!0}get appearance(){return this._appearance}set appearance(e){this._appearance=e,void 0!==this._primitive&&(this._primitive.appearance=e)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(e){this._depthFailAppearance=e,void 0!==this._primitive&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=e)}get id(){return this._id}set id(e){this._id=e}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get classificationType(){return this._classificationType}set classificationType(e){this._classificationType=e,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(e){this._allowPicking=e}get asynchronous(){return this._asynchronous}set asynchronous(e){this._asynchronous=e}async update(e){if(this.show){const t=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(t.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){let e;this._update=!1,e=this._clampToGround?this._createGroundPolygon():this._createPolygon(),e.then((e=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=e,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(t,this._boundingSphere)}))}this._primitive&&this._primitive.update(e)}}}async _createPolygon(){const{Primitive:e,GeometryInstance:t,CoplanarPolygonGeometry:i,Cartesian3:n}=Cesium;return new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:e,GeometryInstance:t,PolygonGeometry:i,Cartesian3:n}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class ca{constructor(e){const{SampledPositionProperty:t,Entity:i,ExtrapolationType:n,VelocityOrientationProperty:o}=Cesium;this._lastTime=void 0,this._sampledPosition=new t,this._sampledPosition.forwardExtrapolationType=e.forwardExtrapolationType||n.HOLD,this._sampledPosition.backwardExtrapolationType=e.backwardExtrapolationType||n.HOLD,this._cache=[],this._maxCacheSize=e.maxCacheSize||10;const a=new i(e);a.position=this._sampledPosition,a.orientation=new o(this._sampledPosition),this._entity=a,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(e){this._entity.id=e}set maxCacheSize(e){this._maxCacheSize=e}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const e=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),t=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(e,t){let i;if(this._removePosition(),"number"==typeof t){const e=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(e,t,new Cesium.JulianDate),Cesium.destroyObject(e)}else i=Ye(t);return this._sampledPosition.addSample(i,Me(e)),this._lastTime=i,this._cache.push(this._lastTime),i}}const ua={position:0,normal:1};class da{constructor(e){const{defaultValue:t,Matrix4:i,Math:n,Color:o,BoundingSphere:a}=Cesium;this.modelMatrix=t(e.modelMatrix,new i),this.fovH=t(e.fovH,n.toRadians(60)),this.fovV=t(e.fovV,n.toRadians(30)),this.segmentH=t(e.segmentH,16),this.segmentV=t(e.segmentV,8),this.subSegmentH=t(e.subSegmentH,3),this.subSegmentV=t(e.subSegmentV,3),this._faceColor=t(e.faceColor,new o(1,1,1,.1)),this._lineColor=t(e.lineColor,new o(1,1,1,.4)),this.show=t(e.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new a,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(e){this._faceColor=e}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e}update(e){if(this.show&&e.passes.render){const{clone:t,Matrix4:i,defined:n,BoundingSphere:o}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),n(this._command)||this._createCommand(e.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&e.commandList.push(this._command),this._lineCommand&&e.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(e){const{Appearance:t,RenderState:i,ShaderSource:n,ShaderProgram:o,BufferUsage:a,IndexDatatype:r,VertexArray:s,ComponentDatatype:l,BoundingSphere:c,DrawCommand:u,PrimitiveType:d,Pass:p,Matrix4:m}=Cesium,v=this,h=this._subSegmentH*this._segmentH,g=this._subSegmentV*this._segmentV,f=pa(this._fovH,this._fovV,h,g),y=pa(this._fovH,this._fovV,h,g),b=function(e,t){const i=new Uint16Array(e*t*6);for(let n=0;n<e;n++)for(let o=0;o<t;o++){const t=o*(1+e)+n,a=o*(1+e)+n+1,r=(o+1)*(1+e)+n,s=(o+1)*(1+e)+n+1,l=6*(o*e+n);i[0+l]=t,i[1+l]=a,i[2+l]=s,i[3+l]=t,i[4+l]=s,i[5+l]=r}return i}(h,g),C=function(e,t,i,n){const o=e*i,a=t*n,r=new Uint16Array((e+1)*(2*a)+(t+1)*(2*o)+8);for(let c=0;c<e+1;c++)for(let e=0;e<a;e++){const t=c*i;r[2*(c*a+e)+0]=e*(1+o)+t,r[2*(c*a+e)+1]=(e+1)*(1+o)+t}const s=(e+1)*(2*a);for(let c=0;c<t;c++)for(let e=0;e<o;e++){const t=c*n;r[s+2*(e+c*o)]=t*(1+o)+e,r[s+2*(e+c*o)+1]=t*(1+o)+e+1}const l=(e+1)*(2*a)+(t+1)*(2*o);return r[l]=0,r[l+1]=(1+o)*(1+a),r[l+2]=o,r[l+3]=(1+o)*(1+a),r[l+4]=(1+o)*a,r[l+5]=(1+o)*(1+a),r[l+6]=(1+o)*(1+a)-1,r[l+7]=(1+o)*(1+a),r}(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),w=t.getDefaultRenderState(!0,!1,void 0),O=i.fromCache(w),x=new n({sources:["\n        // 使用double类型的position进行计算\n        // attribute vec3 position3DHigh;\n        // attribute vec3 position3DLow;\n        attribute vec3 position;\n        attribute vec3 normal;\n        // attribute vec2 st;\n        // attribute float batchId;\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        void main()\n          {\n            // 使用double类型的position进行计算\n            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            // position in eye coordinates\n            // v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            // gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;\n            // position in eye coordinates\n            v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n          }\n        "]}),S=new n({sources:["\n        varying vec3 v_positionEC;\n        varying vec3 v_normalEC;\n        // varying vec2 v_st;\n        // uniform sampler2D myImage;\n        uniform vec4 vcColor;\n        void main()\n        {\n          vec3 positionToEyeEC = -v_positionEC;\n          vec3 normalEC = normalize(v_normalEC);\n          #ifdef FACE_FORWARD\n          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n          #endif\n          czm_materialInput materialInput;\n          materialInput.normalEC = normalEC;\n          materialInput.positionToEyeEC = positionToEyeEC;\n          // materialInput.st = v_st;\n          //czm_material material = czm_getMaterial(materialInput);\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          // material.diffuse = texture2D(myImage, materialInput.st).rgb;\n          material.diffuse = vcColor.rgb;\n          material.alpha = vcColor.a;\n          #ifdef FLAT\n          gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\n          #else\n          gl_FragColor = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n          #endif\n        }\n        "]}),_={vcColor:function(){return v._faceColor}},E={vcColor:function(){return v._lineColor}},P=o.fromCache({context:e,vertexShaderSource:x,fragmentShaderSource:S,attributeLocations:ua});this._shaderprogram=P;const T=Cesium.Buffer.createVertexBuffer({context:e,typedArray:f,usage:a.STATIC_DRAW}),M=Cesium.Buffer.createVertexBuffer({context:e,typedArray:y,usage:a.STATIC_DRAW}),I=Cesium.Buffer.createIndexBuffer({context:e,typedArray:b,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),j=Cesium.Buffer.createIndexBuffer({context:e,typedArray:C,usage:a.STATIC_DRAW,indexDatatype:r.UNSIGNED_SHORT}),L=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:I}),A=new s({context:e,attributes:[{index:0,vertexBuffer:T,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:j});this._initBoundingSphere=c.fromVertices(f),this._command=new u({vertexArray:L,primitiveType:d.TRIANGLES,renderState:O,shaderProgram:P,uniformMap:_,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0}),this._lineCommand=new u({vertexArray:A,primitiveType:d.LINES,renderState:O,shaderProgram:P,uniformMap:E,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0})}_destroyVideoMemory(){const{defined:e}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),e(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),e(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function pa(e,t,i,n){const o=new Float32Array((i+1)*(n+1)*3+3);for(let a=0;a<i+1;a++)for(let r=0;r<n+1;r++){const s=e*(a/i-.5),l=t*(r/n-.5),c=[Math.cos(-s)*Math.cos(-l),Math.sin(-s)*Math.cos(-l),Math.sin(l)];o[3*(r*(i+1)+a)+0]=c[0],o[3*(r*(i+1)+a)+1]=c[1],o[3*(r*(i+1)+a)+2]=c[2]}return o[(i+1)*(n+1)*3+0]=0,o[(i+1)*(n+1)*3+1]=0,o[(i+1)*(n+1)*3+2]=0,o}let ma=!1;let va,ha=!1;class ga{constructor(e,t){const{defined:i,DeveloperError:n,PerspectiveFrustum:o,Math:a,Camera:r,ShadowMap:s,ShadowMode:l,Event:c,Cartesian3:u,defaultValue:d,Color:p}=Cesium;if(!i(e))throw new n("scene is required.");this._scene=e,this._frustum=new o,this._frustum.fov=a.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new r(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new s({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),t=t||{},this._scene.globe.shadows=l.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new da({}),this._enabledChangedEvent=new c,this._position=new u,this._offsetHeight=d(t.offsetHeight,1.8),this._visibleColor=d(t.visibleColor,new p(0,1,0,1)),this._invisibleColor=d(t.invisibleColor,new p(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=t.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=d(t.lineColor,new p(1,1,1,.4)),this._debugCameraPrimitive.faceColor=d(t.faceColor,new p(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(e){this.frustum.near!==e&&(this.frustum.near=e)}get far(){return this.far.near}set far(e){this.frustum.far!==e&&(this.frustum.far=e)}get position(){return this._position}set position(e){e instanceof Cesium.Cartesian3&&this.setView({destination:e.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(e){if(isNaN(e)||null==e||null==e)throw new Error("Unacceptable offset.");this._offsetHeight=Number(e),this.setView({destination:this._position,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(e){this._spotLightCamera.heading!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:e,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(e){this._spotLightCamera.pitch!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:e,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(e){this._spotLightCamera.roll!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:e}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(e){this._viewshedShadowMap.enabled!==e&&(e?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(e))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e,this._viewshedShadowMap._viewshedColors.visible=e}get invisibleColor(){return this._invisibleColor}set invisibleColor(e){this._invisibleColor=e,this._viewshedShadowMap._viewshedColors.invisible=e}get showGridLine(){return this._showGridLine}set showGridLine(e){this._showGridLine=e,this._debugCameraPrimitive.show=e}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(e){this._debugCameraPrimitive.faceColor=e}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(e){this._debugCameraPrimitive.lineColor=e}update(e){if(this._viewshedShadowMap.enabled){const{ShadowMode:t,Matrix3:i,Matrix4:n,Math:o}=Cesium;if(this._scene.globe.shadows!==t.ENABLED&&(this._scene.globe.shadows=t.ENABLED),e.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const t=this._debugCameraPrimitive.modelMatrix;n.clone(this._spotLightCamera.inverseViewMatrix,t);const a=i.fromRotationZ(.5*o.PI),r=i.fromRotationY(.5*o.PI),s=new i;i.multiply(a,r,s),n.multiplyByMatrix3(t,s,t),n.multiplyByUniformScale(t,this._spotLightCamera.frustum.far,t);const l=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=l.aspectRatio<=1?l.fov:2*Math.atan(Math.tan(.5*l.fov)/l.aspectRatio),this._debugCameraPrimitive.fovH=1<l.aspectRatio?l.fov:2*Math.atan(Math.tan(.5*l.fov)*l.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(e)}}}setView(e){const t=(e=e||{}).destination;if(t instanceof Cesium.Cartesian3){this._position=t.clone();const i=this._offsetHeight,n=Cesium.Cartographic.fromCartesian(t,this._scene.globe.ellipsoid);if(n){n.height=n.height+i;const t=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this._scene.globe.ellipsoid);e.destination=t}}this._spotLightCamera.setView(e)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}const fa=[class{static extend(e){if(ma)return;const{Rectangle:t}=Cesium;t.prototype.expand=function(e,i,n){return e=(n=n&&n instanceof t?n:this.clone()).width*(1-e)/2,i=n.height*(1-i)/2,n.west+=e,n.south+=i,n.east-=e,n.north-=i,n.west=n.west<-Math.PI?-Math.PI:n.west,n.east=n.east>Math.PI?Math.PI:n.east,n.north=n.north>Math.PI/2?Math.PI/2:n.north,n.south=n.south<-Math.PI/2?-Math.PI/2:n.south,n},ma=!0}static revoke(e){if(!ma)return;const{Rectangle:t}=Cesium;t.prototype.expand=void 0,ma=!1}},class{static extend(e){if(ha)return;const t=Cesium.ShadowMapShader;va=t.createShadowReceiveFragmentShader,t.createShadowReceiveFragmentShader=function(e,t,i,n,o){e=va.bind(this)(e,t,i,n,o);return t._isSpotLight&&(e.sources[0]=`\n          uniform vec4 shadowMap_viewshedVisibleColor;\n          uniform vec4 shadowMap_viewshedInvisibleColor;\n          ${e.sources[0]}\n        `,e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("gl_FragColor.rgb *= visibility;","\n          float _depth = shadowPosition.z - shadowParameters.depthBias;\n          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);\n          gl_FragColor.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);\n          "),e.sources[e.sources.length-1]=e.sources[e.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")),e},ha=!0}static revoke(e){if(!ha)return;Cesium.ShadowMapShader.createShadowReceiveFragmentShader=va,ha=!1}}];const ya=$o;function ba(e,t,i){let n,o;const a=new Promise(((e,t)=>{n=e,o=t})),r=h(null),s=h(!1),l=I(),{emit:c}=t,u=ye(),d=Ce(i);i.mounted=!1,i.vcMitt=l,i.cesiumClass="Viewer",i.children=[];const p=to(e,i),m=k({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let v=[];d.debug("viewer creating");const{t:g}=eo(),{invokeExtensions:f,revokeExtensions:y}={invokeExtensions:e=>{fa.forEach((t=>{t.extend(e)}))},revokeExtensions:e=>{fa.forEach((t=>{t.revoke(e)}))}};L((()=>e.selectionIndicator),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,SelectionIndicator:a}=Cesium;let r;if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()||e){if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-selectionIndicatorContainer",null==n||n.appendChild(r);const e=new a(r,t.scene);t._selectionIndicator=e}}else r=t.selectionIndicator.container,null==n||n.removeChild(r),t.selectionIndicator.destroy(),t._selectionIndicator=void 0;t.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:e?"added":"removed",target:r})})),L((()=>e.infoBox),(e=>{var t,n;const{viewer:o,viewerElement:a}=i,{defined:r,InfoBox:s}=Cesium,l=["cameraClicked","closeClicked"];let c;if(!r(o.infoBox)||o.infoBox.isDestroyed()||e){if(!r(o.infoBox)||o.infoBox.isDestroyed()){c=document.createElement("div"),c.className="cesium-viewer-infoBoxContainer",null==a||a.appendChild(c);const e=new s(c),i=e.viewModel;o._onInfoBoxCameraClicked&&(null==(t=o._eventHelper)||t.add(i.cameraClicked,o._onInfoBoxCameraClicked,o)),o._onInfoBoxClockClicked&&(null==(n=o._eventHelper)||n.add(i.closeClicked,o._onInfoBoxClockClicked,o)),i&&p.bindEvents(i,l,!0),o._infoBox=e}}else{const e=o.infoBox.viewModel;e&&p.bindEvents(e,l,!1),c=o.infoBox.container,null==a||a.removeChild(c),o.infoBox.destroy(),o._infoBox=void 0}o.forceResize(),o.viewerWidgetResized.raiseEvent({type:"infoBox",status:e?"added":"removed",target:c})})),L((()=>e.geocoder),(t=>{var n;const{viewer:o}=i,a=o._toolbar,{defined:r,Geocoder:s}=Cesium;let l;if(!r(o.geocoder)||o.geocoder.isDestroyed()||t){if(!r(o.geocoder)||o.geocoder.isDestroyed()){l=document.createElement("div"),l.className="cesium-viewer-geocoderContainer",null==a||a.appendChild(l);const t=new s({container:l,geocoderServices:r(e.geocoder)&&"boolean"!=typeof e.geocoder?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:o.scene});o._clearObjects&&(null==(n=o._eventHelper)||n.add(t.viewModel.search.beforeExecute,o._clearObjects,o)),o._geocoder=t,D(a,l)}}else l=o.geocoder.container,null==a||a.removeChild(l),o.geocoder.destroy(),o._geocoder=void 0;o.viewerWidgetResized.raiseEvent({type:"geocoder",status:t?"added":"removed",target:l})})),L((()=>e.homeButton),(e=>{var t,n;const{viewer:o}=i,a=o._toolbar,{defined:r,HomeButton:s}=Cesium;if(!r(o.homeButton)||o.homeButton.isDestroyed()||e){if(!r(o.homeButton)||o.homeButton.isDestroyed()){const e=new s(a,o.scene);r(o.geocoder)&&(null==(t=o._eventHelper)||t.add(e.viewModel.command.afterExecute,(function(){const e=o.geocoder.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}))),o._clearTrackedObject&&(null==(n=o._eventHelper)||n.add(e.viewModel.command.beforeExecute,o._clearTrackedObject,o)),o._homeButton=e,D(a,e)}}else o.homeButton.destroy(),o._homeButton=void 0;o.viewerWidgetResized.raiseEvent({type:"homeButton",status:e?"added":"removed",target:a})})),L((()=>e.sceneModePicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,DeveloperError:r,SceneModePicker:s}=Cesium;if(!a(n.sceneModePicker)||n.sceneModePicker.isDestroyed()||t){if(!a(n.sceneModePicker)||n.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new r("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const e=new s(o,n.scene);n._sceneModePicker=e,D(o,e)}}}else n.sceneModePicker.destroy(),n._sceneModePicker=void 0;n.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:t?"added":"removed",target:o})})),L((()=>e.projectionPicker),(e=>{const{viewer:t}=i,n=t._toolbar,{defined:o,ProjectionPicker:a}=Cesium;if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()||e){if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()){const e=new a(n,t.scene);t._projectionPicker=e,D(n,e)}}else t.projectionPicker.destroy(),t._projectionPicker=void 0;t.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:e?"added":"removed",target:n})})),L((()=>e.baseLayerPicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,buildModuleUrl:r,DeveloperError:s,defaultValue:l,createDefaultImageryProviderViewModels:c,createDefaultTerrainProviderViewModels:u,BaseLayerPicker:d}=Cesium;if(!a(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()||t){if(!a(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()){const t=!(Cesium.defined(n.scene.globe)&&!1===e.globe||Cesium.defined(n.baseLayerPicker)&&!1===e.baseLayerPicker);if(t&&a(e.imageryProvider))throw new s("options.imageryProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&a(e.selectedImageryProviderViewModel))throw new s("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(t&&a(e.terrainProvider))throw new s("options.terrainProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&a(e.selectedTerrainProviderViewModel))throw new s("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(t){const t=l(e.imageryProviderViewModels,c()),i=l(e.terrainProviderViewModels,u()),a=new d(o,{globe:n.scene.globe,imageryProviderViewModels:t,selectedImageryProviderViewModel:t[0],terrainProviderViewModels:i,selectedTerrainProviderViewModel:i[0]}),r=null==o?void 0:o.getElementsByClassName("cesium-baseLayerPicker-dropDown"),s=null==r?void 0:r[0];n._baseLayerPickerDropDown=s,n._baseLayerPicker=a,n.imageryLayers.raiseToTop(n.imageryLayers.get(0)),D(o,a)}}}else{n.baseLayerPicker.destroy(),n._baseLayerPicker=void 0,n.imageryLayers.remove(n.imageryLayers.get(n.imageryLayers.length-1));const e=r("Assets/Textures/NaturalEarthII"),t=n.imageryLayers.addImageryProvider(new Cesium.TileMapServiceImageryProvider({url:e}));n.imageryLayers.lowerToBottom(t)}n.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:t?"added":"removed",target:o})})),L((()=>e.navigationHelpButton),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:a,defaultValue:r,NavigationHelpButton:s}=Cesium;if(!a(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()||t){if(!a(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()){let t=!0;try{if(a(window.localStorage)){const e=window.localStorage.getItem("cesium-hasSeenNavHelp");a(e)&&Boolean(e)?t=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(Rh){}const i=new s({container:o,instructionsInitiallyVisible:r(e.navigationInstructionsInitiallyVisible,t)});n._navigationHelpButton=i,D(o,i)}}else n.navigationHelpButton.destroy(),n._navigationHelpButton=void 0;n.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:t?"added":"removed",target:o})})),L((()=>e.animation),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,Animation:a,AnimationViewModel:r}=Cesium;let s;if(!o(t.animation)||t.animation.isDestroyed()||e){if(!o(t.animation)||t.animation.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-animationContainer",null==n||n.appendChild(s);const e=new a(s,new r(t.clockViewModel));e.viewModel.dateFormatter=P,e.viewModel.timeFormatter=T,t._animation=e}}else s=t.animation.container,null==n||n.removeChild(s),t.animation.destroy(),t._animation=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"animation",status:e?"added":"removed",target:s})})),L((()=>e.timeline),(e=>{var t;const{viewer:n,viewerElement:o}=i,{defined:a,Timeline:r}=Cesium;let s;if(!a(n.timeline)||n.timeline.isDestroyed()||e){if(!a(n.timeline)||n.timeline.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-timelineContainer",null==o||o.appendChild(s);const e=new r(s,n.clock);e.makeLabel=e=>P(e),null==(t=e.addEventListener)||t.call(e,"settime",j,!1),e.zoomTo(n.clock.startTime,n.clock.stopTime),n._timeline=e}}else s=n.timeline.container,null==o||o.removeChild(s),n.timeline.destroy(),n._timeline=void 0;n.forceResize(),n.viewerWidgetResized.raiseEvent({type:"timeline",status:e?"added":"removed",target:s})})),L((()=>e.fullscreenButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,FullscreenButton:a}=Cesium;let r;if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()||e){if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-fullscreenContainer",null==n||n.appendChild(r);const e=new a(r,n);t._fullscreenButton=e}}else r=t.fullscreenButton.container,null==n||n.removeChild(r),t.fullscreenButton.destroy(),t._fullscreenButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),L((()=>e.fullscreenElement),(e=>{const{viewer:t}=i,{defined:n}=Cesium;n(t.fullscreenButton)&&n(e)&&(t.fullscreenButton.viewModel.fullscreenElement=e)})),L((()=>e.vrButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,VRButton:a}=Cesium;let r;if(!o(t.vrButton)||t.vrButton.isDestroyed()||e){if(!o(t.vrButton)||t.vrButton.isDestroyed()){r=document.createElement("div"),r.className="cesium-viewer-vrContainer",null==n||n.appendChild(r);const e=new a(r,t.scene,n),i=e.viewModel.command;e.viewModel._command=function(e){i(),A(t,e.isVRMode)},t._vrButton=e}}else r=t.vrButton.container,null==n||n.removeChild(r),t.vrButton.destroy(),t._vrButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:r})})),L((()=>e.useDefaultRenderLoop),(e=>{i.viewer.useDefaultRenderLoop=e})),L((()=>e.sceneMode),(e=>{const{SceneMode:t}=Cesium;t.COLUMBUS_VIEW!==e&&t.MORPHING!==e&&t.SCENE2D!==e&&t.SCENE3D!==e||(i.viewer.scene.mode=e)})),L((()=>e.shouldAnimate),(e=>{i.viewer.clock.shouldAnimate=e})),L((()=>e.terrainExaggeration),(e=>{i.viewer._terrainExaggeration=e})),L((()=>e.shadows),(e=>{i.viewer.scene.shadowMap.enabled=e})),L((()=>e.terrainProvider),(e=>{e&&(i.viewer.terrainProvider=e)})),L((()=>e.camera),(e=>{He(i.viewer,e)}),{deep:!0}),L((()=>e.imageryProvider),((e,t)=>{const{viewer:n}=i,{defined:o}=Cesium;if(o(e)){for(let e=0;e<n.imageryLayers.length;e++)n.imageryLayers.get(e).imageryProvider===t&&n.imageryLayers.remove(n.imageryLayers[e]);e&&n.imageryLayers.addImageryProvider(e)}})),L((()=>e.showCredit),(e=>{const{viewer:t}=i;t.cesiumWidget.creditContainer.style.display=e?"inline":"none",t.viewerWidgetResized.raiseEvent({type:"credit",status:e?"added":"removed",target:t.cesiumWidget.creditContainer})})),L((()=>e.debugShowFramesPerSecond),(e=>{const{viewer:t}=i;t.scene.debugShowFramesPerSecond=e}));const b=async function(){var t,n,o;if(d.debug("loading-viewer"),i.mounted)return!1;if(await async function(){d.debug("beforeLoad - viewer"),_e(i,"beforeLoad")&&c("beforeLoad",i),u.value.__scriptPromise=u.value.__scriptPromise||O(),await u.value.__scriptPromise}(),"undefined"==typeof Cesium)return!1;const{Ion:a,buildModuleUrl:m,TileMapServiceImageryProvider:v,Viewer:h,defined:g,Math:y,Event:b}=Cesium,C=e.accessToken?e.accessToken:u.value.accessToken;a.defaultAccessToken=C;const{animation:x,baseLayerPicker:S,fullscreenButton:M,vrButton:I,geocoder:j,homeButton:L,infoBox:A,sceneModePicker:D,selectionIndicator:R,timeline:k,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:te,automaticallyTrackDataSourceClocks:ie,contextOptions:ne,sceneMode:oe,mapProjection:ae,globe:re,orderIndependentTranslucency:se,creditContainer:le,creditViewport:ce,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ge,projectionPicker:fe,requestRenderMode:ye,maximumRenderTimeChange:be,camera:Ce,navigation:we}=e,Oe=m("Assets/Textures/NaturalEarthII");let xe,Se={animation:x,baseLayerPicker:S,fullscreenButton:M,vrButton:I,geocoder:j,homeButton:L,infoBox:A,sceneModePicker:D,selectionIndicator:R,timeline:k,navigationHelpButton:N,navigationInstructionsInitiallyVisible:V,scene3DOnly:z,shouldAnimate:F,clockViewModel:H,selectedImageryProviderViewModel:U,imageryProviderViewModels:W,selectedTerrainProviderViewModel:G,terrainProviderViewModels:$,imageryProvider:de(Z)?new v({url:Oe}):Z,terrainProvider:Y,skyBox:q,skyAtmosphere:X,fullscreenElement:de(Q)?Ee(r):Q,useDefaultRenderLoop:J,targetFrameRate:K,showRenderLoopErrors:ee,useBrowserRecommendedResolution:te,automaticallyTrackDataSourceClocks:ie,contextOptions:ne,sceneMode:oe,mapProjection:ae,globe:re,orderIndependentTranslucency:se,creditContainer:le,creditViewport:ce,dataSources:pe,terrainExaggeration:me,shadows:ve,terrainShadows:he,mapMode2D:ge,projectionPicker:fe,requestRenderMode:ye,maximumRenderTimeChange:be,navigation:we};Se=ue(Se),Cesium.VERSION>="1.83"&&delete Se.terrainExaggeration,globalThis.mars3d?(i.map=new mars3d.Map(Ee(r).id,Se),xe=null==(t=i.map)?void 0:t._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(Ee(r).id,Se),xe=null==(n=i.dcViewer)?void 0:n.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(Ee(r),Se),xe=null==(o=i.earth)?void 0:o.czm.viewer):xe=new h(Ee(r),Se),f(xe),i.Cesium=Cesium,i.viewer=xe,i.viewerElement=xe._element,i.mounted=!0,Cesium.VERSION>="1.83"&&(xe.scene.globe.terrainExaggeration=me),g(Ce)&&He(xe,Ce);_e(i,"update:camera")&&xe.camera.changed.addEventListener((()=>{const e=xe.camera.positionCartographic;let t;t=w(Ce.position,"lng")?{position:{lng:y.toDegrees(e.longitude),lat:y.toDegrees(e.latitude),height:e.height},heading:y.toDegrees(xe.camera.heading||360),pitch:y.toDegrees(xe.camera.pitch||-90),roll:y.toDegrees(xe.camera.roll||0)}:{position:{x:xe.camera.position.x,y:xe.camera.position.y,z:xe.camera.position.z},heading:xe.camera.heading||2*Math.PI,pitch:xe.camera.pitch||-Math.PI/2,roll:xe.camera.roll||0},c("update:camera",t)})),g(xe.animation)&&(xe.animation.viewModel.dateFormatter=P,xe.animation.viewModel.timeFormatter=T),g(xe.timeline)&&(xe.timeline.makeLabel=e=>P(e),xe.timeline.zoomTo(xe.clock.startTime,xe.clock.stopTime)),!e.showCredit&&(xe.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(xe.scene.debugShowFramesPerSecond=!0),xe.viewerWidgetResized=xe.viewerWidgetResized||new b,xe.viewerWidgetResized.addEventListener(_),xe.imageryLayers.layerAdded.addEventListener(E),p.registerEvents(!0);const Pe={Cesium:Cesium,viewer:xe,vm:i.proxy};globalThis.XE?Object.assign(Pe,{earth:i.earth}):globalThis.mars3d?Object.assign(Pe,{map:i.map}):globalThis.DC&&Object.assign(Pe,{dcViewer:i.dcViewer});return _e(i,"ready")&&c("ready",Pe),null==l||l.emit("ready",Pe),B((()=>{xe.resize(),_({type:"viewer",status:"added",target:xe.container}),s.value=!0})),d.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:xe}),Pe},C=async function(){if(!i.mounted)return!1;let t;d.debug("viewer---unloading"),u.value.__viewerUnloadingPromise=new Promise(((e,i)=>{t=e}));for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}i.children.length=0;const{viewer:n,earth:o,map:a,dcViewer:r}=i;globalThis.Cesium&&(n.imageryLayers.layerAdded.removeEventListener(E),p.registerEvents(!1)),n._vcPickScreenSpaceEventHandler&&n._vcPickScreenSpaceEventHandler.destroy(),n._vcViewerScreenSpaceEventHandler&&n._vcViewerScreenSpaceEventHandler.destroy(),n._vcPickScreenSpaceEventHandler=void 0,n._vcViewerScreenSpaceEventHandler=void 0,y(n),globalThis.XE?o&&o.destroy():globalThis.mars3d?a&&a.destroy():globalThis.DC?r&&r.destroy():n&&n.destroy(),i.viewer=void 0,i.mounted=!1;const{removeCesiumScript:l}=e;if(l&&globalThis.Cesium){const e=document.getElementsByTagName("script"),t=[];for(const n of e)n.src.indexOf("/Cesium.js")>-1&&t.push(n),n.src.indexOf("/Workers/zlib.min.js")>-1&&t.push(n),globalThis.XE&&(n.src.indexOf("/rxjs.umd.min.js")>-1&&t.push(n),n.src.indexOf("/XbsjCesium.js")>-1&&t.push(n),n.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&t.push(n),n.src.indexOf("/XbsjEarth.js")>-1&&t.push(n)),v.includes(n.src)&&!t.includes(n)&&t.push(n);const i=document.getElementsByTagName("link");for(const n of i)n.href.includes("Widgets/widgets.css")&&!t.includes(n)&&t.push(n),v.includes(n.href)&&!t.includes(n)&&t.push(n);t.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),u.value.__scriptPromise=void 0,v=[]}return _e(i,"destroyed")&&c("destroyed",i),d.debug("viewer---unloaded"),t(!0),u.value.__viewerUnloadingPromise=void 0,s.value=!1,!0},O=async function(){var t,n;if(d.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{let a=e.cesiumPath?e.cesiumPath:u.value.cesiumPath;const r=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";let t=e.charCodeAt(0);const i=47===t;let n=-1,o=!0;for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),47===t){if(!o){n=a;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)}(a);if(null==a?void 0:a.includes(".js"))a.includes("dc.base")?(v.push(a),v.push(a.replace("dc.base","dc.core")),v.push(a.replace("dc.base","dc.core").replace(".js",".css"))):a.includes("/XbsjEarth.js")?v.push(a):(v.push(a),v.push(`${r}/Widgets/widgets.css`));else{(null==a?void 0:a.lastIndexOf("/"))!==(null==a?void 0:a.length)-1&&(a+="/");const e={"font-awesome":[(n=a)+"fonts/font-awesome/css/font-awesome.min.css"],haoutil:[n+"hao/haoutil.js"],turf:[n+"turf/turf.min.js"],"mars3d-space":[n+"mars3d/plugins/space/mars3d-space.js"],"mars3d-echarts":[n+"echarts/echarts.min.js",n+"echarts/echarts-gl.min.js",n+"mars3d/plugins/echarts/mars3d-echarts.js"],"mars3d-mapv":[n+"mapV/mapv.min.js",n+"mars3d/plugins/mapv/mars3d-mapv.js"],"mars3d-heatmap":[n+"mars3d/plugins/heatmap/heatmap.min.js",n+"mars3d/plugins/heatmap/mars3d-heatmap.js"],"mars3d-wind":[n+"mars3d/plugins/wind/netcdfjs.js",n+"mars3d/plugins/wind/mars3d-wind.js"],mars3d:[n+"Cesium/Widgets/widgets.css",n+"Cesium/Cesium.js",n+"mars3d/mars3d.css",n+"mars3d/mars3d.js"]},i=((null==(t=u.value.cfg)?void 0:t.include)||"mars3d").split(","),o={};for(let t=0,n=i.length;t<n;t++){const n=i[t];o[n]||(o[n]=!0,v.push(...e[n]))}}const s=v;if(!(null==a?void 0:a.includes(".js"))){const e=v.find((e=>e.includes("Cesium.js")));await x(e),s.splice(s.indexOf(e),1)}const l=[];return s.forEach((e=>{new RegExp("\\.css").test(e)?l.push(S(e)):l.push(x(e))})),Promise.all(l).then((()=>{if(globalThis.Cesium){return _e(i,"cesiumReady")&&c("cesiumReady",globalThis.Cesium),globalThis.Cesium}return globalThis.XE?globalThis.XE.ready().then((()=>(_e(i,"cesiumReady")&&c("cesiumReady",globalThis.Cesium),globalThis.Cesium))):globalThis.DC?(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${r}/resources/`,globalThis.DC.ready((()=>{globalThis.Cesium=DC.Namespace.Cesium;return _e(i,"cesiumReady")&&c("cesiumReady",globalThis.DC),globalThis.Cesium})),globalThis.Cesium):void o(new Error("VueCesium ERROR: Error loading CesiumJS!"))}))}},x=e=>{const t=document.createElement("script");return t.async=!0,t.src=e,document.body.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},S=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.href=e,document.head.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},_=e=>{var t,n;const{viewer:o}=i,a=o._toolbar;void 0!==a&&"hidden"!==getComputedStyle(a).visibility&&"none"!==getComputedStyle(a).display?m.toolbarContainerRC=a.getBoundingClientRect():m.toolbarContainerRC=void 0;const r=o.bottomContainer;void 0!==r&&"hidden"!==getComputedStyle(r).visibility&&"none"!==getComputedStyle(r).display?m.bottomContainerRC=r.getBoundingClientRect():m.bottomContainerRC=void 0;const s=null==(t=o.timeline)?void 0:t.container;void 0!==s&&"hidden"!==getComputedStyle(s).visibility&&"none"!==getComputedStyle(s).display?m.timelineContainerRC=s.getBoundingClientRect():m.timelineContainerRC=void 0;const l=null==(n=o.animation)?void 0:n.container;void 0!==l&&"hidden"!==getComputedStyle(l).visibility&&"none"!==getComputedStyle(l).display?m.animationContainerRC=l.getBoundingClientRect():m.animationContainerRC=void 0,o.resize();_e(i,"viewerWidgetResized")&&c("viewerWidgetResized",e)},E=t=>{const n=i.viewer,{autoSortImageryLayers:o}=e;n.baseLayerPicker&&n.imageryLayers.raiseToTop(t);const{defined:a}=Cesium;o&&(t.sortOrder=a(t.sortOrder)?t.sortOrder:9999,n.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),n.imageryLayers._update())},P=function(t,i,n){const{JulianDate:o}=Cesium;let a;if(e.UTCOffset){t=o.addMinutes(t,e.UTCOffset,new o);const i=(new Date).getTimezoneOffset()-e.UTCOffset;a=0===i?"UTC":"UTC+"+-i/60}else a=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const r=o.toDate(t),s=r.toLocaleString(g("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=r.toLocaleString(g("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!i&&r.getHours()+r.getMinutes()!==0?(e.TZCode&&(a=e.TZCode),n?`${s} ${a}`:`${l} ${s} ${a}`):l},T=function(e,t){return P(e,t,!0)},j=function(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1},A=function(e,t){const i=e._geocoder,n=e._homeButton,o=e._sceneModePicker,a=e._projectionPicker,r=e._baseLayerPicker,s=e._animation,l=e._timeline,c=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,p=t?"hidden":"visible",{defined:m}=Cesium;if(m(i)&&(i.container.style.visibility=p),m(n)&&(n.container.style.visibility=p),m(o)&&(o.container.style.visibility=p),m(a)&&(a.container.style.visibility=p),m(r)&&(r.container.style.visibility=p),m(s)&&(s.container.style.visibility=p),m(l)&&(l.container.style.visibility=p),m(c)&&c.viewModel.isFullscreenEnabled&&(c.container.style.visibility=p),m(u)&&(u.container.style.visibility=p),m(d)&&(d.container.style.visibility=p),e._container){const i=t||!m(c)?0:c.container.clientWidth;e._vrButton.container.style.right=i+"px",e.forceResize()}},D=function(e,t){Array.prototype.slice.call(e.children).forEach((e=>{switch(e.className){case"cesium-viewer-geocoderContainer":e.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":e.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":e.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":e.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":e.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":e.customIndex=6}}));const i=[];Array.prototype.slice.call(e.children).forEach((e=>{i.push(e)})),i.sort((function(e,t){return e.customIndex-t.customIndex}));for(let n=0;n<i.length;n++)e.appendChild(i[n])};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),N((async()=>{var e;try{d.debug("viewer - onMounted"),await(null==(e=u.value)?void 0:e.__viewerUnloadingPromise),n(b())}catch(Rh){o(Rh)}})),M((()=>{d.debug("viewer - onUnmounted"),C().then((()=>{l.all.clear()}))})),{isReady:s,load:b,unload:C,reload:function(){return C().then((()=>b()))},getServices:function(){return xe({},{get layout(){return m},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var e;return null==(e=i.viewer)?void 0:e.dataSources},get entities(){var e;return null==(e=i.viewer)?void 0:e.entities},get imageryLayers(){var e;return null==(e=i.viewer)?void 0:e.imageryLayers},get primitives(){var e;return null==(e=i.viewer)?void 0:e.scene.primitives},get groundPrimitives(){var e;return null==(e=i.viewer)?void 0:e.scene.groundPrimitives},get postProcessStages(){var e;return null==(e=i.viewer)?void 0:e.postProcessStages},get creatingPromise(){return a}})},viewerRef:r,creatingPromise:a}}const Ca=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],wa=io.map((e=>E(e))),Oa=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...io,...wa,...no];Ca.reduce(((e,t)=>e.concat(t.events)),Oa);const xa={xs:18,sm:24,md:32,lg:38,xl:46},Sa={size:String};function _a(e,t=xa){return f((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function Ea(e,t){return void 0!==e?e():t}function Pa(e,t){return void 0!==e?t.concat(e()):t}var Ta=F({name:"VcIcon",props:l(s({},Sa),{tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean}),setup(e,{slots:t}){const i=_a(e),n=f((()=>{const t=i.value;if(t)return e.color&&(t.color=e.color),e.hoverColor&&(t["--hover-color"]=e.hoverColor),t})),o=f((()=>"vc-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),a=f((()=>{let t,i=e.name;if(!i)return{none:!0,cls:o.value};if(!0===i.startsWith("M")){const[e,t]=i.split("|");return{svg:!0,cls:o.value,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return z("path",{style:i,d:t,transform:n})})),viewBox:void 0!==t?t:"0 0 24 24"}}if(!0===i.startsWith("img:"))return{img:!0,cls:o.value,src:i.substring(4)};if(!0===i.startsWith("svguse:")){const[e,t]=i.split("|");return{svguse:!0,cls:o.value,src:e.substring(7),viewBox:void 0!==t?t:"0 0 24 24"}}let n=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(i)||!0===i.startsWith("icon-")?t=i:!0===i.startsWith("bt-")?t=`bt ${i}`:!0===i.startsWith("eva-")?t=`eva ${i}`:!0===/^ion-(md|ios|logo)/.test(i)?t=`ionicons ${i}`:!0===i.startsWith("ion-")?t=`ionicons ion-md${i.substr(3)}`:!0===i.startsWith("mdi-")?t=`mdi ${i}`:!0===i.startsWith("iconfont ")?t=`${i}`:!0===i.startsWith("ti-")?t=`themify-icon ${i}`:!0===i.startsWith("vc-")?t=`vc-icons ${i}`:(t="notranslate material-icons",!0===i.startsWith("o_")?(i=i.substring(2),t+="-outlined"):!0===i.startsWith("r_")?(i=i.substring(2),t+="-round"):!0===i.startsWith("s_")&&(i=i.substring(2),t+="-sharp"),n=i),{cls:t+" "+o.value,content:n}}));return()=>{const i={class:a.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return!0===a.value.none?z(e.tag,i,Ea(t.default)):!0===a.value.img?(i.src=a.value.src,i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),z("img",i)):!0===a.value.svg?(i.viewBox=a.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),z("svg",i,Pa(t.default,a.value.nodes))):!0===a.value.svguse?(i.viewBox=a.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),z("svg",i,Pa(t.default,[z("use",{"xlink:href":a.value.src})]))):z(e.tag,i,Pa(t.default,[a.value.content]))}}});const Ma={size:{type:[Number,String],default:"1em"},color:String};function Ia(e){return{cSize:f((()=>e.size in xa?`${xa[e.size]}px`:e.size)),classes:f((()=>"vc-spinner"+(e.color?` text-${e.color}`:"")))}}const ja=[z("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[z("circle",{cx:"5",cy:"50",r:"5"},[z("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"27",cy:"5",r:"5"},[z("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"49",cy:"50",r:"5"},[z("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var La=F({name:"VcSpinnerBall",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},ja)}});const Aa=[z("rect",{y:"10",width:"15",height:"120",rx:"6"},[z("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),z("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[z("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),z("rect",{x:"60",width:"15",height:"140",rx:"6"},[z("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),z("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[z("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),z("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[z("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var Da=F({name:"VcSpinnerBars",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},Aa)}});const Ra=[z("circle",{cx:"15",cy:"15",r:"15"},[z("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[z("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"105",cy:"15",r:"15"},[z("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var ka=F({name:"VcSpinnerDots",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Ra)}});const Ba=[z("g",{transform:"translate(-20,-20)"},[z("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),z("g",{transform:"translate(20,20) rotate(15 50 50)"},[z("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var Na=F({name:"VcSpinnerGears",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ba)}});const Va=[z("g",[z("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),z("clipPath",{id:"uil-hourglass-clip1"},[z("rect",{x:"15",y:"20",width:" 70",height:"25"},[z("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),z("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),z("clipPath",{id:"uil-hourglass-clip2"},[z("rect",{x:"15",y:"55",width:" 70",height:"25"},[z("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),z("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),z("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),z("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var za=F({name:"VcSpinnerHourglass",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Va)}});const Fa=[z("g",{"stroke-width":"4","stroke-linecap":"round"},[z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),z("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[z("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Ha=F({name:"VcSpinnerIos",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},Fa)}});const Ua=[z("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),z("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Wa=F({name:"VcSpinnerOrbit",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ua)}});const Ga=[z("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[z("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),z("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var $a=F({name:"VcSpinnerOval",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Ga)}});const Za=[z("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[z("circle",{cx:"22",cy:"22",r:"1"},[z("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),z("circle",{cx:"22",cy:"22",r:"1"},[z("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Ya=F({name:"VcSpinnerPuff",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},Za)}});const qa=[z("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[z("circle",{cx:"22",cy:"22",r:"6"},[z("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"22",cy:"22",r:"6"},[z("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),z("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),z("circle",{cx:"22",cy:"22",r:"8"},[z("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Xa=F({name:"VcSpinnerRings",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},qa)}});const Qa=[z("defs",[z("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[z("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),z("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),z("stop",{"stop-color":"currentColor",offset:"100%"})])]),z("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[z("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),z("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[z("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var Ja=F({name:"VcSpinnerTail",props:Ma,setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Qa)}}),Ka=F({name:"VcSpinner",props:l(s({},Ma),{thickness:{type:Number,default:5}}),setup(e){const{cSize:t,classes:i}=Ia(e);return()=>z("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[z("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const er={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},tr=Object.keys(er),ir={align:{type:String,validator:e=>tr.includes(e)}};const nr={none:0,xs:4,sm:8,md:16,lg:24,xl:32},or={xs:8,sm:10,md:14,lg:20,xl:24},ar=l(s({},Sa),{type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:l(s({},ir.align),{default:"center"}),stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean});function rr(e){const t=_a(e,or),i=function(e){return f((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${er[t]}`}))}(e),n=f((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in nr?nr[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),o=f((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),a=f((()=>!0!==e.disable&&!0!==e.loading)),r=f((()=>!0===a.value?e.tabindex||0:-1)),s=f((()=>!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":"standard")),l=f((()=>{const t={tabindex:r.value};return"a"!==e.type&&(t.type=e.type),t.role="a"===e.type?"link":"button",!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),t}));return{classes:f((()=>{let t;return void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`),`vc-btn--${s.value} vc-btn--${!0===e.round?"round":"rectangle"+(!0===o.value?" vc-btn--rounded":"")}`+(void 0!==t?" "+t:"")+(!0===a.value?" vc-btn--actionable vc-focusable vc-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" vc-btn--fab":!0===e.fabMini?" vc-btn--fab-mini":"")+(!0===e.noCaps?" vc-btn--no-uppercase":"")+(!0===e.dense?" vc-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")})),style:n,innerClasses:f((()=>i.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" vc-btn__content--hidden":""))),attributes:l,isActionable:a}}const sr=_o().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e,{passiveCapture:lr}=po;let cr,ur,dr;var pr=F({name:"VcBtn",props:l(s({},ar),{percentage:{type:Number,default:0},darkPercentage:Boolean}),emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var n;const o=null==(n=O())?void 0:n.proxy,{classes:a,style:r,innerClasses:l,attributes:c,isActionable:u}=rr(e),d=h(null),p=h(null);let m,v,g=null;const y=f((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),b=f((()=>!1!==e.ripple&&s({keyCodes:13},!0===e.ripple?{}:e.ripple))),C=f((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),w=f((()=>!0===e.loading?{onMousedown:j,onTouchstart:j,onClick:j,onKeydown:j,onKeyup:j}:!0===u.value?{onClick:_,onKeydown:E,onMousedown:T,onTouchstart:P}:{})),x=f((()=>[[So,b.value,void 0,{center:e.round}]])),S=f((()=>s(s({ref:d,class:"vc-btn vc-btn-item non-selectable no-outline "+a.value,style:r.value},c.value),w.value)));function _(t){var n;if(void 0!==t){if(!0===t.defaultPrevented)return;const i=document.activeElement;if("submit"===e.type&&i!==document.body&&!1===(null==(n=d.value)?void 0:n.contains(i))&&!1===(null==i?void 0:i.contains(d.value))){d.value.focus();const e=()=>{document.removeEventListener("keydown",fo,!0),document.removeEventListener("keyup",e,lr),null!==d.value&&d.value.removeEventListener("blur",e,lr)};document.addEventListener("keydown",fo,!0),document.addEventListener("keyup",e,lr),d.value.addEventListener("blur",e,lr)}}i("click",t,(()=>{}))}function E(e){var t,n,o;!0===Co(e,[13,32])&&(fo(e),ur!==d.value&&(null!==ur&&I(),null==(t=d.value)||t.focus(),ur=d.value,null==(n=d.value)||n.classList.add("vc-btn--active"),document.addEventListener("keyup",M,!0),null==(o=d.value)||o.addEventListener("blur",M,lr))),i("keydown",e)}function P(e){cr!==d.value&&(null!==cr&&I(),cr=d.value,g=sr(e.target),null==g||g.addEventListener("touchcancel",M,lr),null==g||g.addEventListener("touchend",M,lr)),m=!0,clearTimeout(v),v=setTimeout((()=>{m=!1}),200),i("touchstart",e)}function T(e){var t;dr!==d.value&&(null!==dr&&I(),dr=d.value,null==(t=d.value)||t.classList.add("vc-btn--active"),document.addEventListener("mouseup",M,lr)),e.qSkipRipple=!0===m,i("mousedown",e)}function M(e){var t;if(void 0===e||"blur"!==e.type||document.activeElement!==d.value){if(void 0!==e&&"keyup"===e.type){if(ur===d.value&&!0===Co(e,[13,32])){const i=new MouseEvent("click",e);i.qKeyEvent=!0,!0===e.defaultPrevented&&go(i),!0===e.cancelBubble&&ho(i),null==(t=d.value)||t.dispatchEvent(i),fo(e),e.qKeyEvent=!0}i("keyup",e)}I()}}function I(e){const t=p.value;!0===e||cr!==d.value&&dr!==d.value||null===t||t===document.activeElement||(t.setAttribute("tabindex","-1"),t.focus()),cr===d.value&&(null!==g&&(g.removeEventListener("touchcancel",M,lr),g.removeEventListener("touchend",M,lr)),cr=g=null),dr===d.value&&(document.removeEventListener("mouseup",M,lr),dr=null),ur===d.value&&(document.removeEventListener("keyup",M,!0),null!==d.value&&d.value.removeEventListener("blur",M,lr),ur=null),null!==d.value&&d.value.classList.remove("vc-btn--active")}function j(e){fo(e),e.qSkipRipple=!0}return H((()=>{I(!0)})),Object.assign(o,{click:_}),()=>{let i=[];void 0!==e.icon&&i.push(z(Ta,{name:e.icon,left:!1===e.stack&&!0===y.value,role:"img","aria-hidden":"true"})),!0===y.value&&i.push(z("span",{class:"block"},[e.label])),i=Pa(t.default,i),void 0!==e.iconRight&&!1===e.round&&i.push(z(Ta,{name:e.iconRight,right:!1===e.stack&&!0===y.value,role:"img","aria-hidden":"true"}));const n=[z("span",{class:"vc-focus-helper",ref:p})];return!0===e.loading&&void 0!==e.percentage&&n.push(z("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[z("span",{class:"vc-btn__progress-indicator fit block"+(!0===e.darkPercentage?" vc-btn__progress--dark":""),style:C.value})])),n.push(z("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+l.value},i)),null!==e.loading&&n.push(z(U,{name:"vc-transition--fade"},(()=>!0===e.loading?[z("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[z(Ka)])]:null))),function(e,t,i,n,o,a){t.key=n+o;const r=z(e,t,i);return!0===o?V(r,a()):r}("button",S.value,n,"ripple",!0!==e.disable&&!1!==e.ripple,(()=>x.value))}}});const mr={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function vr({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:o,emit:a}=O(),r=h(null);let s;function l(e){return null!==r.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const c={};function u(){bo(c,"anchor")}function d(){if(!1===n.target||""===n.target)r.value=null;else if(!0===n.target)!function(e){for(r.value=e;r.value.classList.contains("vc-anchor--skip");)r.value=r.value.parentNode;i()}(null==o?void 0:o.$el.parentNode);else{let t=n.target;if("string"==typeof n.target)try{t=document.querySelector(n.target)}catch(e){t=void 0}null!=t?(r.value=t.$el||t,i()):r.value=null}}return void 0===i&&(Object.assign(c,{hide(e){o.hide(e)},toggle(e){o.toggle(e)},toggleKey(e){!0===Co(e,13)&&o.toggle(e)},contextClick(e){o.hide(e),B((()=>{o.show(e)})),go(e)},mobilePrevent:go,mobileTouch(e){var t;if(c.mobileCleanup(e),!0!==l(e))return;o.hide(e),null==(t=r.value)||t.classList.add("non-selectable");const i=sr(e.target);yo(c,"anchor",[[i,"touchmove","mobileCleanup","passive"],[i,"touchend","mobileCleanup","passive"],[i,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","mobilePrevent","notPassive"]]),s=setTimeout((()=>{o.show(e)}),300)},mobileCleanup(t){r.value.classList.remove("non-selectable"),clearTimeout(s),!0===e.value&&void 0!==t&&Eo()}}),i=function(e=n.contextMenu){if(!0===n.noParentEvent||null===r.value)return;let t;t=!0===e?!0===_o().isPhone?[[r.value,"touchstart","mobileTouch","passive"]]:[[r.value,"click","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],yo(c,"anchor",t)}),L((()=>n.contextMenu),(e=>{null!==r.value&&(u(),i(e))})),L((()=>n.target),(()=>{null!==r.value&&u(),d()})),L((()=>n.noParentEvent),(e=>{null!==r.value&&(!0===e?u():i())})),N((()=>{d(),!0!==t&&!0===n.modelValue&&null===r.value&&a("update:modelValue",!1)})),H((()=>{clearTimeout(s),u()})),{anchorEl:r,canShow:l,anchorEvents:c}}const hr={modelValue:{type:Boolean,default:null}},gr=["update:modelValue","before-show","show","before-hide","hide"];function fr({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:o,processOnMount:a}){const r=O(),{props:s,emit:l,proxy:c}=r;let u;function d(e){if(!0===s.disable||void 0!==t&&!0!==t(e))return;const i=!0===Se(r,"onUpdate:modelValue");!0===i&&(l("update:modelValue",!0),u=e,B((()=>{u===e&&(u=void 0)}))),null!==s.modelValue&&!1!==i||p(e)}function p(t){!0!==(null==e?void 0:e.value)&&(e&&(e.value=!0),l("before-show",t),t&&!0===t.cancel||(void 0!==n?n(t):l("show",t)))}function m(e){if(!0===s.disable)return;const t=!0===Se(r,"onUpdate:modelValue");!0===t&&(l("update:modelValue",!1),u=e,B((()=>{u===e&&(u=void 0)}))),null!==s.modelValue&&!1!==t||v(e)}function v(t){!1!==(null==e?void 0:e.value)&&(e&&(e.value=!1),l("before-hide",t),void 0!==o?o(t):l("hide",t))}function h(t){if(!0===s.disable&&!0===t)!0===Se(r,"onUpdate:modelValue")&&l("update:modelValue",!1);else if(!0===t!==(null==e?void 0:e.value)){(!0===t?p:v)(u)}}L((()=>s.modelValue),h),void 0!==i&&!0===function(e){return void 0!==e.appContext.config.globalProperties.$router}(r)&&L((()=>c.$route),(()=>{!0===i.value&&!0===(null==e?void 0:e.value)&&m()})),!0===a&&N((()=>{h(s.modelValue)}));const g={show:d,hide:m,toggle:function(t){!0===(null==e?void 0:e.value)?m(t):d(t)}};return Object.assign(c,g),g}const yr=[];let br=document.body;const Cr=[];function wr(e,t,i,n){var o,a,r,s;let l=null;(null==(a=null==(o=e.props)?void 0:o.teleport)?void 0:a.to)&&(l=null==(s=null==(r=e.props)?void 0:r.teleport)?void 0:s.to);const c=!0===n&&function(e){for(e=e.parent;null!=e;){if("VcGlobalDialog"===e.type.name)return!0;if("VcDialog"===e.type.name||"VcMenu"===e.type.name)return!1;e=e.parent}return!1}(e),u=h(!1);function d(){var t,i;u.value=!1;const n=Cr.indexOf(e.proxy);var o;n>-1&&Cr.splice(n,1),null===l||(null==(i=null==(t=e.props)?void 0:t.teleport)?void 0:i.to)||(o=l,yr.splice(yr.indexOf(o),1),o.remove(),l=null)}return M(d),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:function(){!1===c&&null===l&&(l=function(e){const t=document.createElement("div");return void 0!==e&&(t.id=e),br.appendChild(t),yr.push(t),t}()),u.value=!0,Cr.push(e.proxy)},hidePortal:d,portalIsActive:u,renderPortal:()=>!0===c?i():!0===u.value?[z(W,{to:l},i())]:void 0}}const Or={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function xr(){let e;return H((()=>{clearTimeout(e)})),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const Sr=[null,document,document.body,document.scrollingElement,document.documentElement];function _r(e,t){let i=function(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch(i){return}const t=!0===T(e)?e.value:e;return t?t.$el||t:void 0}(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return Sr.includes(i)?window:i}let Er,Pr,Tr;function Mr(e){const t=e.split(" ");return 2===t.length&&(!0===["top","center","bottom"].includes(t[0])&&!0===["left","middle","right","start","end"].includes(t[1]))}const Ir={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function jr(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:Ir[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function Lr(e){if(!0===_o().isIOS&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==Pr&&(e.setProperty("--vc-pe-left",t+"px"),Pr=t),i!==Tr&&(e.setProperty("--vc-pe-top",i+"px"),Tr=i)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(void 0===e.absoluteOffset)t=function(e,t){let{top:i,left:n,right:o,bottom:a,width:r,height:s}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],a+=t[1],o+=t[0],r+=t[0],s+=t[1]),{top:i,left:n,right:o,bottom:a,width:r,height:s,middle:n+(o-n)/2,center:i+(a-i)/2}}(e.anchorEl,!0===e.cover?[0,0]:e.offset);else{const{top:i,left:n}=e.anchorEl.getBoundingClientRect(),o=i+e.absoluteOffset.top,a=n+e.absoluteOffset.left;t={top:o,left:a,width:1,height:1,right:a+1,center:o,middle:a,bottom:o+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};!0!==e.fit&&!0!==e.cover||(o.minWidth=t.width+"px",!0===e.cover&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const a={top:0,center:(s=e.el).offsetHeight/2,bottom:s.offsetHeight,left:0,middle:s.offsetWidth/2,right:s.offsetWidth},r={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};var s;!function(e,t,i,n,o){const a=i.bottom,r=i.right,s=function(){if(void 0!==Er)return Er;const e=document.createElement("p"),t=document.createElement("div");uo(e,{width:"100%",height:"200px"}),uo(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),Er=i-n,Er}(),l=window.innerHeight-s,c=document.body.clientWidth;if(e.top<0||e.top+a>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-a):0,e.maxHeight=Math.min(a,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,i),e.top=Math.max(0,i-a)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,l-e.top);if(e.left<0||e.left+r>c)if(e.maxWidth=Math.min(r,c),"middle"===o.horizontal)e.left=t[n.horizontal]>c/2?Math.max(0,c-r):0;else if(t[n.horizontal]>c/2){const i=Math.min(c,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(r,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(r,c-e.left)}(r,t,a,e.anchorOrigin,e.selfOrigin),o={top:r.top+"px",left:r.left+"px"},void 0!==r.maxHeight&&(o.maxHeight=r.maxHeight+"px",t.height>r.maxHeight&&(o.minHeight=o.maxHeight)),void 0!==r.maxWidth&&(o.maxWidth=r.maxWidth+"px",t.width>r.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}["left","middle","right"].forEach((e=>{Ir[`${e}#ltr`]=e,Ir[`${e}#rtl`]=e}));var Ar=F({name:"VcTooltip",inheritAttrs:!1,props:l(s(s(s({},mr),hr),Or),{maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Mr},self:{type:String,default:"top middle",validator:Mr},offset:{type:Array,default:()=>[14,14],validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}}),emits:[...gr],setup(e,{slots:t,emit:i,attrs:n}){let o,a;const r=O(),c=h(null),u=h(!1),d=f((()=>jr(e.anchor,!0))),p=f((()=>jr(e.self,!0))),m=f((()=>!0!==e.persistent)),{registerTick:v,removeTick:g,prepareTick:y}=function(){let e;return H((()=>{e=void 0})),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(void 0!==e){const t=e;B((()=>{e===t&&(e(),e=void 0)}))}}}}(),{registerTimeout:b,removeTimeout:C}=xr(),{transition:w,transitionStyle:x}=function(e,t){const i=h(t.value);return L(t,(e=>{B((()=>{i.value=e}))})),{transition:f((()=>"vc-transition--"+(!0===i.value?e.transitionHide:e.transitionShow))),transitionStyle:f((()=>`--vc-transition-duration: ${e.transitionDuration}ms`))}}(e,u),{localScrollTarget:S,changeScrollEvent:_,unconfigureScrollTarget:E}=function(e,t){const i=h(null);let n;function o(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",o=void 0!==t?t:n;e!==window&&e[i]("scroll",o,po.passive),window[i]("scroll",o,po.passive),n=t}function a(){null!==i.value&&(o(i.value),i.value=null)}const r=L((()=>e.noParentEvent),(()=>{null!==i.value&&(a(),t())}));return H(r),{localScrollTarget:i,unconfigureScrollTarget:a,changeScrollEvent:o}}(e,V),{anchorEl:P,canShow:T,anchorEvents:M}=vr({showing:u,configureAnchorEl:function(){if(!0===e.noParentEvent||void 0===P.value)return;const t=!0===_o().isPhone?[[P.value,"touchstart","delayShow","passive"]]:[[P.value,"mouseenter","delayShow","passive"],[P.value,"mouseleave","delayHide","passive"]];yo(M,"anchor",t)},avoidEmit:void 0}),{show:I,hide:j}=fr({showing:u,canShow:T,handleShow:function(t){g(),C(),A(),v((()=>{a=new MutationObserver((()=>N())),a.observe(c.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),N(),V()})),y(),void 0===o&&(o=L((()=>e.self+"|"+e.anchor),N));b((()=>{i("show",t)}),e.transitionDuration)},handleHide:function(t){g(),C(),k(),b((()=>{D(),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:m,processOnMount:!0});Object.assign(M,{delayShow:function(t){if(!0===_o().isPhone){Eo(),document.body.classList.add("non-selectable");const e=sr(P.value),t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"__delayHide","passiveCapture"]));yo(M,"tooltipTemp",t)}b((()=>{I(t)}),e.delay)},delayHide:function(t){C(),!0===_o().isPhone&&(bo(M,"tooltipTemp"),Eo(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));b((()=>{j(t)}),e.hideDelay)}});const{showPortal:A,hidePortal:D,renderPortal:R}=wr(r,c,(function(){return z(U,{name:w.value,appear:!0},F)}));function k(){void 0!==a&&(a.disconnect(),a=void 0),void 0!==o&&(o(),o=void 0),E(),bo(M,"tooltipTemp")}function N(){const t=c.value;void 0!==P.value&&t&&Lr({el:t,offset:e.offset,anchorEl:P.value,anchorOrigin:d.value,selfOrigin:p.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function V(){if(void 0!==P.value||void 0!==e.scrollTarget){S.value=_r(P.value,e.scrollTarget);const t=!0===e.noParentEvent?N:j;_(S.value,t)}}function F(){return!0===u.value?z("div",l(s({},n),{ref:c,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",n.class],style:x.value,role:"complementary"}),Ea(t.default)):null}return H(k),Object.assign(null==r?void 0:r.proxy,{updatePosition:N}),R}});const Dr=XMLHttpRequest,Rr=Dr.prototype.open,kr=["top","right","bottom","left"];let Br=[],Nr=0;function Vr(e,t){return"number"!=typeof t&&(t=e<25?3*Math.random()+3:e<65?3*Math.random():e<85?2*Math.random():e<99?.6:0),i=e+t,(o=100)<=(n=0)?n:Math.min(o,Math.max(n,i));var i,n,o}var zr=F({name:"VcAjaxBar",props:{position:{type:String,default:"top",validator:e=>kr.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function},emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=O(),n=h(0),o=h(!1),a=h(!0);let r,l,c=0;const u=f((()=>`vc-loading-bar vc-loading-bar--${e.position}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===a.value?"":" no-transition"))),d=f((()=>"top"===e.position||"bottom"===e.position)),p=f((()=>!0===d.value?"height":"width")),m=f((()=>{const t=o.value,i=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:a}){let r=1,s=1;return!0===n?(!0===o&&(r=-1),"bottom"===t&&(s=-1),{transform:`translate3d(${r*(e-100)}%,${i?0:-200*s}%,0)`}):(!0===o&&(s=-1),"right"===t&&(r=-1),{transform:`translate3d(${i?0:a*r*-200}%,${s*(e-100)}%,0)`})}({p:n.value,pos:e.position,active:t,horiz:d.value,reverse:e.reverse,dir:1});return i[p.value]=e.size,i.opacity=t?1:0,i.position="absolute"===e.positioning?"absolute":"fixed",i.backgroundColor=e.color,i})),v=f((()=>!0===o.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"}));function g(e=300){const i=l;return l=Math.max(0,e)||0,c++,c>1?(0===i&&e>0?C():i>0&&e<=0&&clearTimeout(r),c):(clearTimeout(r),t("start"),n.value=0,r=setTimeout((()=>{a.value=!0,e>0&&C()}),!0===o.value?500:1),!0!==o.value&&(o.value=!0,a.value=!1),c)}function y(e){return c>0&&(n.value=Vr(n.value,e)),c}function b(){if(c=Math.max(0,c-1),c>0)return c;clearTimeout(r),t("stop");const e=()=>{a.value=!0,n.value=100,r=setTimeout((()=>{o.value=!1}),1e3)};0===n.value?r=setTimeout(e,1):e()}function C(){n.value<100&&(r=setTimeout((()=>{y(),C()}),l))}let w;return N((()=>{var t;!0!==e.skipHijack&&(w=!0,t={start:g,stop:b,hijackFilter:f((()=>e.hijackFilter||null))},Nr++,Br.push(t),Nr>1||(Dr.prototype.open=function(e,t){const i=[],n=()=>{Br.forEach((e=>{null!==e.hijackFilter.value&&!0!==e.hijackFilter.value(t)||(e.start(),i.push(e.stop))}))},o=()=>{i.forEach((e=>{e()}))};this.addEventListener("loadstart",n,{once:!0}),this.addEventListener("loadend",o,{once:!0}),Rr.apply(this,arguments)}))})),H((()=>{clearTimeout(r),!0===w&&function(e){Br=Br.filter((t=>t.start!==e)),Nr=Math.max(0,Nr-1),0===Nr&&(Dr.prototype.open=Rr)}(g)})),Object.assign(i,{start:g,stop:b,increment:y}),()=>z("div",s({class:u.value,style:m.value},v.value))}});const Fr={dark:{type:Boolean,default:null}};const Hr=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],Ur=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var Wr=F({name:"VcSkeleton",props:l(s({},Fr),{tag:{type:String,default:"div"},type:{type:String,validator:e=>Hr.includes(e),default:"rect"},animation:{type:String,validator:e=>Ur.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String}),setup(e,{slots:t}){const i=function(e){return f((()=>e.dark))}(e),n=f((()=>void 0!==e.size?{width:e.size,height:e.size}:{width:e.width,height:e.height})),o=f((()=>`vc-skeleton vc-skeleton--${!0===i.value?"dark":"light"} vc-skeleton--type-${e.type}`+("none"!==e.animation?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(!0===e.square?" vc-skeleton--square":"")+(!0===e.bordered?" vc-skeleton--bordered":"")));return()=>z(e.tag,{class:o.value,style:n.value},Ea(t.default))}});const Gr=["top","right","bottom","left"],$r={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Gr.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Zr(e,t){return{formClass:f((()=>"vc-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:f((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:f((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(!0===i?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}const Yr=["up","right","down","left"],qr=["left","center","right"];var Xr=F({name:"VcFab",props:l(s(s({},$r),hr),{icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>Yr.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>qr.includes(e)}}),emits:gr,setup(e,{slots:t}){const i=h(null),n=h(!0===e.modelValue),{formClass:o,labelProps:a}=Zr(e,n),r=f((()=>!0!==e.persistent)),{hide:c,toggle:u}=fr({showing:n,hideOnRouteChange:r}),d=f((()=>({opened:n.value}))),p=f((()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${o.value}`+(!0===n.value?" vc-fab--opened":" vc-fab--closed"))),m=f((()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${!0===n.value?"opened":"closed"}`)),v=f((()=>"vc-fab__icon-holder  vc-fab__icon-holder--"+(!0===n.value?"opened":"closed")));function y(i,n){const o=t[i],a=`q-fab__${i} absolute-full`;return void 0===o?z(Ta,{class:a,name:e[i]}):z("div",{class:a},o(d.value))}function b(){const i=[];return!0!==e.hideIcon&&i.push(z("div",{class:v.value},[y("icon"),y("active-icon")])),""===e.label&&void 0===t.label||i[a.value.action](z("div",a.value.data,void 0!==t.label?t.label(d.value):[e.label])),Pa(t.tooltip,i)}return g(le,{showing:n,onChildClick(t){e.hideActionOnClick&&c(t),null!==i.value&&i.value.$el.focus()}}),()=>z("div",{class:p.value},[z(pr,l(s({ref:i,class:o.value},e),{noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":!0===n.value?"true":"false","aria-haspopup":"true",onClick:u}),b),z("div",{class:m.value},Ea(t.default))])}});const Qr={start:"self-end",center:"self-center",end:"self-start"},Jr=Object.keys(Qr);var Kr=F({name:"VcFabAction",props:l(s({},$r),{icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>Jr.includes(e)},to:[String,Object],replace:Boolean}),emits:["click"],setup(e,{slots:t,emit:i}){const n=b(le),{formClass:o,labelProps:a}=Zr(e,null==n?void 0:n.showing),r=f((()=>{let t;return e.anchor&&(t=Qr[e.anchor]),o.value+(void 0!==t?` ${t}`:"")})),c=f((()=>{var t;return!0===e.disable||!0!==(null==(t=null==n?void 0:n.showing)?void 0:t.value)}));function u(e){var t;null==(t=null==n?void 0:n.onChildClick)||t.call(n,e),i("click",e)}function d(){const i=[];return""!==e.icon&&i.push(z(Ta,{name:e.icon})),""!==e.label&&i[a.value.action](z("div",a.value.data,[e.label])),Pa(t.default,i)}const p=O();return Object.assign(null==p?void 0:p.proxy,{click:u}),()=>z(pr,l(s({class:r.value},e),{noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:c.value,size:e.size,onClick:u}),d)}});[pr,Ta,La,Da,ka,Na,za,Ha,Wa,$a,Ya,Xa,Ja,Ka,Ar,zr,Wr,Xr,Kr].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const es=pr,ts=Ta,is=La,ns=Da,os=ka,as=Na,rs=za,ss=Ha,ls=Wa,cs=$a,us=Ya,ds=Xa,ps=Ja,ms=Ka,vs=Ar,hs=zr,gs=Wr,fs=Xr,ys=Kr,bs={beforeLoad:e=>!0,ready:e=>e.viewer instanceof Cesium.Viewer,destroyed:e=>!0},Cs={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},ws=l(s({},bs),{definitionChanged:e=>!0}),Os=l(s({},bs),{errorEvent:e=>!0,readyPromise:(e,t,i)=>!0}),xs=l(s(s({},bs),Cs),{readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0}),Ss=s(s({},bs),Cs),_s=l(s(s({},bs),Cs),{definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,a,r)=>!0}),Es=l(s({},bs),{activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0});var Ps=F({name:"VcViewer",props:ya,emits:l(s({},bs),{cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0}),setup(e,t){const i=O();i.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],i.cesiumMembersEvents=Ca;const n=ba(e,t,i);g(se,n.getServices()),i.appContext.config.globalProperties.$VueCesium=n.getServices(),Object.assign(i.proxy,{creatingPromise:n.creatingPromise,load:n.load,unload:n.unload,reload:n.reload,cesiumObject:i.cesiumObject,getCesiumObject:()=>i.cesiumObject});const o=e=>{t.emit("touchEnd",e)};return()=>{var a;const r=[];return d(e.skeleton)&&!n.isReady.value?r.push(z(gs,l(s({},e.skeleton),{style:{background:e.skeleton.color,width:"100%",height:"100%"}}))):r.push(G("v-if")),r.push(G("vc-viewer"),V(z("div",{ref:n.viewerRef,class:pe((null==(a=i.proxy)?void 0:a.$options.name)||""),id:t.attrs.id||"cesiumContainer",style:t.attrs.style||{width:"100%",height:"100%"}},Ea(t.slots.default)),[[Po,o,e.touchHoldArg]])),r}}});Ps.install=(e,t)=>{e.component(Ps.name,Ps)};const Ts=Ps,Ms=Ts,Is={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length}};function js(e,t){const i=f((()=>{const t=e.position;return{top:t.indexOf("top")>-1,right:t.indexOf("right")>-1,bottom:t.indexOf("bottom")>-1,left:t.indexOf("left")>-1,vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}})),n=h(0),o=h(0),a=h(0),r=h(0),s=f((()=>{let t=0,s=0;const l=i.value;!0===l.top&&0!==n.value?s=`${n.value}px`:!0===l.bottom&&0!==r.value&&(s=-r.value+"px"),!0===l.left&&0!==a.value?t=1*a.value+"px":!0===l.right&&0!==o.value&&(t=-1*o.value+"px");const c={transform:`translate(${t}, ${s})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===l.vertical?(0!==a.value&&(c.right=`${a.value}px`),0!==o.value&&(c.left=`${o.value}px`)):!0===l.horizontal&&(0!==n.value&&(c.top=`${n.value}px`),0!==r.value&&(c.bottom=`${r.value}px`)),c})),l=f((()=>`absolute absolute-${e.position}`));return{attach:i,style:s,classes:l}}const Ls=l(s({enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5}},Is),{outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})}}),As=he(Ls);class Ds{static createTween(e,t){const{Cartesian2:i,Cartesian3:n,defaultValue:o,defined:a,DeveloperError:r,EasingFunction:s,Math:l,SceneMode:c}=Cesium;let u=(t=o(t,{})).destination;if(!a(e))throw new r("scene is required.");if(!a(u))throw new r("destination is required.");const d=e.mode;if(d===c.MORPHING)return Zs();const p=o(t.convert,!0),m=e.mapProjection,v=m.ellipsoid,h=t.maximumHeight,g=t.flyOverLongitude,f=t.flyOverLongitudeWeight,y=t.pitchAdjustHeight;let b=t.easingFunction;p&&d!==c.SCENE3D&&(v.cartesianToCartographic(u,Gs),u=m.project(Gs,$s));const C=e.camera,w=t.endTransform;a(w)&&C._setTransform(w);let O=t.duration;a(O)||(O=Math.ceil(n.distance(C.position,u)/1e6)+2,O=Math.min(O,3));const x=o(t.heading,0),S=o(t.pitch,-l.PI_OVER_TWO),_=o(t.roll,0),E=e.screenSpaceCameraController;E.enableInputs=!1;const P=Ys(E,t.complete),T=Ys(E,t.cancel),M=C.frustum;let I=e.mode===c.SCENE2D;if(I=I&&i.equalsEpsilon(C.position,u,l.EPSILON6),I=I&&l.equalsEpsilon(Math.max(M.right-M.left,M.top-M.bottom),u.z,l.EPSILON6),I=I||e.mode!==c.SCENE2D&&n.equalsEpsilon(u,C.position,l.EPSILON10),I=I&&l.equalsEpsilon(l.negativePiToPi(x),l.negativePiToPi(C.heading),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(S),l.negativePiToPi(C.pitch),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(_),l.negativePiToPi(C.roll),l.EPSILON10),I)return Zs(P,T);const j=new Array(4);if(j[c.SCENE2D]=Ws,j[c.SCENE3D]=Us,j[c.COLUMBUS_VIEW]=zs,O<=0){return Zs((function(){j[d](e,1,u,x,S,_,h,g,f,y)({time:1}),"function"==typeof P&&P()}),T)}const L=j[d](e,O,u,x,S,_,h,g,f,y);if(!a(b)){const e=C.positionCartographic.height;b=e>(d===c.SCENE3D?v.cartesianToCartographic(u).height:u.z)&&e>11500?s.CUBIC_OUT:s.QUINTIC_IN_OUT}return{duration:O,easingFunction:b,startObject:{time:0},stopObject:{time:O},update:L,complete:P,cancel:T}}}const Rs={},ks={};function Bs(e,t,i,n,o){const{Cartesian3:a,defined:r,Math:s}=Cesium;let l=o;const c=Math.max(i,n);if(!r(l)){const i=e.position,n=t,o=e.up,r=e.right,s=e.frustum,c=a.subtract(i,n,Rs),u=a.magnitude(a.multiplyByScalar(o,a.dot(c,o),ks)),d=a.magnitude(a.multiplyByScalar(r,a.dot(c,r),ks));l=Math.min(.2*function(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let a,r,s;if(e instanceof n){const n=Math.tan(.5*e.fovy);return a=e.near,r=e.near*n,s=e.aspectRatio*r,Math.max(t*a/s,i*a/r)}return e instanceof o?(a=e.near,r=e.top,s=e.right,Math.max(t*a/s,i*a/r)):Math.max(t,i)}(s,u,d),1e9)}if(c<l){const e=8,t=1e6,o=-Math.pow((l-i)*t,1/e),a=Math.pow((l-n)*t,1/e);return function(i){const n=i*(a-o)+o;return-Math.pow(n,e)/t+l}}return function(e){return s.lerp(i,n,e)}}function Ns(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const Vs={};function zs(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Vs),p=u.pitch,m=Ns(u.heading,n),v=Ns(u.roll,a),h=Bs(u,i,d.z,i.z,r);return function(e){const r=e.time/t;u.setView({orientation:{heading:c.lerp(m,n,r),pitch:c.lerp(p,o,r),roll:c.lerp(v,a,r)}}),s.lerp(d,i,r,u.position),u.position.z=h(r)}}const Fs={},Hs={};function Us(e,t,i,n,o,a,r,s,l,c){const{Cartesian3:u,Cartographic:d,defined:p,Math:m}=Cesium,v=e.camera,h=e.mapProjection.ellipsoid,g=d.clone(v.positionCartographic,Fs),f=v.pitch,y=Ns(v.heading,n),b=Ns(v.roll,a),C=h.cartesianToCartographic(i,Hs);g.longitude=m.zeroToTwoPi(g.longitude),C.longitude=m.zeroToTwoPi(C.longitude);let w=!1;if(p(s)){const e=m.zeroToTwoPi(s),t=Math.min(g.longitude,C.longitude),i=Math.max(g.longitude,C.longitude),n=e>=t&&e<=i;if(p(l)){const e=Math.abs(g.longitude-C.longitude),t=m.TWO_PI-e;(n?e:t)<(n?t:e)*l&&!n&&(w=!0)}else n||(w=!0)}w?function(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}(g,C):function(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}(g,C);const O=Bs(v,i,g.height,C.height,r),x=function(e,t,i,n){const{defined:o,Math:a}=Cesium;if(o(n)&&i(.5)>n){const n=i(0),o=i(1),r=i(.5),s=r-n,l=r-o;return function(r){const c=i(r);if(r<=.5){const t=(c-n)/s;return a.lerp(e,-a.PI_OVER_TWO,t)}const u=(c-o)/l;return a.lerp(-a.PI_OVER_TWO,t,1-u)}}return function(i){return a.lerp(e,t,i)}}(f,o,O,c);return function(){const i=g.longitude,o=C.longitude,r=g.latitude,s=C.latitude;return function(l){const c=l.time/t,d=u.fromRadians(m.lerp(i,o,c),m.lerp(r,s,c),O(c),e.globe.ellipsoid);v.setView({destination:d,orientation:{heading:m.lerp(y,n,c),pitch:x(c),roll:m.lerp(b,a,c)}})}}()}function Ws(e,t,i,n,o,a,r){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Vs),p=Ns(u.heading,n),m=u.frustum.right-u.frustum.left,v=Bs(u,i,m,i.z,r);return function(e){const o=e.time/t;u.setView({orientation:{heading:c.lerp(p,n,o)}}),s.lerp(d,i,o,u.position);const a=v(o),r=u.frustum,l=r.top/r.right,m=.5*(a-(r.right-r.left));r.right+=m,r.left-=m,r.top=l*r.right,r.bottom=-r.top}}const Gs={},$s={};function Zs(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function Ys(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}const qs=l(s({},bs),{compassEvt:e=>!0});var Xs=F({name:"VcCompass",props:Ls,emits:qs,setup(e,t){var i;const n=O();n.cesiumClass="VcCompass";const o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),r=Pe(n),{$services:c}=o,u=function(e,{emit:t},i){const n={},o={},a={},r={};let s,l,c,u,d;const p=h(0),m=h(0),v=h(0);let g,f,y=0,b={},w=!1,O=0,x={},S=0;const _=h(null),E=h(null),P=()=>{v.value=0,m.value=0},T=()=>{const{defined:e}=Cesium;e(i.viewer)?(s&&(s(),s=void 0),s=i.viewer.scene.postRender.addEventListener((function(){p.value!==i.viewer.scene.camera.heading&&(p.value=i.viewer.scene.camera.heading)}))):s&&(s(),s=void 0)},M=(e,s)=>{const{Cartesian2:p,Cartesian3:h,defined:g,getTimestamp:f,Math:C,Matrix4:O,Ray:x,SceneMode:S,Transforms:_}=Cesium;let E=i.viewer.scene,T=E.camera;const M=E.screenSpaceCameraController;if(E.mode===S.MORPHING||!M.enableInputs)return;switch(E.mode){case S.COLUMBUS_VIEW:if(M.enableLook)break;if(!M.enableTranslate||!M.enableTilt)return;break;case S.SCENE3D:if(M.enableLook)break;if(!M.enableTilt||!M.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!M.enableTranslate)return}const I=_e(i,"compassEvt");I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"start",target:e}),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",u,!1),document.removeEventListener("touchmove",c,!1),document.removeEventListener("touchend",u,!1),g(d)&&i.viewer.clock.onTick.removeEventListener(d),c=void 0,u=void 0,d=void 0,y=f();const j=new p;j.x=E.canvas.clientWidth/2,j.y=E.canvas.clientHeight/2;const L=new x,A=T.getPickRay(j,L),D=E.globe.pick(A,E,r);function R(e,t){const i=Math.atan2(-e.y,e.x);m.value=C.zeroToTwoPi(i-C.PI_OVER_TWO);const n=p.magnitude(e),o=t/2,a=Math.min(n/o,1),r=.5*a*a+.5;v.value=r}g(D)?(b=_.eastNorthUpToFixedFrame(D||new Cesium.Cartesian3,E.globe.ellipsoid,a),w=!1):(b=_.eastNorthUpToFixedFrame(T.positionWC,E.globe.ellipsoid,a),w=!0),d=function(e){const t=f(),n=(t-y)*(2.5*(v.value-.5)/1e3),a=m.value+C.PI_OVER_TWO,r=Math.cos(a)*n,s=Math.sin(a)*n;E=i.viewer.scene,T=E.camera;const l=O.clone(T.transform,o);T.lookAtTransform(b),w?(T.look(h.UNIT_Z,-r),T.look(T.right,-s)):(T.rotateLeft(r),T.rotateUp(s)),T.lookAtTransform(l),y=t},c=function(i){const o=e.getBoundingClientRect(),a=new p((o.right-o.left)/2,(o.bottom-o.top)/2);let r;i instanceof MouseEvent?r=new p(i.clientX-o.left,i.clientY-o.top):i instanceof TouchEvent&&(r=new p(i.changedTouches[0].clientX-o.left,i.changedTouches[0].clientY-o.top)),R(p.subtract(r,a,n),o.width),I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"changing",target:e})},u=function(n){document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",u,!1),document.removeEventListener("touchmove",c,!1),document.removeEventListener("touchend",u,!1),g(d)&&i.viewer.clock.onTick.removeEventListener(d),c=void 0,u=void 0,d=void 0,P(),I&&t("compassEvt",{type:"orbit",camera:E.camera,status:"end",target:e})},document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",u,!1),document.addEventListener("touchmove",c,!1),document.addEventListener("touchend",u,!1),l=i.viewer.clock.onTick.addEventListener(d),R(s,e.getBoundingClientRect().width)},I=(s,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1);const{Cartesian2:p,Cartesian3:m,defined:v,Math:h,Matrix4:y,Ray:b,Transforms:C}=Cesium;f=void 0,g=void 0;const w=_e(i,"compassEvt");w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:s}),O=Math.atan2(-l.y,l.x);const _=new p;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new b,P=u.getPickRay(_,E),T=c.globe.pick(P,c,r);x=v(T)?C.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,a):C.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,a);let M=y.clone(u.transform,o);u.lookAtTransform(x),S=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(M),f=function(e){const a=s.getBoundingClientRect(),r=new p((a.right-a.left)/2,(a.bottom-a.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-a.left,e.clientY-a.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top));const d=p.subtract(l,r,n),m=Math.atan2(-d.y,d.x)-O,v=h.zeroToTwoPi(S-m);u=i.viewer.scene.camera,M=y.clone(u.transform,o),u.lookAtTransform(x);const g=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-g),u.lookAtTransform(M),w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:s})},g=function(e){document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),f=void 0,g=void 0,w&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:s})},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("touchend",g,!1)};return{heading:p,orbitCursorAngle:m,orbitCursorOpacity:v,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:a,defined:s,Ellipsoid:l,Matrix4:c,Ray:u,SceneMode:d,Transforms:p}=Cesium,{viewer:m}=i,v=m.scene,h=v.camera,g=v.screenSpaceCameraController;if(v.mode===d.MORPHING||!g.enableInputs)return!0;if(v.mode===d.COLUMBUS_VIEW&&!g.enableTranslate)return;if(v.mode===d.SCENE3D||v.mode===d.COLUMBUS_VIEW){if(!g.enableLook)return;if(v.mode===d.SCENE3D&&!g.enableRotate)return}const f=new o;f.x=v.canvas.clientWidth/2,f.y=v.canvas.clientHeight/2;const y=new u,b=h.getPickRay(f,y),w=v.globe.pick(b,v,r);if(!C(w)||!s(w))return void m.camera.flyHome();const O=_e(i,"compassEvt");O&&t("compassEvt",{type:"reset",camera:m.camera,status:"start",target:n.currentTarget});const x=p.eastNorthUpToFixedFrame(w,m.scene.globe.ellipsoid),S=a.subtract(w,h.position,new a),_=Ds.createTween(v,{destination:c.multiplyByPoint(x,new a(0,0,a.magnitude(S)),new a),direction:c.multiplyByPointAsVector(x,new a(0,0,-1),new a),up:c.multiplyByPointAsVector(x,new a(0,1,0),new a),duration:e.duration,complete:()=>{O&&t("compassEvt",{type:"reset",camera:m.camera,status:"end",target:n.currentTarget})},cancel:()=>{O&&t("compassEvt",{type:"reset",camera:m.camera,status:"cancel",target:n.currentTarget})}});v.tweens.add(_)},handleMouseDown:e=>{var t,o;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Ee(_))||t.hide(),null==(o=Ee(E))||o.hide();const{SceneMode:a,Cartesian2:r}=Cesium;if(i.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=s.getBoundingClientRect(),c=l.width/2,u=new r((l.right-l.left)/2,(l.bottom-l.top)/2);let d;e instanceof MouseEvent?d=new r(e.clientX-l.left,e.clientY-l.top):e instanceof TouchEvent&&(d=new r(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top));const p=r.subtract(d,u,n),m=r.magnitude(p)/c;if(m<50/145)M(s,p);else{if(!(m<1))return!0;I(s,p)}},resetRotater:P,onTooltipBeforeShow:e=>{void 0===f&&void 0===c||(e.cancel=!0)},viewerChange:T,load:async e=>(i.viewer=e,T(),!0),unload:async()=>(document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",u,!1),document.removeEventListener("touchmove",c,!1),document.removeEventListener("touchend",u,!1),l&&l(),s&&s(),!0),iconOuterTooltipRef:_,iconInnerTooltipRef:E}}(e,t,n),d=js(e),p=h(null),m=h(null),v="VcNavigation"===(null==(i=r.proxy)?void 0:i.$options.name),g=h(v),y=k({});L((()=>e),(e=>{B((()=>{n.mounted&&P()}))}),{deep:!0});const b=f((()=>Object.assign({},As.innerOptions,e.innerOptions))),w=f((()=>Object.assign({},As.outerOptions,e.outerOptions))),x=f((()=>Object.assign({},As.markerOptions,e.markerOptions))),S=f((()=>({transform:"translate(-50%,-50%) rotate(-"+u.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+u.heading.value+"rad)",opacity:void 0,background:w.value.background,color:w.value.color}))),_=f((()=>({transform:"rotate(-"+u.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+u.orbitCursorAngle.value+"rad)",opacity:u.orbitCursorOpacity.value,color:x.value.color}))),E=f((()=>({background:b.value.background,color:b.value.color})));n.createCesiumObject=async()=>{g.value=!0;const{viewer:e}=c;return new Promise(((t,i)=>{B((()=>{if(v)t(Ee(p));else{e._element.appendChild(Ee(p)),t(Ee(p))}}))}))},n.mount=async()=>{var e;P();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(p)}),u.load(c.viewer)},n.unmount=async()=>{var e;const{viewer:t}=c,i=t._element;return v||i.contains(Ee(p))&&i.removeChild(Ee(p)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(p)}),u.unload()};const P=()=>{var e;const t=d.style.value;y.left=t.left,y.top=t.top,y.transform=t.transform;const i=d.attach.value,n=null==(e=Ee(m))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(y,t)};return()=>{if(g.value){let i=[];return i=Pa(t.slots.default,i),i.push(z(es,{ref:m,class:"vc-compass-outerRing absolute-center",style:S.value,size:w.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},(()=>[z(ts,{size:w.value.size,name:w.value.icon}),w.value.tooltip?z(vs,l(s({ref:u.iconOuterTooltipRef},w.value.tooltip),{onBeforeShow:u.onTooltipBeforeShow}),(()=>z("strong",{},w.value.tooltip.tip||a("vc.navigation.compass.outerTip")))):G("v-if")]))),i.push(z(es,{class:"vc-compass-innerRing absolute-center",style:E.value,size:b.value.size,dense:!0,round:!0},(()=>[z(ts,{size:b.value.size,name:b.value.icon}),b.value.tooltip?z(vs,l(s({ref:u.iconInnerTooltipRef},b.value.tooltip),{onBeforeShow:u.onTooltipBeforeShow}),(()=>z("strong",{},b.value.tooltip.tip||a("vc.navigation.compass.innerTip")))):G("v-if")]))),i.push(_.value.opacity?z(es,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},(()=>[z(ts,{size:x.value.size,name:x.value.icon,style:_.value})])):G("v-if")),z("div",{ref:p,class:"vc-compass "+d.classes.value,style:y,onDblclick:u.handleDoubleClick,onMousedown:u.handleMouseDown,onMouseup:u.resetRotater,onTouchend:u.resetRotater,onTouchstart:u.handleMouseDown},i)}return G("v-if")}}});const Qs=l(s({enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:19059568.5}})},overrideViewerCamera:{type:Boolean,default:!1}},Is),{background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})}}),Js=he(Qs);const Ks=l(s({},bs),{zoomEvt:e=>!0});var el=F({name:"VcZoomControl",props:Qs,emits:Ks,setup(e,t){var i;const n=O();n.cesiumClass="VcZoomControl",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),{$services:r}=o,l=function(e,{emit:t},i,n){const o=h(null),a=h(null),r=h(null),s=(r,s)=>{var c,u;null==(c=Ee(o))||c.hide(),null==(u=Ee(a))||u.hide();const{Cartesian3:d,defined:p,IntersectionTests:m,Ray:v,SceneMode:h}=Cesium,{viewer:g}=n;if(p(g)){const n=g.scene,o=n.screenSpaceCameraController;if(!o.enableInputs||!o.enableZoom)return;if(n.mode===h.COLUMBUS_VIEW&&!o.enableTranslate)return;const a=n.camera;let c;switch(n.mode){case h.MORPHING:break;case h.SCENE2D:a.zoomIn(a.positionCartographic.height*(1-r));break;default:{let o;if(o=p(g.trackedEntity)?new Cesium.Cartesian3:l(g.scene),Cesium.defined(o))c={direction:a.direction,up:a.up};else{const e=new v(a.worldToCameraCoordinatesPoint(n.globe.ellipsoid.cartographicToCartesian(a.positionCartographic)),a.directionWC);o=m.grazingAltitudeLocation(e,n.globe.ellipsoid),c={heading:a.heading,pitch:a.pitch,roll:a.roll}}const u=new d,f=d.subtract(a.position,o,u),y=d.multiplyByScalar(f,r,f),b=d.add(o,y,o),C=r<1?"zoomIn":"zoomOut",w=s.currentTarget,O=Ke(a.positionCartographic.height).toFixed(0),x=_e(i,"zoomEvt");x&&t("zoomEvt",{type:C,camera:g.camera,status:"start",target:w,level:O}),Cesium.defined(g.trackedEntity)||n.mode===h.COLUMBUS_VIEW?a.position=b:a.flyTo({destination:b,orientation:c,duration:e.duration,convert:!1,complete:()=>{x&&t("zoomEvt",{type:C,camera:g.camera,status:"end",target:w,level:O})},cancel:()=>{x&&t("zoomEvt",{type:C,camera:g.camera,status:"cancel",target:w,level:O})}})}}}},l=e=>{const{defined:t,IntersectionTests:i,Ray:n}=Cesium,o=new n(e.camera.positionWC,e.camera.directionWC),a=i.rayEllipsoid(o,e.globe.ellipsoid);return t(a)?n.getPoint(o,a.start):i.grazingAltitudeLocation(o,e.globe.ellipsoid)};return{zoomIn:t=>{s(1/e.zoomAmount,t)},zoomOut:t=>{s(e.zoomAmount,t)},zoomReset:o=>{var a;null==(a=Ee(r))||a.hide();const{viewer:s}=n;if(s.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(s.trackedEntity)){const e=s.trackedEntity;s.trackedEntity=void 0,s.trackedEntity=e}else{const n=_e(i,"zoomEvt"),a=o.currentTarget,r=Ke(s.camera.positionCartographic.height).toFixed(0);n&&t("zoomEvt",{type:"zoomReset",camera:s.camera,status:"start",target:a,level:r});const l=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:s.camera,status:"end",target:a,level:r})},c=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:s.camera,status:"cancel",target:a,level:r})},u=e.defaultResetView,d={duration:e.durationReset,complete:l,cancel:c};Ue(s,u,d)}},zoomInTooltipRef:o,zoomOutTooltipRef:a,resetTooltipRef:r}}(e,t,n,r),c=js(e),u=h(null),d=h(null),p=h(null),m=h(null),v="VcNavigation"===(null==(i=Pe(n).proxy)?void 0:i.$options.name),g=h(v),y=k({});L((()=>e),(e=>{B((()=>{n.mounted&&x()}))}),{deep:!0});const b=f((()=>Object.assign({},Js.zoomOutOptions,e.zoomOutOptions))),C=f((()=>Object.assign({},Js.zoomInOptions,e.zoomInOptions))),w=f((()=>Object.assign({},Js.zoomResetOptions,e.zoomResetOptions)));n.createCesiumObject=async()=>new Promise(((t,i)=>{g.value=!0,B((()=>{const{viewer:i}=r;if(e.overrideViewerCamera){He(i,e.defaultResetView)}if(v)t(Ee(u));else{i._element.appendChild(Ee(u)),t(Ee(u))}}))})),n.mount=async()=>{var e;x();const{viewer:t}=r;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(u)}),!0},n.unmount=async()=>{var e;const{viewer:t}=r;if(!v){const e=t._element;e.contains(Ee(u))&&e.removeChild(Ee(u))}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(u)}),!0};const x=()=>{var t,i,n;const o=c.style.value;if(y.left=o.left,y.top=o.top,y.transform=o.transform,o.flexDirection="vertical"===e.direction?"column":"row",o.background=e.background,o.borderRadius=e.borderRadius,o.border=e.border,!v){const a=null==(t=Ee(d))?void 0:t.$el,r=null==(i=Ee(p))?void 0:i.$el,s=null==(n=Ee(m))?void 0:n.$el;let l=0,u=0;if(void 0!==a){const t=a.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,u=t.height>u?t.height:u):(u+=t.height,l=t.width>l?t.width:l)}if(void 0!==r){const t=r.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,u=t.height>u?t.height:u):(u+=t.height,l=t.width>l?t.width:l)}if(void 0!==s){const t=s.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,u=t.height>u?t.height:u):(u+=t.height,l=t.width>l?t.width:l)}o.width=`${l+4}px`,o.height=`${u+4}px`;const v=c.attach.value;!v.bottom&&!v.top||v.left||v.right||(o.left="50%",o.transform="translate(-50%, 0)"),!v.left&&!v.right||v.top||v.bottom||(o.top="50%",o.transform="translate(0, -50%)")}Object.assign(y,o)},S=(e,i)=>{var n,o,r;let c,u,v,h;"zoomIn"===i?(c=d,u=l.zoomInTooltipRef,v=(null==(n=e.tooltip)?void 0:n.tip)||a("vc.navigation.zoomCotrol.zoomInTip"),h=l.zoomIn):"zoomOut"===i?(c=m,u=l.zoomOutTooltipRef,v=(null==(o=e.tooltip)?void 0:o.tip)||a("vc.navigation.zoomCotrol.zoomOutTip"),h=l.zoomOut):"zoomReset"===i&&(c=p,u=l.resetTooltipRef,v=(null==(r=e.tooltip)?void 0:r.tip)||a("vc.navigation.zoomCotrol.zoomResetTip"),h=l.zoomReset);const g=[];g.push(z(ts,{name:e.icon,size:e.size})),g.push(z("div",null,e.label)),e.tooltip?g.push(z(vs,s({ref:u},e.tooltip),(()=>z("strong",null,v)))):g.push(G("v-if"));return z(es,{class:`vc-${pe(i)}`,ref:c,size:e.size,flat:e.flat,stack:e.stack,round:e.round,dense:!0,style:{color:e.color,background:e.background},onClick:h},(()=>Pa(t.slots.default,g)))};return()=>{if(g.value){const t=[];return t.push(z("li",null,S(C.value,"zoomIn"))),e.enableResetButton?t.push(z("li",null,S(w.value,"zoomReset"))):t.push(G("v-if")),t.push(z("li",null,S(b.value,"zoomOut"))),z("div",{ref:u,class:"vc-zoom-control "+c.classes.value,style:y},z("ul",{class:"vc-list"},t))}return G("v-if")}}});const tl=F({name:"VcPrintView",props:{options:Object},setup(e){const t=h(!1),i=h(!1);O().cesiumClass="VcPrintView";const{t:n}=eo(),o=()=>{var n,o;if(t.value)return;const a=null==(n=e.options)?void 0:n.printWindow.document.getElementsByTagName("img");if(0===a.length)return;let s=!0;for(let e=0;s&&e<a.length;++e)s=a[e].complete;s&&(r(),t.value=s,t.value&&!i.value&&((null==(o=e.options)?void 0:o.readyCallback)&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let a;const r=()=>{a&&a()};return N((()=>{var t;const i=null==(t=e.options)?void 0:t.printWindow,n=window,r=null==i?void 0:i.setInterval(o,200),s=n.setInterval(o,200);a=()=>{i.clearInterval(r),n.clearInterval(s),a=void 0}})),M((()=>{r()})),()=>{var t,i,o,a,r,s;const l=[];if(l.push(z("p",{},z("img",{src:null==(t=e.options)?void 0:t.image,alt:n("vc.navigation.screenshot"),class:"vc-map-image"}))),(null==(i=e.options)?void 0:i.credits.length)&&(null==(o=e.options)?void 0:o.showCredit)?l.push(z("h1",{},n("vc.navigation.credit"))):l.push(G("v-if")),(null==(a=e.options)?void 0:a.credits.length)&&(null==(r=e.options)?void 0:r.showCredit)){const t=[];null==(s=e.options)||s.credits.forEach((e=>{t.push(z("li",{innerHTML:e}))})),l.push(z("ul",{},t))}else l.push(G("v-if"));return z("div",{},l)}}});var il=l(s({showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1}},Is),{icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String});const nl=l(s({},bs),{printEvt:e=>!0});var ol=F({name:"VcPrint",props:il,emits:nl,setup(e,t){var i;const n=O();n.cesiumClass="VcPrint",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),{$services:r}=o,l=h(null),c=h(null),u=h(null),p=js(e),m=h(!1),v="VcNavigation"===(null==(i=Pe(n).proxy)?void 0:i.$options.name),g=h(v),f=k({});L((()=>e),(e=>{B((()=>{n.mounted&&y()}))}),{deep:!0}),n.createCesiumObject=async()=>new Promise(((e,t)=>{g.value=!0,B((()=>{const{viewer:t}=r;if(v)e(Ee(l));else{t._element.appendChild(Ee(l)),e(Ee(l))}}))})),n.mount=async()=>{var e;y();const{viewer:t}=r;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(l)}),!0},n.unmount=async()=>{var e;const t=r.viewer._element;v||t.contains(Ee(l))&&t.removeChild(Ee(l));const{viewer:i}=r;return null==(e=i.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(l)}),!0};const y=()=>{var e;const t=p.style.value;if(f.left=t.left,f.top=t.top,f.transform=t.transform,!v){const i=p.attach.value;void 0!==(null==(e=Ee(u))?void 0:e.$el)&&(!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"))}Object.assign(f,t)},b=()=>{var i;null==(i=Ee(c))||i.hide();const{viewer:o}=r;(function(e){const t=e.scene,i=new Promise(((t,i)=>{const n=e.scene.postRender.addEventListener((()=>{n();try{const i=e.scene.canvas;t(i.toDataURL("image/png"))}catch(Rh){i(Rh)}}))}));return t.render(e.clock.currentTime),i})(o).then((i=>{if(e.downloadAutomatically){const t=document.createElement("a");t.download=e.screenshotName||a("vc.navigation.print.screenshot"),t.style.display="none",t.href=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?w(i):e.printAutomatically&&C(i));_e(n,"printEvt")&&t.emit("printEvt",{type:"capture",image:i,status:"end"})}))},C=e=>{x(!0,!0,e)},w=e=>{x(!1,!1,e)},x=(t,i,n)=>{let s;m.value=!0,t&&(s=document.createElement("iframe"),document.body.appendChild(s));const{viewer:l}=r;(e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",(()=>{i(t)})),t.document.open(),t.document.close(),t.document.head.innerHTML=`\n    <meta charset="UTF-8">\n    <title>${e.title}</title>\n    <style>\n  .background {\n    width: 100%;\n    fill: rgba(255, 255, 255, 1.0);\n  }\n\n  .map-image {\n    max-width: 95vw;\n    max-height: 95vh;\n  }\n\n  .layer-legends {\n    display: inline;\n    float: left;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n\n  .layer-title {\n    font-weight: bold;\n  }\n\n  h1, h2, h3 {\n    clear: both;\n  }\n</style>\n    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,$(tl,{options:e}).mount(t.document.getElementById("print"))})({image:n,showCredit:e.showCredit,credits:S(l),printWindow:s?s.contentWindow:void 0,title:a("vc.navigation.print.printViewTitle"),readyCallback:e=>{i&&function(e){const t=To();let i=0;const n=setTimeout((function(){t.reject(!1)}),1e4);function o(){clearTimeout(n)}function a(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener((function(e){o(),e.matches?++i:(--i,a())})),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,a()},e.document.execCommand("print",!0,null)||e.print(),t.promise}(e).catch((e=>{o.logger.warn(e)})).then((()=>{s&&document.body.removeChild(s),t&&(m.value=!1)}))},closeCallback:e=>{t&&(m.value=!1)}}),t||(m.value=!1)},S=e=>e.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(e.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map((e=>e.html)),_=e=>{m.value&&(e.cancel=!0)};return()=>{if(g.value){const t=[];t.push(z(ts,{name:e.icon,size:e.size})),t.push(z("div",null,e.label)),d(e.tooltip)?t.push(z(vs,s({ref:c,onBeforeShow:_},e.tooltip),(()=>z("strong",null,d(e.tooltip)&&e.tooltip.tip||a("vc.navigation.print.printTip"))))):t.push(G("v-if"));const i=[z(es,{ref:u,size:e.size,disabled:m.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:b},(()=>t))];return z("div",{ref:l,class:"vc-print "+p.classes.value,style:f},i)}return G("v-if")}}}),al=l(s({geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:12.5},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,description:Function},Is),{icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"}});const rl=l(s({},bs),{locationEvt:e=>!0});var sl=F({name:"VcMyLocation",props:al,emits:rl,setup(e,t){var i;const n=O();n.cesiumClass="VcMyLocation",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const{$services:a}=o,{t:r}=eo(),l=h(null),c=h(null),m=h(null),v=h(!1),g=js(e),y="VcNavigation"===(null==(i=Pe(n).proxy)?void 0:i.$options.name),b=h(y),C=k({});let w,x;L((()=>e),(e=>{B((()=>{n.mounted&&_()}))}),{deep:!0});const S=f((()=>v.value?r("vc.navigation.myLocation.positioning"):d(e.tooltip)&&e.tooltip.tip||r("vc.navigation.myLocation.myLocationTip")));n.createCesiumObject=async()=>{b.value=!0;const{viewer:t}=a,{CustomDataSource:i}=Cesium,n=t.dataSources.getByName("__vc-myLocation__");let r;if(n.length?w=n[0]:t.dataSources.add(new i("__vc-myLocation__")).then((e=>{w=e})),e.amap&&e.amap.key){const t=e.amap.options;r=new Promise(((i,n)=>{var a,r;Z.load({key:null==(a=e.amap)?void 0:a.key,version:null==(r=e.amap)?void 0:r.version,plugins:["AMap.Geolocation"]}).then((e=>{x=new e.Geolocation(t),i(x)})).catch((e=>{o.logger.error(e),n(e)}))}))}const s=new Promise(((e,t)=>{B((()=>{if(y)e(Ee(l));else{a.viewer._element.appendChild(Ee(l)),e(Ee(l))}}))}));return Promise.all([s,r]).then((e=>e[0]))},n.mount=async()=>{var e;_();const{viewer:t}=a;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(l)}),!0},n.unmount=async()=>{var e;const{viewer:t}=a;if(x){const e=document.getElementsByTagName("script"),t=[];for(const i of e)i.src.indexOf("/webapi.amap.com/maps")>-1&&t.push(i);t.forEach((e=>{document.getElementsByTagName("body")[0].removeChild(e)}))}const i=a.viewer._element;return y||i.contains(Ee(l))&&i.removeChild(Ee(l)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(l)}),t.dataSources.remove(w,!0)};const _=()=>{var e;const t=g.style.value;if(C.left=t.left,C.top=t.top,C.transform=t.transform,!y){const i=g.attach.value,n=null==(e=Ee(m))?void 0:e.$el;void 0!==n&&(n.getBoundingClientRect(),!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"))}Object.assign(C,t)},E=()=>{var t;if(null==(t=Ee(c))||t.hide(),v.value=!0,u(e.customAPI)){const t=e.customAPI(M);P(t)}else x&&e.amap&&e.amap.key?x.getCurrentPosition(((t,i)=>{var n;if("complete"===t){let t=[i.position.lng,i.position.lat];(null==(n=e.amap)?void 0:n.transformToWGS84)&&(t=Vo(t[0],t[1])),P({lng:t[0],lat:t[1],address:i.formattedAddress},i)}else M(r("vc.navigation.myLocation.fail"),i.message)})):e.geolocation?navigator.geolocation.getCurrentPosition((e=>{P({lng:e.coords.longitude,lat:e.coords.latitude},e)}),M,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):M(r("vc.navigation.myLocation.fail"))},P=(i,o)=>{var l;const c=i.lng,u=i.lat,d=i.address,{Rectangle:m,sampleTerrain:h,defined:g,SceneMode:f}=Cesium,{viewer:y}=a;w.entities.removeAll();const b=w.entities.add({id:e.id,position:Me([c,u],y.scene.globe.ellipsoid),point:{color:ke(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:ke(e.outlineColor)},properties:s({},o),description:(null==(l=e.description)?void 0:l.call(this,i,o))||T({[r("vc.navigation.myLocation.lng")]:c,[r("vc.navigation.myLocation.lat")]:u,[r("vc.navigation.myLocation.address")]:d})}),C=_e(n,"locationEvt");C&&t.emit("locationEvt",{type:"location",position:i,detail:o,entity:b});const O={duration:e.duration};if(g(e.maximumHeight)&&(O.maximumHeight=e.maximumHeight),g(e.hpr)&&p(e.hpr)&&(O.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),y.scene.mode===f.SCENE2D||y.scene.mode===f.COLUMBUS_VIEW)return y.flyTo(b,O).then((()=>{v.value=!1,C&&t.emit("locationEvt",{type:"zoomIn",camera:y.camera,status:"end"})}));const x=e.factor,S=m.fromDegrees(c-x,u-x,c+x,u+x),_=y.scene.camera,E=_.getRectangleCameraCoordinates(S),P=y.scene.globe.ellipsoid.cartesianToCartographic(E);return h(y.scene.globe.terrainProvider,e.level,[m.center(S)]).then((function(i){const n={longitude:P.longitude,latitude:P.latitude,height:P.height+i[0].height},o=y.scene.globe.ellipsoid.cartographicToCartesian(n);C&&t.emit("locationEvt",{type:"zoomIn",camera:y.camera,status:"start"}),_.flyTo({duration:e.duration,destination:o,complete:()=>{v.value=!1,C&&t.emit("locationEvt",{type:"zoomIn",camera:y.camera,status:"end"})},cancel:()=>{v.value=!1,C&&t.emit("locationEvt",{type:"zoomIn",camera:y.camera,status:"cancel"})}})}))},T=(e,t)=>{let i="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n===t)continue;let o=e[n];"object"==typeof o&&(o=T(o)),n=n.replace(/_/g," "),Cesium.defined(o)&&(i+="<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i},M=(...e)=>{v.value=!1,o.logger.error(...e)},I=e=>{v.value&&(e.cancel=!0)};return()=>{if(b.value){const t=[];return t.push(z(ts,{name:e.icon,size:e.size})),t.push(z("div",null,e.label)),d(e.tooltip)?t.push(z(vs,s({ref:c,onBeforeShow:I},e.tooltip),(()=>z("strong",null,S.value)))):t.push(G("v-if")),z("div",{ref:l,class:"vc-my-location "+g.classes.value,style:C},[z(es,{ref:m,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:v.value,dense:!0,style:{color:e.color,background:e.background},onClick:E},{default:()=>t,loading:()=>z((()=>{switch(e.loadingType){case"bars":default:return ns;case"ios":return ss;case"orbit":return ls;case"oval":return cs;case"puff":return us;case"tail":return ps}})())})])}return G("v-if")}}});class ll{constructor(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array}getHeight(e,t){return cl(this).then((function(i){return ul(i,e,t)}))}getHeights(e){return cl(this).then((function(t){for(let i=0;i<e.length;++i){const n=e[i];n.height=ul(t,n.longitude,n.latitude)}return e}))}}async function cl(e){const{defined:t}=Cesium;t(e.data)||(e.data=function(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const t=new Uint8Array(i);for(let e=0;e<t.length;e+=2){const i=t[e];t[e]=t[e+1],t[e+1]=i}e.data=new Int16Array(i)}return e.data}function ul(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720);let a=1440*(t=n.zeroToTwoPi(t))/n.TWO_PI;a<0?a=0:a>1440&&(a=1440);const r=0|a,s=0|o,l=a-r,c=o-s,u=1-l,d=1-c;return(dl(e,s,r)*u*d+dl(e,s,r+1)*l*d+dl(e,s+1,r)*u*c+dl(e,s+1,r+1)*l*c)/100}function dl(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[1440*t+i]}class pl{constructor(e){const{Cartographic:t,knockout:i}=Cesium,n=e.gridFileUrl;n&&(this.geoidModel=new ll(n)),this.proj4Projection=e.proj4Projection,this.projectionUnits=e.projectionUnits,this.proj4longlat=e.proj4longlat,this.lastHeightSamplePosition=new t,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=q(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=e.decimal||5,this.rangeType=e.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(e,t){const{Cartographic:i,defined:n,EllipsoidTerrainProvider:o,Intersections2D:a,SceneMode:r}=Cesium,s=e.scene,l=s.camera.getPickRay(t),c=s.globe,u=c.pickTriangle(l,s);if(n(u)){const e=c.ellipsoid,t=e.cartesianToCartographic(u.v0),n=e.cartesianToCartographic(u.v1),d=e.cartesianToCartographic(u.v2),p=e.cartesianToCartographic(s.mode===r.SCENE3D?u.intersection:s.globe.pick(l,s));let m;if(c.terrainProvider instanceof o)p.height=void 0;else{const e=a.computeBarycentricCoordinates(p.longitude,p.latitude,t.longitude,t.latitude,n.longitude,n.latitude,d.longitude,d.latitude);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const i=e.x*t.height+e.y*n.height+e.z*d.height;p.height=i}const i=c.terrainProvider.getLevelMaximumGeometricError(u.tile.level),o=p.height,r=Math.max(u.tile.data.tileBoundingRegion.minimumHeight,o-i),s=Math.min(u.tile.data.tileBoundingRegion.maximumHeight,o+i),l=r-(this.geoidModel?this.geoidModel.minimumHeight:0),v=s+(this.geoidModel?this.geoidModel.maximumHeight:0);m=Math.max(Math.abs(o-l),Math.abs(v-o))}i.clone(p,this.lastHeightSamplePosition);const v=c.terrainProvider;this.cartographicToFields(p,m),v instanceof o||this.debounceSampleAccurateHeight(v,p)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(e,t){const{Math:i}=Cesium,n=i.toDegrees(e.latitude),o=i.toDegrees(e.longitude);if(this.useProjection){const e=function(e,t,i,n,o){const a=1+Math.floor((e+180)/6),r=Y(n,i+" +zone="+a+(t<0?" +south":""),[e,t]);return{utmZone:a+(t<0?"S":"N"),north:r[1].toFixed(2)+o,east:r[0].toFixed(2)+o}}(o,n,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=e.utmZone,this.north=e.north,this.east=e.east}const a=function(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:a}=Cesium,r=o(i,{}),s=o(r.decimal,5);return 0===r.rangeType?(n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E")):1===r.rangeType?(n.latitude=t.toFixed(s)+"°",n.longitude=e.toFixed(s)+"°"):2===r.rangeType&&(n.latitude=t.toFixed(s)+"°",n.longitude=(e<0?360+e:e).toFixed(s)+"°"),a(r.height)?n.elevation=Math.round(r.height)+(a(r.errorBar)?"±"+Math.round(r.errorBar):"")+"m":n.elevation="",n}(o,n,{height:e.height,errorBar:t,decimal:this.decimal,rangeType:this.rangeType});this.latitude=a.latitude,this.longitude=a.longitude,this.elevation=a.elevation}sampleAccurateHeight(e,t){const{Cartographic:i,sampleTerrainMostDetailed:n,when:o}=Cesium;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);const a=i.clone(t),r=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,s=n(e,[a]);this.tileRequestInFlight=Promise.all([r,s]).then((e=>{const n=e[0]||0;this.tileRequestInFlight=void 0,i.equals(t,this.lastHeightSamplePosition)&&(t.height=a.height-n,this.cartographicToFields(t))})).catch((()=>{this.tileRequestInFlight=void 0}))}}const ml=[],vl={start:0,stop:0},hl={},gl={},fl={};function yl(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:a,DeveloperError:r,IntersectionTests:s,SceneMode:l}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(e,t,c,u){if(!a(e))throw new r("ray is required");if(!a(t))throw new r("scene is required");c=n(c,!0);const d=t.mode,p=t.mapProjection,m=ml;m.length=0;const v=this._surface._tilesToRender;let h,g,f,y=v.length;for(g=0;g<y;++g){h=v[g];const t=h.data;if(!a(t))continue;const n=t.pickBoundingSphere;d!==l.SCENE3D?(i.fromRectangleWithHeights2D(h.rectangle,p,t.minimumHeight,t.maximumHeight,n),o.fromElements(n.center.z,n.center.x,n.center.y,n.center)):i.clone(t.boundingSphere3D,n);const r=s.raySphere(e,n,vl);a(r)&&m.push(h)}for(m.sort(function(e){const{BoundingSphere:t}=Cesium;return function(i,n){return t.distanceSquaredTo(i.data.pickBoundingSphere,e)-t.distanceSquaredTo(n.data.pickBoundingSphere,e)}}(e.origin)),y=m.length,g=0;g<y;++g)if(f=m[g].data.pickTriangle(e,t.mode,t.mapProjection,c,u),a(f)){f.tile=m[g];break}return f},t.prototype.pickTriangle=t.prototype.pickTriangle||function(e,t,i,n){const r=this.renderedMesh;if(!a(r))return;const l=r.vertices,c=r.indices,u=r.encoding,d=c.length;for(let p=0;p<d;p+=3){const r=c[p],d=c[p+1],m=c[p+2],v=bl(u,t,i,l,r,hl),h=bl(u,t,i,l,d,gl),g=bl(u,t,i,l,m,fl),f=s.rayTriangle(e,v,h,g,n,new o);if(a(f))return{intersection:f,v0:v,v1:h,v2:g}}}}function bl(e,t,i,n,o,a){e.decodePosition(n,o,a);const{Cartesian3:r,defined:s,SceneMode:l}=Cesium;if(s(t)&&t!==l.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(a);i.project(e,a),r.fromElements(a.z,a.x,a.y,a)}return a}var Cl={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})}};const wl=l(s({},bs),{statusBarEvt:e=>!0});var Ol=F({name:"VcStatusBar",props:Cl,emits:wl,setup(e,t){var i;const n=O();n.cesiumClass="VcStatusBar",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const a=Pe(n),{$services:r}=o,l=h(null),c=h(null),{t:u}=eo();let p=-1,m=-1;const v=k({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),g=k({fps:"NaN",ms:"NaN"}),f=h(),y=js(e),b="VcNavigation"===(null==(i=a.proxy)?void 0:i.$options.name),C=h(b),w=k({});L((()=>e),(e=>{B((()=>{n.mounted&&x()}))}),{deep:!0}),n.createCesiumObject=async()=>{C.value=!0;const{viewer:t}=r,i=t._element;return e.showMouseInfo&&(f.value=new pl({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),i.addEventListener("wheel",E,!1),i.addEventListener("mousemove",E,!1),i.addEventListener("touchmove",E,!1),yl()),e.showCameraInfo&&(t.camera.changed.addEventListener(_),_()),e.showPerformanceInfo&&(t.scene.debugShowFramesPerSecond=!0,t.scene.postRender.addEventListener(S)),new Promise(((e,i)=>{B((()=>{var i,n,o;if(b)e(null==(o=Ee(l))?void 0:o.$el);else{t._element.appendChild(null==(i=Ee(l))?void 0:i.$el),e(null==(n=Ee(l))?void 0:n.$el)}}))}))},n.mount=async()=>{var e,t;x();const{viewer:i}=r;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:n.cesiumClass,status:"mounted",target:null==(e=Ee(l))?void 0:e.$el}),!0},n.unmount=async()=>{var t,i,o,a;const{viewer:s}=r,c=s._element;return e.showMouseInfo&&(f.value=void 0,c.removeEventListener("wheel",E),c.removeEventListener("mousemove",E),c.removeEventListener("touchmove",E)),e.showCameraInfo&&s.camera.changed.removeEventListener(_),e.showPerformanceInfo&&(s.scene._performanceDisplay&&(s.scene._performanceDisplay._container.style.display="block"),s.scene.postRender.removeEventListener(S)),b||c.contains(null==(t=Ee(l))?void 0:t.$el)&&c.removeChild(null==(i=Ee(l))?void 0:i.$el),null==(a=s.viewerWidgetResized)||a.raiseEvent({type:n.cesiumClass,status:"unmounted",target:null==(o=Ee(l))?void 0:o.$el}),!0};const x=()=>{const t=y.style.value;w.left=t.left,w.top=t.top,w.transform=t.transform,t.background=e.background,t.color=e.color;const i=y.attach.value;!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"),Object.assign(w,t)},S=wo((e=>{var t,i;g.fps=null==(t=e._performanceDisplay)?void 0:t._fpsText.nodeValue,g.ms=null==(i=e._performanceDisplay)?void 0:i._msText.nodeValue,e._performanceDisplay._container.style.display="none"}),500),_=()=>{const{viewer:e}=r,{Math:t}=Cesium;v.heading=t.toDegrees(e.camera.heading).toFixed(1),v.pitch=t.toDegrees(e.camera.pitch).toFixed(1),v.roll=t.toDegrees(e.camera.roll).toFixed(1),v.height=e.camera.positionCartographic.height.toFixed(2),v.level=Ke(Number(v.height)).toFixed(0)},E=i=>{var o;const{Cartesian2:a,SceneMode:s}=Cesium,{viewer:l}=r;if(l.scene.mode===s.MORPHING)return;const c="mousemove"===i.type||"wheel"===i.type?i.clientX:i.changedTouches[0].clientX,u="mousemove"===i.type||"wheel"===i.type?i.clientY:i.changedTouches[0].clientY;if(c===p&&u===m)return;p=c,m=u;const d=l._element;if(l){if(e.showMouseInfo){const e=d.getBoundingClientRect(),t=new a(c-e.left,u-e.top);null==(o=f.value)||o.updateCoordinatesFromCesium(l,t)}_e(n,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:f.value,cameraInfo:v,performanceInfo:g})}},P=()=>{var t,i;e.useProjection&&(null==(t=Ee(c))||t.hide(),e.showMouseInfo&&(null==(i=f.value)||i.toggleUseProjection()))};return Object.assign(n.proxy,{getMouseCoordsInfo:()=>f.value,getCameraInfo:()=>v,getPerformanceInfo:()=>g}),()=>{var i,n,o,a,r,p,m,h;if(C.value){const b=[];return e.showMouseInfo?((null==(i=f.value)?void 0:i.useProjection)?b.push(z("div",{class:"vc-section-short ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.zone")),z("span",null,null==(a=f.value)?void 0:a.utmZone)]),z("div",{class:"vc-section ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.e")),z("span",null,null==(r=f.value)?void 0:r.east)]),z("div",{class:"vc-section ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.n")),z("span",null,null==(p=f.value)?void 0:p.north)])):b.push(z("div",{class:"vc-section ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.lng")),z("span",{},null==(n=f.value)?void 0:n.longitude)]),z("div",{class:"vc-section ellipsis"},[z("span",{},u("vc.navigation.statusBar.lat")),z("span",{},null==(o=f.value)?void 0:o.latitude)])),(null==(m=f.value)?void 0:m.elevation)?b.push(z("div",{class:"vc-section ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.elev")),z("span",{},null==(h=f.value)?void 0:h.elevation)])):b.push(G("v-if"))):b.push(G("v-if")),e.showCameraInfo?b.push(z("div",{class:"vc-section-short-mini ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.level")),z("span",null,v.level)]),z("div",{class:"vc-section-short ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.heading")),z("span",null,`${v.heading}°`)]),z("div",{class:"vc-section-short ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.pitch")),z("span",null,`${v.pitch}°`)]),z("div",{class:"vc-section-short ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.roll")),z("span",null,`${v.roll}°`)]),z("div",{class:"vc-section ellipsis"},[z("span",s({},t.attrs),u("vc.navigation.statusBar.cameraHeight")),z("span",null,`${v.height}m`)])):b.push(G("v-if")),e.showPerformanceInfo?b.push(z("div",{class:"vc-section-short-mini ellipsis"},[z("span",null,g.ms)]),z("div",{class:"vc-section-short-mini ellipsis"},[z("span",null,g.fps)])):b.push(G("v-if")),d(e.tooltip)&&e.showMouseInfo&&e.useProjection?b.push(z(vs,s({ref:c},e.tooltip),(()=>z("strong",null,d(e.tooltip)&&e.tooltip.tip||u("vc.navigation.statusBar.tip"))))):b.push(G("v-if")),z(es,{ref:l,class:"vc-status-bar "+y.classes.value,style:w,noCaps:!0,onClick:P},(()=>b))}return G("v-if")}}}),xl={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"}};const Sl=l(s({},bs),{distanceLegendEvt:e=>!0});var _l=F({name:"VcDistanceLegend",props:xl,emits:Sl,setup(e,t){var i;const n=O();n.cesiumClass="VcDistanceLegend",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const a=Pe(n),{$services:r}=o,s=h(null),l=h(""),c=js(e),u="VcNavigation"===(null==(i=a.proxy)?void 0:i.$options.name),d=h(u),p=k({});let m=0;const v=h(0);let g=0;L((()=>e),(e=>{B((()=>{n.mounted&&b()}))}),{deep:!0});const y=f((()=>({width:`${v.value}px`,left:5+(e.width+15-v.value)/2+"px",height:"2px",background:e.barBackground})));n.createCesiumObject=async()=>(d.value=!0,l.value="",new Promise(((e,t)=>{B((()=>{var t,i,n;const{viewer:o}=r;if(u)e(null==(n=Ee(s))?void 0:n.$el);else{o._element.appendChild(null==(t=Ee(s))?void 0:t.$el),e(null==(i=Ee(s))?void 0:i.$el)}o.scene.postRender.addEventListener(C)}))}))),n.mount=async()=>{var e,t;b();const{viewer:i}=r;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:n.cesiumClass,status:"mounted",target:null==(e=Ee(s))?void 0:e.$el}),!0},n.unmount=async()=>{var e,t,i,o;const{viewer:a}=r;a.scene.postRender.removeEventListener(C);const l=a._element;return u||l.contains(null==(e=Ee(s))?void 0:e.$el)&&l.removeChild(null==(t=Ee(s))?void 0:t.$el),null==(o=a.viewerWidgetResized)||o.raiseEvent({type:n.cesiumClass,status:"unmounted",target:null==(i=Ee(s))?void 0:i.$el}),!0};const b=()=>{const t=c.style.value;p.left=t.left,p.top=t.top,p.transform=t.transform,t.background=e.background,t.color=e.color;const i=c.attach.value;!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)"),t.width=`${e.width}px`,Object.assign(p,t)},C=wo((i=>{const{Cartesian2:o,defined:a,getTimestamp:r,EllipsoidGeodesic:s}=Cesium,c=r();if(c<m+250)return;m=c;const u=new s,d=i.canvas.clientWidth,p=i.canvas.clientHeight,h=i.camera.getPickRay(new o(d/2|0,p-1)),f=i.camera.getPickRay(new o(1+d/2|0,p-1)),y=i.globe,b=y.pick(h,i),C=y.pick(f,i);if(!a(b)||!a(C))return v.value=0,void(l.value="");const w=y.ellipsoid.cartesianToCartographic(b),O=y.ellipsoid.cartesianToCartographic(C);u.setEndPoints(w,O);const x=u.surfaceDistance,S=e.width-10;let _;for(let e=El.length-1;!a(_)&&e>=0;--e)if(El[e]/x<S&&(_=El[e],g!==_)){g=_;_e(n,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:g,status:"changed"})}if(a(_)){let e;e=g>=1e3?(_/1e3).toString()+" km":_.toString()+" m",v.value=_/x|0,l.value=e}else v.value=0,l.value=""}),500);return()=>d.value&&void 0!==l.value?z(es,{ref:s,class:"vc-distance-legend "+c.classes.value,style:p,stack:!0,noCaps:!0},(()=>[z("label",null,l.value),z("div",{style:y.value,class:"vc-bar"})])):G("v-if")}});const El=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],Pl=l(s({},Is),{compassOpts:{type:[Object,Boolean],default:()=>he(Ls,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>he(Qs,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>he(il,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>he(al,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:he(Cl,["position","offset"]),distancelegendOpts:he(xl,["position","offset"])})}}),Tl=he(Pl);var Ml=F({name:"VcNavigation",inheritAttrs:!1,props:Pl,emits:l(s({},bs),{zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0}),setup(e,t){const i=O();i.cesiumClass="VcNavigation";const n=ao(e,t,i);if(void 0===n)return;const o=h(!1),{$services:a}=n,r=js(e),c=js(e.otherOpts||{position:"bottom-right"}),u=h(null),d=h(null),p=h(null),m=h(null),v=h(null),g=h(null),y=h(null),b=h(null),C=k({}),w=k({}),{emit:x}=t;L((()=>e),(()=>{B((()=>{var e,t,i,n,o,a;V(),null==(e=Ee(p))||e.reload(),null==(t=Ee(m))||t.reload(),null==(i=Ee(g))||i.reload(),null==(n=Ee(v))||n.reload(),null==(o=Ee(y))||o.reload(),null==(a=Ee(b))||a.reload()}))}),{deep:!0});const S=f((()=>Object.assign({},Tl.compassOpts,e.compassOpts))),_=f((()=>Object.assign({},Tl.zoomOpts,e.zoomOpts))),E=f((()=>Object.assign({},Tl.printOpts,e.printOpts))),P=f((()=>Object.assign({},Tl.locationOpts,e.locationOpts))),T=f((()=>Object.assign({},Tl.otherOpts,e.otherOpts))),M=e=>{_e(i,"compassEvt")&&x("compassEvt",e)},I=e=>{_e(i,"zoomEvt")&&x("zoomEvt",e)},j=e=>{_e(i,"printEvt")&&x("printEvt",e)},A=e=>{_e(i,"locationEvt")&&x("locationEvt",e)},D=e=>{_e(i,"statusBarEvt")&&x("statusBarEvt",e)},R=e=>{_e(i,"distanceLegendEvt")&&x("distanceLegendEvt",e)};i.createCesiumObject=async()=>{var e;o.value=!0;const{viewer:t}=a;return null==(e=t.viewerWidgetResized)||e.addEventListener(N),new Promise(((e,i)=>{B((()=>{const i=t._element;i.appendChild(Ee(u)),Ee(d)&&i.appendChild(Ee(d)),e([Ee(u),Ee(d)])}))}))},i.mount=async()=>{var e;V();const{viewer:t}=a;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Ee(u)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=a,o=n._element;return o.contains(Ee(u))&&o.removeChild(Ee(u)),o.contains(Ee(d))&&o.removeChild(Ee(d)),null==(e=n.viewerWidgetResized)||e.removeEventListener(N),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Ee(u)}),!0};const N=()=>{B((()=>{V()}))},V=()=>{var e,t,i,n,o;const a=null==(e=Ee(p))?void 0:e.$el;let s=0,l=0;if(void 0!==a){const e=getComputedStyle(a.parentNode).margin;l=parseInt(e),s+=a.getBoundingClientRect().height+2*l}const u=null==(t=Ee(m))?void 0:t.$el;void 0!==u&&(s+=u.getBoundingClientRect().height+2*l);const d=null==(i=Ee(v))?void 0:i.$el;void 0!==d&&(s+=d.getBoundingClientRect().height+2*l);const h=null==(n=Ee(g))?void 0:n.$el;void 0!==h&&(s+=h.getBoundingClientRect().height+2*l);const f=r.style.value,b=r.attach.value;C.left=f.left,C.top=f.top,C.transform=f.transform,!b.bottom&&!b.top||b.left||b.right||(f.left="50%",f.transform="translate(-50%, 0)"),!b.left&&!b.right||b.top||b.bottom||(f.top="50%",f.transform="translate(0, -50%)"),Object.assign(C,f,{height:`${s}px`});const O=c.style.value,x=c.attach.value;w.left=O.left,w.top=O.top,w.transform=O.transform,!x.bottom&&!x.top||x.left||x.right||(O.left="50%",O.transform="translate(-50%, 0)"),!x.left&&!x.right||x.top||x.bottom||(O.top="50%",O.transform="translate(0, -50%)");let S=0;const _=null==(o=Ee(y))?void 0:o.$el;void 0!==_&&(S+=_.getBoundingClientRect().height),Object.assign(w,O,{height:`${S}px`})};return()=>{if(o.value){const i=[];S.value&&!1!==e.compassOpts?i.push(z("div",{class:"vc-navigation-control"},[z(Xs,l(s({ref:p},S.value),{onCompassEvt:M}))])):i.push(G("v-if")),_.value&&!1!==e.zoomOpts?i.push(z("div",{class:"vc-navigation-control"},[z(el,l(s({ref:m},_.value),{onZoomEvt:I}))])):i.push(G("v-if")),E.value&&!1!==e.printOpts?i.push(z("div",{class:"vc-navigation-control"},[z(ol,l(s({ref:v},E.value),{onPrintEvt:j}))])):i.push(G("v-if")),P.value&&!1!==e.locationOpts?i.push(z("div",{class:"vc-navigation-control"},[z(sl,l(s({ref:g},P.value),{onLocationEvt:A}))])):i.push(G("v-if"));let n=[z("div",{class:"vc-navigation-controls"},i)];n=Pa(t.slots.default,n);const o=[];return o.push(z("div",{ref:u,class:"vc-navigation "+r.classes.value,style:C},n)),!1!==e.otherOpts&&o.push(z("div",{ref:d,class:"vc-location-other-controls "+c.classes.value,style:w},[z(Ol,l(s({ref:y},T.value.statusBarOpts),{onStatusBarEvt:D})),z(_l,l(s({ref:b},T.value.distancelegendOpts),{onDistanceLegendEvt:R}))])),o}return G("v-if")}}});function Il(e,{emit:t},i){const n={},o={},a={},r={};let s,l,c,u;const d=h(0);let p,m,v,g,f,y=0,b={},w=0,O={},x=0;const S=h(56),_=h(3);let E;const P=h(null),T=()=>{const{defined:e}=Cesium;e(i.viewer)?(s&&(s(),s=void 0),s=i.viewer.scene.postRender.addEventListener((function(){d.value!==i.viewer.scene.camera.heading&&(d.value=i.viewer.scene.camera.heading)}))):s&&(s(),s=void 0)},M=(e,n)=>{const{defined:o,getTimestamp:a,SceneMode:r,Math:s,ScreenSpaceEventType:d}=Cesium,p=i.viewer.scene,m=p.screenSpaceCameraController;if(p.mode===r.MORPHING||!m.enableInputs)return;switch(p.mode){case r.COLUMBUS_VIEW:if(m.enableLook)break;if(!m.enableTranslate||!m.enableTilt)return;break;case r.SCENE3D:if(m.enableLook)break;if(!m.enableTilt||!m.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!m.enableTranslate)return}v.removeInputAction(d.LEFT_UP),o(u)&&i.viewer.clock.onTick.removeEventListener(u),c=void 0,u=void 0,a();let h=s.PI_OVER_TWO-Math.atan2(-n.y,n.x);const g=Math.PI/4;let f=0;const y=1,b=2,C=3,w=4;f=h>=-g&&g>=h?w:h>=g&&3*g>=h?b:h>=3*g&&5*g>=h?C:y;const O=_e(i,"compassEvt");let x="rotateEast";switch(f){case y:x="rotateWest";break;case b:x="rotateEast";break;case C:x="rotateNorth";break;case w:x="rotateSouth"}O&&t("compassEvt",{type:x,camera:p.camera,status:"start",target:e}),u=function(n){const o=i.viewer.scene,r=o.camera;switch(a(),h=20*Math.abs(r.positionCartographic.height/6378317)*5e-4,f){case y:r.rotateLeft(h);break;case b:r.rotateRight(h);break;case C:r.rotate(r.right,-h);break;case w:r.rotate(r.right,h)}O&&t("compassEvt",{type:x,camera:o.camera,status:"changing",target:e})},c=function(n){v.removeInputAction(d.LEFT_UP),o(u)&&i.viewer.clock.onTick.removeEventListener(u),c=void 0,u=void 0,O&&t("compassEvt",{type:x,camera:p.camera,status:"end",target:e})},v.setInputAction(c,d.LEFT_UP),l=i.viewer.clock.onTick.addEventListener(u)},I=(s,l)=>{if(!e.enableCompassOuterRing)return;const c=i.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",m,!1),document.removeEventListener("touchmove",m,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchend",p,!1);const{Cartesian2:v,Cartesian3:h,defined:g,Math:f,Matrix4:C,Ray:O,Transforms:x}=Cesium;m=void 0,p=void 0;const S=_e(i,"compassEvt");S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:s}),y=Math.atan2(-l.y,l.x);const _=new v;_.x=c.canvas.clientWidth/2,_.y=c.canvas.clientHeight/2;const E=new O,P=u.getPickRay(_,E),T=c.globe.pick(P,c,r);b=g(T)?x.eastNorthUpToFixedFrame(T||new h,c.globe.ellipsoid,a):x.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,a);let M=C.clone(u.transform,o);u.lookAtTransform(b),w=Math.atan2(u.position.y,u.position.x),h.magnitude(new h(u.position.x,u.position.y,0)),u.lookAtTransform(M),m=function(e){const a=s.getBoundingClientRect(),r=new v((a.right-a.left)/2,(a.bottom-a.top)/2);let l;e instanceof MouseEvent?l=new v(e.clientX-a.left,e.clientY-a.top):e instanceof TouchEvent&&(l=new v(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top));const d=v.subtract(l,r,n),p=Math.atan2(-d.y,d.x)-y,m=f.zeroToTwoPi(w-p);u=i.viewer.scene.camera,M=C.clone(u.transform,o),u.lookAtTransform(b);const h=Math.atan2(u.position.y,u.position.x);u.rotateRight(m-h),u.lookAtTransform(M),S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:s})},p=function(e){document.removeEventListener("mousemove",m,!1),document.removeEventListener("touchmove",m,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchend",p,!1),m=void 0,p=void 0,S&&t("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:s})},document.addEventListener("mousemove",m,!1),document.addEventListener("touchmove",m,!1),document.addEventListener("mouseup",p,!1),document.addEventListener("touchend",p,!1)},j=(e,a)=>{const{Cartesian2:r,defined:s,Math:l,Matrix4:c,ScreenSpaceEventType:u,Transforms:d}=Cesium;v.removeInputAction(u.MOUSE_MOVE),v.removeInputAction(u.LEFT_UP),g=void 0,f=void 0,x=l.PI_OVER_TWO-Math.atan2(-a.y,a.x),x=x<0?0:x,x=x>l.PI_OVER_TWO?l.PI_OVER_TWO:x;const p=i.viewer.scene,m=p.camera,h=new r;h.x=p.canvas.clientWidth/2,h.y=p.canvas.clientHeight/2;let y=m.pickEllipsoid(h,p.globe.ellipsoid);if(!s(y))for(;h.y<p.canvas.clientHeight;)h.y+=5,y=m.pickEllipsoid(h,p.globe.ellipsoid);const b=_e(i,"compassEvt");b&&t("compassEvt",{type:"tilt",camera:p.camera,status:"start",target:e}),C(y)&&s(y)&&(O=d.eastNorthUpToFixedFrame(y,p.globe.ellipsoid)),g=a=>{const s=e.getBoundingClientRect(),u=new Cesium.Cartesian2((s.right-s.left)/2,(s.bottom-s.top)/2),d=r.clone(a.endPosition),m=r.subtract(d,u,n);let v=l.PI_OVER_TWO-Math.atan2(-m.y,m.x);v=v<0?0:v,v=v>l.PI_OVER_TWO?l.PI_OVER_TWO:v;const h=i.viewer.scene.camera,g=c.clone(h.transform,o);h.lookAtTransform(O);const f=v-x;h.rotateUp(f),x=v,h.lookAtTransform(g);let y=Math.ceil(v/(Math.PI/40));y=y>19?19:y;const C=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][y];S.value=C.x,_.value=C.y,b&&t("compassEvt",{type:"tilt",camera:p.camera,status:"changing",target:e})},f=function(i){v.removeInputAction(u.MOUSE_MOVE),v.removeInputAction(u.LEFT_UP),g=void 0,f=void 0,b&&t("compassEvt",{type:"tilt",camera:p.camera,status:"end",target:e})},v.setInputAction(g,u.MOUSE_MOVE),v.setInputAction(f,u.LEFT_UP)};return{heading:d,handleDoubleClick:n=>{const{Cartesian2:o,Cartesian3:a,defined:s,Matrix4:l,Ray:c,SceneMode:u,Transforms:d}=Cesium,{viewer:p}=i,m=p.scene,v=m.camera,h=m.screenSpaceCameraController;if(m.mode===u.MORPHING||!h.enableInputs)return!0;if(m.mode===u.COLUMBUS_VIEW&&!h.enableTranslate)return;if(m.mode===u.SCENE3D||m.mode===u.COLUMBUS_VIEW){if(!h.enableLook)return;if(m.mode===u.SCENE3D&&!h.enableRotate)return}const g=new o;g.x=m.canvas.clientWidth/2,g.y=m.canvas.clientHeight/2;const f=new c,y=v.getPickRay(g,f),b=m.globe.pick(y,m,r);if(!s(b))return void p.camera.flyHome();const C=_e(i,"compassEvt");C&&t("compassEvt",{type:"reset",camera:p.camera,status:"start",target:n.currentTarget});const w=d.eastNorthUpToFixedFrame(b||new a,p.scene.globe.ellipsoid),O=a.subtract(b||new a,v.position,new a),x=Ds.createTween(m,{destination:l.multiplyByPoint(w,new a(0,0,a.magnitude(O)),new a),direction:l.multiplyByPointAsVector(w,new a(0,0,-1),new a),up:l.multiplyByPointAsVector(w,new a(0,1,0),new a),duration:e.duration,complete:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"end",target:n.currentTarget})},cancel:()=>{C&&t("compassEvt",{type:"reset",camera:p.camera,status:"cancel",target:n.currentTarget})}});m.tweens.add(x)},handleMouseDown:e=>{var t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Ee(P))||t.hide();const{Cartesian2:o,SceneMode:a,Math:r}=Cesium;if(i.viewer.scene.mode===a.MORPHING)return!0;const s=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),c=new o((l.right-l.left)/2,(l.bottom-l.top)/2);let u;e instanceof MouseEvent?(u=new o(e.clientX-l.left,e.clientY-l.top),E=new o(e.clientX,e.clientY)):e instanceof TouchEvent&&(u=new o(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top),E=new o(e.changedTouches[0].clientX,e.changedTouches[0].clientY));const d=o.subtract(u,c,n),p=o.magnitude(d);if(p>30&&p<45)I(s,d);else if(p>50&&p<70){const e=r.PI_OVER_TWO-Math.atan2(-d.y,d.x);e>=0&&e<=r.PI_OVER_TWO&&j(s,d)}else M(s,d)},handleMouseUp:e=>{const{Cartesian2:t,Math:o}=Cesium,a=e.currentTarget.getBoundingClientRect(),r=new t((a.right-a.left)/2,(a.bottom-a.top)/2),s="mouseup"===e.type?new t(e.clientX-a.left,e.clientY-a.top):new t(e.changedTouches[0].clientX-a.left,e.changedTouches[0].clientY-a.top),l=t.subtract(s,r,n),c=t.magnitude(l);if(c>30&&c<45){const n=o.toDegrees(Math.atan2(-l.y,l.x)),a="mouseup"===e.type?new t(e.clientX,e.clientY):new t(e.changedTouches[0].clientX,e.changedTouches[0].clientY),r=a.x-E.x,s=a.y-E.y;if(Math.sqrt(r*r+s*s)>5)return;const c=o.toDegrees(d.value),u=Math.abs(n-c),p=i.viewer.scene;(n>0&&c>0&&c<90&&u>80&&u<100||u>260&&u<280)&&p.camera.flyTo({destination:p.camera.position,orientation:{heading:0,pitch:p.camera.pitch}})}},onTooltipBeforeShow:e=>{void 0!==m&&(e.cancel=!0)},viewerChange:T,load:async(e,t)=>(i.viewer=e,d.value=e.scene.camera.heading,T(),v=new Cesium.ScreenSpaceEventHandler(t),(()=>{const{Math:e}=Cesium,t=e.PI_OVER_TWO+i.viewer.scene.camera.pitch,n=Math.PI/2/20;let o=Math.floor(t/n);o=o>19?19:o,o=o<0?0:o,S.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].x,_.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].y})(),!0),unload:async()=>(document.removeEventListener("mousemove",m,!1),document.removeEventListener("touchmove",m,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchend",p,!1),l&&l(),s&&s(),null==v||v.destroy(),!0),tiltbarLeft:S,tiltbarTop:_,tooltipRef:P}}var jl=F({name:"VcCompassSm",props:s({enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0}},Is),emits:l(s({},bs),{compassEvt:e=>!0}),setup(e,t){var i;const n=O();n.cesiumClass="VcCompassSm";const o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),r=Pe(n),{$services:c}=o,u=Il(e,t,n),d=js(e),p=h(null),m=h(null),v="VcNavigationSm"===(null==(i=r.proxy)?void 0:i.$options.name),g=h(v),y=k({});L((()=>e),(e=>{B((()=>{n.mounted&&x()}))}),{deep:!0});const b=f((()=>({left:u.tiltbarLeft.value+"px",top:u.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"}))),C=f((()=>({visibility:e.autoHidden?"hidden":"visible"}))),w=f((()=>({transform:"rotate(-"+u.heading.value+"rad)",WebkitTransform:"rotate(-"+u.heading.value+"rad)"})));n.createCesiumObject=async()=>{g.value=!0;const{viewer:e}=c;return new Promise(((t,i)=>{B((()=>{if(v)t(Ee(p));else{e._element.appendChild(Ee(p)),t(Ee(p))}}))}))},n.mount=async()=>{var e;x();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(p)}),u.load(c.viewer,Ee(p))},n.unmount=async()=>{var e;const{viewer:t}=c,i=t._element;return v||i.contains(Ee(p))&&i.removeChild(Ee(p)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(p)}),u.unload()};const x=()=>{const e=d.style.value;y.left=e.left,y.top=e.top,y.transform=e.transform;const t=d.attach.value,i=Ee(m);if(void 0!==i){const n=null==i?void 0:i.getBoundingClientRect();e.width=`${null==n?void 0:n.width}px`,e.height=`${null==n?void 0:n.height}px`,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(y,e)};return()=>{if(g.value){let i=[];return i=Pa(t.slots.default,i),i.push(z("div",{class:"vc-compass-tilt-sm",style:C.value})),i.push(z("div",{class:"vc-compass-tiltbar-sm",style:b.value})),i.push(z("div",{class:"vc-compass-arrows-sm",style:C.value})),i.push(z("div",{ref:m,class:"vc-compass-outer-ring-sm",style:w.value},e.tooltip?z(vs,l(s({ref:u.tooltipRef},e.tooltip),{onBeforeShow:u.onTooltipBeforeShow}),(()=>z("strong",{},e.tooltip.tip||a("vc.navigationSm.compass.outerTip")))):G("v-if"))),i.push(z("div",{class:"vc-arrows-e-sm",style:C.value})),i.push(z("div",{class:"vc-arrows-n-sm",style:C.value})),i.push(z("div",{class:"vc-arrows-s-sm",style:C.value})),i.push(z("div",{class:"vc-arrows-w-sm",style:C.value})),z("div",{ref:p,class:"vc-compass-sm "+d.classes.value,style:y,onDblclick:u.handleDoubleClick,onMousedown:u.handleMouseDown,onMouseup:u.handleMouseUp,onTouchend:u.handleMouseUp,onTouchstart:u.handleMouseDown},i)}return G("v-if")}}});var Ll=F({name:"VcZoomControlSm",props:l(s({},Is),{autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}}),emits:l(s({},bs),{zoomEvt:e=>!0}),setup(e,t){var i;const n=O();n.cesiumClass="VcZoomControlSm",n.cesiumEvents=[];const o=h(null),a=h(null),r=h(null),c=h(null),u="VcNavigationSm"===(null==(i=Pe(n).proxy)?void 0:i.$options.name),d=h(u),p=k({}),m=ao(e,t,n);if(void 0===m)return;const{t:v}=eo(),{$services:g}=m,y=js(e),b=function(e,{emit:t},i,n){const o=h(65),a=h(null),r=h(null),s=h(null);let l,c,u,d,p,m,v,g,f,y,b,w;const O=e=>{const{Cartesian2:o,Cartesian3:a,defined:r,Ellipsoid:s,Math:l}=Cesium,{viewer:c}=n,u=c.scene,d=u.camera,p=u.canvas,m=new o;m.x=p.clientWidth/2,m.y=p.clientHeight/2;const v=x(m);if(r(v)){const n=a.distance(d.position,v);let o=.0618*e*.2;o=n>300?o:2*o;const s=n*o,u=new a;a.subtract(v,d.position,u);const p=a.clone(d.right),h=a.dot(u,p),g=new a;a.multiplyByScalar(p,h,g),a.subtract(u,g,u),a.normalize(u,u),d.move(u,s);const f=new a;a.normalize(v,f);const y=d.pickEllipsoid(m,c.scene.globe.ellipsoid);if(C(y)&&r(y)&&!isNaN(y.x)&&!isNaN(y.y)&&!isNaN(y.z)&&!(d.positionCartographic.height<0)){a.normalize(y,y);const n=a.angleBetween(f,y);if(!l.equalsEpsilon(n,0,l.EPSILON10)){const o=a.cross(f,y,new a);d.rotate(o,n),_e(i,"zoomEvt")&&t("zoomEvt",{type:1===e?"zoomIn":"zoomOut",camera:c.camera,status:"end"})}}}},x=e=>{const{defined:t,Cartesian3:i}=Cesium,{viewer:o}=n,a=o.scene,r=a.globe,s=a.camera;if(t(r)){let n;a.pickPositionSupported&&(n=a.pickPositionWorldCoordinates(e));const o=s.getPickRay(e),l=r.pick(o,a),c=t(n)?i.distance(n,s.positionWC):Number.POSITIVE_INFINITY;return(C(l)&&t(l)?i.distance(l,s.positionWC):Number.POSITIVE_INFINITY)>c?n:l}};return{handleZoomInMouseDown:e=>{var t,i,o;const{defined:p,getTimestamp:m,SceneMode:v,ScreenSpaceEventType:h}=Cesium,{viewer:g}=n;null==(t=Ee(a))||t.hide(),null==(i=Ee(r))||i.hide(),null==(o=Ee(s))||o.hide(),l.removeInputAction(h.LEFT_UP),p(c)&&g.clock.onTick.removeEventListener(c),u=void 0,c=void 0,m();const f=g.scene.camera;c=()=>{g.scene.mode===v.COLUMBUS_VIEW?f.zoomIn():O(1)},u=()=>{l.removeInputAction(h.LEFT_UP),p(c)&&g.clock.onTick.removeEventListener(c),u=void 0,c=void 0},l.setInputAction(u,h.LEFT_UP),d=g.clock.onTick.addEventListener(c)},handleZoomOutMouseDown:e=>{var t,i,o;null==(t=Ee(a))||t.hide(),null==(i=Ee(r))||i.hide(),null==(o=Ee(s))||o.hide();const{defined:c,getTimestamp:u,SceneMode:d,ScreenSpaceEventType:h}=Cesium,{viewer:g}=n;l.removeInputAction(h.LEFT_UP),c(p)&&g.clock.onTick.removeEventListener(p),m=void 0,p=void 0,u();const f=g.scene.camera;p=()=>{g.scene.mode===d.COLUMBUS_VIEW?f.zoomOut():O(-1)},m=()=>{l.removeInputAction(h.LEFT_UP),c(p)&&g.clock.onTick.removeEventListener(p),m=void 0,p=void 0},l.setInputAction(m,h.LEFT_UP),v=g.clock.onTick.addEventListener(p)},handleZoomBarScrollMouseDown:e=>{var t,i,l;null==(t=Ee(a))||t.hide(),null==(i=Ee(r))||i.hide(),null==(l=Ee(s))||l.hide();const{Cartesian2:c,defined:u,SceneMode:d}=Cesium,{viewer:p}=n;document.removeEventListener("mousemove",g,!1),document.removeEventListener("touchmove",g,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),u(y)&&p.clock.onTick.removeEventListener(y),f=void 0,y=void 0;const m=p.scene.camera;y=()=>{const e=o.value-65;e>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):e<0&&(p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1))},g=e=>{const t=o.value,i=e.target.parentElement.getBoundingClientRect(),n=w.getBoundingClientRect(),a=new Cesium.Cartesian2;a.x="touchmove"===e.type?e.changedTouches[0].clientX-n.left:e.clientX-n.left,a.y="touchmove"===e.type?e.changedTouches[0].clientY-n.top:e.clientY-n.top;let r=new c(i.width-a.x,i.height-a.y).y-16;r=r<0?0:r,r=r>120?120:r,o.value=120-r,o.value-t>0?p.scene.mode===d.COLUMBUS_VIEW?m.zoomOut():O(-1):p.scene.mode===d.COLUMBUS_VIEW?m.zoomIn():O(1)},f=()=>{document.removeEventListener("mousemove",g,!1),document.removeEventListener("touchmove",g,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),u(y)&&p.clock.onTick.removeEventListener(y),f=void 0,g=void 0,y=void 0,o.value=65},document.addEventListener("mousemove",g,!1),document.addEventListener("touchmove",g,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1),b=p.clock.onTick.addEventListener(y)},load:e=>(w=e,l=new Cesium.ScreenSpaceEventHandler(e),!0),unload:()=>(document.removeEventListener("mousemove",g,!1),document.removeEventListener("touchmove",g,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),null==d||d(),null==v||v(),null==b||b(),null==l||l.destroy(),!0),zoombarTop:o,zoomInTooltipRef:a,zoomOutTooltipRef:r,zoomBarTooltipRef:s,onTooltipBeforeShow:e=>{void 0===g&&void 0===c&&void 0===p||(e.cancel=!0)}}}(0,t,n,g);L((()=>e),(e=>{B((()=>{n.mounted&&x()}))}),{deep:!0});const w=f((()=>({top:b.zoombarTop.value+"px"})));n.createCesiumObject=async()=>new Promise(((e,t)=>{d.value=!0,B((()=>{const t=Ee(o),{viewer:i}=g;if(u)e(t);else{const n=i._element;C(t)&&(null==n||n.appendChild(t)),e(t)}}))})),n.mount=async()=>{var e;x();const{viewer:t}=g;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Ee(o)}),b.load(Ee(o))},n.unmount=async()=>{var e;const{viewer:t}=g;if(!u){const e=t._element,i=Ee(o);C(i)&&(null==e?void 0:e.contains(i))&&e.removeChild(i)}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Ee(o)}),b.unload()};const x=()=>{const t=y.style.value;if(p.left=t.left,p.top=t.top,p.transform=t.transform,p.visibility=e.autoHidden?"hidden":"visible",!u){const e=y.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(p,t)};return()=>{if(d.value){let i=[];return i=Pa(t.slots.default,i),i.push(z("div",{ref:a,class:"vc-zoomin-sm",onMousedown:b.handleZoomInMouseDown,onTouchstart:b.handleZoomInMouseDown},e.tooltip?z(vs,l(s({ref:b.zoomInTooltipRef},e.tooltip),{onBeforeShow:b.onTooltipBeforeShow}),(()=>z("strong",{},e.tooltip.zoomInTip||v("vc.navigationSm.zoomCotrol.zoomInTip")))):G("v-if"))),i.push(z("div",{ref:c,class:"vc-zoomout-sm",onMousedown:b.handleZoomOutMouseDown,onTouchstart:b.handleZoomOutMouseDown},e.tooltip?z(vs,l(s({ref:b.zoomInTooltipRef},e.tooltip),{onBeforeShow:b.onTooltipBeforeShow}),(()=>z("strong",{},e.tooltip.zoomOutTip||v("vc.navigationSm.zoomCotrol.zoomOutTip")))):G("v-if"))),i.push(z("div",{ref:r,class:"vc-zoombar-sm",style:w.value,onMousedown:b.handleZoomBarScrollMouseDown,onTouchstart:b.handleZoomBarScrollMouseDown},e.tooltip?z(vs,l(s({ref:b.zoomInTooltipRef},e.tooltip),{onBeforeShow:b.onTooltipBeforeShow}),(()=>z("strong",{},e.tooltip.zoomBarTip||v("vc.navigationSm.zoomCotrol.zoomBarTip")))):G("v-if"))),z("div",{ref:o,class:"vc-zoom-control-sm "+y.classes.value,style:p},i)}return G("v-if")}}});const Al={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},Dl={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}};var Rl=F({name:"VcNavigationSm",inheritAttrs:!1,props:l(s({},Is),{compassOpts:{type:[Boolean,Object],default:()=>Al},zoomOpts:{type:[Boolean,Object],default:()=>Dl}}),emits:l(s({},bs),{zoomEvt:e=>!0,compassEvt:e=>!0}),setup(e,t){const i=O();i.cesiumClass="VcNavigationSm";const n=ao(e,t,i);if(void 0===n)return;const o=h(!1),{$services:a}=n,r=js(e),l=h(null),c=h(null),u=h(null),d=k({}),{emit:p}=t;L((()=>e),(()=>{B((()=>{var e,t;C(),null==(e=Ee(c))||e.reload(),null==(t=Ee(u))||t.reload()}))}),{deep:!0});const m=f((()=>Object.assign({},Al,e.compassOpts))),v=f((()=>Object.assign({},Dl,e.zoomOpts))),g=e=>{_e(i,"compassEvt")&&p("compassEvt",e)},y=e=>{_e(i,"zoomEvt")&&p("zoomEvt",e)};i.createCesiumObject=async()=>{var e;o.value=!0;const{viewer:t}=a;return null==(e=t.viewerWidgetResized)||e.addEventListener(b),new Promise(((e,i)=>{B((()=>{t._element.appendChild(Ee(l)),e(Ee(l))}))}))},i.mount=async()=>{var e;C();const{viewer:t}=a;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Ee(l)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=a,o=n._element;return o.contains(Ee(l))&&o.removeChild(Ee(l)),null==(e=n.viewerWidgetResized)||e.removeEventListener(b),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Ee(l)}),!0};const b=()=>{B((()=>{C()}))},C=()=>{const e=r.style.value,t=r.attach.value;d.left=e.left,d.top=e.top,d.transform=e.transform,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)"),Object.assign(d,e)};return()=>{if(o.value){let i=[];return i=Pa(t.slots.default,i),m.value&&!1!==e.compassOpts&&i.push(z(jl,s({ref:c,onCompassEvt:g},m.value))),v.value&&!1!==e.zoomOpts&&i.push(z(Ll,s({ref:u,onZoomEvt:y},v.value))),z("div",{ref:l,class:"vc-navigation-sm "+r.classes.value,style:d},i)}return G("v-if")}}});var kl=F({name:"VcOverviewMap",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}},emits:l(s({},bs),{"update:modelValue":e=>!0}),setup(e,t){const i=O();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{t:o}=eo(),{$services:a}=n,r=h(null),c=h(null),u=k({}),d=h(null),p=h(null),m=js(e),v=h(e.modelValue);let g,y,b=[];const C=f((()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts))),w=f((()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2},e.viewerOpts)));i.createCesiumObject=async()=>{const{viewer:e}=a;return e._element.appendChild(Ee(r)),[Ee(r),Ee(p)]},i.mount=async()=>{_();const{viewer:e}=a;return e.clock.onTick.addEventListener(x),!0},i.unmount=async()=>{const{viewer:e}=a,t=e._element;return e.clock.onTick.removeEventListener(x),t.contains(Ee(r))&&t.removeChild(Ee(r)),!0};const x=()=>{if(g){const{viewer:t}=a,i=t.camera.computeViewRectangle(),{defined:n}=Cesium;if(!n(i))return;const o=i.expand(e.widthFactor,e.heightFactor);g.camera.flyTo({destination:o.clone(),orientation:{heading:t.camera.heading,pitch:t.camera.pitch,roll:t.camera.roll},duration:0});const{Cartesian3:r,SceneTransforms:s}=Cesium,l=r.fromRadians(i.west,i.north),c=r.fromRadians(i.east,i.north),u=r.fromRadians(i.west,i.south),d=r.fromRadians(i.east,i.south),p=g.scene,m=s.wgs84ToWindowCoordinates(p,l),v=s.wgs84ToWindowCoordinates(p,c),h=s.wgs84ToWindowCoordinates(p,u),f=s.wgs84ToWindowCoordinates(p,d);if(!(n(m)&&n(v)&&n(h)&&n(f)))return;const b=v.x-m.x,C=h.y-m.y,w=(m.x+v.x)/2-b/2,O=(m.y+h.y)/2-C/2;if(b<=0||C<=0)return;const x=new Cesium.BoundingRectangle(w,O,b,C);y.rectangle=x,y.material.uniforms.color=ke(e.centerRectColor),y.show=!0}},S=e=>{const{viewer:t}=e;g=t;const i=t.scene.screenSpaceCameraController;i.enableRotate=!1,i.enableTranslate=!1,i.enableZoom=!1,i.enableTilt=!1,i.enableLook=!1,g.scene.highDynamicRange=!1,g.scene.globe.enableLighting=!1,g.scene.globe.showWaterEffect=!1,g.scene.globe.depthTestAgainstTerrain=!1,g.scene.skyAtmosphere.show=!1,g.scene.fog.enabled=!1,g.scene.skyBox.show=!1,g.scene.sun.show=!1,g.scene.moon.show=!1,g.scene.highDynamicRange=!1,g.scene.globe.showGroundAtmosphere=!1,y=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),y.show=!1,g.scene.primitives.add(y)},_=()=>{var t;const i=m.style.value;if(u.left=i.left,u.top=i.top,u.transform=i.transform,u["pointer-events"]="none",i.borderRadius=e.borderRadius,i.border=e.border,v.value)i.width=e.width,i.height=e.height;else{const n=/(\d+)/g.exec(e.border),o=(null==n?void 0:n.length)?parseFloat(n[0]):0,a=getComputedStyle(null==(t=Ee(c))?void 0:t.$el);i.width=`${parseFloat(a.width)+parseFloat(a.padding)+o}px`,i.height=`${parseFloat(a.height)+parseFloat(a.padding)+o}px`}Object.assign(u,i)},E=()=>{v.value?P():T(),v.value=!v.value,t.emit("update:modelValue",v.value)},P=()=>{var t;const i=/(\d+)/g.exec(e.border),n=(null==i?void 0:i.length)?parseFloat(i[0]):0,o=getComputedStyle(null==(t=Ee(c))?void 0:t.$el);u.width=`${parseFloat(o.width)+parseFloat(o.padding)+n}px`,u.height=`${parseFloat(o.height)+parseFloat(o.padding)+n}px`},T=()=>{u.width=e.width,u.height=e.height};return M((()=>{b.forEach((e=>e())),b=[]})),()=>{const i=[];return i.push(z(es,{ref:c,class:"toggle toggle-"+e.position+(v.value?"":" minimized "),flat:!0,dense:!0,icon:C.value.icon,size:C.value.size,style:{color:C.value.color,background:C.value.background,"pointer-events":"auto"},onClick:E},(()=>C.value.tooltip?z(vs,s({ref:d},C.value.tooltip),(()=>z("strong",{},C.value.tooltip.tip||o("vc.overview."+(v.value?"hidden":"show"))))):G("v-if")))),i.push(z(Ts,l(s({ref:p},w.value),{onReady:S}),(()=>Ea(t.slots.default)))),z("div",{ref:r,class:"vc-overview-map "+m.classes.value,style:u},i)}}});class Bl{constructor(e){this.id=e.id||Cesium.createGuid()}static getBoundingSphere(e,t){var i,n,o,a;const{Primitive:r,ClassificationPrimitive:s,GroundPolylinePrimitive:l,GroundPrimitive:c,Polyline:u}=Cesium;let d;return e instanceof s||e instanceof l?d=null==(n=null==(i=e._primitive)?void 0:i._boundingSphereWC)?void 0:n[0]:e instanceof r?d=null==(o=e._boundingSphereWC)?void 0:o[0]:e instanceof c?d=null==(a=e._boundingVolumes)?void 0:a[0]:e instanceof u?d=e._boundingVolumeWC:e instanceof Cesium.Entity&&(d=new Cesium.BoundingSphere,t.dataSourceDisplay.getBoundingSphere(e,!0,d)),d}static fromPickedFeature(e,t,i,n){var o;const a=new Bl({id:e.id});return e.position?a.position=e.position:e instanceof Cesium.Model?a.position=Cesium.Matrix4.getTranslation(e.modelMatrix,new Cesium.Cartesian3):e instanceof Cesium.Cesium3DTileset?a.position=Cesium.Matrix4.getTranslation(t.content._contentModelMatrix,new Cesium.Cartesian3):a.position=null==(o=Bl.getBoundingSphere(e,i))?void 0:o.center,a.cesiumObject=e,a.pickedFeature=t,a.windowPosition=n,a}static fromImageryLayerFeature(e,t){const i=new Bl({id:e.name});return i.name=e.name,i.description=e.description,i.properties=e.properties,i.data=e.data,i.imageryLayer=e.imageryLayer,i.position=t.scene.globe.ellipsoid.cartographicToCartesian(e.position),i.coords=e.coords,i}}class Nl{constructor(){const{knockout:e}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,e.track(this,["isLoading","features","error"])}}var Vl=F({name:"VcSelectionIndicator",props:{show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},limit:{type:Number,default:25}},emits:l(s({},bs),{pickEvt:e=>!0}),setup(e,t){const i=O();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n;let a;const r=function(e,t,i){const n="-1000px",o=h(n),a=h(n),r=h(),s=h();let l,c;const u=h(null),d=h(null);let m=[],v=!1;const g=k({top:a.value,left:o.value,transform:"",opacity:1});m.push(L(d,(t=>{var n,o,a;const s=t,{defined:l}=Cesium;if(l(s)&&l(null==s?void 0:s.position)){const{viewer:t}=i;r.value=(null==s?void 0:s.position)instanceof Cesium.Cartesian3?null==s?void 0:s.position:null==(n=null==s?void 0:s.position)?void 0:n.getValue(t.clock.currentTime),x(),null==(o=e.proxy)||o.$emit("pickEvt",s)}else S(),null==(a=e.proxy)||a.$emit("pickEvt",s);O()}))),m.push(L(u,(e=>{const{defined:t,Entity:i}=Cesium,n=e;if(t(n)){const e=new i({id:"__Vc__Pick__Location__"});e.position=n.pickPosition,d.value=e}else d.value=void 0;B((()=>{t(n.allFeaturesAvailablePromise)&&n.allFeaturesAvailablePromise.then((()=>{var e,i,o;const a=n.features.filter((e=>t(e)));d.value=a.filter(f)[0],!t(d.value)&&a.length>0&&(d.value=a[0],v&&d.value instanceof Bl&&(null==(o=null==(i=null==(e=d.value)?void 0:e.pickedFeature)?void 0:i.primitive)?void 0:o.position)&&(d.value.position=d.value.pickedFeature.primitive.position))}))}))})));const f=e=>{const{defined:t}=Cesium;return t(e.properties)||t(e.description)},y=(e,t,i,n,o,a,r,s)=>{const{defined:l,defaultValue:c,when:u}=Cesium;r=c(r,!1);const d=new Nl;return d.providerCoords=e,d.pickPosition=t,d.allFeaturesAvailablePromise=Promise.all(n).then((function(e){d.isLoading=!1,d.features=e.reduce(function(e,i,n){if(!l(i))return e;const r=i.map(function(e){return l(o)&&(e.imageryLayer=o[n]),l(e.position)||(e.position=s.scene.globe.ellipsoid.cartesianToCartographic(t)),l(e.position.height)&&0!==e.position.height||(e.position.height=a),Bl.fromImageryLayerFeature(e,s)}.bind(this));return e.concat(r)}.bind(this),c(i,[]))})).catch((function(){d.isLoading=!1,d.error="An unknown error occurred while picking features."})),d},b=e=>{var n,o;const a=[],{defined:r}=Cesium,{viewer:s}=i,l=s.scene.drillPick(e,t.limit);for(let t=0;t<l.length;++t){const i=l[t];let c=i.id;!r(c)&&r(i.primitive)&&(c=i.primitive);const u=null!=(o=null==(n=null==i?void 0:i.primitive)?void 0:n._catalogItem)?o:null==c?void 0:c._catalogItem;if("function"==typeof(null==u?void 0:u.getFeaturesFromPickResult)){const t=u.getFeaturesFromPickResult.bind(u)(e,i);t&&(Array.isArray(t)?a.push(...t):a.push(t))}else{const t=i;if(t.id){if(p(t.id)&&t.id[0]instanceof Cesium.Entity){v=!0,t.id.forEach((i=>{const n=Bl.fromPickedFeature(i,t,s,e);a.push(n)}));continue}if(t.id instanceof Cesium.Entity){const i=Bl.fromPickedFeature(t.id,t,s,e);a.push(i),v=!1;continue}v=!1}if(t.primitive){const i=Bl.fromPickedFeature(t.primitive,t,s,e);a.push(i)}else if(t.collection){const i=Bl.fromPickedFeature(t.collection,t,s,e);a.push(i)}}}return a},C=()=>{const e={},{viewer:t}=i,n=t.scene,o=function(t,i,n,o,a,r,s){if(i){const l=i.call(t,n,o,a,r,s);return t.url&&(e[t.url]={x:n,y:o,level:a}),t.pickFeatures=i,l}return Promise.reject(!1)};for(let i=0;i<n.imageryLayers.length;i++){const e=n.imageryLayers.get(i).imageryProvider;e.pickFeatures=o.bind(void 0,e,e.pickFeatures)}return e},w=(e,t)=>{const{viewer:n}=i;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(n.scene,e,t)},O=()=>{const{defined:e,Cartesian2:n}=Cesium;if(t.show&&e(r.value)){const o=w(r.value,new n);if(e(o)){const{viewer:e}=i,n=e.container,a=n.clientWidth,r=n.clientHeight,s=t.width,l=.5*s;o.x=Math.min(Math.max(o.x,-s),a+s)-l,o.y=Math.min(Math.max(o.y,-s),r+s)-l,g.left=Math.floor(o.x+.25)+"px",g.top=Math.floor(o.y+.25)+"px"}}},x=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(l)){if(c)return;l.cancelTween(),l=void 0}c=!0,l=e.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){l=void 0},cancel:function(){l=void 0}})},S=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(l)){if(!c)return;l.cancelTween(),l=void 0}c=!1,l=e.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){l=void 0},cancel:function(){l=void 0}})};return M((()=>{m.forEach((e=>e())),m=[]})),Object.assign(e.proxy,{selectedFeature:d,position:r,computeScreenSpacePosition:w,update:O,animateAppear:x,animateDepart:S,getPickedFeatures:()=>u}),{pickFromScreenPosition:e=>{const{defined:n}=Cesium,{viewer:o}=i,a=o.scene,r=a.camera.getPickRay(e);let s=a.globe.pick(r,a);if(!n(s)&&(s=a.pickPosition(e),!n(s)))return;const l=a.globe.ellipsoid.cartesianToCartographic(s||new Cesium.Cartesian3),c=b(e),d=C(),p=t.allowFeatureInfoRequests?a.imageryLayers.pickImageryLayerFeatures(r,a):Promise.resolve(),m=y(d,s,c,[p],void 0,l.height,!1,o);u.value=m},rootRef:s,rootStyle:g,onPostRender:()=>{O()}}}(i,e,o);return i.createCesiumObject=async()=>{const{viewer:e}=o;return e._element.appendChild(Ee(r.rootRef)),Ee(r.rootRef)},i.mount=async()=>{const{viewer:e}=o,{ScreenSpaceEventHandler:t,ScreenSpaceEventType:i}=Cesium;return a=new t(e.canvas),a.setInputAction((e=>{r.pickFromScreenPosition(e.position)}),i.LEFT_CLICK),e.scene.postRender.addEventListener(r.onPostRender),!0},i.unmount=async()=>{const{viewer:e}=o,t=e._element;return t.contains(Ee(r.rootRef))&&t.removeChild(Ee(r.rootRef)),e.scene.postRender.removeEventListener(r.onPostRender),a.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),a.destroy(),a=void 0,!0},()=>z("div",{ref:r.rootRef,class:"vc-selection-indicator",style:r.rootStyle},z("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[Xs,el,ol,sl,Ol,_l,Ml,jl,Ll,Rl,kl,Vl].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const zl=Xs,Fl=el,Hl=ol,Ul=sl,Wl=Ol,Gl=_l,$l=Ml,Zl=jl,Yl=Ll,ql=Rl,Xl=kl,Ql=Vl,Jl={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Kl={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},ec={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},tc={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},ic={width:2,arcType:0,ellipsoid:void 0},nc={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},oc={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},ac={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ec,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},oc),remove:Object.assign({},oc,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},rc={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ec,polylineOpts:ic,primitiveOpts:Kl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},disableDepthTest:!1},sc={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ec,polylineOpts:ic,primitiveOpts:Kl,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),insert:Object.assign({},oc,{icon:"vc-icons-insert"}),remove:Object.assign({},oc,{icon:"vc-icons-remove"}),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:nc,labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},lc={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ec,polylineOpts:ic,primitiveOpts:Object.assign({},Kl,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:{show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),insert:Object.assign({},oc,{icon:"vc-icons-insert"}),remove:Object.assign({},oc,{icon:"vc-icons-remove"}),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!0,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:nc,labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},cc=Object.assign({},lc,{pointOpts:Object.assign({},ec,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:nc,labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5],text:"1dsa"})}),uc=Object.assign({},cc,{edge:360}),dc=Object.assign({},cc,{edge:6,loop:!0}),pc=Object.assign({},Jl,{icon:"vc-icons-clear",color:"red"}),mc=Object.assign({},Jl,{icon:"vc-icons-drawing-regular"}),vc=Object.assign({},Jl,{icon:"vc-icons-drawing-circle"}),hc=l(s({},qn),{show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean}),gc=l(s({},bt),{position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>pc}}),fc=Object.assign({},Jl,{icon:"vc-icons-measure-distance"}),yc=Object.assign({},rc,{labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new ia,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),bc=Object.assign({},Jl,{icon:"vc-icons-measure-component-distance"}),Cc=Object.assign({},yc,{showComponentLines:!0,xLabelOpts:nc,xAngleLabelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},nc,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},nc,{verticalOrigin:-1,pixelOffset:[0,9]})}),wc=Object.assign({},Jl,{icon:"vc-icons-measure-polyline-distance"}),Oc=Object.assign({},sc,{measureUnits:new ia,labelOpts:nc,labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),xc=Object.assign({},Jl,{icon:"vc-icons-measure-horizontal-distance"}),Sc=Object.assign({},Oc,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Kl,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),_c=Object.assign({},Jl,{icon:"vc-icons-measure-vertical-distance"}),Ec=Object.assign({},rc,{labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new ia,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),Pc=Object.assign({},Jl,{icon:"vc-icons-measure-height-from-terrain"}),Tc=Object.assign({},ac,{polylineOpts:ic,labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},measureUnits:new ia,decimals:{distance:2},locale:void 0,primitiveOpts:Kl}),Mc=Object.assign({},Jl,{icon:"vc-icons-measure-area"}),Ic=Object.assign({},lc,{labelOpts:nc,labelsOpts:Object.assign({},nc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new ia,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),jc=Object.assign({},Jl,{icon:"vc-icons-measure-point-coordinates"}),Lc=Object.assign({},ac,{heightReference:1,measureUnits:new ia,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},nc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),Ac=Object.assign({},Jl,{icon:"vc-icons-drawing-rectangle"}),Dc=Object.assign({},Ic,{pointOpts:Object.assign({},ec,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),Rc=Object.assign({},Dc,{edge:6,loop:!0}),kc=Object.assign({},Dc,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),Bc=Object.assign({},Jl,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Nc=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],Vc=l(s({},gc),{measurements:{type:Array,default:()=>Nc,validator:e=>{let t=!0;return e.forEach((e=>{Nc.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Bc},distanceActionOpts:{type:Object,default:()=>fc},distanceMeasurementOpts:{type:Object,default:()=>yc},componentDistanceActionOpts:{type:Object,default:()=>bc},componentDistanceMeasurementOpts:{type:Object,default:()=>Cc},polylineActionOpts:{type:Object,default:()=>wc},polylineMeasurementOpts:{type:Object,default:()=>Oc},horizontalActionOpts:{type:Object,default:()=>xc},horizontalMeasurementOpts:{type:Object,default:()=>Sc},verticalActionOpts:{type:Object,default:()=>_c},verticalMeasurementOpts:{type:Object,default:()=>Ec},heightActionOpts:{type:Object,default:()=>Pc},heightMeasurementOpts:{type:Object,default:()=>Tc},areaActionOpts:{type:Object,default:()=>Mc},areaMeasurementOpts:{type:Object,default:()=>Ic},pointActionOpts:{type:Object,default:()=>jc},pointMeasurementOpts:{type:Object,default:()=>Lc},rectangleActionOpts:{type:Object,default:()=>Ac},rectangleMeasurementOpts:{type:Object,default:()=>Dc},regularActionOpts:{type:Object,default:()=>mc},regularMeasurementOpts:{type:Object,default:()=>Rc},circleActionOpts:{type:Object,default:()=>vc},circleMeasurementOpts:{type:Object,default:()=>kc}}),zc=he(Vc);var Fc=F({name:"VcOverlayHtml",props:l(s(s(s({},et),vt),bt),{autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object}),emits:l(s({},bs),{mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0}),setup(e,t){const i=O();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,a=h(!1),r=h(null),s=k({}),l=h(null),c=h(null),u=h(null);let d=[];d.push(L((()=>e.position),(e=>{c.value=Me(e,o.viewer.scene.globe.ellipsoid)}))),d.push(L((()=>e.pixelOffset),(e=>{l.value=Te(e)}))),i.createCesiumObject=async()=>Ee(r),i.mount=async()=>{const{viewer:t}=o;return a.value=!0,y(),l.value=Te(e.pixelOffset),c.value=Me(e.position,t.scene.globe.ellipsoid),t.scene.preRender.addEventListener(p),!0},i.unmount=async()=>{const{viewer:e}=o;return e.scene.preRender.removeEventListener(p),a.value=!1,b(),!0};const p=()=>{const{viewer:t}=o;if(c.value){const i=t.scene.cartesianToCanvasCoordinates(c.value,{});if(Cesium.defined(i)&&!Cesium.Cartesian2.equals(u.value,i))if(s.left=i.x+l.value.x+"px",s.top=i.y+l.value.y+"px",e.autoHidden){const i=t.camera.position,n=t.scene.globe.ellipsoid.cartesianToCartographic(i);if(Cesium.defined(n)){let o=n.height;o+=1*t.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(i,c.value)>o||!e.show?s.display="none":s.display="block"}}else s.display="block";u.value=i}};M((()=>{d.forEach((e=>e())),d=[]}));const m=()=>a.value?z("div",{ref:r,class:"vc-html-container"+(e.customClass?" "+e.customClass:""),style:s,onMouseenter:g,onMouseleave:f,onClick:v},Ea(t.slots.default)):G("v-if"),v=e=>{t.emit("click",e)},g=e=>{t.emit("mouseenter",e)},f=e=>{t.emit("mouseleave",e)},{showPortal:y,hidePortal:b,renderPortal:C}=wr(i,r,(()=>m()));return e.teleport&&e.teleport.to&&!e.teleport.disabled?C:()=>m()}});var Hc=F({name:"VcEntity",props:s(l(s(l(s(l(s({id:String,name:String,availability:Object},bt),{description:[String,Object]}),et),{orientation:Object}),tt),{parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object}),qn),emits:l(s(s({},bs),Cs),{definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0}),setup(e,t){const i=O();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.mount=async()=>{var e;const t=null==(e=null==o?void 0:o.entities)?void 0:e.add(i.cesiumObject);return null==o?void 0:o.entities.contains(t)},i.unmount=async()=>{var e;return null==(e=null==o?void 0:o.entities)?void 0:e.remove(i.cesiumObject)};return Object.assign(i.proxy,{__updateGraphics:(e,t)=>(_e(i,t)?a(t,e):i.cesiumObject&&(i.cesiumObject[t.substring(7)]=e),e&&(e._vcParent=i.cesiumObject),!0)}),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});Hc.install=e=>{e.component(Hc.name,Hc)};const Uc=Hc;var Wc=F({name:"VcLayerImagery",props:l(s(s(l(s(l(s({imageryProvider:Object},Wi),{alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number}),bt),{maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number}),Bi),Ni),{colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number}),emits:l(s({},bs),{"update:imageryProvider":e=>!0}),setup(e,t){const i=O();i.cesiumClass="ImageryLayer",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.createCesiumObject=async()=>{const t=n.transformProps(e),i=e.imageryProvider||{};return new Cesium.ImageryLayer(i,t)},i.mount=async()=>{const{viewer:t}=o,n=i.cesiumObject;return n.sortOrder=e.sortOrder,t.imageryLayers.add(n),!t.isDestroyed()&&t.imageryLayers.contains(n)},i.unmount=async()=>{const{viewer:e}=o,t=i.cesiumObject;return!e.isDestroyed()&&e.imageryLayers.remove(t)};return Object.assign(i.proxy,{__updateProvider:e=>{var t;if(m(e))return null==(t=i.unmount)?void 0:t.call(i);i.cesiumObject._imageryProvider=e;_e(i,"update:imageryProvider")&&a("update:imageryProvider",e);return!0}}),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Wc.install=e=>{e.component(Wc.name,Wc)};const Gc=Wc;var $c=F({name:"VcPrimitiveClassification",props:s(s(s(s(s(s(s(s(s(s(s(s(s({},vn),pn),bt),hn),dn),gn),un),sn),ln),kt),yn),cn),qn),emits:xs,setup(e,t){var i;const n=O();n.cesiumClass="ClassificationPrimitive",jo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(o),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(o))}});var Zc=F({name:"VcPrimitiveGround",props:s(s(s(s(s(s(s(s(s(s(s(s(s({},vn),pn),bt),hn),dn),gn),un),sn),ln),kt),yn),cn),qn),emits:xs,setup(e,t){var i;const n=O();n.cesiumClass="GroundPrimitive",jo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(o),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(o))}});var Yc=F({name:"VcPrimitiveGroundPolyline",props:s(s(s(s(s(s(s(s(s(s(s(s({},vn),pn),bt),dn),gn),un),sn),ln),kt),yn),cn),qn),emits:xs,setup(e,t){var i;const n=O();n.cesiumClass="GroundPolylinePrimitive",jo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(o),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(o))}});var qc=F({name:"VcPrimitiveModel",props:s(l(s(s(s(s(s(s(s(l(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(l(s({},Vi),{basePath:String}),bt),fn),ft),ci),ui),wn),sn),di),ln),mi),It),yn),xn),ut),bn),st),ot),gi),fi),vi),hi),Oi),{dequantizeInShader:{type:Boolean,default:!0}}),yi),bi),Nn),Vn),zn),Zi),Fn),{showOutline:{type:Boolean,default:!0}}),qn),emits:xs,setup(e,t){const i=O();i.cesiumClass="Model";const n=jo(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.Model.fromGltf(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Xc=F({name:"VcPrimitive",props:s(s(s(s(l(s(s(s(s(s(s(s(s(s(s({},vn),pn),mn),bt),fn),hn),dn),gn),un),sn),{cull:{type:Boolean,default:!0}}),ln),yn),It),qn),emits:xs,setup(e,t){var i;const n=O();n.cesiumClass="Primitive",jo(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>{var e;return t.slots.default?z("i",{class:pe(o),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});const Qc=l(s({},xs),{allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0});var Jc=F({name:"VcPrimitiveTileset",props:l(s(l(s(s(l(s(s(s(s(s(s(l(s(s(s(l(s(s(s(s({url:[String,Object]},bt),fn),It),Di),{maximumMemoryUsage:{type:Number,default:512},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1}}),Oi),kt),$i),{pointCloudShading:Object}),yi),Bn),Nn),Vn),zn),Fn),{showOutline:{type:Boolean,default:!0},vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1}}),xn),yn),{debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1}}),qn),{enableModelExperimental:{type:Boolean,default:!1},customShader:{type:Object},properties:{type:Array},fragmentShader:String,replaceFS:Boolean}),emits:Qc,setup(e,t){const i=O();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"],jo(e,t,i),i.proxy.creatingPromise.then((e=>{const t=e.cesiumObject;i.removeCallbacks.push(t.tileVisible.addEventListener(n))}));const n=t=>{const i=t.content,n=i._model;for(let o=0;o<i.featuresLength;o++){const t=i.getFeature(o);e.properties&&e.properties.length&&e.properties.forEach((e=>{t.hasProperty(e.key)&&t.getProperty(e.key)===e.keyValue&&t.setProperty(e.propertyName,e.propertyValue)}))}e.fragmentShader&&n&&n._sourcePrograms&&n._rendererResources&&(Object.keys(n._sourcePrograms).forEach((t=>{const i=n._sourcePrograms[t],o=n._rendererResources.sourceShaders;if(e.replaceFS)o[i.fragmentShader]=e.fragmentShader;else{const t=o[i.fragmentShader];o[i.fragmentShader]=t.replace("gl_FragColor = vec4(color, 1.0);\n}",`gl_FragColor = vec4(color, 1.0);\n             ${e.fragmentShader}\n}\n            `)}})),n._shouldRegenerateShaders=!0)};return()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Kc=l(s({},xs),{complete:e=>!0});var eu=F({name:"VcPrimitiveParticle",props:s(l(s(s(s(s(s(s(s(s(l(s(l(s({},bt),{updateCallback:Function,emitter:Object}),fn),{emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number}),ot),In),jn),pt),Dn),Ln),An),Ct),{speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number}),qn),emits:Kc,setup(e,t){const i=O();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],jo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var tu=F({name:"VcViewshed",props:l(s({},bn),{fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String,default:"\n  uniform sampler2D colorTexture;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n  uniform float u_isShed;\n  uniform sampler2D shadowMap_depthTexture;\n  uniform mat4 shadowMap_matrix;\n  uniform vec4 shadowMap_lightPositionEC;\n  uniform vec3 shadowMap_lightDirectionEC;\n  uniform float u_radius;\n  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n  uniform float czzj;\n  uniform float dis;\n  uniform float spzj;\n  uniform float mixNum;\n  uniform vec3 shadowMap_lightUp;\n  uniform vec3 shadowMap_lightDir;\n  uniform vec3 shadowMap_lightRight;\n  varying vec2 v_textureCoordinates;\n  vec4 toEye(in vec2 uv, in float depth){\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  float getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){\n    return texture2D(shadowMap, uv).r;\n  }\n  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){\n    return step(depth, _czm_sampleShadowMap(shadowMap, uv));\n  }\n  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n    depth -= depthBias;\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility =\n    (\n    _czm_shadowDepthCompare(shadowMap, uv, depth)\n    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0)\n    ;\n    return visibility;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float ptm(vec3 pt){\n    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);\n  }\n  void main()\n  {\n    const float PI = 3.141592653589793;\n    vec4 color = texture2D(colorTexture, v_textureCoordinates);\n    gl_FragColor = color;\n    if ( u_isShed < 0.5 )\n        return;\n    vec4 currD = texture2D(czm_globeDepthTexture, v_textureCoordinates);\n    if( currD.r >= 1.0 )\n        return;\n\n    float depth = getDepth(currD);\n    vec4 positionEC = toEye(v_textureCoordinates, depth);\n    vec3 normalEC = vec3(1.0);\n    czm_shadowParameters shadowParameters;\n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n    shadowParameters.depthBias *= max(depth * 0.01, 1.0);\n    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);\n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);\n    vec4 shadowPosition = shadowMap_matrix * positionEC;\n    shadowPosition /= shadowPosition.w;\n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))\n      return;\n\n    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);\n    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);\n    if(distance(lw.xyz,vw.xyz)> u_radius)\n        return;\n\n    shadowParameters.texCoords = shadowPosition.xy;\n    shadowParameters.depth = shadowPosition.z;\n    shadowParameters.nDotL = nDotL;\n    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);\n    if(visibility > 0.3 ){\n      gl_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);\n    }\n    else{\n      if(abs(shadowPosition.z-0.0)<0.01){\n        return;\n      }\n      gl_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);\n    }\n  }\n"},uniforms:Object}),emits:bs,setup(e,t){const i=O();i.cesiumClass="VcViewshed";const n=ao(e,t,i);if(void 0===n)return;const o=[];let a;o.push(L([()=>e.startPosition,()=>e.endPosition],(([e,t])=>{i.mounted&&r(e,t)}),{deep:!0})),o.push(L((()=>e.fovH),(e=>{if(!i.mounted)return;i.cesiumObject.fovH=e}))),o.push(L((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(L((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(L((()=>e.offsetHeight),(e=>{if(!i.mounted)return;i.cesiumObject.offsetHeight=e}))),o.push(L((()=>e.visibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.visibleColor=ke(e)}))),o.push(L((()=>e.invisibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.invisibleColor=ke(e)}))),o.push(L((()=>e.showGridLine),(e=>{if(!i.mounted)return;i.cesiumObject.showGridLine=e}))),o.push(L((()=>e.show),(e=>{if(!i.mounted)return;i.cesiumObject.enabled=e}))),M((()=>{o.forEach((e=>e())),o.length=0})),i.createCesiumObject=async()=>{const t=n.$services.viewer,i=new ga(t.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:ke(e.visibleColor),invisibleColor:ke(e.invisibleColor),showGridLine:e.showGridLine});return i._viewshedShadowMap.cascadesEnabled=!1,i._viewshedShadowMap.softShadows=!1,i._viewshedShadowMap.normalOffset=!1,i._viewshedShadowMap.fromLightSource=!1,i._viewshedShadowMap.enabled=!1,i.fovH=Cesium.Math.toRadians(e.fovH),i.fovV=Cesium.Math.toRadians(e.fovV),i.offsetHeight=e.offsetHeight,i.showGridLine=e.showGridLine,i.enabled=e.show,i.lineColor=ke(e.lineColor),i.faceColor=ke(e.faceColor),i},i.mount=async()=>{const t=n.$services.viewer,o=i.cesiumObject,{Cartesian4:s,PostProcessStage:l,Cartesian2:c}=Cesium;r(e.startPosition,e.endPosition),a=new l({fragmentShader:e.fragmentShader,uniforms:e.uniforms||{u_color1:function(){return o.visibleColor},u_color2:function(){return o.invisibleColor},u_isShed:function(){return o.shadowMap.enabled},u_radius:function(){return o.lightCamera.frustum.far},shadowMap_depthTexture:function(){return o.shadowMap.enabled?o.shadowMap._shadowMapTexture:t.scene.context.defaultTexture},shadowMap_matrix:function(){return o.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return o.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return o.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return o.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return o.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return o.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const e=o.shadowMap._pointBias;return s.fromElements(e.normalOffsetScale,o.shadowMap._distance,o.shadowMap.maximumDistance,0,new s)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const e=o.shadowMap._pointBias,t=new c;return t.x=1/o.shadowMap._textureSize.x,t.y=1/o.shadowMap._textureSize.y,s.fromElements(t.x,t.y,e.depthBias,e.normalShadingSmooth,new s)},czzj:function(){return o.lightCamera.frustum.fov},spzj:function(){return o.lightCamera.frustum.fov},mixNum:function(){return.5},shadowMap_lightUp:function(){return o.lightCamera.up},shadowMap_lightDir:function(){return o.lightCamera.direction},shadowMap_lightRight:function(){return o.lightCamera.right}}}),t.scene.postProcessStages.add(a);const u=n.$services.primitives;return u&&u.add(o)},i.unmount=async()=>{const e=n.$services.viewer;a&&e.scene.postProcessStages.remove(a);const t=n.$services.primitives,o=i.cesiumObject;return t&&t.remove(o)};const r=(e,t)=>{const n=i.cesiumObject,{Cartesian3:o}=Cesium;let a=o.subtract(t,e,new o);const r=o.magnitudeSquared(a),s=o.distance(t,e);if(r<.01||n.frustum.near>s)n.enabled=!1;else{n.enabled=!0,a=o.normalize(a,a);const i=o.normalize(t,new o);n.setView({destination:e,orientation:{direction:a,up:i}}),n.frustum.far=Math.max(s,1.1)}};return()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[$c,Zc,Yc,qc,Xc,Jc,eu].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const iu=$c,nu=Zc,ou=Yc,au=qc,ru=Xc,su=Jc,lu=eu,cu=tu;var uu=F({name:"VcOverlayHeatmap",props:l(s(s({},bt),Wi),{min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}}),emits:bs,setup(e,t){var i;const n=O();n.cesiumClass="VcOverlayHeatmap",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const a=h(null),r=h(null),s={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},l=h(null),c=h(null),u=h(null),d=h(null),p=h(null),m=h(!1),v=h(null);null==(i=Pe(n).proxy.creatingPromise)||i.then((()=>{m.value=!0}));const g=f((()=>Object.assign({},s,e.options)));let y=[];y.push(L((()=>u),(e=>{c.value.fabric.uniforms.image=e.value,p.value.options.material.fabric.uniforms.image=e.value}),{deep:!0})),y.push(L((()=>e.data),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;Array.isArray(e)&&Array.isArray(t)?(w(e,i),u.value=i.getDataURL()):o.reload()}),{deep:!0})),y.push(L((()=>[e.max,e.min]),(e=>{const t=n.cesiumObject;t.setDataMax(e[0]||0),t.setDataMin(e[1]||0),u.value=t.getDataURL()}))),y.push(L((()=>[e.type,e.projection,e.rectangle]),(e=>{o.reload()}))),y.push(L((()=>e.options),(e=>{const t=n.cesiumObject;t.configure(e),u.value=t.getDataURL()}),{deep:!0})),n.createCesiumObject=async()=>{const{WebMercatorProjection:t,GeographicProjection:i}=Cesium;r.value="3857"===e.projection?new t:new i;const n=b();v.value=C(e.rectangle);const o=document.createElement("div");if(Cesium.defined(n)&&o.setAttribute("id",n),o.setAttribute("style","width: "+v.value.width+"px; height: "+v.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(o),g.value.container=o,e.segments.length){g.value.gradient={};const t=e.max-e.min;for(let i=0;i<e.segments.length;i++)g.value.gradient[""+(e.segments[i][0]-e.min)/t]=ke(e.segments[i][1]).toCssColorString()}const a=X.create(g.value);return o.children[0].setAttribute("id",n+"-hm"),Array.isArray(e.data)&&(w(e.data,a),c.value={fabric:{type:"Image",uniforms:{image:u.value,transparent:!0}}},p.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:u.value}}}}}),a},n.unmount=async()=>(document.body.removeChild(n.cesiumObject._config.container),!0);const b=e=>{let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<(e||8);n++)t+=i.charAt(Math.floor(Math.random()*i.length));return t},C=e=>{const t=Ve(e),i=r.value.project(new Cesium.Cartographic(t.west,t.south)),n=r.value.project(new Cesium.Cartographic(t.east,t.north)),o={north:n.y,east:n.x,south:i.y,west:i.x};let a=o.east>0&&o.west<0?o.east+Math.abs(o.west):Math.abs(o.east-o.west),s=o.north>0&&o.south<0?o.north+Math.abs(o.south):Math.abs(o.north-o.south),c=1;a>s&&a>g.value.maxCanvasSize?(c=a/g.value.maxCanvasSize,s/c<g.value.minCanvasSize&&(c=s/g.value.minCanvasSize)):s>a&&s>g.value.maxCanvasSize?(c=s/g.value.maxCanvasSize,s/c<g.value.minCanvasSize&&(c=a/g.value.minCanvasSize)):a<s&&a<g.value.minCanvasSize?(c=a/g.value.minCanvasSize,s/c>g.value.maxCanvasSize&&(c=s/g.value.maxCanvasSize)):s<a&&s<g.value.minCanvasSize&&(c=s/g.value.minCanvasSize,a/c>g.value.maxCanvasSize&&(c=a/g.value.maxCanvasSize)),a/=c,s/=c,Cesium.defined(g.value.radius)||(g.value.radius=a>s?a/g.value.radiusFactor:s/g.value.radiusFactor);const u=(g.value.radius||1)*g.value.spacingFactor,d=o.west,p=o.south;a=Math.round(a+2*u),s=Math.round(s+2*u),o.west-=u*c,o.east+=u*c,o.south-=u*c,o.north+=u*c;const m=r.value.unproject(new Cesium.Cartesian3(o.west,o.south)),v=r.value.unproject(new Cesium.Cartesian3(o.east,o.north)),h={north:Cesium.Math.toDegrees(v.latitude),east:Cesium.Math.toDegrees(v.longitude),south:Cesium.Math.toDegrees(m.latitude),west:Cesium.Math.toDegrees(m.longitude)};return l.value=h,{height:s,width:a,factor:c,xoffset:d,yoffset:p,spacing:u}},w=(t,i)=>{if(t){const{height:n,xoffset:o,yoffset:a,factor:s,spacing:l}=v.value,c=g.value.xField||"x",d=g.value.yField||"y",p=g.value.valueField||"value",m=[];for(let i=0;i<t.length;i++){const u=t[i];Cesium.defined(u.id)||(u.id=i);const v=r.value.project(Cesium.Cartographic.fromDegrees(u[c],u[d])),h={x:Math.round((v.x-o)/s+l),y:Math.round((v.y-a)/s+l),value:void 0};h.y=n-h.y,(u[p]||0===u[p])&&(h[p]=u[p]),h[p]>e.max||h[p]<e.min||m.push(h)}i.setData({min:e.min,max:e.max,data:m}),u.value=i.getDataURL()}};return M((()=>{y.forEach((e=>e())),y=[]})),Object.assign(n.proxy,{rootRef:a,childRef:d}),()=>{if(m.value){const t=[];return"entity"===e.type&&u.value?t.push(z(Uc,{ref:d,show:e.show,rectangle:{coordinates:l.value,material:c.value}})):"primitive"===e.type?t.push(z(nu,{ref:d,show:e.show,appearance:p.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Ve(l.value)})})})):"imagery-layer"===e.type&&u.value&&t.push(z(Gc,{ref:d,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:u.value,rectangle:Ve(l.value)})})),z("i",{ref:a,class:"vc-overlay-heatmap",style:"display: none !important"},t)}return G("v-if")}}});const du={options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}};l(s({},bs),{mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0});var pu=F({name:"VcOverlayEcharts",props:du,emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=O();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,a=h(!1),r=h(null),s=k({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let l;const c=h(!0);let u=[];u.push(L((()=>e.options),(e=>{n.reload()}))),i.createCesiumObject=async()=>Ee(r),i.mount=async()=>{const{viewer:t}=o;return a.value=!0,B((()=>{oe(e.coordinateSystem,m(t)),l=ae(Ee(r)),p(),t.scene.postRender.addEventListener(d)})),!0},i.unmount=async()=>{const{viewer:e}=o;return e.scene.postRender.removeEventListener(d),a.value=!1,!0};const d=()=>{if(c.value){const{viewer:e}=o;l.resize({width:e.canvas.width,height:e.canvas.height})}},p=()=>{c.value&&e.options&&l.setOption(e.options)},m=t=>{const i=function(e){this.viewer=e,this._mapOffset=[0,0]};return i.create=function(n){return n.eachSeries((function(n){n.get("coordinateSystem")===e.coordinateSystem&&(n.coordinateSystem=new i(t))})),[]},i.getDimensionsInfo=function(){return["x","y"]},i.dimensions=["x","y"],i.prototype.dimensions=["x","y"],i.prototype.setMapOffset=function(e){this._mapOffset=e},i.prototype.dataToPoint=function(t){const i=[],n=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!n)return i;if(e.autoHidden){const e=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),t=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(e,t)>=0)return i}const o=this.viewer.scene.cartesianToCanvasCoordinates(n);return o?[o.x-this._mapOffset[0],o.y-this._mapOffset[1]]:i},i.prototype.pointToData=function(e){const i=this._mapOffset,n=t.scene.globe.ellipsoid,o=new Cesium.Cartesian3(e[1]+i[1],e[2]+i[2],0),a=n.cartesianToCartographic(o);return a?[a.longitude,a.latitude]:[0,0]},i.prototype.getviewerRect=function(){const e=this.viewer.canvas;return new Q(0,0,e.width,e.height)},i.prototype.getRoamTransform=function(){return J()},i},v=e=>{t.emit("click",e)},g=e=>{t.emit("mouseenter",e)},f=e=>{t.emit("mouseleave",e)};return M((()=>{u.forEach((e=>e())),u=[]})),()=>a.value?z("div",{ref:r,class:"vc-echart-container"+(e.customClass?" "+e.customClass:""),style:s,onMouseenter:g,onMouseleave:f,onClick:v},Ea(t.slots.default)):G("v-if")}});function mu(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function vu(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function hu(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function gu(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}class fu{constructor(e){this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(e){switch(this.commandType){case"Draw":{const t=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(e,t){this.geometry=t;const i=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(e){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class yu{constructor(e,t,i,n){this.data=t,this.createWindTextures(e,t),this.createParticlesTextures(e,i,n),this.createComputingPrimitives(t,i,n)}createWindTextures(e,t){const i={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:vu(i,t.U.array),V:vu(i,t.V.array)}}createParticlesTextures(e,t,i){const n={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},o=this.randomizeParticles(t.maxParticles,i),a=new Float32Array(4*t.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:vu(n,o),currentParticlesPosition:vu(n,o),nextParticlesPosition:vu(n,o),postProcessingPosition:vu(n,o),particlesSpeed:vu(n,a)}}randomizeParticles(e,t){const i=new Float32Array(4*e);for(let n=0;n<e;n++)i[4*n]=Cesium.Math.randomBetween(t.lonRange.x,t.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(t.latRange.x,t.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach((e=>{this.particlesTextures[e].destroy()}))}createComputingPrimitives(e,t,i){const n=new Cesium.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),o=new Cesium.Cartesian3(e.lon.min,e.lat.min,e.lev.min),a=new Cesium.Cartesian3(e.lon.max,e.lat.max,e.lev.max),r=new Cesium.Cartesian3((a.x-o.x)/(n.x-1),(a.y-o.y)/(n.y-1),n.z>1?(a.z-o.z)/(n.z-1):1),s=new Cesium.Cartesian2(e.U.min,e.U.max),l=new Cesium.Cartesian2(e.V.min,e.V.max),c=this;this.primitives={calculateSpeed:new fu({commandType:"Compute",uniformMap:{U:function(){return c.windTextures.U},V:function(){return c.windTextures.V},currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},dimension:function(){return n},minimum:function(){return o},maximum:function(){return a},interval:function(){return r},uSpeedRange:function(){return s},vSpeedRange:function(){return l},pixelSize:function(){return i.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind\nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\n// used to calculate the wind norm\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nfloat speedScaleFactor = speedFactor * pixelSize;\n\nvarying vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n  // ensure the range of longitude and latitude\n  lonLatLev.x = mod(lonLatLev.x, 360.0);\n  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n  vec3 index3D = vec3(0.0);\n  index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n  index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n  index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n  // the st texture coordinate corresponding to (col, row) index\n  // example\n  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n  // the content of texture will be\n  // t 1.0\n  //    |  3 4 5\n  //    |\n  //    |  0 1 2\n  //   0.0------1.0 s\n\n  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n  return normalizedIndex2D;\n}\n\nfloat getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {\n  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n  float result = texture2D(componentTexture, normalizedIndex2D).r;\n  return result;\n}\n\nfloat interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {\n  float lon = lonLatLev.x;\n  float lat = lonLatLev.y;\n  float lev = lonLatLev.z;\n\n  float lon0 = floor(lon / interval.x) * interval.x;\n  float lon1 = lon0 + 1.0 * interval.x;\n  float lat0 = floor(lat / interval.y) * interval.y;\n  float lat1 = lat0 + 1.0 * interval.y;\n\n  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));\n  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));\n  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));\n  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));\n\n  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);\n  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);\n  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);\n  return lon_lat;\n}\n\nvec3 linearInterpolation(vec3 lonLatLev) {\n  // https://en.wikipedia.org/wiki/Bilinear_interpolation\n  float u = interpolateTexture(U, lonLatLev);\n  float v = interpolateTexture(V, lonLatLev);\n  float w = 0.0;\n  return vec3(u, v, w);\n}\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n  // unit conversion: meters -> longitude latitude degrees\n  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n  // Calculate the length of a degree of latitude and longitude in meters\n  float latitude = radians(lonLatLev.y);\n\n  float term1 = 111132.92;\n  float term2 = 559.82 * cos(2.0 * latitude);\n  float term3 = 1.175 * cos(4.0 * latitude);\n  float term4 = 0.0023 * cos(6.0 * latitude);\n  float latLength = term1 - term2 + term3 - term4;\n\n  float term5 = 111412.84 * cos(latitude);\n  float term6 = 93.5 * cos(3.0 * latitude);\n  float term7 = 0.118 * cos(5.0 * latitude);\n  float longLength = term5 - term6 + term7;\n\n  return vec2(longLength, latLength);\n}\n\nvec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {\n  vec2 lonLatLength = lengthOfLonLat(lonLatLev);\n  float u = speed.x / lonLatLength.x;\n  float v = speed.y / lonLatLength.y;\n  float w = 0.0;\n  vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n  return windVectorInLonLatLev;\n}\n\nvec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {\n  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail\n  const float h = 0.5;\n\n  vec3 y_n = lonLatLev;\n  vec3 f_n = linearInterpolation(lonLatLev);\n  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;\n  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;\n\n  return speed;\n}\n\nfloat calculateWindNorm(vec3 speed) {\n  vec3 percent = vec3(0.0);\n  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n  float norm = length(percent);\n\n  return norm;\n}\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);\n  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);\n\n  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));\n  gl_FragColor = particleSpeed;\n}\n"]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const e=c.particlesTextures.previousParticlesPosition;c.particlesTextures.previousParticlesPosition=c.particlesTextures.currentParticlesPosition,c.particlesTextures.currentParticlesPosition=c.particlesTextures.postProcessingPosition,c.particlesTextures.postProcessingPosition=e,c.primitives.calculateSpeed.commandToExecute.outputTexture=c.particlesTextures.particlesSpeed}}),updatePosition:new fu({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return c.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude\n\nvarying vec2 v_textureCoordinates;\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = texture2D(particlesSpeed, v_textureCoordinates).rgb;\n  vec3 nextParticle = lonLatLev + speed;\n\n  gl_FragColor = vec4(nextParticle, 0.0);\n}\n"]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){c.primitives.updatePosition.commandToExecute.outputTexture=c.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new fu({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return c.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return c.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:["\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D particlesSpeed; // (u, v, w, norm)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\n\nuniform float randomCoefficient; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nvarying vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n  vec2 randomSeed = randomCoefficient * seed;\n  float temp = dot(randomConstants.xy, randomSeed);\n  temp = fract(sin(temp) * (randomConstants.z + temp));\n  return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n  // ensure the longitude is in [0, 360]\n  float randomLon = mod(rand(seed, lonRange), 360.0);\n  float randomLat = rand(-seed, latRange);\n\n  return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n  return particle.y < -90.0 || particle.y > 90.0;\n}\n\nvoid main() {\n  vec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\n  vec4 nextSpeed = texture2D(particlesSpeed, v_textureCoordinates);\n  float speedNorm = nextSpeed.a;\n  float particleDropRate = dropRate + dropRateBump * speedNorm;\n\n  vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n  float randomNumber = rand(seed2, normalRange);\n\n  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n    gl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n  } else {\n    gl_FragColor = vec4(nextParticle, 0.0);\n  }\n}\n"]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){c.primitives.postProcessingPosition.commandToExecute.outputTexture=c.particlesTextures.postProcessingPosition}})}}}const bu="\nattribute vec3 position;\nattribute vec2 st;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n    textureCoordinate = st;\n    gl_Position = vec4(position, 1.0);\n}\n";class Cu{constructor(e,t,i,n,o){this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,i,n,o)}createRenderingTextures(e,t){const i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:vu(i),segmentsDepth:vu(n),currentTrailsColor:vu(i),currentTrailsDepth:vu(n),nextTrailsColor:vu(i),nextTrailsDepth:vu(n)}}createRenderingFramebuffers(e){this.framebuffers={segments:hu(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:hu(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:hu(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(e){const t=[];for(let u=0;u<e.particlesTextureSize;u++)for(let i=0;i<e.particlesTextureSize;i++)for(let n=0;n<6;n++)t.push(u/e.particlesTextureSize),t.push(i/e.particlesTextureSize);const i=new Float32Array(t),n=[],o=[-1,0,1],a=[-1,1];for(let u=0;u<e.maxParticles;u++)for(let e=0;e<o.length;e++)for(let t=0;t<a.length;t++)n.push(o[e]),n.push(a[t]),n.push(0);const r=new Float32Array(n),s=12*e.maxParticles,l=new Uint32Array(s);for(let u=0,d=0,p=0;u<e.maxParticles;u++)l[d++]=p+0,l[d++]=p+1,l[d++]=p+2,l[d++]=p+2,l[d++]=p+1,l[d++]=p+3,l[d++]=p+2,l[d++]=p+4,l[d++]=p+3,l[d++]=p+4,l[d++]=p+3,l[d++]=p+5,p+=6;const c=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new c({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:r})}),indices:l})}createRenderingPrimitives(e,t,i,n){const o=this;this.primitives={segments:new fu({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return n.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:["\nattribute vec2 st;\n// it is not normal itself, but used to control lines drawing\nattribute vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D previousParticlesPosition;\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nstruct adjacentPoints {\n  vec4 previous;\n  vec4 current;\n  vec4 next;\n};\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n  // WGS 84 geometric constants\n  float a = 6378137.0; // Semi-major axis\n  float b = 6356752.3142; // Semi-minor axis\n  float e2 = 6.69437999014e-3; // First eccentricity squared\n\n  float latitude = radians(lonLatLev.y);\n  float longitude = radians(lonLatLev.x);\n\n  float cosLat = cos(latitude);\n  float sinLat = sin(latitude);\n  float cosLon = cos(longitude);\n  float sinLon = sin(longitude);\n\n  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n  vec3 cartesian = vec3(0.0);\n  cartesian.x = (N_Phi + h) * cosLat * cosLon;\n  cartesian.y = (N_Phi + h) * cosLat * sinLon;\n  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n  return cartesian;\n}\n\nvec4 calculateProjectedCoordinate(vec3 lonLatLev) {\n  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n  vec3 particlePosition = convertCoordinate(lonLatLev);\n  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);\n  return projectedCoordinate;\n}\n\nvec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;\n  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;\n\n  float offsetLength = lineWidth / 2.0;\n  vec2 direction = normalize(pointB_XY - pointA_XY);\n  vec2 normalVector = vec2(-direction.y, direction.x);\n  normalVector.x = normalVector.x / aspect;\n  normalVector = offsetLength * normalVector;\n\n  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n  return offset;\n}\n\nvec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n\n  vec4 PointA = projectedCoordinates.previous;\n  vec4 PointB = projectedCoordinates.current;\n  vec4 PointC = projectedCoordinates.next;\n\n  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;\n  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;\n  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;\n\n  vec2 AB = normalize(pointB_XY - pointA_XY);\n  vec2 BC = normalize(pointC_XY - pointB_XY);\n\n  vec2 normalA = vec2(-AB.y, AB.x);\n  vec2 tangent = normalize(AB + BC);\n  vec2 miter = vec2(-tangent.y, tangent.x);\n\n  float offsetLength = lineWidth / 2.0;\n  float projection = dot(miter, normalA);\n  vec4 offset = vec4(0.0);\n  // avoid to use values that are too small\n  if (projection > 0.1) {\n    float miterLength = offsetLength / projection;\n    offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);\n    offset.x = offset.x / aspect;\n  } else {\n    offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);\n  }\n\n  return offset;\n}\n\nvoid main() {\n  vec2 particleIndex = st;\n\n  vec3 previousPosition = texture2D(previousParticlesPosition, particleIndex).rgb;\n  vec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\n  vec3 nextPosition = texture2D(postProcessingPosition, particleIndex).rgb;\n\n  float isAnyRandomPointUsed = texture2D(postProcessingPosition, particleIndex).a +\n    texture2D(currentParticlesPosition, particleIndex).a +\n    texture2D(previousParticlesPosition, particleIndex).a;\n\n  adjacentPoints projectedCoordinates;\n  if (isAnyRandomPointUsed > 0.0) {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = projectedCoordinates.previous;\n    projectedCoordinates.next = projectedCoordinates.previous;\n  } else {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);\n    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);\n  }\n\n  int pointToUse = int(normal.x);\n  float offsetSign = normal.y;\n  vec4 offset = vec4(0.0);\n  // render lines with triangles and miter joint\n  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail\n  if (pointToUse == -1) {\n    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);\n    gl_Position = projectedCoordinates.previous + offset;\n  } else {\n    if (pointToUse == 0) {\n      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);\n      gl_Position = projectedCoordinates.current + offset;\n    } else {\n      if (pointToUse == 1) {\n        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);\n        gl_Position = projectedCoordinates.next + offset;\n      } else {\n\n      }\n    }\n  }\n}\n"]}),fragmentShaderSource:new Cesium.ShaderSource({sources:["\nvoid main() {\n  const vec4 white = vec4(1.0);\n  gl_FragColor = white;\n}\n"]}),rawRenderState:gu({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new fu({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:mu(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return o.textures.segmentsColor},segmentsDepthTexture:function(){return o.textures.segmentsDepth},currentTrailsColor:function(){return o.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[bu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\n  vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\n\n  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n  float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  gl_FragColor = vec4(0.0);\n  if (pointsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + pointsColor;\n  }\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = gl_FragColor + trailsColor;\n  }\n  gl_FragDepthEXT = min(pointsDepth, trailsDepth);\n}\n"]}),rawRenderState:gu({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const e=o.framebuffers.currentTrails;o.framebuffers.currentTrails=o.framebuffers.nextTrails,o.framebuffers.nextTrails=e,o.primitives.trails.commandToExecute.framebuffer=o.framebuffers.nextTrails,o.primitives.trails.clearCommand.framebuffer=o.framebuffers.nextTrails}}),screen:new fu({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:mu(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return o.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[bu]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:["\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nvarying vec2 textureCoordinate;\n\nvoid main() {\n  vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\n  float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\n\n  if (trailsDepth < globeDepth) {\n    gl_FragColor = trailsColor;\n  } else {\n    gl_FragColor = vec4(0.0);\n  }\n}\n"]}),rawRenderState:gu({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class wu{constructor(e,t,i,n){this.context=e,this.data=t,this.particleSystemOptions=i,this.viewerParameters=n,this.particlesComputing=new yu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new Cu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(e){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach((e=>{this.particlesComputing.windTextures[e].destroy()})),Object.keys(this.particlesRendering.framebuffers).forEach((e=>{this.particlesRendering.framebuffers[e].destroy()})),this.context=e,this.particlesComputing=new yu(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new Cu(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach((t=>{e.framebuffer=this.particlesRendering.framebuffers[t],e.execute(this.context)}))}refreshParticles(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),e){const e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;const t=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=t}}applyParticleSystemOptions(e){let t=!1;this.particleSystemOptions.maxParticles!==e.maxParticles&&(t=!0),Object.keys(e).forEach((t=>{this.particleSystemOptions[t]=e[t]})),this.refreshParticles(t)}applyViewerParameters(e){Object.keys(e).forEach((t=>{this.viewerParameters[t]=e[t]})),this.refreshParticles(!1)}}function Ou(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function xu(e){return"string"==typeof e&&e.indexOf("/")>=0&&(e=e.split("/")),function(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!e)return!1;const t=e.length;return"number"==typeof t&&t>=0}(e)&&2===e.length?e[0]/e[1]:+e}var Su=F({name:"VcOverlayWindmap",props:{show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:4096,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object},emits:bs,setup(e,t){const i=O();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n;let a,r,s,l;const c=f((()=>{const t=Math.ceil(Math.sqrt(e.options.maxParticles));return{particlesTextureSize:t,maxParticles:t*t,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}}));let u=[];u.push(L((()=>e.show),(e=>{s.show=e}))),u.push(L((()=>e.data),(e=>{i.proxy.reload()}))),u.push(L((()=>c.value),(e=>{const t=i.cesiumObject;t&&t.applyParticleSystemOptions(e)}),{deep:!0})),u.push(L((()=>e.viewerParameters),(e=>{b();i.cesiumObject.applyViewerParameters(a)}),{deep:!0})),i.createCesiumObject=async()=>{const{viewer:t}=o;s=new Cesium.PrimitiveCollection,r=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),a={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const i={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},n={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return l=function(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,a=xu(e.delta),r=xu(t.delta),s=xu(e.start),l=xu(t.start),c=Math.floor(i*a)>=360;return{dimensions:function(){return{width:i,height:n}},isCylindrical:function(){return c},forEach:function(e,t){for(let n=t||0;n<o;n++){const t=n%i,o=Math.floor(n/i);if(e(s+t*a,l+o*r,n))return n+1}return NaN},closest:function(e,t){if(e==e&&t==t){const o=Ou(e-s,360)/a,u=(t-l)/r,d=Math.round(o),p=Math.round(u);if(0<=p&&p<n&&0<=d&&(d<i||d===i&&c)){const e=p*i+d;return d===i?e-i:e}}return NaN},closest4:function(e,t){if(e==e&&t==t){const o=Ou(e-s,360)/a,u=(t-l)/r,d=Math.floor(o),p=Math.floor(u),m=d+1,v=p+1,h=o-d,g=u-p;if(0<=p&&v<n&&0<=d&&(m<i||m===i&&c)){const e=p*i+d;let t=e+1;const n=e+i;let o=n+1;return m===i&&(t-=i,o-=i),[e,t,n,o,h,g]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}}}(i,n),b(),new wu(t.scene.context,e.data,c.value,a)},i.mount=async()=>{const{viewer:e}=o;e.scene.primitives.add(s);const t=e.scene,i=t.camera;return d(),i.moveStart.addEventListener(m),i.moveEnd.addEventListener(v),window.addEventListener("resize",g),t.preRender.addEventListener(y),!0},i.unmount=async()=>{p();const{viewer:e}=o,t=e.scene,i=t.camera;return p(),e.scene.primitives.remove(s),i.moveStart.removeEventListener(m),i.moveEnd.removeEventListener(v),window.removeEventListener("resize",g),t.preRender.removeEventListener(y),!0};const d=()=>{const e=i.cesiumObject;s.add(e.particlesComputing.primitives.calculateSpeed),s.add(e.particlesComputing.primitives.updatePosition),s.add(e.particlesComputing.primitives.postProcessingPosition),s.add(e.particlesRendering.primitives.segments),s.add(e.particlesRendering.primitives.trails),s.add(e.particlesRendering.primitives.screen)},p=()=>{const e=i.cesiumObject;s.remove(e.particlesComputing.primitives.calculateSpeed),s.remove(e.particlesComputing.primitives.updatePosition),s.remove(e.particlesComputing.primitives.postProcessingPosition),s.remove(e.particlesRendering.primitives.segments),s.remove(e.particlesRendering.primitives.trails),s.remove(e.particlesRendering.primitives.screen)},m=()=>{s.show=!1},v=()=>{b();i.cesiumObject.applyViewerParameters(a),s.show=!0};let h=!1;const g=()=>{h=!0,s.show=!1,s.removeAll()},y=()=>{if(h){const{viewer:e}=o,t=e.scene;i.cesiumObject.canvasResize(t.context),h=!1,d(),s.show=!0}},b=()=>{const{viewer:t}=o,i=t.scene,n=i.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))a.lonRange=Te(e.viewerParameters.lonRange),a.latRange=Te(e.viewerParameters.latRange);else{const e=function(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let a,r;o>Cesium.Math.THREE_PI_OVER_TWO?(a=0,r=Cesium.Math.TWO_PI):n-i<o?(a=i,r=i+o):(a=i,r=n),t.lon={min:Cesium.Math.toDegrees(a),max:Cesium.Math.toDegrees(r)};const s=e.south,l=e.north,c=e.height,u=c>Cesium.Math.PI/12?c/2:0;let d=Cesium.Math.clampToLatitudeRange(s-u),p=Cesium.Math.clampToLatitudeRange(l+u);return d<-Cesium.Math.PI_OVER_THREE&&(d=-Cesium.Math.PI_OVER_TWO),p>Cesium.Math.PI_OVER_THREE&&(p=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(d),max:Cesium.Math.toDegrees(p)},t}(n.computeViewRectangle(i.globe.ellipsoid));a.lonRange.x=e.lon.min,a.lonRange.y=e.lon.max,a.latRange.x=e.lat.min,a.latRange.y=e.lat.max}const s=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:n.getPixelSize(r,i.drawingBufferWidth,i.drawingBufferHeight);s>0&&(a.pixelSize=s)};return M((()=>{u.forEach((e=>e())),u=[]})),Object.assign(i.proxy,{getNearestUV:(t,i)=>{const n=l.closest(t,i);if(Cesium.defined(n))return[e.data.U.array[n],e.data.V.array[n]]}}),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _u=F({name:"VcOverlayDynamic",props:l(s({},bt),{name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}}),emits:l(s({},bs),{"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:(e,t)=>!0}),setup(e,t){const i=O();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,a=h([]),r=h({}),{emit:s}=t,l=h(null),c=h(null);let u=[];u.push(L((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),u.push(L((()=>e.name),(e=>{const t=i.cesiumObject;t&&(t.name=e)}))),u.push(L((()=>e.startTime),(e=>{const{viewer:t}=o;Cesium.defined(t)&&e&&(t.clock.startTime=Ye(e))}))),u.push(L((()=>e.stopTime),(e=>{const{viewer:t}=o;Cesium.defined(t)&&e&&(t.clock.stopTime=Ye(e))}))),u.push(L((()=>e.currentTime),(e=>{const{viewer:t}=o;Cesium.defined(t)&&e&&(t.clock.currentTime=Ye(e))}))),u.push(L((()=>e.multiplier),(e=>{const{viewer:t}=o;Cesium.defined(t)&&(t.clock.multiplier=e)}))),u.push(L((()=>e.clockStep),(e=>{const{viewer:t}=o;Cesium.defined(t)&&(t.clock.clockStep=e)}))),u.push(L((()=>e.clockRange),(e=>{const{viewer:t}=o;Cesium.defined(t)&&(t.clock.clockRange=e)}))),u.push(L((()=>e.canAnimate),(e=>{const{viewer:t}=o;Cesium.defined(t)&&(t.clock.canAnimate=e)}))),u.push(L((()=>e.shouldAnimate),(e=>{const{viewer:t}=o;Cesium.defined(t)&&(t.clock.shouldAnimate=e)}))),u.push(L((()=>D(e.dynamicOverlays)),((t,o)=>{if(!i.mounted)return;const r=i.cesiumObject;if(t.length===o.length){const i=[];for(let e=0;e<t.length;e++){const n=t[e],a=o[e],r=(e,t)=>{if("nodeTransformations"!==e&&"_definitionChanged"!==e)return t};JSON.stringify(n,r)!==JSON.stringify(a,r)&&i.push({newOptions:n,oldOptions:a})}i.forEach((t=>{const i=r.entities.getById(t.oldOptions.id);if(Cesium.defined(i)){if(t.oldOptions.id===t.newOptions.id)i&&Object.keys(t.newOptions).forEach((e=>{t.oldOptions[e]!==t.newOptions[e]&&(i[e]=n.transformProp(e,t.newOptions[e]))}));else if(i){r.entities.remove(i),K(a.value,(e=>e.id===i.id));const e=t.newOptions;p(r,[e])}const o=ee(a.value,(e=>e.id===i.id));if(Cesium.defined(o)){const i=t.oldOptions.sampledPositions,n=t.newOptions.sampledPositions,a=A(n,i,"id");A(i,n,"id").forEach((e=>{e.time&&o._sampledPosition.removeSample(e.time)})),a.forEach((t=>{t.time?o.addPosition(t.position,t.time):t.interval&&o.addPosition(t.position,t.interval||e.defaultInterval)}))}}}))}else{const e=A(t,o,"id"),i=A(o,t,"id"),n=[];for(let t=0;t<i.length;t++){const e=r.entities.getById(i[t].id);n.push(e)}n.forEach((e=>{r.entities.remove(e),K(a.value,(t=>t.id===e.id))})),p(r,e)}}),{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const d=t=>{let n=_e(i,"update:currentTime");e.currentTime!==t.currentTime&&n&&s("update:currentTime",t.currentTime),n=_e(i,"update:shouldAnimate"),e.shouldAnimate!==t.shouldAnimate&&n&&s("update:shouldAnimate",t.shouldAnimate),n=_e(i,"update:canAnimate"),e.canAnimate!==t.canAnimate&&n&&s("update:canAnimate",t.canAnimate),n=_e(i,"update:clockRange"),e.clockRange!==t.clockRange&&n&&s("update:clockRange",t.clockRange),n=_e(i,"update:clockStep"),e.clockStep!==t.clockStep&&n&&s("update:clockStep",t.clockStep),n=_e(i,"update:multiplier"),e.multiplier!==t.multiplier&&n&&s("update:multiplier",t.multiplier),n=_e(i,"update:startTime"),e.startTime!==t.startTime&&n&&s("update:startTime",t.startTime),n=_e(i,"update:stopTime"),e.stopTime!==t.stopTime&&n&&s("update:stopTime",t.stopTime),m(t);const{JulianDate:o,Cartesian3:r}=Cesium;if(n=_e(i,"stopArrived"),n&&e.shouldAnimate)for(let i=0;i<a.value.length;i++){const n=a.value[i],l=n._sampledPosition.getValue(t.currentTime),c=e.dynamicOverlays[i];for(let i=0;i<c.sampledPositions.length;i++){const a=c.sampledPositions[i],u=Me(a.position),d=Ye(a.time),p=r.equalsEpsilon(l,u,e.positionPrecision),m=o.equalsEpsilon(t.currentTime,d,e.timePrecision);let v=!1;switch(e.stopArrivedFlag){case"time":v=m;break;case"position":v=p;break;case"both":v=m&&p;break;case"or":v=m||p}if(v){s("stopArrived",n,a);break}}}},p=(t,i)=>{for(let o=0;o<i.length;o++){const r=i[o],s=n.transformProps(r),l=new ca(s);a.value.push(l);const c=t.entities.add(l._entity);s.sampledPositions.forEach((t=>{t.time?l.addPosition(t.position,t.time):t.interval&&(t.time=l.addPosition(t.position,t.interval||e.defaultInterval))})),r.id!==c.id&&(r.id=c.id),ge(c,s,["id"])}};i.mount=async()=>{const{viewer:t}=o,n=i.cesiumObject;return n.show=e.show,p(n,e.dynamicOverlays),t.dataSources.add(n).then((()=>{r.value.startTime=t.clock.startTime,r.value.stopTime=t.clock.stopTime,r.value.currentTime=t.clock.currentTime,r.value.multiplier=t.clock.multiplier,r.value.clockStep=t.clock.clockStep,r.value.clockRange=t.clock.clockRange,r.value.canAnimate=t.clock.canAnimate,r.value.shouldAnimate=t.clock.shouldAnimate,e.startTime&&(t.clock.startTime=Ye(e.startTime)),e.stopTime&&(t.clock.stopTime=Ye(e.stopTime)),e.currentTime&&(t.clock.currentTime=Ye(e.currentTime)),t.clock.multiplier=e.multiplier,t.clock.clockStep=e.clockStep,t.clock.clockRange=e.clockRange,t.clock.canAnimate=!1,t.clock.shouldAnimate=e.shouldAnimate,t.clock.onTick.addEventListener(d);const n=_e(i,"onStop");return n&&t.clock.onStop.addEventListener(n),!0}))},i.unmount=async()=>{const{viewer:e}=o,t=i.cesiumObject;e.dataSources.remove(t,!0),e.clock.startTime=r.value.startTime,e.clock.stopTime=r.value.stopTime,e.clock.multiplier=r.value.multiplier,e.clock.clockStep=r.value.clockStep,e.clock.clockRange=r.value.clockRange,e.clock.canAnimate=r.value.canAnimate,e.clock.shouldAnimate=r.value.shouldAnimate,a.value.length=0,e.clock.onTick.removeEventListener(d);const n=_e(i,"onStop");return n&&e.clock.onStop.removeEventListener(n),l.value&&(e.trackedEntity=void 0),!0};const m=e=>{var t,i,n,a,r,s,u,d;if(c.value&&l.value){const{viewer:p}=o;if(Cesium.JulianDate.greaterThan(e.currentTime,e.stopTime))return p.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(l.value=null);const m=l.value._sampledPosition.getValue(e.currentTime);let v=new Cesium.HeadingPitchRange;switch(c.value.mode){case"TP":v.heading=0,v.pitch=(null==(i=null==(t=c.value)?void 0:t.offset)?void 0:i.pitch)||Cesium.Math.toRadians(-90),v.range=(null==(a=null==(n=c.value)?void 0:n.offset)?void 0:a.range)||1e3;break;case"FP":{const t=Cesium.JulianDate.addSeconds(e.currentTime,1/60,new Cesium.JulianDate),i=l.value._sampledPosition.getValue(t)||m;v.heading=Cesium.Math.toRadians(Xe(m,i)),v.pitch=((null==(s=null==(r=c.value)?void 0:r.offset)?void 0:s.pitch)||Cesium.Math.toRadians(-45))+Qe(m,i),v.range=(null==(d=null==(u=c.value)?void 0:u.offset)?void 0:d.range)||500;break}case"CUSTOM":v=qe(c.value.offset)}p.camera.lookAt(m,v)}},v=e=>e instanceof ca?e:"string"==typeof e?ee(a.value,(t=>t.id===e)):"number"==typeof e?a.value[e]:a.value[0];return M((()=>{u.forEach((e=>e())),u=[]})),Object.assign(i.proxy,{getOverlays:()=>a.value,getOverlay:v,trackOverlay:(e,t)=>{var i;const{viewer:n}=o;if("FREE"===(t=t||{mode:null===c.value?"FP":"FREE"}).mode)return n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(l.value&&(n.trackedEntity=void 0,l.value=null,c.value=null));l.value=v(e),n.trackedEntity=te(l.value._entity),"TRACKED"===t.mode?((null==(i=null==t?void 0:t.viewFrom)?void 0:i.length)&&(n.trackedEntity.viewFrom=new Cesium.Cartesian3(t.viewFrom[0],t.viewFrom[1],t.viewFrom[2])),c.value=null):c.value=t},zoomToOverlay:(e,t)=>{const{viewer:n}=o;let a;if(l.value&&(n.trackedEntity=void 0,l.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=te(v(e)._entity);t.push(i)})),a=t}else a=i.cesiumObject;else a=te(v(e)._entity);else a=i.cesiumObject;return n.zoomTo(a,Cesium.defined(t)?qe(t):void 0)},flyToOverlay:(e,t)=>{const{viewer:n}=o;let a;if(l.value&&(n.trackedEntity=void 0,l.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=te(v(e)._entity);t.push(i)})),a=t}else a=i.cesiumObject;else a=te(v(e)._entity);else a=i.cesiumObject;return t=t||{duration:3},Cesium.defined(t.offset)&&(t.offset=qe(t.offset)),n.flyTo(a,t)}}),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Fc,uu,pu,Su,_u].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Eu=Fc,Pu=uu,Tu=pu,Mu=Su,Iu=_u;var ju=F({name:"VcCollectionBillboard",props:l(s(s(s(s(s(s({},bn),Cn),bt),qn),fn),yn),{billboards:{type:Array,default:()=>[]}}),emits:Ss,setup(e,t){const i=O();i.cesiumClass="BillboardCollection";const n=Io(e,t,i);let o=[];o.push(L((()=>D(e.billboards)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._billboards.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==n?void 0:n.transformProp(i,e.newOptions[i]))}))}))}else{const i=A(e,t,"id"),n=A(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._billboards.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0})),i.alreadyListening.push("billboards");const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=null==n?void 0:n.transformProps(o),r=e.add(a);ge(r,a)}};return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e),i=new Cesium.BillboardCollection(t);return a(i,e.billboards),i},M((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Lu=F({name:"VcBillboard",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},nt),ot),rt),st),lt),ct),ut),dt),wn),pt),vt),ht),et),gt),ft),yt),bt),Ct),wt),Ot),xt),qn),emits:Ss,setup(e,t){const i=O();return i.cesiumClass="Billboard",Mo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Au=F({name:"VcCumulusCloud",props:l(s(l(s(l(s({brightness:{type:Number,default:1}},ot),{maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:Me}}}),et),{scale:{type:Object,watcherOptions:{cesiumObjectBuilder:Te}}}),bt),{slice:{type:Number,default:-1}}),emits:Ss,setup(e,t){const i=O();return i.cesiumClass="CumulusCloud",Mo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Du=F({name:"VcCollectionCloud",props:l(s({},bt),{noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}}),emits:bs,setup(e,t){var i;const n=O();n.cesiumClass="CloudCollection";const o=Io(e,t,n);if(void 0===o)return;n.alreadyListening.push("clouds");let a=[];a.push(L((()=>D(e.clouds)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._clouds.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=A(e,t,"id"),o=A(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._clouds.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n,Au.props),r=e.add(a);ge(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e,Au.props),i=new Cesium.CloudCollection(t);return r(i,e.clouds),i},M((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(s),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(s))}});var Ru=F({name:"VcCollectionLabel",props:l(s(s(s(s(s(s({},fn),yn),bn),Cn),bt),qn),{labels:{type:Array,default:()=>[]}}),emits:Ss,setup(e,t){var i;const n=O();n.cesiumClass="LabelCollection";const o=Io(e,t,n);if(void 0===o)return;n.alreadyListening.push("labels");let a=[];a.push(L((()=>D(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=A(e,t,"id"),o=A(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=e.add(a);ge(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.LabelCollection(t);return r(i,e.labels),i},M((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(s),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(s))}});var ku=F({name:"VcLabel",props:s(s(s(l(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},ai),ri),rt),st),lt),si),ii),ut),dt),wn),Tt),Mt),vt),ht),et),ft),yt),bt),oi),ni),ti),{totalScale:{type:Number,default:1}}),wt),Ot),qn),emits:Ss,setup(e,t){const i=O();return i.cesiumClass="Label",Mo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Bu=F({name:"VcCollectionPoint",props:l(s(s(s(s(s({},fn),yn),Cn),bt),qn),{points:{type:Array,default:()=>[]}}),emits:Ss,setup(e,t){const i=O();i.cesiumClass="PointPrimitiveCollection";const n=Io(e,t,i);if(void 0===n)return;i.alreadyListening.push("points");let o=[];o.push(L((()=>D(e.points)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],a=t[n];JSON.stringify(o)!==JSON.stringify(a)&&i.push({newOptions:o,oldOptions:a})}i.forEach((e=>{const t=o._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}))}))}else{const i=A(e,t,"id"),n=A(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._pointPrimitives.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0}));const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const a=n.transformProps(o),r=e.add(a);ge(r,a)}};return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=new Cesium.PointPrimitiveCollection(t);return a(i,e.points),i},M((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Nu=F({name:"VcPoint",props:s(s(s(s(s(s(s(s(s(s(s(s({},ot),rt),st),wn),Tt),Mt),Si),et),yt),bt),wt),qn),emits:Ss,setup(e,t){const i=O();return i.cesiumClass="PointPrimitive",Mo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Vu=F({name:"VcCollectionPolyline",props:l(s(s(s(s({},fn),yn),bt),qn),{polylines:{type:Array,default:()=>[]}}),emits:Ss,setup(e,t){var i;const n=O();n.cesiumClass="PolylineCollection";const o=Io(e,t,n);if(void 0===o)return;n.alreadyListening.push("polylines");let a=[];a.push(L((()=>D(e.polylines)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._polylines.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=A(e,t,"id"),o=A(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._polylines.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=e.add(a);ge(r,a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PolylineCollection(t);return r(i,e.polylines),i},M((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(s),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(s))}});var zu=F({name:"VcPolyline",props:s(s(s(s(s(s(s(s({},st),wn),On),Et),jt),bt),xt),qn),emits:Ss,setup(e,t){const i=O();return i.cesiumClass="Polyline",Mo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Fu=F({name:"VcCollectionPrimitive",props:l(s(l(s({},bt),{destroyPrimitives:{type:Boolean,default:!0}}),qn),{polygons:{type:Array,default:()=>[]}}),emits:Ss,setup(e,t){var i;const n=O();n.cesiumClass="PrimitiveCollection";const o=Io(e,t,n);if(void 0===o)return;n.alreadyListening.push("polygons");let a=[];a.push(L((()=>D(e.polygons)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],a=t[i];JSON.stringify(o)!==JSON.stringify(a)&&n.push({newOptions:o,oldOptions:a})}n.forEach((e=>{const t=i._primitives.find((t=>t._id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=A(e,t,"id"),o=A(t,e,"id"),a=[];for(let e=0;e<o.length;e++){const t=i._primitives.find((t=>t.id===o[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),r(i,n)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const a=o.transformProps(n),r=new la(a);r._vcParent=e,ge(r,a),e.add(r)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PrimitiveCollection(t);return r(i,e.polygons),i},M((()=>{a.forEach((e=>e())),a=[]}));const s=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?z("i",{class:pe(s),style:{display:"none !important"}},Ea(t.slots.default)):G(pe(s))}});var Hu=F({name:"VcPolygon",props:s(s(s(s(s(s(s(s(s(s(s(s({},jt),Mn),pn),mn),bt),wn),kt),ji),$i),sn),ln),qn),emits:Ss,setup(e,t){const i=O();i.cesiumClass="PolygonPrimitive";const n=Mo(e,t,i);if(void 0===n)return;let o=[];return o.push(L((()=>e.clampToGround),(e=>{const t=i.cesiumObject;t&&(t.clampToGround=e)}))),o.push(L((()=>e.positions),(e=>{const t=i.cesiumObject;t&&(t.positions=Ie(e))}))),o.push(L((()=>e.polygonHierarchy),(e=>{const t=i.cesiumObject;t&&(t.polygonHierarchy=De(e))}))),o.push(L((()=>e.appearance),(e=>{const t=i.cesiumObject;t&&(t.appearance=Ne.call(i,e))}))),o.push(L((()=>e.depthFailAppearance),(e=>{const t=i.cesiumObject;t&&(t.depthFailAppearance=Ne.call(i,e))}))),o.push(L((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),o.push(L((()=>e.classificationType),(e=>{const t=i.cesiumObject;t&&(t.classificationType=e)}))),i.createCesiumObject=async()=>{const t=n.transformProps(e);return new la(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return t._vcParent=e,e&&e.add(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},M((()=>{o.forEach((e=>e())),o=[]})),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[ju,Du,Ru,Bu,Vu,Fu,Au,Lu,ku,Nu,zu,Hu].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Uu=ju,Wu=Du,Gu=Ru,$u=Bu,Zu=Vu,Yu=Fu,qu=Lu,Xu=Au,Qu=ku,Ju=Nu,Ku=zu,ed=Hu;var td=F({name:"VcGeometryInstance",props:l(s(s({geometry:Object},fn),wn),{attributes:Object}),emits:l(s({},bs),{"update:geometry":e=>!0}),setup(e,t){const i=O();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{emit:o}=t,a=h(0);i.createCesiumObject=async()=>{const t=n.transformProps(e);return t.geometry||(t.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(t)},i.mount=async()=>{var e;const t=Pe(i).proxy;void 0!==t.__childCount&&(a.value=t.__childCount.value||0,t.__childCount.value+=1);const n=i.cesiumObject;return null==(e=t.__updateGeometryInstances)||e.call(t,n,a.value),!0},i.unmount=async()=>{var e;const t=i.cesiumObject,n=Pe(i).proxy;return null==(e=n.__removeGeometryInstances)||e.call(n,t),!0};const r=()=>xe(n.getServices(),{get geometryInstance(){return i.cesiumObject}});return g(se,r()),i.appContext.config.globalProperties.$VueCesium=r(),Object.assign(i.proxy,{__updateGeometry:e=>{if(_e(i,"update:geometry"))o("update:geometry",e);else{i.cesiumObject.geometry=e}return!0}}),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});td.install=e=>{e.component(td.name,td)};const id=td,nd=id;var od=F({name:"VcGeometryBox",props:s(s({},St),Sn),emits:bs,setup(e,t){const i=O();i.cesiumClass="BoxGeometry";const n=so(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ad=F({name:"VcGeometryBoxOutline",props:s({},St),emits:bs,setup(e,t){const i=O();i.cesiumClass="BoxOutlineGeometry";const n=so(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var rd=F({name:"VcGeometryCircle",props:s(s(s(s(s(s(s(s({},_n),En),$i),ct),Rt),Sn),Lt),Gt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CircleGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var sd=F({name:"VcGeometryCircleOutline",props:s(s(s(s(s(s(s({},_n),En),$i),ct),Rt),Lt),Ft),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CircleOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ld=F({name:"VcGeometryPolygonCoplanar",props:s(s(s(s({},Mn),$i),Sn),Gt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CoplanarPolygonGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var cd=F({name:"VcGeometryPolygonCoplanarOutline",props:s({},Mn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CoplanarPolygonOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ud=F({name:"VcGeometryCorridor",props:s(s(s(s(s(s(s(s({},jt),xt),$i),Rt),ct),Lt),Sn),Dt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CorridorGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var dd=F({name:"VcGeometryCorridorOutline",props:s(s(s(s(s(s(s({},jt),xt),$i),Rt),ct),Lt),Dt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CorridorOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var pd=F({name:"VcGeometryCylinder",props:s(s(s(s(s({},Nt),Vt),zt),Ht),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CylinderGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var md=F({name:"VcGeometryCylinderOutline",props:s(s(s(s(s({},Nt),Vt),zt),Ht),Ft),emits:bs,setup(e,t){const i=O();return i.cesiumClass="CylinderOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var vd=F({name:"VcGeometryEllipse",props:s(s(s(s(s(s(s(s(s(s({},_n),Ut),Wt),$i),ct),Lt),gt),Gt),Rt),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipseGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var hd=F({name:"VcGeometryEllipseOutline",props:s(s(s(s(s(s(s(s(s(s({},_n),Ut),Wt),$i),ct),Lt),gt),Gt),Rt),Ft),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipseOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var gd=F({name:"VcGeometryEllipsoid",props:s(s(s(s(s(s(s(s(s({},$t),Zt),Yt),qt),Xt),Qt),Jt),Kt),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipsoidGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var fd=F({name:"VcGeometryEllipsoidOutline",props:s(s(s(s(s(s(s(s(s({},$t),Zt),Yt),qt),Xt),Qt),Jt),Kt),ei),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipsoidOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var yd=F({name:"VcGeometryFrustum",props:s(s(s(s({},Pn),Tn),it),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="FrustumGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var bd=F({name:"VcGeometryFrustumOutline",props:s(s(s({},Pn),Tn),it),emits:bs,setup(e,t){const i=O();return i.cesiumClass="FrustumOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Cd=F({name:"VcGeometryGroundPolyline",props:s(s(s(s(s({},jt),xt),Rt),On),Mi),emits:bs,setup(e,t){const i=O();return i.cesiumClass="GroundPolylineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var wd=F({name:"VcGeometryPlane",props:s({},Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PlaneGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}}),Od=F({name:"VcGeometryPlaneOutline",emits:bs,setup(e,t){const i=O();return i.cesiumClass="PlaneOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var xd=F({name:"VcGeometryPolygon",props:s(s(s(s(s(s(s(s(s(s(s({},Mn),ct),Lt),Sn),Gt),$i),Rt),Ei),Pi),Ti),Mi),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolygonGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sd=F({name:"VcGeometryPolygonOutline",props:s(s(s(s(s(s(s(s({},Mn),ct),Lt),Sn),$i),Rt),Ei),Mi),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolygonOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _d=F({name:"VcGeometryPolyline",props:s(s(s(s(l(s(s(s({},jt),xt),Hn),{colorsPerVertex:{type:Boolean,default:!1}}),Mi),Rt),Sn),$i),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolylineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ed=F({name:"VcGeometryPolylineVolume",props:s(s(s(s(s(s({},kn),Rn),$i),Rt),Sn),Dt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolylineVolumeGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pd=F({name:"VcGeometryPolylineVolumeOutline",props:s(s(s(s(s({},kn),Rn),$i),Rt),Dt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolylineVolumeOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Td=F({name:"VcGeometryRectangle",props:s(s(s(s(s(s(s(s({},Wi),Sn),$i),Rt),ct),gt),Gt),Lt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="RectangleGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Md=F({name:"VcGeometryRectangleOutline",props:s(s(s(s(s(s({},Wi),$i),Rt),ct),gt),Lt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="RectangleOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Id=F({name:"VcGeometrySimplePolyline",props:s(s(s(l(s(s({},jt),Hn),{colorsPerVertex:{type:Boolean,default:!1}}),Mi),Rt),$i),emits:bs,setup(e,t){const i=O();return i.cesiumClass="SimplePolylineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var jd=F({name:"VcGeometrySphere",props:s(s(s(s({},En),Jt),Kt),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="SphereGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ld=F({name:"VcGeometrySphereOutline",props:s(s(s(s({},En),Jt),Kt),ei),emits:bs,setup(e,t){const i=O();return i.cesiumClass="SphereOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ad=F({name:"VcGeometryWall",props:s(s(s(s(s(s({},jt),Rt),ki),Ri),$i),Sn),emits:bs,setup(e,t){const i=O();return i.cesiumClass="WallGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Dd=F({name:"VcGeometryWallOutline",props:s(s(s(s(s({},jt),Rt),ki),Ri),$i),emits:bs,setup(e,t){const i=O();return i.cesiumClass="WallOutlineGeometry",so(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[od,ad,rd,sd,ld,cd,ud,dd,pd,md,vd,hd,gd,fd,yd,bd,Cd,wd,Od,xd,Sd,_d,Ed,Pd,Td,Md,Id,jd,Ld,Ad,Dd].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Rd=od,kd=ad,Bd=rd,Nd=sd,Vd=ld,zd=cd,Fd=ud,Hd=dd,Ud=pd,Wd=md,Gd=vd,$d=hd,Zd=gd,Yd=fd,qd=yd,Xd=bd,Qd=Cd,Jd=wd,Kd=Od,ep=xd,tp=Sd,ip=_d,np=Ed,op=Pd,ap=Td,rp=Md,sp=Id,lp=jd,cp=Ld,up=Ad,dp=Dd;function pp(e,t,i,n,o){i.cesiumClass=n,i.cesiumEvents=[];const{t:a}=eo(),{emit:r}=t,s=pe(n).split("-");"VcMeasurementDistance"===n&&e.showComponentLines&&(s[2]="component-distance"),"VcDrawingRegular"!==n&&"VcMeasurementRegular"!==n||(4===e.edge&&(s[2]="rectangle"),360===e.edge&&(s[2]="circle"));let l=s[2];s[3]&&(l=`${s[2]}-${s[3]}`);const c=h(""),u=h({drawingTipStart:e.drawtip.drawingTipStart||a(`${s[0]}.${s[1]}.${s[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||a(`${s[0]}.${s[1]}.${s[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||a(`${s[0]}.${s[1]}.${s[2]}.drawingTipEditing`)}),d=h(Yo),p=h(!1),m=h([0,0,0]),v=h(!1),g=h([0,0,0]),f=h(null),y=h(null),b=h(null),C=h(""),{registerTimeout:w,removeTimeout:O}=xr();i.createCesiumObject=async()=>b;return{drawingType:l,drawTip:c,drawTipOpts:u,drawStatus:d,canShowDrawTip:p,drawTipPosition:m,showEditor:v,editorPosition:g,mouseoverPoint:f,editingPoint:y,primitiveCollectionRef:b,editorType:C,onMouseoverPoints:t=>{var i,n;const{drawingHandlerActive:a,viewer:s}=o;e.editable&&d.value!==qo&&a&&(t.pickedFeature.primitive.pixelSize=1.5*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),w((()=>{f.value=t.pickedFeature.primitive,g.value=t.pickedFeature.primitive.position,v.value=!0,p.value=!1,m.value=[0,0,0]}),null==(n=e.editorOpts)?void 0:n.delay)),r("mouseEvt",{type:t.type,name:l,target:t},s)},onMouseoutPoints:t=>{var i,n;const{viewer:a,selectedDrawingActionInstance:s}=o;e.editable&&(t.pickedFeature.primitive.pixelSize=1*(null==(i=e.pointOpts)?void 0:i.pixelSize),O(),w((()=>{g.value=[0,0,0],f.value=void 0,v.value=!1}),null==(n=e.editorOpts)?void 0:n.hideDelay),s&&(p.value=!0)),r("mouseEvt",{type:t.type,name:l,target:t},a)},onMouseenterEditor:e=>{O()},onMouseleaveEditor:t=>{var i;O(),w((()=>{var t;g.value=[0,0,0],f.value.pixelSize=1*(null==(t=e.pointOpts)?void 0:t.pixelSize),f.value=void 0,v.value=!1}),null==(i=e.editorOpts)?void 0:i.hideDelay)},onPrimitiveCollectionReady:e=>{e.cesiumObject._vcId=n},onVcCollectionPointReady:function(e){const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[n].pass=Cesium.Pass.OPAQUE,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass=Cesium.Pass.OVERLAY,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function mp(e,t,i){const n=O(),o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),r=o.$services,{emit:c}=t,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:v,canShowDrawTip:g,drawTipPosition:y,showEditor:b,editorPosition:C,mouseoverPoint:w,editingPoint:x,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:M,onPrimitiveCollectionReady:I,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=pp(e,t,n,i,r),D=h([]);let R;e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((e=>{const t={positions:Ie(e),show:!0,drawStatus:Xo,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(t,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),D.value.push(t)}));const k=f((()=>{const t=[],{Cartesian3:n,Cartographic:o,Rectangle:a,createGuid:c,defined:u,Math:d,Ray:p}=Cesium,{viewer:v}=r;return D.value.forEach((p=>{var h,g,f,y,b,C,w,O,x,_,E,P,T,M,I,j,L,A,D;const R=p.positions[0],k=p.positions[1];if(n.equals(R,k))return;const B=[],V=0===(null==(h=e.polylineOpts)?void 0:h.arcType)?n.distance(R,k):We(R,k,r.viewer.scene.globe.ellipsoid),z=n.midpoint(R,k,{}),F=Xe(R,k),H=Qe(R,k);p.points=p.positions.map((e=>({position:e})));const U=l(s({},p),{distance:V,heading:F,pitch:H}),W=Object.assign({},e.labelOpts,U.labelOpts);if("VcDrawingRectangle"===i||"VcMeasurementRectangle"===i){const t=o.fromCartesian(R,v.scene.globe.ellipsoid),i=o.fromCartesian(k,v.scene.globe.ellipsoid),r=t.height;!e.clampToGround&&(i.height=r);const s=a.fromCartesianArray(p.positions,v.scene.globe.ellipsoid),l=[s.west,s.north,r,s.east,s.north,r,s.east,s.south,r,s.west,s.south,r,s.west,s.north,r],c=n.fromRadiansArrayHeights(l,v.scene.globe.ellipsoid);Object.assign(U,{polygonPositions:c,height:r})}else if("VcDrawingRegular"===i||"VcMeasurementRegular"===i){const t=p.positions[0],i=p.positions[1],n=function(e,t,i,n){const{Camera:o,Cartesian3:a,Math:r}=Cesium,s=new o(i);if(a.equals(e,t))return;let l=a.subtract(t,e,{});l=a.normalize(l,l);let c=a.subtract(e,new a,{});c=a.normalize(c,c),s.setView({destination:e,orientation:{direction:l,up:c}}),n=n||[0,0,0];let u=s.heading;return u-=r.PI_OVER_TWO,u<0&&(u+=r.TWO_PI),n.splice(0,n.length,u,s.pitch,s.roll),n}(t,i,v.scene);if(!m(n)&&u(n)){const a=[],r=o.fromCartesian(t,v.scene.globe.ellipsoid),s=o.fromCartesian(i,v.scene.globe.ellipsoid);!e.clampToGround&&(s.height=r.height),a.push(o.toCartesian(s,v.scene.globe.ellipsoid));for(let i=0;i<(e.edge||4)-1;i++){const i=Ge(t,n[0]+=2*Math.PI/(e.edge||4),V,v.scene.globe.ellipsoid);a.push(i)}Object.assign(U,{polygonPositions:a,height:r.height})}}else if("VcAnalysisViewshed"===i)Object.assign(U.viewshedOpts,{startPosition:R,endPosition:k});else if("VcAnalysisSightline"===i)if("segment"===e.sightlineType){const e=[];e.push(R);const t=[];S.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&t.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&t.push(e)}));const i=Je(R,k,r.viewer,t);u(i)&&e.push(i),e.push(k);let o=0;for(let a=0;a<e.length-1;a++){o+=n.distance(e[a],e[a+1])}Object.assign(U,{positions:e,distance:o})}else e.sightlineType;else B.push(s({position:z,id:c(),text:ia.distanceToString(V,null==(g=e.measureUnits)?void 0:g.distanceUnits,e.locale,null==(f=e.decimals)?void 0:f.distance)},W));if(U.polygonPositions&&U.polygonPositions.length){const t=Object.assign({},e.labelsOpts,U.labelsOpts),i=U.polygonPositions.slice();e.loop&&i.length>2&&i.push(i[0]);for(let a=0;a<i.length-1;a++){let o=0;if(o=0===(null==(y=e.polylineOpts)?void 0:y.arcType)?We(i[a],i[a+1],r.viewer.scene.globe.ellipsoid):n.distance(i[a],i[a+1]),o>0&&i.length>2&&e.showDistanceLabel&&B.push(s({text:ia.distanceToString(o,null==(b=e.measureUnits)?void 0:b.distanceUnits,e.locale,null==(C=e.decimals)?void 0:C.distance),position:n.midpoint(i[a],i[a+1],{}),id:c()},t)),i.length>2&&e.showAngleLabel&&(a>0||e.loop)){const o=i[0===a?i.length-2:a-1],r=i[a],l=i[a+1],u=n.subtract(o,r,{}),d=n.subtract(l,r,{});let p=0;n.ZERO.equals(u)||n.ZERO.equals(d)||(p=n.angleBetween(u,d)),B.push(s({text:ia.angleToString(p,null==(w=e.measureUnits)?void 0:w.angleUnits,e.locale,null==(O=e.decimals)?void 0:O.angle),position:r,id:c()},t))}}const o=$e(i);e.showLabel&&B.push(s({text:ia.areaToString(o,null==(x=e.measureUnits)?void 0:x.areaUnits,e.locale,null==(_=e.decimals)?void 0:_.area),position:p.positions[0],id:c()},W))}e.showComponentLines&&(Object.assign(U,{xyPolylinePositions:[new n,new n,new n],xyBoxPositions:[new n,new n,new n],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),N(U),B.push(s({position:U.xLabelPosition,id:c(),text:ia.distanceToString(U.xDistance||0,null==(E=e.measureUnits)?void 0:E.distanceUnits,e.locale,null==(P=e.decimals)?void 0:P.distance)},e.xLabelOpts)),B.push(s({position:U.yLabelPosition,id:c(),text:ia.distanceToString(U.yDistance||0,null==(T=e.measureUnits)?void 0:T.distanceUnits,e.locale,null==(M=e.decimals)?void 0:M.distance)},e.yLabelOpts)),B.push(s({position:U.xAnglePosition,id:c(),text:ia.angleToString(U.xAngle||0,null==(I=e.measureUnits)?void 0:I.angleUnits,e.locale,null==(j=e.decimals)?void 0:j.angle)},e.xAngleLabelOpts)),B.push(s({position:U.yAnglePosition,id:c(),text:ia.angleToString(U.yAngle||0,null==(L=e.measureUnits)?void 0:L.angleUnits,e.locale,null==(A=e.decimals)?void 0:A.angle)},e.yAngleLabelOpts))),Object.assign(U,{labels:B}),U.positionsDegreesArray=U.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,v.scene.globe.ellipsoid);return[d.toDegrees(t.longitude),d.toDegrees(t.latitude),t.height]})),(null==(D=null==U?void 0:U.polygonPositions)?void 0:D.length)&&(U.polygonPositionsDegreesArray=U.polygonPositions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,v.scene.globe.ellipsoid);return[d.toDegrees(t.longitude),d.toDegrees(t.latitude),t.height]}))),t.push(U)})),t}));n.createCesiumObject=async()=>S,n.mount=async()=>{const{viewer:t}=r;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.addEventListener(F),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.addEventListener(V)),!0},n.unmount=async()=>{const{viewer:t}=r;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.removeEventListener(F),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.removeEventListener(V)),!0};const N=e=>{const{Cartesian3:t,Math:i,defined:n}=Cesium,{viewer:o}=r,a=o.scene.frameState.mapProjection.ellipsoid,s=e.positions[0],l=e.positions[1],c=a.cartesianToCartographic(s,{});if(!n(c))return;const u=a.cartesianToCartographic(l,{}),d=c.height,p=u.height;let m,v,h,g;d<p?(m=s,v=l,g=p,h=d):(m=l,v=s,g=d,h=p);const f=e.xyPolylinePositions;if(void 0===f)return;f[0]=m,f[2]=v;let y=a.geodeticSurfaceNormal(m,{});y=t.multiplyByScalar(y,g-h,y);const b=t.add(m,y,f[1]);if(!t.equalsEpsilon(b,v,i.EPSILON10)||!t.equalsEpsilon(b,m,i.EPSILON10)){let i=t.subtract(v,b,{}),n=t.subtract(m,b,{});const o=Math.min(t.magnitude(i),t.magnitude(n)),a=15<o?.15*o:.25*o;i=t.normalize(i,i),n=t.normalize(n,n),i=t.multiplyByScalar(i,a,i),n=t.multiplyByScalar(n,a,n);const r=e.xyBoxPositions;if(void 0===r)return;t.add(b,i,r[0]),t.add(r[0],n,r[1]),t.add(b,n,r[2]),e.xLabelPosition=t.midpoint(b,v,{}),e.yLabelPosition=t.midpoint(m,b,{}),e.xAnglePosition=v,e.yAnglePosition=m;const s=t.subtract(b,v,{}),l=t.subtract(b,m,{});let c=t.subtract(v,m,{});e.yAngle=t.angleBetween(l,c),c=t.negate(c,c),e.xAngle=t.angleBetween(s,c),e.xDistance=t.magnitude(s),e.yDistance=t.magnitude(l)}},V=()=>{k.value.forEach(((e,t)=>{var i;const n=e.polygonPositions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:s,HorizontalOrigin:l}=Cesium,{viewer:c}=r,u=c.scene;let d=e.positions[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?s.clone(p,{}):s.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=S.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];if(!g)return;for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x),o=h[t-1];o&&o!==g&&(o.horizontalOrigin=0<e?l.LEFT:l.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=s.clone(i,m)}e.drawStatus===Xo&&(g.position=d)}}}))},F=()=>{k.value.forEach(((t,i)=>{var n,o,a;const{defined:s,SceneTransforms:l,HorizontalOrigin:c}=Cesium,{viewer:u}=r,d=u.scene,p=null==(n=S.value)?void 0:n.cesiumObject,v=t.positions,h=v[0],g=v[1],f=l.wgs84ToWindowCoordinates(d,h,{}),y=l.wgs84ToWindowCoordinates(d,g,{});if(s(f)&&s(y)){const t=p._primitives.filter((e=>e instanceof Cesium.LabelCollection));if(t.length){const n=t[i].get(0);let r,s,l,u;e.showComponentLines&&(r=t[i].get(2),s=t[i].get(3),l=Te(null==(o=e.yLabelOpts)?void 0:o.pixelOffset),u=Te(null==(a=e.xAngleLabelOpts)?void 0:a.pixelOffset)),(f.y-y.y)/(y.x-f.x)>0?(m(r)||m(l)||(l.x=-9,r.pixelOffset=l,r.horizontalOrigin=c.RIGHT),m(s)||m(u)||(u.x=12,s.pixelOffset=u,s.horizontalOrigin=c.LEFT),n.horizontalOrigin=c.LEFT):(m(r)||m(l)||(l.x=9,r.pixelOffset=l,r.horizontalOrigin=c.LEFT),m(s)||m(u)||(u.x=-12,s.pixelOffset=u,s.horizontalOrigin=c.RIGHT),n.horizontalOrigin=c.RIGHT)}}}))},H=(e,t)=>{const{defined:i,defaultValue:n,Cartesian3:o}=Cesium,{viewer:a}=r,s=a.scene,l=e.positions;l[0]=t;const c=s.frameState.mapProjection.ellipsoid,u=c.cartesianToCartographic(t,{}),d=s.globe;u.height=i(d)?n(d.getHeight(u),0):0,l[1]=c.cartographicToCartesian(u,{}),e.distance=o.distance(l[0],l[1]),e.labelPosition=o.midpoint(l[0],l[1],{})},U=()=>{const{Cartesian3:e,Plane:t}=Cesium,n={positions:[new e,new e],show:!1,drawStatus:Yo,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(n,{draggingPlane:new t(e.UNIT_X,0),surfaceNormal:new e}),D.value.push(n),v.value=Yo,g.value=!0,d.value=p.value.drawingTipStart},W=(e=!0)=>{e&&v.value===qo&&D.value.pop();const t=x.value?x.value._vcPolylineIndx:D.value.length-1,i=D.value[t];i&&(i.drawStatus=Xo),v.value=Xo,g.value=!1,y.value=[0,0,0]},G=t=>{var i,n,o;if(C.value=[0,0,0],b.value=!1,!e.editable)return;_.value=t;const{viewer:a,drawingFabInstance:s}=r;if("move"===t){d.value=p.value.drawingTipEditing,v.value=qo,x.value=w.value,R=D.value[x.value._vcPolylineIndx].positions[x.value._index],g.value=!0;(null==s?void 0:s.proxy).editingActionName=u}else if("remove"===t){const e=w.value._vcPolylineIndx;D.value[e].positions.splice(w.value._index,1)}else if("removeAll"===t){const e=w.value._vcPolylineIndx;D.value.splice(e,1)}else{const a=w.value._vcPolylineIndx,r=D.value[a];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,a,r)}c("editorEvt",{type:t,renderDatas:D,name:u,index:w.value._vcPolylineIndx},a)},$={computedRenderDatas:k,renderDatas:D,startNew:U,stop:W,clear:()=>{D.value=[],W()},handleMouseClick:(t,n)=>{var o;const{viewer:a,drawingFabInstance:l,selectedDrawingActionInstance:m,getWorldPosition:h}=r,f=null==l?void 0:l.proxy;if(2===n.button&&n.ctrl){const e=f.getDrawingActionInstance(u);return f.toggleAction(e),void B((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},a)}))}v.value===Xo&&U();const b=x.value?x.value._vcPolylineIndx:D.value.length-1,C=D.value[b],w=C.positions;if(2===n.button&&x.value)return f.editingActionName=void 0,C.positions[x.value._index]=R,v.value=Xo,C.drawStatus=Xo,x.value=void 0,d.value=p.value.drawingTipStart,"VcMeasurementHeight"===i&&H(C,R),void B((()=>{c("drawEvt",Object.assign({name:u,index:b,renderDatas:D,finished:!0,windowPoistion:t,type:"cancel"},k.value[b]),a)}));if(0!==n.button)return;const{defined:O}=Cesium;let S,E="new",P=!1;const T=a.scene;if(v.value===Yo){const n=h(T,t,{});if(!O(n))return;if(w[0]=n,w[1]=n,C.show=!0,v.value=qo,C.drawStatus=qo,d.value=p.value.drawingTipEnd,S=n,P=!1,"VcMeasurementVertical"===i){const e=T.frameState.mapProjection.ellipsoid;C.surfaceNormal=e.geodeticSurfaceNormal(n,C.surfaceNormal)}"VcMeasurementHeight"===i&&(H(C,n),P=!0,C.drawStatus=Xo,v.value=Xo,d.value=p.value.drawingTipStart,1===e.mode&&f.toggleAction(m)),"VcAnalysisViewshed"===i&&(C.viewshedOpts=s({},e.viewshedOpts))}else{if(C.drawStatus=Xo,v.value=Xo,x.value){if(!0===_o().hasTouch){const i=h(T,t,{});if(O(i)){C.positions.splice(x.value._index,1,i),x.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}x.value=void 0,f.editingActionName=void 0,g.value=!1,y.value=[0,0,0],E=_.value,m&&(d.value=p.value.drawingTipStart,g.value=!0)}else{if(!0===_o().hasTouch){const e=h(T,t,{});if(O(e)){C.positions[1]=e}}1===e.mode&&f.toggleAction(m)}P=!0,S=C.positions[1]}B((()=>{c("drawEvt",Object.assign({index:b,renderDatas:D,name:u,finished:P,position:S,windowPoistion:t,type:E},k.value[b]),a)}))},handleMouseMove:t=>{const{viewer:n,getWorldPosition:o}=r,a=n.scene,s=o(a,t,{}),{defined:l,Cartographic:d}=Cesium;if(!l(s))return;if(y.value=s,v.value!==qo)return;if("VcMeasurementVertical"===i&&a.mode===Cesium.SceneMode.SCENE2D)return;const p=x.value?x.value._vcPolylineIndx:D.value.length-1,h=D.value[p];if("VcMeasurementVertical"===i){const e=((e,t)=>{const{defined:i,SceneMode:n,Cartesian3:o,IntersectionTests:a,Plane:s,SceneTransforms:l,Ray:c}=Cesium,{viewer:u}=r,d=u.scene,p=d.camera,m=p.direction,v=d.frameState.mapProjection.ellipsoid,h=e.positions,g=h[0];let f=g,y=h[1],b=e.draggingPlane,C=e.surfaceNormal,w=C;if(d.mode===n.COLUMBUS_VIEW){w=o.UNIT_X;const e=v.cartesianToCartographic(g,{});f=d.mapProjection.project(e,{}),o.fromElements(f.z,f.x,f.y,f)}let O=o.cross(w,m,{});O=o.cross(w,O,O),O=o.normalize(O,O),b=s.fromPointNormal(f,O,b);const x=p.getPickRay(t,new c);if(y=a.rayPlane(x,b,{}),i(y)){if(d.mode===n.COLUMBUS_VIEW){y=o.fromElements(y.y,y.z,y.x,y);const e=d.mapProjection.unproject(y,{});y=v.cartographicToCartesian(e,y)}l.wgs84ToWindowCoordinates(d,h[0],{}).y<t.y&&(C=o.negate(C,{}));let e=o.subtract(y,g,{});return e=o.projectVector(e,C,e),y=o.add(g,e,y),y}})(h,t);if(!m(e)){const t=h.positions.slice();t[x.value?x.value._index:1]=e,h.positions=t}}else if("VcMeasurementHeight"===i)H(h,s);else if("VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i){const t=h.positions,i=t[0],o=d.fromCartesian(i,n.scene.globe.ellipsoid),a=d.fromCartesian(s,n.scene.globe.ellipsoid);!e.clampToGround&&(a.height=o.height),t[x.value?x.value._index:1]=d.toCartesian(a,n.scene.globe.ellipsoid)}else if("VcAnalysisSightline"===i){const e=h.positions;if(x.value){e[x.value._index>0?1:0]=s}else e[1]=s}else{const e=h.positions.slice();e[x.value?x.value._index:1]=s,h.positions=e}B((()=>{c("drawEvt",Object.assign({index:p,renderDatas:D,name:u,finished:!1,position:h.positions[1],windowPoistion:t,type:x.value?_:"new"},k.value[p]),n)}))}};return Object.assign(n.proxy,$),()=>{var t,n,o;const{createGuid:c}=Cesium,u=[];if(k.value.forEach(((t,n)=>{var o;const a="VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i,r=a?null==(o=t.polygonPositions)?void 0:o.slice():t.positions;a&&(null==r||r.push(r[0]));const d=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete d.arcType;const p=Object.assign({},e.primitiveOpts,t.primitiveOpts);if((null==r?void 0:r.length)&&(null==r?void 0:r.length)>1&&(u.push(z(e.clampToGround?ou:ru,l(s({},p),{show:t.show&&p.show||e.editable||t.drawStatus===qo,onReady:e=>{var t;null==(t=null==p?void 0:p.onReady)||t.call(p,e),e.cesiumObject._vcPolylineIndex=n}}),(()=>z(nd,{id:c()},(()=>z(e.clampToGround?Qd:ip,s({positions:r},d))))))),"VcAnalysisViewshed"===i&&u.push(z(cu,s({},t.viewshedOpts)))),t.polygonPositions&&t.polygonPositions.length>2){const i=Object.assign({},null==e?void 0:e.polygonOpts,null==t?void 0:t.polygonOpts);i.clampToGround=e.clampToGround,u.push(z(ed,l(s({positions:r,show:t.show&&(null==i?void 0:i.show)},i),{onReady:e=>{var t;A(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}})))}t.xyPolylinePositions&&t.xyPolylinePositions.length>1&&u.push(z(ru,l(s({show:t.show&&p||e.editable||t.drawStatus===qo},p),{onReady:e=>{var t;null==(t=null==p?void 0:p.onReady)||t.call(p,e),e.cesiumObject._vcPolylineIndex=n}}),(()=>z(nd,{id:c()},(()=>z(ip,s({positions:t.xyPolylinePositions},d))))))),t.xyBoxPositions&&t.xyBoxPositions.length>1&&u.push(z(ru,s({show:t.show&&p||e.editable||t.drawStatus===qo},p),(()=>z(nd,{id:c()},(()=>z(ip,s({positions:t.xyBoxPositions},d)))))));const m=Object.assign({},e.pointOpts,t.pointOpts);u.push(z($u,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((o,a)=>{const r=o.position,u=Object.assign({},m,o);return l(s({position:r,id:c(),_vcPolylineIndx:n},u),{show:((null==u?void 0:u.show)||e.editable||t.drawStatus===qo)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==a)})})),onMouseover:E,onMouseout:P,onReady:j})),u.push(z(Gu,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:L}))})),(null==(t=e.drawtip)?void 0:t.show)&&g.value){const{viewer:t}=r;u.push(z(Eu,{position:y.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>z("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(b.value){const t=[];if(w.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n=s({},i[e]);delete n.color,t.push(z(es,l(s({style:{color:i[e].color,background:i[e].background}},n),{onclick:G.bind(void 0,e)}),(()=>z(vs,s({},i[e].tooltip),(()=>{var t;return z("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||a(`vc.measurement.editor.${e}`))})))))}}const{viewer:i}=r;u.push(z(Eu,{position:C.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:M},(()=>z("div",{class:"vc-editor"},t))))}return z(Yu,{ref:S,show:e.show,onReady:I},(()=>u))}}var vp=F({name:"VcMeasurementDistance",props:l(s({},hc),{showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcMeasurementDistance")});function hp(e,t,i){const n=O(),o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),r=o.$services,{emit:c}=t,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:g,showEditor:y,editorPosition:b,mouseoverPoint:C,editingPoint:w,primitiveCollectionRef:x,editorType:S,onMouseoverPoints:_,onMouseoutPoints:E,onMouseenterEditor:P,onMouseleaveEditor:T,onPrimitiveCollectionReady:M,onVcCollectionPointReady:I,onVcCollectionLabelReady:j,onVcPrimitiveReady:L}=pp(e,t,n,i,r);let A,D;const R=h([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((t=>{const i={show:!0,positions:Ie(t),tempPositions:[],drawStatus:Xo,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};R.value.push(i)}));const k=f((()=>{const{Cartesian3:t,createGuid:n,defined:o,Math:a}=Cesium,c=[],{viewer:u}=r;return R.value.forEach(((d,p)=>{var m,v,h,g,f,y,b,C,w;const O=[],S=[],_=[];let E=0;const P=[];d.points=d.positions.map((e=>({position:e})));const T=d.positions.slice();if("VcAnalysisSightline"===i){const e=T.shift(),i=T;e&&i.forEach((i=>{const n=[];n.push(e);const a=[];x.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&a.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&a.push(e)}));const u=Je(e,i,r.viewer,a);o(u)&&n.push(u),n.push(i);let p=0;const m=[];for(let e=0;e<n.length-1;e++){const i=t.distance(n[e],n[e+1]);m.push(i),p+=i}c.push(l(s({},d),{positions:n,distance:p,distances:m}))}))}else{e.loop&&T.length>2&&T.push(T[0]);for(let i=0;i<T.length-1;i++){let o=0;o=0===(null==(m=e.polylineOpts)?void 0:m.arcType)?We(T[i],T[i+1],r.viewer.scene.globe.ellipsoid):t.distance(T[i],T[i+1]),S.push(o),E+=o;const a=Object.assign({},e.labelsOpts,d.labelsOpts);if(o>0&&T.length>2&&e.showDistanceLabel&&O.push(s({text:ia.distanceToString(o,null==(v=e.measureUnits)?void 0:v.distanceUnits,e.locale,null==(h=e.decimals)?void 0:h.distance),position:t.midpoint(T[i],T[i+1],{}),id:n()},a)),T.length>2&&e.showAngleLabel&&(i>0||e.loop)){const o=T[0===i?T.length-2:i-1],r=T[i],l=T[i+1],c=t.subtract(o,r,{}),u=t.subtract(l,r,{});let d=0;t.ZERO.equals(c)||t.ZERO.equals(u)||(d=t.angleBetween(c,u)),_.push(d),O.push(s({text:ia.angleToString(d,null==(g=e.measureUnits)?void 0:g.angleUnits,e.locale,null==(f=e.decimals)?void 0:f.angle),position:r,id:n()},a))}e.showDashedLine&&(P.push({positions:[T[i],N(T[i])]}),i===T.length-2&&P.push({positions:[T[i+1],N(T[i+1])]}))}const o=$e(T),p=Object.assign({},e.labelOpts,d.labelOpts);e.showLabel&&(i.includes("Area")?O.push(s({text:ia.areaToString(o,null==(y=e.measureUnits)?void 0:y.areaUnits,e.locale,null==(b=e.decimals)?void 0:b.area),position:T[T.length-1],id:n()},p)):O.push(s({text:ia.distanceToString(E,null==(C=e.measureUnits)?void 0:C.distanceUnits,e.locale,null==(w=e.decimals)?void 0:w.distance),position:T[T.length-1],id:n()},p))),d.positionsDegreesArray=d.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,u.scene.globe.ellipsoid);return[a.toDegrees(t.longitude),a.toDegrees(t.latitude),t.height]})),c.push(l(s({},d),{labels:O,distance:E,distances:S,area:o,angles:_,dashedLines:P}))}})),c}));n.mount=async()=>{const{viewer:t}=r;return e.autoUpdateLabelPosition&&t.scene.preRender.addEventListener(V),!0},n.unmount=async()=>{const{viewer:t}=r;return e.autoUpdateLabelPosition&&t.scene.preRender.removeEventListener(V),!0};const N=e=>{const{defined:t,defaultValue:i}=Cesium,{viewer:n}=r,o=n.scene,a=o.globe,s=o.frameState.mapProjection.ellipsoid,l=s.cartesianToCartographic(e);return l.height=t(a)?i(a.getHeight(l),0):0,s.cartographicToCartesian(l)},V=()=>{k.value.forEach(((e,t)=>{var i;const n=e.positions;if(!(n.length<2)){const{defined:o,SceneTransforms:a,Cartesian2:s,HorizontalOrigin:l}=Cesium,{viewer:c}=r,u=c.scene;let d=n[0];const p=a.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?s.clone(p,{}):s.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=x.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];for(let t=1;t<n.length;t++){const i=a.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x);h[t-1]!==g&&(h[t-1].horizontalOrigin=0<e?l.LEFT:l.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=s.clone(i,m)}e.drawStatus===Xo&&(g.position=d)}}}))},F=()=>{const t={show:!1,positions:[],tempPositions:[],drawStatus:Yo,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if("VcMeasurementHorizontal"===i){const{Cartesian3:e,Plane:i}=Cesium;Object.assign(t,{dashedLines:[],heightPlane:new i(e.UNIT_X,0),heightPlaneCV:new i(e.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new e})}m.value=Yo,R.value.push(t),v.value=!0,d.value=p.value.drawingTipStart},H=(e=!0)=>{e&&m.value===qo&&R.value.pop();const t=w.value?w.value._vcPolylineIndex:R.value.length-1,i=R.value[t];i&&(i.positions=i.tempPositions,i.drawStatus=Xo),m.value=Xo,v.value=!1,g.value=[0,0,0]},U=(e,t)=>{const{viewer:n,getWorldPosition:o}=r,a=n.scene,s=o(a,e,{}),{defined:l}=Cesium;if(!l(s))return;if(g.value=s,m.value!==qo)return;const v=w.value?w.value._vcPolylineIndex:R.value.length-1,h=R.value[v];let f="new";if("VcMeasurementHorizontal"===i){const{SceneMode:i,IntersectionTests:n,Cartesian3:o}=Cesium,r=a.frameState.mapProjection.ellipsoid,s=h.positions,c=a.camera.getPickRay(e);let u,m;if(a.mode===i.SCENE3D&&h.heightPlane)u=n.rayPlane(c,h.heightPlane);else if(a.mode===i.COLUMBUS_VIEW&&h.heightPlaneCV)u=n.rayPlane(c,h.heightPlaneCV),u=o.fromElements(u.y,u.z,u.x,u),m=a.mapProjection.unproject(u),u=r.cartographicToCartesian(m);else if(u=a.camera.pickEllipsoid(e,r),l(u)){const e=r.cartesianToCartographic(u);e.height=h.height||0,u=r.cartographicToCartesian(e,u)}if(!l(u))return;if(!h.firstMove&&(null==t?void 0:t.shift)){const e=s[s.length-2],t=h.tempNextPos,i=o.subtract(t,e,{});let n=o.subtract(u,e,{});n=o.projectVector(n,i,n),u=o.add(e,n,u)}if(w.value){h.positions.splice(w.value._index,1,u),f=S.value}else{const e=h.tempPositions.slice();e.push(u),h.positions=e,h.firstMove=!1,h.tempNextPos=Object.assign(u),d.value=p.value.drawingTipEnd}}else if(w.value){h.positions.splice(w.value._index,1,s),f=S.value}else{const e=h.tempPositions.slice();e.push(s),h.positions=e}B((()=>{c("drawEvt",Object.assign({index:v,name:u,renderDatas:R,finished:!1,position:"VcMeasurementHorizontal"===i?h.positions[h.positions.length-1]:s,windowPoistion:e,type:f},k.value[v]),n)}))},W=t=>{var n,o,a;if(b.value=[0,0,0],y.value=!1,!e.editable)return;const{viewer:s,drawingFabInstance:l}=r,h=null==l?void 0:l.proxy;if(S.value=t,"move"===t){d.value=p.value.drawingTipEditing,m.value=qo,w.value=C.value,v.value=!0;const e=(()=>{let e=w.value._vcPolylineIndex,t=w.value._index;if("VcAnalysisSightline"===i)for(let i=0;i<R.value.length;i++){const n=R.value[i];for(let o=0;o<n.positions.length;o++){const a=n.positions[o];w.value.position.equals(a)&&(e=i,t=o)}}return[e,t]})();w.value._vcPolylineIndex=e[0],w.value._index=e[1],D=R.value[e[0]].positions[e[1]],h.editingActionName=u}else if("insert"===t){const e=C.value._vcPolylineIndex;R.value[e].positions.splice(C.value._index,0,C.value.position),w.value=C.value,v.value=!0,m.value=qo,d.value=p.value.drawingTipEditing,h.editingActionName=u}else if("remove"===t){const e=C.value._vcPolylineIndex,t=R.value[e];t.positions.length>2&&t.positions.splice(C.value._index,1)}else if("removeAll"===t){const e=C.value._vcPolylineIndex;R.value.splice(e,1)}else{const i=C.value._vcPolylineIndex,r=R.value[i];null==(a=null==(o=null==(n=e.editorOpts)?void 0:n[t])?void 0:o.callback)||a.call(o,i,r)}c("editorEvt",{type:t,renderDatas:R,name:u,index:C.value._vcPolylineIndex},s)},G={computedRenderDatas:k,renderDatas:R,startNew:F,stop:H,clear:()=>{R.value=[],H()},handleMouseClick:(t,n)=>{var o;const{viewer:a,drawingFabInstance:s,getWorldPosition:l,selectedDrawingActionInstance:h}=r,g=null==s?void 0:s.proxy;if(2===n.button&&n.ctrl){const e=g.getDrawingActionInstance(u);return g.toggleAction(e),void B((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},a)}))}m.value===Xo&&F();const{defined:f,Cartesian2:y,Plane:b,Cartesian3:C}=Cesium,O=w.value?w.value._vcPolylineIndex:R.value.length-1,x=R.value[O],_=x.tempPositions;if(2===n.button&&w.value)return"insert"===S.value?x.positions.splice(w.value._index,1):x.positions[w.value._index]=D,m.value=Xo,x.drawStatus=Xo,w.value=void 0,d.value=p.value.drawingTipStart,g.editingActionName=void 0,v.value=f(h),void B((()=>{c("drawEvt",Object.assign({index:O,name:u,renderDatas:R,finished:!0,windowPoistion:t,type:"cancel"},k.value[O]),a)}));if(A=A||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.magnitude(y.subtract(A,t,{}))<10)return;if(2===n.button&&m.value===qo&&_.length>1&&(_.pop(),U(t)),0!==n.button)return;const E=a.scene,P=l(E,t,{});if(!f(P))return;let T=!1,M="new";if("VcMeasurementHorizontal"===i){if(w.value)m.value=Xo,w.value=void 0,T=!0,M=S.value,d.value=p.value.drawingTipStart;else if(0===_.length){const e=E.frameState.mapProjection.ellipsoid;_.push(P),x.positions=_,x.heightPlane=b.fromPointNormal(P,e.geodeticSurfaceNormal(P,{}),x.heightPlane);const t=e.cartesianToCartographic(P,{}),i=E.mapProjection.project(t,{}),n=C.fromElements(i.z,i.x,i.y,i);x.heightPlaneCV=b.fromPointNormal(n,C.UNIT_X,x.heightPlaneCV),x.height=t.height,x.firstMove=!0,x.drawStatus=qo,x.show=!0,m.value=qo}else _.push(x.tempNextPos),x.positions=_,x.firstMove=!0;d.value=p.value.drawingTipEnd}else{if(w.value){if(!0===_o().hasTouch){const i=l(E,t,{});if(f(i)){x.positions.splice(w.value._index,1,i),w.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}m.value=Xo,w.value=void 0,T=!0,M=S.value,d.value=p.value.drawingTipStart}else _.push(P),x.positions=_,x.show=!0,x.drawStatus=qo,m.value=qo,v.value=!0,d.value=p.value.drawingTipEnd;"new"!==M&&(g.editingActionName=void 0,v.value=f(h))}y.clone(t,A),B((()=>{c("drawEvt",Object.assign({index:O,name:u,renderDatas:R,finished:T,position:"VcMeasurementHorizontal"===i?x.positions[x.positions.length-1]:P,windowPoistion:t,type:M},k.value[O]),a)}))},handleMouseMove:U,handleDoubleClick:t=>{const{drawingFabInstance:i,selectedDrawingActionInstance:n,viewer:o}=r;if(m.value===qo){const a=w.value?w.value._vcPolylineIndex:R.value.length-1,r=R.value[a];H(!1),d.value=p.value.drawingTipStart,B((()=>{if(c("drawEvt",Object.assign({index:a,name:u,renderDatas:R,finished:!0,position:r.positions[r.positions.length-1],windowPoistion:t,type:"new"},k.value[a]),o),1===e.mode){(null==i?void 0:i.proxy).toggleAction(n)}}))}}};return Object.assign(n.proxy,G),()=>{var t,n;const{createGuid:o,Cartesian3:c}=Cesium,u=[],p=[];if(k.value.forEach(((t,n)=>{var a,r;const d=t.positions.slice();if(d.length>1){t.loop&&d.push(d[0]);const i=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete i.arcType;const a=Object.assign({},e.primitiveOpts,t.primitiveOpts);u.push(z(e.clampToGround?ou:ru,l(s({show:t.show&&a.show||e.editable||t.drawStatus===qo},a),{onReady:e=>{var t;null==(t=null==a?void 0:a.onReady)||t.call(a,e),e.cesiumObject._vcPolylineIndex=n}}),(()=>z(nd,{id:o()},(()=>z(e.clampToGround?Qd:ip,s({positions:d},i)))))))}const m=Object.assign({},e.dashLineOpts,t.dashLineOpts),v=Object.assign({},e.dashLinePrimitiveOpts,t.dashLinePrimitiveOpts);null==(a=t.dashedLines)||a.forEach((i=>{u.push(z(ru,s({show:t.show&&e.dashLinePrimitiveOpts.show||e.editable||t.drawStatus===qo},v),(()=>z(nd,{id:o()},(()=>z(ip,s({positions:i.positions},m)))))))}));const h=Object.assign({},e.pointOpts,t.pointOpts);if(u.push(z($u,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((a,r)=>{var l;const u=a.position;let d=!1;for(let e=0;e<p.length;e++)c.equals(u,p[e])&&(d=!0);const m=((null==(l=e.pointOpts)?void 0:l.show)||e.editable||t.drawStatus===qo)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==r)&&!d;"VcAnalysisSightline"===i&&p.push(u);const v=Object.assign({},h,a);return s({position:u,id:o(),_vcPolylineIndex:n,show:m},v)})),onMouseover:_,onMouseout:E,onReady:I})),u.push(z(Gu,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:j})),d.length>2&&(i.includes("Polygon")||i.includes("Area"))){const i=Object.assign({},e.polygonOpts,t.polygonOpts);u.push(z(ed,l(s({positions:d,clampToGround:e.clampToGround,show:t.show&&(null==(r=e.polygonOpts)?void 0:r.show)},i),{onReady:e=>{var t;L(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}})))}})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=r;u.push(z(Eu,{position:g.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:t.container}},(()=>z("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(y.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n=s({},i[e]);delete n.color,t.push(z(es,l(s({style:{color:i[e].color,background:i[e].background}},n),{onclick:W.bind("polyline",e)}),(()=>z(vs,s({},i[e].tooltip),(()=>{var t;return z("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||a(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=r;u.push(z(Eu,{position:b.value,pixelOffset:null==(n=e.editorOpts)?void 0:n.pixelOffset,teleport:{to:i.container},onMouseenter:P,onMouseleave:T},(()=>z("div",{class:"vc-editor"},t))))}return z(Yu,{ref:x,show:e.show,onReady:M},(()=>u))}}var gp=F({name:"VcMeasurementPolyline",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>hp(e,t,"VcMeasurementPolyline")}),fp=F({name:"VcMeasurementHorizontal",props:l(s({},hc),{measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>hp(e,t,"VcMeasurementHorizontal")}),yp=F({name:"VcMeasurementVertical",props:l(s({},hc),{measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcMeasurementVertical")}),bp=F({name:"VcMeasurementHeight",props:l(s({},hc),{measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcMeasurementHeight")});function Cp(e,t,i){const n=O(),o=ao(e,t,n);if(void 0===o)return;const{t:a}=eo(),r=o.$services,{emit:c}=t,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:b,editingPoint:C,primitiveCollectionRef:w,editorType:x,onMouseoverPoints:S,onMouseoutPoints:_,onMouseenterEditor:E,onMouseleaveEditor:P,onPrimitiveCollectionReady:T,onVcCollectionPointReady:I,onVcCollectionLabelReady:j}=pp(e,t,n,i,r),A=h([]);let D,R=[];"VcDrawingPin"===i&&""===e.billboardOpts.image&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),R.push(L((()=>e.editable),(e=>{const{drawingFabInstance:t,selectedDrawingActionInstance:i}=r;if(e&&(null==i?void 0:i.name)===u){(null==t?void 0:t.proxy).toggleAction(i)}})));const k=()=>{const{Cartesian3:e}=Cesium,t={drawStatus:qo,show:!1,position:new e,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};A.value.push(t),m.value=qo,v.value=!0,d.value=p.value.drawingTipStart},N=(e=!0)=>{e&&m.value===qo&&A.value.pop();const t=C.value?C.value._vcPolylineIndx:A.value.length-1,i=A.value[t];i&&(i.drawStatus=Xo),m.value=Xo,v.value=!1,g.value=[0,0,0]},V=(t,i)=>{const{viewer:n}=r,o=n.scene,{defined:a,defaultValue:s,Math:l,SceneMode:c}=Cesium,u=o.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{}),d=o.globe;let p=a(d)?s(d.getHeight(u),0):0;p=0===e.heightReference?u.height:u.height-p,l.equalsEpsilon(p,0,l.EPSILON3)&&(p=0);let m=0;o.mode!==c.SCENE2D&&(i||(i=o.cartesianToCanvasCoordinates(t.position,{})),m=F(o,i)),t.show=!0,t.lng=u.longitude,t.lat=u.latitude,t.height=p,t.slope=m},F=(e,t)=>{const{getWorldPosition:i}=r,{defined:n,Cartesian2:o,Cartesian3:a,Math:s}=Cesium,l=i(e,t,{});if(n(l)){const r=e.camera.position,c=a.distance(l,r),u=[new a,new a,new a,new a,new a],d=new a,p=new a;if(!(1e4<c)){const r=u[0],m=u[1],v=u[2],h=u[3];let g=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(l,d);g=a.negate(g,g);const f=o.clone(t,u[0]);f.x-=2,f.y-=2;const y=o.clone(t,u[1]);y.x-=2,y.y+=2;const b=o.clone(t,u[2]);b.x+=2,b.y+=2;const C=o.clone(t,u[3]);C.x+=2,C.y-=2;const w=i(e,f,r),O=i(e,y,m),x=i(e,b,v),S=i(e,C,h);let _,E,P,T,M,I,j,L;n(w)&&(_=a.subtract(w,l,r),E=a.magnitude(_)/c<=.05?a.normalize(_,r):void 0),n(O)&&(P=a.subtract(O,l,m),T=a.magnitude(P)/c<=.05?a.normalize(P,m):void 0),n(x)&&(M=a.subtract(x,l,v),I=a.magnitude(M)/c<=.05?a.normalize(M,v):void 0),n(S)&&(j=a.subtract(S,l,h),L=a.magnitude(j)/c<=.05?a.normalize(j,h):void 0);let A=a.clone(a.ZERO,p),D=u[4];if(n(E)&&n(T)&&(D=a.normalize(a.cross(E,T,D),D),A=a.add(A,D,A)),n(T)&&n(I)&&(D=a.normalize(a.cross(T,I,D),D),A=a.add(A,D,A)),n(I)&&n(L)&&(D=a.normalize(a.cross(I,L,D),D),A=a.add(A,D,A)),n(L)&&n(E)&&(D=a.normalize(a.cross(L,E,D),D),A=a.add(A,D,A)),!A.equals(a.ZERO))return A=a.normalize(A,A),s.asinClamped(Math.abs(Math.sin(a.angleBetween(A,g))))}}return 0},H=t=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!e.editable)return;x.value=t;const{viewer:a,drawingFabInstance:s}=r,l=null==s?void 0:s.proxy;if("move"===t)d.value=p.value.drawingTipEditing,m.value=qo,C.value=b.value,v.value=!0,D=Object.assign({},A.value[C.value._vcPolylineIndx]),l.editingActionName=u;else if("remove"===t){const e=b.value._vcPolylineIndx;A.value.splice(e,1)}else{const a=b.value._vcPolylineIndx,r=A.value[a];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,a,r)}c("editorEvt",{type:t,name:u,renderDatas:A,index:b.value._vcPolylineIndx},a)},U=t=>{var i,n,o,s,l,c,u,d;const{viewer:p}=r,m=p.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{});return Cesium.defined(m)?`${a("vc.measurement.point.lng")}${ia.angleToString(m.longitude,null==(i=e.measureUnits)?void 0:i.angleUnits,e.locale,null==(n=e.decimals)?void 0:n.lng)}\n${a("vc.measurement.point.lat")}${ia.angleToString(m.latitude,null==(o=e.measureUnits)?void 0:o.angleUnits,e.locale,null==(s=e.decimals)?void 0:s.lat)}\n${a("vc.measurement.point.height")}${ia.distanceToString(t.height,null==(l=e.measureUnits)?void 0:l.distanceUnits,e.locale,null==(c=e.decimals)?void 0:c.height)}\n${a("vc.measurement.point.slope")}${ia.angleToString(t.slope,null==(u=e.measureUnits)?void 0:u.slopeUnits,e.locale,null==(d=e.decimals)?void 0:d.slope)}`:""};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:t}=r;e.preRenderDatas.forEach((e=>{const i={drawStatus:Xo,show:!0,position:Me(e),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},n=Cesium.Cartographic.fromCartesian(i.position,t.scene.globe.ellipsoid);i.positionDegrees=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height],V(i),A.value.push(i)}))}M((()=>{R.forEach((e=>e())),R=[]}));const W={renderDatas:A,startNew:k,stop:N,clear:()=>{A.value=[],N()},handleMouseClick:(t,i)=>{const{viewer:n,drawingFabInstance:o,getWorldPosition:a,selectedDrawingActionInstance:s}=r,l=null==o?void 0:o.proxy;if(2===i.button&&i.ctrl){const e=null==l?void 0:l.getDrawingActionInstance(u);return null==l||l.toggleAction(e),void B((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},n)}))}const h=C.value?C.value._vcPolylineIndx:A.value.length-1,g=A.value[h];if(2===i.button&&C.value)return l.editingActionName=void 0,A.value[h]=D,m.value=Xo,A.value[h].drawStatus=Xo,C.value=void 0,d.value=p.value.drawingTipStart,void B((()=>{c("drawEvt",{name:u,index:h,renderDatas:A,finished:!0,windowPoistion:t,type:"cancel"},n)}));if(0!==i.button)return;const{defined:f}=Cesium;let y="new";if(m.value===Yo){const e=a(n.scene,t,{});if(!f(e))return;g.position=e,g.show=!0,g.drawStatus=Xo,m.value=Xo,d.value=p.value.drawingTipStart,B((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:e,windowPoistion:t,type:y},n)}))}else{m.value=Xo,g.drawStatus=Xo;const i=n.scene;if(!0===_o().hasTouch){const e=a(i,t,{});f(e)&&(g.position=e,g.show=!0)}C.value?(C.value=void 0,l.editingActionName=void 0,v.value=!1,y=x.value):1===e.mode&&B((()=>{l.toggleAction(s)})),s&&(d.value=p.value.drawingTipStart,v.value=!0),B((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:A.value[h].position,positionDegrees:A.value[h].positionDegrees,windowPoistion:t,type:y},n)}))}},handleMouseMove:e=>{const{viewer:t,getWorldPosition:i}=r,n=t.scene,{defined:o,SceneMode:a}=Cesium;if(n.mode!==a.MORPHING){const a=i(n,e,{});if(!o(a))return;if(g.value=a,m.value===Xo&&k(),m.value!==qo)return;const r=C.value?C.value._vcPolylineIndx:A.value.length-1,s=A.value[r];s.position=a;const l=Cesium.Cartographic.fromCartesian(a,n.globe.ellipsoid),d=[Cesium.Math.toDegrees(l.longitude),Cesium.Math.toDegrees(l.latitude),l.height];s.positionDegrees=d,V(s,e);const p=C.value?x.value:"new";B((()=>{c("drawEvt",{index:r,renderDatas:A,name:u,finished:!1,position:a,positionDegrees:d,windowPoistion:e,type:p},t)}))}}};return Object.assign(n.proxy,W),()=>{var t,n,o;const{createGuid:c}=Cesium,u=[],p=[],m=[],h=[];if(A.value.forEach(((t,n)=>{var o;const a=Object.assign({},e.pointOpts,t.pointOpts);p.push(l(s({position:t.position,id:c(),_vcPolylineIndx:n},a),{show:t.show&&(null==(o=e.pointOpts)?void 0:o.show)||e.editable||t.drawStatus===qo}));const r=Object.assign({},e.labelOpts,t.labelOpts);if(e.showLabel)if("VcDrawingPin"===i){const i=Object.assign({},e.billboardOpts,t.billboardOpts);h.push(s({position:t.position,id:c(),_vcPolylineIndx:n},i)),e.labelOpts.text&&m.push(s({position:t.position,id:c()},r))}else m.push(s({position:t.position,id:c(),text:U(t)},r))})),u.push(z($u,{enableMouseEvent:e.enableMouseEvent,points:p,onMouseover:S,onMouseout:_,onReady:I})),u.push(z(Gu,{enableMouseEvent:e.enableMouseEvent,labels:m,onReady:j})),"VcDrawingPin"===i&&u.push(z(Uu,{enableMouseEvent:e.enableMouseEvent,billboards:h})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=r;u.push(z(Eu,{position:g.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>z("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(f.value){const t=[];if(b.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n=s({},i[e]);delete n.color,t.push(z(es,l(s({style:{color:i[e].color,background:i[e].background}},n),{onclick:H.bind(void 0,e)}),(()=>z(vs,s({},i[e].tooltip),(()=>{var t;return z("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||a(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=r;u.push(z(Eu,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:E,onMouseleave:P},(()=>z("div",{class:"vc-editor"},t))))}return z(Yu,{ref:w,show:e.show,onReady:T},(()=>u))}}var wp=F({name:"VcMeasurementPoint",props:l(s({},hc),{measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean}),emits:Es,setup:(e,t)=>Cp(e,t,"VcMeasurementPoint")}),Op=F({name:"VcMeasurementArea",props:l(s({},hc),{measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>hp(e,t,"VcMeasurementArea")}),xp=F({name:"VcMeasurementRectangle",props:l(s({},hc),{measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcMeasurementRectangle")}),Sp=F({name:"VcMeasurementRegular",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcMeasurementRegular")});function _p(e,t,i,n,o,a,r){i.cesiumEvents=[];const c=ao(e,t,i);if(void 0===c)return;const{t:u}=eo(),{$services:d}=c,{emit:p}=t,m=h(!1),v=k({}),f=js(e),y=h(null),b=h(null),C=h(!1),w=h(null);let O,S;const{activate:_,deactivate:E,destroy:P,isActive:T}=function(e,{handleMouseClick:t,handleMouseDown:i,handleMouseUp:n,handleMouseMove:o,handleDoubleClick:a,handleMouseWheel:r,handlePinch:s}){const l=h(void 0),c=h(!1),u=e=>{null==t||t(e,{button:0})},d=e=>{null==t||t(e,{button:0,shift:!0})},p=e=>{null==t||t(e,{button:0,ctrl:!0})},m=e=>{null==t||t(e,{button:1})},v=e=>{null==t||t(e,{button:1,shift:!0})},g=e=>{null==t||t(e,{button:1,ctrl:!0})};let f;const y=e=>{var i;f?null==(i=null==f?void 0:f.promise)||i.then((i=>{i&&(null==t||t(e,{button:2}))})):null==t||t(e,{button:2})},b=e=>{null==t||t(e,{button:2,shift:!0})},C=e=>{null==t||t(e,{button:2,ctrl:!0})},w=e=>{null==i||i(e,{button:0})},O=e=>{null==i||i(e,{button:0,shift:!0})},x=e=>{null==i||i(e,{button:0,ctrl:!0})},S=e=>{null==i||i(e,{button:1})},_=e=>{null==i||i(e,{button:1,shift:!0})},E=e=>{null==i||i(e,{button:1,ctrl:!0})},P=e=>{null==i||i(e,{button:2})},T=e=>{null==i||i(e,{button:2,shift:!0})},M=e=>{null==i||i(e,{button:2,ctrl:!0})},I=e=>{null==n||n(e,{button:0})},j=e=>{null==n||n(e,{button:0,shift:!0})},L=e=>{null==n||n(e,{button:0,ctrl:!0})},A=e=>{null==n||n(e,{button:1,ctrl:!0})},D=e=>{null==n||n(e,{button:1,shift:!0})},R=e=>{null==n||n(e,{button:1,ctrl:!0})},k=e=>{null==n||n(e,{button:2})},B=e=>{null==n||n(e,{button:2,shift:!0})},N=e=>{null==n||n(e,{button:2,ctrl:!0})},V=e=>{null==a||a(e,{button:0})},z=e=>{null==a||a(e,{button:0,shift:!0})},F=e=>{null==a||a(e,{button:0,ctrl:!0})},H=e=>{null==o||o(e)},U=e=>{null==o||o(e,{shift:!0})},W=e=>{null==o||o(e,{ctrl:!0})},G=e=>{null==r||r(e)},$=e=>{null==r||r(e,{shift:!0})},Z=e=>{null==r||r(e,{ctrl:!0})},Y=e=>{null==s||s(e,{start:!0})},q=e=>{null==s||s(e,{start:!0,shift:!0})},X=e=>{null==s||s(e,{start:!0,ctrl:!0})},Q=e=>{null==s||s(e,{end:!0})},J=e=>{null==s||s(e,{end:!0,shift:!0})},K=e=>{null==s||s(e,{end:!0,ctrl:!0})},ee=e=>{null==s||s(e,{move:!0})},te=e=>{null==s||s(e,{move:!0,shift:!0})},ie=e=>{null==s||s(e,{move:!0,ctrl:!0})},ne=e=>{if(e.touch){const t={position:{x:e.position.left,y:e.position.top}};null==a||a(t,{button:0})}f.resolve(!1)},oe=e=>{f.resolve(!0)},ae=e=>{f=To()};return{activate:()=>{if(c.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i,ScreenSpaceEventHandler:n}=Cesium;if(!l.value){const{viewer:t}=e;l.value=new n(t.canvas),Po.beforeMount(t.canvas,{arg:"2000",value:ne,touchStart:ae,touchEnd:oe,modifiers:{}})}const o=l.value;o.setInputAction(u,t.LEFT_CLICK),o.setInputAction(d,t.LEFT_CLICK,i.SHIFT),o.setInputAction(p,t.LEFT_CLICK,i.CTRL),o.setInputAction(w,t.LEFT_DOWN),o.setInputAction(O,t.LEFT_DOWN,i.SHIFT),o.setInputAction(x,t.LEFT_DOWN,i.CTRL),o.setInputAction(I,t.LEFT_UP),o.setInputAction(j,t.LEFT_UP,i.SHIFT),o.setInputAction(L,t.LEFT_UP,i.CTRL),o.setInputAction(y,t.RIGHT_CLICK),o.setInputAction(b,t.RIGHT_CLICK,i.SHIFT),o.setInputAction(C,t.RIGHT_CLICK,i.CTRL),o.setInputAction(P,t.RIGHT_DOWN),o.setInputAction(T,t.RIGHT_DOWN,i.SHIFT),o.setInputAction(M,t.RIGHT_DOWN,i.CTRL),o.setInputAction(k,t.RIGHT_UP),o.setInputAction(B,t.RIGHT_UP,i.SHIFT),o.setInputAction(N,t.RIGHT_UP,i.CTRL),o.setInputAction(m,t.MIDDLE_CLICK),o.setInputAction(v,t.MIDDLE_CLICK,i.SHIFT),o.setInputAction(g,t.MIDDLE_CLICK,i.CTRL),o.setInputAction(S,t.MIDDLE_DOWN),o.setInputAction(_,t.MIDDLE_DOWN,i.SHIFT),o.setInputAction(E,t.MIDDLE_DOWN,i.CTRL),o.setInputAction(A,t.MIDDLE_UP),o.setInputAction(D,t.MIDDLE_UP,i.SHIFT),o.setInputAction(R,t.MIDDLE_UP,i.CTRL),o.setInputAction(V,t.LEFT_DOUBLE_CLICK),o.setInputAction(z,t.LEFT_DOUBLE_CLICK,i.SHIFT),o.setInputAction(F,t.LEFT_DOUBLE_CLICK,i.CTRL),o.setInputAction(H,t.MOUSE_MOVE),o.setInputAction(U,t.MOUSE_MOVE,i.SHIFT),o.setInputAction(W,t.MOUSE_MOVE,i.CTRL),o.setInputAction(G,t.WHEEL),o.setInputAction($,t.WHEEL,i.SHIFT),o.setInputAction(Z,t.WHEEL,i.CTRL),o.setInputAction(Y,t.PINCH_START),o.setInputAction(q,t.PINCH_START,i.SHIFT),o.setInputAction(X,t.PINCH_START,i.CTRL),o.setInputAction(Q,t.PINCH_END),o.setInputAction(J,t.PINCH_END,i.SHIFT),o.setInputAction(K,t.PINCH_END,i.CTRL),o.setInputAction(ee,t.PINCH_MOVE),o.setInputAction(te,t.PINCH_MOVE,i.SHIFT),o.setInputAction(ie,t.PINCH_MOVE,i.CTRL),c.value=!0},deactivate:()=>{if(!c.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i}=Cesium,n=l.value;if(!n)return;n.removeInputAction(t.LEFT_CLICK),n.removeInputAction(t.LEFT_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_CLICK,i.CTRL),n.removeInputAction(t.LEFT_DOWN),n.removeInputAction(t.LEFT_DOWN,i.SHIFT),n.removeInputAction(t.LEFT_DOWN,i.CTRL),n.removeInputAction(t.LEFT_UP),n.removeInputAction(t.LEFT_UP,i.SHIFT),n.removeInputAction(t.LEFT_UP,i.CTRL),n.removeInputAction(t.RIGHT_CLICK),n.removeInputAction(t.RIGHT_CLICK,i.SHIFT),n.removeInputAction(t.RIGHT_CLICK,i.CTRL),n.removeInputAction(t.RIGHT_DOWN),n.removeInputAction(t.RIGHT_DOWN,i.SHIFT),n.removeInputAction(t.RIGHT_DOWN,i.CTRL),n.removeInputAction(t.RIGHT_UP),n.removeInputAction(t.RIGHT_UP,i.SHIFT),n.removeInputAction(t.RIGHT_UP,i.CTRL),n.removeInputAction(t.MIDDLE_CLICK),n.removeInputAction(t.MIDDLE_CLICK,i.SHIFT),n.removeInputAction(t.MIDDLE_CLICK,i.CTRL),n.removeInputAction(t.MIDDLE_DOWN),n.removeInputAction(t.MIDDLE_DOWN,i.SHIFT),n.removeInputAction(t.MIDDLE_DOWN,i.CTRL),n.removeInputAction(t.MIDDLE_UP),n.removeInputAction(t.MIDDLE_UP,i.SHIFT),n.removeInputAction(t.MIDDLE_UP,i.CTRL),n.removeInputAction(t.LEFT_DOUBLE_CLICK),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.CTRL),n.removeInputAction(t.MOUSE_MOVE),n.removeInputAction(t.MOUSE_MOVE,i.SHIFT),n.removeInputAction(t.MOUSE_MOVE,i.CTRL),n.removeInputAction(t.WHEEL),n.removeInputAction(t.WHEEL,i.SHIFT),n.removeInputAction(t.WHEEL,i.CTRL),n.removeInputAction(t.PINCH_START),n.removeInputAction(t.PINCH_START,i.SHIFT),n.removeInputAction(t.PINCH_START,i.CTRL),n.removeInputAction(t.PINCH_END),n.removeInputAction(t.PINCH_END,i.SHIFT),n.removeInputAction(t.PINCH_END,i.CTRL),n.removeInputAction(t.PINCH_MOVE),n.removeInputAction(t.PINCH_MOVE,i.SHIFT),n.removeInputAction(t.PINCH_MOVE,i.CTRL);const{viewer:o}=e;Po.beforeUnmount(o.canvas),c.value=!1},destroy:()=>{var e;null==(e=l.value)||e.destroy(),l.value=void 0},isActive:c}}(d,{handleMouseClick:(e,t)=>{var n,o;const a=null==S?void 0:S.cmpRef.value;let r;null==(n=null==a?void 0:a.handleMouseClick)||n.call(a,e.position,t);const s=i.proxy;if(s.editingActionName&&(r=A(s.editingActionName)),r&&r!==S){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleMouseClick)||o.call(i,e.position,t)}},handleMouseMove:(e,t)=>{var n,o;const a=null==S?void 0:S.cmpRef.value;let r;null==(n=null==a?void 0:a.handleMouseMove)||n.call(a,e.endPosition,t);const s=i.proxy;if(s.editingActionName&&(r=A(s.editingActionName)),r&&r!==S){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleMouseMove)||o.call(i,e.endPosition,t)}},handleDoubleClick:(e,t)=>{var n,o;const a=null==S?void 0:S.cmpRef.value;let r;null==(n=null==a?void 0:a.handleDoubleClick)||n.call(a,e.position,t);const s=i.proxy;if(s.editingActionName&&(r=A(s.editingActionName)),r&&r!==S){const i=r.cmpRef.value;null==(o=null==i?void 0:i.handleDoubleClick)||o.call(i,e.position,t)}}});i.createCesiumObject=async()=>(m.value=!0,O=new Zo,n.value),i.mount=async()=>(I(),C.value=!0,_(),!0),i.unmount=async()=>(S&&(L(S),S=void 0),E(),P(),C.value=!1,!0);const M=(e,t,i)=>{const{Cesium3DTileFeature:n,Cesium3DTileset:o,Cartesian3:a,defined:r,Model:s,Ray:l}=Cesium;if(Cesium.SuperMapVersion)return e.pickPosition(t);let c;const u={},d=new l;if(e.pickPositionSupported){O.hide(e);const l=e.pick(t,1,1);if(O.restore(e),r(l)&&(l instanceof n||l.primitive instanceof o||l.primitive instanceof s||l.primitive instanceof Cesium.S3MTilesLayer)&&(c=e.pickPosition(t,u),r(c)))return a.clone(c,i)}if(r(e.globe)){const n=e.camera.getPickRay(t,d);return c=e.globe.pick(n,e,u),r(c)?a.clone(c,i):void 0}},I=()=>{var e;const t=f.style.value;v.left=t.left,v.top=t.top,v.transform=t.transform;const i=f.attach.value,n=null==(e=Ee(b))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(v,t)},j=h(null),L=t=>{var i;const{viewer:o}=d;if(x(t)&&(t=A(t)),!t)return void c.logger.error("Invalid drawingActionOption or drawingActionOption name");const a=D(t.name);if(-1!==a){if(void 0!==S){S.actionOpts.color=j.value||"";const e=S.cmpRef.value;null==(i=e.stop)||i.call(e),S.isActive=!1,p("activeEvt",{type:S.name,option:S,isActive:!1},o)}(null==S?void 0:S.name)===(null==t?void 0:t.name)?(S=void 0,n.value[a].actionOpts.color=j.value||"red"):B((()=>{n.value[a].cmpRef.value.startNew(),j.value=n.value[a].actionOpts.color,n.value[a].actionOpts.color=e.activeColor,n.value[a].isActive=!0,S=n.value[a],p("activeEvt",{type:S.name,option:S,isActive:!0},o)}))}},A=e=>n.value.find((t=>t.name===e)),D=e=>n.value.findIndex((t=>t.name===e)),R=e=>{e?_():(S&&L(S),E()),o.modelValue=e,p("fabUpdated",e)},N=()=>{n.value.forEach((e=>{var t;null==(t=e.cmpRef.value)||t.clear()})),S&&L(S)},V=()=>xe(c.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return S},get getWorldPosition(){return M},get drawingHandlerActive(){return T}}),F=({cesiumObject:e})=>{e._vcId=r};g(se,V()),i.appContext.config.globalProperties.$VueCesium=V(),Object.assign(i.proxy,{clearAll:N,deactivate:E,activate:_,toggleAction:L,getFabRef:()=>b.value,getDrawingActionInstance:A,getDrawingActionInstances:()=>n.value,getSelectedDrawingActionInstance:()=>S});return{renderContent:()=>{if(m.value){const i=[],c=[];n.value.forEach((t=>{i.push(z(ys,l(s({ref:t.actionRef,style:t.actionStyle,class:t.actionClass},t.actionOpts),{onClick:()=>{L(t)}}),(()=>z(vs,s({},t.actionOpts.tooltip),(()=>z("strong",null,t.tip)))))),t.cmp&&c.push(z(t.cmp,s({ref:t.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(e,t)=>{p("drawEvt",e,t)},onEditorEvt:(e,t)=>{p("editorEvt",e,t)},onMouseEvt:(e,t)=>{p("mouseEvt",e,t)}},t.cmpOpts)))})),n.value.length&&i.push(z(ys,l(s({style:{background:a.color,color:a.textColor},class:"vc-draw-button vc-draw-clear"},a),{onClick:N}),(()=>z(vs,s({},a.tooltip),(()=>z("strong",null,a.tooltip.tip||u(`vc.${r}.clear.tip`)))))));const d=[];return C.value&&d.push(z("div",{ref:y,class:"vc-drawings-container "+f.classes.value,style:v},void 0!==t.slots.body?t.slots.body(n.value):z(fs,l(s({ref:b,class:"vc-draw-button",style:{background:o.color,color:o.textColor}},o),{"onUpdate:modelValue":R}),{default:()=>i,tooltip:()=>z(vs,s({},o.tooltip),(()=>z("strong",null,o.tooltip.tip||(o.modelValue?u("vc.drawing.collapse"):u("vc.drawing.expand")))))}))),d.push(z(Yu,{ref:w,show:e.show,onReady:F},(()=>c))),d}return G("v-if")}}}var Ep=F({name:"VcMeasurements",props:Vc,emits:l(s({},Es),{fabUpdated:e=>!0}),setup(e,t){var i;const n=O();n.cesiumClass="VcMeasurements";const{t:o}=eo(),a=k(Object.assign({},zc.clearActionOpts,e.clearActionOpts)),r=k(Object.assign({},zc.mainFabOpts,e.mainFabOpts)),s=k(Object.assign({},zc.distanceActionOpts,e.distanceActionOpts)),l=k(Object.assign({},zc.distanceMeasurementOpts,e.distanceMeasurementOpts)),c=k(Object.assign({},zc.componentDistanceActionOpts,e.componentDistanceActionOpts)),u=k(Object.assign({},zc.componentDistanceMeasurementOpts,e.componentDistanceMeasurementOpts)),d=k(Object.assign({},zc.polylineActionOpts,e.polylineActionOpts)),p=k(Object.assign({},zc.polylineMeasurementOpts,e.polylineMeasurementOpts)),m=k(Object.assign({},zc.horizontalActionOpts,e.horizontalActionOpts)),v=k(Object.assign({},zc.horizontalMeasurementOpts,e.horizontalMeasurementOpts)),g=k(Object.assign({},zc.verticalActionOpts,e.verticalActionOpts)),y=k(Object.assign({},zc.verticalMeasurementOpts,e.verticalMeasurementOpts)),b=k(Object.assign({},zc.heightActionOpts,e.heightActionOpts)),C=k(Object.assign({},zc.heightMeasurementOpts,e.heightMeasurementOpts)),w=k(Object.assign({},zc.areaActionOpts,e.areaActionOpts)),x=k(Object.assign({},zc.areaMeasurementOpts,e.areaMeasurementOpts)),S=k(Object.assign({},zc.pointActionOpts,e.pointActionOpts)),_=k(Object.assign({},zc.pointMeasurementOpts,e.pointMeasurementOpts)),E=k(Object.assign({},zc.rectangleActionOpts,e.rectangleActionOpts)),P=k(Object.assign({},zc.rectangleMeasurementOpts,e.rectangleMeasurementOpts)),T=k(Object.assign({},zc.regularActionOpts,e.regularActionOpts)),M=k(Object.assign({},zc.regularMeasurementOpts,e.regularMeasurementOpts)),I=k(Object.assign({},zc.circleActionOpts,e.circleActionOpts)),j=k(Object.assign({},zc.circleMeasurementOpts,e.circleMeasurementOpts)),L={};L.distanceActionOpts=s,L.distanceMeasurementOpts=l,L.componentDistanceActionOpts=c,L.componentDistanceMeasurementOpts=u,L.polylineActionOpts=d,L.polylineMeasurementOpts=p,L.horizontalActionOpts=m,L.horizontalMeasurementOpts=v,L.verticalActionOpts=g,L.verticalMeasurementOpts=y,L.heightActionOpts=b,L.heightMeasurementOpts=C,L.areaActionOpts=w,L.areaMeasurementOpts=x,L.pointActionOpts=S,L.pointMeasurementOpts=_,L.rectangleActionOpts=E,L.rectangleMeasurementOpts=P,L.regularActionOpts=T,L.regularMeasurementOpts=M,L.circleActionOpts=I,L.circleMeasurementOpts=j,L.clearActionOpts=a;const A=f((()=>e.measurements.map((e=>({name:e,type:"measurement",actionStyle:{background:L[`${ie(e)}ActionOpts`].color,color:L[`${ie(e)}ActionOpts`].textColor},actionClass:`vc-measure-${e} vc-measure-button`,actionRef:h(null),actionOpts:L[`${ie(e)}ActionOpts`],cmp:D(e),cmpRef:h(null),cmpOpts:L[`${ie(e)}MeasurementOpts`],tip:L[`${ie(e)}ActionOpts`].tooltip.tip||o(`vc.measurement.${e}.tip`),isActive:!1})))));function D(e){switch(e){case"distance":case"component-distance":return vp;case"polyline":return gp;case"horizontal":return fp;case"vertical":return yp;case"height":return bp;case"point":return wp;case"area":return Op;case"rectangle":return xp;case"regular":case"circle":return Sp;default:return}}return null==(i=_p(e,t,n,A,r,a,"measurement"))?void 0:i.renderContent}});Ep.install=e=>{e.component(Ep.name,Ep)};const Pp=Ep,Tp=Object.assign({},Jl,{icon:"vc-icons-drawing-point"}),Mp=Object.assign({},Jl,{icon:"vc-icons-drawing-polyline"}),Ip=Object.assign({},Jl,{icon:"vc-icons-drawing-polygon"}),jp=Object.assign({},Jl,{icon:"vc-icons-drawing-rectangle"}),Lp=Object.assign({},Jl,{icon:"vc-icons-drawing-pin"}),Ap=Object.assign({},ac,{pointOpts:Object.assign({},ec,{show:!1}),billboardOpts:tc,labelOpts:Object.assign({},nc,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),Dp=Object.assign({},Jl,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Rp=["pin","point","polyline","polygon","rectangle","regular","circle"],kp=l(s({},gc),{drawings:{type:Array,default:()=>Rp,validator:e=>{let t=!0;return e.forEach((e=>{Rp.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Dp},pinActionOpts:{type:Object,default:()=>Lp},pinDrawingOpts:{type:Object,default:()=>Ap},pointActionOpts:{type:Object,default:()=>Tp},pointDrawingOpts:{type:Object,default:()=>ac},polylineActionOpts:{type:Object,default:()=>Mp},polylineDrawingOpts:{type:Object,default:()=>sc},polygonActionOpts:{type:Object,default:()=>Ip},polygonDrawingOpts:{type:Object,default:()=>lc},rectangleActionOpts:{type:Object,default:()=>jp},rectangleDrawingOpts:{type:Object,default:()=>cc},circleActionOpts:{type:Object,default:()=>vc},circleDrawingOpts:{type:Object,default:()=>uc},regularActionOpts:{type:Object,default:()=>mc},regularDrawingOpts:{type:Object,default:()=>dc}}),Bp=he(kp);var Np=F({name:"VcDrawingPin",props:l(s({},hc),{billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean}),emits:Es,setup:(e,t)=>Cp(e,t,"VcDrawingPin")}),Vp=F({name:"VcDrawingPoint",props:l(s({},hc),{heightReference:Number,labelOpts:Object,showLabel:Boolean}),emits:Es,setup:(e,t)=>Cp(e,t,"VcDrawingPoint")}),zp=F({name:"VcDrawingPolyline",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>hp(e,t,"VcDrawingPolyline")}),Fp=F({name:"VcDrawingPolygon",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>hp(e,t,"VcDrawingPolygon")}),Hp=F({name:"VcDrawingRegular",props:l(s({},hc),{polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcDrawingRegular")}),Up=F({name:"VcDrawingRectangle",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean}),emits:Es,setup:(e,t)=>mp(e,t,"VcDrawingRectangle")});var Wp=F({name:"VcDrawings",props:kp,emits:l(s({},Es),{fabUpdated:e=>!0}),setup(e,t){var i;const n=O();n.cesiumClass="VcDrawings";const{t:o}=eo(),a={},r=k(Object.assign({},Bp.clearActionOpts,e.clearActionOpts)),s=k(Object.assign({},Bp.mainFabOpts,e.mainFabOpts)),l=k(Object.assign({},Bp.pointActionOpts,e.pointActionOpts)),c=k(Object.assign({},Bp.pointDrawingOpts,e.pointDrawingOpts)),u=k(Object.assign({},Bp.polylineActionOpts,e.polylineActionOpts)),d=k(Object.assign({},Bp.polylineDrawingOpts,e.polylineDrawingOpts)),p=k(Object.assign({},Bp.polygonActionOpts,e.polygonActionOpts)),m=k(Object.assign({},Bp.polygonDrawingOpts,e.polygonDrawingOpts)),v=k(Object.assign({},Bp.rectangleActionOpts,e.rectangleActionOpts)),g=k(Object.assign({},Bp.rectangleDrawingOpts,e.rectangleDrawingOpts)),y=k(Object.assign({},Bp.circleActionOpts,e.circleActionOpts)),b=k(Object.assign({},Bp.circleDrawingOpts,e.circleDrawingOpts)),C=k(Object.assign({},Bp.regularActionOpts,e.regularActionOpts)),w=k(Object.assign({},Bp.regularDrawingOpts,e.regularDrawingOpts)),x=k(Object.assign({},Bp.pinActionOpts,e.pinActionOpts)),S=k(Object.assign({},Bp.pinDrawingOpts,e.pinDrawingOpts));a.pointActionOpts=l,a.pointDrawingOpts=c,a.polylineActionOpts=u,a.polylineDrawingOpts=d,a.polygonActionOpts=p,a.polygonDrawingOpts=m,a.rectangleActionOpts=v,a.rectangleDrawingOpts=g,a.circleActionOpts=y,a.circleDrawingOpts=b,a.regularActionOpts=C,a.regularDrawingOpts=w,a.pinActionOpts=x,a.pinDrawingOpts=S,a.clearActionOpts=r;const _=f((()=>e.drawings.map((e=>({name:e,type:"drawing",actionStyle:{background:a[`${ie(e)}ActionOpts`].color,color:a[`${ie(e)}ActionOpts`].textColor},actionClass:`vc-draw-${e} vc-draw-button`,actionRef:h(null),actionOpts:a[`${ie(e)}ActionOpts`],cmp:E(e),cmpRef:h(null),cmpOpts:a[`${ie(e)}DrawingOpts`],tip:a[`${ie(e)}ActionOpts`].tooltip.tip||o(`vc.drawing.${ie(e)}.tip`),isActive:!1})))));function E(e){switch(e){case"pin":return Np;case"point":return Vp;case"polyline":return zp;case"polygon":return Fp;case"rectangle":return g.regular?Hp:Up;case"circle":case"regular":return Hp;default:return}}return null==(i=_p(e,t,n,_,s,r,"drawing"))?void 0:i.renderContent}});Wp.install=e=>{e.component(Wp.name,Wp)};const Gp=Wp;class $p{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._url=e.url;const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=e.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=e.rectangle||this._tilingScheme.rectangle;let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=To(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=e.subdomains||["01","02","03","04"],this._domain=e.domain||"webst",this._style=e.mapStyle||"6",this._lang=e.lang||"zh_cn",this._scl=e.scl||"1",this._ltype=e.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,Zp.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function Zp(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{domain}",this._domain).replace("{s}",a[(e+t+i)%a.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i);return this._resource.getDerivedResource({url:o,request:n})}var Yp=F({name:"VcImageryProviderAmap",props:s(s(s(s(s(s({url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"}},Zi),Qi),Xi),Wi),Gi),rn),emits:Os,setup(e,t){const i=O();i.cesiumClass="AMapImageryProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||$p,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.AMapImageryProvider(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var qp=F({name:"VcImageryProviderArcgis",props:s(s(s(s(s(s(s(s(s(l(s(s({url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}},zi),Fi),{usePreCachedTilesIfAvailable:{type:Boolean,default:!0}}),Hi),Ui),Wi),Gi),$i),Zi),Yi),qi),Xi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="ArcGisMapServerImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});class Xp{constructor(e,t){isNaN(e)&&(e=isNaN(e)?0:e),x(e)&&(e=parseFloat(e)),isNaN(t)&&(t=isNaN(t)?0:t),x(t)&&(t=parseFloat(t)),this.lng=e,this.lat=t}equals(e){return e&&this.lat===e.lat&&this.lng===e.lng}}Xp.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class Qp{constructor(e,t){this.x=e||0,this.y=t||0}equals(e){return e&&e.x===this.x&&e.y===this.y}}const Jp=class{lngLatToMercator(e,t){return Jp.convertLL2MC(e)}lngLatToPoint(e){const t=Jp.convertLL2MC(e);return new Qp(t.lng,t.lat)}mercatorToLngLat(e,t){return Jp.convertMC2LL(e)}pointToLngLat(e){const t=new Xp(e.x,e.y);return Jp.convertMC2LL(t)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const a=this.getZoomUnits(t),r=Math.round((e.lng-i.lng)/a+n.width/2),s=Math.round((i.lat-e.lat)/a+n.height/2);return new Qp(r,s)}pixelToPoint(e,t,i,n,o){if(!e)return;const a=this.getZoomUnits(t),r=i.lng+a*(e.x-n.width/2),s=i.lat-a*(e.y-n.height/2),l=new Xp(r,s);return this.mercatorToLngLat(l,o)}getZoomUnits(e){return Math.pow(2,18-e)}};let Kp=Jp;Kp.EARTHRADIUS=6370996.81,Kp.MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Kp.LLBAND=[75,60,45,30,15,0],Kp.MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],Kp.LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Kp.getDistanceByMC=function(e,t){if(!e||!t)return 0;if(!(e=Jp.convertMC2LL(e)))return 0;const i=Jp.toRadians(e.lng),n=Jp.toRadians(e.lat);if(!(t=Jp.convertMC2LL(t)))return 0;const o=Jp.toRadians(t.lng),a=Jp.toRadians(t.lat);return Jp.getDistance(i,o,n,a)},Kp.getDistanceByLL=function(e,t){if(!e||!t)return 0;e.lng=Jp.getLoop(e.lng,-180,180),e.lat=Jp.getRange(e.lat,-74,74),t.lng=Jp.getLoop(t.lng,-180,180),t.lat=Jp.getRange(t.lat,-74,74);const i=Jp.toRadians(e.lng),n=Jp.toRadians(e.lat),o=Jp.toRadians(t.lng),a=Jp.toRadians(t.lat);return Jp.getDistance(i,o,n,a)},Kp.convertMC2LL=function(e){let t;const i=new Xp(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<Jp.MCBAND.length;o++)if(i.lat>=Jp.MCBAND[o]){t=Jp.MC2LL[o];break}const n=Jp.convertor(e,t);return new Xp(null==n?void 0:n.lng.toFixed(6),null==n?void 0:n.lat.toFixed(6))},Kp.convertLL2MC=function(e){let t;e.lng=Jp.getLoop(e.lng,-180,180),e.lat=Jp.getRange(e.lat,-74,74);const i=new Xp(e.lng,e.lat);for(let o=0;o<Jp.LLBAND.length;o++)if(i.lat>=Jp.LLBAND[o]){t=Jp.LL2MC[o];break}if(!t)for(let o=Jp.LLBAND.length-1;o>=0;o--)if(i.lat<=-Jp.LLBAND[o]){t=Jp.LL2MC[o];break}const n=Jp.convertor(e,t);return new Xp(null==n?void 0:n.lng.toFixed(2),null==n?void 0:n.lat.toFixed(2))},Kp.convertor=function(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new Xp(i,o)},Kp.getDistance=function(e,t,i,n){return Jp.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))},Kp.toRadians=function(e){return Math.PI*e/180},Kp.toDegrees=function(e){return 180*e/Math.PI},Kp.getRange=function(e,t,i){return null!=t&&(e=Math.max(e,t)),null!=i&&(e=Math.min(e,i)),e},Kp.getLoop=function(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e};class em{constructor(e){const{defaultValue:t,Ellipsoid:i,WebMercatorProjection:n,Cartesian2:o,Cartographic:a,Math:r,Rectangle:s}=Cesium;e=e||{},this._ellipsoid=t(e.ellipsoid,i.WGS84),this._projection=new n(this._ellipsoid);const l=new Kp;this._projection.project=function(t,i){return i=i||{},e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=No(r.toDegrees(t.longitude),r.toDegrees(t.latitude)),i=Bo(i[0],i[1])):i=Bo(r.toDegrees(t.longitude),r.toDegrees(t.latitude))),i[0]=Math.min(i[0],180),i[0]=Math.max(i[0],-180),i[1]=Math.min(i[1],74.000022),i[1]=Math.max(i[1],-71.988531),i=l.lngLatToPoint(new Xp(i[0],i[1])),new o(i.x,i.y)},this._projection.unproject=function(t,i){return i=i||{},(i=l.mercatorToLngLat(new Xp(t.x,t.y)))[0]=(i[0]+180)%360-180,e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=ko(i.lng,i.lat),i=Vo(i[0],i[1])):i=ko(i.lng,i.lat)),new a(Cesium.Math.toRadians(i[0]),Cesium.Math.toRadians(i[1]))},this._rectangleSouthwestInMeters=new o(-20037726.37,-12474104.17),this._rectangleNortheastInMeters=new o(20037726.37,12474104.17);const c=this._projection.unproject(this._rectangleSouthwestInMeters),u=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s(c.longitude,c.latitude,u.longitude,u.latitude),this.resolutions=[];for(let d=0;d<19;d++)this.resolutions[d]=256*Math.pow(2,18-d)}getNumberOfXTilesAtLevel(e){return 1<<e}getNumberOfYTilesAtLevel(e){return 1<<e}rectangleToNativeRectangle(e,t){const{defined:i,Rectangle:n}=Cesium,o=this._projection,a=o.project(n.southwest(e)),r=o.project(n.northeast(e));return i(t)?(t.west=a.x,t.south=a.y,t.east=r.x,t.north=r.y,t):new n(a.x,a.y,r.x,r.y)}tileXYToNativeRectangle(e,t,i,n){const{defined:o,Rectangle:a}=Cesium,r=this.resolutions[i],s=e*r,l=(e+1)*r,c=(1+(t=-t))*r,u=t*r;return o(n)?(n.west=s,n.south=u,n.east=l,n.north=c,n):new a(s,u,l,c)}tileXYToRectangle(e,t,i,n){const{Cartesian2:o}=Cesium,a=this.tileXYToNativeRectangle(e,t,i,n),r=this._projection,s=r.unproject(new o(a.west,a.south)),l=r.unproject(new o(a.east,a.north));return a.west=s.longitude,a.south=s.latitude,a.east=l.longitude,a.north=l.latitude,a}positionToTileXY(e,t,i){const{Rectangle:n,defined:o,Cartesian2:a}=Cesium,r=this._rectangle;if(!n.contains(r,e))return;const s=this._projection.project(e);if(!o(s))return;const l=this.resolutions[t],c=Math.floor(s.x/l),u=-Math.floor(s.y/l);return o(i)?(i.x=c,i.y=u,i):new a(c,u)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class tm{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=i(e.subdomains,["0","1","2","3"]),e.url?this._url=e.url:"img"===e.mapStyle?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":"vec"===e.mapStyle?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi2_0":"traffic"===e.mapStyle?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||18,this._tilingScheme=new em(e),this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=To(),this._ready=!0,this._readyPromise.resolve(!0),this._labelStyle=e.labelStyle||"web2D",this._qt=e.qt,this._styles=e.styles,this._scale=e.scale,this._ak=e.ak,this._mapStyle=e.mapStyle}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,im.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function im(e,t,i,n){let o=this._url;const a=this._subdomains;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{time}",String((new Date).getTime())).replace("{udt}",String((new Date).getTime()));return this._resource.getDerivedResource({url:o,request:n})}var nm=F({name:"VcImageryProviderBaidu",props:l(s(s(s(s(s(s(s({},Vi),Wi),$i),Fi),Zi),Qi),Xi),{projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"E4805d16520de693a3fe707cdc962045"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"}}),emits:Os,setup(e,t){const i=O();i.cesiumClass="BaiduMapImageryProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||tm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var om=F({name:"VcImageryProviderBing",props:s(s({url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""}},$i),Fi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="BingMapsImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var am=F({name:"VcImageryProviderGoogle",props:l(s(s(s(s({},Vi),$i),Fi),Zi),{metadata:Object}),emits:Os,setup(e,t){const i=O();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var rm=F({name:"VcImageryProviderGrid",props:l(s(s(l(s(l(s(s({},Gi),$i),{cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:ke}}}),$n),{glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:ke}}}),Yi),qi),{canvasSize:{type:Number,default:256}}),emits:Os,setup(e,t){const i=O();return i.cesiumClass="GridImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}}),sm=F({name:"VcImageryProviderIon",props:l(s({assetId:Number},Ki),{server:[String,Object]}),emits:Os,setup(e,t){const i=O();return i.cesiumClass="IonImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var lm=F({name:"VcImageryProviderMapbox",props:s(s(s(s(s(l(s({url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String},Ki),{tilesize:{type:Number,default:512},scaleFactor:Boolean}),$i),Qi),Xi),Wi),Zi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="MapboxStyleImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var cm=F({name:"VcImageryProviderOsm",props:l(s(s(s(s(s({url:{type:String,default:"https://a.tile.openstreetmap.org"}},Ji),Wi),Qi),Xi),$i),{credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}}),emits:Os,setup(e,t){const i=O();return i.cesiumClass="OpenStreetMapImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var um=F({name:"VcImageryProviderSingletile",props:s(s(s(s({},Vi),Wi),Zi),$i),emits:Os,setup(e,t){const i=O();return i.cesiumClass="SingleTileImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const dm=1,pm=2,mm=3;class vm{constructor(e){if(!Cesium.defined(e.name))throw new Cesium.DeveloperError("options.name is required.");const t=window.indexedDB.open(this.dbname);this.layer=e.layer||null,this.storageType=e.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=e.name;const i=this;return new Promise(((e,n)=>{t.onsuccess=t=>{i.db=t.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},e(i)},t.onupgradeneeded=t=>{i.db=t.target.result,i.version=i.db.version,e(i)},t.onerror=e=>{i.db=null,n("create database fail, error code : "+e.target.errorcode)}}))}checkObjectStoreExist(e){return!!Cesium.defined(this.db)&&this.db.objectStoreNames.contains(e)}createObjectStore(e){return new Promise(((t,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(e))return void i(!1);this.creatingTable=!0;const n=parseInt(this.db.version);this.db.close();const o=this,a=window.indexedDB.open(this.dbname,n+1);a.onupgradeneeded=i=>{const n=i.target.result;o.db=n;const a=n.createObjectStore(e,{keyPath:"id"});if(Cesium.defined(a)){a.createIndex("value","value",{unique:!1}),o.creatingTable=!1,o.cachestatus=o.cachestatus||{},o.cachestatus[e]={},o.db.close();window.indexedDB.open(o.dbname).onsuccess=e=>{o.db=e.target.result,t(!0)}}else o.creatingTable=!1,t(!1)},a.onsuccess=e=>{e.target.result.close(),t(!0)},a.onerror=e=>{o.creatingTable=!1,i(!1)}}}))}putElementInDB(e,t,i){return new Promise(((n,o)=>{if(!Cesium.defined(this.db))return void o(!1);const{cachestatus:a,db:r}=this;if(Cesium.defined(a[e])&&Cesium.defined(a[e][t]&&(a[e][t]===dm||a[e][t]===pm)))n(!1);else if(r.objectStoreNames.contains(e)){a[e]=a[e]||{};try{const o=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a[e][t]=dm,o.onsuccess=i=>{a[e][t]=pm,n(!0)},o.onerror=i=>{a[e][t]=mm,n(!1)}}catch(s){return void o(null)}}else this.createObjectStore(e).then((()=>{const a=r.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});a.onsuccess=function(e){n(!0)},a.onerror=function(e){o(!1)}}),(()=>{o(!1)}))}))}getElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(!Cesium.defined(o))return null;if(!o.objectStoreNames.contains(e))return null;try{const a=o.transaction([e]),r=a.objectStore(e).get(t);r.onsuccess=e=>Cesium.defined(e.target.result)?i(e.target.result.value):n(null),r.onerror=e=>{n(null)}}catch(a){n(null)}}))}updateElementInDB(e,t,i){return new Promise(((n,o)=>{const{db:a}=this;if(Cesium.defined(a))if(a.objectStoreNames.contains(e))try{const o=a.transaction([e],"readwrite").objectStore(e).put({id:t,value:i});o.onsuccess=()=>{n(!0)},o.onerror=()=>{n(!1)}}catch(Rh){n(!1)}else n(!1);else n(!1)}))}removeElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(Cesium.defined(o))if(o.objectStoreNames.contains(e))try{const n=o.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{i(!0)},n.onerror=()=>{i(!1)}}catch(Rh){i(!1)}else i(!1);else i(!1)}))}clear(e){return new Promise(((t,i)=>{const{db:n}=this;if(Cesium.defined(n))if(n.objectStoreNames.contains(e))try{const i=n.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>{t(!0)},i.onerror=()=>{t(!1)}}catch(Rh){t(!1)}else t(!1);else t(!1)}))}}class hm{constructor(e){const{appendForwardSlash:t,Credit:i,defaultValue:n,defined:o,DeveloperError:a,Event:r,Resource:s,Math:l}=Cesium;e=n(e,{});const{url:c}=e;if(!o(c))throw new a("options.url is required.");const u=c.substring(0,c.indexOf("datas"));this.tablename=c.substring(0,c.indexOf("datas/")+6,c.length);const d=this;new vm({name:u+this.tablename}).then((e=>{d._indexedDBScheduler=e})),this._indexedDBSetting={isOpen:!1,clear:()=>{d._indexedDBScheduler.clear(d.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=t(c);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=e.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new a("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=s.createIfNeeded(p),this._transparent=n(e.transparent,!0),this._name=e.name||"",this._urlTemplate=void 0,this._errorEvent=new r,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._fRatio=n(e.ratio,l.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let m=n(e.credit,new i("MapQuest, SuperMap iServer Imagery"));"string"==typeof m&&(m=new i(m)),this._credit=m,this._ready=!1,this._readyPromise=To(),this._options=e,Cm.call(this)}get url(){return this._url}get name(){return this._name}set name(e){this._name=e}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(e){this._fRatio=e}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){const{defined:o,DeveloperError:a,ImageryProvider:r}=Cesium;if(!this.ready)throw new a("requestImage must not be called before the imagery provider is ready.");const s=bm.call(this,e,t,i),l=this._resource.getDerivedResource({url:s,request:n}),c=this;if(!this._indexedDBSetting.isOpen)return r.loadImage(this,l);if(o(this._indexedDBScheduler)){const e=this._indexedDBScheduler.getElementFromDB(this.tablename,s);try{return e.then((e=>{if(o(e)){const t=new Image;return t.src=e,t}return r.loadImage(c,l)}))}catch(Rh){return r.loadImage(c,l)}}}pickFeatures(e,t,i,n,o){}}let gm={};const fm=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],ym=[1.690163571602655e-9,3.3803271432053056e-9,6.760654286410611e-9,1.3521308572821242e-8,2.7042617145642484e-8,5.408523429128511e-8,1.0817046858256998e-7,2.1634093716513974e-7,4.3268187433028044e-7,8.653637486605571e-7,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function bm(e,t,i){let n;if(this.isTileMap){if("DEGREE"===this._coordUnit){const o=fm[i+1]||fm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if("METER"===this._coordUnit){const o=fm[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}function Cm(){const{Resource:e}=Cesium;if(this.isTileMap){const t=e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});try{t.then((e=>{Em.call(this,e)}))}catch(Rh){Pm.call(this)}}else try{e.fetchText({url:this.url+"config"}).then((e=>{wm.call(this,e)}))}catch(Rh){Pm.call(this)}}function wm(e){const t=Om.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const s=t.levels,l=s.length;if(this._minimumLevel=i(s[0],0),this._maximumLevel=i(s[l-1],l-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const e=a.toRadians(t.left),i=a.toRadians(t.right),n=a.toRadians(t.bottom),o=a.toRadians(t.top);this._rectangle=new r(e,n,i,o)}const c=this._tilingScheme;this._rectangle.west<c.rectangle.west&&(this._rectangle.west=c.rectangle.west),this._rectangle.east>c.rectangle.east&&(this._rectangle.east=c.rectangle.east),this._rectangle.south<c.rectangle.south&&(this._rectangle.south=c.rectangle.south),this._rectangle.north>c.rectangle.north&&(this._rectangle.north=c.rectangle.north);const u=c.positionToTileXY(r.southwest(this._rectangle),this._minimumLevel),d=c.positionToTileXY(r.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(d.x-u.x)+1)*(window.Math.abs(d.y-u.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=c,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function Om(e){const t="http://www.supermap.com/SuperMapCache/sci3d",i=(e=(new DOMParser).parseFromString(e,"application/xml")).childNodes[0],n=function(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),a=o.length;for(let e=0;e<a;e++){const a=o[e];a.localName===t&&-1!==i.indexOf(a.namespaceURI)&&n.push(a)}return n}}(_m(i,"Levels",t),"Level",t)||[],o=[];for(let v=0;v<n.length;v++)o.push(parseInt(n[v].textContent,10));const a=_m(i,"Bounds",t),r=Sm(a,"Left",t),s=Sm(a,"Right",t),l=Sm(a,"Top",t),c=Sm(a,"Bottom",t),u=xm(i,"FileExtentName",t),d=Sm(i,"CellWidth",t),p=Sm(i,"CellHeight",t),m=xm(i,"CacheName",t);return this._name=m||"",{left:r,right:s,top:l,bottom:c,fileExtentName:u,levels:o,imageSizeWidth:d,imageSizeHeight:p}}function xm(e,t,i){const n=_m(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function Sm(e,t,i){const n=_m(e,t,i);if(Cesium.defined(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function _m(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let e=0;e<o;e++){const o=n[e];if(o.localName===t&&-1!==i.indexOf(o.namespaceURI))return o}}}function Em(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:a,Rectangle:r,WebMercatorTilingScheme:s}=Cesium,l=e.prjCoordSys.coordUnit;this._coordUnit=l;const c=e.bounds,u=e.visibleScales;if(n(u)&&u.length>1&&n(this._maximumLevel)){const e=u[u.length-1];this._maximumLevel=function(e){for(let t=ym.length;t--;)if(e[t]<=e)return t}(e)}if("DEGREE"===l)this._tilingScheme=new o,c.left=a.clamp(c.left,-180,180),c.bottom=a.clamp(c.bottom,-90,90),c.right=a.clamp(c.right,-180,180),c.top=a.clamp(c.top,-90,90),this._rectangle=r.fromDegrees(c.left,c.bottom,c.right,c.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const e=new t(c.left,c.bottom,0);e.x=Math.max(-20037508.342789244,e.x),e.y=Math.max(-20037508.342789244,e.y);const i=new t(c.right,c.top,0);i.x=Math.min(20037508.342789244,i.x),i.y=Math.min(20037508.342789244,i.y),this._tilingScheme=new s;const n=this._tilingScheme.projection.unproject(e),o=this._tilingScheme.projection.unproject(i);this._rectangle=new r(n.longitude,n.latitude,o.longitude,o.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function Pm(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";gm=e.handleError(gm,this,this._errorEvent,i,0,0,0,Cm.bind(this)),this._readyPromise.reject(new t(i))}var Tm=F({name:"VcImageryProviderSupermap",props:s(l(s(s({url:String},Qi),Xi),{name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"}}),rn),emits:Os,setup(e,t){const i=O();i.cesiumClass="SuperMapImageryProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||hm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.SuperMapImageryProvider(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Mm={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class Im{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=e.subdomains||["1","2","3"],this._url=e.url||[e.protocol||"",Mm[e.mapStyle]||Mm.vector].join("");const a=t.createIfNeeded(this._url);a.appendForwardSlash(),this._ready=!1,this._resource=a,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let r=e.credit;"string"==typeof r&&(r=new n(r)),this._credit=r,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=To(),this._ready=!0,this._readyPromise.resolve(!0),this._style=e.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,jm.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function jm(e,t,i,n){let o=this._url;const a=this._subdomains,r=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;o=o.replace("{s}",a[(e+t+i)%a.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",r);return this._resource.getDerivedResource({url:o,request:n})}var Lm=F({name:"VcImageryProviderTencent",props:s(s(s(s(s(s(l(s({},Vi),{subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String}),Zi),Qi),Xi),Wi),Gi),rn),emits:Os,setup(e,t){const i=O();i.cesiumClass="TencentImageryProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||Im,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TencentImageryProvider(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Am={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"},Dm={},Rm={},km={},Bm={},Nm={},Vm={};class zm{constructor(e){Object.keys(Am).forEach((t=>{switch(Dm[Am[t]]=e.protocol+"://{s}.tianditu.gov.cn/"+Am[t]+"/wmts",Rm[Am[t]]=Am[t].slice(0,3),km[Am[t]]=Am[t].slice(4),Bm[Am[t]]="tiles","w"===km[Am[t]]?Nm[Am[t]]="900913":Nm[Am[t]]="4490",Am[t]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":Vm[Am[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":Vm[Am[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":Vm[Am[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":Vm[Am[t]]=["1","2","3","4","5","6","7","8","9","10"]}}));const{Credit:t,defaultValue:i,Event:n,GeographicTilingScheme:o,WebMercatorTilingScheme:a,when:r}=Cesium;e=i(e,{}),this._mapStyle=i(e.mapStyle,Am.IMG_W),this._url=e.url||i(e.url,Dm[this._mapStyle]),this._token=e.token,this._layer=i(e.layer,Rm[this._mapStyle]),this._style=i(e.style,"default"),this._tileMatrixSetID=i(e.tileMatrixSetID,km[this._mapStyle]),this._tileMatrixLabels=i(e.tileMatrixLabels,Vm[this._mapStyle]),this._format=i(e.format,Bm[this._mapStyle]),this._epsgCode=Nm[this._mapStyle],this._tilingScheme="900913"===this._epsgCode?new a:new o,this._tileWidth=i(e.tileWidth,256),this._tileHeight=i(e.tileHeight,256),this._minimumLevel=i(e.minimumLevel,0),this._maximumLevel=i(e.maximumLevel,Vm[this._mapStyle].length),this._rectangle=i(e.rectangle,this.tilingScheme.rectangle),this._readyPromise=Promise.resolve(!0),this._errorEvent=new n;const s=i(e.credit,"天地图全球影像服务");this._credit="string"==typeof s?new t(s):s,this._subdomains=i(e.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=e.tileDiscardPolicy}requestImage(e,t,i){const n=Fm.call(this,e,t,i);return Cesium.ImageryProvider.loadImage(this,n)}pickFeatures(e,t,i,n,o){}get url(){return this._url}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get readyPromise(){return this._readyPromise}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function Fm(e,t,i){var n;const{combine:o,defined:a,defaultValue:r,queryToObject:s,objectToQuery:l,Uri:c}=Cesium,u=(0,Object.freeze)({service:"WMTS",version:"1.0.0",request:"GetTile"});"900913"===this._epsgCode&&(i-=1);const d=this._tileMatrixLabels,p=a(d)?d[i]:i.toString(),m=this._subdomains;let v=this._url.replace("{s}",m[(e+t+i)%m.length]);const h=new c(v);let g=s(r(null==(n=h.query)?void 0:n.call(h),""));g=o(u,g),g.tilematrix=p,g.layer=this._layer,g.style=this._style,g.tilerow=t,g.tilecol=e,g.tilematrixset=this._tileMatrixSetID,g.format=this._format;const f=l(g);return v=h.toString()+"?"+f,a(this._proxy)&&(v=this._proxy.getURL(v)),a(this._token)&&(v+="&tk="+this._token),v}var Hm=F({name:"VcImageryProviderTianditu",props:s(l(s(s(s(s({},Vi),Qi),Xi),Wi),{mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","ela_c","ela_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"天地图全球影像服务"}}),rn),emits:Os,setup(e,t){const i=O();i.cesiumClass="TiandituImageryProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||zm,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TiandituImageryProvider(t)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Um=F({name:"VcImageryProviderTileCoordinates",props:s(s(l(s(s({},Gi),$i),{color:{type:[Object,String,Array],default:"YELLOW"}}),Yi),qi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="TileCoordinatesImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Wm=F({name:"VcImageryProviderTms",props:s(l(s(s(s(s(s(s(s(s(s({url:[String,Object]},Ji),Zi),Qi),Xi),Wi),Gi),$i),Yi),qi),{flipXY:Boolean}),rn),emits:Os,setup(e,t){const i=O();return i.cesiumClass="TileMapServiceImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Gm=F({name:"VcImageryProviderTiledcache",props:l(s(s(s(s(s(s(s(s(s(s({},Vi),en),Zi),Qi),Xi),Wi),Gi),$i),Yi),qi),{dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}}),emits:Os,setup(e,t){const i=O();i.cesiumClass="UrlTemplateImageryProvider";const n=Wo(e,t,i);if(void 0===n)return;i.createCesiumObject=async()=>{const t=n.transformProps(e),{Credit:i,defined:a,defaultValue:r,DeveloperError:s,Ellipsoid:l,GeographicTilingScheme:c,Rectangle:u,Resource:d,UrlTemplateImageryProvider:p}=Cesium,{url:m,dir:v,format:h}=t;if(!a(m))throw new s("options.url is required.");if(!a(v))throw new s("options.dir is required.");const g=d.createIfNeeded(m);g.url+=`?dir=${v}&scale={scale}&col={x}&row={y}&format=${h}`;const f=r(t.tilingScheme,new c({ellipsoid:r(t.ellipsoid,l.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),y=r(t.tileWidth,256),b=r(t.tileHeight,256),C=t.maximumLevel,w=r(t.minimumLevel,0),O=r(t.rectangle,f.rectangle),x=f.positionToTileXY(u.southwest(O),w),S=f.positionToTileXY(u.northeast(O),w),_=(Math.abs(S.x-x.x)+1)*(Math.abs(S.y-x.y)+1);if(_>4)throw new s("The rectangle and minimumLevel indicate that there are "+_+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let E=r(t.credit,"");return"string"==typeof E&&(E=new i(E)),new p({url:g,credit:E,tilingScheme:f,tileWidth:y,tileHeight:b,minimumLevel:w,maximumLevel:C,rectangle:O,customTags:{scale:(t,i,n,a)=>{const r=1/e.scales[a];return o(t,"{scale}",r)}}})};const o=(e,t,i)=>{if(e&&e.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(e.urlSchemeZeroPadding,t)){const n=e.urlSchemeZeroPadding[t];if("string"==typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i};return()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var $m=F({name:"VcImageryProviderUrltemplate",props:s(l(s(s(l(s(s(s(s(s(s(s(s(s(l(s({},Vi),{pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object}),tn),Zi),Qi),Xi),Wi),Gi),$i),Yi),qi),{hasAlphaChannel:{type:Boolean,default:!0}}),nn),Ui),{customTags:Object}),rn),emits:Os,setup(e,t){const i=O();return i.cesiumClass="UrlTemplateImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Zm=F({name:"VcImageryProviderWms",props:l(s(s(s(s(l(s(s(s(s(s(s(s(s(s(l(s(s({},Vi),Hi),{parameters:Object,getFeatureInfoParameters:Object}),Ui),nn),Wi),Gi),$i),Yi),qi),Qi),Xi),{crs:String,srs:String}),Zi),tn),on),an),{getFeatureInfoUrl:[String,Object]}),emits:Os,setup(e,t){const i=O();return i.cesiumClass="WebMapServiceImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Ym=F({name:"VcImageryProviderWmts",props:s(s(s(s(s(s(s(s(s(l(s(s(l(s(s({},Vi),en),{layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array}),on),an),{dimensions:Object}),Yi),qi),Gi),Wi),Qi),Xi),$i),Zi),tn),emits:Os,setup(e,t){const i=O();return i.cesiumClass="WebMapTileServiceImageryProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var qm=F({name:"VcTerrainProviderCesium",props:s(s({url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0}},$i),Zi),emits:Os,setup(e,t){const i=O();i.cesiumClass="CesiumTerrainProvider";const n=Wo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return Cesium.defined(t.url)?new Cesium.CesiumTerrainProvider(t):Cesium.createWorldTerrain({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask})},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Xm=F({name:"VcTerrainProviderArcgis",props:s(s({url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}},$i),zi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Qm=F({name:"VcTerrainProviderVrTheworld",props:s(s({url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"}},$i),Zi),emits:Os,setup(e,t){const i=O();return i.cesiumClass="VRTheWorldTerrainProvider",Wo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Jm=F({name:"VcTerrainProviderTianditu",props:{url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String},emits:Os,setup(e,t){const i=O();i.cesiumClass="GeoTerrainProvider";const n=Wo(e,t,i);if(void 0===n)return;const{emit:o}=t,a=Go();let r;return i.createCesiumObject=async()=>new Promise(((t,i)=>{r=document.createElement("script"),document.body.appendChild(r),r.src=e.pluginPath,r.onload=()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const i=[];for(let t=0;t<e.subdomains.length;t++){const n=e.url.replace("{s}",e.subdomains[t])+"mapservice/swdx?tk="+e.token;i.push(n)}t(new Cesium.GeoTerrainProvider({urls:i}))}})),i.unmount=async()=>{const e=new Cesium.EllipsoidTerrainProvider;return e.readyPromise.then((()=>{_e(i,"readyPromise")&&o("readyPromise",e,null==a?void 0:a.viewer,i.proxy)})),a&&(a.viewer.terrainProvider=e),null==r||r.parentNode.removeChild(r),!0},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Yp,qp,nm,om,am,rm,sm,lm,cm,um,Tm,Lm,Hm,Um,Wm,Gm,$m,Zm,Ym,qm,Xm,Qm,Jm].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Km=Yp,ev=qp,tv=nm,iv=om,nv=am,ov=rm,av=sm,rv=lm,sv=cm,lv=um,cv=Tm,uv=Lm,dv=Hm,pv=Um,mv=Wm,vv=Gm,hv=$m,gv=Zm,fv=Ym,yv=qm,bv=Xm,Cv=Qm,wv=Jm;var Ov=F({name:"VcDatasourceCustom",props:l(s(s({},bt),qn),{entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}}),emits:_s,setup(e,t){const i=O();return i.cesiumClass="CustomDataSource",ro(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var xv=F({name:"VcDatasourceCzml",props:l(s(s(l(s(s({},bt),qn),{entities:{type:Array,default:()=>[]},czml:{type:[String,Object],required:!0}}),Wn),Zi),{destroy:{type:Boolean,default:!1}}),emits:_s,setup(e,t){const i=O();i.cesiumClass="CzmlDataSource";const n=ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,t)},()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Sv=F({name:"VcDatasourceGeojson",props:l(s(s(l(s(s(l(s(s({},bt),qn),{entities:{type:Array,default:()=>[]}}),Un),Wn),{describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:ke}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:ke}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:ke}}}),ji),Zi),{destroy:{type:Boolean,default:!1}}),emits:_s,setup(e,t){const i=O();i.cesiumClass="GeoJsonDataSource";const n=ro(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,t)},()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var _v=F({name:"VcDatasourceKml",props:l(s(s(s(s(l(s(l(s(s({},bt),qn),{entities:{type:Array,default:()=>[]}}),Un),{camera:Object,canvas:HTMLCanvasElement}),Wn),ji),$i),Zi),{destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]}),emits:_s,setup(e,t){const i=O();i.cesiumClass="KmlDataSource";const n=ro(e,t,i),o=Go();return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.camera||(t.camera=null==o?void 0:o.viewer.camera),t.canvas||(t.canvas=null==o?void 0:o.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",t)},()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[Ov,xv,Sv,_v].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ev=Ov,Pv=xv,Tv=Sv,Mv=_v;var Iv=F({name:"VcGraphicsBillboard",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},pt),ft),vt),lt),dt),Ot),ut),ot),gt),nt),Ct),xt),ct),yt),wt),ht),rt),bt),st),mt),emits:ws,setup(e,t){const i=O();return i.cesiumClass="BillboardGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var jv=F({name:"VcGraphicsBox",props:s(s(s(s(s(s(s(s(s(s({},bt),St),ut),_t),Et),Pt),Tt),Mt),It),st),emits:ws,setup(e,t){const i=O();return i.cesiumClass="BoxGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Lv=F({name:"VcGraphicsCorridor",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),jt),xt),ct),ut),Lt),At),Dt),Rt),_t),Et),Pt),Tt),Mt),It),st),kt),Bt),emits:ws,setup(e,t){const i=O();return i.cesiumClass="CorridorGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Av=F({name:"VcGraphicsCylinder",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),Nt),Vt),zt),ut),_t),Et),Pt),Tt),Mt),Ft),Ht),It),st),emits:ws,setup(e,t){const i=O();return i.cesiumClass="CylinderGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Dv=F({name:"VcGraphicsEllipse",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),Ut),Wt),ct),ut),Lt),At),gt),Gt),Rt),_t),Et),Pt),Tt),Mt),Ft),It),st),kt),Bt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipseGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Rv=F({name:"VcGraphicsEllipsoid",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),$t),Zt),Yt),qt),Xt),Qt),ut),_t),Et),Pt),Tt),Mt),Jt),Kt),ei),It),st),emits:bs,setup(e,t){const i=O();return i.cesiumClass="EllipsoidGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var kv=F({name:"VcGraphicsLabel",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),ti),ii),ni),ft),oi),ai),ri),vt),lt),dt),Ot),ut),si),Tt),Mt),wt),ht),yt),st),rt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="LabelGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Bv=F({name:"VcGraphicsModel",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),li),ft),ci),ui),di),pi),mi),It),ut),vi),hi),ot),gi),fi),yi),bi),st),Ci),wi),Oi),emits:bs,setup(e,t){const i=O();return i.cesiumClass="ModelGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Nv=F({name:"VcGraphicsPath",props:s(s(l(s(l(s({},bt),{leadTime:[Number,Object,Function],trailTime:[Number,Object,Function]}),xt),{resolution:{type:[Number,Object,Function],default:60}}),Et),st),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PathGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Vv=F({name:"VcGraphicsPlane",props:s(s(s(s(s(s(s(l(s(s({},bt),xi),{dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Te}}}),_t),Et),Pt),Tt),Mt),It),st),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PlaneGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var zv=F({name:"VcGraphicsPoint",props:s(s(s(s(s(s(s(s(s(s({},bt),Si),ut),ot),Tt),Mt),yt),wt),st),rt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PointGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Fv=F({name:"VcGraphicsPolygon",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),_i),ct),ut),Lt),At),Gt),Rt),_t),Et),Pt),Tt),Mt),Ei),Pi),Ti),Mi),It),st),kt),Bt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolygonGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Hv=F({name:"VcGraphicsPolyline",props:s(s(s(s(s(s(s(s(s(s(s(s({},bt),jt),xt),Rt),Et),Ii),Mi),ji),It),st),kt),Bt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolylineGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Uv=F({name:"VcGraphicsPolylineVolume",props:s(s(s(s(s(s(s(s(s(s(s(s({},bt),jt),Li),Dt),Rt),_t),Et),Pt),Tt),Mt),It),st),emits:bs,setup(e,t){const i=O();return i.cesiumClass="PolylineVolumeGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Wv=F({name:"VcGraphicsRectangle",props:s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},bt),Ai),ct),ut),Lt),At),gt),Gt),Rt),_t),Et),Pt),Tt),Mt),It),st),kt),Bt),emits:bs,setup(e,t){const i=O();return i.cesiumClass="RectangleGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Gv=F({name:"VcGraphicsTileset",props:s(s(s({},bt),li),Di),emits:bs,setup(e,t){const i=O();return i.cesiumClass="Cesium3DTilesetGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var $v=F({name:"VcGraphicsWall",props:s(s(s(s(s(s(s(s(s(s(s(s({},bt),jt),Ri),ki),Rt),_t),Et),Pt),Tt),Mt),It),st),emits:bs,setup(e,t){const i=O();return i.cesiumClass="WallGraphics",lo(e,t,i),()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Iv,jv,Lv,Av,Dv,Rv,kv,Bv,Nv,Vv,zv,Fv,Hv,Uv,Wv,Gv,$v].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Zv=Iv,Yv=jv,qv=Lv,Xv=Av,Qv=Dv,Jv=Rv,Kv=kv,eh=Bv,th=Nv,ih=Vv,nh=zv,oh=Fv,ah=Hv,rh=Uv,sh=Wv,lh=Gv,ch=$v;var uh=F({name:"VcPostProcessStage",props:l(s(s({fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number},Zn),Yn),{name:String}),emits:bs,setup(e,t){const i=O();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n;return i.mount=async()=>{const{postProcessStages:e}=o,t=e.add(i.cesiumObject);return e.contains(t)},i.unmount=async()=>{const{postProcessStages:e}=o;return null==e?void 0:e.remove(i.cesiumObject)},()=>{var e;return G(pe((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const dh={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]};var ph=F({name:"VcPostProcessStageScan",props:{type:{type:String,default:"radar"},options:Object},emits:bs,setup(e,t){const i=O();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const o=h(""),a=h(null),{$services:r}=n,s=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=new Cesium.Cartographic(n.longitude+Cesium.Math.toRadians(.001),n.latitude,n.height),u=Cesium.Cartographic.toCartesian(c,i.scene.globe.ellipsoid),d=new Cesium.Cartesian4(u.x,u.y,u.z,1),p=new Cesium.Quaternion,m=new Cesium.Matrix3,v=(new Date).getTime(),h=new Cesium.Cartesian4,g=new Cesium.Cartesian4,f=new Cesium.Cartesian4,y=new Cesium.Cartesian3,b=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform vec3 u_scanLineNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 v01 = testPt - ptOnLine;\n    normalize(v01);\n    vec3 temp = cross(v01, lineNormal);\n    float d = dot(temp, u_scanPlaneNormalEC);\n    return d > 0.5;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n    return length(tempPt - ptOnLine);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    float twou_radius = u_radius * 2.0;\n    if(dis < u_radius)\n    {\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n      {\n        float dis1= length(prjOnPlane.xyz - lineEndPt);\n        f = abs(twou_radius -dis1) / twou_radius;\n        f = pow(f, 3.0);\n      }\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f + f0);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g);return y.x=t.x-e.x,y.y=t.y-e.y,y.z=t.z-e.z,Cesium.Cartesian3.normalize(y,y),y},u_radius:t.radius,u_scanLineNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,h),n=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,g),o=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,f);y.x=n.x-e.x,y.y=n.y-e.y,y.z=n.z-e.z,Cesium.Cartesian3.normalize(y,y),b.x=o.x-e.x,b.y=o.y-e.y,b.z=o.z-e.z;const r=((new Date).getTime()-v)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(y,r*Cesium.Math.PI*2,p),Cesium.Matrix3.fromQuaternion(p,m),Cesium.Matrix3.multiplyByVector(m,b,b),Cesium.Cartesian3.normalize(b,b),b},u_scanColor:t.color}}}}}(r),l=function(e){return{webgl:t=>{const{viewer:i}=e,n=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),o=Cesium.Cartographic.toCartesian(n,i.scene.globe.ellipsoid),a=new Cesium.Cartesian4(o.x,o.y,o.z,1),r=new Cesium.Cartographic(n.longitude,n.latitude,n.height+500),s=Cesium.Cartographic.toCartesian(r,i.scene.globe.ellipsoid),l=new Cesium.Cartesian4(s.x,s.y,s.z,1),c=(new Date).getTime(),u=new Cesium.Cartesian4,d=new Cesium.Cartesian4,p=new Cesium.Cartesian3;return{shaderSource:"\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  varying vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    gl_FragColor = texture2D(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture2D(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius)\n    {\n      float f = 1.0 -abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      gl_FragColor = mix(gl_FragColor, u_scanColor, f);\n    }\n  }\n",uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,a,u),t=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,l,d);return p.x=t.x-e.x,p.y=t.y-e.y,p.z=t.z-e.z,Cesium.Cartesian3.normalize(p,p),p},u_radius:function(){return t.radius*(((new Date).getTime()-c)%t.interval)/t.interval},u_scanColor:t.color}}}}}(r);let c=[];const u=f((()=>Object.assign({},dh,e.options)));return c.push(L((()=>u),(e=>{i.mounted&&i.proxy.reload()}),{deep:!0})),i.createCesiumObject=async()=>{const t=n.transformProps(u.value);let i;return"radar"===e.type?i=s.webgl(t):"circle"===e.type&&(i=l.webgl(t)),o.value=i.shaderSource,a.value=i.uniforms,!0},M((()=>{c.forEach((e=>e())),c=[]})),()=>z(uh,{fragmentShader:o.value,uniforms:a.value})}});var mh=F({name:"VcPostProcessStageCollection",props:{postProcesses:{type:Array,default:()=>[]}},emits:bs,setup(e,t){const i=O();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=ao(e,t,i);if(void 0===n)return;const{$services:o}=n,a=[];let r=[];return r.push(L((()=>e.postProcesses),(e=>{var t,n;i.mounted&&(null==(n=(t=i.proxy).reload)||n.call(t))}),{deep:!0})),i.createCesiumObject=async()=>a,i.mount=async()=>{const{postProcessStages:t}=o;return e.postProcesses.forEach((e=>{const i=n.transformProps(e);a.push(t.add(new Cesium.PostProcessStage(i)))})),!0},i.unmount=async()=>{const{postProcessStages:e}=o;return a.forEach((t=>{e.remove(t)})),a.length=0,!0},M((()=>{r.forEach((e=>e())),r=[]})),()=>{var e,n;return t.slots.default?z("i",{class:pe((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},Ea(t.slots.default)):G(pe((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[uh,ph,mh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const vh=uh,hh=ph,gh=mh;var fh=F({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>Qn},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"}},setup(e,{slots:t}){const i=be(e);return()=>ne(t,"default",{config:null==i?void 0:i.value})}});fh.install=e=>{e.component(fh.name,fh)};const yh=fh,bh=yh,Ch=l(s({},bs),{stop:e=>!0});var wh=F({name:"VcAnalysisFlood",props:s({minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"}},Mn),emits:Ch,setup(e,t){var i;const n=O();n.cesiumClass="VcAnalysisFlood",n.cesiumEvents=[];const o=ao(e,t,n);if(void 0===o)return;const{emit:a}=t,r=h(!1);null==(i=Pe(n).proxy.creatingPromise)||i.then((()=>{r.value=!0}));const s=h(!1),l=h(null),c=h(-1),u=h(null);let d=!1,p=[];p.push(L((()=>e.minHeight),(e=>{c.value=e}))),n.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:t}=Cesium;return l.value={color:t.fromColor(ke(e.color))},u.value},n.mount=async()=>{const{viewer:e}=o.$services;return e.clock.onTick.addEventListener(m),!0},n.unmount=async()=>{const{viewer:e}=o.$services;return e.clock.onTick.removeEventListener(m),c.value=-1,s.value=!1,!0};const m=()=>{if(s.value)if(c.value<=e.maxHeight)c.value+=e.speed,d=!1;else{_e(n,"stop")&&a("stop",u.value),d=!0,e.loop?c.value=e.minHeight:s.value=!1}};return M((()=>{p.forEach((e=>e())),p=[]})),Object.assign(n.proxy,{start:()=>{c.value=e.minHeight,s.value=!0},pause:()=>{s.value=!s.value,d&&(c.value=e.minHeight)},stop:()=>{c.value=-1,s.value=!1}}),()=>{if(r.value){const{createGuid:t}=Cesium;return z(iu,{asynchronous:!1,ref:u},(()=>z(nd,{id:t(),attributes:l.value},(()=>z(ep,{extrudedHeight:c.value,polygonHierarchy:e.polygonHierarchy})))))}return G("v-if")}}});const Oh=Object.assign({},Jl,{icon:"vc-icons-analysis-sightline"}),xh=Object.assign({},rc,{polylineOpts:Object.assign({},ic,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Kl,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),Sh=Object.assign({},Jl,{icon:"vc-icons-analysis-viewshed"}),_h=Object.assign({},lc,{pointOpts:Object.assign({},ec,{show:!1}),polylineOpts:Object.assign({},ic,{width:15}),primitiveOpts:Object.assign({},Kl,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},oc),removeAll:Object.assign({},oc,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),Eh=Object.assign({},Jl,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Ph=["sightline","viewshed"],Th=l(s({},gc),{analyses:{type:Array,default:()=>Ph,validator:e=>{let t=!0;return e.forEach((e=>{Ph.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Eh},sightlineActionOpts:{type:Object,default:()=>Oh},sightlineAnalysisOpts:{type:Object,default:()=>xh},viewshedActionOpts:{type:Object,default:()=>Sh},viewshedAnalysisOpts:{type:Object,default:()=>_h}}),Mh=he(Th);var Ih=F({name:"VcAnalysisSightline",props:l(s({},hc),{polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}}),emits:Es,setup:(e,t)=>"segment"===e.sightlineType||"circle"===e.sightlineType?mp(e,t,"VcAnalysisSightline"):"polyline"===e.sightlineType?hp(e,t,"VcAnalysisSightline"):void 0}),jh=F({name:"VcAnalysisViewshed",props:l(s({},hc),{polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object}),emits:Es,setup:(e,t)=>mp(e,t,"VcAnalysisViewshed")});var Lh=F({name:"VcAnalyses",props:Th,emits:l(s({},Es),{fabUpdated:e=>!0}),setup(e,t){var i;const n=O();n.cesiumClass="VcAnalyses";const{t:o}=eo(),a={},r=k(Object.assign({},Mh.clearActionOpts,e.clearActionOpts)),s=k(Object.assign({},Mh.mainFabOpts,e.mainFabOpts)),l=k(Object.assign({},Mh.sightlineActionOpts,e.sightlineActionOpts)),c=k(Object.assign({},Mh.sightlineAnalysisOpts,e.sightlineAnalysisOpts)),u=k(Object.assign({},Mh.viewshedActionOpts,e.viewshedActionOpts)),d=k(Object.assign({},Mh.viewshedAnalysisOpts,e.viewshedAnalysisOpts));a.sightlineActionOpts=l,a.sightlineAnalysisOpts=c,a.viewshedActionOpts=u,a.viewshedAnalysisOpts=d,a.clearActionOpts=r;const p=f((()=>e.analyses.map((e=>({name:e,type:"analysis",actionStyle:{background:a[`${ie(e)}ActionOpts`].color,color:a[`${ie(e)}ActionOpts`].textColor},actionClass:`vc-analysis-${e} vc-analysis-button`,actionRef:h(null),actionOpts:a[`${ie(e)}ActionOpts`],cmp:m(e),cmpRef:h(null),cmpOpts:a[`${ie(e)}AnalysisOpts`],tip:a[`${ie(e)}ActionOpts`].tooltip.tip||o(`vc.analysis.${ie(e)}.tip`),isActive:!1})))));function m(e){switch(e){case"sightline":return Ih;case"viewshed":return jh;default:return}}return null==(i=_p(e,t,n,p,s,r,"analysis"))?void 0:i.renderContent}});[wh,Lh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));var Ah=((e=[])=>({version:"3.0.13",install:(t,i)=>{if(t[we])return;t[we]=!0,e.forEach((e=>{t.use(e,i)}));const n=Object.assign({cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},i);be(n,t)}}))([...[Ms,zl,Fl,Hl,Ul,Wl,Gl,$l,Zl,Yl,ql,Xl,Ql,Pp,Gp,Gc,Km,ev,tv,iv,nv,ov,av,rv,sv,lv,cv,uv,dv,pv,mv,vv,hv,gv,fv,yv,bv,Cv,wv,Ev,Pv,Tv,Mv,Uc,Zv,Yv,qv,Xv,Qv,Jv,Kv,eh,th,ih,nh,oh,ah,rh,sh,lh,ch,iu,nu,ou,au,ru,su,lu,Uu,Wu,Gu,$u,Zu,Yu,qu,Xu,Qu,Ju,Ku,ed,id,Rd,kd,Bd,Nd,Vd,zd,Fd,Hd,Ud,Wd,Gd,$d,Zd,Yd,qd,Xd,Qd,Jd,Kd,ep,tp,ip,np,op,ap,rp,sp,lp,cp,up,dp,Eu,Pu,Mu,Iu,Tu,vh,hh,gh,es,ts,vs,hs,gs,is,ns,os,as,rs,ss,ls,cs,us,ds,ps,ms,fs,ys,yh,wh,Lh]]),Dh={name:"en-us",nativeName:"English (US)",vc:{loadError:"needs to be child of VcViewer",navigation:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view.",innerTip:"Drag inner gyroscope: free orbit. TIP: You can also free orbit by holding the CTRL key and dragging the map.",title:"Click and drag to rotate the camera."},zoomCotrol:{zoomInTip:"Zoom in",zoomResetTip:"Reset zoom",zoomOutTip:"Zoom out"},print:{printTip:"Viewer screenshot/print",printViewTitle:"VueCesium Print View",credit:"Map Credits",screenshot:"Screenshot"},myLocation:{myLocationTip:"Centre map at your current location",positioning:"Positioning...",fail:"Positioning failed",centreMap:"My Location",lat:"Lat",lng:"Lng",address:"Address"},statusBar:{lat:"Lat",lng:"Lng",zone:"ZONE",e:"E",n:"N",elev:"Elev",level:"Level",heading:"H",pitch:"P",roll:"R",cameraHeight:"CameraH",tip:"Click to switch the mouse display coordinates to UTM projection coordinates"}},navigationSm:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view."},zoomCotrol:{zoomInTip:"Zoom in",zoomBarTip:"Drag the bar up to zoom in, and down to zoom out.",zoomOutTip:"Zoom out"}},measurement:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},distance:{tip:"Distance",drawingTipStart:"Click the left button to draw the starting point of the distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},"component-distance":{tip:"Component Distance",drawingTipStart:"Click the left mouse button to draw the starting point of component distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the component distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Polyline Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},horizontal:{tip:"Horizontal Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},vertical:{tip:"Vertical Distance",drawingTipStart:"Click the left button to draw the starting point of the vertical distance measurement.",drawingTipEnd:"Click the left button to draw the end point of the vertical distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},height:{tip:"Height ",drawingTipStart:"Click the left button to draw the height measurement point.",drawingTipEnd:"Click the left button to draw the height measurement point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},area:{tip:"Area",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Point Coordinate",drawingTipStart:"Click the left button to draw the point coordinate measurement.",drawingTipEnd:"Click the left button to draw the point coordinate measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification.",lng:"lng:",lat:"lat:",height:"height:",slope:"slope:"},rectangle:{tip:"Rectangle",drawingTipStart:"Click the left button to draw the rectangle measurement.",drawingTipEnd:"Click the left button to draw the rectangle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Regular",drawingTipStart:"Click the left button to draw the regular measurement.",drawingTipEnd:"Click the left button to draw the regular measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Circle",drawingTipStart:"Click the left button to draw the circle measurement.",drawingTipEnd:"Click the left button to draw the circle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear measurement results"}},drawing:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},pin:{tip:"Drawing pin",drawingTipStart:"Click the left button to draw a pin.",drawingTipEnd:"Click the left button to draw a pin.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Drawing point",drawingTipStart:"Click the left button to draw a point.",drawingTipEnd:"Click the left button to draw a point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Drawing polyline",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polygon:{tip:"Drawing polygon",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},rectangle:{tip:"Drawing rectangle",drawingTipStart:"Click the left button to draw the starting point of the rectangle.",drawingTipEnd:"Click the left button to draw the end point of the rectangle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Drawing circle",drawingTipStart:"Click the left button to draw the starting point of the circle.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Drawing regular",drawingTipStart:"Click the left button to draw the starting point of the regular.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear drawing results"}},analysis:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},sightline:{tip:"Sightline",drawingTipStart:"Click the left button to draw the view point of the sightline analysis.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the sightline analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},viewshed:{tip:"Viewshed",drawingTipStart:"Click the left button to draw the view point of the viewshed analysis.",drawingTipEnd:"Click the left button to draw the end point of the viewshed analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear analysis results"}},overview:{show:"Show",hidden:"Hidden"}}};export{bh as V,xr as a,Qn as d,Dh as e,Ue as f,Ea as h,Ah as i,Go as u};
