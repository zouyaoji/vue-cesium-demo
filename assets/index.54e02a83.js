import{bV as e,cc as t,cd as o,bN as a,ce as r,cf as s,cg as n,ch as i,bt as l,ci as c,cj as d,ck as u,cl as m,cm as p,cn as h,co as g,cp as f,cq as v,cr as y,cs as b,ct as C,cu as k,cv as w,cw as _,bq as x,bs as S,bu as L,cx as O,cy as T,cz as D,cA as V,cB as P,cC as I,c3 as R,bC as B,cD as q,cE as M,bS as E,cF as j,bU as N,cG as A,bz as z,cH as F,bp as $,cI as H,bD as U,bE as G,cJ as Q,cK as W,cL as J,cM as Y,cN as K,cO as Z,cP as X,cQ as ee,cb as te,cR as oe,cS as ae,cT as re,bx as se,bv as ne,bw as ie,bB as le,bZ as ce,cU as de,cV as ue,cW as me,cX as pe,cY as he,br as ge}from"./vendor.f61f0903.js";import{P as fe,N as ve,Q as ye,u as be,o as Ce,D as ke,a as we,q as _e}from"./vendor-quasar.4f7a2ca8.js";import{m as xe,u as Se,f as Le,a as Oe,h as Te,g as De,V as Ve,b as Pe,c as Ie,d as Re,e as Be,i as qe,j as Me,k as Ee,l as je,n as Ne,o as Ae,p as ze,q as Fe,r as $e}from"./vendor-vue-cesium.c3e39523.js";import"./vendor-echarts.9feaf242.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function He(e="default",t=""){fe.set(`VueCesiumDemo-0.0.0-${e}`,t)}function Ue(e="default"){return fe.getItem(`VueCesiumDemo-0.0.0-${e}`)}function Ge(e="default"){fe.remove(`VueCesiumDemo-0.0.0-${e}`)}const Qe={},We=function(e,t,o){return t&&0!==t.length?Promise.all(t.map((e=>{if(e=function(e,t){return new URL(e,t).href}(e,o),e in Qe)return;Qe[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,o)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},Je=[{path:"/",name:"layout",component:()=>We((()=>Promise.resolve().then((()=>Va))),void 0,import.meta.url),redirect:{path:"index"},children:[{name:"login",path:"/login",component:()=>We((()=>Promise.resolve().then((()=>Io))),void 0,import.meta.url)}]}],Ye=[{path:"/:catchAll(.*)*",name:"404",component:()=>We((()=>Promise.resolve().then((()=>xo))),void 0,import.meta.url)}],Ke=Je,Ze=[...Je,...Ye];const Xe=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);ar.system.useLogStore(or).push({message:"业务逻辑警告",type:"warning",meta:{error:r}}),ve.create({message:a,timeout:3e3,type:"warning"})})("[VueCesiumDemo] WARN "),et=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);ar.system.useLogStore(or).push({message:"业务逻辑异常",type:"danger",meta:{error:r}}),ve.create({message:a,timeout:3e3,type:"negative"})})("[VueCesiumDemo] ERR "),tt=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o])})("[VueCesiumDemo] Debug ");function ot(e,t,o){return nt(e,t.geometry.coordinates,o,t)}function at(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(nt(e,r[s],o,t));return a}function rt(e,t,o){return it(e,t.geometry.coordinates,o,t)}function st(e,r,s,n){var i,l;const c=t(n.properties,"checked");n.properties.actualRenderingType=s;const d={position:r,show:c,feature:o.exports.cloneDeep(n)},u=null==(i=n.properties)?void 0:i.props,m=u&&a(u)?u:u?JSON.parse(u):{},p=Object.assign({},e[s],m[s]);if(d[s]={...p},"model"===s){const e=JSON.parse((null==(l=n.properties)?void 0:l.hpr)||"{}");if(Array.isArray(e)){const t=xe(r),o=new Cesium.HeadingPitchRoll(...e);d.orientation=Cesium.Transforms.headingPitchRollQuaternion(t,o)}}return d}function nt(e,a,i,l){var c,d,u,m,p,h,g,f;const v=t(l.properties,"checked");if(l.properties.actualRenderingType=i,"polygon"===i){return rt(e,r(l),i)}if("billboard"===i||"point"===i||"label"===i){const t={show:v,position:("MultiPolygon"===l.geometry.type?s(l):n(l)).geometry.coordinates,feature:o.exports.cloneDeep(l)};switch(i){case"billboard":{const o=Object.assign({},e.billboard,null==(d=null==(c=l.properties)?void 0:c.props)?void 0:d.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(m=null==(u=l.properties)?void 0:u.props)?void 0:m.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(h=null==(p=l.properties)?void 0:p.props)?void 0:h.label);t.label={text:l.properties.text||l.properties.name,...o}}}return t}return{show:v,polyline:{positions:a,...Object.assign({},e.polyline,null==(f=null==(g=l.properties)?void 0:g.props)?void 0:f.polyline)},feature:o.exports.cloneDeep(l)}}function it(e,a,r,l){var c,d,u,m,p,h,g,f;const v=t(l.properties,"checked");if(l.properties.actualRenderingType=r,"polyline"===r){if("MultiPolygon"===l.geometry.type){const t=i(l),o=[];return t.features.forEach((t=>{"LineString"===t.geometry.type?o.push(ot(e,t,r)):o.push(...at(e,t,r))})),o}if("Polygon"===l.geometry.type){const t=i(l);return ot(e,t,r)}}else{if("polygon"===r){const t=[];for(let e=1;e<a.length;e++)t.push({positions:a[e]});const r=Object.assign({},e.polygon,null==(d=null==(c=l.properties)?void 0:c.props)?void 0:d.polygon);return{show:v,polygon:{hierarchy:{positions:a[0],holes:t},height:0,...r},feature:o.exports.cloneDeep(l)}}if("billboard"===r||"point"===r||"label"===r){const t={show:v,position:("MultiPolygon"===l.geometry.type?s(l):n(l)).geometry.coordinates,feature:o.exports.cloneDeep(l)};switch(r){case"billboard":{const o=Object.assign({},e.billboard,null==(m=null==(u=l.properties)?void 0:u.props)?void 0:m.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(h=null==(p=l.properties)?void 0:p.props)?void 0:h.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(f=null==(g=l.properties)?void 0:g.props)?void 0:f.label);t.label={text:l.properties.text||l.properties.name,...o}}}return t}}}const lt={LineString:ot,MultiLineString:at,MultiPoint:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(st(e,r[s],o,t));return a},MultiPolygon:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++){const n=it(e,r[s],o,t),i=Array.isArray(n)?n:[n];a.push(...i)}return a},Point:function(e,t,o){return st(e,t.geometry.coordinates,o,t)},Polygon:rt};function ct(e){ar.viewer.useRenderStore(or).addRenderDatas(e)}function dt(e){ar.viewer.useRenderStore(or).removeRenderDataByPage(e)}function ut(e){return ar.viewer.useRenderStore(or).getRenderDataByDatasetId(e)}function mt(e){ar.viewer.useRenderStore(or).setSelectedRenderData(e)}function pt(){var e;const t=ar.viewer.useRenderStore(or).selectedRenderData;t.model&&(null==(e=null==t?void 0:t.restoreHandler)||e.call(t)),mt({model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]})}function ht(e,t,a,r=[],s){var n;pt();const i=function(e,t,a,r){const s=ut(t);if(!s)return;let n,i;switch(e){case"label":case"point":case"billboard":case"model":n="primitive"===r?"VcCollectionBillboard":"VcDatasourceCustom",i="primitive"===r?"billboards":"entities";break;case"polyline":n="primitive"===r?"VcCollectionPolyline":"VcDatasourceCustom",i="primitive"===r?"polylines":"entities";break;case"polygon":n="primitive"===r?"VcCollectionPrimitive":"VcDatasourceCustom",i="primitive"===r?"polygons":"entities";break;case"geojson":n="VcDatasourceGeojson",i="data";break;case"tileset":n="VcPrimitiveTileset"}const l=o.exports.find(s.datasets,(e=>e.cmpName===n));if("geojson"===e)return l;return o.exports.find(l.props[i],(t=>t.feature.properties.id===a&&t.feature.properties.actualRenderingType===e))}(e,t,a);if(!i)return!1;if("point"===e){const t="primitive"===s?i:i.point,o=t.pixelSize||1,a=t.color||[255,255,255,0];t.pixelSize=1.5*o,mt({model:t,renderingType:e,restoreHandler:()=>{t.pixelSize=o,t.color=a},feature:i.feature,featureInfoListItems:r})}else if("billboard"===e){const t="primitive"===s?i:i.billboard,o=t.scale||1;t.scale=1.5*o,mt({model:t,renderingType:e,restoreHandler:()=>{t.scale=o},feature:i.feature,featureInfoListItems:r})}else if("polyline"===e){const e="primitive"===s?i:i.polyline,t=e.material||"white",o=e.width||1;e.width=1.5*o,e.material="#ffc107",mt({model:e,renderingType:"polyline",restoreHandler:()=>{e.width=o,e.material=t},feature:i.feature,featureInfoListItems:r})}else if("polygon"===e)if("primitive"===s){const e=i,t=e.color||"white";e.color="#ffc107",mt({model:e,renderingType:"polygon",restoreHandler:()=>{e.color=t},feature:i.feature,featureInfoListItems:r})}else{const e=i.polygon,t=e.material||"white";"observationElementPattern"===(null==(n=i.feature.properties)?void 0:n.datasetId)&&(e.extrudedHeight=1e3),e.material="#ffc107",mt({model:e,renderingType:"polygon",restoreHandler:()=>{e.material=t,e.extrudedHeight=void 0},feature:i.feature,featureInfoListItems:r})}else"geojson"===e&&i.polygon}function gt(e,t){var o;const a=[];if(!Cesium.defined(e.geometry))return Xe("feature.geometry is required.","要素：",e),"添加渲染模型失败，原因：该要素没有 geometry 属性";const r=e.geometry.type,s=e.properties,n=null==(o=null==s?void 0:s.renderingType)?void 0:o.trim().split(",");if(!n||!n.length)return Xe("添加渲染模型失败，原因：未知的显示类型。","要素：",e),"添加渲染模型失败，原因：未知的显示类型。";const i=lt[r];return Cesium.defined(i)?(n.forEach((o=>{const r=i(t,e,o),s=Array.isArray(r)?r:[r];a.push(...s)})),a):(Xe(`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`,"要素：",e),`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`)}function ft(e,t){return t().then((t=>{var o,a,r;if(0!==t.code)return et(`添加渲染数据集失败，原因：数据请求失败。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(!t.data)return et(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(null==(o=t.data)?void 0:o.type){switch(null==(a=t.data)?void 0:a.type){case"Feature":e.children=[t.data];break;case"FeatureCollection":e.children=t.data.features,e.children.forEach((t=>{Cesium.defined(t.properties.renderingType)||(t.properties.renderingType=e.renderingType||"billboard"),Cesium.defined(t.properties.id)||(t.properties.id=Cesium.createGuid()),Cesium.defined(t.properties.checked)||(t.properties.checked=!1)}));break;default:return et(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,void(e.checked=!1)}}else"heatmap"===e.renderingType&&(e.children=[t.data]);return!!(null==(r=e.children)?void 0:r.length)||(et(`添加渲染数据集失败，原因：请求数据成功，但结果为空。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1)})).catch((t=>(et("添加渲染数据集失败，原因：数据请求异常。",t),e.loading=!1,e.checked=!1,!1)))}const vt=(e,r,s)=>{var n,i;e.cesiumObjects=e.cesiumObjects||[];const c={id:e.id,name:e.name,page:r,type:s,datasets:[]};let d=[];if("tileset"===e.renderingType){for(let o=0;o<e.children.length;o++){const r=e.children[o];r.properties.datasetId=e.id;const s=e.props&&a(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{},l=Object.assign({},s[e.renderingType],null==(i=null==(n=r.properties)?void 0:n.props)?void 0:i[e.renderingType]);r.properties.actualRenderingType=e.renderingType,c.datasets.push({cmpName:"VcPrimitiveTileset",props:{...l,show:t(r.properties,"checked"),maximumMemoryUsage:128,maximumScreenSpaceError:64,onReady:()=>{e.loading=!1}}})}ct(c)}else{for(let t=0;t<e.children.length;t++){const r=e.children[t];r.properties.datasetId=e.id;const s=gt(r,e.props&&a(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{});if("string"==typeof s)continue;const n=o.exports.intersectionWith(s,d,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type));d.push(...s),n.length&&(n.forEach((e=>{Xe(`已添加相同id和类型的渲染数据集，可能有重复数据，请核实。对象 id: ${e.feature.properties.id}，对象类型: ${e.feature.geometry.type}`,"数据模型：",e)})),d=o.exports.uniqWith(d,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type)))}d.length&&c.datasets.push({cmpName:"VcDatasourceCustom",props:{entities:d,onReady:({cesiumObject:t})=>{const a=`VcDatasourceCustom_${e.id}`;t.datasetId=a;!o.exports.find(e.cesiumObjects,(e=>e.datasetId===a))&&e.cesiumObjects.push(l(t)),e.loading=!1}}}),ct(c)}return!0};function yt(e){return e.map((e=>({...e,path:e.path||o.exports.uniqueId("vc-menu-empty-"),...e.children?{children:yt(e.children)}:{}})))}function bt(e={},t="",o=0){return[200,{code:o,msg:t,data:e}]}function Ct(e){ar.system.useLogStore(or).push({message:"数据请求异常",type:"danger",meta:{error:e}}),ve.create({message:e.message,type:"negative",timeout:3e3})}function kt(e){const t=new Error(e);throw Ct(t),t}const wt=Object.freeze(Object.defineProperty({__proto__:null,parse:function(e="{}",t={}){let o=t;try{o=JSON.parse(e)}catch(a){et(a)}return o},response:bt,responseSuccess:function(e={},t="成功"){return bt(e,t)},responseError:function(e={},t="请求失败",o=500){return bt(e,t,o)},errorLog:Ct,errorCreate:kt},Symbol.toStringTag,{value:"Module"})),_t=()=>{const e=d.create({});return e.interceptors.request.use((e=>e),(e=>(Ct(e),Promise.reject(e)))),e.interceptors.response.use((e=>{const t=e.data,{code:o}=t;if(void 0===o)return t;switch(o){case 0:case 200:return t;case"xxx":kt(`[ code: xxx ] ${t.msg}: ${e.config.url}`);break;default:return kt(`${t.msg}: ${e.config.url}`),Promise.reject(t)}}),(e=>{switch(o.exports.get(e,"response.status")){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",Ge("token"),Ge("uuid"),Nt.push("/login");break;case 403:e.message="拒绝访问";break;case 404:e.message=`请求地址出错: ${e.response.config.url}`;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return Ct(e),Promise.reject(e)})),e};function xt(e){return function(t){const a=Ue("token"),r={headers:{Authorization:a,"Content-Type":o.exports.get(t,"headers.Content-Type","application/json")},timeout:2e4,baseURL:e.baseURL||"/",data:{}};return a&&(r.headers.Authorization="Bearer "+a),e(Object.assign(r,t))}}const St=_t(),Lt=xt(St),Ot=_t(),Tt=xt(Ot),Dt=new c.exports(Ot),Vt=[{username:"admin",password:"admin",id:"admin-uuid",name:"Admin"},{username:"editor",password:"editor",id:"editor-uuid",name:"Editor"}],Pt=[{id:u.datatype.uuid(),component:"MainLayout",icon:"cog",islock:!1,hidden:!1,name:"layout",path:"/",permission:"",sort:1e3,title:"VueCesiumDemo",type:10,children:[{id:u.datatype.uuid(),component:"/index",icon:"cog",islock:!1,hidden:!1,name:"index",path:"/index",permission:"permission-index",sort:1e3,caption:"首页",title:"message.header.index",type:10,children:[{id:u.datatype.uuid(),component:"",icon:"eye",islock:!1,hidden:!1,name:"left-panel",path:"",permission:"permission-left-panel-view",sort:100101,title:"查看左侧面板",type:20}]},{id:u.datatype.uuid(),component:"/dynamic-render",icon:"cog",islock:!1,hidden:!1,name:"dynamic-render",path:"/dynamic-render",permission:"permission-dynamic-render",sort:1e3,caption:"动态渲染",title:"message.header.dynamicRender",type:10,redirect:"/dynamic-render/datasource",children:[{id:u.datatype.uuid(),component:"/dynamic-render/datasource",icon:"dataset",islock:!1,hidden:!1,name:"datasource",path:"/dynamic-render/datasource",permission:"permission-datasource",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.datasource",type:10},{id:u.datatype.uuid(),component:"/dynamic-render/historical-track",icon:"inbox",islock:!1,hidden:!1,name:"historical-track",path:"/dynamic-render/historical-track",permission:"permission-historical-track",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.historicalTrack",type:10}]}]}],It=[{id:u.datatype.uuid(),name:"DataSource",label:"数据源",icon:"",children:[{id:"555",name:"机场",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/机场.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"billboard",props:{billboard:{image:"/images/飞机场.svg",color:"#ffc10",scale:.25,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e7]}}},{id:"666",name:"水系",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/水系.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polyline",props:{polyline:{width:1}}},{id:"777",name:"岛屿",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/岛屿.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polygon,polyline,billboard",props:{billboard:{image:"/images/岛屿.svg",scale:.2,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e6]},polygon:{width:2,material:"rgba(137,207,240,0.5)"},polyline:{width:4,material:"#0033ff"}}},{id:"888",name:"Tileset 模型",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/Tileset模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"tileset",props:{tileset:{}}},{id:"999",name:"GLTF 模型",icon:"",checked:!1,expanded:!1,fetchStr:"/datas/work-bench/GLTF模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"model",props:{model:{scale:1}}}]}],Rt={service:St,request:Lt,serviceForMock:Ot,requestForMock:Tt,mock:Dt,faker:m,tools:wt},Bt=(({service:e,request:t,serviceForMock:a,requestForMock:r,mock:s,faker:n,tools:i})=>({login:(e={})=>(s.onAny("/auth/login").reply((e=>{const t=i.parse(e.data),a=o.exports.find(Vt,{username:t.username,password:t.password});return a?i.responseSuccess(o.exports.assign({},a,{token:"f5befe1a-962c-4cdd-bf45-77ce306dbbce"})):i.responseError({},"账号或密码不正确")})),r({url:"/auth/login",method:"post",data:e})),getUserInfo:()=>(s.onAny("/user/info").reply((e=>{const t=Ue("uuid"),a=o.exports.find(Vt,{id:t});return a?i.responseSuccess(o.exports.assign({},a)):(Ge("token"),Ge("uuid"),Nt.push("/login"),i.responseError({},"未授权, 请登录!"))})),r({url:"/user/info",method:"post"})),getAccessibleMenus:(e={})=>(s.onAny("/api/menu/accessible").reply((e=>i.responseSuccess(Pt))),r({url:"/api/menu/accessible",method:"post",data:e}))}))(Rt),qt=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,faker:s,tools:n})=>({getStaticData:(e,o)=>t({baseURL:o=o||"./",url:e,method:"get"}).then((e=>({code:0,data:e,msg:"success"}))),inverseGeocode:e=>t({baseURL:"./",url:"/reverse_geocoding/v3",method:"get",params:e}),getLocationList:e=>t({baseURL:"./",url:"/v3/place/text",method:"get",params:e})}))(Rt),Mt=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,faker:s,tools:n})=>({getTreeData:()=>(r.onAny("/dynamic-render/datasource/datatree").reply((e=>n.responseSuccess(It))),a({url:"/dynamic-render/datasource/datatree",method:"post"})),inverseGeocode:e=>t({baseURL:"./",url:"/reverse_geocoding/v3",method:"get",params:e})}))(Rt),Et={"zh-CN":{message:{header:{index:"首页",dynamicRender:"动态渲染"},sideBar:{dynamicRender:{datasource:"数据源",historicalTrack:"历史轨迹"}},panel:{layerManager:"图层管理"},baseLayer:"底图图层",overlayLayer:"叠加图层",vectorLayer:"矢量图层"}},"en-US":{message:{header:{index:"Index",dynamicRender:"DynamicRender"},sideBar:{dynamicRender:{datasource:"Datasource",historicalTrack:"HistoricalTrack"}},panel:{layerManager:"LayerManager"},baseLayer:"BaseLayer",overlayLayer:"OverlayLayer",vectorLayer:"VectorLayer"}}},jt=p({legacy:!1,locale:Ue("locale"),fallbackLocale:"zh-CN",globalInjection:!0,messages:Et}),Nt=h({scrollBehavior:()=>({left:0,top:0}),routes:Ze,history:({VITE_VUE_APP_TITLE:"VueCesium Demo",VITE_VUE_ROUTER_MODE:"history",VITE_VUE_ROUTER_BASE:"/",VITE_VUE_APP_API:"/",VITE_MOCK_ENABLED:"true",VITE_VUE_APP_PREFIX:"VueCesiumDemo",VITE_VUE_APP_AMAP_KEY:"488103685805d2ceb629aba785aa3760",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.SERVER?f:v)("/vue-cesium-demo")}),At=["/login","/404"];Nt.beforeEach((async(e,t,o)=>{g.start(),ar.system.useSearchStore(or).set(!1);const a=Ue("token");if("/login"!==e.path&&Bt.getUserInfo(),a)try{if(!ar.system.usePermissionStore(or).inited){const t=[...(await Bt.getAccessibleMenus()).data];return await ar.system.usePermissionStore(or).generateRoutes({menuTree:t}),void o(e.path)}"/login"===e.path?o({path:"/index"}):o()}catch(r){-1!==At.indexOf(e.path)?o():o("/login")}else-1!==At.indexOf(e.path)?o():o("/login")})),Nt.afterEach((e=>{var t;g.done(),t=jt.global.t(e.meta.title),window.document.title="VueCesium Demo"+(t?` | ${t}`:"")}));const zt=b(new y("VueCesiumDemo-0.0.0"));function Ft({dbName:e="database",path:t="",user:o=!0,validator:a=(e=>!0),defaultValue:r=""}){const s=Ue("uuid")||"ghost-uuid",n=`${e}.${o?`user.${s}`:"public"}${t?`.${t}`:""}`,i=zt.get(n).value();return void 0!==i&&a(i)||zt.set(n,r).write(),n}function $t({dbName:e="database",path:t="",user:o=!1,validator:a=(()=>!0),defaultValue:r=""}={}){return zt.get(Ft({dbName:e,path:t,user:o,validator:a,defaultValue:r}))}zt.defaults({sys:{},database:{}}).write();const Ht=C("db",{state:()=>({}),getters:{},actions:{set({dbName:e="database",path:t="",value:o="",user:a=!1}){!function({dbName:e="database",path:t="",value:o="",user:a=!1}){zt.set(Ft({dbName:e,path:t,user:a}),o).write()}({dbName:e,path:t,value:o,user:a})},get:({dbName:e="database",path:t="",defaultValue:a="",user:r=!1})=>function({dbName:e="database",path:t="",defaultValue:a="",user:r=!1}){return o.exports.cloneDeep(zt.get(Ft({dbName:e,path:t,user:r,defaultValue:a})).value())}({dbName:e,path:t,defaultValue:a,user:r}),database:({user:e=!1}={})=>$t({user:e,defaultValue:""}),databaseClear:({user:e=!1}={})=>$t({user:e,validator:()=>!0,defaultValue:""})}}),Ut=C("user",{state:()=>({info:{}}),getters:{},actions:{async set(e){this.info=e;Ht().set({dbName:"sys",path:"user.info",value:e,user:!0})},async load(){const e=Ht().get({dbName:"sys",path:"user.info",defaultValue:"",user:!0});this.set(e)}}}),Gt=(e,t)=>{const o=e.__vccOpts||e;for(const[a,r]of t)o[a]=r;return o};const Qt=Gt({},[["render",function(e,t){const o=w("router-view");return _(),k(o)}]]),Wt=Object.freeze(Object.defineProperty({__proto__:null,default:Qt},Symbol.toStringTag,{value:"Module"}));function Jt(){const e=Se(),{toggleGlobalLayout:t,toggleDynamicRenderPageLayout:o}=ar.system.useLayoutStore(),a=x({selectedId:"",datasourceCategories:[],loading:!1,hasLoadingError:!1,filterText:""}),r=ar.system.useLayoutStore().dynamicRender,s=S((()=>{let e=[];try{null==a||a.datasourceCategories.forEach((t=>{if(t.id===a.selectedId)throw e=t.children,new Error("endForEach")}))}catch(t){if("endForEach"!==t.message)throw t}return e}));return{workBenchModel:a,dynamicRenderLayout:r,selectedDatasetCategories:s,init:()=>{a.loading=!0,(async()=>(a.hasLoadingError=!1,Mt.getTreeData().then((e=>{if(e.code)return;const t=e.data;return a.selectedId=t[0].id,a.datasourceCategories=t,!0})).catch((e=>{a.hasLoadingError=!0}))))().then((()=>{a.loading=!1,t({navigation:!0}),o({datasource:{workBench:!0}})}))},addOrRemoveDataset:async(e,t,o,a)=>{if(e){if(await ut(t.id))t.children.forEach((e=>{e.properties&&(e.properties.checked=!0)}));else{if(407==t.id)return;if(t.renderingType){const e=()=>qt.getStaticData(t.fetchStr);await function(e,t,o,a){var r;if(e.loading=!0,null==(r=e.children)?void 0:r.length)return Promise.resolve(vt(e,o,a));try{return ft(e,t).then((t=>{if(t)return vt(e,o,a)}))}catch(s){return et(`添加渲染数据集失败，原因：数据请求发生错误。数据集id: ${e.id}，数据集名称: ${e.name}`,"数据模型：",e),e.loading=!1,void(e.checked=!1)}}(t,e,"/dynamic-render/datasource"),t.children.forEach((e=>{a?e.properties&&(e.properties.checked=e===a):e.properties&&(e.properties.checked=!0)}))}else et("添加渲染数据集失败，原因：未知的显示类型。","数据模型：",t),t.checked=!1,t.loading=!1}}else r=t.id,ar.viewer.useRenderStore(or).removeRenderDataById(r),t.cesiumObjects=[],t.loading=!1,t.children.forEach((e=>{e.properties&&(e.properties.checked=!1)}));var r},showFeatureInfo:(e,t,o)=>{e.hasDetail&&tt("属性展示逻辑待完善")},flyToFeature:(t,o,a)=>{!async function(e,t,o={isHighlightRenderData:!0,showBillboardOverlayMenu:!0,duration:1.5}){var a,r,s,n;const i=null==(a=null==t?void 0:t.properties)?void 0:a.actualRenderingType;if(!i)return void et("定位到要素失败，原因：未知的显示类型。","要素模型：",t);const l=t.properties.datasetId,c=await ut(l);if(!c)return void et("定位到要素失败，原因：未找到该要素所在的渲染数据。","要素模型：",t);const d=t.properties.id;o.isHighlightRenderData&&ht(i,l,d);const{toggleGlobalLayout:u}=ar.system.useLayoutStore(or);switch(i){case"billboard":case"point":case"label":case"polyline":case"polygon":case"model":if(u({featureInfo:!1}),null==(r=null==c?void 0:c.datasets)?void 0:r.length){const t=(null==(s=c.datasets[0].cmpRef)?void 0:s.cesiumObject).entities.values.filter((e=>e.feature.properties.id===d))[0];e.flyTo(t,{...o}).then((()=>{}))}break;case"tileset":if(u({featureInfo:!1}),null==(n=null==c?void 0:c.datasets)?void 0:n.length){const a=c.datasets.filter((e=>e.props.url===t.properties.props.tileset.url))[0].cmpRef.cesiumObject;e.flyTo(a,{...o}).then((()=>{}))}}}(e.viewer,o)},showOrHideDatasetList:(e,t)=>{if(e&&t.renderingType&&0===t.children.length){const e=()=>qt.getStaticData(t.fetchStr);t.loading=!0,ft(t,e).then((()=>{t.loading=!1}))}},toggleDynamicRenderPageLayout:o}}const Yt={class:"loading-ios flex column justify-center items-center z-top"},Kt={key:2},Zt={key:0,class:"q-pt-md"},Xt=L({__name:"Ios",props:{size:{type:String,default:"3em"},dense:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMsg:{type:String,default:""},errorTip:{type:String,default:"数据加载失败，点我重试"},tipText:{type:String,default:"加载中..."}},emits:["retry"],setup(e,{emit:t}){const o=()=>{t("retry")};return(t,a)=>{const r=w("q-spinner-ios"),s=w("q-tooltip"),n=w("q-btn"),i=w("q-chip");return _(),O("div",Yt,[e.hasError?(_(),k(n,{key:1,icon:"error",size:e.size,color:"red",round:"",flat:"",dense:""},{default:T((()=>[D(s,null,{default:T((()=>[V("加载失败，原因："+P(e.errorMsg),1)])),_:1})])),_:1},8,["size"])):(_(),k(r,{key:0,size:e.size},null,8,["size"])),e.dense?R("",!0):(_(),O("div",Kt,[e.hasError?(_(),k(i,{key:1,clickable:"",color:"red","text-color":"white",icon:"error",onClick:o},{default:T((()=>[V(P(e.errorTip),1)])),_:1})):(_(),O("div",Zt,[I("span",null,P(e.tipText),1)]))]))])}}}),eo=Gt(L({__name:"Index",props:{nodes:{type:Array,default:()=>[]},filter:String},emits:{addOrRemoveDataset:(e,t,o,a)=>!0,flyToFeature:(e,t,o)=>!0,showFeatureInfo:(e,t,o)=>!0,showOrHideDatasetList:(e,t)=>!0},setup(e,{emit:t}){const o=e,a=S((()=>(e,t)=>{const o=t.toLowerCase();return(e.name||e.properties.name).toLowerCase().indexOf(o)>-1})),r=S((()=>{const e={},t=(r,s)=>{let n,i;if(N(r,"type")&&N(r,"properties")){n=r.properties.id,i=!1}else{const e=r;n=e.id,i=(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0}const l={key:n,parent:s,isParent:i,children:[],matchesFilter:!o.filter||a.value(r,o.filter)};if(e[n]=l,!0===i){const e=r;l.children=e.children.map((e=>t(e,l))),o.filter&&!0!==l.matchesFilter&&(l.matchesFilter=l.children.some((e=>e.matchesFilter)))}return l};return o.nodes.forEach((e=>t(e,null))),e}));B((()=>o.filter),(e=>{s(o.nodes,!0)}));const s=(e,t)=>(o.filter?e.filter((e=>r.value[e.id||e.properties.id].matchesFilter)):e).map((e=>((e,t)=>{const o=e.id||e.properties.id,a=!0===r.value[o].isParent?s(e.children):[];return t?e.children=e._children:(e._children=e.children,e.children=a),e})(e,t))),n=S((()=>s(o.nodes))),i=e=>{var t;return null==(t=null==e?void 0:e.children)?void 0:t.length};return(e,o)=>{const a=w("q-item-label"),r=w("q-item-section"),s=w("q-checkbox"),l=w("q-icon"),c=w("q-chip"),d=w("q-item"),u=w("index",!0),m=w("q-expansion-item"),p=w("q-list"),h=q("ripple");return _(),k(p,{dense:""},{default:T((()=>[(_(!0),O(j,null,M(E(n),((o,n)=>(_(),O(j,{key:n},[o.isGroup?(_(),k(a,{key:0,class:"group-caption",caption:"",header:""},{default:T((()=>[V(P(o.name),1)])),_:2},1024)):R("",!0),o.hasDetail?(_(),k(m,{key:1,modelValue:o.expanded,"onUpdate:modelValue":[e=>o.expanded=e,e=>((e,o)=>{t("showOrHideDatasetList",e,o)})(e,o)],"expand-icon":"arrow_circle_down","expand-separator":"",clickable:"",dark:""},{header:T((()=>[(_(!0),O(j,null,M(o.level>0?o.level-1:0,(e=>(_(),k(r,{key:e,side:""})))),128)),D(r,{side:""},{default:T((()=>[D(s,{modelValue:o.checked,"onUpdate:modelValue":[e=>o.checked=e,e=>((e,o,a,r)=>{t("addOrRemoveDataset",e,o,a,r)})(e,o)],dense:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),D(r,{side:""},{default:T((()=>[D(l,{size:"16px",class:A(`spd-icons ${o.iconHtV2}`),style:{color:"#00e472"}},null,8,["class"])])),_:2},1024),D(r,null,{default:T((()=>[D(a,null,{default:T((()=>[V(P(o.name),1)])),_:2},1024)])),_:2},1024),0!==i(o)?(_(),k(r,{key:0,side:""},{default:T((()=>[D(c,{dense:"",dark:""},{default:T((()=>[V(P(i(o))+" 条",1)])),_:2},1024)])),_:2},1024)):R("",!0),o.loading?(_(),k(r,{key:1,side:""},{default:T((()=>[D(Xt,{size:"1.5em",dense:""})])),_:1})):R("",!0)])),default:T((()=>[o.fetchStr?(_(!0),O(j,{key:0},M(o.children,((e,n)=>z((_(),k(d,{key:n,clickable:"","active-class":"text-amber-6",dense:""},{default:T((()=>[(_(!0),O(j,null,M(o.level>0?o.level:1,(e=>(_(),k(r,{key:e,side:""})))),128)),D(r,{side:""},{default:T((()=>[D(s,{modelValue:e.properties.checked,"onUpdate:modelValue":[t=>e.properties.checked=t,a=>((e,o,a,r)=>{e&&(o.checked||(o.checked=!0,t("addOrRemoveDataset",e,o,a,r)))})(a,o,n,e)],disable:o.loading||e.loading||""===o.renderingType},null,8,["modelValue","onUpdate:modelValue","disable"])])),_:2},1024),D(r,{onClick:a=>((e,o,a)=>{t("showFeatureInfo",e,o,a)})(o,e,n)},{default:T((()=>[D(a,null,{default:T((()=>[V(P(e.properties.name),1)])),_:2},1024)])),_:2},1032,["onClick"]),e.loading?(_(),k(r,{key:0,side:""},{default:T((()=>[D(Xt,{size:"1.5em",dense:""})])),_:1})):R("",!0),e.properties.checked?(_(),k(r,{key:1,side:"",onClick:F((a=>((e,o,a)=>{t("flyToFeature",e,o,a)})(o,e,n)),["prevent"])},{default:T((()=>[D(l,{size:"20px",class:"location-icon",name:"room"})])),_:2},1032,["onClick"])):R("",!0)])),_:2},1024)),[[h]]))),128)):R("",!0),o.children&&!o.canRenderDirectly?(_(),k(u,{key:1,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"])):R("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])):(_(),k(u,{key:2,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"]))],64)))),128))])),_:1})}}}),[["__scopeId","data-v-61d7c214"]]),to=Object.freeze(Object.defineProperty({__proto__:null,default:eo},Symbol.toStringTag,{value:"Module"}));const oo={class:"work-bench"},ao={class:"dataset-category"},ro={class:"dataset-category-header"},so={class:"q-ml-md q-mr-md"},no=V("回到顶部"),io=Gt(L({__name:"Index",setup(e){W((e=>({"03aff4fe":E(y).commonPanel.themeCommonPanelListBorderColor,"642a10d2":E(y).commonPanel.themeCommonPanelContentBackgroundColor})));const t=H(ar.system.useLayoutStore()).global,{contentStyle:o,contentActiveStyle:a,thumbStyle:r,scrollAreaRef:s,verticalPositionRef:n,setScrollPosition:i,onScrollHandler:l}=function(){const e=$(null),t=$(null);return{scrollAreaRef:e,verticalPositionRef:t,contentStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},contentActiveStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},thumbStyle:{right:"2px",borderRadius:"3px",backgroundColor:"#EBB107",width:"3px",opacity:.6},onScrollHandler:e=>{t.value=e.verticalPosition},setScrollPosition:(t,o,a)=>{e.value.setScrollPosition("vertical",0,300)}}}(),{workBenchModel:c,dynamicRenderLayout:d,selectedDatasetCategories:u,init:m,addOrRemoveDataset:p,showFeatureInfo:h,flyToFeature:g,showOrHideDatasetList:f,toggleDynamicRenderPageLayout:v}=Jt(),y=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));return U((()=>{m()})),G((()=>{dt("/dynamic-render/datasource")})),(e,r)=>{const m=w("q-btn"),y=w("q-icon"),b=w("q-input"),C=w("q-tooltip"),x=w("q-scroll-area");return _(),O("div",oo,[z(I("div",{class:A(["datasources-container",{"full-width-drawer":!E(t).leftDrawerMini}])},[I("div",ao,[I("div",ro,[D(m,{dense:"",flat:"",round:"",class:"close text-white",icon:"close",size:"sm",onClick:r[0]||(r[0]=e=>E(v)({datasource:{workBench:!1}}))}),I("div",so,[D(b,{modelValue:E(c).filterText,"onUpdate:modelValue":r[1]||(r[1]=e=>E(c).filterText=e),disable:E(c).loading,label:"搜索",dark:"",dense:"",clearable:""},{prepend:T((()=>[D(y,{color:"white",name:"search"})])),_:1},8,["modelValue","disable"])])]),E(n)>600?(_(),k(m,{key:0,dense:"",fab:"",round:"",glossy:"","fab-mini":"",ripple:"",icon:"expand_less",padding:"2px",class:"absolute-bottom-right non-selectable z-top scroll-top",onClick:r[2]||(r[2]=e=>E(i)("vertical",0,300))},{default:T((()=>[D(C,null,{default:T((()=>[no])),_:1})])),_:1})):R("",!0),D(x,{ref_key:"scrollAreaRef",ref:s,class:"dataset-category-area","content-style":E(o),"content-active-style":E(a),onScroll:E(l)},{default:T((()=>[E(c).loading?(_(),k(Xt,{key:0,class:"absolute-center","has-error":E(c).hasLoadingError},null,8,["has-error"])):R("",!0),D(eo,{nodes:E(u),class:"data-list-tree",filter:E(c).filterText,onAddOrRemoveDataset:E(p),onShowFeatureInfo:E(h),onFlyToFeature:E(g),onShowOrHideDatasetList:E(f)},null,8,["nodes","filter","onAddOrRemoveDataset","onShowFeatureInfo","onFlyToFeature","onShowOrHideDatasetList"])])),_:1},8,["content-style","content-active-style","onScroll"])])],2),[[Q,E(d).datasource.workBench]]),E(d).datasource.workBench?R("",!0):(_(),k(m,{key:0,class:"toggle-btn",round:"",loading:E(c).loading,flat:"",color:"white",onClick:r[3]||(r[3]=e=>E(v)({datasource:{workBench:!0}}))},{default:T((()=>[D(y,{size:"50px",name:"keyboard_double_arrow_right"})])),_:1},8,["loading"]))])}}}),[["__scopeId","data-v-d6084742"]]),lo=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),co={class:"page-dynamic-render-datasource absolute z-top"},uo=L({__name:"Index",setup(e){const{loadDefaultLayers:t}=ar.viewer.useLayerStore();return U((()=>{t(!0)})),(e,t)=>(_(),O("div",co,[D(io)]))}}),mo=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),po={class:"page-demo-dynamic-overlay absolute z-top"},ho=L({__name:"Index",setup(e){const{loadDefaultLayers:o}=ar.viewer.useLayerStore(),a=$(null),r=$(!1),s=$(null),n=$(null),i=$(null);U((()=>{o(!0),qt.getStaticData("/datas/dynamic-overlay.json").then((e=>{l([e.data])}))})),G((()=>{dt("/dynamic-render/historical-track")}));const l=async e=>{if(await ut("DynamicOverlay"));else{const t={id:"DynamicOverlay",name:"历史轨迹",page:"/dynamic-render/historical-track",datasets:[]},{overlays:o,stops:l}=c(e),u={show:!0,dynamicOverlays:o};t.datasets.push({cmpName:"VcOverlayDynamic",props:{shouldAnimate:r,"onUpdate:shouldAnimate":e=>{r.value=e},currentTime:s,startTime:n,stopTime:i,multiplier:1e3,onReady:e=>{a.value=e.vm,d(202106)},...u}}),t.datasets.push({cmpName:"VcCollectionPoint",props:{points:l}}),ct(t)}},c=e=>{const o=[],a=[];return e.forEach((e=>{const r=[],s=[],n=t(e,"checked");e.stops.forEach((e=>{r.push({position:[e.lon,e.lat],time:e.DATE_TIME,id:u.datatype.uuid()}),s.push([e.lon,e.lat]),a.push({id:u.datatype.uuid(),position:[e.lon,e.lat],color:"rgb(255,229,0)",show:n,...e,distanceDisplayCondition:[0,5e6],scaleByDistance:[100,2,25e5,.5],onMouseover:e=>{},onMouseout:e=>{}})})),o.push({id:String(e.TYPHOON_ID),show:n,maxCacheSize:e.stops.length,polyline:{positions:s,width:3,material:e.TYPHOON_CODE?"#2d8cf0":"#69B273",depthFailMaterial:e.TYPHOON_CODE?"#2d8cf0":"#69B273",clampToGround:!0},sampledPositions:r})})),{overlays:o,stops:a}},d=e=>{const t=ut("DynamicOverlay");if(t){t.datasets[0].cmpRef.zoomToOverlay(String(e))}else et("定位到该对象失败，原因：还未添加。")};return(e,t)=>(_(),O("div",po))}}),go=Object.freeze(Object.defineProperty({__proto__:null,default:ho},Symbol.toStringTag,{value:"Module"})),fo={class:"z-top absolute-center page-index"},vo=L({__name:"Index",setup(e){const t=$({position:[108,32],point:{pixelSize:28,color:"red"},label:{text:"Hello World",pixelOffset:[0,150]}}),{loadDefaultLayers:o,toggle:a}=ar.viewer.useLayerStore();U((()=>{o(!0)})),G((()=>{a({names:"admin",show:!1})}));const r=e=>{};return(e,o)=>{const a=w("vc-graphics-billboard"),s=w("vc-graphics-rectangle"),n=w("vc-entity");return _(),O("div",fo,[D(n,{ref_key:"entity",ref:t,position:t.value.position,point:t.value.point,label:t.value.label,onClick:r},{default:T((()=>[D(a,{ref:"billboard",image:"https://zouyaoji.top/vue-cesium/favicon.png",scale:.5},null,8,["scale"]),D(s,{coordinates:[130,20,80,25],material:"green"})])),_:1},8,["position","point","label"])])}}}),yo=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"})),bo=L({name:"Error404"}),Co={class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},ko=I("div",{style:{"font-size":"30vh"}},"404",-1),wo=I("div",{class:"text-h2",style:{opacity:"0.4"}},"噢. 这儿什么也没有...",-1);const _o=Gt(bo,[["render",function(e,t,o,a,r,s){return _(),O("div",Co,[I("div",null,[ko,wo,D(ye,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/onemap",label:"返回主页","no-caps":""})])])}]]),xo=Object.freeze(Object.defineProperty({__proto__:null,default:_o},Symbol.toStringTag,{value:"Module"})),So=e=>(Y("data-v-cddb3e03"),e=e(),K(),e),Lo={class:"q-pa-md page-login z-top"},Oo={class:"login-container col row"},To=So((()=>I("div",{class:"text-h4 q-my-sm"},"登录",-1))),Do=So((()=>I("div",{class:"oath flex"},[I("div",{class:"title full-width text-center q-pt-md"},"社交帐号登录"),I("div",{class:"q-gutter-md full-width text-center q-pt-sm flex justify-center"},[I("svg",{t:"1615200042776",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5886",width:"200",height:"200"},[I("path",{d:"M579.867 511.932c-11.67 0-23.344 10.837-23.344 24.178 0 10.839 11.668 21.678 23.344 21.678 17.514 0 30.020-10.839 30.020-21.678 0-13.34-12.505-24.178-30.020-24.178v0zM503.154 399.36c18.345 0 30.020-11.67 30.020-29.185 0-18.345-11.675-29.183-30.020-29.183-17.51 0-34.188 10.839-34.188 29.183-0.001 17.517 16.678 29.185 34.188 29.185v0zM512.326 0.56c-282.655 0-511.788 229.133-511.788 511.788 0 282.653 229.133 511.786 511.788 511.786 282.653 0 511.786-229.133 511.786-511.786 0.001-282.655-229.132-511.788-511.786-511.788v0zM415.602 642.009c-30.855 0-53.369-4.999-82.553-13.341l-84.218 42.53 24.186-71.715c-59.204-41.689-94.228-94.221-94.228-158.428 0-113.403 106.733-200.123 236.814-200.123 115.069 0 217.633 68.377 237.644 165.106-8.338-1.671-15.844-2.502-22.514-2.502-113.403 0-200.954 85.049-200.954 187.613 0 17.508 2.502 33.351 6.671 50.030-6.671 0.829-14.178 0.829-20.849 0.829v0zM763.314 723.724l16.674 60.041-63.371-35.854c-24.18 4.999-47.529 12.505-71.709 12.505-111.737 0-200.123-76.711-200.123-171.769 0-95.058 88.388-171.771 200.123-171.771 105.895 0 200.954 76.713 200.954 171.771 0 53.362-35.854 100.891-82.548 135.078v0zM338.053 340.992c-17.51 0-35.854 10.839-35.854 29.183 0 17.516 18.343 29.19 35.854 29.19 16.679 0 30.020-11.675 30.020-29.19 0-18.343-13.341-29.183-30.020-29.183v0zM710.783 511.932c-12.51 0-23.349 10.837-23.349 24.178 0 10.839 10.839 21.678 23.349 21.678 16.674 0 29.183-10.839 29.183-21.678 0-13.34-12.509-24.178-29.183-24.178v0zM710.783 511.932z","p-id":"5887","data-spm-anchor-id":"a313x.7781069.0.i22",class:"",fill:"#2dc100"})]),I("svg",{t:"1615199447339",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2522",width:"200",height:"200"},[I("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m210.385455 641.396364c-7.447273 9.309091-26.996364-1.861818-41.89091-32.581819-3.723636 13.963636-13.032727 36.305455-34.443636 64.232728 35.374545 8.378182 44.683636 42.821818 33.512727 61.44-8.378182 13.032727-26.996364 24.203636-59.578181 24.203636-58.647273 0-83.781818-15.825455-95.883637-26.996364-1.861818-2.792727-5.585455-3.723636-10.24-3.723636-4.654545 0-7.447273 0.930909-10.24 3.723636-11.170909 11.170909-37.236364 26.996364-95.883636 26.996364-32.581818 0-52.130909-11.170909-59.578182-24.203636-12.101818-18.618182-1.861818-53.061818 33.512727-61.44-20.48-27.927273-29.789091-50.269091-34.443636-64.232728-13.963636 30.72-34.443636 42.821818-41.890909 32.581819-5.585455-8.378182-8.378182-26.065455-7.447273-38.167273 3.723636-46.545455 34.443636-85.643636 53.061818-106.123636-2.792727-5.585455-8.378182-40.029091 14.894546-63.301819v-1.861818c0-92.16 65.163636-158.254545 148.014545-158.254545 81.92 0 148.014545 66.094545 148.014546 158.254545v1.861818c23.272727 23.272727 17.687273 57.716364 14.894545 63.301819 17.687273 20.48 49.338182 59.578182 53.061818 106.123636 0.930909 12.101818-0.930909 29.789091-7.447272 38.167273z",fill:"#30A5DD","p-id":"2523"})]),I("svg",{t:"1615199464855",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3380",width:"200",height:"200"},[I("path",{d:"M448.698182 482.210909c-96.814545 4.654545-175.010909 56.785455-175.010909 121.949091s78.196364 114.501818 175.010909 109.847273S623.709091 647.912727 623.709091 582.749091c-0.930909-64.232727-79.127273-105.192727-175.010909-100.538182z m65.163636 164.770909c-29.789091 39.098182-88.436364 57.716364-145.221818 26.065455-26.996364-14.894545-26.065455-43.752727-26.065455-43.752728s-11.170909-92.16 85.643637-103.330909c97.745455-12.101818 115.432727 81.92 85.643636 121.018182z",fill:"#EA5D5C","p-id":"3381"}),I("path",{d:"M448.698182 584.610909c-6.516364 4.654545-7.447273 13.032727-3.723637 18.618182 2.792727 5.585455 11.170909 6.516364 16.756364 1.861818 5.585455-4.654545 8.378182-13.032727 4.654546-18.618182-2.792727-5.585455-10.24-6.516364-17.687273-1.861818zM403.083636 597.643636c-18.618182 1.861818-30.72 17.687273-30.72 33.512728 0 14.894545 14.894545 26.065455 32.581819 24.203636 17.687273-1.861818 32.581818-15.825455 32.581818-31.650909s-13.963636-27.927273-34.443637-26.065455z",fill:"#EA5D5C","p-id":"3382"}),I("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m197.352727 626.501818C669.323636 712.145455 538.065455 754.036364 441.250909 746.589091c-92.16-7.447273-211.316364-38.167273-223.418182-151.738182 0 0-6.516364-51.2 42.821818-117.294545 0 0 70.749091-99.607273 152.669091-128.465455 82.850909-27.927273 92.16 19.549091 92.16 48.407273-4.654545 24.203636-12.101818 38.167273 18.618182 28.858182 0 0 80.989091-38.167273 114.501818-4.654546 26.996364 26.996364 4.654545 65.163636 4.654546 65.163637s-11.170909 12.101818 12.101818 16.756363c21.410909 3.723636 94.021818 37.236364 53.992727 122.88z m-80.058182-236.450909c-8.378182 0-15.825455-7.447273-15.825454-15.825454 0-9.309091 7.447273-15.825455 15.825454-15.825455 0 0 99.607273-18.618182 87.505455 89.367273v1.861818c-0.930909 7.447273-7.447273 13.963636-15.825455 13.963636-9.309091 0-15.825455-7.447273-15.825454-15.825454 0-1.861818 15.825455-73.541818-55.854546-57.716364zM797.789091 493.381818c-2.792727 18.618182-12.101818 11.170909-22.341818 11.170909-13.032727 0-23.272727-16.756364-23.272728-29.789091 0-11.170909 4.654545-22.341818 4.654546-22.341818 0.930909-4.654545 12.101818-34.443636-7.447273-78.196363-35.374545-60.509091-106.123636-60.509091-114.501818-57.716364-8.378182 3.723636-21.410909 5.585455-21.410909 5.585454-13.032727 0-23.272727-10.24-23.272727-23.272727 0-11.170909 7.447273-19.549091 16.756363-22.341818 0 0 0 0.930909 0.930909 0.930909s1.861818 0.930909 1.861819 0.930909c10.24-1.861818 45.614545-4.654545 79.127272 3.723637 62.370909 14.894545 146.152727 83.781818 108.916364 211.316363z",fill:"#EA5D5C","p-id":"3383"})])])],-1))),Vo=So((()=>I("div",{class:"row justify-between q-pt-md text-grey-8"},[I("span",null,"忘记密码"),I("span",{class:"sign-up text-center cursor-pointer"}," 还没有账号？现在注册！ ")],-1))),Po=Gt(L({__name:"Login",setup(e){W((e=>({"694a9722":E(r).pageLogin.themePageLoginBackground,"4f2ef622":E(r).pageLogin.themePageLoginColor,"7b160008":E(r).global.themeColorAlpha,"0de32af6":E(r).global.themeColor}))),be();const t=J(),o=$({username:"admin",password:"admin"}),a={username:[e=>e&&e.length>0||"请输入用户名"],password:[e=>e&&e.length>0||"请输入用户名"],rememberMe:[e=>!!e||"You need to accept the license and terms first"]},r=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]})),s=async()=>{ar.system.useAccountStore().login(o.value).then((()=>{t.replace(t.currentRoute.value.query.redirect||"/index")}))},n=()=>{o.value={username:"",password:""}};return(e,t)=>{const r=w("q-icon"),i=w("q-input"),l=w("q-btn"),c=w("q-form");return _(),O("div",Lo,[I("div",Oo,[D(c,{greedy:"",class:"form-login",onSubmit:s,onReset:n},{default:T((()=>[To,D(i,{modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.username=e),outlined:"",label:"用户名","lazy-rules":"",rules:a.username},{prepend:T((()=>[D(r,{class:"icon",name:"perm_identity"})])),_:1},8,["modelValue","rules"]),D(i,{modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.password=e),outlined:"",label:"密码","lazy-rules":"",type:"password",rules:a.password},{prepend:T((()=>[D(r,{class:"icon",name:"lock"})])),_:1},8,["modelValue","rules"]),I("div",null,[D(l,{class:"btn-submit full-width no-outline text-h6",color:"primary",label:"登录",type:"submit"})]),Do,Vo])),_:1})])])}}}),[["__scopeId","data-v-cddb3e03"]]),Io=Object.freeze(Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"})),Ro=Gt(L({__name:"LogTable",setup(e){W((e=>({e789e838:E(r).global.themeQCardColor,ef3233d4:E(r).global.themeQCardBackgroundColor,"49cd4d32":E(r).global.themeColorActive})));const t=x({sortBy:"desc",descending:!1,rowsPerPage:10}),o=$([{id:"time",label:"时间",field:"time",align:"center"},{id:"message",label:"信息",field:"message",align:"center"},{id:"url",label:"触发页面",field:"url",align:"center"},{id:"more",label:"查看详情",align:"center"}]),a=S((()=>ar.system.useLogStore().log)),r=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>{const s=w("q-td"),n=w("q-btn"),i=w("q-tr"),l=w("q-table");return _(),k(l,{class:"log-table-list",rows:E(a),columns:o.value,pagination:t},{body:T((e=>[D(i,{props:e},{default:T((()=>[D(s,{key:"time",class:"text-center"},{default:T((()=>[V(P(e.row.time),1)])),_:2},1024),D(s,{key:"message",class:"text-center"},{default:T((()=>[V(P(e.row.message),1)])),_:2},1024),D(s,{key:"url",class:"text-center"},{default:T((()=>[V(P(e.row.meta.url),1)])),_:2},1024),D(s,{key:"more",class:"text-center"},{default:T((()=>[D(n,{icon:"more",rounded:"",onClick:t=>(e.row,void ve.create({type:"info",caption:"日志详情",message:"完整的日志内容已经打印到控制台"}))},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])}}}),[["__scopeId","data-v-7dd27b58"]]),Bo=I("div",{class:"text-h6"},"日志列表",-1),qo=V("关闭"),Mo=L({__name:"Index",setup(e){const t=$(!1),o=S((()=>ar.system.useLogStore().length)),a=S((()=>ar.system.useLogStore().lengthError)),r=S((()=>0===o.value?"没有日志或异常":`${o.value} 条日志${a.value>0?` | 包含 ${a.value} 个异常`:""}`)),s=()=>{t.value=!0};return(e,o)=>{const a=w("q-tooltip"),n=w("q-btn"),i=w("q-space"),l=w("q-card-section"),c=w("q-card"),d=w("q-dialog"),u=q("close-popup");return _(),O(j,null,[D(n,{icon:"adjust",size:"md",flat:"",round:"",onClick:s},{default:T((()=>[D(a,null,{default:T((()=>[V(P(E(r)),1)])),_:1})])),_:1}),D(d,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e)},{default:T((()=>[D(c,{style:{width:"1440px","max-width":"960px"}},{default:T((()=>[D(l,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:T((()=>[Bo,D(i),z((_(),k(n,{icon:"close",flat:"",round:"",dense:""},{default:T((()=>[D(a,null,{default:T((()=>[qo])),_:1})])),_:1})),[[u]])])),_:1}),D(l,{class:"theme-card"},{default:T((()=>[D(Ro)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Eo=L({__name:"Index",setup(e){const t=S((()=>ar.system.useFullscreenStore().active)),o=()=>{ar.system.useFullscreenStore().toggle()};return(e,a)=>{const r=w("q-tooltip"),s=w("q-btn");return _(),k(s,{icon:E(t)?"fullscreen_exit":"fullscreen",size:"md",flat:"",round:"",onClick:o},{default:T((()=>[D(r,null,{default:T((()=>[V(P(E(t)?"退出全屏":"全屏"),1)])),_:1})])),_:1},8,["icon"])}}}),jo=V("已激活"),No=V("使用"),Ao=L({__name:"ThemeList",setup(e){W((e=>({"1a8379b6":E(r).global.themeQCardColor,"15dea5d5":E(r).global.themeColorActive})));const t=$([{id:"title",label:"名称",field:"title",align:"center"},{id:"preview",label:"预览",field:"preview",align:"center"},{id:"handler",label:"操作",align:"center"}]),o=S((()=>ar.system.useThemeStore().list)),a=S((()=>ar.system.useThemeStore().activeName)),r=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>{const s=w("q-td"),n=w("q-btn"),i=w("q-tr"),l=w("q-table");return _(),k(l,{class:"theme-table-list",rows:E(o),"hide-header":"","hide-pagination":"",columns:t.value},{body:T((e=>[D(i,{props:e},{default:T((()=>[D(s,{key:"title"},{default:T((()=>[V(P(e.row.title),1)])),_:2},1024),D(s,{key:"preview"},{default:T((()=>[V(P(e.row.preview),1)])),_:2},1024),D(s,{key:"handler"},{default:T((()=>[E(a)===e.row.name?(_(),k(n,{key:0,class:"active",icon:"done",rounded:"",outline:""},{default:T((()=>[jo])),_:1})):(_(),k(n,{key:1,rounded:"",outline:"",onClick:t=>{return o=e.row.name,void ar.system.useThemeStore().set(o);var o}},{default:T((()=>[No])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])}}}),zo=V("主题"),Fo=I("div",{class:"text-h6"},"主题",-1),$o=V("关闭"),Ho=L({__name:"Index",setup(e){const t=$(!1);return(e,o)=>{const a=w("q-tooltip"),r=w("q-btn"),s=w("q-space"),n=w("q-card-section"),i=w("q-card"),l=w("q-dialog"),c=q("close-popup");return _(),O(j,null,[D(r,{icon:"style",size:"md",flat:"",round:"",onClick:o[0]||(o[0]=e=>t.value=!0)},{default:T((()=>[D(a,null,{default:T((()=>[zo])),_:1})])),_:1}),D(l,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e)},{default:T((()=>[D(i,{style:{width:"650px"}},{default:T((()=>[D(n,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:T((()=>[Fo,D(s),z((_(),k(r,{icon:"close",flat:"",round:"",dense:""},{default:T((()=>[D(a,null,{default:T((()=>[$o])),_:1})])),_:1})),[[c]])])),_:1}),D(n,{class:"theme-card"},{default:T((()=>[D(Ao)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Uo=V("注销"),Go=L({__name:"Index",setup(e){const{toggleGlobalLayout:t}=ar.system.useLayoutStore(),{loadDefaultLayers:o}=ar.viewer.useLayerStore(),a=ar.system.useUserStore(),r=Se(),s=()=>{ar.system.useAccountStore().logout({confirm:!0}).then((e=>{if(e){o(!1),t({featureInfo:!1,layerManager:!1}),ar.viewer.useRenderStore(or).removeAllRenderData();const e={position:[105,30,21634101],heading:360,pitch:-90,roll:0};(null==r?void 0:r.viewer)&&Le(null==r?void 0:r.viewer,e,{duration:3})}}))};return(e,t)=>{var o;const r=w("q-avatar"),n=w("q-item-section"),i=w("q-item-label"),l=w("q-item"),c=w("q-list"),d=w("q-menu"),u=w("q-btn"),m=q("close-popup");return _(),k(u,{dense:"",rounded:"","no-caps":"",size:"md",class:"q-mr-sm","auto-close":"",icon:"person",label:null==(o=E(a).info)?void 0:o.username},{default:T((()=>[D(d,null,{default:T((()=>[D(c,{dense:""},{default:T((()=>[z((_(),k(l,{clickable:"",dense:"",onClick:s},{default:T((()=>[D(n,{avatar:""},{default:T((()=>[D(r,{icon:"logout"})])),_:1}),D(n,null,{default:T((()=>[D(i,null,{default:T((()=>[Uo])),_:1})])),_:1})])),_:1})),[[m]])])),_:1})])),_:1})])),_:1},8,["label"])}}}),Qo=V("简体中文"),Wo=V("English"),Jo=L({__name:"Index",setup(e){const{locale:t}=Z(),o=$(!1),a=e=>{t.value=e,He("locale",e)};return(e,t)=>{const r=w("q-item-label"),s=w("q-item-section"),n=w("q-item"),i=w("q-list"),l=w("q-btn-dropdown"),c=q("close-popup");return _(),k(l,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),dense:"",color:"#fff","fab-mini":"",size:"md","dropdown-icon":"language",flat:""},{default:T((()=>[D(i,null,{default:T((()=>[z((_(),k(n,{clickable:"",onClick:t[0]||(t[0]=e=>a("zh-CN"))},{default:T((()=>[D(s,null,{default:T((()=>[D(r,null,{default:T((()=>[Qo])),_:1})])),_:1})])),_:1})),[[c]]),z((_(),k(n,{clickable:"",onClick:t[1]||(t[1]=e=>a("en-US"))},{default:T((()=>[D(s,null,{default:T((()=>[D(r,null,{default:T((()=>[Wo])),_:1})])),_:1})])),_:1})),[[c]])])),_:1})])),_:1},8,["modelValue"])}}}),Yo=V("图层管理"),Ko=L({__name:"Index",setup(e){const{toggleGlobalLayout:t}=ar.system.useLayoutStore(),o=()=>{t({layerManager:!ar.system.useLayoutStore().global.layerManager})};return(e,t)=>{const a=w("q-tooltip"),r=w("q-btn");return _(),k(r,{size:"md",flat:"",round:"",color:"#fff",icon:"layers",onClick:o},{default:T((()=>[D(a,null,{default:T((()=>[Yo])),_:1})])),_:1})}}}),Zo={class:"left"},Xo={class:"content"},ea=(e=>(Y("data-v-9dd29b3a"),e=e(),K(),e))((()=>I("div",{size:"60px",class:"logo-img float"},[I("img",{src:"https://zouyaoji.top/vue-cesium/favicon.png"})],-1))),ta={class:"title text-h4 float"},oa={class:"nav float"},aa={class:"right q-ml-sm q-mr-sm"},ra={key:0,class:"content"},sa=Gt(L({__name:"Index",setup(e){W((e=>({"4ec40eb5":E(m).header.themeHeaderBackgroundColor,a98bb588:E(m).header.themeHeaderContentBackgroundColor,"80fcb4ec":E(m).header.themeHeaderLogoBackgroundColor,"40875fea":E(m).header.themeHeaderTitleColor,b0d4c17a:E(m).header.themeHeaderColor,20233740:E(m).global.themeColorActive})));const t=X(),o=$(!1),a=$(""),{registerTimeout:r}=Oe(),s=$(100),n=ar.system.useMenuStore(),i=ar.system.useLayoutStore(),{global:l}=H(i),c=S((()=>"VueCesium Demo")),d=S((()=>{const e=n.header;return e.length?e[0].children:[]})),u=S((()=>n.aside)),m=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));B((()=>t.matched),(e=>{r((()=>{if(e.length>1){const t=e[1].path.substring(1,e[1].path.length);t&&(a.value=t)}else a.value="index"}),s.value)}),{immediate:!0}),U((()=>{s.value=5}));const p=()=>{Ce("https://github.com/zouyaoji/vue-cesium-demo")},h=()=>{i.toggleGlobalLayout({leftDrawerMini:!l.value.leftDrawerMini})},g=e=>{null===e&&t.matched.length>1?a.value=t.matched[1].path.substring(1,t.matched[1].path.length):a.value=e};return(e,t)=>{const r=w("q-btn"),s=w("q-route-tab"),n=w("q-tabs"),i=w("q-icon");return _(),O("div",{class:"main-header",style:ee({opacity:o.value?.5:1})},[I("div",Zo,[I("div",Xo,[ea,E(u).length?(_(),k(r,{key:0,flat:"",icon:"menu",class:"text-white",round:"",style:{height:"24px"},onClick:h})):R("",!0),I("div",ta,[I("div",null,P(E(c)),1)]),I("div",oa,[D(n,{"model-value":a.value,"onUpdate:model-value":t[0]||(t[0]=e=>a.value=e),"onUpdate:modelValueOnce":g},{default:T((()=>[(_(!0),O(j,null,M(E(d),((t,o)=>(_(),k(s,{key:o,name:t.name,to:t.path,exact:"",label:e.$t(t.title),"active-class":"menu-active"},null,8,["name","to","label"])))),128))])),_:1},8,["model-value"])])])]),I("div",aa,[E(d).length?(_(),O("div",ra,[D(r,{size:"md",flat:"",round:"",color:"#fff",onClick:p},{default:T((()=>[D(i,{name:"fa fa-github"})])),_:1}),D(Ko),D(Mo),D(Eo),D(Ho),D(Jo),D(Go)])):R("",!0)])],4)}}}),[["__scopeId","data-v-9dd29b3a"]]),na={key:0,class:"text-weight-bold"},ia={class:"content"},la=Gt(L({__name:"Index",props:{title:{type:String,default:""},titleClass:{type:String,default:""},closeTip:{type:String,default:"关闭"},showCloseBtn:{type:Boolean,default:!0},separatorOpts:{type:Object,default:()=>({show:!0,dark:!0,color:"white",size:"1px"})}},emits:["close"],setup(e,{emit:t}){W((e=>({c6e3f058:E(a).commonPanel.themeCommonPanelHeaderColor,a83893f4:E(a).commonPanel.themeCommonPanelHeaderBackgroundColor,"6d7599a8":E(a).commonPanel.themeCommonPanelContentColor,"387e935e":E(a).commonPanel.themeCommonPanelContentBackgroundColor,"452a03e3":E(a).commonPanel.themeCommonPanelListColor,"5d46fb17":E(a).commonPanel.themeCommonPanelListBorderColor,"84b34094":E(a).global.themeColorAlpha,"21f592f0":E(a).global.themeColor})));const o=e=>{t("close",e)},a=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));return(t,a)=>{const r=w("q-space"),s=w("q-tooltip"),n=w("q-btn"),i=w("q-bar"),l=w("q-separator"),c=w("q-card"),d=q("close-popup");return _(),k(c,{class:"common-panel"},{default:T((()=>[D(i,{class:A(["header",e.titleClass])},{default:T((()=>[""!==e.title?(_(),O("div",na,P(e.title),1)):R("",!0),te(t.$slots,"header-left",{},void 0,!0),D(r),te(t.$slots,"header-right",{},void 0,!0),e.showCloseBtn?z((_(),k(n,{key:1,dense:"",flat:"",icon:"close",onClick:o},{default:T((()=>[D(s,null,{default:T((()=>[V(P(e.closeTip),1)])),_:1})])),_:1})),[[d]]):R("",!0)])),_:3},8,["class"]),e.separatorOpts.show?(_(),k(l,oe(ae({key:0},e.separatorOpts)),null,16)):R("",!0),I("div",ia,[te(t.$slots,"default",{},void 0,!0)])])),_:3})}}}),[["__scopeId","data-v-70da5cdb"]]),ca=L({name:"DragWrapper",props:{restriction:{type:[String,Object,Function],default:"parent"}},setup(e,t){const o=$(null),a=ie(),r=e=>{const t=e.target,o=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+o+"px, "+a+"px)",t.setAttribute("data-x",o),t.setAttribute("data-y",a)},s=()=>{const e=o.value;re(e).reflow({name:"drag",axis:"xy"})};return U((()=>{const t=o.value;re(t).draggable({ignoreFrom:"button, .ignore-drag",allowFrom:".drag-handle",inertia:!0,onmove:r,restrict:{restriction:e.restriction,endOnly:!0,elementRect:{left:0,right:1,top:0,bottom:1}}}),addEventListener("resize",s,!1)})),se((()=>{const e=o.value;re.isSet(e)&&re(e).unset(),removeEventListener("resize",s,!1)})),Object.assign(null==a?void 0:a.proxy,{resizeListener:s}),()=>ne("div",{ref:o,class:"drag-wrapper absolute"},Te(t.slots.default))}}),da={class:"text-subtitle2"},ua={class:"q-gutter-sm"},ma={class:"text-subtitle2"},pa={class:"q-gutter-sm"},ha={class:"text-subtitle2"},ga={class:"q-gutter-sm"},fa=Gt(L({__name:"Index",setup(e){const t=$(null),o=ar.system.useLayoutStore(),{global:a,dynamicRender:r}=H(o),{overlayLayers:s,baseLayers:n,vectorLayers:i,toggle:l}=ar.viewer.useLayerStore();B(r,(e=>{le((()=>{var e,o;t.value&&(null==(o=(e=t.value).resizeListener)||o.call(e))}))}),{deep:!0});const c=S((()=>({overlayLayers:s,baseLayers:n,vectorLayers:i}))),d=S({get(){var e,t;return null==(t=null==(e=c.value.baseLayers.filter((e=>e.show)))?void 0:e[0])?void 0:t.name},set(e){}}),u=(e,t)=>{c.value.baseLayers.forEach((t=>{t.name===e?l({names:t.name,show:!0}):l({names:t.name,show:!1})}))},m=(e,t)=>{const o=e.name;l({names:o,show:t})},p=()=>{o.toggleGlobalLayout({layerManager:!a.value.layerManager})};return(e,o)=>{const s=w("q-radio"),n=w("q-card-section"),i=w("q-separator"),l=w("q-checkbox");return _(),O("div",{class:A(["layer-manager",E(r).datasource.workBench?"":"full-srceen"])},[D(E(ca),{ref_key:"dragWrapperRef",ref:t},{default:T((()=>[z(D(la,{class:"layer-manager-panel",title:e.$t("message.panel.layerManager"),"title-class":"drag-handle",onClose:p},{default:T((()=>[D(n,{class:"q-pt-sm"},{default:T((()=>[I("div",da,P(e.$t("message.baseLayer")),1),I("div",ua,[(_(!0),O(j,null,M(E(c).baseLayers,((e,t)=>(_(),k(s,{key:t,modelValue:E(d),"onUpdate:modelValue":[o[0]||(o[0]=e=>ce(d)?d.value=e:null),u],val:e.name,label:e.text},null,8,["modelValue","val","label"])))),128))])])),_:1}),D(i,{inset:""}),D(n,{class:"q-pt-sm"},{default:T((()=>[I("div",ma,P(e.$t("message.overlayLayer")),1),I("div",pa,[(_(!0),O(j,null,M(E(c).overlayLayers,((e,t)=>(_(),k(l,{key:t,modelValue:e.show,"onUpdate:modelValue":[t=>e.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1}),D(i,{inset:""}),D(n,{class:"q-pt-sm"},{default:T((()=>[I("div",ha,P(e.$t("message.vectorLayer")),1),I("div",ga,[(_(!0),O(j,null,M(E(c).vectorLayers,((e,t)=>(_(),k(l,{key:t,modelValue:e.props.show,"onUpdate:modelValue":[t=>e.props.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1})])),_:1},8,["title"]),[[Q,E(a).layerManager]])])),_:1},512)],2)}}}),[["__scopeId","data-v-7d79f198"]]),va={class:"main-interaction"},ya={class:"layer-manager-wrapper"},ba=Gt(L({__name:"Index",setup:e=>(S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]})),(e,t)=>(_(),O("div",va,[I("div",ya,[D(fa)])])))}),[["__scopeId","data-v-74a2bfee"]]),Ca={class:"vc-geocoder q-gutter-md row z-fab"},ka=V(" 没有结果 "),wa=Gt(L({__name:"Index",setup(e){const t=Se(),o=$(null),a=$([]),r=$(null),s=$([]),n=async(e,t,r)=>{const s={keywords:e=""===e?o.value:e,citylimit:!0,output:"json",key:"488103685805d2ceb629aba785aa3760"},n=await qt.getLocationList(s);let i=[];if("1"===n.status){const e=n.pois,t=[];e.forEach((e=>{t.push({value:e.id,label:e.name,pname:e.pname,cityname:e.cityname,adname:e.adname,address:e.address,location:e.location,type:e.type})})),i=[...new Set(t)]}t((()=>{const t=null==e?void 0:e.toLocaleLowerCase();a.value=i.filter((e=>e.label.toLocaleLowerCase().indexOf(t)>-1))}))},i=e=>{o.value=e},l=()=>{o.value=null,s.value.length=0},c=e=>{if(e){const t=De(Number(e.location.trim().split(",")[0]),Number(e.location.trim().split(",")[1])),o={lng:t[0],lat:t[1],address:e.address};d(o,e)}else s.value.length=0},d=(e,o)=>{const a=e.lng,r=e.lat,n=e.address,{Rectangle:i,sampleTerrain:l}=Cesium,{viewer:c}=t;s.value.length=0,s.value.push({position:[a,r],point:{color:"#08ABD5",pixelSize:12,outlineWidth:3,outlineColor:"#fff"},properties:{...o},description:u({"经度":a,"纬度":r,"地址":n})}),new Cesium.HeadingPitchRange(0,0,3e3);const d=.01,m=i.fromDegrees(a-d,r-d,a+d,r+d),p=c.scene.camera,h=p.getRectangleCameraCoordinates(m),g=c.scene.globe.ellipsoid.cartesianToCartographic(h);l(c.scene.globe.terrainProvider,6,[i.center(m)]).then((function(e){const t={longitude:g.longitude,latitude:g.latitude,height:g.height+e[0].height},o=c.scene.globe.ellipsoid.cartographicToCartesian(t);p.flyTo({duration:3,destination:o})}))},u=(e,t)=>{let o="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(a===t)continue;let r=e[a];"object"==typeof r&&(r=u(r)),a=a.replace(/_/g," "),Cesium.defined(r)&&(o+="<tr><th>"+a+"</th><td>"+r+"</td></tr>")}return o.length>0&&(o='<table class="cesium-infoBox-defaultTable"><tbody>'+o+"</tbody></table>"),o};return(e,t)=>{const d=w("q-icon"),u=w("q-item-section"),m=w("q-item"),p=w("q-select"),h=w("vc-datasource-custom");return _(),O(j,null,[I("div",Ca,[D(p,{outlined:"","model-value":o.value,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:a.value,label:"输入关键字搜索位置",style:{width:"250px"},dense:"","hide-dropdown-icon":"",onFilter:n,onInputValue:i,"onUpdate:modelValue":c},{prepend:T((()=>[D(d,{name:"place",color:"white"})])),"no-option":T((()=>[D(m,null,{default:T((()=>[D(u,{class:"text-grey"},{default:T((()=>[ka])),_:1})])),_:1})])),append:T((()=>[null!==o.value?(_(),k(d,{key:0,name:"cancel",class:"cursor-pointer",onClick:F(l,["stop"])},null,8,["onClick"])):R("",!0),D(d,{name:"search",color:"orange"})])),_:1},8,["model-value","options"])]),D(h,{ref_key:"datasoureceRef",ref:r,entities:s.value},null,8,["entities"])],64)}}}),[["__scopeId","data-v-eeba3faf"]]),_a={VcCollectionPrimitive:Ve,VcCollectionBillboard:Pe,VcCollectionPoint:Ie,VcCollectionPolyline:Re,VcDatasourceGeojson:Be,VcDatasourceCustom:qe,VcOverlayDynamic:Me,VcOverlayHeatmap:Ee,VcPrimitiveTileset:je},xa=L({name:"RenderData",setup(e,t){const a=Se(),r=ar.viewer.useRenderStore().renderDatas,s=ar.viewer.useRenderStore().selectedRenderData,n=$(null);let i=!1;const{registerTimeout:l,removeTimeout:c}=Oe(),{toggleGlobalLayout:d}=ar.system.useLayoutStore(),{setMouseOverlayLabel:u,clearMouseOverlayLabel:m}=ar.viewer.useOverlayStore();let p=!1;B((()=>o.exports.cloneDeep(s)),((e,t)=>{var o,a,r;if(e.model){const s=e.feature,d=t.feature;if(!i&&s.properties.id!==(null==(o=null==d?void 0:d.properties)?void 0:o.id)){const t=e.model.position||[Number(null==(a=s.properties)?void 0:a.longitude),Number(null==(r=s.properties)?void 0:r.latitude)];e.model&&t&&!isNaN(t[0])&&(c(),l((()=>{n.value.position.value=Cesium.Cartesian3.fromDegrees(t[0],t[1]),n.value.animateAppear(),p=!0}),1500))}i=!1}else(p&&!i||!i&&n.value.selectedFeature.value)&&n.value.animateDepart(),p=!1}),{deep:!0});const h=e=>{var t,o,r,s;const{viewer:n}=a;n.canvas.setAttribute("style","cursor: pointer");const{defined:i,JulianDate:l,BoundingSphere:c,PointPrimitiveCollection:d,BillboardCollection:m,PolylineCollection:p,PrimitiveCollection:h,GeoJsonDataSource:g,CustomDataSource:f}=Cesium;let v,y="",b=[0,0];if(e.cesiumObject instanceof m||e.cesiumObject instanceof d){const o=e.pickedFeature.primitive,a=null==o?void 0:o.feature;i(a)&&(y=null==(t=a.properties)?void 0:t.name,v=o.position||e.surfacePosition,b=[16,16])}else if(e.cesiumObject instanceof p){const t=e.pickedFeature.primitive,a=null==t?void 0:t.feature;if(i(a)){y=null==(o=a.properties)?void 0:o.name;const e=t.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof h){const t=null==(r=e.pickedFeature.primitive)?void 0:r._vcParent,o=null==t?void 0:t.feature;if(i(o)){y=null==(s=o.properties)?void 0:s.name;const e=t.positions.length?t.positions:t.polygonHierarchy.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof f||e.cesiumObject instanceof g){const t=e.pickedFeature.id,o=null==t?void 0:t.feature;if(i(o)){const e=o.properties;y=null==e?void 0:e.name;let a,r;switch(null==e?void 0:e.actualRenderingType){case"label":case"point":case"billboard":case"model":v=t.position.getValue(l.now());break;case"polyline":r=t.polyline.positions.getValue(),a=c.fromPoints(r),v=a.center;break;case"polygon":r=t.polygon.hierarchy.getValue().positions,a=c.fromPoints(r),v=a.center;break;case"geojson":y=t.properties.dValue.getValue(),a=new Cesium.BoundingSphere,n.dataSourceDisplay.getBoundingSphere(t,!0,a),v=a.center}b=[16,16]}}y&&""!==y&&u({position:v,show:!0,text:y,pixelOffset:b})},g=e=>{const{viewer:t}=a;t.canvas.setAttribute("style","cursor: auto"),m()},f=e=>{e?"__Vc__Pick__Location__"!==e.id&&(i=!0,d({featureInfo:!1}),setTimeout((()=>{var t,o,r;const{viewer:s}=a,{defined:n,JulianDate:i,BoundingSphere:l}=Cesium,c=(null==(t=e.cesiumObject)?void 0:t.feature)||(null==(r=null==(o=e.cesiumObject)?void 0:o._vcParent)?void 0:r.feature);n(c)?le((()=>{var t,o;const{actualRenderingType:a,datasetId:r,id:n,renderingApi:d}=c.properties;let u,m;ht(a,r,n);const p=e.cesiumObject;switch(a){case"label":case"point":case"billboard":case"model":"primitive"===d?p.position:p.position.getValue(i.now());break;case"polyline":m="primitive"===d?p.positions:p.polyline.positions.getValue(),u=l.fromPoints(m),u.center;break;case"polygon":m="primitive"===d?null==(t=p._vcParent)?void 0:t.polygonHierarchy.positions:p.polygon.hierarchy.getValue().positions,u=l.fromPoints(m),u.center;break;case"geojson":u=new Cesium.BoundingSphere,s.dataSourceDisplay.getBoundingSphere(p,!0,u),u.center}(!Cesium.defined(null==(o=null==c?void 0:c.properties)?void 0:o.showBillboardMenu)||c.properties.showBillboardMenu)&&v()})):(pt(),d({featureInfo:!1}))}),100)):(pt(),d({featureInfo:!1}))},v=()=>{s.feature.properties.id?tt("属性展示逻辑待完善"):Xe("显示详情数据失败，原因：要素 id 值为空。","要素model：",s.model)};function y(e){this.cmpRef=e}const b=e=>{const t=[];return null==e||e.forEach((e=>{const o=_a[e.cmpName];o?t.push(ne(o,{...e.props,ref:y.bind(e),onMouseover:h,onMouseout:g},(()=>b(null==e?void 0:e.children)))):et(`添加渲染数据集失败，原因：没要找到渲染组件名【${e.cmpName}】。`,"渲染集合数据模型：",e)})),t};return()=>{const e=[];return e.push(ne(Ne,{ref:n,onPickEvt:f})),r.forEach((t=>{null==t||t.datasets.forEach((t=>{const o=_a[t.cmpName];o?e.push(ne(o,{...t.props,ref:y.bind(t),onMouseover:h,onMouseout:g},(()=>b(null==t?void 0:t.children)))):et(`添加渲染数据集失败，原因：没要找到渲染组件名【${t.cmpName}】。`,"渲染集合数据模型：",t)}))})),e}}}),Sa={class:"vc-drawtip vc-tooltip--style"},La=L({__name:"Index",emits:["viewerReady","cesiumReady","leftClick","destroyed"],setup(e,{emit:t}){const o={"en-US":ze,"zh-CN":Fe},{locale:a}=Z(),r=S((()=>o[a.value])),s=ar.system.useThemeStore(),n=S((()=>s.themeConfig[s.activeName])),{toggleGlobalLayout:i}=ar.system.useLayoutStore(),{registerTimeout:l}=Oe(),c=$(null),d=$([0,75]),u=S((()=>({outerOptions:{icon:n.value.navigation.themeVcCompassOuterIcon,color:n.value.navigation.themeVcCompassOuterColor},innerOptions:{icon:n.value.navigation.themeVcCompassInnerIcon,color:n.value.navigation.themeVcCompassInnerColor,background:n.value.navigation.themeVcCompassInnerBackgroundColor},markerOptions:{color:n.value.global.themeColorAlpha},duration:5}))),m=S((()=>({background:n.value.navigation.themeVcZoomControlBackgroundColor,color:n.value.global.themeColor,border:`solid 1px ${n.value.commonPanel.themeCommonPanelListBorderColor}`,zoomInOptions:{color:n.value.global.themeColor},zoomOutOptions:{color:n.value.global.themeColor},zoomResetOptions:{color:n.value.global.themeColor}}))),p=S((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),h=S((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),g=S((()=>({position:"bottom-right",offset:[0,10],statusBarOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcStatusBarBackgroundColor},distancelegendOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcDistanceLegendBackgroundColor}}))),f=ar.viewer.useOverlayStore().mouseOverNameOpts;ar.viewer.useRenderStore().selectedRenderData;const v=S((()=>[...ar.viewer.useLayerStore().baseLayers,...ar.viewer.useLayerStore().overlayLayers])),y=S((()=>ar.viewer.useLayerStore().vectorLayers)),b=e=>{t("viewerReady",e),e.viewer.imageryLayers.removeAll(),i({header:!0}),l((()=>{i({content:!0})}),500)},C=e=>{t("cesiumReady",e)};return(e,t)=>{const o=w("vc-navigation"),a=w("vc-ajax-bar"),s=w("vc-layer-imagery"),n=w("vc-overlay-html"),i=w("vc-viewer");return _(),k(E(Ae),{locale:E(r),"cesium-path":"/Cesium/Cesium.js"},{default:T((()=>[D(i,{ref_key:"viewerRef",ref:c,class:"main-viewer",onReady:b,onCesiumReady:C},{default:T((()=>[D(o,{offset:d.value,"compass-opts":E(u),"zoom-opts":E(m),"print-opts":E(p),"location-opts":E(h),"other-opts":E(g)},null,8,["offset","compass-opts","zoom-opts","print-opts","location-opts","other-opts"]),D(a,{position:"bottom",color:"#21BA45",size:"3px",positioning:"fixed"}),D(E(xa)),(_(!0),O(j,null,M(E(v),((e,t)=>(_(),k(s,{key:"layer"+t,alpha:e.alpha,brightness:e.brightness,contrast:e.contrast,"sort-order":e.sortOrder,show:e.show},{default:T((()=>[(_(),k(de(e.component),oe(ue(e.props)),null,16))])),_:2},1032,["alpha","brightness","contrast","sort-order","show"])))),128)),(_(!0),O(j,null,M(E(y),((e,t)=>(_(),O(j,{key:"vector"+t},["VcTerrainProviderCesium"!==e.component||e.props.show?(_(),k(de(e.component),oe(ae({key:0},e.props)),null,16)):R("",!0)],64)))),128)),E(f).show?(_(),k(n,{key:0,position:E(f).position,"pixel-offset":E(f).pixelOffset},{default:T((()=>[I("div",Sa,P(E(f).text),1)])),_:1},8,["position","pixel-offset"])):R("",!0),D(wa),te(e.$slots,"default")])),_:3},512)])),_:3},8,["locale"])}}}),Oa={elevated:"",reveal:"",class:"absolute text-h4 text-center"},Ta={key:0,class:"content"},Da=Gt(L({__name:"MainLayout",setup(e){W((e=>({e440aac4:E(d).menu.themeMenuColor,"0d8916f8":E(d).menu.themeMenuActiveColor,"947dafac":E(d).menu.themeMenuActiveBackgroundColor})));const t=X(),a=H(ar.system.useLayoutStore()).global,{active:r}=H(ar.system.useGrayStore()),s=ar.system.useMenuStore(),n=$(!1),i=S((()=>{const e=s.header;return e.length?e[0].children:[]})),l=S((()=>s.aside)),c=S((()=>t.name)),d=S((()=>{const e=ar.system.useThemeStore();return e.themeConfig[e.activeName]}));return B((()=>t.matched),(e=>{if(e.length>1){const t=i.value.filter((t=>t.path===e[1].path));if(t.length){const e=t[0].children.filter((e=>10===e.type));e.length?s.asideSet(e):s.asideSet([])}else s.asideSet([])}}),{immediate:!0}),U((()=>{ar.system.useAccountStore().load(),ar.system.useFullscreenStore().listen(),window.onunhandledrejection=e=>{ar.system.useLogStore(or).push({message:o.exports.get(e,"reason.message","Unknown error"),type:"danger",meta:{error:o.exports.get(e,"reason"),trace:o.exports.get(e,"reason.stack")}})},window.onerror=(e,t,a,r,s)=>{ar.system.useLogStore(or).push({message:o.exports.get(s,"message","Unknown error"),type:"danger",meta:{error:s,trace:o.exports.get(s,"stack"),source:`${t}@${a}:${r}`,event:e}})}})),(e,t)=>{const o=w("q-icon"),s=w("q-item-section"),i=w("q-tooltip"),d=w("q-item"),u=w("q-separator"),m=w("q-list"),p=w("q-scroll-area"),h=w("q-drawer"),g=w("router-view"),f=w("q-page"),v=w("q-page-container"),y=w("q-layout"),b=q("ripple");return _(),k(y,{view:"hHh Lpr fFf",class:A(["main-layout",{"gray-mode":E(r)}])},{default:T((()=>{var r;return[(null==(r=E(l))?void 0:r.length)&&E(a).header?(_(),k(h,{key:0,modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=e=>n.value=e),"show-if-above":"",width:180,breakpoint:500,bordered:"",mini:E(a).leftDrawerMini},{default:T((()=>[D(p,{class:"fit"},{default:T((()=>[D(m,{class:"drawer-menu-list"},{default:T((()=>[(_(!0),O(j,null,M(E(l),((t,r)=>(_(),O(j,{key:r},[z((_(),k(d,{clickable:"","active-class":"menu-active-item",active:t.name===E(c),onClick:o=>e.$router.push(t.path)},{default:T((()=>[D(s,{avatar:""},{default:T((()=>[D(o,{name:t.icon},null,8,["name"])])),_:2},1024),D(s,null,{default:T((()=>[V(P(e.$t(t.title)||t.caption),1)])),_:2},1024),E(a).leftDrawerMini?(_(),k(i,{key:0,"transition-show":"scale","transition-hide":"scale",anchor:"center right",self:"center left"},{default:T((()=>[V(P(e.$t(t.title)||t.caption),1)])),_:2},1024)):R("",!0)])),_:2},1032,["active","onClick"])),[[b]]),t.separator?(_(),k(u,{key:"sep"+r})):R("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue","mini"])):R("",!0),D(v,{class:"no-padding"},{default:T((()=>[D(f,{class:"interaction-root"},{default:T((()=>[D(La,null,{default:T((()=>[z(I("header",Oa,[D(sa)],512),[[Q,E(a).header]]),E(a).content?(_(),O("div",Ta,[D(ba),D(g)])):R("",!0)])),_:1})])),_:1})])),_:1})]})),_:1},8,["class"])}}}),[["__scopeId","data-v-1c85bf86"]]),Va=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"})),Pa=yt([]);yt([]);const Ia={theme:{list:[{title:"经典",name:"classic",preview:"images/theme/classic/preview@2x.png"},{title:"Element",name:"element",preview:"images/theme/element/preview@2x.png"}]},menu:{asideCollapse:!1,asideTransition:!0},hotkey:{search:{open:"s",close:"esc"}},transition:{active:!0}},Ra=C("menu",{state:()=>({header:[],aside:[],asideCollapse:Ia.menu.asideCollapse,asideTransition:Ia.menu.asideTransition,moduleHeader:[]}),getters:{},actions:{async asideCollapseSet(e){this.asideCollapse=e;Ht().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideCollapseToggle(){this.asideCollapse=!this.asideCollapse;Ht().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideTransitionSet(e){this.asideTransition=e;Ht().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideTransitionToggle(){this.asideTransition=!this.asideTransition;Ht().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideLoad(){Ht().get({dbName:"sys",path:"menu",defaultValue:String(Ia.menu),user:!0})},headerSet(e){this.header=e},asideSet(e){this.aside=e},clear(){this.header=[],this.aside=[]},moduleHeaderSet(e){this.moduleHeader=e}}}),Ba=C("search",{state:()=>({active:!1,hotkey:{open:Ia.hotkey.search.open,close:Ia.hotkey.search.close},pool:[]}),actions:{toggle(){this.active=!this.active},set(e){this.active=e},init(e){const t=[],o=function(e,a=[]){e.forEach((e=>{e.children?o(e.children,[...a,e.title]):t.push({...e,fullTitle:[...a,e.title].join(" / ")})}))};o(e),this.pool=t}}}),qa=[...Pa];const Ma=Object.assign({"../../pages/dynamic-render/Index.vue":Wt,"../../pages/dynamic-render/datasource/Index.vue":mo,"../../pages/dynamic-render/datasource/data-list-tree/Index.vue":to,"../../pages/dynamic-render/datasource/work-bench/Index.vue":lo,"../../pages/dynamic-render/historical-track/Index.vue":go,"../../pages/index/Index.vue":yo,"../../pages/system/Error404.vue":xo,"../../pages/system/Login.vue":Io});function Ea(e,t){return null==e&&(e={path:"/",children:[]}),t.forEach((t=>{let o=e;if(20!==t.type&&(null!=(a=t.component)&&""!==a)){let a=null;a="MainLayout"===t.component?Da:(e=>{const t=Ma[`../../pages${e}/Index.vue`];if(t)return t.default;Xe(`动态路由页面【${e}】加载失败。请检查页面文件是否存在。`)})(t.path);const r=e.children;o={path:t.path,name:t.name,component:a,meta:{title:t.title,auth:!0,cache:!0}},t.redirect&&(o.redirect=t.redirect),r.push(o)}var a;null!=t.children&&t.children.length>0&&(null==o.children&&(o.children=[]),Ea(o,t.children))})),e.children}function ja(e,t){return null==e&&(e=[]),e.forEach((e=>{null!=e.permission&&""!==e.permission&&t.push(e.permission),null!=e.children&&e.children.length>0&&ja(e.children,t)})),t}function Na(e){null==e&&(e=[]);let t=[];return e.forEach((e=>{if(10!==e.type)return;let o,a;null!=e.children&&e.children.length>0&&(o=Na(e.children)),null!=e.icon&&""!==e.icon&&(a=e.icon),t.push({icon:a,children:o,...e})})),0===t.length&&(t=void 0),t}const Aa=C("permission",{state:()=>({routes:[],addRoutes:[],permissions:[],inited:!1}),getters:{},actions:{setRoutes({accessedRoutes:e,permissions:t}){this.addRoutes=e,this.routes=Ze.concat(e),this.inited=!0,this.permissions=t},clear(){this.addRoutes=[],this.routes=[],this.inited=!1,this.permissions=[]},generateRoutes({menuTree:e}){return new Promise((t=>{const o=Ea(null,e),a=ja(e,[]);this.setRoutes({accessedRoutes:o,permissions:a}),o.forEach((e=>{"layout"===e.name&&"/"===e.path&&(e.children=e.children.concat(Ke[0].children)),Nt.addRoute(e)}));const r=yt(Na(e));Pa.splice(0,Pa.length),Pa.push(...qa),Pa.push(...r);Ra().headerSet(Pa);Ba().init(Pa),t(!0)}))},async getAccessibleMenus({state:e,dispatch:t}){}}}),za=C("gray",{state:()=>({active:!1}),getters:{},actions:{toggle(){this.active=!this.active},set(e){this.active=e}}}),Fa={themeName:"classic",global:{themeBGColor:"#ebf1f6",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#cbe1e5",themeColorAlpha:"rgba(255, 255, 255, 0.6)",themeColorActive:"#fff",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#fff",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#1976d2",themeQMenuColor:"#fff",themeQMenuBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQCardColor:"#fff",themeQCardHeaderBackgroundColor:"rgba(0, 101, 122, 0.5)",themeQCardBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQScrollAreaColor:"#fff"},header:{themeHeaderColor:"#cbe1e5",themeHeaderTitleColor:"#fff",themeHeaderLogoBackgroundColor:"rgba(255, 255, 255, 0)",themeHeaderBackgroundColor:"rgba(29, 29, 29, 0)",themeHeaderContentBackgroundColor:"rgba(0, 68, 82, 0.6)"},commonPanel:{themeCommonPanelHeaderColor:"#fff",themeCommonPanelHeaderBackgroundColor:"rgba(0, 101, 122, 0.8)",themeCommonPanelContentColor:"#fff",themeCommonPanelContentBackgroundColor:"rgba(0, 68, 82, 0.6)",themeCommonPanelListColor:"#fff",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"svguse:#vc-icons-compass-outer",themeVcCompassOuterColor:"rgba(0, 68, 82)",themeVcCompassInnerIcon:"fa fa-compass",themeVcCompassInnerColor:"rgba(255, 255, 255, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcZoomControlBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcPrintBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcStatusBarBackgroundColor:"rgba(0, 68, 82, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(0, 68, 82, 0.8)"},pageLogin:{themePageLoginColor:"#fff",themePageLoginBackground:"rgba(29,29,29, 0.5)"},menu:{themeMenuColor:"#cbe1e5",themeMenuActiveColor:"#fff",themeMenuActiveBackgroundColor:"#F2C037"}},$a={themeName:"element",global:{themeBGColor:"#314255",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#bfcbd9",themeColorAlpha:"rgba(70, 160, 252, 0.6)",themeColorActive:"#46a0fc",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#bfcbd9",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#46a0fc",themeQMenuColor:"#bfcbd9",themeQMenuBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQCardColor:"#bfcbd9",themeQCardHeaderBackgroundColor:"rgba(49, 66, 85, 0.5)",themeQCardBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQScrollAreaColor:"#46a0fc"},header:{themeHeaderColor:"#bfcbd9",themeHeaderTitleColor:"#bfcbd9",themeHeaderLogoBackgroundColor:"#314255",themeHeaderBackgroundColor:"#202d3d",themeHeaderContentBackgroundColor:"#314255"},commonPanel:{themeCommonPanelHeaderColor:"#bfcbd9",themeCommonPanelHeaderBackgroundColor:"rgba(49, 66, 85, 0.8)",themeCommonPanelContentColor:"#bfcbd9",themeCommonPanelContentBackgroundColor:"rgba(32, 45, 61, 0.6)",themeCommonPanelListColor:"#bfcbd9",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"fa fa-circle-o-notch",themeVcCompassOuterColor:"rgb(49, 66, 85)",themeVcCompassInnerIcon:"fa fa-circle",themeVcCompassInnerColor:"rgba(49, 66, 85, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcZoomControlBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcPrintBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcStatusBarBackgroundColor:"rgba(49, 66, 85, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(49, 66, 85, 0.8)"},pageLogin:{themePageLoginColor:"#bfcbd9",themePageLoginBackground:"rgba(32, 45, 61, 0.5)"},menu:{themeMenuColor:"#bfcbd9",themeMenuActiveColor:"#bfcbd9",themeMenuActiveBackgroundColor:"#F2C037"}};let Ha="";const Ua=C("theme",{state:()=>({list:o.exports.get(Ia,"theme.list",[]),activeName:o.exports.get(Ia,"theme.list[0].name","h2o"),themeConfig:{classic:Fa,element:$a}}),getters:{activeSetting:e=>e.list.find((t=>t.name===e.activeName))},actions:{dom(){const e=`theme-${Ha}`,t=`theme-${this.activeName}`;document.body.className.includes(e)?document.body.className=document.body.className.replace(e,t):document.body.className+=" "+t;const o=this.themeConfig[this.activeName];Object.keys(o.global).forEach((e=>{document.body.style.setProperty(`--${e}`,o.global[e])}))},async set(e){Ha=this.activeName,this.activeName=this.list.find((t=>t.name===e))?e:this.list[0].name,this.dom();Ht().set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})},async load(){Ha=this.activeName;const e=Ht(),t=e.get({dbName:"sys",path:"theme.activeName",defaultValue:this.list[0].name,user:!0});this.list.find((e=>e.name===t))?this.activeName=t:(this.activeName=this.list[0].name,e.set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})),this.dom()}}}),Ga=C("transition",{state:()=>({active:Ia.transition.active}),actions:{async set(e){this.active=e;Ht().set({dbName:"sys",path:"transition.active",value:String(this.active),user:!0})},async load(){const e=Ht();this.active=e.get({dbName:"sys",path:"transition.active",defaultValue:String(Ia.transition.active),user:!0})}}}),Qa=C("account",{state:()=>({}),getters:{},actions:{async login(e){const t=(await Bt.login(e)).data;He("token",t.token),He("uuid",t.id);Ut().set({...t}),this.load()},logout:({confirm:e=!1}={})=>new Promise(((t,o)=>{async function a(){Ge("token"),Ge("uuid");Ut().set({});Aa().clear();Ra().clear(),Nt.push({name:"login"}),t(!0)}if(e){const e=za();e.set(!0),ke.create({title:"注销用户",message:"确定要注销当前用户吗？",cancel:!0}).onOk((()=>{e.set(!1),a()})).onCancel((()=>{e.set(!1),ve.create({message:"取消注销操作"}),t(!1)}))}else a()})),async load(){Ut().load();Ua().load();Ga().load();Ra().asideLoad()}}}),Wa=C("fullscreen",{state:()=>({active:!1}),getters:{},actions:{listen(){const e=this;me.isEnabled&&me.on("change",(()=>{me.isFullscreen||(e.active=!1)}))},toggle(){me.isFullscreen?(me.exit(),this.active=!1):(me.request(),this.active=!0)}}}),Ja=C("layout",{state:()=>({global:{header:!1,leftDrawerMini:!0,content:!1,footer:!1,layerManager:!1,navigation:!1,featureInfo:!1},dynamicRender:{datasource:{workBench:!1}}}),getters:{},actions:{toggleGlobalLayout(e){Object.keys(e).forEach((t=>{o.exports.isBoolean(e[t])&&(this.global[t]=e[t])}))},toggleDynamicRenderPageLayout(e){const t=(e,r)=>{Object.keys(e).forEach((s=>{a(e[s])?t(e[s],r[s]):o.exports.isBoolean(e[s])&&(r[s]=e[s])}))};t(e,this.dynamicRender)}}}),Ya=C("log",{state:()=>({log:[]}),getters:{length:e=>e.log.length,lengthError:e=>e.log.filter((e=>"danger"===e.type)).length},actions:{push({message:e,type:t="info",meta:a}){this.log.push({message:e,type:t,time:pe().format("YYYY-MM-DD HH:mm:ss"),meta:{uuid:Ue("uuid"),token:Ue("token"),url:o.exports.get(window,"location.href",""),...a}})},clean(){this.log=[]}}}),Ka={useAccountStore:e=>Qa(e),useDBStore:e=>Ht(e),useFullscreenStore:e=>Wa(e),useGrayStore:e=>za(e),useLayoutStore:e=>Ja(e),useLogStore:e=>Ya(e),useMenuStore:e=>Ra(e),usePermissionStore:e=>Aa(e),useSearchStore:e=>Ba(e),useThemeStore:e=>Ua(e),useTransitionStore:e=>Ga(e),useUserStore:e=>Ut(e)},Za=C("layer",{state:()=>({baseLayers:[{name:"tianditu_img",text:"天地图影像",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"tianditu_vec",text:"天地图电子",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"baidu_img",text:"百度影像",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu",text:"百度电子",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_midnight",text:"百度地图_午夜蓝",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"midnight",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_dark",text:"百度地图_黑夜",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"dark",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_img",text:"高德影像",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"6",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_vec",text:"高德地图",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"7",scl:"2",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_img",text:"腾讯影像",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_vec",text:"腾讯电子",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_my",text:"腾讯电子_墨渊",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},styleId:"4",minimumLevel:0,maximumLevel:17}},{name:"osm",text:"OSM",component:"VcImageryProviderOsm",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1},{name:"arcgis",text:"ArcGIS",component:"VcImageryProviderArcgis",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1}],overlayLayers:[{name:"tianditu_cva",text:"天地图注记",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"cva_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"amap_label",text:"高德注记",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"8",ltype:"4",minimumLevel:0,maximumLevel:17}},{name:"amap_traffictile",text:"高德路况",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{url:"/traffictile?v=1.0&x={x}&y={y}&z={z}&t=1",minimumLevel:0,maximumLevel:17}},{name:"baidu_traffic",text:"百度路况",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"traffic",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}}],vectorLayers:[{name:"admin",text:"行政区划",component:"VcDatasourceGeojson",props:{strokeWidth:5,stroke:"#ffc107",fill:"transparent",show:!1,data:"/datas/china.json"}},{name:"terrain",text:"全球地形",component:"VcTerrainProviderCesium",props:{show:!1}}]}),getters:{},actions:{toggle({names:e,show:t}){const a=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers];(e=Array.isArray(e)?e:[e]).forEach((e=>{var r;const s=o.exports.find(a,(t=>t.name===e));!o.exports.isUndefined(null==s?void 0:s.show)&&(s.show=t),!o.exports.isUndefined(null==(r=null==s?void 0:s.props)?void 0:r.show)&&(s.props.show=t)}))},loadDefaultLayers(e){const t=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers].map((e=>e.name));this.toggle({names:t,show:!1});this.toggle({names:["tianditu_img","admin"],show:!0})}}}),Xa=C("overlay",{state:()=>({mouseOverNameOpts:{position:[117.186419,45.66446,20],show:!1,text:"",pixelOffset:[0,0]}}),getters:{},actions:{setMouseOverlayLabel({position:e,show:t,text:o,pixelOffset:a}){this.mouseOverNameOpts.position=e,this.mouseOverNameOpts.show=t,this.mouseOverNameOpts.text=o,this.mouseOverNameOpts.pixelOffset=a},clearMouseOverlayLabel(){this.mouseOverNameOpts.position=void 0,this.mouseOverNameOpts.show=!1,this.mouseOverNameOpts.text=void 0}}}),er=C("render",{state:()=>({renderDatas:[],selectedRenderData:{model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]}}),getters:{},actions:{addRenderDatas(e){(e=Array.isArray(e)?e:[e]).forEach((e=>{-1===o.exports.findIndex(this.renderDatas,(t=>t.id===e.id))?this.renderDatas.push(e):et(`添加渲染数据集失败，原因：id 为【${e.id} 】的数据已经存在。`,"渲染数据模型：",e)}))},removeRenderDataById(e){o.exports.remove(this.renderDatas,(t=>t.id===e))},removeRenderDataByType(e){o.exports.remove(this.renderDatas,(t=>t.type===e))},removeRenderDataByPage(e){o.exports.remove(this.renderDatas,(t=>t.page===e))},removeAllRenderData(){this.renderDatas.length=0},setSelectedRenderData(e){this.selectedRenderData.model=e.model,this.selectedRenderData.renderingType=e.renderingType,this.selectedRenderData.restoreHandler=e.restoreHandler,this.selectedRenderData.feature=e.feature,this.selectedRenderData.featureInfoListItems=e.featureInfoListItems},getRenderDataByDatasetId(e){return o.exports.find(this.renderDatas,(t=>t.id===e))}}}),tr={useLayerStore:e=>Za(e),useOverlayStore:e=>Xa(e),useRenderStore:e=>er(e)},or=he(),ar={system:{...Ka},viewer:{...tr}};const rr=ge(Gt({},[["render",function(e,t){const o=w("router-view");return _(),k(o)}]]));rr.use(we,{plugins:{Notify:ve,Dialog:ke,LocalStorage:fe},lang:_e}),rr.use(jt),rr.use($e),rr.use(or),rr.use(Nt),rr.mount("#app");
