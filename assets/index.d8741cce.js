var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,l=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&n(e,s,t[s]);if(a)for(var s of a(t))o.call(t,s)&&n(e,s,t[s]);return e},i=(e,a)=>t(e,s(a));import{I as c,ce as u,cf as d,cg as m,ch as p,ci as h,cj as g,ck as v,cl as f,cm as y,cn as b,co as w,cp as x,cq as _,d as S,j as L,cr as k,cs as O,ct as V,r as C,cu as T,cv as D,cw as N,a as z,b as M,cx as j,cy as I,cz as P,F as R,w as E,cA as A,cB as $,cC as B,R as q,cD as U,a0 as G,cE as F,cF as W,cG as H,g as Y,cH as J,o as K,h as Q,cI as X,f as Z,n as ee,cJ as te,i as se,cK as ae,cL as re,cM as oe,cN as ne,cO as le,cP as ie,cQ as ce,c as ue}from"./vendor.7d016fda.js";import{P as de,N as me,Q as pe,u as he,a as ge,b as ve,c as fe,d as ye,e as be,f as we,g as xe,h as _e,i as Se,j as Le,C as ke,k as Oe,l as Ve,m as Ce,n as Te,o as De,p as Ne,q as ze,r as Me,s as je,t as Ie,v as Pe,w as Re,x as Ee,y as Ae,z as $e,A as Be,B as qe,D as Ue,E as Ge,F as Fe}from"./vendor-quasar.c5feaec2.js";import{u as We,f as He,h as Ye,a as Je,e as Ke,d as Qe,i as Xe}from"./vendor-vue-cesium.56f4f652.js";import"./vendor-echarts.fa039be5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function Ze(e="default",t=""){de.set(`VueCesiumDemo-0.0.0-${e}`,t)}function et(e="default"){return de.getItem(`VueCesiumDemo-0.0.0-${e}`)}function tt(e="default"){de.remove(`VueCesiumDemo-0.0.0-${e}`)}const st={},at=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`./${e}`)in st)return;st[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),t?new Promise(((t,s)=>{a.addEventListener("load",t),a.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},rt=[{path:"/",name:"layout",component:()=>at((()=>Promise.resolve().then((function(){return Ys}))),void 0),redirect:{path:"index"},children:[{name:"login",path:"/login",component:()=>at((()=>Promise.resolve().then((function(){return ts}))),void 0)}]}],ot=[{path:"/:catchAll(.*)*",name:"404",component:()=>at((()=>Promise.resolve().then((function(){return Ht}))),void 0)}],nt=rt;var lt=[...rt,...ot];function it(e,t){ba.viewer.useLayerStore(ya).toggle({names:e,show:t})}function ct(e){ba.viewer.useLayerStore(ya).loadDefaultLayers(e)}function ut(e){ba.system.useLayoutStore(ya).toggleGlobalLayout(e)}const dt=((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t]);const s=t.shift(),a=new Error(s);ba.system.useLogStore(ya).push({message:"业务逻辑警告",type:"warning",meta:{error:a}}),me.create({message:s,timeout:3e3,type:"warning"})})("[VueCesiumDemo] WARN "),mt=((e="")=>function(...t){e&&(c(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t]);const s=t.shift(),a=new Error(s);ba.system.useLogStore(ya).push({message:"业务逻辑异常",type:"danger",meta:{error:a}}),me.create({message:s,timeout:3e3,type:"negative"})})("[VueCesiumDemo] ERR ");function pt(e){return e.map((e=>l(i(l({},e),{path:e.path||u.exports.uniqueId("vc-menu-empty-")}),e.children?{children:pt(e.children)}:{})))}function ht(e={},t="",s=0){return[200,{code:s,msg:t,data:e}]}function gt(e){ba.system.useLogStore(ya).push({message:"数据请求异常",type:"danger",meta:{error:e}}),me.create({message:e.message,type:"negative",timeout:3e3})}function vt(e){const t=new Error(e);throw gt(t),t}var ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",parse:function(e="{}",t={}){let s=t;try{s=JSON.parse(e)}catch(a){mt(a)}return s},response:ht,responseSuccess:function(e={},t="成功"){return ht(e,t)},responseError:function(e={},t="请求失败",s=500){return ht(e,t,s)},errorLog:gt,errorCreate:vt});const yt=()=>{const e=m.create({});return e.interceptors.request.use((e=>e),(e=>(gt(e),Promise.reject(e)))),e.interceptors.response.use((e=>{const t=e.data,{code:s}=t;if(void 0===s)return t;switch(s){case 0:case 200:return t;case"xxx":vt(`[ code: xxx ] ${t.msg}: ${e.config.url}`);break;default:return vt(`${t.msg}: ${e.config.url}`),Promise.reject(t)}}),(e=>{switch(u.exports.get(e,"response.status")){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",tt("token"),tt("uuid"),Ct.push("/login");break;case 403:e.message="拒绝访问";break;case 404:e.message=`请求地址出错: ${e.response.config.url}`;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return gt(e),Promise.reject(e)})),e};function bt(e){return function(t){const s=et("token"),a={headers:{Authorization:s,"Content-Type":u.exports.get(t,"headers.Content-Type","application/json")},timeout:2e4,baseURL:e.baseURL||"/",data:{}};return s&&(a.headers.Authorization="Bearer "+s),e(Object.assign(a,t))}}const wt=yt(),xt=bt(wt),_t=yt(),St=bt(_t),Lt=new d(_t),kt=[{username:"admin",password:"admin",id:"admin-uuid",name:"Admin"},{username:"editor",password:"editor",id:"editor-uuid",name:"Editor"}],Ot=[{id:p.datatype.uuid(),component:"MainLayout",icon:"cog",islock:!1,hidden:!1,name:"layout",path:"/",permission:"",sort:1e3,title:"VueCesiumDemo",type:10,children:[{id:p.datatype.uuid(),component:"/index",icon:"cog",islock:!1,hidden:!1,name:"index",path:"/index",permission:"permission-index",sort:1e3,caption:"首页",title:"message.header.index",type:10,children:[{id:p.datatype.uuid(),component:"",icon:"eye",islock:!1,hidden:!1,name:"left-panel",path:"",permission:"permission-left-panel-view",sort:100101,title:"查看左侧面板",type:20}]},{id:p.datatype.uuid(),component:"/demo",icon:"cog",islock:!1,hidden:!1,name:"demo",path:"/demo",permission:"permission-demo",sort:1e3,caption:"示例",title:"message.header.demo",type:10,children:[]}]}];const Vt=(({service:e,request:t,serviceForMock:s,requestForMock:a,mock:r,faker:o,tools:n})=>({login:(e={})=>(r.onAny("/auth/login").reply((e=>{const t=n.parse(e.data),s=u.exports.find(kt,{username:t.username,password:t.password});return s?n.responseSuccess(u.exports.assign({},s,{token:"f5befe1a-962c-4cdd-bf45-77ce306dbbce"})):n.responseError({},"账号或密码不正确")})),a({url:"/auth/login",method:"post",data:e})),getUserInfo:()=>(r.onAny("/user/info").reply((e=>{const t=et("uuid"),s=u.exports.find(kt,{id:t});return s?n.responseSuccess(u.exports.assign({},s)):(tt("token"),tt("uuid"),Ct.push("/login"),n.responseError({},"未授权, 请登录!"))})),a({url:"/user/info",method:"post"})),getAccessibleMenus:(e={})=>(r.onAny("/api/menu/accessible").reply((e=>n.responseSuccess(Ot))),a({url:"/api/menu/accessible",method:"post",data:e}))}))({service:wt,request:xt,serviceForMock:_t,requestForMock:St,mock:Lt,faker:h,tools:ft}),Ct=g({scrollBehavior:()=>({left:0,top:0}),routes:lt,history:f("/vue-cesium-demo")}),Tt=["/login","/404"];Ct.beforeEach((async(e,t,s)=>{v.start(),ba.system.useSearchStore(ya).set(!1);const a=et("token");if("/login"!==e.path&&Vt.getUserInfo(),a)try{if(!ba.system.usePermissionStore(ya).inited){const t=[...(await Vt.getAccessibleMenus()).data];return await ba.system.usePermissionStore(ya).generateRoutes({menuTree:t}),void s(e.path)}"/login"===e.path?s({path:"/index"}):s()}catch(r){-1!==Tt.indexOf(e.path)?s():s("/login")}else-1!==Tt.indexOf(e.path)?s():s("/login")})),Ct.afterEach((e=>{var t;v.done(),t=e.meta.title,window.document.title="VueCesium Demo"+(t?` | ${t}`:"")}));const Dt=b(new y("VueCesiumDemo-0.0.0"));function Nt({dbName:e="database",path:t="",user:s=!0,validator:a=(e=>!0),defaultValue:r=""}){const o=et("uuid")||"ghost-uuid",n=`${e}.${s?`user.${o}`:"public"}${t?`.${t}`:""}`,l=Dt.get(n).value();return void 0!==l&&a(l)||Dt.set(n,r).write(),n}function zt({dbName:e="database",path:t="",user:s=!1,validator:a=(()=>!0),defaultValue:r=""}={}){return Dt.get(Nt({dbName:e,path:t,user:s,validator:a,defaultValue:r}))}Dt.defaults({sys:{},database:{}}).write();const Mt=w("db",{state:()=>({}),getters:{},actions:{set({dbName:e="database",path:t="",value:s="",user:a=!1}){!function({dbName:e="database",path:t="",value:s="",user:a=!1}){Dt.set(Nt({dbName:e,path:t,user:a}),s).write()}({dbName:e,path:t,value:s,user:a})},get:({dbName:e="database",path:t="",defaultValue:s="",user:a=!1})=>function({dbName:e="database",path:t="",defaultValue:s="",user:a=!1}){return u.exports.cloneDeep(Dt.get(Nt({dbName:e,path:t,user:a,defaultValue:s})).value())}({dbName:e,path:t,defaultValue:s,user:a}),database:({user:e=!1}={})=>zt({user:e,defaultValue:""}),databaseClear:({user:e=!1}={})=>zt({user:e,validator:()=>!0,defaultValue:""})}}),jt=w("user",{state:()=>({info:{}}),getters:{},actions:{async set(e){this.info=e;Mt().set({dbName:"sys",path:"user.info",value:e,user:!0})},async load(){const e=Mt().get({dbName:"sys",path:"user.info",defaultValue:"",user:!0});this.set(e)}}});var It=(e,t)=>{const s=e.__vccOpts||e;for(const[a,r]of t)s[a]=r;return s};const Pt={class:"page-demo absolute"};var Rt=It({},[["render",function(e,t){return x(),_("div",Pt,"index")}]]),Et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rt});const At={class:"z-top absolute-center page-index"},$t=S({setup:e=>(L((()=>{ct(!0)})),(e,t)=>(x(),_("div",At)))});var Bt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$t});const qt=S({name:"Error404"}),Ut={class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},Gt=k("div",{style:{"font-size":"30vh"}},"404",-1),Ft=k("div",{class:"text-h2",style:{opacity:"0.4"}},"噢. 这儿什么也没有...",-1);var Wt=It(qt,[["render",function(e,t,s,a,r,o){return x(),_("div",Ut,[k("div",null,[Gt,Ft,O(pe,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/onemap",label:"返回主页","no-caps":""})])])}]]),Ht=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Wt});const Yt=e=>(D("data-v-bf93536a"),e=e(),N(),e),Jt={class:"q-pa-md page-login z-top"},Kt={class:"login-container col row"},Qt=Yt((()=>k("div",{class:"text-h4 q-my-sm"},"登录",-1))),Xt=Yt((()=>k("div",{class:"oath flex"},[k("div",{class:"title full-width text-center q-pt-md"},"社交帐号登录"),k("div",{class:"q-gutter-md full-width text-center q-pt-sm flex justify-center"},[k("svg",{t:"1615200042776",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5886",width:"200",height:"200"},[k("path",{d:"M579.867 511.932c-11.67 0-23.344 10.837-23.344 24.178 0 10.839 11.668 21.678 23.344 21.678 17.514 0 30.020-10.839 30.020-21.678 0-13.34-12.505-24.178-30.020-24.178v0zM503.154 399.36c18.345 0 30.020-11.67 30.020-29.185 0-18.345-11.675-29.183-30.020-29.183-17.51 0-34.188 10.839-34.188 29.183-0.001 17.517 16.678 29.185 34.188 29.185v0zM512.326 0.56c-282.655 0-511.788 229.133-511.788 511.788 0 282.653 229.133 511.786 511.788 511.786 282.653 0 511.786-229.133 511.786-511.786 0.001-282.655-229.132-511.788-511.786-511.788v0zM415.602 642.009c-30.855 0-53.369-4.999-82.553-13.341l-84.218 42.53 24.186-71.715c-59.204-41.689-94.228-94.221-94.228-158.428 0-113.403 106.733-200.123 236.814-200.123 115.069 0 217.633 68.377 237.644 165.106-8.338-1.671-15.844-2.502-22.514-2.502-113.403 0-200.954 85.049-200.954 187.613 0 17.508 2.502 33.351 6.671 50.030-6.671 0.829-14.178 0.829-20.849 0.829v0zM763.314 723.724l16.674 60.041-63.371-35.854c-24.18 4.999-47.529 12.505-71.709 12.505-111.737 0-200.123-76.711-200.123-171.769 0-95.058 88.388-171.771 200.123-171.771 105.895 0 200.954 76.713 200.954 171.771 0 53.362-35.854 100.891-82.548 135.078v0zM338.053 340.992c-17.51 0-35.854 10.839-35.854 29.183 0 17.516 18.343 29.19 35.854 29.19 16.679 0 30.020-11.675 30.020-29.19 0-18.343-13.341-29.183-30.020-29.183v0zM710.783 511.932c-12.51 0-23.349 10.837-23.349 24.178 0 10.839 10.839 21.678 23.349 21.678 16.674 0 29.183-10.839 29.183-21.678 0-13.34-12.509-24.178-29.183-24.178v0zM710.783 511.932z","p-id":"5887","data-spm-anchor-id":"a313x.7781069.0.i22",class:"",fill:"#2dc100"})]),k("svg",{t:"1615199447339",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2522",width:"200",height:"200"},[k("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m210.385455 641.396364c-7.447273 9.309091-26.996364-1.861818-41.89091-32.581819-3.723636 13.963636-13.032727 36.305455-34.443636 64.232728 35.374545 8.378182 44.683636 42.821818 33.512727 61.44-8.378182 13.032727-26.996364 24.203636-59.578181 24.203636-58.647273 0-83.781818-15.825455-95.883637-26.996364-1.861818-2.792727-5.585455-3.723636-10.24-3.723636-4.654545 0-7.447273 0.930909-10.24 3.723636-11.170909 11.170909-37.236364 26.996364-95.883636 26.996364-32.581818 0-52.130909-11.170909-59.578182-24.203636-12.101818-18.618182-1.861818-53.061818 33.512727-61.44-20.48-27.927273-29.789091-50.269091-34.443636-64.232728-13.963636 30.72-34.443636 42.821818-41.890909 32.581819-5.585455-8.378182-8.378182-26.065455-7.447273-38.167273 3.723636-46.545455 34.443636-85.643636 53.061818-106.123636-2.792727-5.585455-8.378182-40.029091 14.894546-63.301819v-1.861818c0-92.16 65.163636-158.254545 148.014545-158.254545 81.92 0 148.014545 66.094545 148.014546 158.254545v1.861818c23.272727 23.272727 17.687273 57.716364 14.894545 63.301819 17.687273 20.48 49.338182 59.578182 53.061818 106.123636 0.930909 12.101818-0.930909 29.789091-7.447272 38.167273z",fill:"#30A5DD","p-id":"2523"})]),k("svg",{t:"1615199464855",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3380",width:"200",height:"200"},[k("path",{d:"M448.698182 482.210909c-96.814545 4.654545-175.010909 56.785455-175.010909 121.949091s78.196364 114.501818 175.010909 109.847273S623.709091 647.912727 623.709091 582.749091c-0.930909-64.232727-79.127273-105.192727-175.010909-100.538182z m65.163636 164.770909c-29.789091 39.098182-88.436364 57.716364-145.221818 26.065455-26.996364-14.894545-26.065455-43.752727-26.065455-43.752728s-11.170909-92.16 85.643637-103.330909c97.745455-12.101818 115.432727 81.92 85.643636 121.018182z",fill:"#EA5D5C","p-id":"3381"}),k("path",{d:"M448.698182 584.610909c-6.516364 4.654545-7.447273 13.032727-3.723637 18.618182 2.792727 5.585455 11.170909 6.516364 16.756364 1.861818 5.585455-4.654545 8.378182-13.032727 4.654546-18.618182-2.792727-5.585455-10.24-6.516364-17.687273-1.861818zM403.083636 597.643636c-18.618182 1.861818-30.72 17.687273-30.72 33.512728 0 14.894545 14.894545 26.065455 32.581819 24.203636 17.687273-1.861818 32.581818-15.825455 32.581818-31.650909s-13.963636-27.927273-34.443637-26.065455z",fill:"#EA5D5C","p-id":"3382"}),k("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m197.352727 626.501818C669.323636 712.145455 538.065455 754.036364 441.250909 746.589091c-92.16-7.447273-211.316364-38.167273-223.418182-151.738182 0 0-6.516364-51.2 42.821818-117.294545 0 0 70.749091-99.607273 152.669091-128.465455 82.850909-27.927273 92.16 19.549091 92.16 48.407273-4.654545 24.203636-12.101818 38.167273 18.618182 28.858182 0 0 80.989091-38.167273 114.501818-4.654546 26.996364 26.996364 4.654545 65.163636 4.654546 65.163637s-11.170909 12.101818 12.101818 16.756363c21.410909 3.723636 94.021818 37.236364 53.992727 122.88z m-80.058182-236.450909c-8.378182 0-15.825455-7.447273-15.825454-15.825454 0-9.309091 7.447273-15.825455 15.825454-15.825455 0 0 99.607273-18.618182 87.505455 89.367273v1.861818c-0.930909 7.447273-7.447273 13.963636-15.825455 13.963636-9.309091 0-15.825455-7.447273-15.825454-15.825454 0-1.861818 15.825455-73.541818-55.854546-57.716364zM797.789091 493.381818c-2.792727 18.618182-12.101818 11.170909-22.341818 11.170909-13.032727 0-23.272727-16.756364-23.272728-29.789091 0-11.170909 4.654545-22.341818 4.654546-22.341818 0.930909-4.654545 12.101818-34.443636-7.447273-78.196363-35.374545-60.509091-106.123636-60.509091-114.501818-57.716364-8.378182 3.723636-21.410909 5.585455-21.410909 5.585454-13.032727 0-23.272727-10.24-23.272727-23.272727 0-11.170909 7.447273-19.549091 16.756363-22.341818 0 0 0 0.930909 0.930909 0.930909s1.861818 0.930909 1.861819 0.930909c10.24-1.861818 45.614545-4.654545 79.127272 3.723637 62.370909 14.894545 146.152727 83.781818 108.916364 211.316363z",fill:"#EA5D5C","p-id":"3383"})])])],-1))),Zt=Yt((()=>k("div",{class:"row justify-between q-pt-md text-grey-8"},[k("span",null,"忘记密码"),k("span",{class:"sign-up text-center cursor-pointer"}," 还没有账号？现在注册！ ")],-1)));var es=It(S({setup(e){he();const t=V(),s=C({username:"admin",password:"admin"}),a={username:[e=>e&&e.length>0||"请输入用户名"],password:[e=>e&&e.length>0||"请输入用户名"],rememberMe:[e=>!!e||"You need to accept the license and terms first"]},r=async()=>{ba.system.useAccountStore().login(s.value).then((()=>{t.replace(t.currentRoute.value.query.redirect||"/index")}))},o=()=>{s.value={username:"",password:""}};return(e,t)=>(x(),_("div",Jt,[k("div",Kt,[O(ge,{greedy:"",class:"form-login",onSubmit:r,onReset:o},{default:T((()=>[Qt,O(ve,{modelValue:s.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.username=e),outlined:"",label:"用户名","lazy-rules":"",rules:a.username},{prepend:T((()=>[O(fe,{class:"icon",name:"perm_identity"})])),_:1},8,["modelValue","rules"]),O(ve,{modelValue:s.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.password=e),outlined:"",label:"密码","lazy-rules":"",type:"password",rules:a.password},{prepend:T((()=>[O(fe,{class:"icon",name:"lock"})])),_:1},8,["modelValue","rules"]),k("div",null,[O(pe,{class:"btn-submit full-width no-outline text-h6",color:"primary",label:"登录",type:"submit"})]),Xt,Zt])),_:1})])]))}}),[["__scopeId","data-v-bf93536a"]]),ts=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:es});var ss=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:{}});const as=S({setup(e){const t=z({sortBy:"desc",descending:!1,rowsPerPage:10}),s=C([{id:"time",label:"时间",field:"time",align:"center"},{id:"message",label:"信息",field:"message",align:"center"},{id:"url",label:"触发页面",field:"url",align:"center"},{id:"more",label:"查看详情",align:"center"}]),a=M((()=>ba.system.useLogStore().log));return(e,r)=>(x(),j(we,{class:"log-table-list",rows:R(a),columns:s.value,pagination:R(t)},{body:T((e=>[O(be,{props:e},{default:T((()=>[O(ye,{key:"time",class:"text-center"},{default:T((()=>[I(P(e.row.time),1)])),_:2},1024),O(ye,{key:"message",class:"text-center"},{default:T((()=>[I(P(e.row.message),1)])),_:2},1024),O(ye,{key:"url",class:"text-center"},{default:T((()=>[I(P(e.row.meta.url),1)])),_:2},1024),O(ye,{key:"more",class:"text-center"},{default:T((()=>[O(pe,{icon:"more",rounded:"",onClick:t=>(e.row,void me.create({type:"info",caption:"日志详情",message:"完整的日志内容已经打印到控制台"}))},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"]))}}),rs=k("div",{class:"text-h6"},"日志列表",-1),os=I("关闭"),ns=S({setup(e){const t=M((()=>ba.system.useLogStore().length)),s=M((()=>ba.system.useLogStore().lengthError)),a=C(!1),r=M((()=>0===t.value?"没有日志或异常":`${t.value} 条日志${s.value>0?` | 包含 ${s.value} 个异常`:""}`)),o=()=>{a.value=!0};return(e,t)=>(x(),_(A,null,[O(pe,{icon:"adjust",size:"md",flat:"",round:"",onClick:o},{default:T((()=>[O(xe,null,{default:T((()=>[I(P(R(r)),1)])),_:1})])),_:1}),O(Oe,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e)},{default:T((()=>[O(_e,{style:{width:"1440px","max-width":"960px"}},{default:T((()=>[O(Se,{class:"row items-center q-pb-none"},{default:T((()=>[rs,O(Le),E((x(),j(pe,{icon:"close",flat:"",round:"",dense:""},{default:T((()=>[O(xe,null,{default:T((()=>[os])),_:1})])),_:1})),[[ke]])])),_:1}),O(Se,{class:"theme-card"},{default:T((()=>[O(as)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64))}}),ls=S({setup(e){const t=M((()=>ba.system.useFullscreenStore().active)),s=()=>{ba.system.useFullscreenStore().toggle()};return(e,a)=>(x(),j(pe,{icon:R(t)?"fullscreen_exit":"fullscreen",size:"md",flat:"",round:"",onClick:s},{default:T((()=>[O(xe,null,{default:T((()=>[I(P(R(t)?"退出全屏":"全屏"),1)])),_:1})])),_:1},8,["icon"]))}});const is=I("已激活"),cs=I("使用"),us=S({setup(e){const t=C([{id:"title",label:"名称",field:"title",align:"center"},{id:"preview",label:"预览",field:"preview",align:"center"},{id:"handler",label:"操作",align:"center"}]),s=M((()=>ba.system.useThemeStore().list)),a=M((()=>ba.system.useThemeStore().activeName));return(e,r)=>(x(),j(we,{class:"theme-table-list",rows:R(s),"hide-header":"","hide-pagination":"",columns:t.value},{body:T((e=>[O(be,{props:e},{default:T((()=>[O(ye,{key:"title"},{default:T((()=>[I(P(e.row.title),1)])),_:2},1024),O(ye,{key:"preview"},{default:T((()=>[I(P(e.row.preview),1)])),_:2},1024),O(ye,{key:"handler"},{default:T((()=>[R(a)===e.row.name?(x(),j(pe,{key:0,class:"active",icon:"done",rounded:"",outline:""},{default:T((()=>[is])),_:1})):(x(),j(pe,{key:1,rounded:"",outline:"",onClick:t=>{return s=e.row.name,void ba.system.useThemeStore().set(s);var s}},{default:T((()=>[cs])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"]))}}),ds=I("主题"),ms=k("div",{class:"text-h6"},"主题",-1),ps=I("关闭"),hs=S({setup(e){const t=C(!1);return(e,s)=>(x(),_(A,null,[O(pe,{icon:"style",size:"md",flat:"",round:"",onClick:s[0]||(s[0]=e=>t.value=!0)},{default:T((()=>[O(xe,null,{default:T((()=>[ds])),_:1})])),_:1}),O(Oe,{modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=e=>t.value=e)},{default:T((()=>[O(_e,{style:{width:"650px"}},{default:T((()=>[O(Se,{class:"row items-center q-pb-none"},{default:T((()=>[ms,O(Le),E((x(),j(pe,{icon:"close",flat:"",round:"",dense:""},{default:T((()=>[O(xe,null,{default:T((()=>[ps])),_:1})])),_:1})),[[ke]])])),_:1}),O(Se,{class:"theme-card"},{default:T((()=>[O(us)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64))}}),gs=I("注销"),vs=S({setup(e){const t=ba.system.useUserStore(),s=We(),a=()=>{ba.system.useAccountStore().logout({confirm:!0}).then((e=>{if(e){ct(!1),t={leftPanel:!1},ba.system.useLayoutStore(ya).toggleGlobalLayout(t),ut({featureInfo:!1,layerManager:!1}),ba.viewer.useRenderStore(ya).removeAllRenderData();const e={position:[105,30,21634101],heading:360,pitch:-90,roll:0};(null==s?void 0:s.viewer)&&He(null==s?void 0:s.viewer,e,{duration:3})}var t}))};return(e,s)=>{var r;return x(),j(pe,{dense:"",rounded:"","no-caps":"",size:"md",class:"q-mr-sm","auto-close":"",icon:"person",label:null==(r=R(t).info)?void 0:r.username},{default:T((()=>[O(ze,null,{default:T((()=>[O(Ve,{dense:""},{default:T((()=>[E((x(),j(Ce,{clickable:"",dense:"",onClick:a},{default:T((()=>[O(Te,{avatar:""},{default:T((()=>[O(De,{icon:"logout"})])),_:1}),O(Te,null,{default:T((()=>[O(Ne,null,{default:T((()=>[gs])),_:1})])),_:1})])),_:1})),[[ke]])])),_:1})])),_:1})])),_:1},8,["label"])}}}),fs=I("简体中文"),ys=I("English"),bs=S({setup(e){const{locale:t}=$(),s=C(!1),a=e=>{t.value=e,Ze("locale",e)};return(e,t)=>(x(),j(Me,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),dense:"",color:"#fff","fab-mini":"",size:"md","dropdown-icon":"language",flat:""},{default:T((()=>[O(Ve,null,{default:T((()=>[E((x(),j(Ce,{clickable:"",onClick:t[0]||(t[0]=e=>a("zh-CN"))},{default:T((()=>[O(Te,null,{default:T((()=>[O(Ne,null,{default:T((()=>[fs])),_:1})])),_:1})])),_:1})),[[ke]]),E((x(),j(Ce,{clickable:"",onClick:t[1]||(t[1]=e=>a("en-US"))},{default:T((()=>[O(Te,null,{default:T((()=>[O(Ne,null,{default:T((()=>[ys])),_:1})])),_:1})])),_:1})),[[ke]])])),_:1})])),_:1},8,["modelValue"]))}}),ws={class:"left"},xs={class:"content"},_s=k("div",{size:"60px",class:"logo-img float"},[k("img",{src:"https://zouyaoji.top/vue-cesium/favicon.png"})],-1),Ss={class:"title text-h4 float"},Ls={class:"nav float"},ks={class:"right q-ml-sm q-mr-sm"},Os={key:0,class:"content"},Vs=S({setup(e){const t=C(!1),s=M((()=>"VueCesium Demo")),a=M((()=>{const e=ba.system.useMenuStore().header;return e.length?e[0].children:[]})),r=M((()=>!1));return(e,o)=>(x(),_("div",{class:"main-header",style:U({opacity:t.value?.5:1})},[k("div",ws,[k("div",xs,[_s,k("div",Ss,[k("div",null,P(R(s)),1)]),k("div",Ls,[O(je,null,{default:T((()=>[(x(!0),_(A,null,B(R(a),((t,s)=>(x(),j(Ie,{key:s,to:t.path,exact:"",label:e.$t(t.title),"active-class":"menu-active"},null,8,["to","label"])))),128))])),_:1})])])]),k("div",ks,[R(a).length?(x(),_("div",Os,[R(r)?(x(),j(ns,{key:0})):q("",!0),O(ls),O(hs),O(bs),O(vs)])):q("",!0)])],4))}}),Cs={key:0,class:"text-weight-bold"},Ts={class:"content"},Ds=S({props:{title:{type:String,default:""},titleClass:{type:String,default:""},closeTip:{type:String,default:"关闭"},showCloseBtn:{type:Boolean,default:!0},separatorOpts:{type:Object,default:()=>({show:!0,dark:!0,color:"white",size:"1px"})}},emits:["close"],setup(e,{emit:t}){const s=e=>{t("close",e)};return(t,a)=>(x(),j(_e,{class:"common-panel"},{default:T((()=>[O(Pe,{class:F(["header",e.titleClass])},{default:T((()=>[""!==e.title?(x(),_("div",Cs,P(e.title),1)):q("",!0),G(t.$slots,"header-left"),O(Le),G(t.$slots,"header-right"),e.showCloseBtn?E((x(),j(pe,{key:1,dense:"",flat:"",icon:"close",onClick:s},{default:T((()=>[O(xe,null,{default:T((()=>[I(P(e.closeTip),1)])),_:1})])),_:1})),[[ke]]):q("",!0)])),_:3},8,["class"]),e.separatorOpts.show?(x(),j(Re,W(H({key:0},e.separatorOpts)),null,16)):q("",!0),k("div",Ts,[G(t.$slots,"default")])])),_:3}))}});var Ns=S({name:"DragWrapper",props:{restriction:{type:[String,Object,Function],default:"parent"}},setup(e,t){const s=C(null),a=Y(),r=e=>{const t=e.target,s=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+s+"px, "+a+"px)",t.setAttribute("data-x",s),t.setAttribute("data-y",a)},o=()=>{const e=s.value;J(e).reflow({name:"drag",axis:"xy"})};return L((()=>{const t=s.value;J(t).draggable({ignoreFrom:"button, .ignore-drag",allowFrom:".drag-handle",inertia:!0,onmove:r,restrict:{restriction:e.restriction,endOnly:!0,elementRect:{left:0,right:1,top:0,bottom:1}}}),addEventListener("resize",o,!1)})),K((()=>{const e=s.value;J.isSet(e)&&J(e).unset(),removeEventListener("resize",o,!1)})),Object.assign(null==a?void 0:a.proxy,{resizeListener:o}),()=>Q("div",{ref:s,class:"drag-wrapper absolute"},Ye(t.slots.default))}});const zs={class:"text-subtitle2"},Ms={class:"q-gutter-sm"},js={class:"text-subtitle2"},Is={class:"q-gutter-sm"},Ps={class:"text-subtitle2"},Rs={class:"q-gutter-sm"},Es=S({setup(e){const t=C(null),s=ba.system.useLayoutStore(),{global:a,index:r}=X(s),{rasterLayers:o,baseLayers:n,vectorLayers:l}=ba.viewer.useLayerStore();Z(r,(e=>{ee((()=>{var e,s;t.value&&(null==(s=(e=t.value).resizeListener)||s.call(e))}))}),{deep:!0});const i=M((()=>({rasterLayers:o,baseLayers:n,vectorLayers:l}))),c=M((()=>{var e,t;return null==(t=null==(e=i.value.baseLayers.filter((e=>e.show)))?void 0:e[0])?void 0:t.name})),u=(e,t)=>{i.value.baseLayers.forEach((t=>{t.name===e?it(t.name,!0):it(t.name,!1)}))},d=(e,t)=>{it(e.name,t)},m=()=>{s.toggleGlobalLayout({layerManager:!a.value.layerManager})};return(e,s)=>(x(),_("div",{class:F(["layer-manager",R(r).workBench?"":"full-srceen"])},[O(R(Ns),{ref_key:"dragWrapperRef",ref:t},{default:T((()=>[E(O(Ds,{class:"layer-manager-panel",title:e.$t("message.panel.layerManager"),"title-class":"drag-handle",onClose:m},{default:T((()=>[O(Se,{class:"q-pt-sm"},{default:T((()=>[k("div",zs,P(e.$t("message.baseLayer")),1),k("div",Ms,[(x(!0),_(A,null,B(R(i).baseLayers,((e,t)=>(x(),j(Ee,{key:t,modelValue:R(c),"onUpdate:modelValue":[s[0]||(s[0]=e=>se(c)?c.value=e:null),u],val:e.name,label:e.text},null,8,["modelValue","val","label"])))),128))])])),_:1}),O(Re,{inset:""}),O(Se,{class:"q-pt-sm"},{default:T((()=>[k("div",js,P(e.$t("message.rasterLayer")),1),k("div",Is,[(x(!0),_(A,null,B(R(i).rasterLayers,((e,t)=>(x(),j(Ae,{key:t,modelValue:e.show,"onUpdate:modelValue":[t=>e.show=t,t=>d(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1}),O(Re,{inset:""}),O(Se,{class:"q-pt-sm"},{default:T((()=>[k("div",Ps,P(e.$t("message.vectorLayer")),1),k("div",Rs,[(x(!0),_(A,null,B(R(i).vectorLayers,((e,t)=>(x(),j(Ae,{key:t,modelValue:e.props.show,"onUpdate:modelValue":[t=>e.props.show=t,t=>d(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1})])),_:1},8,["title"]),[[te,R(a).layerManager]])])),_:1},512)],2))}}),As={class:"main-interaction"},$s={class:"layer-manager-wrapper"},Bs={key:0,class:"layer-switch cursor-pointer"},qs=S({setup(e){const t=M((()=>{const e=ba.system.useMenuStore().header;return e.length?e[0].children:[]})),s=()=>{ut({layerManager:!ba.system.useLayoutStore().global.layerManager})};return(e,a)=>(x(),_("div",As,[k("div",$s,[R(t).length?(x(),_("div",Bs,[O(pe,{dense:"",round:"",size:"10px",style:{background:"#fff",color:"#3f4854"},onClick:s},{default:T((()=>[O(fe,{name:"layers"})])),_:1})])):q("",!0),O(Es)])]))}}),Us={class:"vc-drawtip vc-tooltip--style"},Gs=S({emits:["viewerReady","cesiumReady","leftClick","destroyed"],setup(e,{emit:t}){const s={"en-US":Ke,"zh-CN":Qe},{locale:a}=$(),r=M((()=>s[a.value]));C({position:{lng:105,lat:31,height:21634101}});const{registerTimeout:o}=Je(),n=C(null),l=[0,75],i=C({outerOptions:{icon:"svguse:#vc-icons-compass-outer"},duration:5}),c=ba.viewer.useOverlayStore().mouseOverNameOpts;ba.viewer.useRenderStore().selectedRenderData;const u=M((()=>[...ba.viewer.useLayerStore().baseLayers,...ba.viewer.useLayerStore().rasterLayers])),d=M((()=>ba.viewer.useLayerStore().vectorLayers)),m=e=>{t("viewerReady",e),ut({header:!0}),o((()=>{ut({content:!0})}),500)},p=e=>{t("cesiumReady",e)};return(e,t)=>{const s=ae("vc-navigation"),a=ae("vc-layer-imagery"),o=ae("vc-overlay-html"),h=ae("vc-viewer"),g=ae("vc-config-provider");return x(),j(g,{locale:R(r)},{default:T((()=>[O(h,{ref_key:"viewerRef",ref:n,class:"main-viewer",onReady:m,onCesiumReady:p},{default:T((()=>[O(s,{offset:l,"compass-opts":i.value},null,8,["compass-opts"]),(x(!0),_(A,null,B(R(u),((e,t)=>(x(),j(a,{key:"layer"+t,alpha:e.alpha,brightness:e.brightness,contrast:e.contrast,"sort-order":e.sortOrder,show:e.show},{default:T((()=>[(x(),j(re(e.component),W(oe(e.props)),null,16))])),_:2},1032,["alpha","brightness","contrast","sort-order","show"])))),128)),(x(!0),_(A,null,B(R(d),((e,t)=>(x(),_(A,{key:"vector"+t},["VcTerrainProviderCesium"!==e.component||e.props.show?(x(),j(re(e.component),W(H({key:0},e.props)),null,16)):q("",!0)],64)))),128)),R(c).show?(x(),j(o,{key:0,position:R(c).position,"pixel-offset":R(c).pixelOffset},{default:T((()=>[k("div",Us,P(R(c).text),1)])),_:1},8,["position","pixel-offset"])):q("",!0),G(e.$slots,"default")])),_:3},512)])),_:3},8,["locale"])}}}),Fs={elevated:"",reveal:"",class:"absolute text-h4 text-center"},Ws={key:0,class:"content"},Hs=S({setup(e){const t=X(ba.system.useLayoutStore()).global,{active:s}=X(ba.system.useGrayStore());return L((()=>{ba.system.useAccountStore().load(),ba.system.useFullscreenStore().listen(),window.onunhandledrejection=e=>{ba.system.useLogStore(ya).push({message:u.exports.get(e,"reason.message","Unknown error"),type:"danger",meta:{error:u.exports.get(e,"reason"),trace:u.exports.get(e,"reason.stack")}})},window.onerror=(e,t,s,a,r)=>{ba.system.useLogStore(ya).push({message:u.exports.get(r,"message","Unknown error"),type:"danger",meta:{error:r,trace:u.exports.get(r,"stack"),source:`${t}@${s}:${a}`,event:e}})}})),(e,a)=>{const r=ae("router-view");return x(),j($e,{view:"lhh Lpr lFf",class:F(["main-layout",{"gray-mode":R(s)}])},{default:T((()=>[O(qe,{class:"no-padding"},{default:T((()=>[O(Be,{class:"interaction-root"},{default:T((()=>[O(Gs,null,{default:T((()=>[E(k("header",Fs,[O(Vs)],512),[[te,R(t).header]]),R(t).content?(x(),_("div",Ws,[O(qs),O(r)])):q("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}});var Ys=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Hs});const Js=pt([]);pt([]);var Ks={theme:{list:[{title:"经典",name:"classic",preview:"images/theme/classic/preview@2x.png"},{title:"Element",name:"element",preview:"images/theme/element/preview@2x.png"}]},menu:{asideCollapse:!1,asideTransition:!0},hotkey:{search:{open:"s",close:"esc"}},transition:{active:!0}};const Qs=w("menu",{state:()=>({header:[],aside:[],asideCollapse:Ks.menu.asideCollapse,asideTransition:Ks.menu.asideTransition,moduleHeader:[]}),getters:{},actions:{async asideCollapseSet(e){this.asideCollapse=e;Mt().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideCollapseToggle(){this.asideCollapse=!this.asideCollapse;Mt().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideTransitionSet(e){this.asideTransition=e;Mt().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideTransitionToggle(){this.asideTransition=!this.asideTransition;Mt().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideLoad(){Mt().get({dbName:"sys",path:"menu",defaultValue:String(Ks.menu),user:!0})},headerSet(e){this.header=e},asideSet(e){this.aside=e},clear(){this.header=[],this.aside=[]},moduleHeaderSet(e){this.moduleHeader=e}}}),Xs=w("search",{state:()=>({active:!1,hotkey:{open:Ks.hotkey.search.open,close:Ks.hotkey.search.close},pool:[]}),actions:{toggle(){this.active=!this.active},set(e){this.active=e},init(e){const t=[],s=function(e,a=[]){e.forEach((e=>{e.children?s(e.children,[...a,e.title]):t.push(i(l({},e),{fullTitle:[...a,e.title].join(" / ")}))}))};s(e),this.pool=t}}}),Zs=[...Js];const ea={"../../pages/demo/Index.vue":Et,"../../pages/index/Index.vue":Bt,"../../pages/system/Error404.vue":Ht,"../../pages/system/Login.vue":ts,"../../pages/index/work-bench/Index.vue":ss};function ta(e,t){return null==e&&(e={children:[]}),t.forEach((t=>{let s=e;if(20!==t.type&&(null!=(a=t.component)&&""!==a)){let a=null;a="MainLayout"===t.component?Hs:(e=>{const t=ea[`../../pages${e}/Index.vue`];if(t)return t.default;dt(`动态路由页面【${e}】加载失败。请检查页面文件是否存在。`)})(t.path);const r=e.children;s={path:t.path,name:t.name,hidden:t.hidden,component:a,meta:{title:t.title,auth:!0,cache:!0}},r.push(s)}var a;null!=t.children&&t.children.length>0&&(null==s.children&&(s.children=[]),ta(s,t.children))})),e.children}function sa(e,t){return null==e&&(e=[]),e.forEach((e=>{null!=e.permission&&""!==e.permission&&t.push(e.permission),null!=e.children&&e.children.length>0&&sa(e.children,t)})),t}function aa(e){null==e&&(e=[]);let t=[];return e.forEach((e=>{if(10!==e.type)return;let s,a;null!=e.children&&e.children.length>0&&(s=aa(e.children)),null!=e.icon&&""!==e.icon&&(a=e.icon),t.push({name:e.name,path:e.path,title:e.title,icon:a,children:s})})),0===t.length&&(t=void 0),t}const ra=w("permission",{state:()=>({routes:[],addRoutes:[],permissions:[],inited:!1}),getters:{},actions:{setRoutes({accessedRoutes:e,permissions:t}){this.addRoutes=e,this.routes=lt.concat(e),this.inited=!0,this.permissions=t},clear(){this.addRoutes=[],this.routes=[],this.inited=!1,this.permissions=[]},generateRoutes({menuTree:e}){return new Promise((t=>{const s=ta(null,e),a=sa(e,[]);this.setRoutes({accessedRoutes:s,permissions:a}),s.forEach((e=>{"layout"===e.name&&"/"===e.path&&(e.children=e.children.concat(nt[0].children)),Ct.addRoute(e)}));const r=pt(aa(e));Js.splice(0,Js.length),Js.push(...Zs),Js.push(...r);Qs().headerSet(Js);Xs().init(Js),t(!0)}))},async getAccessibleMenus({state:e,dispatch:t}){}}}),oa=w("gray",{state:()=>({active:!1}),getters:{},actions:{toggle(){this.active=!this.active},set(e){this.active=e}}});let na="";const la=w("theme",{state:()=>({list:u.exports.get(Ks,"theme.list",[]),activeName:u.exports.get(Ks,"theme.list[0].name","h2o")}),getters:{activeSetting:e=>e.list.find((t=>t.name===e.activeName))},actions:{dom(){const e=`theme-${na}`,t=`theme-${this.activeName}`;document.body.className.includes(e)?document.body.className=document.body.className.replace(e,t):document.body.className+=" "+t},async set(e){na=this.activeName,this.activeName=this.list.find((t=>t.name===e))?e:this.list[0].name,this.dom();Mt().set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})},async load(){na=this.activeName;const e=Mt(),t=e.get({dbName:"sys",path:"theme.activeName",defaultValue:this.list[0].name,user:!0});this.list.find((e=>e.name===t))?this.activeName=t:(this.activeName=this.list[0].name,e.set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})),this.dom()}}}),ia=w("transition",{state:()=>({active:Ks.transition.active}),actions:{async set(e){this.active=e;Mt().set({dbName:"sys",path:"transition.active",value:String(this.active),user:!0})},async load(){const e=Mt();this.active=e.get({dbName:"sys",path:"transition.active",defaultValue:String(Ks.transition.active),user:!0})}}}),ca=w("account",{state:()=>({}),getters:{},actions:{async login(e){const t=(await Vt.login(e)).data;Ze("token",t.token),Ze("uuid",t.id);jt().set(l({},t)),this.load()},logout:({confirm:e=!1}={})=>new Promise(((t,s)=>{async function a(){tt("token"),tt("uuid");jt().set({});ra().clear();Qs().clear(),Ct.push({name:"login"}),t(!0)}if(e){const e=oa();e.set(!0),Ue.create({title:"注销用户",message:"确定要注销当前用户吗？",cancel:!0}).onOk((()=>{e.set(!1),a()})).onCancel((()=>{e.set(!1),me.create({message:"取消注销操作"}),t(!1)}))}else a()})),async load(){jt().load();la().load();ia().load();Qs().asideLoad()}}}),ua=w("fullscreen",{state:()=>({active:!1}),getters:{},actions:{listen(){const e=this;ne.isEnabled&&ne.on("change",(()=>{ne.isFullscreen||(e.active=!1)}))},toggle(){ne.isFullscreen?(ne.exit(),this.active=!1):(ne.request(),this.active=!0)}}}),da=w("layout",{state:()=>({global:{header:!1,content:!1,footer:!1,layerManager:!1,navigation:!1,featureInfo:!1},index:{workBench:!1}}),getters:{},actions:{toggleGlobalLayout(e){Object.keys(e).forEach((t=>{u.exports.isBoolean(e[t])&&(this.global[t]=e[t])}))},toggleIndexPageLayout(e,t){Object.keys(t).forEach((s=>{u.exports.isBoolean(t[s])&&(e.index[s]=t[s])}))}}}),ma=w("log",{state:()=>({log:[]}),getters:{length:e=>e.log.length,lengthError:e=>e.log.filter((e=>"danger"===e.type)).length},actions:{push({message:e,type:t="info",meta:s}){this.log.push({message:e,type:t,time:le().format("YYYY-MM-DD HH:mm:ss"),meta:l({uuid:et("uuid"),token:et("token"),url:u.exports.get(window,"location.href","")},s)})},clean(){this.log=[]}}}),pa={useAccountStore:e=>ca(e),useDBStore:e=>Mt(e),useFullscreenStore:e=>ua(e),useGrayStore:e=>oa(e),useLayoutStore:e=>da(e),useLogStore:e=>ma(e),useMenuStore:e=>Qs(e),usePermissionStore:e=>ra(e),useSearchStore:e=>Xs(e),useThemeStore:e=>la(e),useTransitionStore:e=>ia(e),useUserStore:e=>jt(e)},ha=w("layer",{state:()=>({baseLayers:[{name:"tianditu_img",text:"天地图影像",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"tianditu_vec",text:"天地图电子",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"baidu_img",text:"百度影像",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu",text:"百度电子",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_midnight",text:"百度地图_午夜蓝",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"midnight",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_dark",text:"百度地图_黑夜",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"dark",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_img",text:"高德影像",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"6",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_vec",text:"高德地图",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"7",scl:"2",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_img",text:"腾讯影像",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_vec",text:"腾讯电子",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_my",text:"腾讯电子_墨渊",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},styleId:"4",minimumLevel:0,maximumLevel:17}},{name:"osm",text:"OSM",component:"VcImageryProviderOsm",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1},{name:"arcgis",text:"ArcGIS",component:"VcImageryProviderArcgis",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1}],rasterLayers:[{name:"tianditu_cva",text:"天地图注记",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"cva_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"amap_label",text:"高德注记",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"8",ltype:"4",minimumLevel:0,maximumLevel:17}},{name:"amap_traffictile",text:"高德路况",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{url:"/traffictile?v=1.0&x={x}&y={y}&z={z}&t=1",minimumLevel:0,maximumLevel:17}},{name:"baidu_traffic",text:"百度路况",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"traffic",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}}],vectorLayers:[{name:"admin",text:"行政区划",component:"VcDatasourceGeojson",props:{strokeWidth:5,stroke:"#ffc107",fill:"transparent",show:!1,data:"./datas/china.json"}},{name:"terrain",text:"全球地形",component:"VcTerrainProviderCesium",props:{show:!1}}]}),getters:{},actions:{toggle({names:e,show:t}){const s=[...this.baseLayers,...this.rasterLayers,...this.vectorLayers];(e=Array.isArray(e)?e:[e]).forEach((e=>{var a;const r=u.exports.find(s,(t=>t.name===e));!u.exports.isUndefined(null==r?void 0:r.show)&&(r.show=t),!u.exports.isUndefined(null==(a=null==r?void 0:r.props)?void 0:a.show)&&(r.props.show=t)}))},loadDefaultLayers(e){const t=[...this.baseLayers,...this.rasterLayers,...this.vectorLayers].map((e=>e.name));this.toggle({names:t,show:!1});this.toggle({names:["tianditu_img","admin"],show:!0})}}}),ga=w("overlay",{state:()=>({mouseOverNameOpts:{position:[117.186419,45.66446,20],show:!1,text:"",pixelOffset:[0,0]}}),getters:{},actions:{setMouseOverlayLabel({position:e,show:t,text:s,pixelOffset:a}){this.mouseOverNameOpts.position=e,this.mouseOverNameOpts.show=t,this.mouseOverNameOpts.text=s,this.mouseOverNameOpts.pixelOffset=a}}}),va=w("render",{state:()=>({renderDatas:[],selectedRenderData:{model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]}}),getters:{},actions:{addRenderDatas(e){(e=Array.isArray(e)?e:[e]).forEach((e=>{-1===u.exports.findIndex(this.renderDatas,(t=>t.id===e.id))?this.renderDatas.push(e):mt(`添加渲染数据集失败，原因：id 为【${e.id} 】的数据已经存在。`,"渲染数据模型：",e)}))},removeRenderDataById(e){u.exports.remove(this.renderDatas,(t=>t.id===e))},removeRenderDataByType(e){u.exports.remove(this.renderDatas,(t=>t.type===e))},removeRenderDataByPage(e){u.exports.remove(this.renderDatas,(t=>t.page===e))},removeAllRenderData(){this.renderDatas.length=0},setSelectedRenderData(e){this.selectedRenderData.model=e.model,this.selectedRenderData.renderingType=e.renderingType,this.selectedRenderData.restoreHandler=e.restoreHandler,this.selectedRenderData.feature=e.feature,this.selectedRenderData.featureInfoListItems=e.featureInfoListItems},getRenderDataByDatasetId(e){return u.exports.find(this.renderDatas,(t=>t.id===e))}}}),fa={useLayerStore:e=>ha(e),useOverlayStore:e=>ga(e),useRenderStore:e=>va(e)},ya=ie(),ba={system:l({},pa),viewer:l({},fa)};var wa={"zh-CN":{message:{header:{index:"首页",demo:"示例"},panel:{layerManager:"图层管理"},baseLayer:"底图图层",rasterLayer:"栅格图层",vectorLayer:"矢量图层"}},"en-US":{message:{header:{index:"Index",demo:"Demo"},panel:{layerManager:"LayerManager"},baseLayer:"BaseLayer",rasterLayer:"RasterLayer",vectorLayer:"VectorLayer"}}};var xa=It({},[["render",function(e,t){const s=ae("router-view");return x(),j(s)}]]);const _a=ce({legacy:!1,locale:et("locale"),fallbackLocale:"zh-CN",globalInjection:!0,messages:wa}),Sa=ue(xa);Sa.use(Ge,{plugins:{Notify:me,Dialog:Ue,LocalStorage:de},lang:Fe}),Sa.use(_a),Sa.use(Xe),Sa.use(ya),Sa.use(Ct),Sa.mount("#app");
