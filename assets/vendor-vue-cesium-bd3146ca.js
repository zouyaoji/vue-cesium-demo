import{c5 as e,c6 as t,c7 as i,c8 as n,bx as o,bR as r,c2 as a,bM as s,bS as l,bA as c,c9 as u,ca as d,cb as p,cc as m,cd as v,bD as h,bT as g,bY as f,ce as y,bB as b,by as C,cf as w,bC as O,bX as _,bK as x,bP as S,bQ as E,bO as P,bU as T,bZ as I,cg as M,bN as j,ch as L,ci as A,cj as D,X as k,aU as R,bF as B,ck as N,cl as V,cm as z,cn as F}from"./vendor-28303a21.js";import{i as H,a as U,f as W,c as G,l as $,g as Z,b as q,d as Y,e as X,h as Q,r as J,j as K,u as ee}from"./vendor-lodash-ad31c097.js";import{r as te,i as ie}from"./vendor-echarts-183e7869.js";const ne="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,oe=ne?Symbol("VueCesium"):"VueCesium",re=ne?Symbol("_vc_f_"):"_vc_f_",ae=Symbol();function se(e){if(H(e)||U(e))return!0;if(e instanceof Element)return!1;return 0===Object.keys(e).length}const le=e;function ce(e,t){if("object"!=typeof e||null===e)return!1;let i=Object.getPrototypeOf(e);for(;;){if(null===i)return!1;if(i===(null==t?void 0:t.prototype))return!0;i=Object.getPrototypeOf(i)}}function ue(e,t=!1){if(e&&e.constructor){if(t){const t=function(e){let t;const i=Object.keys(Cesium);for(let n=0;n<i.length;n++){const o=i[n];if(ce(e,Cesium[o])){t=o;break}}return t}(e);if(t)return t}return e.constructor.name}return typeof e}function de(e,t){return null!=e?e:t}function pe(e,t=[]){const o={};return Object.keys(e).forEach((r=>{if(-1===t.indexOf(r)){const t=e[r];o[r]=i(t)?void 0:n(t)?i(t.default)?t.default():t.default:t}})),o}const me=(e,t,i=[])=>{for(const n in t)e[n]||-1!==i.indexOf(n)||(e[n]=t[n])};function ve(e={},i={}){let n;for(n in i)e[n]=t(e[n])?ve(e[n],i[n]):e[n]=i[n];return e}function he(e,t,i){const{JulianDate:n,Color:o}=Cesium,r=n.now();return e?("function"==typeof e.getValue&&(e=e.getValue(i||r)),"string"==typeof e?o.fromCssColorString(e):"function"==typeof e?he(e(i),t):e):t}function ge(e,t,n){const{JulianDate:o,Property:r}=Cesium,a=o.now();if(!e)return e;if(t){if(e instanceof t)return e;if(e instanceof r&&e._value instanceof t)return e._value}return i(e.getValue)?e.getValue(n||a):e}const fe=e=>Object.keys(e),ye=o();function be(e,t=void 0){const i=r()?c(ae,ye):ye;return e?s((()=>{var n,o;return null!=(o=null==(n=i.value)?void 0:n[e])?o:t})):i}const Ce=(e,t,i=!1)=>{var n;const o=!!r(),c=o?be():void 0;if(!(null!=(n=null==t?void 0:t.provide)?n:o?a:void 0))return;const u=s((()=>{const t=l(e);return(null==c?void 0:c.value)?we(c.value,t):t}));return(null==t?void 0:t.provide)?t.provide(ae,u):a(ae,u),!i&&ye.value||(ye.value=u.value),u},we=(e,t)=>{var i;const n=[...new Set([...fe(e),...fe(t)])],o={};for(const r of n)o[r]=null!=(i=t[r])?i:e[r];return o};function Oe(e){var t,i,n,o;return{log:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ${null==(t=null==e?void 0:e.proxy)?void 0:t.$options.name}`),warn:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] WARN ${null==(i=null==e?void 0:e.proxy)?void 0:i.$options.name}`),error:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] ERR ${null==(n=null==e?void 0:e.proxy)?void 0:n.$options.name}`),debug:((e="")=>function(...t){e&&(u(t[0])?t[0]=e.trim()+" "+t[0]:t=[e.trim(),...t])})(`[VueCesium] Debug ${null==(o=null==e?void 0:e.proxy)?void 0:o.$options.name}`),capsule:(e,t,i="primary")=>{},success:e=>{},warning:e=>{},danger:e=>{},primary:e=>{}}}Oe(void 0);const _e=Symbol("INSTALLED_KEY"),xe=Object.prototype.hasOwnProperty;function Se(...e){let t;return"object"!=typeof e[e.length-1]&&(t=e.pop()),e.slice(1).reduce(((e,i,n)=>function(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return void 0===i&&(i=!0),Object.getOwnPropertyNames(t).forEach((function(n){if(!i&&xe.call(e,n))return;const o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o)})),e}(e,i,t)),e[0])}function Ee(e,t){return null!==e.vnode.props&&void 0!==e.vnode.props[t]}function Pe(e,t){const i=e.vnode.props;if(null===i)return;const n=Object.keys(i);return i[n[W(n,(e=>e.includes(`on${d(t)}`)||e.includes(`on${d(G(t))}`)))]]}function Te(e){return e.value}function Ie(e){var t;const i=e.parent;return i.cesiumClass||"VcViewer"===(null==(t=i.proxy)?void 0:t.$options.name)?i:Ie(i)}let Me=!1;class je{constructor(e={}){this.options=e,this._definitionChanged=new Cesium.Event}get isConstant(){return!0}get definitionChanged(){return this._definitionChanged}getType(e){return null}getValue(e,t={}){return t}equals(e){return this===e}}class Le extends je{constructor(e){super(e);const{Event:t,defaultValue:i}=Cesium;Object.getOwnPropertyDescriptor(Le.prototype,"color")||Object.defineProperties(Le.prototype,{color:Cesium.createPropertyDescriptor("color")}),this._definitionChanged=new t,this._color=new Cesium.ConstantProperty(e.color),this._duration=i(e.duration,1e3),this.count=i(e.count,2),this.count<=0&&(this.count=1),this._gradient=i(e.gradient,.1),0===this._gradient&&(this._gradient=0),this._gradient>1&&(this._gradient=1),this._time=(new Date).getTime()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}get color(){return this._color}set color(e){const t=this._color;t!==e&&(this._color=new Cesium.ConstantProperty(e),this._definitionChanged.raiseEvent(this,"color",e,t))}get duration(){return this._duration}set duration(e){const t=this._duration;t!==e&&(this._duration=e,this._definitionChanged.raiseEvent(this,"duration",e,t))}get count(){return this._count}set count(e){const t=this._count;t!==e&&(this._count=e,this._definitionChanged.raiseEvent(this,"count",e,t))}getType(){return"VcCircleWave"}getValue(e,t){return Cesium.defined(t)||(t={}),t.color=Cesium.Property.getValueOrClonedDefault(this._color,e,Cesium.Color.YELLOW,t.color),t.time=((new Date).getTime()-this._time)%this.duration/this.duration,t.count=this.count,t.gradient=1+10*(1-this._gradient),t}equals(e){return this===e||e instanceof Le&&Cesium.Property.equals(this._color,e._color)}}class Ae extends je{constructor(e={}){var t,i,n,o,r,a,s,l,c,u;super(e);const{Color:d,Cartesian2:p,defined:m}=Cesium;this.image=null!=(t=e.image)?t:e.url,this.color=null!=(i=e.color)?i:new d(1,1,1,0),this.axisY=null!=(n=e.axisY)&&n,this.mixt=null!=(o=e.mixt)&&o,this.speed=null!=(r=e.speed)?r:10,this.duration=e.duration,this.repeat=null!=(a=e.repeat)?a:new p(1,1),this.image2=null!=(s=e.image2)?s:e.bgUrl,this.color2=null!=(c=null!=(l=e.color2)?l:e.bgColor)?c:new d(1,1,1,0),this.hasImage2=m(this.image2),this.globalAlpha=null==(u=e.globalAlpha)||u}getType(e){return"VcLineFlow"}getValue(e,t){const{Color:i,Cartesian2:n,defined:o}=Cesium;return!o(t)&&(t={}),t.image=this.image,t.color=he(this.color,new i(1,1,1,0),e),t.repeat=ge(this.repeat,n,e),t.axisY=this.axisY,t.mixt=this.mixt,t.speed=ge(this.speed,Number,e),this.duration?void 0===this._time&&(this._time=(new Date).getTime(),t.time=((new Date).getTime()-this._time)/(1e3*this.duration)):t.time=-1,t.hasImage2=this.hasImage2,t.image2=this.image2,t.color2=he(this.color2,new i(1,1,1,0),e),t.globalAlpha=this.globalAlpha,t}equals(e){return this===e||e instanceof Ae&&Cesium.Property.equals(this.color,e.color)&&Cesium.Property.equals(this.repeat,e.repeat)&&this.image===e.image&&this.axisY===e.axisY&&this.speed===e.speed&&this.hasImage2===e.hasImage2&&this.image2===e.image2&&this.image2===e.image2&&Cesium.Property.equals(this.color2,e.color2)}}function De(e,t=!1){const{Cartesian2:o,CallbackProperty:r}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof r)return e;if(n(e)&&p(e,"x")&&p(e,"y")){const t=e;return new o(t.x,t.y)}return m(e)?new o(e[0],e[1]):i(e)?new r(e,t):void 0}function ke(e,t,o=!1){const{CallbackProperty:r,Cartesian3:a,Ellipsoid:s,SampledPositionProperty:l,CompositePositionProperty:c,ConstantPositionProperty:u,TimeIntervalCollectionPositionProperty:d}=Cesium;if(e instanceof a||e instanceof r||e instanceof l||e instanceof c||e instanceof u||e instanceof d)return e;if(t=t||s.WGS84,n(e)){if(p(e,"x")&&p(e,"y")&&p(e,"z")){const t=e;return new a(t.x,t.y,t.z)}if(p(e,"lng")&&p(e,"lat")){const i=e;return a.fromDegrees(i.lng,i.lat,i.height||0,t)}}return m(e)?a.fromDegrees(e[0],e[1],e[2]||0,t):i(e)?new r(e,o):void 0}function Re(e,t,o=!1){const{CallbackProperty:r,Cartesian3:a,Ellipsoid:s}=Cesium;if(e instanceof r)return e;if(i(e))return new r(e,o);if(t=t||s.WGS84,m(e)){if(m(e[0])||n(e[0])){const i=[];return e.forEach((e=>{i.push(ke(e,t))})),i}return a.fromDegreesArrayHeights(e,t)}}function Be(e,t){const{CallbackProperty:n}=Cesium;if(e instanceof n)return e;if(i(e))return new n(e,t);if(m(e)){const t=[];return e.forEach((e=>{t.push(De(e))})),t}}function Ne(e,t=!1){const{CallbackProperty:o,Quaternion:r,VelocityOrientationProperty:a}=Cesium;if(e instanceof r||e instanceof o||e instanceof a)return e;if(n(e)&&p(e,"x")&&p(e,"y")){const t=e;return new r(t.x,t.y,t.z,t.w)}return m(e)?new r(e[0],e[1],e[2],e[3]):i(e)?new o(e,t):void 0}function Ve(e,t){e.forEach((e=>{e.positions=Re(e.positions,t),e.holes&&Ve(e.holes,t)}))}function ze(e,t,o=!1){var r;const{PolygonHierarchy:a,CallbackProperty:s}=Cesium;if(e instanceof a||e instanceof s)return e;if(i(e))return new s(e,o);if(m(e)&&e.length>=3){return new a(Re(e,t))}if(n(e)&&p(e,"positions")){const i=$.cloneDeep(e);return i.positions=Re(i.positions,t),(null==(r=i.holes)?void 0:r.length)&&Ve(i.holes,t),i}}function Fe(e,t=!1){const{NearFarScalar:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(n(e)&&p(e,"near")&&p(e,"far")){const t=e;return new o(t.near,t.nearValue||0,t.far,t.farValue||1)}return m(e)?new o(e[0],e[1],e[2],e[3]):i(e)?new r(e,t):void 0}function He(e,t=!1){const{Color:o,CallbackProperty:r,defaultValue:a}=Cesium;if(e instanceof o||e instanceof r)return e;if(u(e))return o.fromCssColorString(e);if(n(e)){if(p(e,"red")){const t=e;return o.fromBytes(a(t.red,255),a(t.green,255),a(t.blue,255),a(t.alpha,255))}if(p(e,"x")){const t=e;return new o(a(t.x,1),a(t.y,1),a(t.z,1),a(t.w,1))}}return m(e)?o.fromBytes(e[0],e[1],e[2],a(e[3],255)):i(e)?new r(e,t):void 0}function Ue(e){var t;const o=null==(t=null==this?void 0:this.proxy)?void 0:t.$options.name;if(o&&(-1!==o.indexOf("Graphics")||-1!==o.indexOf("Datasource")||"VcOverlayDynamic"===o||"VcEntity"===o))return function(e,t=!1){const{CallbackProperty:o,Color:r,CheckerboardMaterialProperty:a,ColorMaterialProperty:s,CompositeMaterialProperty:l,GridMaterialProperty:c,ImageMaterialProperty:d,MaterialProperty:v,PolylineArrowMaterialProperty:h,PolylineDashMaterialProperty:g,PolylineGlowMaterialProperty:f,PolylineOutlineMaterialProperty:y,StripeMaterialProperty:b,StripeOrientation:C,defaultValue:w,Cartesian2:O,Material:_}=Cesium;if(e instanceof o||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof c||e instanceof d||e instanceof v||e instanceof h||e instanceof g||e instanceof f||e instanceof y||e instanceof b||e instanceof Le||e instanceof Ae)return e;if(u(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new d({image:e,repeat:De({x:1,y:1}),color:r.WHITE,transparent:!0});if(m(e)||u(e))return new s(He(e));if(n(e)&&p(e,"fabric")){const t=e;switch(t.fabric.type){case"Image":return new d({image:t.fabric.uniforms.image,repeat:De(w(t.fabric.uniforms.repeat,{x:1,y:1})),color:w(He(t.fabric.uniforms.color),r.WHITE),transparent:w(t.fabric.uniforms.transparent,!1)});case"Color":return new s(He(w(t.fabric.uniforms.color,r.WHITE)));case"PolylineArrow":return new h(He(w(t.fabric.uniforms.color,r.WHITE)));case"PolylineDash":return new g({color:He(w(t.fabric.uniforms.color,"white")),gapColor:He(w(t.fabric.uniforms.gapColor,r.TRANSPARENT)),dashLength:w(t.fabric.uniforms.taperPower,16),dashPattern:w(t.fabric.uniforms.taperPower,255)});case"PolylineGlow":return new f({color:He(w(t.fabric.uniforms.color,r.WHITE)),glowPower:w(t.fabric.uniforms.glowPower,.25),taperPower:w(t.fabric.uniforms.taperPower,1)});case"PolylineOutline":return new y({color:He(w(t.fabric.uniforms.color,r.WHITE)),outlineColor:He(w(t.fabric.uniforms.outlineColor,r.BLACK)),outlineWidth:w(t.fabric.uniforms.outlineWidth,1)});case"Checkerboard":return new a({evenColor:He(w(t.fabric.uniforms.evenColor,r.WHITE)),oddColor:He(w(t.fabric.uniforms.oddColor,r.BLACK)),repeat:w(De(t.fabric.uniforms.repeat),{x:2,y:2})});case"Grid":return new c({color:He(w(t.fabric.uniforms.color,r.WHITE)),cellAlpha:w(t.fabric.uniforms.cellAlpha,.1),lineCount:w(De(t.fabric.uniforms.lineCount),{x:8,y:8}),lineThickness:w(De(t.fabric.uniforms.lineThickness),{x:1,y:1}),lineOffset:w(De(t.fabric.uniforms.lineOffset),{x:0,y:0})});case"Stripe":return new b({orientation:w(t.fabric.uniforms.orientation,C.HORIZONTAL),evenColor:He(w(t.fabric.uniforms.evenColor,"white")),oddColor:He(w(t.fabric.uniforms.oddColor,"black")),offset:w(t.fabric.uniforms.offset,0),repeat:w(t.fabric.uniforms.repeat,1)});case"VcCircleWave":return new Le({duration:w(t.fabric.uniforms.duration,3e3),gradient:w(t.fabric.uniforms.gradient,.5),color:He(w(t.fabric.uniforms.color,r.RED)),count:w(t.fabric.uniforms.count,3)});case"VcLineFlow":return new Ae({image:w(t.fabric.uniforms.image,_.DefaultImageId),color:He(w(t.fabric.uniforms.color,new r(1,1,1,1))),repeat:De(w(t.fabric.uniforms.repeat,new O(1,1))),axisY:w(t.fabric.uniforms.axisY,!1),mixt:w(t.fabric.uniforms.mixt,!1),speed:w(t.fabric.uniforms.speed,10),time:w(t.fabric.uniforms.time,-1)})}}return i(e)?new o(e,t):e}(e);const{Material:r,combine:a}=Cesium;if(e instanceof r)return e;if(n(e)&&p(e,"fabric")){const t=e=>{for(const i in e)if(!m(e[i])&&n(e[i]))t(e[i]);else if(-1!==i.toLocaleLowerCase().indexOf("color")&&!se(e[i])){const t=He(e[i]);e[i]=a(t,t,!0)}};return t(e),new r(e)}if(m(e)||u(e)){const t=r.fromType("Color");return t.uniforms.color=He(e),t}}function We(e){var t;const{Appearance:i,DebugAppearance:o,MaterialAppearance:r,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof i||e instanceof o||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof c)return e;if(n(e)&&p(e,"type")){const i={...e.options};return(null==(t=e.options)?void 0:t.material)&&(i.material=Ue.call(this,e.options.material)),new Cesium[e.type]({...i})}}function Ge(e,t=!1){const{Rectangle:o,RectangleGraphics:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof o||e instanceof a)return e;if(m(e))return o.fromDegrees(e[0],e[1],e[2],e[3]);if(n(e)){if(p(e,"west")){const t=e;return o.fromDegrees(t.west,t.south,t.east,t.north)}if(p(e,"x")){const t=e;return new o(t.x,t.y,t.z,t.w)}}return i(e)?new a(e,t):void 0}function $e(e,t=!1){const{BoundingRectangle:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(n(e)&&p(e,"x")){const t=e;return new o(t.x,t.y,t.width,t.height)}return m(e)?new o(e[0],e[1],e[2],e[3]):i(e)?new r(e,t):void 0}function Ze(e,t){const{Math:i,Rectangle:n,defaultValue:o}=Cesium;let r,a={};if(p(e,"position")){const n=e.position;r=ke(n,t),a=p(n,"lng")&&p(n,"lat")||m(n)?{heading:i.toRadians(o(e.heading,360)),pitch:i.toRadians(o(e.pitch,-90)),roll:i.toRadians(o(e.roll,0))}:{heading:o(e.heading,2*Math.PI),pitch:o(e.pitch,-Math.PI/2),roll:o(e.roll,0)}}else if(p(e,"rectangle")){const t=e.rectangle;r=Ge(t),n.validate(r),a=p(t,"west")&&p(t,"south")&&p(t,"east")&&p(t,"north")||m(t)?{heading:i.toRadians(o(e.heading,360)),pitch:i.toRadians(o(e.pitch,-90)),roll:i.toRadians(o(e.roll,0))}:{heading:o(e.heading,2*Math.PI),pitch:o(e.pitch,-Math.PI/2),roll:o(e.roll,0)}}return{destination:r,orientation:a}}function qe(e,t){const{destination:i,orientation:n}=Ze(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function Ye(e,t,i){const{destination:n,orientation:o}=Ze(t,e.scene.globe.ellipsoid);e.camera.flyTo({...i,destination:(null==i?void 0:i.destination)||n,orientation:(null==i?void 0:i.orientation)||o})}function Xe(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:o}=Cesium;return new n((i=i||o.WGS84).cartesianToCartographic(e),i.cartesianToCartographic(t)).surfaceDistance}function Qe(e,t,i,n){const{HeadingPitchRoll:o,Transforms:r,Matrix4:a,Cartesian3:s,Cartesian4:l,Quaternion:c,Cartographic:u,Ellipsoid:d}=Cesium;n=n||d.WGS84;const p=new o(t,0,0),m=new s(1,1,1),v=r.headingPitchRollToFixedFrame(e,p),h=a.getColumn(v,1,new l),g=new s(h.x,h.y,h.z),f=c.fromAxisAngle(g,i*n.oneOverRadii.x),y=a.fromTranslationQuaternionRotationScale(s.ZERO,f,m),b=a.multiplyByPoint(y,e,new s),C=u.fromCartesian(e,n),w=u.fromCartesian(b,n);return w.height=C.height,u.toCartesian(w,n)}function Je(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:o,Cartesian3:r}=Cesium,a=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!H(a)&&o(a)){const e=a.indices,i=a.attributes.position.values;for(let n=0;n<e.length;n+=3){const o=e[n],a=e[n+1],s=e[n+2];t+=Ke(r.unpack(i,3*o,{}),r.unpack(i,3*a,{}),r.unpack(i,3*s,{}))}}return t}const Ke=(e,t,i)=>{const{Cartesian3:n}=Cesium,o=n.subtract(e,t,{}),r=n.subtract(i,t,{}),a=n.cross(o,r,o);return.5*n.magnitude(a)};function et(e){const{JulianDate:t}=Cesium;return e instanceof t?e:u(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function tt(e){const{HeadingPitchRange:t,Math:i}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(i.toRadians(e[0])||0,i.toRadians(e[1])||0,e[2]||0):n(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function it(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,a=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,a),i.normalize(a,a),r.toDegrees(Math.atan2(a.x,a.y))}function nt(e,t){const{Cartesian3:i,Matrix4:n,Transforms:o,Math:r}=Cesium,a=new i,s=o.eastNorthUpToFixedFrame(e);return n.inverse(s,s),n.multiplyByPoint(s,t,a),i.normalize(a,a),r.toDegrees(Math.asin(a.z))}function ot(e,t,i,n=[]){const{Cartesian3:o,Ray:r,defined:a}=Cesium,s=new r(e,o.normalize(o.subtract(t,e,new o),new o)),l=i.scene.pickFromRay(s,n);if(a(l)&&a(l.position)){return l.position}}function rt(e){const t=-40467.74;return Math.round(t+80955.31/(1+Math.pow(e/91610.74,7096758e-11)))}function at(e,t,i=">="){return v(e,t,i)}const st={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ke,deep:!0}}},lt={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ke,deep:!0}}},ct={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ne}}},ut={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:ke}}},dt={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:He}}},pt={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:He}}},mt={disableDepthTestDistance:[Number,Object,Function]},vt={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{DistanceDisplayCondition:o,CallbackProperty:r}=Cesium;if(e instanceof o||e instanceof r)return e;if(n(e)&&p(e,"near")&&p(e,"far")){const t=e;return new o(t.near,t.far)}return m(e)?new o(e[0],e[1]):i(e)?new r(e,t):void 0}}}},ht={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:ke}}},gt={height:[Number,Object,Function]},ft={heightReference:{type:[Number,Object,Function]}},yt={horizontalOrigin:{type:[Number,Object,Function],default:0}},bt={image:[String,Object,HTMLCanvasElement,Function]},Ct={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:$e}}},wt={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>m(e)?2===e.length:t(e)?p(e,"x")&&p(e,"y"):!!i(e),watcherOptions:{cesiumObjectBuilder:De}}},Ot={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Fe}}},_t={rotation:{type:[Number,Object,Function],default:0}},xt={scale:{type:[Number,Object,Function],default:1}},St={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Fe}}},Et={show:{type:[Boolean,Object,Function],default:!0}},Pt={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},Tt={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Fe}}},It={verticalOrigin:{type:[Number,Object,Function],default:0}},Mt={width:[Number,Object,Function]},jt={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ke}}},Lt={fill:{type:[Boolean,Object,Function],default:!0}},At={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ue}}},Dt={outline:{type:[Boolean,Object,Function],default:!1}},kt={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:He}}},Rt={outlineWidth:{type:[Number,Object,Function],default:1}},Bt={shadows:[Number,Object,Function]},Nt={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Re,exclude:"_callback",deep:!0}}},Vt={extrudedHeight:[Number,Object,Function]},zt={extrudedHeightReference:[Number,Object,Function]},Ft={cornerType:{type:[Number,Object,Function],default:0}},Ht={granularity:[Number,Object,Function]},Ut={classificationType:{type:[Number,Object,Function]}},Wt={zIndex:[Number,Object,Function]},Gt={length:[Number,Object,Function]},$t={topRadius:[Number,Object,Function]},Zt={bottomRadius:[Number,Object,Function]},qt={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Yt={slices:{type:[Number,Object,Function],default:128}},Xt={semiMajorAxis:[Number,Object,Function]},Qt={semiMinorAxis:[Number,Object,Function]},Jt={stRotation:{type:[Number,Object,Function],default:0}},Kt={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ke}}},ei={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ke}}},ti={minimumClock:{type:[Number,Object,Function],default:0}},ii={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},ni={minimumCone:{type:[Number,Object,Function],default:0}},oi={maximumCone:{type:[Number,Object,Function],default:Math.PI}},ri={stackPartitions:{type:[Number,Object,Function],default:64}},ai={slicePartitions:{type:[Number,Object,Function],default:64}},si={subdivisions:{type:[Number,Object,Function],default:128}},li={text:[String,Object,Function]},ci={font:{type:[String,Object,Function],default:"30px sans-serif"}},ui={labelStyle:{type:[Number,Object,Function],default:0}},di={showBackground:{type:[Boolean,Object,Function],default:!1}},pi={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:He}}},mi={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:De}}},vi={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:He}}},hi={uri:[String,Object,Function]},gi={minimumPixelSize:{type:[Number,Object,Function],default:0}},fi={maximumScale:[Number,Object,Function]},yi={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},bi={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Ci={clampAnimations:{type:[Boolean,Object,Function],default:!0}},wi={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:He}}},Oi={silhouetteSize:{type:[Number,Object,Function],default:0}},_i={colorBlendMode:{type:[Number,Object,Function],default:0}},xi={colorBlendAmount:{type:[Number,Object,Function],default:.5}},Si={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:De}}},Ei={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:He}}},Pi={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{TranslationRotationScale:o,CallbackProperty:r}=Cesium;if(e instanceof r||e instanceof o)return e;if(n(e)&&p(e,"translation")){const t=e;return new o(ke(t.translation),Ne(t.rotation),ke(t.scale))}return m(e)?new o(ke(e[0]),Ne(e[1]),ke(e[2])):i(e)?new r(e,t):e}}}},Ti={articulations:[Object,Function]},Ii={clippingPlanes:[Object,Function]},Mi={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:function(e,t=!1){const{Cartesian3:o,Plane:r,PlaneGraphics:a,CallbackProperty:s}=Cesium;if(e instanceof a||e instanceof r||e instanceof s)return e;if(n(e)&&p(e,"normal")){const t=e;return o.normalize(ke(t.normal),t.normal),new r(t.normal,t.distance)}if(m(e)){const t=ke(e[0]);return new r(o.normalize(t,new o),e[1])}return i(e)?new s(e,t):void 0}}}},ji={pixelSize:{type:[Number,Object,Function],default:1}},Li={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ze,deep:!0,exclude:"_callback"}}},Ai={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},Di={closeTop:{type:[Boolean,Object,Function],default:!0}},ki={closeBottom:{type:[Boolean,Object,Function],default:!0}},Ri={arcType:{type:[Number,Object,Function],default:1}},Bi={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ue}}},Ni={clampToGround:{type:[Boolean,Object,Function],default:!1}},Vi={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Be}}},zi={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ge}}},Fi={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},Hi={minimumHeights:[Array,Object,Function]},Ui={maximumHeights:[Array,Object,Function]},Wi={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ge}}},Gi={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:He}}},$i={url:[String,Object]},Zi={token:String},qi={tileDiscardPolicy:Object},Yi={layers:String},Xi={enablePickFeatures:{type:Boolean,default:!0}},Qi={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ge}}},Ji={tilingScheme:Object},Ki={ellipsoid:Object},en={credit:{type:[String,Object],default:""}},tn={tileWidth:{type:Number,default:256}},nn={tileHeight:{type:Number,default:256}},on={maximumLevel:Number},rn={minimumLevel:{type:Number,default:0}},an={fileExtension:{type:String,default:"png"}},sn={accessToken:String},ln={format:{type:String,default:"png"}},cn={subdomains:[String,Array]},un={getFeatureInfoFormats:Array},dn={clock:Object},pn={times:Object},mn={projectionTransforms:{type:[Boolean,Object],default:!1}},vn={customShader:{type:Object}},hn={maximumMemoryUsage:{type:Number,default:256}},gn={defaultColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:He}}},fn={tileStyle:{type:Object}},yn={allowPicking:{type:Boolean,default:!0}},bn={asynchronous:{type:Boolean,default:!0}},Cn={debugShowShadowVolume:{type:Boolean,default:!1}},wn={releaseGeometryInstances:{type:Boolean,default:!0}},On={interleave:{type:Boolean,default:!1}},_n={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:We,deep:!0}}},xn={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:We,deep:!0}}},Sn={geometryInstances:[Array,Object]},En={vertexCacheOptimize:{type:Boolean,default:!1}},Pn={compressVertices:{type:Boolean,default:!0}},Tn={modelMatrix:Object},In={debugShowBoundingVolume:{tyep:Boolean,default:!1}},Mn={scene:Object},jn={blendOption:{type:Number,default:2}},Ln={id:null},An={loop:{type:Boolean,default:!1}},Dn={debugWireframe:{type:Boolean,default:!1}},kn={vertexFormat:Object},Rn={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ke}}},Bn={radius:Number},Nn={frustum:Object},Vn={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ke}}},zn={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ze,deep:!0}}},Fn={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:He}}},Hn={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:He}}},Un={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:De}}},Wn={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:De}}},Gn={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:De}}},$n={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Be,deep:!0}}},Zn={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Re,deep:!0}}},qn={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ke}}},Yn={luminanceAtZenith:{type:Number,default:.2}},Xn={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:Re}}},Qn={specularEnvironmentMaps:String},Jn={imageBasedLighting:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){const{ImageBasedLighting:t,defined:i}=Cesium;if(e instanceof Cesium.ImageBasedLighting)return e;const n=new t;return n.imageBasedLightingFactor&&(n.imageBasedLightingFactor=De(e.imageBasedLightingFactor)),n.sphericalHarmonicCoefficients&&(n.sphericalHarmonicCoefficients=Re(e.sphericalHarmonicCoefficients)),n.luminanceAtZenith&&(n.luminanceAtZenith=Number(e.luminanceAtZenith)),i(n.specularEnvironmentMaps)&&(n.specularEnvironmentMaps=e.specularEnvironmentMaps),n}}}},Kn={backFaceCulling:{type:Boolean,default:!0}},eo={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:function(e){if(m(e)){const t=[];return e.forEach((e=>{t.push(He(e))})),t}return e},deep:!0}}},to={data:{type:[String,Object],required:!0}},io={sourceUri:{type:[String,Object]}},no={options:{type:Object,watcherOptions:{cesiumObjectBuilder:function(e){var t;const i={};return"VcDatasourceGeojson"===(null==(t=this.proxy)?void 0:t.$options.name)?(Object.assign(i,e),i&&i.markerColor&&(i.markerColor=He(i.markerColor)),i&&i.stroke&&(i.stroke=He(i.stroke)),i&&i.fill&&(i.fill=He(i.fill)),i):e},deep:!0}}},oo={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:He}}},ro={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:He}}},ao={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:$e}}},so={enableMouseEvent:{type:Boolean,default:!0}},lo=Object.freeze(Object.defineProperty({__proto__:null,accessToken:sn,alignedAxis:ut,allowPicking:yn,appearance:_n,arcType:Ri,articulations:Ti,asynchronous:bn,backFaceCulling:Kn,backgroundColor:pi,backgroundPadding:mi,blendOption:jn,bottomRadius:Zt,center:Rn,clampAnimations:Ci,clampToGround:Ni,classificationType:Ut,clearColor:ro,clippingPlanes:Ii,clock:dn,closeBottom:ki,closeTop:Di,color:dt,colorBlendAmount:xi,colorBlendMode:_i,colorToAlpha:Gi,colors:eo,compressVertices:Pn,coordinates:zi,cornerType:Ft,credit:en,customShader:vn,cutoutRectangle:Wi,data:to,debugShowBoundingVolume:In,debugShowShadowVolume:Cn,debugWireframe:Dn,defaultColor:gn,depthFailAppearance:xn,depthFailColor:pt,depthFailMaterial:Bi,dimensions:jt,disableDepthTestDistance:mt,distanceDisplayCondition:vt,ellipsoid:Ki,enableMouseEvent:so,enablePickFeatures:Xi,endColor:Hn,extrudedHeight:Vt,extrudedHeightReference:zt,eyeOffset:ht,fileExtension:an,fill:Lt,fillColor:vi,font:ci,format:ln,frustum:Nn,geometryInstances:Sn,getFeatureInfoFormats:un,glowColor:oo,granularity:Ht,height:gt,heightReference:ft,hierarchy:Li,horizontalOrigin:yt,id:Ln,image:bt,imageBasedLighting:Jn,imageBasedLightingFactor:Si,imageSize:Gn,imageSubRegion:Ct,incrementallyLoadTextures:yi,innerRadii:ei,interleave:On,labelStyle:ui,layers:Yi,length:Gt,lightColor:Ei,lightColor2:qn,loop:An,luminanceAtZenith:Yn,material:At,maximumClock:ii,maximumCone:oi,maximumHeights:Ui,maximumImageSize:Wn,maximumLevel:on,maximumMemoryUsage:hn,maximumScale:fi,maximumScreenSpaceError:Fi,minimumClock:ti,minimumCone:ni,minimumHeights:Hi,minimumImageSize:Un,minimumLevel:rn,minimumPixelSize:gi,modelMatrix:Tn,nodeTransformations:Pi,numberOfVerticalLines:qt,options:no,orientation:ct,origin:Vn,outline:Dt,outlineColor:kt,outlineWidth:Rt,perPositionHeight:Ai,pixelOffset:wt,pixelOffsetScaleByDistance:Ot,pixelSize:ji,plane:Mi,polygonHierarchy:zn,polylinePositions:Zn,position:st,positions:Nt,projectionTransforms:mn,radii:Kt,radius:Bn,rectangle:Qi,releaseGeometryInstances:wn,rotation:_t,runAnimations:bi,scale:xt,scaleByDistance:St,scene:Mn,scissorRectangle:ao,semiMajorAxis:Xt,semiMinorAxis:Qt,shadows:Bt,shape:Vi,shapePositions:$n,show:Et,showBackground:di,silhouetteColor:wi,silhouetteSize:Oi,sizeInMeters:Pt,slicePartitions:ai,slices:Yt,sourceUri:io,specularEnvironmentMaps:Qn,sphericalHarmonicCoefficients:Xn,stRotation:Jt,stackPartitions:ri,startColor:Fn,subdivisions:si,subdomains:cn,text:li,tileDiscardPolicy:qi,tileHeight:nn,tileStyle:fn,tileWidth:tn,tilingScheme:Ji,times:pn,token:Zi,topRadius:$t,translucencyByDistance:Tt,uri:hi,url:$i,vertexCacheOptimize:En,vertexFormat:kn,verticalOrigin:It,viewFrom:lt,width:Mt,zIndex:Wt},Symbol.toStringTag,{value:"Module"}));var co={name:"zh-hans",nativeName:"中文(简体)",vc:{loadError:"加载失败，必须作为 VcViewer 的子组件加载。",navigation:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环。\n重置视图：双击罗盘外环。",innerTip:"翻转视图：由内环向外环拖拽罗盘。\n 或者按住 Ctrl 键的同时拖拽地图。",title:"按住鼠标拖拽旋转相机。"},zoomCotrol:{zoomInTip:"放大",zoomResetTip:"重置视图",zoomOutTip:"缩小"},print:{printTip:"场景截图/打印",printViewTitle:"打印预览",credit:"地图版权",screenshot:"场景截图"},myLocation:{myLocationTip:"定位您的位置",positioning:"定位中...",fail:"定位失败",centreMap:"我的位置",lat:"纬度",lng:"经度",address:"地址"},statusBar:{lat:"纬度",lng:"经度",zone:"带号",e:"X",n:"Y",elev:"高程",level:"层级",heading:"方位",pitch:"俯仰",roll:"侧翻",cameraHeight:"视高",tip:"点击切换鼠标显示坐标为 UTM 投影坐标"}},navigationSm:{compass:{outerTip:"旋转视图：顺/逆时针方向拖拽罗盘外环；重置视图：双击罗盘外环。"},zoomCotrol:{zoomInTip:"放大",zoomBarTip:"按住滑块向上放大，向下缩小。",zoomOutTip:"缩小"}},measurement:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},distance:{tip:"距离量算",drawingTipStart:"单击左键绘制距离量算起点。",drawingTipEnd:"单击左键绘制距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},"component-distance":{tip:"三角量算",drawingTipStart:"单击左键绘制三角量算起点。",drawingTipEnd:"单击左键绘制三角量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"折线距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},horizontal:{tip:"水平距离量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},vertical:{tip:"垂直距离量算",drawingTipStart:"单击左键绘制垂直距离量算起点。",drawingTipEnd:"单击左键绘制垂直距离量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},height:{tip:"地表高度量算",drawingTipStart:"单击左键绘制高度量算点。",drawingTipEnd:"单击左键绘制高度量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},area:{tip:"面积量算",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"点击左键绘制下一个点，双击左键结束量算。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"坐标量算",drawingTipStart:"点击左键绘制坐标量算点。",drawingTipEnd:"点击左键绘制坐标量算点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。",lng:"经度：",lat:"纬度：",height:"高度：",slope:"坡度："},rectangle:{tip:"矩形量算",drawingTipStart:"单击左键绘制矩形量算起点。",drawingTipEnd:"单击左键绘制矩形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"正多边形量算",drawingTipStart:"单击左键绘制正多边形量算起点。",drawingTipEnd:"单击左键绘制正多边形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"圆形量算",drawingTipStart:"单击左键绘制圆形量算起点。",drawingTipEnd:"单击左键绘制圆形量算终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除量算结果"}},drawing:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},pin:{tip:"绘制图标点",drawingTipStart:"点击左键绘制图标点。",drawingTipEnd:"点击左键绘制图标点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},point:{tip:"绘制点",drawingTipStart:"点击左键绘制点。",drawingTipEnd:"点击左键绘制点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polyline:{tip:"绘制线",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},polygon:{tip:"绘制面",drawingTipStart:"单击左键绘制第一个点。",drawingTipEnd:"单击左键绘制下一个点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},rectangle:{tip:"绘制矩形",drawingTipStart:"单击左键绘制矩形起点。",drawingTipEnd:"单击左键绘制矩形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},circle:{tip:"绘制圆",drawingTipStart:"单击左键绘制圆形起点。",drawingTipEnd:"单击左键绘制圆形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},regular:{tip:"绘制正多边形",drawingTipStart:"单击左键绘制正多边形起点。",drawingTipEnd:"单击左键绘制正多边形终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除绘制结果"}},analysis:{expand:"展开",collapse:"收拢",editor:{move:"移动节点",insert:"插入节点",remove:"移除节点",removeAll:"移除所有节点"},sightline:{tip:"通视分析",drawingTipStart:"单击左键绘制观测点。",drawingTipEnd:"单击左键绘制目标点，双击左键结束绘制。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},viewshed:{tip:"可视域分析",drawingTipStart:"单击左键绘制可视域分析起点。",drawingTipEnd:"单击左键绘制可视域分析终点。",drawingTipEditing:"移动鼠标修改节点，单击左键确定修改，单击右键放弃修改。"},clear:{tip:"清除分析结果"}},overview:{show:"显示鹰眼",hidden:"隐藏鹰眼"},typhoon:{warn:"播放台风失败，原因：未找到对应编号的台风数据。"}}};const uo=e=>(t,i)=>po(t,i,l(e)),po=(e,t,i)=>Z(i,e,e).replace(/\{(\w+)\}/g,((e,i)=>{var n;return`${null!=(n=null==t?void 0:t[i])?n:`{${i}}`}`})),mo=()=>{const e=be("locale");return(e=>({lang:s((()=>l(e).name)),locale:h(e)?e:o(e),t:uo(e)}))(s((()=>e.value||co)))};function vo(e,t,i){const n=(e,i,n=!0)=>{const o=i||t.cesiumEvents||[];o&&o.forEach((i=>{if(e[i]){const o=Pe(t,i),r=n?"addEventListener":"removeEventListener";o&&e[i][r](o)}}))};function o(t){if(!e.enableMouseEvent||!t)return;const i=this.viewer,{eventName:n}=this,o=t.position||t.endPosition;if(!o)return;const r=[];let a,s;-1!==n.indexOf("LEFT_DOUBLE_CLICK")?a="dblclick":-1!==n.indexOf("CLICK")?a="click":-1!==n.indexOf("DOWN")?a="mousedown":-1!==n.indexOf("UP")?a="mouseup":-1!==n.indexOf("MOUSE_MOVE")&&(a="mousemove"),"mousemove"===a?s="mouseout":"click"===a&&(s="clickout");const l=i.scene.pick(o);if(Cesium.defined(l)?(this.pickedFeature&&this.pickedFeature.id!==l.id&&r.push({callbackName:s,pickedFeature:this.pickedFeature}),"mousemove"!==a||this.pickedFeature&&this.pickedFeature.id===l.id||r.push({callbackName:"mouseover",pickedFeature:l}),r.push({callbackName:a,pickedFeature:l})):(this.pickedFeature&&r.push({callbackName:s,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),0===r.length)return;let c;const u=i.scene;if(u.mode===Cesium.SceneMode.SCENE3D){const e=u.camera.getPickRay(o);c=u.globe.pick(e,u)}else c=u.camera.pickEllipsoid(o,u.globe.ellipsoid);let p=-1;-1!==n.indexOf("LEFT")?p=0:-1!==n.indexOf("MIDDLE")?p=1:-1!==n.indexOf("RIGHT")&&(p=2);const v=[];r.forEach((e=>{const t=e.callbackName,i=e.pickedFeature;i.id&&(m(i.id)?i.id[0]instanceof Cesium.Entity?v.push({callbackName:t,cesiumObject:i.id[0].entityCollection.owner,pickedFeature:i}):v.push({callbackName:t,cesiumObject:i.primitive.owner,pickedFeature:i}):i.id instanceof Cesium.Entity&&(v.push({callbackName:t,cesiumObject:i.id,pickedFeature:i}),v.push({callbackName:t,cesiumObject:i.id.entityCollection.owner,pickedFeature:i})));const n=e=>{v.push({callbackName:t,cesiumObject:e,pickedFeature:i}),e._vcParent&&n(e._vcParent)};i.primitive&&(i.primitive._vcParent&&n(i.primitive._vcParent),v.push({callbackName:t,cesiumObject:i.primitive,pickedFeature:i})),i.collection&&(i.collection._vcParent&&n(i.collection._vcParent),v.push({callbackName:t,cesiumObject:i.collection,pickedFeature:i}))})),v.forEach((e=>{if(e.callbackName){const t=e.cesiumObject[`vc${e.callbackName}`]||e.cesiumObject[`on${d(e.callbackName)}`]||e.cesiumObject[le(`on${d(e.callbackName)}`)];if(Cesium.defined(t)){const i={type:`on${e.callbackName}`,windowPosition:o,surfacePosition:c,pickedFeature:e.pickedFeature,button:p,cesiumObject:e.cesiumObject};t instanceof Cesium.CallbackProperty?t._callback(i):t(i)}}})),this.pickedFeature=l}return{bindEvents:n,registerEvents:i=>{var r;const{viewer:a,cesiumObject:s}=t;if(void 0===s||void 0===a)return;const{ScreenSpaceEventHandler:l,ScreenSpaceEventType:c}=Cesium;a._vcPickScreenSpaceEventHandler&&a._vcViewerScreenSpaceEventHandler||(a._vcPickScreenSpaceEventHandler=new l(a.canvas),a._vcViewerScreenSpaceEventHandler=new l(a.canvas),ho.forEach((e=>{const i=Pe(t,e);i&&a._vcViewerScreenSpaceEventHandler.setInputAction(i,c[e]),a._vcPickScreenSpaceEventHandler.setInputAction(o.bind({eventName:e,viewer:a}),c[e])}))),n(s,t.cesiumEvents||[],i),null==(r=t.cesiumMembersEvents)||r.forEach((e=>{const t=m(e.name)&&e.name.length>0&&s[e.name[0]]?s[e.name[0]][e.name[1]]:s[e.name];t&&n(t,e.events,i)})),e.enableMouseEvent&&go.forEach((e=>{const n=Pe(t,e);i?n&&(s[`vc${e}`]=n):n&&delete s[`vc${e}`]}))}}}const ho=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],go=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"];function fo(){let e;return g((()=>{clearTimeout(e)})),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const yo=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function bo(e,{emit:t,attrs:n},o){const r=Oe(o),{registerTimeout:a,removeTimeout:s}=fo();o.alreadyListening=[],o.removeCallbacks=[];let l=[];o.mounted=!1;const u=y();o.vcMitt=u;const d=c(oe),{t:p}=mo();if(void 0===d)return;const m=Ie(o),v=vo(e,o);o.children=[];const h={billboard:!0,box:!0,corridor:!0,cylinder:!0,ellipse:!0,ellipsoid:!0,label:!0,model:!0,tileset:!0,path:!0,plane:!0,point:!0,polygon:!0,polyline:!0,polylineVolume:!0,rectangle:!0,wall:!0},g=be(),b=async()=>{var e;if(o.mounted)return!1;r.debug(`${o.cesiumClass}---loading`),await(async()=>{if(t("beforeLoad",o),m.nowaiting)return!0;await m.proxy.creatingPromise})();const{Cesium:i,viewer:n}=d;return o.viewer=n,o.Cesium=i,m.cesiumObject||m.nowaiting?(E(!0),x().then((async e=>(o.cesiumObject=e,O().then((()=>{o.mounted=!0,m.children.push(o),Object.assign(o.proxy,{cesiumObject:o.cesiumObject});const a={Cesium:i,viewer:n,cesiumObject:e,vm:o};return t("ready",a),u.emit("ready",a),r.debug(`${o.cesiumClass}---loaded`),a})))))):await(null==(e=m.proxy)?void 0:e.load())},C=async()=>{await(async()=>{await o.unloadingPromise})();for(let e=0;e<o.children.length;e++){const t=o.children[e].proxy;await t.unload()}return o.children.length=0,o.isUnmounted=!1,!!o.mounted&&_().then((async()=>(E(!1),o.cesiumObject=void 0,o.mounted=!1,o.removeCallbacks.forEach((e=>{e()})),t("destroyed",o),u.emit("destroyed",o),r.debug(`${o.cesiumClass}---unmounted`),!(o.renderByParent&&!o.unloadingPromise)||m.proxy.unload())))},w=async()=>(await(async()=>{await o.reloadingPromise})(),C().then((()=>b()))),O=async()=>{var e;return v.registerEvents(!0),(null==(e=o.mount)?void 0:e.call(o))||!0},_=async()=>{var e;return v.registerEvents(!1),(null==(e=o.unmount)?void 0:e.call(o))||!0},x=async()=>{if(r.debug("do createCesiumObject"),i(o.createCesiumObject))return o.createCesiumObject();{const t=P(e);return new Cesium[o.cesiumClass](t)}},S=(e,t)=>{let i=null==t?void 0:t.deep;const{SampledPositionProperty:n,Appearance:r,DebugAppearance:a,MaterialAppearance:s,PolylineColorAppearance:l,EllipsoidSurfaceAppearance:c,PerInstanceColorAppearance:u,PolylineMaterialAppearance:d}=Cesium;if("position"===e)i=!(o.proxy[e]instanceof n);else if("appearance"===e||"depthFailAppearance"===e){const t=o.proxy[e];i=!(t instanceof r||t instanceof a||t instanceof s||t instanceof l||t instanceof c||t instanceof u||t instanceof d||-1!==ue(t).indexOf("Appearance"))}return i},E=t=>{if(t){if(!o.cesiumClass||!Cesium[o.cesiumClass])return;e&&Object.keys(e).forEach((e=>{var t,i,r,c,u;let d=e;if("labelStyle"===e||"wmtsStyle"===e?d="style":"bmKey"===e&&(d="key"),(null==(i=null==(t=o.proxy)?void 0:t.$options.watch)?void 0:i[e])||-1!==o.alreadyListening.indexOf(e))return;const p=null==(c=null==(r=o.proxy)?void 0:r.$options.props[e])?void 0:c.watcherOptions,m=null==(u=o.proxy)?void 0:u.$watch(e,(async(e,t)=>{await o.proxy.creatingPromise;const{cesiumObject:i}=o,r=i&&Object.getOwnPropertyDescriptor(i,d),l=i&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(i),d);if(r&&(r.writable||r.set)||l&&(l.writable||l.set)){if(p&&p.cesiumObjectBuilder){const t=p.cesiumObjectBuilder.call(o,e,o.viewer.scene.globe.ellipsoid);Cesium.defined(i[d])&&Cesium.defined(i[d]._callback)||(i[d]=t)}else i[d]=T(d,e);return!0}q(e,t)&&!Array.isArray(e)||("once"===n["reload-mode"]||"once"===n.reloadMode||"once"===g.value.reloadMode?(s(),a((()=>{o.proxy.reload()}),0)):o.reloadingPromise=new Promise(((e,t)=>{o.proxy.reload().then((()=>{e(!0)})).catch((e=>{t(e)}))})))}),{deep:S(e,p)});l.push(m)}))}else l.forEach((e=>e())),l=[]},P=(e,t)=>{const i={};return e&&Object.keys(e).forEach((n=>{let r=n;if("labelStyle"===n||"wmtsStyle"===n?r="style":"bmKey"===n&&(r="key"),void 0===e[n]||null===e[n])return;ue(e[n])&&h[r]&&("Entity"===o.cesiumClass||o.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===o.cesiumClass)?i[r]=P(e[n],t):i[r]=T(n,e[n],t)})),i},T=(e,t,n)=>{var r,a;if(ue(t)&&h[e]&&("Entity"===o.cesiumClass||o.cesiumClass.indexOf("DataSource")>0||"VcOverlayDynamic"===o.cesiumClass))return P(t,n);{const s=null==(r=o.proxy)?void 0:r.$options.name;let l=!1;i(t)&&s&&yo.forEach((e=>{-1!==s.indexOf(e)&&(l=!0)}));const c=(null==(a=o.proxy)?void 0:a.$options.props[e])||(null==n?void 0:n[e])||lo[e]&&lo[e][e];return(null==c?void 0:c.watcherOptions)&&!se(t)?c.watcherOptions.cesiumObjectBuilder.call(o,t,o.viewer.scene.globe.ellipsoid):l?new Cesium.CallbackProperty(t,!1):t}},I=new Promise(((e,i)=>{try{let n=!1;d.viewer&&(n=!0,b().then((t=>{e(t),n=!1})).catch((e=>{t("unready",e),i(e)}))),m.vcMitt.on("ready",(()=>{n||o.isUnmounted||b().then((t=>{e(t)})).catch((e=>{t("unready",e),i(e)}))}))}catch(n){t("unready",n),i(n)}}));return r.debug(`${o.cesiumClass}---onCreated`),f((()=>{r.debug(`${o.cesiumClass}---onUnmounted`),o.unloadingPromise=new Promise(((e,t)=>{C().then((()=>{r.debug(`${o.cesiumClass}---unloaded`),e(!0),o.isUnmounted=!0,o.unloadingPromise=void 0,u.all.clear()}))})),o.alreadyListening=[]})),Object.assign(o.proxy,{creatingPromise:I,load:b,unload:C,reload:w,getCreatingPromise:()=>I,getCesiumObject:()=>o.cesiumObject}),{$services:d,load:b,unload:C,reload:w,creatingPromise:I,transformProp:T,transformProps:P,unwatchFns:l,setPropsWatcher:E,logger:r,getServices:()=>Se({},d||{})}}function Co(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],"KmlDataSource"===i.cesiumClass&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=bo(e,t,i);if(void 0===n)return;i.alreadyListening.push("entities");let o=[];o.push(b((()=>X(e.entities)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o.entities.getById(e.oldOptions.id);if(e.oldOptions.id===e.newOptions.id)t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}));else{o.entities.remove(t);const i=e.newOptions;r(o,[i])}}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),a=[];for(let e=0;e<n.length;e++){const t=o.entities.getById(n[e].id);a.push(t)}a.forEach((e=>{o.entities.remove(e)})),r(o,i)}}),{deep:!0}));const r=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i],r=n.transformProps(o),a=e.entities.add(r);o.id!==a.id&&(o.id=a.id),me(a,r)}};i.mount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return o.show=e.show,r(o,e.entities),t.add(o).then((()=>!0))},i.unmount=async()=>{const t=n.$services.dataSources,o=i.cesiumObject;return t&&t.remove(o,e.destroy)};return f((()=>{o.forEach((e=>e())),o=[]})),a(oe,Se(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var e;return null==(e=i.cesiumObject)?void 0:e.entities}})),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function wo(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=bo(e,t,i);if(void 0!==n)return i.mount=async()=>{var e;const t=i.cesiumObject,n=Ie(i).proxy;return null==(e=n.__updateGeometry)?void 0:e.call(n,t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function Oo(e,t,i){i.cesiumEvents=["definitionChanged"];void 0!==bo(e,t,i)&&(i.mount=async()=>{var e,t;const n=i.cesiumObject;if(void 0===n)return!1;const o=le((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),r=3===o.length?`update:${o[2]}`:"update:polylineVolume",a=Ie(i).proxy;return a&&(null==(t=a.__updateGraphics)?void 0:t.call(a,n,r))},i.unmount=async()=>{var e,t;const n=le((null==(e=i.proxy)?void 0:e.$options.name)||"").split("-"),o=3===n.length?`update:${n[2]}`:"update:polylineVolume",r=Ie(i).proxy;return r&&(null==(t=r.__updateGraphics)?void 0:t.call(r,void 0,o))})}const _o=e=>C(e);function xo(e,t){const i=e.style;Object.keys(t).forEach((e=>{i[e]=t[e]}))}const So={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(So,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch($g){}function Eo(){}function Po(e){return 0===e.button}function To(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function Io(e){e.stopPropagation()}function Mo(e){!1!==e.cancelable&&e.preventDefault()}function jo(e){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation()}function Lo(e,t){if(void 0===e||!0===t&&!0===e.__dragPrevented)return;const i=!0===t?e=>{e.__dragPrevented=!0,e.addEventListener("dragstart",Mo,So.notPassiveCapture)}:e=>{delete e.__dragPrevented,e.removeEventListener("dragstart",Mo,So.notPassiveCapture)};e.querySelectorAll("a, img").forEach(i)}function Ao(e,t,i){const n=`__vc_${t}_evt`;e[n]=void 0!==e[n]?e[n].concat(i):i,i.forEach((t=>{t[0].addEventListener(t[1],e[t[2]],So[t[3]])}))}function Do(e,t){const i=`__vc_${t}_evt`;void 0!==e[i]&&(e[i].forEach((t=>{t[0].removeEventListener(t[1],e[t[2]],So[t[3]])})),e[i]=void 0)}let ko=!1;function Ro(e,t){return!0!==function(e){return!0===ko||e!==Object(e)||!0===e.isComposing||!0===e.qKeyEvent}(e)&&[].concat(t).includes(e.keyCode)}function Bo(e,t=250){let i,n=!1;return function(){return!1===n&&(n=!0,setTimeout((()=>{n=!1}),t),i=e.apply(this,arguments)),i}}function No(e,t,i,n){!0===i.modifiers.stop&&Io(e);const o=i.modifiers.color;let r=i.modifiers.center;r=!0===r||!0===n;const a=document.createElement("span"),s=document.createElement("span"),l=To(e),{left:c,top:u,width:d,height:p}=t.getBoundingClientRect(),m=Math.sqrt(d*d+p*p),v=m/2,h=(d-m)/2+"px",g=r?h:l.left-c-v+"px",f=(p-m)/2+"px",y=r?f:l.top-u-v+"px";s.className="vc-ripple__inner",xo(s,{height:`${m}px`,width:`${m}px`,transform:`translate3d(${g},${y},0) scale3d(.2,.2,1)`,opacity:0}),a.className="vc-ripple"+(o?" text-"+o:""),a.setAttribute("dir","ltr"),a.appendChild(s),t.appendChild(a);const b=()=>{a.remove(),clearTimeout(C)};i.abort.push(b);let C=setTimeout((()=>{s.classList.add("vc-ripple__inner--enter"),s.style.transform=`translate3d(${h},${f},0) scale3d(1,1,1)`,s.style.opacity="0.2",C=setTimeout((()=>{s.classList.remove("vc-ripple__inner--enter"),s.classList.add("vc-ripple__inner--leave"),s.style.opacity="0",C=setTimeout((()=>{a.remove(),i.abort.splice(i.abort.indexOf(b),1)}),275)}),250)}),50)}function Vo(e,{modifiers:t,value:i,arg:n,instance:o}){const r=Object.assign({},t,i);e.modifiers={early:!0===r.early,stop:!0===r.stop,center:!0===r.center,color:r.color||n,keyCodes:[].concat(r.keyCodes||13)}}var zo=_o({name:"ripple",beforeMount(e,t){const i={enabled:!1!==t.value,modifiers:{},abort:[],start(t){!0===i.enabled&&!0!==t.qSkipRipple&&(!0===i.modifiers.early?!0===["mousedown","touchstart"].includes(t.type):"click"===t.type)&&No(t,e,i,!0===t.qKeyEvent)},keystart:Bo((t=>{!0===i.enabled&&!0!==t.qSkipRipple&&!0===Ro(t,i.modifiers.keyCodes)&&t.type==="key"+(!0===i.modifiers.early?"down":"up")&&No(t,e,i,!0)}),300)};Vo(i,t),e.__vcripple=i,Ao(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=!1!==t.value,!0===i.enabled&&Object(t.value)===t.value&&Vo(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach((e=>{e()})),Do(t,"main"),delete e._vcripple}});function Fo(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),o=/(?:Firefox)/.test(e),r=/(?:Chrome|CriOS)/.test(e),a=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||o&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!a;return{isTablet:a,isPhone:s,isAndroid:n,isPc:!s&&!n&&!i,isFireFox:o,isChrome:r,isIOS:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function Ho(){if(void 0!==window.getSelection){const e=window.getSelection();void 0!==(null==e?void 0:e.empty)?e.empty():void 0!==(null==e?void 0:e.removeAllRanges)&&(e.removeAllRanges(),!0!==Fo().isPhone&&e.addRange(document.createRange()))}else void 0!==document.selection&&document.selection.empty()}var Uo=_o({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(!0!==i.mouse&&!0!==Fo().hasTouch)return;const n={handler:t.value,noop:Eo,mouseStart(e){"function"==typeof n.handler&&!0===Po(e)&&(Ao(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(e,!0))},touchStart(e){var i;if(void 0!==e.target&&"function"==typeof n.handler){const o=e.target;Ao(n,"temp",[[o,"touchmove","move","passiveCapture"],[o,"touchcancel","end","notPassiveCapture"],[o,"touchend","end","notPassiveCapture"]]),n.start(e),null==(i=null==t?void 0:t.touchStart)||i.call(t,e)}},start(e,t){n.origin=To(e);const i=Date.now();!0===Fo().isPhone&&(document.body.classList.add("non-selectable"),Ho(),n.styleCleanup=e=>{n.styleCleanup=void 0;const t=()=>{document.body.classList.remove("non-selectable")};!0===e?(Ho(),setTimeout(t,10)):t()}),n.triggered=!1,n.sensitivity=!0===t?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout((()=>{Ho(),n.triggered=!0,n.handler({evt:e,touch:!0!==t,mouse:!0===t,position:n.origin,duration:Date.now()-i})}),n.duration)},move(e){const{top:t,left:i}=To(e);(Math.abs(i-n.origin.left)>=n.sensitivity||Math.abs(t-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(e){var i;Do(n,"temp"),void 0!==n.styleCleanup&&n.styleCleanup(n.triggered),!0===n.triggered?void 0!==e&&jo(e):clearTimeout(n.timer),null==(i=null==t?void 0:t.touchEnd)||i.call(t,e)}},o=[600,5,7];"string"==typeof t.arg&&t.arg.length>0&&t.arg.split(":").forEach(((e,t)=>{const i=parseInt(e,10);i&&(o[t]=i)})),[n.duration,n.touchSensitivity,n.mouseSensitivity]=o,e.__vctouchhold=n,!0===i.mouse&&Ao(n,"main",[[e,"mousedown","mouseStart","passive"+(!0===i.mouseCapture?"Capture":"")]]),!0===Fo().hasTouch&&Ao(n,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;void 0!==i&&t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;void 0!==t&&(Do(t,"main"),Do(t,"temp"),clearTimeout(t.timer),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__vctouchhold)}});const Wo=["left","right","up","down","horizontal","vertical"],Go={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function $o(e){const t={};return Wo.forEach((i=>{e[i]&&(t[i]=!0)})),0===Object.keys(t).length?Go:(!0===t.horizontal&&(t.left=t.right=!0),!0===t.vertical&&(t.up=t.down=!0),!0===t.left&&!0===t.right&&(t.horizontal=!0),!0===t.up&&!0===t.down&&(t.vertical=!0),!0===t.horizontal&&!0===t.vertical&&(t.all=!0),t)}const Zo=Fo().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e;function qo(e,t){return void 0===t.event&&void 0!==e.target&&!0!==e.target.draggable&&"function"==typeof t.handler&&"INPUT"!==e.target.nodeName.toUpperCase()&&(void 0===e.qClonedBy||-1===e.qClonedBy.indexOf(t.uid))}function Yo(e,t,i){const n=To(e);let o,r=n.left-t.event.x,a=n.top-t.event.y,s=Math.abs(r),l=Math.abs(a);const c=t.direction;!0===c.horizontal&&!0!==c.vertical?o=r<0?"left":"right":!0!==c.horizontal&&!0===c.vertical?o=a<0?"up":"down":!0===c.up&&a<0?(o="up",s>l&&(!0===c.left&&r<0?o="left":!0===c.right&&r>0&&(o="right"))):!0===c.down&&a>0?(o="down",s>l&&(!0===c.left&&r<0?o="left":!0===c.right&&r>0&&(o="right"))):!0===c.left&&r<0?(o="left",s<l&&(!0===c.up&&a<0?o="up":!0===c.down&&a>0&&(o="down"))):!0===c.right&&r>0&&(o="right",s<l&&(!0===c.up&&a<0?o="up":!0===c.down&&a>0&&(o="down")));let u=!1;if(void 0===o&&!1===i){if(!0===t.event.isFirst||void 0===t.event.lastDir)return{};o=t.event.lastDir,u=!0,"left"===o||"right"===o?(n.left-=r,s=0,r=0):(n.top-=a,l=0,a=0)}return{synthetic:u,payload:{evt:e,touch:!0!==t.event.mouse,mouse:!0===t.event.mouse,position:n,direction:o,isFirst:t.event.isFirst,isFinal:!0===i,duration:Date.now()-t.event.time,distance:{x:s,y:l},offset:{x:r,y:a},delta:{x:n.left-t.event.lastX,y:n.top-t.event.lastY}}}}let Xo=0;var Qo=_o({name:"touch-pan",beforeMount(e,{value:t,modifiers:i}){if(!0!==i.mouse&&!0!==Fo().hasTouch)return;function n(e,t){!0===i.mouse&&!0===t?jo(e):(!0===i.stop&&Io(e),!0===i.prevent&&Mo(e))}const o={uid:"qvtp_"+Xo++,handler:t,modifiers:i,direction:$o(i),noop:Eo,mouseStart(e){qo(e,o)&&Po(e)&&(Ao(o,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),o.start(e,!0))},touchStart(e){if(qo(e,o)){const t=e.target;Ao(o,"temp",[[t,"touchmove","move","notPassiveCapture"],[t,"touchcancel","end","passiveCapture"],[t,"touchend","end","passiveCapture"]]),o.start(e)}},start(t,n){if(!0===Fo().isFireFox&&Lo(e,!0),o.lastEvt=t,!0===n||!0===i.stop){if(!0!==o.direction.all&&(!0!==n||!0!==o.modifiers.mouseAllDir&&!0!==o.modifiers.mousealldir)){const e=t.type.indexOf("mouse")>-1?new MouseEvent(t.type,t):new TouchEvent(t.type,t);!0===t.defaultPrevented&&Mo(e),!0===t.cancelBubble&&Io(e),Object.assign(e,{qKeyEvent:t.qKeyEvent,qClickOutside:t.qClickOutside,qAnchorHandled:t.qAnchorHandled,qClonedBy:void 0===t.qClonedBy?[o.uid]:t.qClonedBy.concat(o.uid)}),o.initialEvent={target:t.target,event:e}}Io(t)}const{left:r,top:a}=To(t);o.event={x:r,y:a,time:Date.now(),mouse:!0===n,detected:!1,isFirst:!0,isFinal:!1,lastX:r,lastY:a}},move(e){if(void 0===o.event)return;const t=To(e),r=t.left-o.event.x,a=t.top-o.event.y;if(0===r&&0===a)return;o.lastEvt=e;const s=!0===o.event.mouse,l=()=>{let t;n(e,s),!0!==i.preserveCursor&&!0!==i.preservecursor&&(t=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),!0===s&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ho(),o.styleCleanup=e=>{if(o.styleCleanup=void 0,void 0!==t&&(document.documentElement.style.cursor=t),document.body.classList.remove("non-selectable"),!0===s){const t=()=>{document.body.classList.remove("no-pointer-events--children")};void 0!==e?setTimeout((()=>{t(),e()}),50):t()}else void 0!==e&&e()}};if(!0===o.event.detected){!0!==o.event.isFirst&&n(e,o.event.mouse);const{payload:t,synthetic:i}=Yo(e,o,!1);return void(void 0!==t&&(!1===o.handler(t)?o.end(e):(void 0===o.styleCleanup&&!0===o.event.isFirst&&l(),o.event.lastX=t.position.left,o.event.lastY=t.position.top,o.event.lastDir=!0===i?void 0:t.direction,o.event.isFirst=!1)))}if(!0===o.direction.all||!0===s&&(!0===o.modifiers.mouseAllDir||!0===o.modifiers.mousealldir))return l(),o.event.detected=!0,void o.move(e);const c=Math.abs(r),u=Math.abs(a);c!==u&&(!0===o.direction.horizontal&&c>u||!0===o.direction.vertical&&c<u||!0===o.direction.up&&c<u&&a<0||!0===o.direction.down&&c<u&&a>0||!0===o.direction.left&&c>u&&r<0||!0===o.direction.right&&c>u&&r>0?(o.event.detected=!0,o.move(e)):o.end(e,!0))},end(t,i){if(void 0!==o.event){if(Do(o,"temp"),!0===Fo().isFireFox&&Lo(e,!1),!0===i)void 0!==o.styleCleanup&&o.styleCleanup(),!0!==o.event.detected&&void 0!==o.initialEvent&&o.initialEvent.target.dispatchEvent(o.initialEvent.event);else if(!0===o.event.detected){!0===o.event.isFirst&&o.handler(Yo(void 0===t?o.lastEvt:t,o).payload);const{payload:e}=Yo(void 0===t?o.lastEvt:t,o,!0),i=()=>{o.handler(e)};void 0!==o.styleCleanup?o.styleCleanup(i):i()}o.event=void 0,o.initialEvent=void 0,o.lastEvt=void 0}}};if(e.__qtouchpan=o,!0===i.mouse){const t=!0===i.mouseCapture||!0===i.mousecapture?"Capture":"";Ao(o,"main",[[e,"mousedown","mouseStart",`passive${t}`]])}!0===Fo().hasTouch&&Ao(o,"main",[[e,"touchstart","touchStart","passive"+(!0===i.capture?"Capture":"")],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchpan;void 0!==i&&(t.oldValue!==t.value&&("function"!=typeof t.value&&i.end(),i.handler=t.value),i.direction=$o(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;void 0!==t&&(void 0!==t.event&&t.end(),Do(t,"main"),Do(t,"temp"),!0===Fo().isFireFox&&Lo(e,!1),void 0!==t.styleCleanup&&t.styleCleanup(),delete e.__qtouchpan)}});function Jo(){let e,t;const i=new Promise((function(i,n){e=i,t=n}));return{resolve:e,reject:t,promise:i}}function Ko(e,t,i){const n=bo(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=n.$services.primitives;return i&&i.add(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.contains(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function er(e,t,i){i.cesiumEvents=["primitiveAdded","primitiveRemoved"];const n=bo(e,t,i);if(void 0===n)return;i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject,o=e&&e.add(t);return Cesium.defined(o)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};return a(oe,Se(n.getServices(),{get primitives(){return i.cesiumObject}})),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function tr(e,t,i){const n=bo(e,t,i);if(void 0===n)return;const{emit:r}=t,s=o(0),l=o([]);i.createCesiumObject=async()=>{var t,o;const r=n.transformProps(e);if(r.asynchronous||await(null==(o=(t=Cesium[i.cesiumClass]).initializeTerrainHeights)?void 0:o.call(t)),e.geometryInstances&&(m(e.geometryInstances)?(l.value.push(...e.geometryInstances),s.value+=e.geometryInstances.length):(s.value+=1,l.value.push(e.geometryInstances))),"Cesium3DTileset"!==i.cesiumClass&&"I3SDataProvider"!==i.cesiumClass||!at(Cesium.VERSION,"1.104"))return new Cesium[i.cesiumClass](r);try{return Cesium.defined(e.assetId)&&"Cesium3DTileset"===i.cesiumClass?await Cesium[i.cesiumClass].fromIonAssetId(e.assetId,r):await Cesium[i.cesiumClass].fromUrl(e.url,r)}catch(a){n.logger.error(`Failed to load tileset: ${a}`)}},i.mount=async()=>{var e;const t=n.$services.primitives,o=i.cesiumObject;null==(e=null==o?void 0:o.readyPromise)||e.then((e=>{Pe(i,"readyPromise")&&r("readyPromise",e,n.$services.viewer,i.proxy)})),o._vcParent=t;const a=t&&t.add(o);if("ParticleSystem"===i.cesiumClass){const e=setInterval((()=>{Cesium.defined(a._billboardCollection)&&(a._billboardCollection._vcParent=a,clearInterval(e))}),500)}return Cesium.defined(a)},i.unmount=async()=>{s.value=0,l.value=[];const e=n.$services.primitives,t=i.cesiumObject;return e&&e.remove(t)};return a(oe,Se(n.getServices(),{get primitive(){return i.cesiumObject}})),Object.assign(i.proxy,{__updateGeometryInstances:(e,n)=>{if(l.value.push(e),n===s.value-1){if(Pe(i,"update:geometryInstances"))t.emit("update:geometryInstances",l.value);else{i.cesiumObject.geometryInstances=0===n?e:l.value}}return!0},__removeGeometryInstances:e=>{const t=l.value.indexOf(e);return l.value.splice(t,1),!0},__childCount:s}),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}const ir=52.35987755982988,nr=3.141592653589793,or=6378245,rr=.006693421622965943,ar=function(e,t){const i=(e=+e)-.0065,n=(t=+t)-.006,o=Math.sqrt(i*i+n*n)-2e-5*Math.sin(n*ir),r=Math.atan2(n,i)-3e-6*Math.cos(i*ir);return[o*Math.cos(r),o*Math.sin(r)]},sr=function(e,t){t=+t,e=+e;const i=Math.sqrt(e*e+t*t)+2e-5*Math.sin(t*ir),n=Math.atan2(t,e)+3e-6*Math.cos(e*ir);return[i*Math.cos(n)+.0065,i*Math.sin(n)+.006]},lr=function(e,t){if(pr(e=+e,t=+t))return[e,t];{let i=ur(e-105,t-35),n=dr(e-105,t-35);const o=t/180*nr;let r=Math.sin(o);r=1-rr*r*r;const a=Math.sqrt(r);i=180*i/(or*(1-rr)/(r*a)*nr),n=180*n/(or/a*Math.cos(o)*nr);return[e+n,t+i]}},cr=function(e,t){if(pr(e=+e,t=+t))return[e,t];{let i=ur(e-105,t-35),n=dr(e-105,t-35);const o=t/180*nr;let r=Math.sin(o);r=1-rr*r*r;const a=Math.sqrt(r);i=180*i/(or*(1-rr)/(r*a)*nr),n=180*n/(or/a*Math.cos(o)*nr);return[2*e-(e+n),2*t-(t+i)]}};var ur=function(e,t){let i=2*(e=+e)-100+3*(t=+t)+.2*t*t+.1*e*t+.2*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*nr)+20*Math.sin(2*e*nr))/3,i+=2*(20*Math.sin(t*nr)+40*Math.sin(t/3*nr))/3,i+=2*(160*Math.sin(t/12*nr)+320*Math.sin(t*nr/30))/3,i},dr=function(e,t){let i=300+(e=+e)+2*(t=+t)+.1*e*e+.1*e*t+.1*Math.sqrt(Math.abs(e));return i+=2*(20*Math.sin(6*e*nr)+20*Math.sin(2*e*nr))/3,i+=2*(20*Math.sin(e*nr)+40*Math.sin(e/3*nr))/3,i+=2*(150*Math.sin(e/12*nr)+300*Math.sin(e/30*nr))/3,i},pr=function(e,t){t=+t;return!((e=+e)>73.66&&e<135.05&&t>3.86&&t<53.55)};const mr=Object.freeze(Object.defineProperty({__proto__:null,bd09togcj02:ar,gcj02tobd09:sr,gcj02towgs84:cr,wgs84togcj02:lr},Symbol.toStringTag,{value:"Module"}));function vr(e,t,i){i.cesiumEvents=["errorEvent"];const n=bo(e,t,i);if(void 0===n)return;const{emit:o}=t;return i.createCesiumObject=async()=>{const t=n.transformProps(e);return at(Cesium.VERSION,"1.104")&&"function"==typeof Cesium[i.cesiumClass].fromUrl?await Cesium[i.cesiumClass].fromUrl(t.url,t):new Cesium[i.cesiumClass](t)},i.mount=async()=>{var t,r,a,s,l;const{viewer:c}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){i.renderByParent=!0;const n=i.cesiumObject;if(null==(t=null==n?void 0:n.readyPromise)||t.then((()=>{Pe(i,"readyPromise")&&o("readyPromise",n,c,i.proxy)})),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to){if(!("VcImageryProviderBaidu"===(null==(r=i.proxy)?void 0:r.$options.name)||"VcImageryProviderTianditu"===(null==(a=i.proxy)?void 0:a.$options.name)&&"4490"===n._epsgCode)){const{WebMercatorTilingScheme:t,Cartographic:i,Math:o}=Cesium,r=new t,a=r.projection,s=a.project,l=a.unproject;let c,u;"WGS84"===e.projectionTransforms.to.toUpperCase()?(c="wgs84togcj02",u="gcj02towgs84"):"GCJ02"===e.projectionTransforms.to.toUpperCase()&&(c="gcj02towgs84",u="wgs84togcj02"),c&&u&&(a.project=function(e,t){return t=t||new Cesium.Cartesian3,t=mr[c](o.toDegrees(e.longitude),o.toDegrees(e.latitude)),s.call(this,new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1])))},a.unproject=function(e,t){t=t||new i;const n=l.call(this,e);return t=mr[u](o.toDegrees(n.longitude),o.toDegrees(n.latitude)),new i(o.toRadians(null==t?void 0:t[0]),o.toRadians(null==t?void 0:t[1]))},n._tilingScheme=r)}}const l=Ie(i).proxy;return l&&(null==(s=l.__updateProvider)?void 0:s.call(l,n))}{const e=i.cesiumObject;return null==(l=null==e?void 0:e.readyPromise)||l.then((()=>{Pe(i,"readyPromise")&&o("readyPromise",e,c,i.proxy)})),c.terrainProvider=e,!0}},i.unmount=async()=>{var e,t;const{viewer:r}=n.$services;if(-1!==i.cesiumClass.indexOf("ImageryProvider")){const t=Ie(i).proxy;return t&&(null==(e=t.__updateProvider)?void 0:e.call(t,void 0))}{const e=new Cesium.EllipsoidTerrainProvider;return null==(t=null==e?void 0:e.readyPromise)||t.then((()=>{Pe(i,"readyPromise")&&o("readyPromise",e,r,i.proxy)})),r.terrainProvider=e,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function hr(e){var t,i,n;const o=r(),a=null===(null==o?void 0:o.parent)?o.vnode.appContext&&o.vnode.appContext.provides:null==(t=null==o?void 0:o.parent)?void 0:t.provides;a&&oe in a||e||(e="cesiumContainer");const s=Oe();if(o){if(e){const t=null==(n=null==(i=o.appContext.config.globalProperties)?void 0:i.$VueCesium)?void 0:n[e];return t||s.warn(`Failed to get $vc, reason: vc-viewer with containerId: ${e} was not found.`),t}return c(oe)}s.warn("VueCesium useVueCesium() can only be used inside setup().")}var gr={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,baseLayer:Object,terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568.497290563},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object,containerId:String};class fr{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(e){const{PrimitiveCollection:t,Cesium3DTileset:i,Model:n}=Cesium,o=e.length;for(let r=0;r<o;r++){const o=e.get(r);o instanceof t?this.hidePrimitiveCollection(o):(this.states.push(o.show),o instanceof i||o instanceof n||(o.show=!1))}}restorePrimitiveCollection(e){const{PrimitiveCollection:t}=Cesium,i=e.length;for(let n=0;n<i;n++){const i=e.get(n);i instanceof t?this.restorePrimitiveCollection(i):i.show=this.states.get(this.count++)}}hide(e){this.states.length=0,this.hidePrimitiveCollection(e.primitives),this.hidePrimitiveCollection(e.groundPrimitives)}restore(e){this.count=0,this.restorePrimitiveCollection(e.primitives),this.restorePrimitiveCollection(e.groundPrimitives)}}var yr={BeforeDraw:0,Drawing:1,AfterDraw:2};const br=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),Cr=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),wr=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),Or=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),_r=class e{constructor(e){e=de(e,{}),this.distanceUnits=de(e.distanceUnits,br.METERS),this.areaUnits=de(e.areaUnits,Cr.SQUARE_METERS),this.volumeUnits=de(e.volumeUnits,wr.CUBIC_METERS),this.angleUnits=de(e.angleUnits,Or.DEGREES),this.slopeUnits=de(e.slopeUnits,Or.DEGREES)}static distanceToString(t,i,n,o){return Ir(t=e.convertDistance(t,br.METERS,i),n,o)+e.getDistanceUnitSpacing(i)+e.getDistanceUnitSymbol(i)}static areaToString(t,i,n,o){return Ir(t=e.convertArea(t,Cr.SQUARE_METERS,i),n,o)+e.getAreaUnitSpacing(i)+e.getAreaUnitSymbol(i)}static angleToString(t,i,n,o){const{Math:r}=Cesium;if(i===Or.DEGREES||i===Or.RADIANS||i===Or.GRADE)return Ir(t=Tr(t,i),n,o)+e.getAngleUnitSpacing(i)+e.getAngleUnitSymbol(i);if(i===Or.DEGREES_MINUTES_SECONDS){const e=r.toDegrees(t),i=e<0?"-":"",n=Math.floor(e),a=60*(e-n),s=Math.floor(a);return i+n+"° "+s+"' "+Ir(60*(a-s),void 0,o)+'"'}Or.RATIO}static volumeToString(t,i,n,o){return Ir(t=e.convertArea(t,wr.CUBIC_METERS,i),n,o)+e.getVolumeUnitSpacing(i)+e.getVolumeUnitSymbol(i)}static getDistanceUnitSpacing(e){return" "}static getAreaUnitSpacing(e){return" "}static getAngleUnitSpacing(e){return e===Or.RADIANS?" ":""}static getVolumeUnitSpacing(e){return" "}static getDistanceUnitSymbol(e){switch(e){case br.METERS:return"m";case br.CENTIMETERS:return"cm";case br.KILOMETERS:return"km";case br.FEET:case br.US_SURVEY_FEET:return"ft";case br.INCHES:return"in";case br.YARDS:return"yd";case br.MILES:return"mi";default:return}}static getAreaUnitSymbol(e){switch(e){case Cr.SQUARE_METERS:return"m²";case Cr.SQUARE_CENTIMETERS:return"cm²";case Cr.SQUARE_KILOMETERS:return"km²";case Cr.SQUARE_FEET:return"sq ft";case Cr.SQUARE_INCHES:return"sq in";case Cr.SQUARE_YARDS:return"sq yd";case Cr.SQUARE_MILES:return"sq mi";case Cr.ACRES:return"ac";case Cr.HECTARES:return"ha";default:return}}static getVolumeUnitSymbol(e){switch(e){case wr.CUBIC_METERS:return"m³";case wr.CUBIC_CENTIMETERS:return"cm³";case wr.CUBIC_KILOMETERS:return"km³";case wr.CUBIC_FEET:return"cu ft";case wr.CUBIC_INCHES:return"cu in";case wr.CUBIC_YARDS:return"cu yd";case wr.CUBIC_MILES:return"cu mi";default:return}}static getAngleUnitSymbol(e){return e===Or.DEGREES?"°":e===Or.RADIANS?"rad":e===Or.GRADE?"%":void 0}static convertDistance(e,t,i){return t===i?e:e*Sr(t)*(1/Sr(i))}static convertArea(e,t,i){return t===i?e:e*Er(t)*(1/Er(i))}static convertVolume(e,t,i){return t===i?e:e*Pr(t)*(1/Pr(i))}static convertAngle(e,t,i){return t===i?e:Tr(function(e,t){const{defined:i,Math:n,RuntimeError:o}=Cesium;if(t===Or.RADIANS)return e;if(t===Or.DEGREES)return n.toRadians(e);if(t===Or.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===Or.RATIO)return Math.atan(e);if(t===Or.DEGREES_MINUTES_SECONDS){const t=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(t))throw new o("Could not convert angle to radians: "+e);let r=0<t[1].length?-1:1;const a=parseInt(t[2]),s=parseInt(t[3]),l=parseFloat(t[4]);let c=t[5];1===c.length&&("W"!==(c=c.toUpperCase())&&"S"!==c||(r*=-1));const u=r*(a+s/60+l/3600);return n.toRadians(u)}}(e,t),i)}static longitudeToString(t,i,n,o){return e.angleToString(Math.abs(t),i,n,o)+" "+(t<0?"W":"E")}static latitudeToString(t,i,n,o){return e.angleToString(Math.abs(t),i,n,o)+" "+(t<0?"S":"N")}};_r.numberToString=function(e,t,i){return Ir(e,t,i)};let xr=_r;function Sr(e){switch(e){case br.METERS:return 1;case br.CENTIMETERS:return.01;case br.KILOMETERS:return 1e3;case br.FEET:return.3048;case br.US_SURVEY_FEET:return 1200/3937;case br.INCHES:return.254;case br.YARDS:return.9144;case br.MILES:return 1609.344;default:return 1}}function Er(e){switch(e){case Cr.SQUARE_METERS:return 1;case Cr.SQUARE_CENTIMETERS:return 1e-4;case Cr.SQUARE_KILOMETERS:return 1e6;case Cr.SQUARE_FEET:return.09290304;case Cr.SQUARE_INCHES:return 64516e-8;case Cr.SQUARE_YARDS:return.83612736;case Cr.SQUARE_MILES:return 2589988.110336;case Cr.ACRES:return 4046.85642232;case Cr.HECTARES:return 1e4;default:return 1}}function Pr(e){switch(e){case wr.CUBIC_METERS:return 1;case wr.CUBIC_CENTIMETERS:return 1e-6;case wr.CUBIC_KILOMETERS:return 1e9;case wr.CUBIC_FEET:return.09290304*.3048;case wr.CUBIC_INCHES:return 16387064e-12;case wr.CUBIC_YARDS:return.764554857984;case wr.CUBIC_MILES:return 4168181825.44058;default:return 1}}function Tr(e,t){const{Math:i}=Cesium;return t===Or.RADIANS?e:t===Or.DEGREES?i.toDegrees(e):t===Or.GRADE?i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e):t===Or.RATIO?Math.sin(e)/Math.cos(e):void 0}function Ir(e,t,i){const n=function(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};e=Cesium.defaultValue(e,2),"number"==typeof e?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n="function"==typeof e?e(t,i):e;return n}(i,e,t),o=e.toLocaleString(t,n);return o===(-0).toLocaleString(t,n)?(0).toLocaleString(t,n):o}class Mr{constructor(e){const{defined:t,defaultValue:i,createGuid:n,BoundingSphere:o,Ellipsoid:r,ClassificationType:a,ArcType:s}=Cesium;e=i(e,{}),this.show=i(e.show,!0),this._id=t(e.id)?e.id:n(),this._ellipsoid=i(e.ellipsoid,r.WGS84),this._appearance=i(e.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=e.depthFailAppearance,this._positions=i(e.positions,[]),this._polygonHierarchy=e.polygonHierarchy,this._clampToGround=i(e.clampToGround,!1),this._classificationType=i(e.classificationType,a.BOTH),this._arcType=i(e.arcType,s.RHUMB),this._allowPicking=i(e.allowPicking,!0),this._asynchronous=i(e.asynchronous,!1),this._boundingSphere=new o,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(e){this._positions=e,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(e){this._polygonHierarchy=e,this._update=!0}get appearance(){return this._appearance}set appearance(e){this._appearance=e,void 0!==this._primitive&&(this._primitive.appearance=e)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(e){this._depthFailAppearance=e,void 0!==this._primitive&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=e)}get id(){return this._id}set id(e){this._id=e}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(e){this._clampToGround=e}get classificationType(){return this._classificationType}set classificationType(e){this._classificationType=e,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(e){this._allowPicking=e}get asynchronous(){return this._asynchronous}set asynchronous(e){this._asynchronous=e}async update(e){if(this.show){const t=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(t.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){let e;this._update=!1,e=this._clampToGround?this._createGroundPolygon():this._createPolygon(),e.then((e=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=e,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(t,this._boundingSphere)}))}this._primitive&&this._primitive.update(e)}}}async _createPolygon(){const{Primitive:e,GeometryInstance:t,CoplanarPolygonGeometry:i,Cartesian3:n}=Cesium;return new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:e,GeometryInstance:t,PolygonGeometry:i,Cartesian3:n}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new e({geometryInstances:new t({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid,arcType:this._arcType}):i.fromPositions({positions:this._positions.map((function(e){return n.clone(e)})),ellipsoid:this._ellipsoid,arcType:this._arcType}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class jr{constructor(e){const{SampledPositionProperty:t,Entity:i,ExtrapolationType:n,VelocityOrientationProperty:o,CallbackProperty:r}=Cesium;this._lastTime=void 0,this._sampledPosition=new t,this._sampledPosition.forwardExtrapolationType=e.forwardExtrapolationType||n.HOLD,this._sampledPosition.backwardExtrapolationType=e.backwardExtrapolationType||n.HOLD,this._cache=[],this._maxCacheSize=e.maxCacheSize||10;const a=new i(e);if(a.position=this._sampledPosition,!Cesium.defined(e.orientation)){const e=new o(this._sampledPosition);let t;a.orientation=new r(((i,n)=>{const o=e.getValue(i);return o?(t=o,o):t}),!1)}this._entity=a,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(e){this._entity.id=e}set maxCacheSize(e){this._maxCacheSize=e}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const e=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),t=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:e,stop:t})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(e,t){let i;if(this._removePosition(),"number"==typeof t){const e=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(e,t,new Cesium.JulianDate),Cesium.destroyObject(e)}else i=et(t);return this._sampledPosition.addSample(i,ke(e)),this._lastTime=i,this._cache.push(this._lastTime),i}}const Lr={position:0,normal:1};class Ar{constructor(e){const{defaultValue:t,Matrix4:i,Math:n,Color:o,BoundingSphere:r}=Cesium;this.modelMatrix=t(e.modelMatrix,new i),this.fovH=t(e.fovH,n.toRadians(60)),this.fovV=t(e.fovV,n.toRadians(30)),this.segmentH=t(e.segmentH,16),this.segmentV=t(e.segmentV,8),this.subSegmentH=t(e.subSegmentH,3),this.subSegmentV=t(e.subSegmentV,3),this._faceColor=t(e.faceColor,new o(1,1,1,.1)),this._lineColor=t(e.lineColor,new o(1,1,1,.4)),this.show=t(e.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new r,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(e){this._faceColor=e}get lineColor(){return this._lineColor}set lineColor(e){this._lineColor=e}update(e){if(this.show&&e.passes.render){const{clone:t,Matrix4:i,defined:n,BoundingSphere:o}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=t(i.IDENTITY),this._destroyVideoMemory()),n(this._command)||this._createCommand(e.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=o.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&e.commandList.push(this._command),this._lineCommand&&e.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(e){const{Appearance:t,RenderState:i,ShaderSource:n,ShaderProgram:o,BufferUsage:r,IndexDatatype:a,VertexArray:s,ComponentDatatype:l,BoundingSphere:c,DrawCommand:u,PrimitiveType:d,Pass:p,Matrix4:m}=Cesium,v=this,h=this._subSegmentH*this._segmentH,g=this._subSegmentV*this._segmentV,f=Dr(this._fovH,this._fovV,h,g),y=Dr(this._fovH,this._fovV,h,g),b=function(e,t){const i=e*t*6,n=new Uint16Array(i);for(let o=0;o<e;o++)for(let i=0;i<t;i++){const t=i*(1+e)+o,r=i*(1+e)+o+1,a=(i+1)*(1+e)+o,s=(i+1)*(1+e)+o+1,l=6*(i*e+o);n[0+l]=t,n[1+l]=r,n[2+l]=s,n[3+l]=t,n[4+l]=s,n[5+l]=a}return n}(h,g),C=function(e,t,i,n){const o=e*i,r=t*n,a=new Uint16Array((e+1)*(2*r)+(t+1)*(2*o)+8);for(let c=0;c<e+1;c++)for(let e=0;e<r;e++){const t=c*i;a[2*(c*r+e)+0]=e*(1+o)+t,a[2*(c*r+e)+1]=(e+1)*(1+o)+t}const s=(e+1)*(2*r);for(let c=0;c<t;c++)for(let e=0;e<o;e++){const t=c*n;a[s+2*(e+c*o)]=t*(1+o)+e,a[s+2*(e+c*o)+1]=t*(1+o)+e+1}const l=(e+1)*(2*r)+(t+1)*(2*o);return a[l]=0,a[l+1]=(1+o)*(1+r),a[l+2]=o,a[l+3]=(1+o)*(1+r),a[l+4]=(1+o)*r,a[l+5]=(1+o)*(1+r),a[l+6]=(1+o)*(1+r)-1,a[l+7]=(1+o)*(1+r),a}(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),w=t.getDefaultRenderState(!0,!1,void 0),O=i.fromCache(w),_=e.webgl2,x=new n({sources:[`\n        // 使用double类型的position进行计算\n        // attribute vec3 position3DHigh;\n        // attribute vec3 position3DLow;\n        ${_?"in":"attribute"} vec3 position;\n        ${_?"in":"attribute"} vec3 normal;\n        // attribute vec2 st;\n        // attribute float batchId;\n        ${_?"out":"varying"} vec3 v_positionEC;\n        ${_?"out":"varying"} vec3 v_normalEC;\n        // varying vec2 v_st;\n        void main()\n          {\n            // 使用double类型的position进行计算\n            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);\n            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;\n            // position in eye coordinates\n            // v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            // gl_Position = czm_modelViewProjectionRelativeToEye * p;\n            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;\n            // position in eye coordinates\n            v_normalEC = czm_normal * normal;\n            // normal in eye coordinates\n            // v_st = st;\n            gl_Position = czm_modelViewProjection * vec4(position, 1.0);\n          }\n        `]}),S=new n({sources:[`\n        ${_?"in":"varying"} vec3 v_positionEC;\n        ${_?"in":"varying"} vec3 v_normalEC;\n        // varying vec2 v_st;\n        // uniform sampler2D myImage;\n        uniform vec4 vcColor;\n        void main()\n        {\n          vec3 positionToEyeEC = -v_positionEC;\n          vec3 normalEC = normalize(v_normalEC);\n          #ifdef FACE_FORWARD\n          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\n          #endif\n          czm_materialInput materialInput;\n          materialInput.normalEC = normalEC;\n          materialInput.positionToEyeEC = positionToEyeEC;\n          // materialInput.st = v_st;\n          //czm_material material = czm_getMaterial(materialInput);\n          czm_material material = czm_getDefaultMaterial(materialInput);\n          // material.diffuse = texture2D(myImage, materialInput.st).rgb;\n          material.diffuse = vcColor.rgb;\n          material.alpha = vcColor.a;\n          #ifdef FLAT\n          ${_?"out_FragColor":"gl_FragColor"} = vec4(material.diffuse + material.emission, material.alpha);\n          #else\n          ${_?"out_FragColor":"gl_FragColor"} = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);\n          #endif\n        }\n        `]}),E={vcColor:function(){return v._faceColor}},P={vcColor:function(){return v._lineColor}},T=o.fromCache({context:e,vertexShaderSource:x,fragmentShaderSource:S,attributeLocations:Lr});this._shaderprogram=T;const I=Cesium.Buffer.createVertexBuffer({context:e,typedArray:f,usage:r.STATIC_DRAW}),M=Cesium.Buffer.createVertexBuffer({context:e,typedArray:y,usage:r.STATIC_DRAW}),j=Cesium.Buffer.createIndexBuffer({context:e,typedArray:b,usage:r.STATIC_DRAW,indexDatatype:a.UNSIGNED_SHORT}),L=Cesium.Buffer.createIndexBuffer({context:e,typedArray:C,usage:r.STATIC_DRAW,indexDatatype:a.UNSIGNED_SHORT}),A=new s({context:e,attributes:[{index:0,vertexBuffer:I,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:j}),D=new s({context:e,attributes:[{index:0,vertexBuffer:I,componentsPerAttribute:3,componentDatatype:l.FLOAT},{index:1,vertexBuffer:M,componentsPerAttribute:3,componentDatatype:l.FLOAT}],indexBuffer:L});this._initBoundingSphere=c.fromVertices(f),this._command=new u({vertexArray:A,primitiveType:d.TRIANGLES,renderState:O,shaderProgram:T,uniformMap:E,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0}),this._lineCommand=new u({vertexArray:D,primitiveType:d.LINES,renderState:O,shaderProgram:T,uniformMap:P,owner:this,pass:p.TRANSLUCENT,modelMatrix:new m,boundingVolume:new c,cull:!0})}_destroyVideoMemory(){const{defined:e}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),e(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),e(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function Dr(e,t,i,n){const o=new Float32Array((i+1)*(n+1)*3+3);for(let r=0;r<i+1;r++)for(let a=0;a<n+1;a++){const s=e*(r/i-.5),l=t*(a/n-.5),c=[Math.cos(-s)*Math.cos(-l),Math.sin(-s)*Math.cos(-l),Math.sin(l)];o[3*(a*(i+1)+r)+0]=c[0],o[3*(a*(i+1)+r)+1]=c[1],o[3*(a*(i+1)+r)+2]=c[2]}return o[(i+1)*(n+1)*3+0]=0,o[(i+1)*(n+1)*3+1]=0,o[(i+1)*(n+1)*3+2]=0,o}let kr=class{constructor(e){e=de(e,{}),this._enabled=de(e.enabled,!1),this._pixelRange=de(e.pixelRange,80),this._minimumClusterSize=de(e.minimumClusterSize,2),this._clusterBillboards=de(e.clusterBillboards,!0),this._clusterLabels=de(e.clusterLabels,!0),this._clusterPoints=de(e.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new Cesium.Event,this.show=de(e.show,!0)}_initialize(e){this._scene=e;const t=function(e){const{defined:t,LabelCollection:i,BillboardCollection:n,PointPrimitiveCollection:o,Billboard:r,Matrix4:a,Cartesian3:s,Cartesian2:l,BoundingRectangle:c}=Cesium,u=new c,d=new c,p=new c;return function(m){if(t(m)&&m<.05||!e.enabled)return;const v=e._scene,h=e._labelCollection,g=e._billboardCollection,f=e._pointCollection;if(!t(h)&&!t(g)&&!t(f)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let y=e._clusterLabelCollection,b=e._clusterBillboardCollection,C=e._clusterPointCollection;t(y)?y.removeAll():y=e._clusterLabelCollection=new i({scene:v}),t(b)?b.removeAll():b=e._clusterBillboardCollection=new n({scene:v}),t(C)?C.removeAll():C=e._clusterPointCollection=new o;const O=e._pixelRange,_=e._minimumClusterSize,x=e._previousClusters,S=[],E=e._previousHeight,P=v.camera.positionCartographic.height,T=v.mapProjection.ellipsoid,I=v.camera.positionWC,M=new Cesium.EllipsoidalOccluder(T,I),j=[];let L,A,D,k,R,B,N,V,z,F,H,U;e._clusterLabels&&$r(h,j,v,M,e),e._clusterBillboards&&$r(g,j,v,M,e),e._clusterPoints&&$r(f,j,v,M,e);const W=new w(j,Vr,zr,64,Int32Array);if(P<E)for(D=x.length,L=0;L<D;++L){const i=x[L];if(!M.isPointVisible(i.position))continue;const n=r._computeScreenSpacePosition(a.IDENTITY,i.position,s.ZERO,l.ZERO,v);if(!t(n))continue;const o=1-P/E;let c=i.width=i.width*o,u=i.height=i.height*o;c=Math.max(c,i.minimumWidth),u=Math.max(u,i.minimumHeight);const d=n.x-.5*c,p=n.y-.5*u,m=n.x+c,h=n.y+u;for(R=W.range(d,p,m,h),B=R.length,F=0,z=[],A=0;A<B;++A)N=R[A],V=j[N],V.clustered||(++F,H=V.collection,U=V.index,z.push(H.get(U).id));if(F>=_)for(Wr(i.position,F,z,e),S.push(i),A=0;A<B;++A)j[R[A]].clustered=!0}for(D=j.length,L=0;L<D;++L){const t=j[L];if(t.clustered)continue;t.clustered=!0,H=t.collection,U=t.index;const i=H.get(U);k=Hr(i,t.coord,O,e,u);const n=c.clone(k,d);R=W.range(k.x,k.y,k.x+k.width,k.y+k.height),B=R.length;const o=s.clone(i.position);for(F=1,z=[i.id],A=0;A<B;++A)if(N=R[A],V=j[N],!V.clustered){const t=V.collection.get(V.index),i=Hr(t,V.coord,O,e,p);s.add(t.position,o,o),c.union(n,i,n),++F,z.push(t.id)}if(F>=_){const t=s.multiplyByScalar(o,1/F,o);for(Wr(t,F,z,e),S.push({position:t,width:n.width,height:n.height,minimumWidth:k.width,minimumHeight:k.height}),A=0;A<B;++A)j[R[A]].clustered=!0}else Ur(i,e)}0===y.length&&(y.destroy(),e._clusterLabelCollection=void 0),0===b.length&&(b.destroy(),e._clusterBillboardCollection=void 0),0===C.length&&(C.destroy(),e._clusterPointCollection=void 0),e._previousClusters=S,e._previousHeight=P}}(this);this._cluster=t,this._removeEventListener=e.camera.changed.addEventListener(t)}get enabled(){return this._enabled}set enabled(e){this._enabledDirty=e!==this._enabled,this._enabled=e}get pixelRange(){return this._pixelRange}set pixelRange(e){this._clusterDirty=this._clusterDirty||e!==this._pixelRange,this._pixelRange=e}get minimumClusterSize(){return this._minimumClusterSize}set minimumClusterSize(e){this._clusterDirty=this._clusterDirty||e!==this._minimumClusterSize,this._minimumClusterSize=e}get clusterEvent(){return this._clusterEvent}get clusterBillboards(){return this._clusterBillboards}set clusterBillboards(e){this._clusterDirty=this._clusterDirty||e!==this._clusterBillboards,this._clusterBillboards=e}get clusterLabels(){return this._clusterLabels}set clusterLabels(e){this._clusterDirty=this._clusterDirty||e!==this._clusterLabels,this._clusterLabels=e}get clusterPoints(){return this._clusterPoints}set clusterPoints(e){this._clusterDirty=this._clusterDirty||e!==this._clusterPoints,this._clusterPoints=e}getLabel(e){return Br.call(this,e,"_labelCollection",Cesium.LabelCollection,"_unusedLabelIndices","labelIndex")}removeLabel(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._labelCollection)||!t(i)||!t(i.labelIndex))return;const n=i.labelIndex;i.labelIndex=void 0,Nr(this,e.id);const o=this._labelCollection.get(n);o.show=!1,o.text="",o.id=void 0,this._unusedLabelIndices.push(n),this._clusterDirty=!0}getBillboard(e){return Br.call(this,e,"_billboardCollection",Cesium.BillboardCollection,"_unusedBillboardIndices","billboardIndex")}removeBillboard(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._billboardCollection)||!t(i)||!t(i.billboardIndex))return;const n=i.billboardIndex;i.billboardIndex=void 0,Nr(this,e.id);const o=this._billboardCollection.get(n);o.id=void 0,o.show=!1,o.image=void 0,this._unusedBillboardIndices.push(n),this._clusterDirty=!0}getPoint(e){return Br.call(this,e,"_pointCollection",Cesium.PointPrimitiveCollection,"_unusedPointIndices","pointIndex")}removePoint(e){const{defined:t}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[e.id];if(!t(this._pointCollection)||!t(i)||!t(i.pointIndex))return;const n=i.pointIndex;i.pointIndex=void 0,Nr(this,e.id);const o=this._pointCollection.get(n);o.show=!1,o.id=void 0,this._unusedPointIndices.push(n),this._clusterDirty=!0}update(e){if(!this.show)return;const{defined:t}=Cesium;let i;t(this._labelCollection)&&this._labelCollection.length>0&&0===this._labelCollection.get(0)._glyphs.length&&(i=e.commandList,e.commandList=[],this._labelCollection.update(e),e.commandList=i),t(this._billboardCollection)&&this._billboardCollection.length>0&&!t(this._billboardCollection.get(0).width)&&(i=e.commandList,e.commandList=[],this._billboardCollection.update(e),e.commandList=i),this._enabledDirty&&(this._enabledDirty=!1,function(e){if(e.enabled)return;const{defined:t}=Cesium;t(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy();t(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy();t(e._clusterPointCollection)&&e._clusterPointCollection.destroy();e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,Rr(e._labelCollection),Rr(e._billboardCollection),Rr(e._pointCollection)}(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),t(this._clusterLabelCollection)&&this._clusterLabelCollection.update(e),t(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(e),t(this._clusterPointCollection)&&this._clusterPointCollection.update(e),t(this._labelCollection)&&this._labelCollection.update(e),t(this._billboardCollection)&&this._billboardCollection.update(e),t(this._pointCollection)&&this._pointCollection.update(e)}destroy(){const{defined:e}=Cesium;this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),e(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1}};function Rr(e){const{defined:t}=Cesium;if(!t(e))return;const i=e.length;for(let n=0;n<i;++n)e.get(n).clusterShow=!0}function Br(e,t,i,n,o){const{defined:r}=Cesium;let a=this[t];r(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let s,l,c=this._collectionIndicesByEntity[e.id];if(r(c)||(c=this._collectionIndicesByEntity[e.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),r(a)&&r(c[o]))return a.get(c[o]);r(a)||(a=this[t]=new i({scene:this._scene}));const u=this[n];u.length>0?(s=u.pop(),l=a.get(s)):(l=a.add(),s=a.length-1),c[o]=s;const d=this;return Promise.resolve().then((function(){d._clusterDirty=!0})),l}function Nr(e,t){const{defined:i}=Cesium,n=e._collectionIndicesByEntity[t];i(n.billboardIndex)||i(n.labelIndex)||i(n.pointIndex)||delete e._collectionIndicesByEntity[t]}function Vr(e){return e.coord.x}function zr(e){return e.coord.y}function Fr(e,t){e.x-=t,e.y-=t,e.width+=2*t,e.height+=2*t}function Hr(e,t,i,n,o){const{defined:r,Label:a,Billboard:s,PointPrimitive:l,BoundingRectangle:c}=Cesium,u=new c;if(r(e._labelCollection)&&n._clusterLabels?o=a.getScreenSpaceBoundingBox(e,t,o):r(e._billboardCollection)&&n._clusterBillboards?o=s.getScreenSpaceBoundingBox(e,t,o):r(e._pointPrimitiveCollection)&&n._clusterPoints&&(o=l.getScreenSpaceBoundingBox(e,t,o)),Fr(o,i),n._clusterLabels&&!r(e._labelCollection)&&r(e.id)&&Gr(n,e.id.id)&&r(e.id._label)){const r=n._collectionIndicesByEntity[e.id.id].labelIndex,s=n._labelCollection.get(r),l=a.getScreenSpaceBoundingBox(s,t,u);Fr(l,i),o=c.union(o,l,o)}return o}function Ur(e,t){const{defined:i}=Cesium;if(e.clusterShow=!0,!i(e._labelCollection)&&i(e.id)&&Gr(t,e.id.id)&&i(e.id._label)){const i=t._collectionIndicesByEntity[e.id.id].labelIndex;t._labelCollection.get(i).clusterShow=!0}}function Wr(e,t,i,n){const o={billboard:n._clusterBillboardCollection.add(),label:n._clusterLabelCollection.add(),point:n._clusterPointCollection.add()};o.billboard.show=!1,o.point.show=!1,o.label.show=!0,o.label.text=t.toLocaleString(),o.label.id=i,o.billboard.position=o.label.position=o.point.position=e,o.billboard.owner=n,o.label.owner=n,o.point.owner=n,n._clusterEvent.raiseEvent(i,o)}function Gr(e,t){const{defined:i}=Cesium;return i(e)&&i(e._collectionIndicesByEntity[t])&&i(e._collectionIndicesByEntity[t].labelIndex)}function $r(e,t,i,n,o){const{defined:r,SceneMode:a}=Cesium;if(!r(e))return;const s=e.length;for(let l=0;l<s;++l){const s=e.get(l);if(s.clusterShow=!1,!s.show||o._scene.mode===a.SCENE3D&&!n.isPointVisible(s.position))continue;const c=s.computeScreenSpacePosition(i);r(c)&&t.push({index:l,collection:e,clustered:!1,coord:c})}}let Zr=!1;let qr,Yr=!1;class Xr{constructor(e,t){const{defined:i,DeveloperError:n,PerspectiveFrustum:o,Math:r,Camera:a,ShadowMap:s,ShadowMode:l,Event:c,Cartesian3:u,defaultValue:d,Color:p}=Cesium;if(!i(e))throw new n("scene is required.");this._scene=e,this._frustum=new o,this._frustum.fov=r.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new a(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new s({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),t=t||{},this._scene.globe.shadows=l.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new Ar({}),this._enabledChangedEvent=new c,this._position=new u,this._offsetHeight=d(t.offsetHeight,1.8),this._visibleColor=d(t.visibleColor,new p(0,1,0,1)),this._invisibleColor=d(t.invisibleColor,new p(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=t.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=d(t.lineColor,new p(1,1,1,.4)),this._debugCameraPrimitive.faceColor=d(t.faceColor,new p(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(e){if(isNaN(e)||void 0===e||null==e||e<0||e>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(e),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(e){this.frustum.near!==e&&(this.frustum.near=e)}get far(){return this.far.near}set far(e){this.frustum.far!==e&&(this.frustum.far=e)}get position(){return this._position}set position(e){e instanceof Cesium.Cartesian3&&this.setView({destination:e.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(e){if(isNaN(e)||null==e||null==e)throw new Error("Unacceptable offset.");this._offsetHeight=Number(e),this.setView({destination:this._position,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(e){this._spotLightCamera.heading!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:e,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(e){this._spotLightCamera.pitch!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:e,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(e){this._spotLightCamera.roll!==e&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:e}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(e){this._viewshedShadowMap.enabled!==e&&(e?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(e))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(e){this._visibleColor=e,this._viewshedShadowMap._viewshedColors.visible=e}get invisibleColor(){return this._invisibleColor}set invisibleColor(e){this._invisibleColor=e,this._viewshedShadowMap._viewshedColors.invisible=e}get showGridLine(){return this._showGridLine}set showGridLine(e){this._showGridLine=e,this._debugCameraPrimitive.show=e}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(e){this._debugCameraPrimitive.faceColor=e}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(e){this._debugCameraPrimitive.lineColor=e}update(e){if(this._viewshedShadowMap.enabled){const{ShadowMode:t,Matrix3:i,Matrix4:n,Math:o}=Cesium;if(this._scene.globe.shadows!==t.ENABLED&&(this._scene.globe.shadows=t.ENABLED),e.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const t=this._debugCameraPrimitive.modelMatrix;n.clone(this._spotLightCamera.inverseViewMatrix,t);const r=i.fromRotationZ(.5*o.PI),a=i.fromRotationY(.5*o.PI),s=new i;i.multiply(r,a,s),n.multiplyByMatrix3(t,s,t),n.multiplyByUniformScale(t,this._spotLightCamera.frustum.far,t);const l=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=l.aspectRatio<=1?l.fov:2*Math.atan(Math.tan(.5*l.fov)/l.aspectRatio),this._debugCameraPrimitive.fovH=1<l.aspectRatio?l.fov:2*Math.atan(Math.tan(.5*l.fov)*l.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(e)}}}setView(e){const t=(e=e||{}).destination;if(t instanceof Cesium.Cartesian3){this._position=t.clone();const i=this._offsetHeight,n=Cesium.Cartographic.fromCartesian(t,this._scene.globe.ellipsoid);if(n){n.height=n.height+i;const t=Cesium.Cartesian3.fromRadians(n.longitude,n.latitude,n.height,this._scene.globe.ellipsoid);e.destination=t}}this._spotLightCamera.setView(e)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}const Qr=[class{static extend(e){if(Zr)return;const{Rectangle:t}=Cesium;t.prototype.expand=function(e,i,n){return e=(n=n&&n instanceof t?n:this.clone()).width*(1-e)/2,i=n.height*(1-i)/2,n.west+=e,n.south+=i,n.east-=e,n.north-=i,n.west=n.west<-Math.PI?-Math.PI:n.west,n.east=n.east>Math.PI?Math.PI:n.east,n.north=n.north>Math.PI/2?Math.PI/2:n.north,n.south=n.south<-Math.PI/2?-Math.PI/2:n.south,n},Zr=!0}static revoke(e){if(!Zr)return;const{Rectangle:t}=Cesium;t.prototype.expand=void 0,Zr=!1}},class{static extend(e){if(Yr)return;const t=Cesium.ShadowMapShader;qr=t.createShadowReceiveFragmentShader,t.createShadowReceiveFragmentShader=function(t,i,n,o,r){var a;t=qr.bind(this)(t,i,n,o,r);if(i._isSpotLight){t.sources[0]=`\n          uniform vec4 shadowMap_viewshedVisibleColor;\n          uniform vec4 shadowMap_viewshedInvisibleColor;\n          ${t.sources[0]}\n        `;const i=null==(a=e.scene.context)?void 0:a.webgl2;t.sources[t.sources.length-1]=t.sources[t.sources.length-1].replace((i?"out_FragColor":"gl_FragColor")+".rgb *= visibility;",`\n          float _depth = shadowPosition.z - shadowParameters.depthBias;\n          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);\n          ${i?"out_FragColor":"gl_FragColor"}.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);\n          `),t.sources[t.sources.length-1]=t.sources[t.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")}return t},Yr=!0}static revoke(e){if(!Yr)return;Cesium.ShadowMapShader.createShadowReceiveFragmentShader=qr,Yr=!1}},class{static extend(e){var t;if(Me)return;const{Material:i,Color:n,Cartesian2:o}=Cesium;let r="\nuniform float globalAlpha;\nuniform bool axisY;\nuniform bool mixt;\n\nczm_material czm_getMaterial(czm_materialInput materialInput) {\n  czm_material material = czm_getDefaultMaterial(materialInput);\n  vec2 st = repeat * materialInput.st;\n\n  vec4 colorImage;\n  if (speed != 0.0) {\n    float currTime;\n    if (time < 0.0) {\n      currTime = speed * czm_frameNumber / 1000.0;\n    } else {\n      currTime = time;\n    }\n    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));\n  } else {\n    colorImage = texture(image, st);\n  }\n\n  if (color.a == 0.0) {\n    if (colorImage.rgb == vec3(1.0)) {\n      discard;\n    }\n  }\n\n  if (color.rgb == vec3(1.0)) {\n    material.alpha = colorImage.a * globalAlpha;\n    material.diffuse = colorImage.rgb;\n  } else {\n    material.alpha = colorImage.a * color.a * globalAlpha;\n    if (mixt)\n      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);\n    else\n      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);\n  }\n\n  if (hasImage2) {\n    vec4 colorBG = texture(image2, materialInput.st);\n    if (colorBG.a > 0.5) {\n      material.diffuse = color2.rgb;\n    }\n  }\n  return material;\n}\n",a="\nczm_material czm_getMaterial(czm_materialInput materialInput) {\nczm_material material = czm_getDefaultMaterial(materialInput);\nmaterial.diffuse = 1.5 * color.rgb;\nvec2 st = materialInput.st;\nvec3 str = materialInput.str;\nfloat dis = distance(st, vec2(0.5, 0.5));\nfloat per = fract(time);\nif (abs(str.z) > 0.001) {\n  discard;\n}\nif (dis > 0.5) {\n  discard;\n} else {\n  float perDis = 0.5 / count;\n  float disNum;\n  float bl = .0;\n  for (int i = 0; i <= 9; i++) {\n    if (float(i) <= count) {\n      disNum = perDis *float(i) - dis + per / count;\n      if (disNum > 0.0) {\n        if (disNum < perDis) {\n          bl = 1.0 - disNum / perDis;\n        } else if(disNum - perDis < perDis) {\n          bl = 1.0 - abs(1.0 - disNum / perDis);\n        }\n        material.alpha = pow(bl, gradient);\n      }\n    }\n  }\n}\nreturn material;\n}";(null==(t=e.scene.context)?void 0:t.webgl2)||(r=r.replace(/texture\(/g,"texture2D("),a=a.replace(/texture\(/g,"texture2D(")),i.VcCircleWave="VcCircleWave",Cesium.Material._materialCache.addMaterial(i.VcCircleWave,{fabric:{type:i.VcCircleWave,uniforms:{color:new n(1,0,0,1),time:1,count:1,gradient:.1},source:a},translucent:()=>!0}),i.VcLineFlow="VcLineFlow",Cesium.Material._materialCache.addMaterial(i.VcLineFlow,{fabric:{type:i.VcLineFlow,uniforms:{image:i.DefaultImageId,color:new n(1,1,1,1),repeat:new o(1,1),axisY:!1,mixt:!1,speed:10,time:-1,hasImage2:!1,image2:i.DefaultImageId,color2:new n(1,1,1),globalAlpha:1},source:r},translucent:()=>!0}),Me=!0}static revoke(e){Me&&(Me=!1)}}];const Jr=gr;function Kr(e,t,i){let n,r;const a=new Promise(((e,t)=>{n=e,r=t})),s=o(),l=o(!1),c=y(),{emit:u}=t,d=be(),m=Oe(i);i.mounted=!1,i.vcMitt=c,i.cesiumClass="Viewer",i.children=[];const v=vo(e,i),h=O({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let g=[];m.debug("viewer creating");const{t:C}=mo(),{invokeExtensions:w,revokeExtensions:S}={invokeExtensions:e=>{Qr.forEach((t=>{t.extend(e)}))},revokeExtensions:e=>{Qr.forEach((t=>{t.revoke(e)}))}};b((()=>e.selectionIndicator),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,SelectionIndicator:r}=Cesium;let a;if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()||e){if(!o(t.selectionIndicator)||t.selectionIndicator.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-selectionIndicatorContainer",null==n||n.appendChild(a);const e=new r(a,t.scene);t._selectionIndicator=e}}else a=t.selectionIndicator.container,null==n||n.removeChild(a),t.selectionIndicator.destroy(),t._selectionIndicator=void 0;t.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:e?"added":"removed",target:a})})),b((()=>e.infoBox),(e=>{var t,n;const{viewer:o,viewerElement:r}=i,{defined:a,InfoBox:s}=Cesium,l=["cameraClicked","closeClicked"];let c;if(!a(o.infoBox)||o.infoBox.isDestroyed()||e){if(!a(o.infoBox)||o.infoBox.isDestroyed()){c=document.createElement("div"),c.className="cesium-viewer-infoBoxContainer",null==r||r.appendChild(c);const e=new s(c),i=e.viewModel;o._onInfoBoxCameraClicked&&(null==(t=o._eventHelper)||t.add(i.cameraClicked,o._onInfoBoxCameraClicked,o)),o._onInfoBoxClockClicked&&(null==(n=o._eventHelper)||n.add(i.closeClicked,o._onInfoBoxClockClicked,o)),i&&v.bindEvents(i,l,!0),o._infoBox=e}}else{const e=o.infoBox.viewModel;e&&v.bindEvents(e,l,!1),c=o.infoBox.container,null==r||r.removeChild(c),o.infoBox.destroy(),o._infoBox=void 0}o.forceResize(),o.viewerWidgetResized.raiseEvent({type:"infoBox",status:e?"added":"removed",target:c})})),b((()=>e.geocoder),(t=>{var n;const{viewer:o}=i,r=o._toolbar,{defined:a,Geocoder:s}=Cesium;let l;if(!a(o.geocoder)||o.geocoder.isDestroyed()||t){if(!a(o.geocoder)||o.geocoder.isDestroyed()){l=document.createElement("div"),l.className="cesium-viewer-geocoderContainer",null==r||r.appendChild(l);const t=new s({container:l,geocoderServices:a(e.geocoder)&&"boolean"!=typeof e.geocoder?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:o.scene});o._clearObjects&&(null==(n=o._eventHelper)||n.add(t.viewModel.search.beforeExecute,o._clearObjects,o)),o._geocoder=t,B(r)}}else l=o.geocoder.container,null==r||r.removeChild(l),o.geocoder.destroy(),o._geocoder=void 0;o.viewerWidgetResized.raiseEvent({type:"geocoder",status:t?"added":"removed",target:l})})),b((()=>e.homeButton),(e=>{var t,n;const{viewer:o}=i,r=o._toolbar,{defined:a,HomeButton:s}=Cesium;if(!a(o.homeButton)||o.homeButton.isDestroyed()||e){if(!a(o.homeButton)||o.homeButton.isDestroyed()){const e=new s(r,o.scene);a(o.geocoder)&&(null==(t=o._eventHelper)||t.add(e.viewModel.command.afterExecute,(function(){const e=o.geocoder.viewModel;e.searchText="",e.isSearchInProgress&&e.search()}))),o._clearTrackedObject&&(null==(n=o._eventHelper)||n.add(e.viewModel.command.beforeExecute,o._clearTrackedObject,o)),o._homeButton=e,B(r)}}else o.homeButton.destroy(),o._homeButton=void 0;o.viewerWidgetResized.raiseEvent({type:"homeButton",status:e?"added":"removed",target:r})})),b((()=>e.sceneModePicker),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,DeveloperError:a,SceneModePicker:s}=Cesium;if(!r(n.sceneModePicker)||n.sceneModePicker.isDestroyed()||t){if(!r(n.sceneModePicker)||n.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new a("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const e=new s(o,n.scene);n._sceneModePicker=e,B(o)}}}else n.sceneModePicker.destroy(),n._sceneModePicker=void 0;n.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:t?"added":"removed",target:o})})),b((()=>e.projectionPicker),(e=>{const{viewer:t}=i,n=t._toolbar,{defined:o,ProjectionPicker:r}=Cesium;if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()||e){if(!o(t.projectionPicker)||t.projectionPicker.isDestroyed()){const e=new r(n,t.scene);t._projectionPicker=e,B(n)}}else t.projectionPicker.destroy(),t._projectionPicker=void 0;t.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:e?"added":"removed",target:n})})),b((()=>e.baseLayerPicker),(async t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,buildModuleUrl:a,DeveloperError:s,defaultValue:l,createDefaultImageryProviderViewModels:c,createDefaultTerrainProviderViewModels:u,BaseLayerPicker:d}=Cesium;if(!r(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()||t){if(!r(n.baseLayerPicker)||n.baseLayerPicker.isDestroyed()){const t=!(Cesium.defined(n.scene.globe)&&!1===e.globe||Cesium.defined(n.baseLayerPicker)&&!1===e.baseLayerPicker);if(t&&r(e.imageryProvider))throw new s("options.imageryProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&r(e.selectedImageryProviderViewModel))throw new s("options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.");if(t&&r(e.terrainProvider))throw new s("options.terrainProvider is not available when using the BaseLayerPicker widget.\n        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.");if(!t&&r(e.selectedTerrainProviderViewModel))throw new s("options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.\n        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.");if(t){const t=l(e.imageryProviderViewModels,c()),i=l(e.terrainProviderViewModels,u()),r=new d(o,{globe:n.scene.globe,imageryProviderViewModels:t,selectedImageryProviderViewModel:t[0],terrainProviderViewModels:i,selectedTerrainProviderViewModel:i[0]}),a=null==o?void 0:o.getElementsByClassName("cesium-baseLayerPicker-dropDown"),s=null==a?void 0:a[0];n._baseLayerPickerDropDown=s,n._baseLayerPicker=r,n.imageryLayers.raiseToTop(n.imageryLayers.get(0)),B(o)}}}else{n.baseLayerPicker.destroy(),n._baseLayerPicker=void 0,n.imageryLayers.remove(n.imageryLayers.get(n.imageryLayers.length-1));const e=a("Assets/Textures/NaturalEarthII"),t=n.imageryLayers.addImageryProvider(at(Cesium.VERSION,"1.104")?await Cesium.TileMapServiceImageryProvider.fromUrl(e):new Cesium.TileMapServiceImageryProvider({url:e}));n.imageryLayers.lowerToBottom(t)}n.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:t?"added":"removed",target:o})})),b((()=>e.navigationHelpButton),(t=>{const{viewer:n}=i,o=n._toolbar,{defined:r,defaultValue:a,NavigationHelpButton:s}=Cesium;if(!r(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()||t){if(!r(n.navigationHelpButton)||n.navigationHelpButton.isDestroyed()){let t=!0;try{if(r(window.localStorage)){const e=window.localStorage.getItem("cesium-hasSeenNavHelp");r(e)&&Boolean(e)?t=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch($g){}const i=new s({container:o,instructionsInitiallyVisible:a(e.navigationInstructionsInitiallyVisible,t)});n._navigationHelpButton=i,B(o)}}else n.navigationHelpButton.destroy(),n._navigationHelpButton=void 0;n.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:t?"added":"removed",target:o})})),b((()=>e.animation),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,Animation:r,AnimationViewModel:a}=Cesium;let s;if(!o(t.animation)||t.animation.isDestroyed()||e){if(!o(t.animation)||t.animation.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-animationContainer",null==n||n.appendChild(s);const e=new r(s,new a(t.clockViewModel));e.viewModel.dateFormatter=A,e.viewModel.timeFormatter=D,t._animation=e}}else s=t.animation.container,null==n||n.removeChild(s),t.animation.destroy(),t._animation=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"animation",status:e?"added":"removed",target:s})})),b((()=>e.timeline),(e=>{var t;const{viewer:n,viewerElement:o}=i,{defined:r,Timeline:a}=Cesium;let s;if(!r(n.timeline)||n.timeline.isDestroyed()||e){if(!r(n.timeline)||n.timeline.isDestroyed()){s=document.createElement("div"),s.className="cesium-viewer-timelineContainer",null==o||o.appendChild(s);const e=new a(s,n.clock);e.makeLabel=e=>A(e),null==(t=e.addEventListener)||t.call(e,"settime",k,!1),e.zoomTo(n.clock.startTime,n.clock.stopTime),n._timeline=e}}else s=n.timeline.container,null==o||o.removeChild(s),n.timeline.destroy(),n._timeline=void 0;n.forceResize(),n.viewerWidgetResized.raiseEvent({type:"timeline",status:e?"added":"removed",target:s})})),b((()=>e.fullscreenButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,FullscreenButton:r}=Cesium;let a;if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()||e){if(!o(t.fullscreenButton)||t.fullscreenButton.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-fullscreenContainer",null==n||n.appendChild(a);const e=new r(a,n);t._fullscreenButton=e}}else a=t.fullscreenButton.container,null==n||n.removeChild(a),t.fullscreenButton.destroy(),t._fullscreenButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:a})})),b((()=>e.fullscreenElement),(e=>{const{viewer:t}=i,{defined:n}=Cesium;n(t.fullscreenButton)&&n(e)&&(t.fullscreenButton.viewModel.fullscreenElement=e)})),b((()=>e.vrButton),(e=>{const{viewer:t,viewerElement:n}=i,{defined:o,VRButton:r}=Cesium;let a;if(!o(t.vrButton)||t.vrButton.isDestroyed()||e){if(!o(t.vrButton)||t.vrButton.isDestroyed()){a=document.createElement("div"),a.className="cesium-viewer-vrContainer",null==n||n.appendChild(a);const e=new r(a,t.scene,n),i=e.viewModel.command;e.viewModel._command=function(e){i(),R(t,e.isVRMode)},t._vrButton=e}}else a=t.vrButton.container,null==n||n.removeChild(a),t.vrButton.destroy(),t._vrButton=void 0;t.forceResize(),t.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:e?"added":"removed",target:a})})),b((()=>e.useDefaultRenderLoop),(e=>{i.viewer.useDefaultRenderLoop=e})),b((()=>e.sceneMode),(e=>{const{SceneMode:t}=Cesium;t.COLUMBUS_VIEW!==e&&t.MORPHING!==e&&t.SCENE2D!==e&&t.SCENE3D!==e||(i.viewer.scene.mode=e)})),b((()=>e.shouldAnimate),(e=>{i.viewer.clock.shouldAnimate=e})),b((()=>e.terrainExaggeration),(e=>{i.viewer._terrainExaggeration=e})),b((()=>e.shadows),(e=>{i.viewer.scene.shadowMap.enabled=e})),b((()=>e.terrainProvider),(e=>{e&&(i.viewer.terrainProvider=e)})),b((()=>e.camera),(e=>{qe(i.viewer,e)}),{deep:!0}),b((()=>e.imageryProvider),((e,t)=>{const{viewer:n}=i,{defined:o}=Cesium;if(o(e)){for(let e=0;e<n.imageryLayers.length;e++)n.imageryLayers.get(e).imageryProvider===t&&n.imageryLayers.remove(n.imageryLayers[e]);e&&n.imageryLayers.addImageryProvider(e)}})),b((()=>e.showCredit),(e=>{const{viewer:t}=i;t.cesiumWidget.creditContainer.style.display=e?"inline":"none",t.viewerWidgetResized.raiseEvent({type:"credit",status:e?"added":"removed",target:t.cesiumWidget.creditContainer})})),b((()=>e.debugShowFramesPerSecond),(e=>{const{viewer:t}=i;t.scene.debugShowFramesPerSecond=e}));const E=async function(){var t,n,o;if(m.debug("loading-viewer"),i.mounted)return!1;if(await async function(){m.debug("beforeLoad - viewer"),Pe(i,"beforeLoad")&&u("beforeLoad",i),d.value.__scriptPromise=d.value.__scriptPromise||T(),await d.value.__scriptPromise}(),"undefined"==typeof Cesium)return!1;const{Ion:r,buildModuleUrl:a,ImageryLayer:h,TileMapServiceImageryProvider:g,Viewer:f,defined:y,Math:b,Event:C}=Cesium,O=e.accessToken?e.accessToken:d.value.accessToken;r.defaultAccessToken=O;const _=a("Assets/Textures/NaturalEarthII"),S={};let E;e&&Object.keys(e).forEach((t=>{void 0!==e[t]&&null!==e[t]&&(S[t]=e[t])})),S.fullscreenElement=se(S.fullscreenElement)?Te(s):S.fullscreenElement,at(Cesium.VERSION,"1.104")?S.baseLayer=se(S.baseLayer)?h.fromProviderAsync(g.fromUrl(_),{}):S.baseLayer:S.imageryProvider=se(S.imageryProvider)?new g({url:_}):S.imageryProvider,e.viewerCreator?E=e.viewerCreator(i,Te(s),S):globalThis.mars3d?(i.map=new mars3d.Map(Te(s).id,{scene:S,control:S}),E=null==(t=i.map)?void 0:t._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(Te(s).id,S),E=null==(n=i.dcViewer)?void 0:n.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(Te(s),S),E=null==(o=i.earth)?void 0:o.czm.viewer):E=new f(Te(s),S),w(E),i.Cesium=Cesium,i.viewer=E,i.viewerElement=E._element,i.mounted=!0,at(Cesium.VERSION,"1.83")&&(E.scene.globe.terrainExaggeration=S.terrainExaggeration),y(S.camera)&&qe(E,S.camera);Pe(i,"update:camera")&&E.camera.changed.addEventListener((()=>{const e=E.camera.positionCartographic;let t;t=p(S.camera.position,"lng")?{position:{lng:b.toDegrees(e.longitude),lat:b.toDegrees(e.latitude),height:e.height},heading:b.toDegrees(E.camera.heading||360),pitch:b.toDegrees(E.camera.pitch||-90),roll:b.toDegrees(E.camera.roll||0)}:{position:{x:E.camera.position.x,y:E.camera.position.y,z:E.camera.position.z},heading:E.camera.heading||2*Math.PI,pitch:E.camera.pitch||-Math.PI/2,roll:E.camera.roll||0},u("update:camera",t)})),y(E.animation)&&(E.animation.viewModel.dateFormatter=A,E.animation.viewModel.timeFormatter=D),y(E.timeline)&&(E.timeline.makeLabel=e=>A(e),E.timeline.zoomTo(E.clock.startTime,E.clock.stopTime)),!e.showCredit&&(E.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(E.scene.debugShowFramesPerSecond=!0),E.viewerWidgetResized=E.viewerWidgetResized||new C,E.viewerWidgetResized.addEventListener(j),E.imageryLayers.layerAdded.addEventListener(L),v.registerEvents(!0);const P={Cesium:Cesium,viewer:E,vm:i};globalThis.XE?Object.assign(P,{earth:i.earth}):globalThis.mars3d?Object.assign(P,{map:i.map}):globalThis.DC&&Object.assign(P,{dcViewer:i.dcViewer});return Pe(i,"ready")&&u("ready",P),null==c||c.emit("ready",P),x((()=>{E.resize(),j({type:"viewer",status:"added",target:E.container}),l.value=!0})),m.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:E}),P},P=async function(){if(!i.mounted)return!1;let t;m.debug("viewer---unloading"),d.value.__viewerUnloadingPromise=new Promise(((e,i)=>{t=e}));for(let e=0;e<i.children.length;e++){const t=i.children[e].proxy;await t.unload()}i.children.length=0;const{viewer:n,earth:o,map:r,dcViewer:a}=i;globalThis.Cesium&&(n.imageryLayers.layerAdded.removeEventListener(L),v.registerEvents(!1));const{removeCesiumScript:s}=e;if(n._vcPickScreenSpaceEventHandler&&n._vcPickScreenSpaceEventHandler.destroy(),n._vcViewerScreenSpaceEventHandler&&n._vcViewerScreenSpaceEventHandler.destroy(),n._vcPickScreenSpaceEventHandler=void 0,n._vcViewerScreenSpaceEventHandler=void 0,s&&S(n),delete i.appContext.config.globalProperties.$VueCesium[n.container.id],globalThis.XE?o&&o.destroy():globalThis.mars3d?r&&r.destroy():globalThis.DC?a&&a.destroy():n&&n.destroy(),i.viewer=void 0,i.mounted=!1,s&&globalThis.Cesium){const e=document.getElementsByTagName("script"),t=[];for(const n of e)n.src.indexOf("/Cesium.js")>-1&&t.push(n),n.src.indexOf("/Workers/zlib.min.js")>-1&&t.push(n),globalThis.XE&&(n.src.indexOf("/rxjs.umd.min.js")>-1&&t.push(n),n.src.indexOf("/XbsjCesium.js")>-1&&t.push(n),n.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&t.push(n),n.src.indexOf("/XbsjEarth.js")>-1&&t.push(n)),g.includes(n.src)&&!t.includes(n)&&t.push(n);const i=document.getElementsByTagName("link");for(const n of i)n.href.includes("Widgets/widgets.css")&&!t.includes(n)&&t.push(n),g.includes(n.href)&&!t.includes(n)&&t.push(n);t.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),d.value.__scriptPromise=void 0,g=[]}i.isUnmounted=!1;return Pe(i,"destroyed")&&u("destroyed",i),c.emit("destroyed",i),m.debug("viewer---unloaded"),t(!0),d.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},T=async function(){if(m.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{const t=e.cesiumPath?e.cesiumPath:d.value.cesiumPath,n=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";let t=e.charCodeAt(0);const i=47===t;let n=-1,o=!0;for(let r=e.length-1;r>=1;--r)if(t=e.charCodeAt(r),47===t){if(!o){n=r;break}}else o=!1;return-1===n?i?"/":".":i&&1===n?"/":e.slice(0,n)}(t),o=d.value.mars3dConfig||e.mars3dConfig;if(o){const e=o.libs||{"font-awesome":["https://unpkg.com/font-awesome@latest/css/font-awesome.min.css"],haoutil:["https://unpkg.com/haoutil@latest/dist/haoutil-src.js"],turf:["https://unpkg.com/@turf/turf@latest/turf.min.js"],"mars3d-space":["https://unpkg.com/mars3d-space@latest/dist/mars3d-space.js"],"mars3d-echarts":["https://unpkg.com/echarts@latest/dist/echarts.min.js","https://unpkg.com/echarts-gl@latest/dist/echarts-gl.min.js","https://unpkg.com/mars3d-echarts@latest/dist/mars3d-echarts.js"],"mars3d-mapv":["https://unpkg.com/mapv@latest/build/mapv.min.js","https://unpkg.com/mars3d-mapv@latest/dist/mars3d-mapv.js"],"mars3d-heatmap":["https://unpkg.com/heatmapjs@latest/heatmap.min.js","https://unpkg.com/mars3d-heatmap@latest/dist/mars3d-heatmap.js"],"mars3d-wind":["https://unpkg.com/netcdfjs@latest/lib/index.js","https://unpkg.com/mars3d-wind@latest/dist/mars3d-wind.js"],"mars3d-tdt":["https://unpkg.com/mars3d-tdt@latest/dist/mars3d-tdt.js"],"mars3d-widget":["https://unpkg.com/mars3d-widget@latest/dist/mars3d-widget.js"],mars3d:["https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Widgets/widgets.css","https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Cesium.js","https://unpkg.com/mars3d@latest/dist/mars3d.css","https://unpkg.com/mars3d@latest/dist/mars3d.js"]},t=(o.include||"mars3d").trim().split(","),i={};for(let n=0,o=t.length;n<o;n++){const o=t[n];i[o]||(i[o]=!0,g.push(...e[o]))}}else t.includes("/dc.base.min.js")?(g.push(t),g.push(t.replace("/dc.base.min.js","/dc.core.min.js")),g.push(t.replace("/dc.base.min.js","/dc.core.min.js").replace("/dc.core.min.js","/dc.core.min.css"))):t.includes("/XbsjEarth.js")?g.push(t):(g.push(t),g.push(`${n}/Widgets/widgets.css`));const a=g;if(o){const e=g.find((e=>e.includes("Cesium.js")));await I(e),a.splice(a.indexOf(e),1)}const s=[];return a.forEach((e=>{new RegExp("\\.css").test(e)?s.push(M(e)):s.push(I(e))})),Promise.all(s).then((()=>{if(globalThis.Cesium){return Pe(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium}return globalThis.XE?globalThis.XE.ready().then((()=>(Pe(i,"cesiumReady")&&u("cesiumReady",globalThis.Cesium),globalThis.Cesium))):globalThis.DC?(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${n}/resources/`,globalThis.DC.ready((()=>{globalThis.Cesium=DC.Namespace.Cesium;return Pe(i,"cesiumReady")&&u("cesiumReady",globalThis.DC),globalThis.Cesium})),globalThis.Cesium):void r(new Error("VueCesium ERROR: Error loading CesiumJS!"))}))}},I=e=>{const t=document.createElement("script");return t.async=!1,t.src=e,document.body.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},M=e=>{const t=document.createElement("link");return t.rel="stylesheet",t.href=e,document.head.appendChild(t),new Promise(((e,i)=>{t.onload=()=>{e(!0)}}))},j=e=>{var t,n;const{viewer:o}=i,r=o._toolbar;void 0!==r&&"hidden"!==getComputedStyle(r).visibility&&"none"!==getComputedStyle(r).display?h.toolbarContainerRC=r.getBoundingClientRect():h.toolbarContainerRC=void 0;const a=o.bottomContainer;void 0!==a&&"hidden"!==getComputedStyle(a).visibility&&"none"!==getComputedStyle(a).display?h.bottomContainerRC=a.getBoundingClientRect():h.bottomContainerRC=void 0;const s=null==(t=o.timeline)?void 0:t.container;void 0!==s&&"hidden"!==getComputedStyle(s).visibility&&"none"!==getComputedStyle(s).display?h.timelineContainerRC=s.getBoundingClientRect():h.timelineContainerRC=void 0;const l=null==(n=o.animation)?void 0:n.container;void 0!==l&&"hidden"!==getComputedStyle(l).visibility&&"none"!==getComputedStyle(l).display?h.animationContainerRC=l.getBoundingClientRect():h.animationContainerRC=void 0,o.resize();Pe(i,"viewerWidgetResized")&&u("viewerWidgetResized",e)},L=t=>{const n=i.viewer,{autoSortImageryLayers:o}=e;n.baseLayerPicker&&n.imageryLayers.raiseToTop(t);const{defined:r}=Cesium;o&&(t.sortOrder=r(t.sortOrder)?t.sortOrder:9999,n.imageryLayers._layers.sort(((e,t)=>e.sortOrder-t.sortOrder)),n.imageryLayers._update())},A=function(t,i,n){const{JulianDate:o}=Cesium;let r;if(e.UTCOffset){t=o.addMinutes(t,e.UTCOffset,new o);const i=(new Date).getTimezoneOffset()-e.UTCOffset;r=0===i?"UTC":"UTC+"+-i/60}else r=0===(new Date).getTimezoneOffset()?"UTC":"UTC+"+-(new Date).getTimezoneOffset()/60;const a=o.toDate(t),s=a.toLocaleString(C("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),l=a.toLocaleString(C("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return n||!i&&a.getHours()+a.getMinutes()!==0?(e.TZCode&&(r=e.TZCode),n?`${s} ${r}`:`${l} ${s} ${r}`):l},D=function(e,t){return A(e,t,!0)},k=function(e){const t=e.clock;t.currentTime=e.timeJulian,t.shouldAnimate=!1},R=function(e,t){const i=e._geocoder,n=e._homeButton,o=e._sceneModePicker,r=e._projectionPicker,a=e._baseLayerPicker,s=e._animation,l=e._timeline,c=e._fullscreenButton,u=e._infoBox,d=e._selectionIndicator,p=t?"hidden":"visible",{defined:m}=Cesium;if(m(i)&&(i.container.style.visibility=p),m(n)&&(n.container.style.visibility=p),m(o)&&(o.container.style.visibility=p),m(r)&&(r.container.style.visibility=p),m(a)&&(a.container.style.visibility=p),m(s)&&(s.container.style.visibility=p),m(l)&&(l.container.style.visibility=p),m(c)&&c.viewModel.isFullscreenEnabled&&(c.container.style.visibility=p),m(u)&&(u.container.style.visibility=p),m(d)&&(d.container.style.visibility=p),e._container){const i=t||!m(c)?0:c.container.clientWidth;e._vrButton.container.style.right=i+"px",e.forceResize()}},B=function(e,t){Array.prototype.slice.call(e.children).forEach((e=>{switch(e.className){case"cesium-viewer-geocoderContainer":e.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":e.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":e.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":e.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":e.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":e.customIndex=6}}));const i=[];Array.prototype.slice.call(e.children).forEach((e=>{i.push(e)})),i.sort((function(e,t){return e.customIndex-t.customIndex}));for(let n=0;n<i.length;n++)e.appendChild(i[n])};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),_((async()=>{var e;try{m.debug("viewer - onMounted"),await(null==(e=d.value)?void 0:e.__viewerUnloadingPromise),E().then((e=>{n(e)})).catch((e=>{u("unready",e),r(e)}))}catch($g){u("unready",$g),r($g)}})),f((()=>{m.debug("viewer - onUnmounted"),P().then((()=>{c.all.clear()}))})),{isReady:l,load:E,unload:P,reload:function(){return P().then((()=>E()))},getServices:function(){return Se({},{get layout(){return h},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var e;return null==(e=i.viewer)?void 0:e.dataSources},get entities(){var e;return null==(e=i.viewer)?void 0:e.entities},get imageryLayers(){var e;return null==(e=i.viewer)?void 0:e.imageryLayers},get primitives(){var e;return null==(e=i.viewer)?void 0:e.scene.primitives},get groundPrimitives(){var e;return null==(e=i.viewer)?void 0:e.scene.groundPrimitives},get postProcessStages(){var e;return null==(e=i.viewer)?void 0:e.postProcessStages},get creatingPromise(){return a},get mars3dMap(){return i.map},get dcViewer(){return i.dcViewer},get earth(){return i.earth}})},viewerRef:s,creatingPromise:a}}const ea=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],ta=ho.map((e=>G(e))),ia=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...ho,...ta,...go];ea.reduce(((e,t)=>e.concat(t.events)),ia);const na={xs:18,sm:24,md:32,lg:38,xl:46},oa={size:String};function ra(e,t=na){return s((()=>void 0!==e.size?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null))}function aa(e,t){return void 0!==e?e():t}function sa(e,t){return void 0!==e?t.concat(e()):t}function la(e,t,i,n,o,r){t.key=n+o;const a=S(e,t,i);return!0===o?E(a,r()):a}var ca=P({name:"VcIcon",props:{...oa,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean},setup(e,{slots:t}){const i=ra(e),n=s((()=>{const t=i.value;if(t)return e.color&&(t.color=e.color),e.hoverColor&&(t["--hover-color"]=e.hoverColor),t})),o=s((()=>"vc-icon"+(!0===e.left?" on-left":"")+(!0===e.right?" on-right":"")+(void 0!==e.color?` text-${e.color}`:""))),r=s((()=>{let t,i=e.name;if(!i)return{none:!0,cls:o.value};if(!0===i.startsWith("M")){const[e,t]=i.split("|");return{svg:!0,cls:o.value,nodes:e.split("&&").map((e=>{const[t,i,n]=e.split("@@");return S("path",{style:i,d:t,transform:n})})),viewBox:void 0!==t?t:"0 0 24 24"}}if(!0===i.startsWith("img:"))return{img:!0,cls:o.value,src:i.substring(4)};if(!0===i.startsWith("svguse:")){const[e,t]=i.split("|");return{svguse:!0,cls:o.value,src:e.substring(7),viewBox:void 0!==t?t:"0 0 24 24"}}let n=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(i)||!0===i.startsWith("icon-")?t=i:!0===i.startsWith("bt-")?t=`bt ${i}`:!0===i.startsWith("eva-")?t=`eva ${i}`:!0===/^ion-(md|ios|logo)/.test(i)?t=`ionicons ${i}`:!0===i.startsWith("ion-")?t=`ionicons ion-md${i.substr(3)}`:!0===i.startsWith("mdi-")?t=`mdi ${i}`:!0===i.startsWith("iconfont ")?t=`${i}`:!0===i.startsWith("ti-")?t=`themify-icon ${i}`:!0===i.startsWith("vc-")?t=`vc-icons ${i}`:(t="notranslate material-icons",!0===i.startsWith("o_")?(i=i.substring(2),t+="-outlined"):!0===i.startsWith("r_")?(i=i.substring(2),t+="-round"):!0===i.startsWith("s_")&&(i=i.substring(2),t+="-sharp"),n=i),{cls:t+" "+o.value,content:n}}));return()=>{const i={class:r.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return!0===r.value.none?S(e.tag,i,aa(t.default)):!0===r.value.img?(i.src=r.value.src,i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),S("img",i)):!0===r.value.svg?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),S("svg",i,sa(t.default,r.value.nodes))):!0===r.value.svguse?(i.viewBox=r.value.viewBox,i["aria-hidden"]="true",i.style&&(i.style.width=i.style.fontSize,i.style.height=i.style.fontSize),S("svg",i,sa(t.default,[S("use",{"xlink:href":r.value.src})]))):S(e.tag,i,sa(t.default,[r.value.content]))}}});const ua={size:{type:[Number,String],default:"1em"},color:String};function da(e){return{cSize:s((()=>e.size in na?`${na[e.size]}px`:e.size)),classes:s((()=>"vc-spinner"+(e.color?` text-${e.color}`:"")))}}const pa=[S("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[S("circle",{cx:"5",cy:"50",r:"5"},[S("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"27",cy:"5",r:"5"},[S("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"49",cy:"50",r:"5"},[S("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var ma=P({name:"VcSpinnerBall",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},pa)}});const va=[S("rect",{y:"10",width:"15",height:"120",rx:"6"},[S("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),S("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[S("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),S("rect",{x:"60",width:"15",height:"140",rx:"6"},[S("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),S("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[S("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),S("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[S("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var ha=P({name:"VcSpinnerBars",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},va)}});const ga=[S("circle",{cx:"15",cy:"15",r:"15"},[S("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[S("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"105",cy:"15",r:"15"},[S("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var fa=P({name:"VcSpinnerDots",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},ga)}});const ya=[S("g",{transform:"translate(-20,-20)"},[S("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),S("g",{transform:"translate(20,20) rotate(15 50 50)"},[S("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var ba=P({name:"VcSpinnerGears",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},ya)}});const Ca=[S("g",[S("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),S("clipPath",{id:"uil-hourglass-clip1"},[S("rect",{x:"15",y:"20",width:" 70",height:"25"},[S("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),S("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),S("clipPath",{id:"uil-hourglass-clip2"},[S("rect",{x:"15",y:"55",width:" 70",height:"25"},[S("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),S("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),S("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),S("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var wa=P({name:"VcSpinnerHourglass",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ca)}});const Oa=[S("g",{"stroke-width":"4","stroke-linecap":"round"},[S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),S("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[S("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var _a=P({name:"VcSpinnerIos",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},Oa)}});const xa=[S("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),S("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Sa=P({name:"VcSpinnerOrbit",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},xa)}});const Ea=[S("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[S("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),S("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var Pa=P({name:"VcSpinnerOval",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Ea)}});const Ta=[S("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[S("circle",{cx:"22",cy:"22",r:"1"},[S("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),S("circle",{cx:"22",cy:"22",r:"1"},[S("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Ia=P({name:"VcSpinnerPuff",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},Ta)}});const Ma=[S("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[S("circle",{cx:"22",cy:"22",r:"6"},[S("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"22",cy:"22",r:"6"},[S("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),S("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),S("circle",{cx:"22",cy:"22",r:"8"},[S("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var ja=P({name:"VcSpinnerRings",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},Ma)}});const La=[S("defs",[S("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[S("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),S("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),S("stop",{"stop-color":"currentColor",offset:"100%"})])]),S("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[S("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),S("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var Aa=P({name:"VcSpinnerTail",props:ua,setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},La)}}),Da=P({name:"VcSpinner",props:{...ua,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=da(e);return()=>S("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[S("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const ka={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Ra=Object.keys(ka),Ba={type:String,validator:e=>Ra.includes(e)};const Na={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Va={xs:8,sm:10,md:14,lg:20,xl:24},za={...oa,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Ba,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function Fa(e){const t=ra(e,Va),i=function(e){return s((()=>{const t=void 0===e.align?!0===e.vertical?"stretch":"left":e.align;return`${!0===e.vertical?"items":"justify"}-${ka[t]}`}))}(e),n=s((()=>{const i=!1===e.fab&&!1===e.fabMini?t.value:{};return void 0!==e.padding?Object.assign({},i,{padding:e.padding.split(/\s+/).map((e=>e in Na?Na[e]+"px":e)).join(" "),minWidth:"0",minHeight:"0"}):i})),o=s((()=>!0===e.rounded||!0===e.fab||!0===e.fabMini)),r=s((()=>!0!==e.disable&&!0!==e.loading)),a=s((()=>!0===r.value?e.tabindex||0:-1)),l=s((()=>!0===e.flat?"flat":!0===e.outline?"outline":!0===e.push?"push":!0===e.unelevated?"unelevated":"standard")),c=s((()=>{const t={tabindex:a.value};return"a"!==e.type&&(t.type=e.type),t.role="a"===e.type?"link":"button",!0===e.loading&&void 0!==e.percentage&&Object.assign(t,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),!0===e.disable&&(t.disabled="",t["aria-disabled"]="true"),t}));return{classes:s((()=>{let t;return void 0!==e.color?t=!0===e.flat||!0===e.outline?`text-${e.textColor||e.color}`:`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(t=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${!0===e.round?"round":"rectangle"+(!0===o.value?" vc-btn--rounded":"")}`+(void 0!==t?" "+t:"")+(!0===r.value?" vc-btn--actionable vc-focusable vc-hoverable":!0===e.disable?" disabled":"")+(!0===e.fab?" vc-btn--fab":!0===e.fabMini?" vc-btn--fab-mini":"")+(!0===e.noCaps?" vc-btn--no-uppercase":"")+(!0===e.dense?" vc-btn--dense":"")+(!0===e.stretch?" no-border-radius self-stretch":"")+(!0===e.glossy?" glossy":"")})),style:n,innerClasses:s((()=>i.value+(!0===e.stack?" column":" row")+(!0===e.noWrap?" no-wrap text-no-wrap":"")+(!0===e.loading?" vc-btn__content--hidden":""))),attributes:c,isActionable:r}}const{passiveCapture:Ha}=So;let Ua,Wa,Ga;var $a=P({name:"VcBtn",props:{...za,percentage:{type:Number,default:0},darkPercentage:Boolean},emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var n;const a=null==(n=r())?void 0:n.proxy,{classes:l,style:c,innerClasses:u,attributes:d,isActionable:p}=Fa(e),m=o(),v=o();let h,f,y=null;const b=s((()=>void 0!==e.label&&null!==e.label&&""!==e.label)),C=s((()=>!1!==e.ripple&&{keyCodes:13,...!0===e.ripple?{}:e.ripple})),w=s((()=>{const t=Math.max(0,Math.min(100,e.percentage));return t>0?{transition:"transform 0.6s",transform:`translateX(${t-100}%)`}:{}})),O=s((()=>!0===e.loading?{onMousedown:A,onTouchstart:A,onClick:A,onKeydown:A,onKeyup:A}:!0===p.value?{onClick:E,onKeydown:P,onMousedown:M,onTouchstart:I}:{})),_=s((()=>[[zo,C.value,void 0,{center:e.round}]])),x=s((()=>({ref:m,class:"vc-btn vc-btn-item non-selectable no-outline "+l.value,style:c.value,...d.value,...O.value})));function E(t){var n;if(void 0!==t){if(!0===t.defaultPrevented)return;const i=document.activeElement;if("submit"===e.type&&i!==document.body&&!1===(null==(n=m.value)?void 0:n.contains(i))&&!1===(null==i?void 0:i.contains(m.value))){m.value.focus();const e=()=>{document.removeEventListener("keydown",jo,!0),document.removeEventListener("keyup",e,Ha),null!==m.value&&m.value.removeEventListener("blur",e,Ha)};document.addEventListener("keydown",jo,!0),document.addEventListener("keyup",e,Ha),m.value.addEventListener("blur",e,Ha)}}i("click",t,(()=>{}))}function P(e){var t,n,o;!0===Ro(e,[13,32])&&(jo(e),Wa!==m.value&&(null!==Wa&&L(),null==(t=m.value)||t.focus(),Wa=m.value,null==(n=m.value)||n.classList.add("vc-btn--active"),document.addEventListener("keyup",j,!0),null==(o=m.value)||o.addEventListener("blur",j,Ha))),i("keydown",e)}function I(e){Ua!==m.value&&(null!==Ua&&L(),Ua=m.value,y=Zo(e.target),null==y||y.addEventListener("touchcancel",j,Ha),null==y||y.addEventListener("touchend",j,Ha)),h=!0,clearTimeout(f),f=setTimeout((()=>{h=!1}),200),i("touchstart",e)}function M(e){var t;Ga!==m.value&&(null!==Ga&&L(),Ga=m.value,null==(t=m.value)||t.classList.add("vc-btn--active"),document.addEventListener("mouseup",j,Ha)),e.qSkipRipple=!0===h,i("mousedown",e)}function j(e){var t;if(void 0===e||"blur"!==e.type||document.activeElement!==m.value){if(void 0!==e&&"keyup"===e.type){if(Wa===m.value&&!0===Ro(e,[13,32])){const i=new MouseEvent("click",e);i.qKeyEvent=!0,!0===e.defaultPrevented&&Mo(i),!0===e.cancelBubble&&Io(i),null==(t=m.value)||t.dispatchEvent(i),jo(e),e.qKeyEvent=!0}i("keyup",e)}L()}}function L(e){const t=v.value;!0===e||Ua!==m.value&&Ga!==m.value||null===t||t===document.activeElement||(t.setAttribute("tabindex","-1"),t.focus()),Ua===m.value&&(null!==y&&(y.removeEventListener("touchcancel",j,Ha),y.removeEventListener("touchend",j,Ha)),Ua=y=null),Ga===m.value&&(document.removeEventListener("mouseup",j,Ha),Ga=null),Wa===m.value&&(document.removeEventListener("keyup",j,!0),null!==m.value&&m.value.removeEventListener("blur",j,Ha),Wa=null),null!==m.value&&m.value.classList.remove("vc-btn--active")}function A(e){jo(e),e.qSkipRipple=!0}return g((()=>{L(!0)})),Object.assign(a,{click:E}),()=>{let i=[];void 0!==e.icon&&i.push(S(ca,{name:e.icon,left:!1===e.stack&&!0===b.value,role:"img","aria-hidden":"true"})),!0===b.value&&i.push(S("span",{class:"block"},[e.label])),i=sa(t.default,i),void 0!==e.iconRight&&!1===e.round&&i.push(S(ca,{name:e.iconRight,right:!1===e.stack&&!0===b.value,role:"img","aria-hidden":"true"}));const n=[S("span",{class:"vc-focus-helper",ref:v})];return!0===e.loading&&void 0!==e.percentage&&n.push(S("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[S("span",{class:"vc-btn__progress-indicator fit block"+(!0===e.darkPercentage?" vc-btn__progress--dark":""),style:w.value})])),n.push(S("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+u.value},i)),null!==e.loading&&n.push(S(T,{name:"vc-transition--fade"},(()=>!0===e.loading?[S("span",{key:"loading",class:"absolute-full flex flex-center"},void 0!==t.loading?t.loading():[S(Da)])]:null))),la("button",x.value,n,"ripple",!0!==e.disable&&!1!==e.ripple,(()=>_.value))}}});const Za={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function qa({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:a,emit:s}=r(),l=o(null);let c;function u(e){return null!==l.value&&(void 0===e||void 0===e.touches||e.touches.length<=1)}const d={};function p(){Do(d,"anchor")}function m(){if(!1===n.target||""===n.target)l.value=null;else if(!0===n.target)!function(e){for(l.value=e;l.value.classList.contains("vc-anchor--skip");)l.value=l.value.parentNode;i()}(null==a?void 0:a.$el.parentNode);else{let t=n.target;if("string"==typeof n.target)try{t=document.querySelector(n.target)}catch(e){t=void 0}null!=t?(l.value=t.$el||t,i()):l.value=null}}return void 0===i&&(Object.assign(d,{hide(e){a.hide(e)},toggle(e){a.toggle(e)},toggleKey(e){!0===Ro(e,13)&&a.toggle(e)},contextClick(e){a.hide(e),x((()=>{a.show(e)})),Mo(e)},mobilePrevent:Mo,mobileTouch(e){var t;if(d.mobileCleanup(e),!0!==u(e))return;a.hide(e),null==(t=l.value)||t.classList.add("non-selectable");const i=Zo(e.target);Ao(d,"anchor",[[i,"touchmove","mobileCleanup","passive"],[i,"touchend","mobileCleanup","passive"],[i,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","mobilePrevent","notPassive"]]),c=setTimeout((()=>{a.show(e)}),300)},mobileCleanup(t){l.value.classList.remove("non-selectable"),clearTimeout(c),!0===e.value&&void 0!==t&&Ho()}}),i=function(e=n.contextMenu){if(!0===n.noParentEvent||null===l.value)return;let t;t=!0===e?!0===Fo().isPhone?[[l.value,"touchstart","mobileTouch","passive"]]:[[l.value,"click","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],Ao(d,"anchor",t)}),b((()=>n.contextMenu),(e=>{null!==l.value&&(p(),i(e))})),b((()=>n.target),(()=>{null!==l.value&&p(),m()})),b((()=>n.noParentEvent),(e=>{null!==l.value&&(!0===e?p():i())})),_((()=>{m(),!0!==t&&!0===n.modelValue&&null===l.value&&s("update:modelValue",!1)})),g((()=>{clearTimeout(c),p()})),{anchorEl:l,canShow:u,anchorEvents:d}}const Ya={modelValue:{type:Boolean,default:null}},Xa=["update:modelValue","before-show","show","before-hide","hide"];function Qa({showing:e,canShow:t,hideOnRouteChange:i,handleShow:n,handleHide:o,processOnMount:a}){const s=r(),{props:l,emit:c,proxy:u}=s;let d;function p(e){if(!0===l.disable||void 0!==t&&!0!==t(e))return;const i=!0===Ee(s,"onUpdate:modelValue");!0===i&&(c("update:modelValue",!0),d=e,x((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==i||m(e)}function m(t){!0!==(null==e?void 0:e.value)&&(e&&(e.value=!0),c("before-show",t),t&&!0===t.cancel||(void 0!==n?n(t):c("show",t)))}function v(e){if(!0===l.disable)return;const t=!0===Ee(s,"onUpdate:modelValue");!0===t&&(c("update:modelValue",!1),d=e,x((()=>{d===e&&(d=void 0)}))),null!==l.modelValue&&!1!==t||h(e)}function h(t){!1!==(null==e?void 0:e.value)&&(e&&(e.value=!1),c("before-hide",t),void 0!==o?o(t):c("hide",t))}function g(t){if(!0===l.disable&&!0===t)!0===Ee(s,"onUpdate:modelValue")&&c("update:modelValue",!1);else if(!0===t!==(null==e?void 0:e.value)){(!0===t?m:h)(d)}}b((()=>l.modelValue),g),void 0!==i&&!0===function(e){return void 0!==e.appContext.config.globalProperties.$router}(s)&&b((()=>u.$route),(()=>{!0===i.value&&!0===(null==e?void 0:e.value)&&v()})),!0===a&&_((()=>{g(l.modelValue)}));const f={show:p,hide:v,toggle:function(t){!0===(null==e?void 0:e.value)?v(t):p(t)}};return Object.assign(u,f),f}const Ja=[];let Ka=document.body;const es=[];function ts(e,t,i,n){var r,a,s,l;let c=null;(null==(a=null==(r=e.props)?void 0:r.teleport)?void 0:a.to)&&(c=null==(l=null==(s=e.props)?void 0:s.teleport)?void 0:l.to);const u=!0===n&&function(e){for(e=e.parent;null!=e;){if("VcGlobalDialog"===e.type.name)return!0;if("VcDialog"===e.type.name||"VcMenu"===e.type.name)return!1;e=e.parent}return!1}(e),d=o(!1);function p(){var t,i;d.value=!1;const n=es.indexOf(e.proxy);var o;n>-1&&es.splice(n,1),null===c||(null==(i=null==(t=e.props)?void 0:t.teleport)?void 0:i.to)||(o=c,Ja.splice(Ja.indexOf(o),1),o.remove(),c=null)}return f(p),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:function(){!1===u&&null===c&&(c=function(e){const t=document.createElement("div");return void 0!==e&&(t.id=e),Ka.appendChild(t),Ja.push(t),t}()),d.value=!0,es.push(e.proxy)},hidePortal:p,portalIsActive:d,renderPortal:()=>!0===u?i():!0===d.value?[S(I,{to:c},i())]:void 0}}const is={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};const ns=[null,document,document.body,document.scrollingElement,document.documentElement];function os(e,t){let i=function(e){if(null==e)return;if("string"==typeof e)try{return document.querySelector(e)||void 0}catch(i){return}const t=!0===h(e)?e.value:e;return t?t.$el||t:void 0}(t);if(void 0===i){if(null==e)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return ns.includes(i)?window:i}let rs,as,ss;function ls(e){const t=e.split(" ");return 2===t.length&&(!0===["top","center","bottom"].includes(t[0])&&!0===["left","middle","right","start","end"].includes(t[1]))}const cs={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};function us(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:cs[`${i[1]}#${!0===t?"rtl":"ltr"}`]}}function ds(e){if(!0===Fo().isIOS&&void 0!==window.visualViewport){const e=document.body.style,{offsetLeft:t,offsetTop:i}=window.visualViewport;t!==as&&(e.setProperty("--vc-pe-left",t+"px"),as=t),i!==ss&&(e.setProperty("--vc-pe-top",i+"px"),ss=i)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(void 0===e.absoluteOffset)t=function(e,t){let{top:i,left:n,right:o,bottom:r,width:a,height:s}=e.getBoundingClientRect();return void 0!==t&&(i-=t[1],n-=t[0],r+=t[1],o+=t[0],a+=t[0],s+=t[1]),{top:i,left:n,right:o,bottom:r,width:a,height:s,middle:n+(o-n)/2,center:i+(r-i)/2}}(e.anchorEl,!0===e.cover?[0,0]:e.offset);else{const{top:i,left:n}=e.anchorEl.getBoundingClientRect(),o=i+e.absoluteOffset.top,r=n+e.absoluteOffset.left;t={top:o,left:r,width:1,height:1,right:r+1,center:o,middle:r,bottom:o+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};!0!==e.fit&&!0!==e.cover||(o.minWidth=t.width+"px",!0===e.cover&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const r={top:0,center:(s=e.el).offsetHeight/2,bottom:s.offsetHeight,left:0,middle:s.offsetWidth/2,right:s.offsetWidth},a={top:t[e.anchorOrigin.vertical]-r[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-r[e.selfOrigin.horizontal]};var s;!function(e,t,i,n,o){const r=i.bottom,a=i.right,s=function(){if(void 0!==rs)return rs;const e=document.createElement("p"),t=document.createElement("div");xo(e,{width:"100%",height:"200px"}),xo(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),rs=i-n,rs}(),l=window.innerHeight-s,c=document.body.clientWidth;if(e.top<0||e.top+r>l)if("center"===o.vertical)e.top=t[n.vertical]>l/2?Math.max(0,l-r):0,e.maxHeight=Math.min(r,l);else if(t[n.vertical]>l/2){const i=Math.min(l,"center"===n.vertical?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(r,i),e.top=Math.max(0,i-r)}else e.top=Math.max(0,"center"===n.vertical?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(r,l-e.top);if(e.left<0||e.left+a>c)if(e.maxWidth=Math.min(a,c),"middle"===o.horizontal)e.left=t[n.horizontal]>c/2?Math.max(0,c-a):0;else if(t[n.horizontal]>c/2){const i=Math.min(c,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(a,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,"middle"===n.horizontal?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(a,c-e.left)}(a,t,r,e.anchorOrigin,e.selfOrigin),o={top:a.top+"px",left:a.left+"px"},void 0!==a.maxHeight&&(o.maxHeight=a.maxHeight+"px",t.height>a.maxHeight&&(o.minHeight=o.maxHeight)),void 0!==a.maxWidth&&(o.maxWidth=a.maxWidth+"px",t.width>a.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}["left","middle","right"].forEach((e=>{cs[`${e}#ltr`]=e,cs[`${e}#rtl`]=e}));var ps=P({name:"VcTooltip",inheritAttrs:!1,props:{...Za,...Ya,...is,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ls},self:{type:String,default:"top middle",validator:ls},offset:{type:Array,default:()=>[14,14],validator:function(e){return!e||2===e.length&&("number"==typeof e[0]&&"number"==typeof e[1])}},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}},emits:[...Xa],setup(e,{slots:t,emit:i,attrs:n}){let a,l;const c=r(),u=o(null),d=o(!1),p=s((()=>us(e.anchor,!0))),m=s((()=>us(e.self,!0))),v=s((()=>!0!==e.persistent)),{registerTick:h,removeTick:f,prepareTick:y}=function(){let e;return g((()=>{e=void 0})),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(void 0!==e){const t=e;x((()=>{e===t&&(e(),e=void 0)}))}}}}(),{registerTimeout:C,removeTimeout:w}=fo(),{transition:O,transitionStyle:_}=function(e,t){const i=o(t.value);return b(t,(e=>{x((()=>{i.value=e}))})),{transition:s((()=>"vc-transition--"+(!0===i.value?e.transitionHide:e.transitionShow))),transitionStyle:s((()=>`--vc-transition-duration: ${e.transitionDuration}ms`))}}(e,d),{localScrollTarget:E,changeScrollEvent:P,unconfigureScrollTarget:I}=function(e,t){const i=o(null);let n;function r(e,t){const i=(void 0!==t?"add":"remove")+"EventListener",o=void 0!==t?t:n;e!==window&&e[i]("scroll",o,So.passive),window[i]("scroll",o,So.passive),n=t}function a(){null!==i.value&&(r(i.value),i.value=null)}const s=b((()=>e.noParentEvent),(()=>{null!==i.value&&(a(),t())}));return g(s),{localScrollTarget:i,unconfigureScrollTarget:a,changeScrollEvent:r}}(e,z),{anchorEl:M,canShow:j,anchorEvents:L}=qa({showing:d,configureAnchorEl:function(){if(!0===e.noParentEvent||void 0===M.value)return;const t=!0===Fo().isPhone?[[M.value,"touchstart","delayShow","passive"]]:[[M.value,"mouseenter","delayShow","passive"],[M.value,"mouseleave","delayHide","passive"]];Ao(L,"anchor",t)},avoidEmit:void 0}),{show:A,hide:D}=Qa({showing:d,canShow:j,handleShow:function(t){f(),w(),k(),h((()=>{l=new MutationObserver((()=>V())),l.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),V(),z()})),y(),void 0===a&&(a=b((()=>e.self+"|"+e.anchor),V));C((()=>{i("show",t)}),e.transitionDuration)},handleHide:function(t){f(),w(),N(),C((()=>{R(),i("hide",t)}),e.transitionDuration)},hideOnRouteChange:v,processOnMount:!0});Object.assign(L,{delayShow:function(t){if(!0===Fo().isPhone){Ho(),document.body.classList.add("non-selectable");const e=Zo(M.value),t=["touchmove","touchcancel","touchend","click"].map((t=>[e,t,"__delayHide","passiveCapture"]));Ao(L,"tooltipTemp",t)}C((()=>{A(t)}),e.delay)},delayHide:function(t){w(),!0===Fo().isPhone&&(Do(L,"tooltipTemp"),Ho(),setTimeout((()=>{document.body.classList.remove("non-selectable")}),10));C((()=>{D(t)}),e.hideDelay)}});const{showPortal:k,hidePortal:R,renderPortal:B}=ts(c,u,(function(){return S(T,{name:O.value,appear:!0},F)}));function N(){void 0!==l&&(l.disconnect(),l=void 0),void 0!==a&&(a(),a=void 0),I(),Do(L,"tooltipTemp")}function V(){const t=u.value;void 0!==M.value&&t&&ds({el:t,offset:e.offset,anchorEl:M.value,anchorOrigin:p.value,selfOrigin:m.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function z(){if(void 0!==M.value||void 0!==e.scrollTarget){E.value=os(M.value,e.scrollTarget);const t=!0===e.noParentEvent?V:D;P(E.value,t)}}function F(){return!0===d.value?S("div",{...n,ref:u,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",n.class],style:_.value,role:"complementary"},aa(t.default)):null}return g(N),Object.assign(null==c?void 0:c.proxy,{updatePosition:V}),B}});function ms(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}const vs=XMLHttpRequest,hs=vs.prototype.open,gs=["top","right","bottom","left"];let fs=[],ys=0;var bs=P({name:"VcAjaxBar",props:{position:{type:String,default:"top",validator:e=>gs.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function},emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=r(),n=o(0),a=o(!1),l=o(!0);let c,u,d=0;const p=s((()=>`vc-loading-bar vc-loading-bar--${e.position}`+(void 0!==e.color?` bg-${e.color}`:"")+(!0===l.value?"":" no-transition"))),m=s((()=>"top"===e.position||"bottom"===e.position)),v=s((()=>!0===m.value?"height":"width")),h=s((()=>{const t=a.value,i=function({p:e,pos:t,active:i,horiz:n,reverse:o,dir:r}){let a=1,s=1;return!0===n?(!0===o&&(a=-1),"bottom"===t&&(s=-1),{transform:`translate3d(${a*(e-100)}%,${i?0:-200*s}%,0)`}):(!0===o&&(s=-1),"right"===t&&(a=-1),{transform:`translate3d(${i?0:r*a*-200}%,${s*(e-100)}%,0)`})}({p:n.value,pos:e.position,active:t,horiz:m.value,reverse:e.reverse,dir:1});return i[v.value]=e.size,i.opacity=t?1:0,i.position="absolute"===e.positioning?"absolute":"fixed",i.backgroundColor=e.color,i})),f=s((()=>!0===a.value?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"}));function y(e=300){const i=u;return u=Math.max(0,e)||0,d++,d>1?(0===i&&e>0?w():i>0&&e<=0&&clearTimeout(c),d):(clearTimeout(c),t("start"),n.value=0,c=setTimeout((()=>{l.value=!0,e>0&&w()}),!0===a.value?500:1),!0!==a.value&&(a.value=!0,l.value=!1),d)}function b(e){return d>0&&(n.value=function(e,t){return"number"!=typeof t&&(t=e<25?3*Math.random()+3:e<65?3*Math.random():e<85?2*Math.random():e<99?.6:0),ms(e+t,0,100)}(n.value,e)),d}function C(){if(d=Math.max(0,d-1),d>0)return d;clearTimeout(c),t("stop");const e=()=>{l.value=!0,n.value=100,c=setTimeout((()=>{a.value=!1}),1e3)};0===n.value?c=setTimeout(e,1):e()}function w(){n.value<100&&(c=setTimeout((()=>{b(),w()}),u))}let O;return _((()=>{var t;!0!==e.skipHijack&&(O=!0,t={start:y,stop:C,hijackFilter:s((()=>e.hijackFilter||null))},ys++,fs.push(t),ys>1||(vs.prototype.open=function(e,t){const i=[];this.addEventListener("loadstart",(()=>{fs.forEach((e=>{null!==e.hijackFilter.value&&!0!==e.hijackFilter.value(t)||(e.start(),i.push(e.stop))}))}),{once:!0}),this.addEventListener("loadend",(()=>{i.forEach((e=>{e()}))}),{once:!0}),hs.apply(this,arguments)}))})),g((()=>{clearTimeout(c),!0===O&&function(e){fs=fs.filter((t=>t.start!==e)),ys=Math.max(0,ys-1),0===ys&&(vs.prototype.open=hs)}(y)})),Object.assign(i,{start:y,stop:C,increment:b}),()=>S("div",{class:p.value,style:h.value,...f.value})}});const Cs={dark:{type:Boolean,default:null}};function ws(e){return s((()=>e.dark))}const Os=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],_s=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var xs=P({name:"VcSkeleton",props:{...Cs,tag:{type:String,default:"div"},type:{type:String,validator:e=>Os.includes(e),default:"rect"},animation:{type:String,validator:e=>_s.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:t}){const i=ws(e),n=s((()=>void 0!==e.size?{width:e.size,height:e.size}:{width:e.width,height:e.height})),o=s((()=>`vc-skeleton vc-skeleton--${!0===i.value?"dark":"light"} vc-skeleton--type-${e.type}`+("none"!==e.animation?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(!0===e.square?" vc-skeleton--square":"")+(!0===e.bordered?" vc-skeleton--bordered":"")));return()=>S(e.tag,{class:o.value,style:n.value},aa(t.default))}});const Ss=["top","right","bottom","left"],Es={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>Ss.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function Ps(e,t){return{formClass:s((()=>"vc-fab--form-"+(!0===e.square?"square":"rounded"))),stacked:s((()=>!1===e.externalLabel&&["top","bottom"].includes(e.labelPosition))),labelProps:s((()=>{if(!0===e.externalLabel){const i=null===e.hideLabel?!1===t.value:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(!0===i?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(!0===e.hideLabel?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}}))}}const Ts=["up","right","down","left"],Is=["left","center","right"];var Ms=P({name:"VcFab",props:{...Es,...Ya,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>Ts.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>Is.includes(e)}},emits:Xa,setup(e,{slots:t}){const i=o(null),n=o(!0===e.modelValue),{formClass:r,labelProps:l}=Ps(e,n),c=s((()=>!0!==e.persistent)),{hide:u,toggle:d}=Qa({showing:n,hideOnRouteChange:c}),p=s((()=>({opened:n.value}))),m=s((()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${r.value}`+(!0===n.value?" vc-fab--opened":" vc-fab--closed"))),v=s((()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${!0===n.value?"opened":"closed"}`)),h=s((()=>"vc-fab__icon-holder  vc-fab__icon-holder--"+(!0===n.value?"opened":"closed")));function g(i,n){const o=t[i],r=`vc-fab__${i} absolute-full`;return void 0===o?S(ca,{class:r,name:e[n]}):S("div",{class:r},o(p.value))}function f(){const i=[];return!0!==e.hideIcon&&i.push(S("div",{class:h.value},[g("icon","icon"),g("active-icon","activeIcon")])),""===e.label&&void 0===t.label||i[l.value.action](S("div",l.value.data,void 0!==t.label?t.label(p.value):[e.label])),sa(t.tooltip,i)}return a(re,{showing:n,onChildClick(t){e.hideActionOnClick&&u(t),null!==i.value&&i.value.$el.focus()}}),()=>S("div",{class:m.value},[S($a,{ref:i,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":!0===n.value?"true":"false","aria-haspopup":"true",onClick:d},f),S("div",{class:v.value},aa(t.default))])}});const js={start:"self-end",center:"self-center",end:"self-start"},Ls=Object.keys(js);var As=P({name:"VcFabAction",props:{...Es,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>Ls.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:i}){const n=c(re),{formClass:o,labelProps:a}=Ps(e,null==n?void 0:n.showing),l=s((()=>{let t;return e.anchor&&(t=js[e.anchor]),o.value+(void 0!==t?` ${t}`:"")})),u=s((()=>{var t;return!0===e.disable||!0!==(null==(t=null==n?void 0:n.showing)?void 0:t.value)}));function d(e){var t;null==(t=null==n?void 0:n.onChildClick)||t.call(n,e),i("click",e)}function p(){const i=[];return""!==e.icon&&i.push(S(ca,{name:e.icon})),""!==e.label&&i[a.value.action](S("div",a.value.data,[e.label])),sa(t.default,i)}const m=r();return Object.assign(null==m?void 0:m.proxy,{click:d}),()=>S($a,{class:l.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:u.value,size:e.size,onClick:d},p)}});const Ds={name:String};function ks(e){return s((()=>({type:"hidden",name:e.name,value:e.modelValue})))}const Rs="vc-slider__marker-labels",Bs=e=>({value:e}),Ns=({marker:e})=>S("div",{key:e.value,style:e.style,class:e.classes},e.label),Vs=[34,37,40,33,39,38],zs={...Cs,...Ds,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}};function Fs({updateValue:e,updatePosition:i,getDragging:n,formAttrs:a}){const{props:l,emit:c,slots:u,proxy:d}=r(),p=ws(l),m=function(e={}){return(t,i,n)=>{t[i](S("input",{class:"hidden"+(n||""),...e.value}))}}(a),v=o(!1),h=o(!1),f=o(!1),y=o(!1),b=s((()=>!0===l.vertical?"--v":"--h")),C=s((()=>"-"+(!0===l.switchLabelSide?"switched":"standard"))),w=s((()=>!0===l.reverse)),O=s((()=>!0===isNaN(l.innerMin)||l.innerMin<l.min?l.min:l.innerMin)),_=s((()=>!0===isNaN(l.innerMax)||l.innerMax>l.max?l.max:l.innerMax)),x=s((()=>!0!==l.disable&&!0!==l.readonly&&O.value<_.value)),E=s((()=>(String(l.step).trim().split(".")[1]||"").length)),P=s((()=>0===l.step?1:l.step)),T=s((()=>!0===x.value?l.tabindex||0:-1)),I=s((()=>l.max-l.min)),M=s((()=>_.value-O.value)),j=s((()=>J(O.value))),L=s((()=>J(_.value))),A=s((()=>!0===l.vertical?!0===w.value?"bottom":"top":!0===w.value?"right":"left")),D=s((()=>!0===l.vertical?"height":"width")),k=s((()=>!0===l.vertical?"width":"height")),R=s((()=>!0===l.vertical?"vertical":"horizontal")),B=s((()=>{const e={role:"slider","aria-valuemin":O.value,"aria-valuemax":_.value,"aria-orientation":R.value,"data-step":l.step};return!0===l.disable?e["aria-disabled"]="true":!0===l.readonly&&(e["aria-readonly"]="true"),e})),N=s((()=>`vc-slider vc-slider${b.value} vc-slider--${!0===v.value?"":"in"}active inline no-wrap `+(!0===l.vertical?"row":"column")+(!0===l.disable?" disabled":" vc-slider--enabled"+(!0===x.value?" vc-slider--editable":""))+("both"===f.value?" vc-slider--focus":"")+(l.label||!0===l.labelAlways?" vc-slider--label":"")+(!0===l.labelAlways?" vc-slider--label-always":"")+(!0===p.value?" vc-slider--dark":"")+(!0===l.dense?" vc-slider--dense vc-slider--dense"+b.value:"")));function V(e){const t="vc-slider__"+e;return`${t} ${t}${b.value} ${t}${b.value}${C.value}`}function z(e){const t="vc-slider__"+e;return`${t} ${t}${b.value}`}const F=s((()=>{const e=l.selectionColor||l.color;return"vc-slider__selection absolute"+(void 0!==e?` text-${e}`:"")})),H=s((()=>z("markers")+" absolute overflow-hidden")),U=s((()=>z("track-container"))),W=s((()=>V("pin"))),G=s((()=>V("label"))),$=s((()=>V("text-container"))),Z=s((()=>V("marker-labels-container")+(void 0!==l.markerLabelsClass?` ${l.markerLabelsClass}`:""))),q=s((()=>"vc-slider__track relative-position no-outline"+(void 0!==l.trackColor?` bg-${l.trackColor}`:""))),Y=s((()=>{const e={[k.value]:l.trackSize};return void 0!==l.trackImg&&(e.backgroundImage=`url(${l.trackImg}) !important`),e})),X=s((()=>"vc-slider__inner absolute"+(void 0!==l.innerTrackColor?` bg-${l.innerTrackColor}`:""))),Q=s((()=>{const e={[A.value]:100*j.value+"%",[D.value]:100*(L.value-j.value)+"%"};return void 0!==l.innerTrackImg&&(e.backgroundImage=`url(${l.innerTrackImg}) !important`),e}));function J(e){return 0===I.value?0:(e-l.min)/I.value}const K=s((()=>{return!0===("number"==typeof(e=l.markers)&&isFinite(e))?l.markers:P.value;var e})),ee=s((()=>{const e=[],t=K.value,i=l.max;let n=l.min;do{e.push(n),n+=t}while(n<i);return e.push(i),e})),te=s((()=>{const e=` ${Rs}${b.value}-`;return Rs+`${e}${!0===l.switchMarkerLabelsSide?"switched":"standard"}${e}${!0===w.value?"rtl":"ltr"}`})),ie=s((()=>!1===l.markerLabels?null:function(e){if(!1===e)return null;if(!0===e)return ee.value.map(Bs);if("function"==typeof e)return ee.value.map((i=>{const n=e(i);return!0===t(n)?{...n,value:i}:{value:i,label:n}}));const i=({value:e})=>e>=l.min&&e<=l.max;if(!0===Array.isArray(e))return e.map((e=>!0===t(e)?e:{value:e})).filter(i);return Object.keys(e).map((i=>{const n=e[i],o=Number(i);return!0===t(n)?{...n,value:o}:{value:o,label:n}})).filter(i)}(l.markerLabels).map(((e,t)=>({index:t,value:e.value,label:e.label||e.value,classes:te.value+(void 0!==e.classes?" "+e.classes:""),style:{...re(e.value),...e.style||{}}}))))),ne=s((()=>({markerList:ie.value,markerMap:ae.value,classes:te.value,getStyle:re}))),oe=s((()=>{if(0!==M.value){const e=100*K.value/M.value;return{...Q.value,backgroundSize:!0===l.vertical?`2px ${e}%`:`${e}% 2px`}}return null}));function re(e){return{[A.value]:100*(e-l.min)/I.value+"%"}}const ae=s((()=>{if(!1===l.markerLabels)return null;const e={};return ie.value.forEach((t=>{e[t.value]=t})),e}));const se=s((()=>[[Qo,le,void 0,{[R.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]));function le(t){!0===t.isFinal?(void 0!==y.value&&(i(t.evt),!0===t.touch&&e(!0),y.value=void 0,c("pan","end")),v.value=!1,f.value=!1):!0===t.isFirst?(y.value=n(t.evt),i(t.evt),e(),v.value=!0,c("pan","start")):(i(t.evt),e())}function ce(){f.value=!1}function ue(){h.value=!1,v.value=!1,e(!0),ce(),document.removeEventListener("mouseup",ue,!0)}return g((()=>{document.removeEventListener("mouseup",ue,!0)})),{state:{active:v,focus:f,preventFocus:h,dragging:y,editable:x,classes:N,tabindex:T,attributes:B,step:P,decimals:E,trackLen:I,innerMin:O,innerMinRatio:j,innerMax:_,innerMaxRatio:L,positionProp:A,sizeProp:D,isReversed:w},methods:{onActivate:function(t){i(t,n(t)),e(),h.value=!0,v.value=!0,document.addEventListener("mouseup",ue,!0)},onMobileClick:function(t){i(t,n(t)),e(!0)},onBlur:ce,onKeyup:function(t){Vs.includes(t.keyCode)&&e(!0)},getContent:function(e,t,i,n){const o=[];"transparent"!==l.innerTrackColor&&o.push(S("div",{key:"inner",class:X.value,style:Q.value})),"transparent"!==l.selectionColor&&o.push(S("div",{key:"selection",class:F.value,style:e.value})),!1!==l.markers&&o.push(S("div",{key:"marker",class:H.value,style:oe.value})),n(o);const r=[la("div",{key:"trackC",class:U.value,tabindex:t.value,...i.value},[S("div",{class:q.value,style:Y.value},o)],"slide",x.value,(()=>se.value))];if(!1!==l.markerLabels){r[!0===l.switchMarkerLabelsSide?"unshift":"push"](S("div",{key:"markerL",class:Z.value},function(){if(void 0!==u["marker-label-group"])return u["marker-label-group"](ne.value);const e=u["marker-label"]||Ns;return ie.value.map((t=>e({marker:t,...ne.value})))}()))}return r},getThumbRenderFn:function(e){const t=s((()=>!1!==h.value||f.value!==e.focusValue&&"both"!==f.value?"":" vc-slider--focus")),i=s((()=>`vc-slider__thumb vc-slider__thumb${b.value} vc-slider__thumb${b.value}-${!0===w.value?"rtl":"ltr"} absolute non-selectable`+t.value+(void 0!==e.thumbColor.value?` text-${e.thumbColor.value}`:""))),n=s((()=>({width:l.thumbSize,height:l.thumbSize,[A.value]:100*e.ratio.value+"%",zIndex:f.value===e.focusValue?2:void 0}))),o=s((()=>void 0!==e.labelColor.value?` text-${e.labelColor.value}`:"")),r=s((()=>function(e){if(!0===l.vertical)return null;const t=e;return{transform:`translateX(calc(${2*t-1} * ${l.thumbSize} / 2 + ${50-100*t}%))`}}(e.ratio.value))),a=s((()=>"vc-slider__text"+(void 0!==e.labelTextColor.value?` text-${e.labelTextColor.value}`:"")));return()=>{const t=[S("svg",{class:"vc-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[S("path",{d:l.thumbPath})]),S("div",{class:"vc-slider__focus-ring fit"})];return!0!==l.label&&!0!==l.labelAlways||(t.push(S("div",{class:W.value+" absolute fit no-pointer-events"+o.value},[S("div",{class:G.value,style:{minWidth:l.thumbSize}},[S("div",{class:$.value,style:r.value},[S("span",{class:a.value},e.label.value)])])])),void 0!==l.name&&!0!==l.disable&&m(t,"push")),S("div",{class:i.value,style:n.value,...e.getNodeData()},t)}},convertRatioToModel:function(e){const{min:t,max:i,step:n}=l;let o=t+e*(i-t);if(n>0){const e=(o-t)%n;o+=(Math.abs(e)>=n/2?(e<0?-1:1)*n:0)-e}return E.value>0&&(o=parseFloat(o.toFixed(E.value))),ms(o,O.value,_.value)},convertModelToRatio:J,getDraggingRatio:function(e,t){const i=To(e),n=!0===l.vertical?ms((i.top-t.top)/t.height,0,1):ms((i.left-t.left)/t.width,0,1);return ms(!0===w.value?1-n:n,j.value,L.value)}}}}const Hs=()=>({});var Us=P({name:"VcSlider",props:{...zs,modelValue:{required:!0,default:null,validator:e=>"number"==typeof e||null===e},labelValue:[String,Number]},emits:["pan","update:modelValue","change"],setup(e,{emit:t}){const{state:i,methods:n}=Fs({updateValue:h,updatePosition:function(t,o=i.dragging.value){const r=n.getDraggingRatio(t,o);l.value=n.convertRatioToModel(r),a.value=!0!==e.snap||0===e.step?r:n.convertModelToRatio(l.value)},getDragging:function(){return r.value.getBoundingClientRect()},formAttrs:ks(e)}),r=o(null),a=o(0),l=o(0);function c(){l.value=null===e.modelValue?i.innerMin.value:ms(e.modelValue,i.innerMin.value,i.innerMax.value)}b((()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`),c),c();const u=s((()=>n.convertModelToRatio(l.value))),d=s((()=>!0===i.active.value?a.value:u.value)),p=s((()=>{const t={[i.positionProp.value]:100*i.innerMinRatio.value+"%",[i.sizeProp.value]:100*(d.value-i.innerMinRatio.value)+"%"};return void 0!==e.selectionImg&&(t.backgroundImage=`url(${e.selectionImg}) !important`),t})),m=n.getThumbRenderFn({focusValue:!0,getNodeData:Hs,ratio:d,label:s((()=>void 0!==e.labelValue?e.labelValue:l.value)),thumbColor:s((()=>e.thumbColor||e.color)),labelColor:s((()=>e.labelColor)),labelTextColor:s((()=>e.labelTextColor))}),v=s((()=>!0!==i.editable.value?{}:!0===Fo().isPhone?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:g,onBlur:n.onBlur,onKeydown:f,onKeyup:n.onKeyup}));function h(i){l.value!==e.modelValue&&t("update:modelValue",l.value),!0===i&&t("change",l.value)}function g(){i.focus.value=!0}function f(t){if(!Vs.includes(t.keyCode))return;jo(t);const n=([34,33].includes(t.keyCode)?10:1)*i.step.value,o=([34,37,40].includes(t.keyCode)?-1:1)*(!0===i.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*n;l.value=ms(parseFloat((l.value+o).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),h()}return()=>{const t=n.getContent(p,i.tabindex,v,(e=>{e.push(m())}));return S("div",{ref:r,class:i.classes.value+(null===e.modelValue?" vc-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},t)}}});[$a,ca,ma,ha,fa,ba,wa,_a,Sa,Pa,Ia,ja,Aa,Da,ps,bs,xs,Ms,As,Us].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ws=$a,Gs=ca,$s=ma,Zs=ha,qs=fa,Ys=ba,Xs=wa,Qs=_a,Js=Sa,Ks=Pa,el=Ia,tl=ja,il=Aa,nl=Da,ol=ps,rl=bs,al=xs,sl=Ms,ll=As,cl=Us,ul={beforeLoad:e=>!0,ready:e=>!0,unready:e=>!0,destroyed:e=>!0},dl={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},pl={...ul,definitionChanged:e=>!0},ml={...ul,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},vl={...ul,...dl,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},hl={...ul,...dl},gl={...ul,...dl,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,o,r,a)=>!0},fl={...ul,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0};var yl=P({name:"VcViewer",props:Jr,emits:{...ul,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0},setup(e,t){const i=r();i.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],i.cesiumMembersEvents=ea;const o=Kr(e,t,i),l=s((()=>e.containerId||t.attrs.id||"cesiumContainer"));a(oe,o.getServices()),i.appContext.config.globalProperties.$VueCesium=i.appContext.config.globalProperties.$VueCesium||{},i.appContext.config.globalProperties.$VueCesium[l.value]=o.getServices(),Object.assign(i.proxy,{creatingPromise:o.creatingPromise,load:o.load,unload:o.unload,reload:o.reload,cesiumObject:i.cesiumObject,getCesiumObject:()=>i.cesiumObject});const c=e=>{t.emit("touchEnd",e)};return()=>{var r;const a=[];return n(e.skeleton)&&!o.isReady.value?a.push(S(al,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):a.push(M("v-if")),a.push(M("vc-viewer"),E(S("div",{ref:o.viewerRef,class:le((null==(r=i.proxy)?void 0:r.$options.name)||""),id:l.value,style:t.attrs.style||{width:"100%",height:"100%"}},aa(t.slots.default)),[[Uo,c,e.touchHoldArg]])),a}}});yl.install=(e,t)=>{e.component(yl.name,yl)};const bl=yl,Cl=bl,wl={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length}};function Ol(e,t){const i=s((()=>{const t=e.position;return{top:t.indexOf("top")>-1,right:t.indexOf("right")>-1,bottom:t.indexOf("bottom")>-1,left:t.indexOf("left")>-1,vertical:"top"===t||"bottom"===t,horizontal:"left"===t||"right"===t}})),n=o(0),r=o(0),a=o(0),l=o(0),c=s((()=>{let t=0,o=0;const s=i.value;!0===s.top&&0!==n.value?o=`${n.value}px`:!0===s.bottom&&0!==l.value&&(o=-l.value+"px"),!0===s.left&&0!==a.value?t=1*a.value+"px":!0===s.right&&0!==r.value&&(t=-1*r.value+"px");const c={transform:`translate(${t}, ${o})`};return e.offset&&(c.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===s.vertical?(0!==a.value&&(c.right=`${a.value}px`),0!==r.value&&(c.left=`${r.value}px`)):!0===s.horizontal&&(0!==n.value&&(c.top=`${n.value}px`),0!==l.value&&(c.bottom=`${l.value}px`)),void 0===e.teleportToViewer||e.teleportToViewer?c:{}})),u=s((()=>void 0===e.teleportToViewer||e.teleportToViewer?`absolute absolute-${e.position}`:"relative-position"));return{attach:i,style:c,classes:u}}const _l={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...wl,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},xl=pe(_l);class Sl{static createTween(e,t){const{Cartesian2:i,Cartesian3:n,defaultValue:o,defined:r,DeveloperError:a,EasingFunction:s,Math:l,SceneMode:c}=Cesium;let u=(t=o(t,{})).destination;if(!r(e))throw new a("scene is required.");if(!r(u))throw new a("destination is required.");const d=e.mode;if(d===c.MORPHING)return Nl();const p=o(t.convert,!0),m=e.mapProjection,v=m.ellipsoid,h=t.maximumHeight,g=t.flyOverLongitude,f=t.flyOverLongitudeWeight,y=t.pitchAdjustHeight;let b=t.easingFunction;p&&d!==c.SCENE3D&&(v.cartesianToCartographic(u,Rl),u=m.project(Rl,Bl));const C=e.camera,w=t.endTransform;r(w)&&C._setTransform(w);let O=t.duration;r(O)||(O=Math.ceil(n.distance(C.position,u)/1e6)+2,O=Math.min(O,3));const _=o(t.heading,0),x=o(t.pitch,-l.PI_OVER_TWO),S=o(t.roll,0),E=e.screenSpaceCameraController;E.enableInputs=!1;const P=Vl(E,t.complete),T=Vl(E,t.cancel),I=C.frustum;let M=e.mode===c.SCENE2D;if(M=M&&i.equalsEpsilon(C.position,u,l.EPSILON6),M=M&&l.equalsEpsilon(Math.max(I.right-I.left,I.top-I.bottom),u.z,l.EPSILON6),M=M||e.mode!==c.SCENE2D&&n.equalsEpsilon(u,C.position,l.EPSILON10),M=M&&l.equalsEpsilon(l.negativePiToPi(_),l.negativePiToPi(C.heading),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(x),l.negativePiToPi(C.pitch),l.EPSILON10)&&l.equalsEpsilon(l.negativePiToPi(S),l.negativePiToPi(C.roll),l.EPSILON10),M)return Nl(P,T);const j=new Array(4);if(j[c.SCENE2D]=kl,j[c.SCENE3D]=Dl,j[c.COLUMBUS_VIEW]=jl,O<=0){return Nl((function(){j[d](e,1,u,_,x,S,h,g,f,y)({time:1}),"function"==typeof P&&P()}),T)}const L=j[d](e,O,u,_,x,S,h,g,f,y);if(!r(b)){const e=C.positionCartographic.height;b=e>(d===c.SCENE3D?v.cartesianToCartographic(u).height:u.z)&&e>11500?s.CUBIC_OUT:s.QUINTIC_IN_OUT}return{duration:O,easingFunction:b,startObject:{time:0},stopObject:{time:O},update:L,complete:P,cancel:T}}}const El={},Pl={};function Tl(e,t,i,n,o){const{Cartesian3:r,defined:a,Math:s}=Cesium;let l=o;const c=Math.max(i,n);if(!a(l)){const i=e.position,n=t,o=e.up,a=e.right,s=e.frustum,c=r.subtract(i,n,El),u=r.magnitude(r.multiplyByScalar(o,r.dot(c,o),Pl)),d=r.magnitude(r.multiplyByScalar(a,r.dot(c,a),Pl));l=Math.min(.2*function(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:o}=Cesium;let r,a,s;if(e instanceof n){const n=Math.tan(.5*e.fovy);return r=e.near,a=e.near*n,s=e.aspectRatio*a,Math.max(t*r/s,i*r/a)}return e instanceof o?(r=e.near,a=e.top,s=e.right,Math.max(t*r/s,i*r/a)):Math.max(t,i)}(s,u,d),1e9)}if(c<l){const e=8,t=1e6,o=-Math.pow((l-i)*t,1/e),r=Math.pow((l-n)*t,1/e);return function(i){const n=i*(r-o)+o;return-Math.pow(n,e)/t+l}}return function(e){return s.lerp(i,n,e)}}function Il(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const Ml={};function jl(e,t,i,n,o,r,a){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Ml),p=u.pitch,m=Il(u.heading,n),v=Il(u.roll,r),h=Tl(u,i,d.z,i.z,a);return function(e){const a=e.time/t;u.setView({orientation:{heading:c.lerp(m,n,a),pitch:c.lerp(p,o,a),roll:c.lerp(v,r,a)}}),s.lerp(d,i,a,u.position),u.position.z=h(a)}}const Ll={},Al={};function Dl(e,t,i,n,o,r,a,s,l,c){const{Cartesian3:u,Cartographic:d,defined:p,Math:m}=Cesium,v=e.camera,h=e.mapProjection.ellipsoid,g=d.clone(v.positionCartographic,Ll),f=v.pitch,y=Il(v.heading,n),b=Il(v.roll,r),C=h.cartesianToCartographic(i,Al);g.longitude=m.zeroToTwoPi(g.longitude),C.longitude=m.zeroToTwoPi(C.longitude);let w=!1;if(p(s)){const e=m.zeroToTwoPi(s),t=Math.min(g.longitude,C.longitude),i=Math.max(g.longitude,C.longitude),n=e>=t&&e<=i;if(p(l)){const e=Math.abs(g.longitude-C.longitude),t=m.TWO_PI-e;(n?e:t)<(n?t:e)*l&&!n&&(w=!0)}else n||(w=!0)}w?function(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}(g,C):function(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}(g,C);const O=Tl(v,i,g.height,C.height,a),_=function(e,t,i,n){const{defined:o,Math:r}=Cesium;if(o(n)&&i(.5)>n){const n=i(0),o=i(1),a=i(.5),s=a-n,l=a-o;return function(a){const c=i(a);if(a<=.5){const t=(c-n)/s;return r.lerp(e,-r.PI_OVER_TWO,t)}const u=(c-o)/l;return r.lerp(-r.PI_OVER_TWO,t,1-u)}}return function(i){return r.lerp(e,t,i)}}(f,o,O,c);return function(){const i=g.longitude,o=C.longitude,a=g.latitude,s=C.latitude;return function(l){const c=l.time/t,d=u.fromRadians(m.lerp(i,o,c),m.lerp(a,s,c),O(c),e.globe.ellipsoid);v.setView({destination:d,orientation:{heading:m.lerp(y,n,c),pitch:_(c),roll:m.lerp(b,r,c)}})}}()}function kl(e,t,i,n,o,r,a){const{Cartesian2:s,Cartesian3:l,Math:c}=Cesium,u=e.camera,d=l.clone(u.position,Ml),p=Il(u.heading,n),m=u.frustum.right-u.frustum.left,v=Tl(u,i,m,i.z,a);return function(e){const o=e.time/t;u.setView({orientation:{heading:c.lerp(p,n,o)}}),s.lerp(d,i,o,u.position);const r=v(o),a=u.frustum,l=a.top/a.right,m=.5*(r-(a.right-a.left));a.right+=m,a.left-=m,a.top=l*a.right,a.bottom=-a.top}}const Rl={},Bl={};function Nl(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function Vl(e,t){return function(){"function"==typeof t&&t(),e.enableInputs=!0}}const zl={...ul,compassEvt:e=>!0};var Fl=P({name:"VcCompass",props:_l,emits:zl,setup(e,i){var n;const a=r();a.cesiumClass="VcCompass";const l=bo(e,i,a);if(void 0===l)return;const{t:c}=mo(),u=Ie(a),{$services:d}=l,p=function(e,{emit:i},n){const r={},a={},s={},l={};let c,u,d,p,m;const v=o(0),h=o(0),g=o(0);let f,y,b=0,C={},w=!1,O=0,_={},x=0;const S=o(null),E=o(null),P=()=>{g.value=0,h.value=0},T=()=>{const{defined:e}=Cesium;e(n.viewer)?(c&&(c(),c=void 0),c=n.viewer.scene.postRender.addEventListener((function(){v.value!==n.viewer.scene.camera.heading&&(v.value=n.viewer.scene.camera.heading)}))):c&&(c(),c=void 0)},I=(e,t)=>{const{Cartesian2:o,Cartesian3:c,defined:v,getTimestamp:f,Math:y,Matrix4:O,Ray:_,SceneMode:x,Transforms:S}=Cesium;let E=n.viewer.scene,T=E.camera;const I=E.screenSpaceCameraController;if(E.mode===x.MORPHING||!I.enableInputs)return;switch(E.mode){case x.COLUMBUS_VIEW:if(I.enableLook)break;if(!I.enableTranslate||!I.enableTilt)return;break;case x.SCENE3D:if(I.enableLook)break;if(!I.enableTilt||!I.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!I.enableTranslate)return}const M=Pe(n,"compassEvt");M&&i("compassEvt",{type:"orbit",camera:E.camera,status:"start",target:e}),document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),v(m)&&n.viewer.clock.onTick.removeEventListener(m),d=void 0,p=void 0,m=void 0,b=f();const j=new o;j.x=E.canvas.clientWidth/2,j.y=E.canvas.clientHeight/2;const L=new _,A=T.getPickRay(j,L),D=E.globe.pick(A,E,l);function k(e,t){const i=Math.atan2(-e.y,e.x);h.value=y.zeroToTwoPi(i-y.PI_OVER_TWO);const n=o.magnitude(e),r=t/2,a=Math.min(n/r,1),s=.5*a*a+.5;g.value=s}v(D)?(C=S.eastNorthUpToFixedFrame(D||new Cesium.Cartesian3,E.globe.ellipsoid,s),w=!1):(C=S.eastNorthUpToFixedFrame(T.positionWC,E.globe.ellipsoid,s),w=!0),m=function(e){const t=f(),i=(t-b)*(2.5*(g.value-.5)/1e3),o=h.value+y.PI_OVER_TWO,r=Math.cos(o)*i,s=Math.sin(o)*i;E=n.viewer.scene,T=E.camera;const l=O.clone(T.transform,a);T.lookAtTransform(C),w?(T.look(c.UNIT_Z,-r),T.look(T.right,-s)):(T.rotateLeft(r),T.rotateUp(s)),T.lookAtTransform(l),b=t},d=function(t){const n=e.getBoundingClientRect(),a=new o((n.right-n.left)/2,(n.bottom-n.top)/2);let s;t instanceof MouseEvent?s=new o(t.clientX-n.left,t.clientY-n.top):t instanceof TouchEvent&&(s=new o(t.changedTouches[0].clientX-n.left,t.changedTouches[0].clientY-n.top)),k(o.subtract(s,a,r),n.width),M&&i("compassEvt",{type:"orbit",camera:E.camera,status:"changing",target:e})},p=function(t){document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),v(m)&&n.viewer.clock.onTick.removeEventListener(m),d=void 0,p=void 0,m=void 0,P(),M&&i("compassEvt",{type:"orbit",camera:E.camera,status:"end",target:e})},document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",p,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("touchend",p,!1),u=n.viewer.clock.onTick.addEventListener(m),k(t,e.getBoundingClientRect().width)},M=(t,o)=>{if(!e.enableCompassOuterRing)return;const c=n.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1);const{Cartesian2:p,Cartesian3:m,defined:v,Math:h,Matrix4:g,Ray:b,Transforms:C}=Cesium;y=void 0,f=void 0;const w=Pe(n,"compassEvt");w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:t}),O=Math.atan2(-o.y,o.x);const S=new p;S.x=c.canvas.clientWidth/2,S.y=c.canvas.clientHeight/2;const E=new b,P=u.getPickRay(S,E),T=c.globe.pick(P,c,l);_=v(T)?C.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,s):C.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,s);let I=g.clone(u.transform,a);u.lookAtTransform(_),x=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(I),y=function(e){const o=t.getBoundingClientRect(),s=new p((o.right-o.left)/2,(o.bottom-o.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-o.left,e.clientY-o.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-o.left,e.changedTouches[0].clientY-o.top));const d=p.subtract(l,s,r),m=Math.atan2(-d.y,d.x)-O,v=h.zeroToTwoPi(x-m);u=n.viewer.scene.camera,I=g.clone(u.transform,a),u.lookAtTransform(_);const f=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-f),u.lookAtTransform(I),w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:t})},f=function(e){document.removeEventListener("mousemove",y,!1),document.removeEventListener("touchmove",y,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),y=void 0,f=void 0,w&&i("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:t})},document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",y,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1)};return{heading:v,orbitCursorAngle:h,orbitCursorOpacity:g,handleDoubleClick:o=>{const{Cartesian2:r,Cartesian3:a,defined:s,Ellipsoid:c,Matrix4:u,Ray:d,SceneMode:p,Transforms:m}=Cesium,{viewer:v}=n,h=v.scene,g=h.camera,f=h.screenSpaceCameraController;if(h.mode===p.MORPHING||!f.enableInputs)return!0;if(h.mode===p.COLUMBUS_VIEW&&!f.enableTranslate)return;if(h.mode===p.SCENE3D||h.mode===p.COLUMBUS_VIEW){if(!f.enableLook)return;if(h.mode===p.SCENE3D&&!f.enableRotate)return}const y=new r;y.x=h.canvas.clientWidth/2,y.y=h.canvas.clientHeight/2;const b=new d,C=g.getPickRay(y,b),w=h.globe.pick(C,h,l);if(!t(w)||!s(w))return void v.camera.flyHome();const O=Pe(n,"compassEvt");O&&i("compassEvt",{type:"reset",camera:v.camera,status:"start",target:o.currentTarget});const _=m.eastNorthUpToFixedFrame(w,v.scene.globe.ellipsoid),x=a.subtract(w,g.position,new a),S=Sl.createTween(h,{destination:u.multiplyByPoint(_,new a(0,0,a.magnitude(x)),new a),direction:u.multiplyByPointAsVector(_,new a(0,0,-1),new a),up:u.multiplyByPointAsVector(_,new a(0,1,0),new a),duration:e.duration,complete:()=>{O&&i("compassEvt",{type:"reset",camera:v.camera,status:"end",target:o.currentTarget})},cancel:()=>{O&&i("compassEvt",{type:"reset",camera:v.camera,status:"cancel",target:o.currentTarget})}});h.tweens.add(S)},handleMouseDown:e=>{var t,i;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Te(S))||t.hide(),null==(i=Te(E))||i.hide();const{SceneMode:o,Cartesian2:a}=Cesium;if(n.viewer.scene.mode===o.MORPHING)return!0;const s=e.currentTarget,l=s.getBoundingClientRect(),c=l.width/2,u=new a((l.right-l.left)/2,(l.bottom-l.top)/2);let d;e instanceof MouseEvent?d=new a(e.clientX-l.left,e.clientY-l.top):e instanceof TouchEvent&&(d=new a(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top));const p=a.subtract(d,u,r),m=a.magnitude(p)/c;if(m<50/145)I(s,p);else{if(!(m<1))return!0;M(s,p)}},resetRotater:P,onTooltipBeforeShow:e=>{void 0===y&&void 0===d||(e.cancel=!0)},viewerChange:T,load:async e=>(n.viewer=e,T(),!0),unload:async()=>(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",p,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",p,!1),u&&u(),c&&c(),!0),iconOuterTooltipRef:S,iconInnerTooltipRef:E}}(e,i,a),m=Ol(e),v=o(null),h=o(null),g="VcNavigation"===(null==(n=u.proxy)?void 0:n.$options.name),f=o(g),y=O({});b((()=>e),(e=>{x((()=>{a.mounted&&j()}))}),{deep:!0});const C=s((()=>Object.assign({},xl.innerOptions,e.innerOptions))),w=s((()=>Object.assign({},xl.outerOptions,e.outerOptions))),_=s((()=>Object.assign({},xl.markerOptions,e.markerOptions))),E=s((()=>({transform:"translate(-50%,-50%) rotate(-"+p.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+p.heading.value+"rad)",opacity:void 0,background:w.value.background,color:w.value.color}))),P=s((()=>({transform:"rotate(-"+p.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+p.orbitCursorAngle.value+"rad)",opacity:p.orbitCursorOpacity.value,color:_.value.color}))),T=s((()=>({background:C.value.background,color:C.value.color})));a.createCesiumObject=async()=>v,a.mount=async()=>{var e;f.value=!0,x((()=>{j()}));const{viewer:t}=d;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Te(v)}),p.load(d.viewer)},a.unmount=async()=>{var e;f.value=!1;const{viewer:t}=d;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Te(v)}),p.unload()};const j=()=>{var t;const i=m.style.value,n=null==(t=Te(h))?void 0:t.$el;if(void 0!==n){const e=n.getBoundingClientRect();i.width=`${e.width}px`,i.height=`${e.height}px`}if(void 0===e.teleportToViewer||e.teleportToViewer){y.left=i.left,y.top=i.top,y.transform=i.transform;const e=m.attach.value;void 0!==n&&(!e.bottom&&!e.top||e.left||e.right||(i.left="50%",i.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(y,i)};return()=>{if(f.value){let t=[];t=sa(i.slots.default,t),t.push(S(Ws,{ref:h,class:"vc-compass-outerRing absolute-center",style:E.value,size:w.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},(()=>[S(Gs,{size:w.value.size,name:w.value.icon}),w.value.tooltip?S(ol,{ref:p.iconOuterTooltipRef,...w.value.tooltip,onBeforeShow:p.onTooltipBeforeShow},(()=>S("strong",{},w.value.tooltip.tip||c("vc.navigation.compass.outerTip")))):M("v-if")]))),t.push(S(Ws,{class:"vc-compass-innerRing absolute-center",style:T.value,size:C.value.size,dense:!0,round:!0},(()=>[S(Gs,{size:C.value.size,name:C.value.icon}),C.value.tooltip?S(ol,{ref:p.iconInnerTooltipRef,...C.value.tooltip,onBeforeShow:p.onTooltipBeforeShow},(()=>S("strong",{},C.value.tooltip.tip||c("vc.navigation.compass.innerTip")))):M("v-if")]))),t.push(P.value.opacity?S(Ws,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},(()=>[S(Gs,{size:_.value.size,name:_.value.icon,style:P.value})])):M("v-if"));const n=S("div",{ref:v,class:`vc-compass ${m.classes.value} ${e.customClass}`,style:y,onDblclick:p.handleDoubleClick,onMousedown:p.handleMouseDown,onMouseup:p.resetRotater,onTouchend:p.resetRotater,onTouchstart:p.handleMouseDown},t);return!g&&e.teleportToViewer?S(I,{to:d.viewer._element},n):n}return M("v-if")}}});const Hl={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:19059568.5}})},overrideViewerCamera:{type:Boolean,default:!1},...wl,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Ul=pe(Hl);const Wl={...ul,zoomEvt:e=>!0};var Gl=P({name:"VcZoomControl",props:Hl,emits:Wl,setup(e,t){var i;const n=r();n.cesiumClass="VcZoomControl",n.cesiumEvents=[];const a=bo(e,t,n);if(void 0===a)return;const{t:l}=mo(),{$services:c}=a,u=function(e,{emit:t},i,n){const r=o(null),a=o(null),s=o(null),l=(o,s)=>{var l,u;null==(l=Te(r))||l.hide(),null==(u=Te(a))||u.hide();const{Cartesian3:d,defined:p,IntersectionTests:m,Ray:v,SceneMode:h}=Cesium,{viewer:g}=n;if(p(g)){const n=g.scene,r=n.screenSpaceCameraController;if(!r.enableInputs||!r.enableZoom)return;if(n.mode===h.COLUMBUS_VIEW&&!r.enableTranslate)return;const a=n.camera;let l;switch(n.mode){case h.MORPHING:break;case h.SCENE2D:a.zoomIn(a.positionCartographic.height*(1-o));break;default:{let r;if(r=p(g.trackedEntity)?new Cesium.Cartesian3:c(g.scene),Cesium.defined(r))l={direction:a.direction,up:a.up};else{const e=new v(a.worldToCameraCoordinatesPoint(n.globe.ellipsoid.cartographicToCartesian(a.positionCartographic)),a.directionWC);r=m.grazingAltitudeLocation(e,n.globe.ellipsoid),l={heading:a.heading,pitch:a.pitch,roll:a.roll}}const u=new d,f=d.subtract(a.position,r,u),y=d.multiplyByScalar(f,o,f),b=d.add(r,y,r),C=o<1?"zoomIn":"zoomOut",w=s.currentTarget,O=rt(a.positionCartographic.height).toFixed(0),_=Pe(i,"zoomEvt");_&&t("zoomEvt",{type:C,camera:g.camera,status:"start",target:w,level:O}),Cesium.defined(g.trackedEntity)||n.mode===h.COLUMBUS_VIEW?a.position=b:a.flyTo({destination:b,orientation:l,duration:e.duration,convert:!1,complete:()=>{_&&t("zoomEvt",{type:C,camera:g.camera,status:"end",target:w,level:O})},cancel:()=>{_&&t("zoomEvt",{type:C,camera:g.camera,status:"cancel",target:w,level:O})}})}}}},c=e=>{const{defined:t,IntersectionTests:i,Ray:n}=Cesium,o=new n(e.camera.positionWC,e.camera.directionWC),r=i.rayEllipsoid(o,e.globe.ellipsoid);return t(r)?n.getPoint(o,r.start):i.grazingAltitudeLocation(o,e.globe.ellipsoid)};return{zoomIn:t=>{l(1/e.zoomAmount,t)},zoomOut:t=>{l(e.zoomAmount,t)},zoomReset:o=>{var r;null==(r=Te(s))||r.hide();const{viewer:a}=n;if(a.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(a.trackedEntity)){const e=a.trackedEntity;a.trackedEntity=void 0,a.trackedEntity=e}else{const n=Pe(i,"zoomEvt"),r=o.currentTarget,s=rt(a.camera.positionCartographic.height).toFixed(0);n&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"start",target:r,level:s});const l=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"end",target:r,level:s})},c=()=>{n&&t("zoomEvt",{type:"zoomReset",camera:a.camera,status:"cancel",target:r,level:s})},u=e.defaultResetView,d={duration:e.durationReset,complete:l,cancel:c};Ye(a,u,d)}},zoomInTooltipRef:r,zoomOutTooltipRef:a,resetTooltipRef:s}}(e,t,n,c),d=Ol(e),p=o(null),m=o(null),v=o(null),h=o(null),g="VcNavigation"===(null==(i=Ie(n).proxy)?void 0:i.$options.name),f=o(g),y=O({});b((()=>e),(e=>{x((()=>{n.mounted&&E()}))}),{deep:!0});const C=s((()=>Object.assign({},Ul.zoomOutOptions,e.zoomOutOptions))),w=s((()=>Object.assign({},Ul.zoomInOptions,e.zoomInOptions))),_=s((()=>Object.assign({},Ul.zoomResetOptions,e.zoomResetOptions)));n.createCesiumObject=async()=>{const{viewer:t}=c;if(e.overrideViewerCamera){qe(t,e.defaultResetView)}return p},n.mount=async()=>{var e;f.value=!0,x((()=>{E()}));const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Te(p)}),!0},n.unmount=async()=>{var e;f.value=!1;const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Te(p)}),!0};const E=()=>{var t,i,n;const o=d.style.value;if(y.left=o.left,y.top=o.top,y.transform=o.transform,o.flexDirection="vertical"===e.direction?"column":"row",o.background=e.background,o.borderRadius=e.borderRadius,o.border=e.border,!g){const r=null==(t=Te(m))?void 0:t.$el,a=null==(i=Te(v))?void 0:i.$el,s=null==(n=Te(h))?void 0:n.$el;let l=0,c=0;if(void 0!==r){const t=r.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==a){const t=a.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(void 0!==s){const t=s.getBoundingClientRect();"horizontal"===e.direction?(l+=t.width,c=t.height>c?t.height:c):(c+=t.height,l=t.width>l?t.width:l)}if(o.width=`${l+4}px`,o.height=`${c+4}px`,void 0===e.teleportToViewer||e.teleportToViewer){const e=d.attach.value;!e.bottom&&!e.top||e.left||e.right||(o.left="50%",o.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(o.top="50%",o.transform="translate(0, -50%)")}}Object.assign(y,o)},P=(e,i)=>{var n,o,r;let a,s,c,d;"zoomIn"===i?(a=m,s=u.zoomInTooltipRef,c=(null==(n=e.tooltip)?void 0:n.tip)||l("vc.navigation.zoomCotrol.zoomInTip"),d=u.zoomIn):"zoomOut"===i?(a=h,s=u.zoomOutTooltipRef,c=(null==(o=e.tooltip)?void 0:o.tip)||l("vc.navigation.zoomCotrol.zoomOutTip"),d=u.zoomOut):"zoomReset"===i&&(a=v,s=u.resetTooltipRef,c=(null==(r=e.tooltip)?void 0:r.tip)||l("vc.navigation.zoomCotrol.zoomResetTip"),d=u.zoomReset);const p=[];p.push(S(Gs,{name:e.icon,size:e.size})),p.push(S("div",null,e.label)),e.tooltip?p.push(S(ol,{ref:s,...e.tooltip},(()=>S("strong",null,c)))):p.push(M("v-if"));return S(Ws,{class:`vc-${le(i)}`,ref:a,size:e.size,flat:e.flat,stack:e.stack,round:e.round,dense:!0,style:{color:e.color,background:e.background},onClick:d},(()=>sa(t.slots.default,p)))};return Object.assign(n.proxy,{zoomIn:()=>u.zoomIn,zoomOut:()=>u.zoomOut,zoomReset:()=>u.zoomReset}),()=>{if(f.value){const t=[];t.push(S("li",null,P(w.value,"zoomIn"))),e.enableResetButton?t.push(S("li",null,P(_.value,"zoomReset"))):t.push(M("v-if")),t.push(S("li",null,P(C.value,"zoomOut")));const i=S("div",{ref:p,class:`vc-zoom-control ${d.classes.value} ${e.customClass}`,style:y},S("ul",{class:"vc-list"},t));return!g&&e.teleportToViewer?S(I,{to:c.viewer._element},i):i}return M("v-if")}}});const $l=P({name:"VcPrintView",props:{options:Object},setup(e){const t=o(!1),i=o(!1);r().cesiumClass="VcPrintView";const{t:n}=mo(),a=()=>{var n,o;if(t.value)return;const r=null==(n=e.options)?void 0:n.printWindow.document.getElementsByTagName("img");if(0===r.length)return;let a=!0;for(let e=0;a&&e<r.length;++e)a=r[e].complete;a&&(l(),t.value=a,t.value&&!i.value&&((null==(o=e.options)?void 0:o.readyCallback)&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let s;const l=()=>{s&&s()};return _((()=>{var t;const i=null==(t=e.options)?void 0:t.printWindow,n=window,o=null==i?void 0:i.setInterval(a,200),r=n.setInterval(a,200);s=()=>{i.clearInterval(o),n.clearInterval(r),s=void 0}})),f((()=>{l()})),()=>{var t,i,o,r,a,s;const l=[];if(l.push(S("p",{},S("img",{src:null==(t=e.options)?void 0:t.image,alt:n("vc.navigation.screenshot"),class:"vc-map-image"}))),(null==(i=e.options)?void 0:i.credits.length)&&(null==(o=e.options)?void 0:o.showCredit)?l.push(S("h1",{},n("vc.navigation.credit"))):l.push(M("v-if")),(null==(r=e.options)?void 0:r.credits.length)&&(null==(a=e.options)?void 0:a.showCredit)){const t=[];null==(s=e.options)||s.credits.forEach((e=>{t.push(S("li",{innerHTML:e}))})),l.push(S("ul",{},t))}else l.push(M("v-if"));return S("div",{},l)}}});var Zl={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...wl,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String,customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const ql={...ul,printEvt:e=>!0};var Yl=P({name:"VcPrint",props:Zl,emits:ql,setup(e,t){var i;const a=r();a.cesiumClass="VcPrint",a.cesiumEvents=[];const s=bo(e,t,a);if(void 0===s)return;const{t:l}=mo(),{$services:c}=s,u=o(null),d=o(null),p=o(null),m=Ol(e),v=o(!1),h="VcNavigation"===(null==(i=Ie(a).proxy)?void 0:i.$options.name),g=o(h),f=O({});b((()=>e),(e=>{x((()=>{a.mounted&&y()}))}),{deep:!0}),a.createCesiumObject=async()=>u,a.mount=async()=>{var e;g.value=!0,x((()=>{y()}));const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Te(u)}),!0},a.unmount=async()=>{var e;g.value=!1;const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Te(u)}),!0};const y=()=>{var t;const i=m.style.value;if(f.left=i.left,f.top=i.top,f.transform=i.transform,!h){const n=m.attach.value;void 0!==(null==(t=Te(p))?void 0:t.$el)&&(void 0===e.teleportToViewer||e.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(f,i)},C=()=>{var i;null==(i=Te(d))||i.hide();const{viewer:n}=c;(function(e){const t=e.scene,i=new Promise(((t,i)=>{const n=e.scene.postRender.addEventListener((()=>{n();try{const i=e.scene.canvas;t(i.toDataURL("image/png"))}catch($g){i($g)}}))}));return t.render(e.clock.currentTime),i})(n).then((i=>{if(e.downloadAutomatically){const t=document.createElement("a");t.download=e.screenshotName||l("vc.navigation.print.screenshot"),t.style.display="none",t.href=i,document.body.appendChild(t),t.click(),document.body.removeChild(t)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?_(i):e.printAutomatically&&w(i));Pe(a,"printEvt")&&t.emit("printEvt",{type:"capture",image:i,status:"end"})}))},w=e=>{E(!0,!0,e)},_=e=>{E(!1,!1,e)},E=(t,i,n)=>{let o;v.value=!0,t&&(o=document.createElement("iframe"),document.body.appendChild(o));const{viewer:r}=c;(e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",(()=>{i(t)})),t.document.open(),t.document.close(),t.document.head.innerHTML=`\n    <meta charset="UTF-8">\n    <title>${e.title}</title>\n    <style>\n  .background {\n    width: 100%;\n    fill: rgba(255, 255, 255, 1.0);\n  }\n\n  .map-image {\n    max-width: 95vw;\n    max-height: 95vh;\n  }\n\n  .layer-legends {\n    display: inline;\n    float: left;\n    padding-left: 20px;\n    padding-right: 20px;\n  }\n\n  .layer-title {\n    font-weight: bold;\n  }\n\n  h1, h2, h3 {\n    clear: both;\n  }\n</style>\n    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,j($l,{options:e}).mount(t.document.getElementById("print"))})({image:n,showCredit:e.showCredit,credits:P(r),printWindow:o?o.contentWindow:void 0,title:l("vc.navigation.print.printViewTitle"),readyCallback:e=>{i&&function(e){const t=Jo();let i=0;const n=setTimeout((function(){t.reject(!1)}),1e4);function o(){clearTimeout(n)}function r(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener((function(e){o(),e.matches?++i:(--i,r())})),e.onbeforeprint=function(){o(),++i},e.onafterprint=function(){o(),--i,r()},e.document.execCommand("print",!0,null)||e.print(),t.promise}(e).catch((e=>{s.logger.warn(e)})).then((()=>{o&&document.body.removeChild(o),t&&(v.value=!1)}))},closeCallback:e=>{t&&(v.value=!1)}}),t||(v.value=!1)},P=e=>e.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(e.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map((e=>e.html)),T=e=>{v.value&&(e.cancel=!0)};return()=>{if(g.value){const t=[];t.push(S(Gs,{name:e.icon,size:e.size})),t.push(S("div",null,e.label)),n(e.tooltip)?t.push(S(ol,{ref:d,onBeforeShow:T,...e.tooltip},(()=>S("strong",null,n(e.tooltip)&&e.tooltip.tip||l("vc.navigation.print.printTip"))))):t.push(M("v-if"));const i=[S(Ws,{ref:p,size:e.size,disabled:v.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:C},(()=>t))],o=S("div",{ref:u,class:`vc-print ${m.classes.value} ${e.customClass}`,style:f},i);return!h&&e.teleportToViewer?S(I,{to:c.viewer._element},o):o}return M("v-if")}}}),Xl={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:12.5},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,customApi:Function,description:Function,...wl,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const Ql={...ul,locationEvt:e=>!0};var Jl=P({name:"VcMyLocation",props:Xl,emits:Ql,setup(e,t){var a;const l=r();l.cesiumClass="VcMyLocation",l.cesiumEvents=[];const c=bo(e,t,l);if(void 0===c)return;const{$services:u}=c,{t:d}=mo(),p=o(null),v=o(null),h=o(null),g=o(!1),f=Ol(e),y="VcNavigation"===(null==(a=Ie(l).proxy)?void 0:a.$options.name),C=o(y),w=O({});let _,E;b((()=>e),(e=>{x((()=>{l.mounted&&T()}))}),{deep:!0});const P=s((()=>g.value?d("vc.navigation.myLocation.positioning"):n(e.tooltip)&&e.tooltip.tip||d("vc.navigation.myLocation.myLocationTip")));l.createCesiumObject=async()=>{const{viewer:t}=u,{CustomDataSource:i}=Cesium,n=t.dataSources.getByName("__vc-myLocation__");let o;if(n.length?_=n[0]:t.dataSources.add(new i("__vc-myLocation__")).then((e=>{_=e})),e.amap&&e.amap.key){const t=e.amap.options;o=new Promise(((i,n)=>{var o,r;L.load({key:null==(o=e.amap)?void 0:o.key,version:null==(r=e.amap)?void 0:r.version,plugins:["AMap.Geolocation"]}).then((e=>{E=new e.Geolocation(t),i(E)})).catch((e=>{c.logger.error(e),n(e)}))}))}const r=new Promise(((e,t)=>{x((()=>{e(Te(p))}))}));return Promise.all([r,o]).then((e=>e[0]))},l.mount=async()=>{var e;C.value=!0,x((()=>{T()}));const{viewer:t}=u;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"mounted",target:Te(p)}),!0},l.unmount=async()=>{var e;C.value=!1;const{viewer:t}=u;if(E){const e=document.getElementsByTagName("script"),t=[];for(const i of e)i.src.indexOf("/webapi.amap.com/maps")>-1&&t.push(i);t.forEach((e=>{document.getElementsByTagName("body")[0].removeChild(e)}))}return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:l.cesiumClass,status:"unmounted",target:Te(p)}),t.dataSources.remove(_,!0)};const T=()=>{var t;const i=f.style.value;if(w.left=i.left,w.top=i.top,w.transform=i.transform,!y){const n=f.attach.value;void 0!==(null==(t=Te(h))?void 0:t.$el)&&(void 0===e.teleportToViewer||e.teleportToViewer)&&(!n.bottom&&!n.top||n.left||n.right||(i.left="50%",i.transform="translate(-50%, 0)"),!n.left&&!n.right||n.top||n.bottom||(i.top="50%",i.transform="translate(0, -50%)"))}Object.assign(w,i)},j=()=>{var t;null==(t=Te(v))||t.hide(),g.value=!0;const n=e.customApi||e.customAPI;if(i(n)){const e=n(k);A(e)}else E&&e.amap&&e.amap.key?E.getCurrentPosition(((t,i)=>{var n;if("complete"===t){let t=[i.position.lng,i.position.lat];(null==(n=e.amap)?void 0:n.transformToWGS84)&&(t=cr(t[0],t[1])),A({lng:t[0],lat:t[1],address:i.formattedAddress},i)}else k(d("vc.navigation.myLocation.fail"),i.message)})):e.geolocation?navigator.geolocation.getCurrentPosition((e=>{A({lng:e.coords.longitude,lat:e.coords.latitude},e)}),k,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):k(d("vc.navigation.myLocation.fail"))},A=(i,n)=>{var o;const r=i.lng,a=i.lat,s=i.address,{Rectangle:c,sampleTerrain:p,defined:v,SceneMode:h}=Cesium,{viewer:f}=u;_.entities.removeAll();const y=_.entities.add({id:e.id,position:ke([r,a],f.scene.globe.ellipsoid),point:{color:He(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:He(e.outlineColor)},properties:{...n},description:(null==(o=e.description)?void 0:o.call(this,i,n))||D({[d("vc.navigation.myLocation.lng")]:r,[d("vc.navigation.myLocation.lat")]:a,[d("vc.navigation.myLocation.address")]:s})}),b=Pe(l,"locationEvt");b&&t.emit("locationEvt",{type:"location",position:i,detail:n,entity:y});const C={duration:e.duration};if(v(e.maximumHeight)&&(C.maximumHeight=e.maximumHeight),v(e.hpr)&&m(e.hpr)&&(C.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),f.scene.mode===h.SCENE2D||f.scene.mode===h.COLUMBUS_VIEW)return f.flyTo(y,C).then((()=>{g.value=!1,b&&t.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})}));const w=e.factor,O=c.fromDegrees(r-w,a-w,r+w,a+w),x=f.scene.camera,S=x.getRectangleCameraCoordinates(O),E=f.scene.globe.ellipsoid.cartesianToCartographic(S);return p(f.scene.globe.terrainProvider,e.level,[c.center(O)]).then((function(i){const n={longitude:E.longitude,latitude:E.latitude,height:E.height+i[0].height},o=f.scene.globe.ellipsoid.cartographicToCartesian(n);b&&t.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"start"}),x.flyTo({duration:e.duration,destination:o,complete:()=>{g.value=!1,b&&t.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"end"})},cancel:()=>{g.value=!1,b&&t.emit("locationEvt",{type:"zoomIn",camera:f.camera,status:"cancel"})}})}))},D=(e,t)=>{let i="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(n===t)continue;let o=e[n];"object"==typeof o&&(o=D(o)),n=n.replace(/_/g," "),Cesium.defined(o)&&(i+="<tr><th>"+n+"</th><td>"+o+"</td></tr>")}return i.length>0&&(i='<table class="cesium-infoBox-defaultTable"><tbody>'+i+"</tbody></table>"),i},k=(...e)=>{g.value=!1,c.logger.error(...e)},R=e=>{g.value&&(e.cancel=!0)};return()=>{if(C.value){const t=[];t.push(S(Gs,{name:e.icon,size:e.size})),t.push(S("div",null,e.label)),n(e.tooltip)?t.push(S(ol,{ref:v,onBeforeShow:R,...e.tooltip},(()=>S("strong",null,P.value)))):t.push(M("v-if"));const i=S("div",{ref:p,class:`vc-my-location ${f.classes.value} ${e.customClass}`,style:w},[S(Ws,{ref:h,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:g.value,dense:!0,style:{color:e.color,background:e.background},onClick:j},{default:()=>t,loading:()=>S((()=>{switch(e.loadingType){case"bars":default:return Zs;case"ios":return Qs;case"orbit":return Js;case"oval":return Ks;case"puff":return el;case"tail":return il}})())})]);return!y&&e.teleportToViewer?S(I,{to:u.viewer._element},i):i}return M("v-if")}}});class Kl{constructor(e){this.gridFileUrl=e,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return"undefined"!=typeof Int16Array&&"undefined"!=typeof Uint8Array}getHeight(e,t){return ec(this).then((function(i){return tc(i,e,t)}))}getHeights(e){return ec(this).then((function(t){for(let i=0;i<e.length;++i){const n=e[i];n.height=tc(t,n.longitude,n.latitude)}return e}))}}async function ec(e){const{defined:t}=Cesium;t(e.data)||(e.data=function(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const t=new Uint8Array(i);for(let e=0;e<t.length;e+=2){const i=t[e];t[e]=t[e+1],t[e+1]=i}e.data=new Int16Array(i)}return e.data}function tc(e,t,i){const{Math:n}=Cesium;let o=720*(n.PI_OVER_TWO-i)/Math.PI;o<0?o=0:o>720&&(o=720);let r=1440*(t=n.zeroToTwoPi(t))/n.TWO_PI;r<0?r=0:r>1440&&(r=1440);const a=0|r,s=0|o,l=r-a,c=o-s,u=1-l,d=1-c;return(ic(e,s,a)*u*d+ic(e,s,a+1)*l*d+ic(e,s+1,a)*u*c+ic(e,s+1,a+1)*l*c)/100}function ic(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[1440*t+i]}class nc{constructor(e){const{Cartographic:t,knockout:i}=Cesium,n=e.gridFileUrl;n&&(this.geoidModel=new Kl(n)),this.proj4Projection=e.proj4Projection,this.projectionUnits=e.projectionUnits,this.proj4longlat=e.proj4longlat,this.lastHeightSamplePosition=new t,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=Q(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=e.decimal||5,this.rangeType=e.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(e,t){const{Cartographic:i,defined:n,EllipsoidTerrainProvider:o,Intersections2D:r,SceneMode:a}=Cesium,s=e.scene,l=s.camera.getPickRay(t),c=s.globe,u=c.pickTriangle(l,s);if(n(u)){const e=c.ellipsoid,t=e.cartesianToCartographic(u.v0),n=e.cartesianToCartographic(u.v1),d=e.cartesianToCartographic(u.v2),p=e.cartesianToCartographic(s.mode===a.SCENE3D?u.intersection:s.globe.pick(l,s));let m;if(c.terrainProvider instanceof o)p.height=void 0;else{const e=r.computeBarycentricCoordinates(p.longitude,p.latitude,t.longitude,t.latitude,n.longitude,n.latitude,d.longitude,d.latitude);if(e.x>=-1e-15&&e.y>=-1e-15&&e.z>=-1e-15){const i=e.x*t.height+e.y*n.height+e.z*d.height;p.height=i}const i=c.terrainProvider.getLevelMaximumGeometricError(u.tile.level),o=p.height,a=Math.max(u.tile.data.tileBoundingRegion.minimumHeight,o-i),s=Math.min(u.tile.data.tileBoundingRegion.maximumHeight,o+i),l=a-(this.geoidModel?this.geoidModel.minimumHeight:0),v=s+(this.geoidModel?this.geoidModel.maximumHeight:0);m=Math.max(Math.abs(o-l),Math.abs(v-o))}i.clone(p,this.lastHeightSamplePosition);const v=c.terrainProvider;this.cartographicToFields(p,m),v instanceof o||this.debounceSampleAccurateHeight(v,p)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(e,t){const{Math:i}=Cesium,n=i.toDegrees(e.latitude),o=i.toDegrees(e.longitude);if(this.useProjection){const e=function(e,t,i,n,o){const r=1+Math.floor((e+180)/6),a=A(n,i+" +zone="+r+(t<0?" +south":""),[e,t]);return{utmZone:r+(t<0?"S":"N"),north:a[1].toFixed(2)+o,east:a[0].toFixed(2)+o}}(o,n,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=e.utmZone,this.north=e.north,this.east=e.east}const r=function(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:o,defined:r}=Cesium,a=o(i,{}),s=o(a.decimal,5);return 0===a.rangeType?(n.latitude=Math.abs(t).toFixed(s)+"°"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(s)+"°"+(e<0?"W":"E")):1===a.rangeType?(n.latitude=t.toFixed(s)+"°",n.longitude=e.toFixed(s)+"°"):2===a.rangeType&&(n.latitude=t.toFixed(s)+"°",n.longitude=(e<0?360+e:e).toFixed(s)+"°"),r(a.height)?n.elevation=Math.round(a.height)+(r(a.errorBar)?"±"+Math.round(a.errorBar):"")+"m":n.elevation="",n}(o,n,{height:e.height,errorBar:t,decimal:this.decimal,rangeType:this.rangeType});this.latitude=r.latitude,this.longitude=r.longitude,this.elevation=r.elevation}sampleAccurateHeight(e,t){const{Cartographic:i,sampleTerrainMostDetailed:n}=Cesium;if(this.tileRequestInFlight)return this.debounceSampleAccurateHeight.cancel(),void this.debounceSampleAccurateHeight(e,t);const o=i.clone(t),r=this.geoidModel?this.geoidModel.getHeight(t.longitude,t.latitude):void 0,a=n(e,[o]);this.tileRequestInFlight=Promise.all([r,a]).then((e=>{const n=e[0]||0;this.tileRequestInFlight=void 0,i.equals(t,this.lastHeightSamplePosition)&&(t.height=o.height-n,this.cartographicToFields(t))})).catch((()=>{this.tileRequestInFlight=void 0}))}}const oc=[],rc={start:0,stop:0},ac={},sc={},lc={};function cc(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:o,defined:r,DeveloperError:a,IntersectionTests:s,SceneMode:l}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(e,t,c,u){if(!r(e))throw new a("ray is required");if(!r(t))throw new a("scene is required");c=n(c,!0);const d=t.mode,p=t.mapProjection,m=oc;m.length=0;const v=this._surface._tilesToRender;let h,g,f,y=v.length;for(g=0;g<y;++g){h=v[g];const t=h.data;if(!r(t))continue;const n=t.pickBoundingSphere;d!==l.SCENE3D?(i.fromRectangleWithHeights2D(h.rectangle,p,t.minimumHeight,t.maximumHeight,n),o.fromElements(n.center.z,n.center.x,n.center.y,n.center)):i.clone(t.boundingSphere3D,n);const a=s.raySphere(e,n,rc);r(a)&&m.push(h)}for(m.sort(function(e){const{BoundingSphere:t}=Cesium;return function(i,n){return t.distanceSquaredTo(i.data.pickBoundingSphere,e)-t.distanceSquaredTo(n.data.pickBoundingSphere,e)}}(e.origin)),y=m.length,g=0;g<y;++g)if(f=m[g].data.pickTriangle(e,t.mode,t.mapProjection,c,u),r(f)){f.tile=m[g];break}return f},t.prototype.pickTriangle=t.prototype.pickTriangle||function(e,t,i,n){const a=this.renderedMesh;if(!r(a))return;const l=a.vertices,c=a.indices,u=a.encoding,d=c.length;for(let p=0;p<d;p+=3){const a=c[p],d=c[p+1],m=c[p+2],v=uc(u,t,i,l,a,ac),h=uc(u,t,i,l,d,sc),g=uc(u,t,i,l,m,lc),f=s.rayTriangle(e,v,h,g,n,new o);if(r(f))return{intersection:f,v0:v,v1:h,v2:g}}}}function uc(e,t,i,n,o,r){e.decodePosition(n,o,r);const{Cartesian3:a,defined:s,SceneMode:l}=Cesium;if(s(t)&&t!==l.SCENE3D){const e=i.ellipsoid.cartesianToCartographic(r);i.project(e,r),a.fromElements(r.z,r.x,r.y,r)}return r}var dc={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const pc={...ul,statusBarEvt:e=>!0};var mc=P({name:"VcStatusBar",props:dc,emits:pc,setup(e,t){var i;const a=r();a.cesiumClass="VcStatusBar",a.cesiumEvents=[];const s=bo(e,t,a);if(void 0===s)return;const l=Ie(a),{$services:c}=s,u=o(null),d=o(null),{t:p}=mo();let m=-1,v=-1;const h=O({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),g=O({fps:"NaN",ms:"NaN"}),f=o(),y=Ol(e),C="VcNavigation"===(null==(i=l.proxy)?void 0:i.$options.name),w=o(C),_=O({});let E=!1;b((()=>e),(e=>{x((()=>{a.mounted&&P()}))}),{deep:!0}),a.createCesiumObject=async()=>{const{viewer:t}=c,i=t._element;return e.showMouseInfo&&(f.value=new nc({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),i.addEventListener("wheel",L,!1),i.addEventListener("mousemove",L,!1),i.addEventListener("touchmove",L,!1),cc()),e.showCameraInfo&&(t.camera.changed.addEventListener(j),j()),e.showPerformanceInfo&&(E=t.scene.debugShowFramesPerSecond,t.scene.debugShowFramesPerSecond=!0,t.scene.postRender.addEventListener(T)),u},a.mount=async()=>{var e,t;w.value=!0,x((()=>{P()}));const{viewer:i}=c;return null==(t=i.viewerWidgetResized)||t.raiseEvent({type:a.cesiumClass,status:"mounted",target:null==(e=Te(u))?void 0:e.$el}),!0},a.unmount=async()=>{var t,i;w.value=!1;const{viewer:n}=c,o=n._element;return e.showMouseInfo&&(f.value=void 0,o.removeEventListener("wheel",L),o.removeEventListener("mousemove",L),o.removeEventListener("touchmove",L)),e.showCameraInfo&&n.camera.changed.removeEventListener(j),e.showPerformanceInfo&&(E?n.scene._performanceDisplay._container.style.display="block":n.scene.debugShowFramesPerSecond=!1,n.scene.postRender.removeEventListener(T)),null==(i=n.viewerWidgetResized)||i.raiseEvent({type:a.cesiumClass,status:"unmounted",target:null==(t=Te(u))?void 0:t.$el}),!0};const P=()=>{const t=y.style.value;if(_.left=t.left,_.top=t.top,_.transform=t.transform,t.background=e.background,t.color=e.color,void 0===e.teleportToViewer||e.teleportToViewer){const e=y.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(_,t)},T=Bo((e=>{var t,i;g.fps=null==(t=e._performanceDisplay)?void 0:t._fpsText.nodeValue,g.ms=null==(i=e._performanceDisplay)?void 0:i._msText.nodeValue,e._performanceDisplay._container.style.display="none"}),250),j=()=>{const{viewer:e}=c,t=e.scene,i=t.screenSpaceCameraController;if(t.mode===Cesium.SceneMode.MORPHING||!i.enableInputs)return;const{Math:n}=Cesium;h.heading=n.toDegrees(e.camera.heading).toFixed(1),h.pitch=n.toDegrees(e.camera.pitch).toFixed(1),h.roll=n.toDegrees(e.camera.roll).toFixed(1),h.height=e.camera.positionCartographic.height.toFixed(2),h.level=rt(Number(h.height)).toFixed(0)},L=i=>{var n;const{Cartesian2:o,SceneMode:r}=Cesium,{viewer:s}=c;if(s.scene.mode===r.MORPHING)return;const l="mousemove"===i.type||"wheel"===i.type?i.clientX:i.changedTouches[0].clientX,u="mousemove"===i.type||"wheel"===i.type?i.clientY:i.changedTouches[0].clientY;if(l===m&&u===v)return;m=l,v=u;const d=s._element;if(s){if(e.showMouseInfo){const e=d.getBoundingClientRect(),t=new o(l-e.left,u-e.top);null==(n=f.value)||n.updateCoordinatesFromCesium(s,t)}Pe(a,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:f.value,cameraInfo:h,performanceInfo:g})}},A=()=>{var t,i;e.useProjection&&(null==(t=Te(d))||t.hide(),e.showMouseInfo&&(null==(i=f.value)||i.toggleUseProjection()))};return Object.assign(a.proxy,{getMouseCoordsInfo:()=>f.value,getCameraInfo:()=>h,getPerformanceInfo:()=>g}),()=>{var i,o,r,a,s,l,m,v;if(w.value){const b=[];e.showMouseInfo?((null==(i=f.value)?void 0:i.useProjection)?b.push(S("div",{class:"vc-section-short ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.zone")),S("span",null,null==(a=f.value)?void 0:a.utmZone)]),S("div",{class:"vc-section ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.e")),S("span",null,null==(s=f.value)?void 0:s.east)]),S("div",{class:"vc-section ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.n")),S("span",null,null==(l=f.value)?void 0:l.north)])):b.push(S("div",{class:"vc-section ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.lng")),S("span",{},null==(o=f.value)?void 0:o.longitude)]),S("div",{class:"vc-section ellipsis"},[S("span",{},p("vc.navigation.statusBar.lat")),S("span",{},null==(r=f.value)?void 0:r.latitude)])),(null==(m=f.value)?void 0:m.elevation)?b.push(S("div",{class:"vc-section ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.elev")),S("span",{},null==(v=f.value)?void 0:v.elevation)])):b.push(M("v-if"))):b.push(M("v-if")),e.showCameraInfo?b.push(S("div",{class:"vc-section-short-mini ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.level")),S("span",null,h.level)]),S("div",{class:"vc-section-short ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.heading")),S("span",null,`${h.heading}°`)]),S("div",{class:"vc-section-short ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.pitch")),S("span",null,`${h.pitch}°`)]),S("div",{class:"vc-section-short ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.roll")),S("span",null,`${h.roll}°`)]),S("div",{class:"vc-section ellipsis"},[S("span",{...t.attrs},p("vc.navigation.statusBar.cameraHeight")),S("span",null,`${h.height}m`)])):b.push(M("v-if")),e.showPerformanceInfo?b.push(S("div",{class:"vc-section-short-mini ellipsis"},[S("span",null,g.ms)]),S("div",{class:"vc-section-short-mini ellipsis"},[S("span",null,g.fps)])):b.push(M("v-if")),n(e.tooltip)&&e.showMouseInfo&&e.useProjection?b.push(S(ol,{ref:d,...e.tooltip},(()=>S("strong",null,n(e.tooltip)&&e.tooltip.tip||p("vc.navigation.statusBar.tip"))))):b.push(M("v-if"));const w=S(Ws,{ref:u,class:`vc-status-bar ${y.classes.value} ${e.customClass}`,style:_,noCaps:!0,onClick:A},(()=>b));return!C&&e.teleportToViewer?S(I,{to:c.viewer._element},w):w}return M("v-if")}}}),vc={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const hc={...ul,distanceLegendEvt:e=>!0};var gc=P({name:"VcDistanceLegend",props:vc,emits:hc,setup(e,t){var i;const n=r();n.cesiumClass="VcDistanceLegend",n.cesiumEvents=[];const a=bo(e,t,n);if(void 0===a)return;const l=Ie(n),{$services:c}=a,u=o(null),d=o(""),p=Ol(e),m="VcNavigation"===(null==(i=l.proxy)?void 0:i.$options.name),v=o(m),h=O({});let g=0;const f=o(0);let y=0;b((()=>e),(e=>{x((()=>{n.mounted&&w()}))}),{deep:!0});const C=s((()=>({width:`${f.value}px`,left:5+(e.width+15-f.value)/2+"px",height:"2px",background:e.barBackground})));n.createCesiumObject=async()=>(d.value="",u),n.mount=async()=>{var e,t;v.value=!0,x((()=>{w()}));const{viewer:i}=c;return i.scene.postRender.addEventListener(_),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:n.cesiumClass,status:"mounted",target:null==(e=Te(u))?void 0:e.$el}),!0},n.unmount=async()=>{var e,t;v.value=!1;const{viewer:i}=c;return i.scene.postRender.removeEventListener(_),null==(t=i.viewerWidgetResized)||t.raiseEvent({type:n.cesiumClass,status:"unmounted",target:null==(e=Te(u))?void 0:e.$el}),!0};const w=()=>{const t=p.style.value;if(h.left=t.left,h.top=t.top,h.transform=t.transform,t.background=e.background,t.color=e.color,void 0===e.teleportToViewer||e.teleportToViewer){const e=p.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}t.width=`${e.width}px`,Object.assign(h,t)},_=Bo((i=>{const{Cartesian2:o,defined:r,getTimestamp:a,EllipsoidGeodesic:s}=Cesium,l=a();if(l<g+250)return;g=l;const c=new s,u=i.canvas.clientWidth,p=i.canvas.clientHeight,m=i.camera.getPickRay(new o(u/2|0,p-1)),v=i.camera.getPickRay(new o(1+u/2|0,p-1)),h=i.globe,b=h.pick(m,i),C=h.pick(v,i);if(!r(b)||!r(C))return f.value=0,void(d.value="");const w=h.ellipsoid.cartesianToCartographic(b),O=h.ellipsoid.cartesianToCartographic(C);c.setEndPoints(w,O);const _=c.surfaceDistance,x=e.width-10;let S;for(let e=fc.length-1;!r(S)&&e>=0;--e)if(fc[e]/_<x&&(S=fc[e],y!==S)){y=S;Pe(n,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:y,status:"changed"})}if(r(S)){let e;e=y>=1e3?(S/1e3).toString()+" km":S.toString()+" m",f.value=S/_|0,d.value=e}else f.value=0,d.value=""}),500);return()=>{if(v.value&&void 0!==d.value){const t=S(Ws,{ref:u,class:`vc-distance-legend ${p.classes.value} ${e.customClass}`,style:h,stack:!0,noCaps:!0},(()=>[S("label",null,d.value),S("div",{style:C.value,class:"vc-bar"})]));return!m&&e.teleportToViewer?S(I,{to:c.viewer._element},t):t}return M("v-if")}}});const fc=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],yc={...wl,compassOpts:{type:[Object,Boolean],default:()=>pe(_l,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>pe(Hl,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>pe(Zl,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>pe(Xl,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:pe(dc,["position","offset"]),distancelegendOpts:pe(vc,["position","offset"])})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},bc=pe(yc);var Cc=P({name:"VcNavigation",inheritAttrs:!1,props:yc,emits:{...ul,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcNavigation";const n=bo(e,t,i);if(void 0===n)return;const a=o(!1),{$services:l}=n,c=Ol(e),u=Ol(e.otherOpts||{position:"bottom-right"}),d=o(null),p=o(null),m=o(null),v=o(null),h=o(null),g=o(null),f=o(null),y=o(null),C=O({}),w=O({}),{emit:_}=t;b((()=>e),(()=>{x((()=>{var e,t,i,n,o,r;z(),null==(e=Te(m))||e.reload(),null==(t=Te(v))||t.reload(),null==(i=Te(g))||i.reload(),null==(n=Te(h))||n.reload(),null==(o=Te(f))||o.reload(),null==(r=Te(y))||r.reload()}))}),{deep:!0});const E=s((()=>Object.assign({},bc.compassOpts,e.compassOpts))),P=s((()=>Object.assign({},bc.zoomOpts,e.zoomOpts))),T=s((()=>Object.assign({},bc.printOpts,e.printOpts))),j=s((()=>Object.assign({},bc.locationOpts,e.locationOpts))),L=s((()=>Object.assign({},bc.otherOpts,e.otherOpts))),A=e=>{Pe(i,"compassEvt")&&_("compassEvt",e)},D=e=>{Pe(i,"zoomEvt")&&_("zoomEvt",e)},k=e=>{Pe(i,"printEvt")&&_("printEvt",e)},R=e=>{Pe(i,"locationEvt")&&_("locationEvt",e)},B=e=>{Pe(i,"statusBarEvt")&&_("statusBarEvt",e)},N=e=>{Pe(i,"distanceLegendEvt")&&_("distanceLegendEvt",e)};i.createCesiumObject=async()=>{var e;const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.addEventListener(V),[d,p]},i.mount=async()=>{var e;a.value=!0,x((()=>{z()}));const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Te(d)}),!0},i.unmount=async()=>{var e,t;a.value=!1;const{viewer:n}=l;return null==(e=n.viewerWidgetResized)||e.removeEventListener(V),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Te(d)}),!0};const V=()=>{x((()=>{z()}))},z=()=>{var t,i,n,o,r;const a=null==(t=Te(m))?void 0:t.$el;let s=0,l=0;if(void 0!==a&&"#comment"!==a.nodeName){const e=getComputedStyle(a.parentNode).margin;l=parseInt(e),s+=a.getBoundingClientRect().height+2*l}const d=null==(i=Te(v))?void 0:i.$el;void 0!==d&&"#comment"!==d.nodeName&&(s+=d.getBoundingClientRect().height+2*l);const p=null==(n=Te(h))?void 0:n.$el;void 0!==p&&"#comment"!==p.nodeName&&(s+=p.getBoundingClientRect().height+2*l);const y=null==(o=Te(g))?void 0:o.$el;void 0!==y&&"#comment"!==y.nodeName&&(s+=y.getBoundingClientRect().height+2*l);const b=c.style.value,O=c.attach.value;C.left=b.left,C.top=b.top,C.transform=b.transform,(void 0===e.teleportToViewer||e.teleportToViewer)&&(!O.bottom&&!O.top||O.left||O.right||(b.left="50%",b.transform="translate(-50%, 0)"),!O.left&&!O.right||O.top||O.bottom||(b.top="50%",b.transform="translate(0, -50%)")),Object.assign(C,b,{height:`${s}px`});const _=u.style.value,x=u.attach.value;w.left=_.left,w.top=_.top,w.transform=_.transform,(void 0===e.teleportToViewer||e.teleportToViewer)&&(!x.bottom&&!x.top||x.left||x.right||(_.left="50%",_.transform="translate(-50%, 0)"),!x.left&&!x.right||x.top||x.bottom||(_.top="50%",_.transform="translate(0, -50%)"));let S=0;const E=null==(r=Te(f))?void 0:r.$el;void 0!==E&&"#comment"!==E.nodeName&&(S+=E.getBoundingClientRect().height),Object.assign(w,_,{height:`${S}px`})};return()=>{if(a.value){const i=[];E.value&&!1!==e.compassOpts?i.push(S("div",{class:"vc-navigation-control"},[S(Fl,{ref:m,...E.value,onCompassEvt:A})])):i.push(M("v-if")),P.value&&!1!==e.zoomOpts?i.push(S("div",{class:"vc-navigation-control"},[S(Gl,{ref:v,...P.value,onZoomEvt:D})])):i.push(M("v-if")),T.value&&!1!==e.printOpts?i.push(S("div",{class:"vc-navigation-control"},[S(Yl,{ref:h,...T.value,onPrintEvt:k})])):i.push(M("v-if")),j.value&&!1!==e.locationOpts?i.push(S("div",{class:"vc-navigation-control"},[S(Jl,{ref:g,...j.value,onLocationEvt:R})])):i.push(M("v-if"));let n=[S("div",{class:"vc-navigation-controls"},i)];n=sa(t.slots.default,n);const o=[],r=S("div",{ref:d,class:`vc-navigation ${c.classes.value} ${e.customClass}`,style:C},n);if(e.teleportToViewer?o.push(S(I,{to:l.viewer._element},r)):o.push(r),!1!==e.otherOpts){const t=S("div",{ref:p,class:"vc-location-other-controls "+u.classes.value,style:w},[S(mc,{ref:f,...L.value.statusBarOpts,onStatusBarEvt:B}),S(gc,{ref:y,...L.value.distancelegendOpts,onDistanceLegendEvt:N})]);e.teleportToViewer?o.push(S(I,{to:l.viewer._element},t)):o.push(t)}return o}return M("v-if")}}});function wc(e,{emit:i},n){const r={},a={},s={},l={};let c,u,d,p;const m=o(0);let v,h,g,f,y,b=0,C={},w=0,O={},_=0;const x=o(56),S=o(3);let E;const P=o(null),T=()=>{const{defined:e}=Cesium;e(n.viewer)?(c&&(c(),c=void 0),c=n.viewer.scene.postRender.addEventListener((function(){m.value!==n.viewer.scene.camera.heading&&(m.value=n.viewer.scene.camera.heading)}))):c&&(c(),c=void 0)},I=(e,t)=>{const{defined:o,getTimestamp:r,SceneMode:a,Math:s,ScreenSpaceEventType:l}=Cesium,c=n.viewer.scene,m=c.screenSpaceCameraController;switch(c.mode){case a.COLUMBUS_VIEW:if(m.enableLook)break;if(!m.enableTranslate||!m.enableTilt)return;break;case a.SCENE3D:if(m.enableLook)break;if(!m.enableTilt||!m.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!m.enableTranslate)return}g.removeInputAction(l.LEFT_UP),o(p)&&n.viewer.clock.onTick.removeEventListener(p),d=void 0,p=void 0,r();let v=s.PI_OVER_TWO-Math.atan2(-t.y,t.x);const h=Math.PI/4;let f=0;const y=1,b=2,C=3,w=4;f=v>=-h&&h>=v?w:v>=h&&3*h>=v?b:v>=3*h&&5*h>=v?C:y;const O=Pe(n,"compassEvt");let _="rotateEast";switch(f){case y:_="rotateWest";break;case b:_="rotateEast";break;case C:_="rotateNorth";break;case w:_="rotateSouth"}O&&i("compassEvt",{type:_,camera:c.camera,status:"start",target:e}),p=function(t){const o=n.viewer.scene,a=o.camera;switch(r(),v=20*Math.abs(a.positionCartographic.height/6378317)*5e-4,f){case y:a.rotateLeft(v);break;case b:a.rotateRight(v);break;case C:a.rotate(a.right,-v);break;case w:a.rotate(a.right,v)}O&&i("compassEvt",{type:_,camera:o.camera,status:"changing",target:e})},d=function(t){g.removeInputAction(l.LEFT_UP),o(p)&&n.viewer.clock.onTick.removeEventListener(p),d=void 0,p=void 0,O&&i("compassEvt",{type:_,camera:c.camera,status:"end",target:e})},g.setInputAction(d,l.LEFT_UP),u=n.viewer.clock.onTick.addEventListener(p)},M=(t,o)=>{if(!e.enableCompassOuterRing)return;const c=n.viewer.scene;let u=c.camera;const d=c.screenSpaceCameraController;if(c.mode===Cesium.SceneMode.MORPHING||c.mode===Cesium.SceneMode.SCENE2D||!d.enableInputs)return;if(!d.enableLook&&(c.mode===Cesium.SceneMode.COLUMBUS_VIEW||c.mode===Cesium.SceneMode.SCENE3D&&!d.enableRotate))return;document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1);const{Cartesian2:p,Cartesian3:m,defined:g,Math:f,Matrix4:y,Ray:O,Transforms:_}=Cesium;h=void 0,v=void 0;const x=Pe(n,"compassEvt");x&&i("compassEvt",{type:"rotate",camera:c.camera,status:"start",target:t}),b=Math.atan2(-o.y,o.x);const S=new p;S.x=c.canvas.clientWidth/2,S.y=c.canvas.clientHeight/2;const E=new O,P=u.getPickRay(S,E),T=c.globe.pick(P,c,l);C=g(T)?_.eastNorthUpToFixedFrame(T||new m,c.globe.ellipsoid,s):_.eastNorthUpToFixedFrame(u.positionWC,c.globe.ellipsoid,s);let I=y.clone(u.transform,a);u.lookAtTransform(C),w=Math.atan2(u.position.y,u.position.x),m.magnitude(new m(u.position.x,u.position.y,0)),u.lookAtTransform(I),h=function(e){const o=t.getBoundingClientRect(),s=new p((o.right-o.left)/2,(o.bottom-o.top)/2);let l;e instanceof MouseEvent?l=new p(e.clientX-o.left,e.clientY-o.top):e instanceof TouchEvent&&(l=new p(e.changedTouches[0].clientX-o.left,e.changedTouches[0].clientY-o.top));const d=p.subtract(l,s,r),m=Math.atan2(-d.y,d.x)-b,v=f.zeroToTwoPi(w-m);u=n.viewer.scene.camera,I=y.clone(u.transform,a),u.lookAtTransform(C);const h=Math.atan2(u.position.y,u.position.x);u.rotateRight(v-h),u.lookAtTransform(I),x&&i("compassEvt",{type:"rotate",camera:c.camera,status:"changing",target:t})},v=function(e){document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),h=void 0,v=void 0,x&&i("compassEvt",{type:"rotate",camera:c.camera,status:"end",target:t})},document.addEventListener("mousemove",h,!1),document.addEventListener("touchmove",h,!1),document.addEventListener("mouseup",v,!1),document.addEventListener("touchend",v,!1)},j=(e,o)=>{const{Cartesian2:s,defined:l,Math:c,Matrix4:u,ScreenSpaceEventType:d,Transforms:p}=Cesium;g.removeInputAction(d.MOUSE_MOVE),g.removeInputAction(d.LEFT_UP),f=void 0,y=void 0,_=c.PI_OVER_TWO-Math.atan2(-o.y,o.x),_=_<0?0:_,_=_>c.PI_OVER_TWO?c.PI_OVER_TWO:_;const m=n.viewer.scene,v=m.camera,h=new s;h.x=m.canvas.clientWidth/2,h.y=m.canvas.clientHeight/2;let b=v.pickEllipsoid(h,m.globe.ellipsoid);if(!l(b))for(;h.y<m.canvas.clientHeight;)h.y+=5,b=v.pickEllipsoid(h,m.globe.ellipsoid);const C=Pe(n,"compassEvt");C&&i("compassEvt",{type:"tilt",camera:m.camera,status:"start",target:e}),t(b)&&l(b)&&(O=p.eastNorthUpToFixedFrame(b,m.globe.ellipsoid)),f=t=>{const o=e.getBoundingClientRect(),l=new Cesium.Cartesian2((o.right-o.left)/2,(o.bottom-o.top)/2),d=s.clone(t.endPosition),p=s.subtract(d,l,r);let v=c.PI_OVER_TWO-Math.atan2(-p.y,p.x);v=v<0?0:v,v=v>c.PI_OVER_TWO?c.PI_OVER_TWO:v;const h=n.viewer.scene.camera,g=u.clone(h.transform,a);h.lookAtTransform(O);const f=v-_;h.rotateUp(f),_=v,h.lookAtTransform(g);let y=Math.ceil(v/(Math.PI/40));y=y>19?19:y;const b=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][y];x.value=b.x,S.value=b.y,C&&i("compassEvt",{type:"tilt",camera:m.camera,status:"changing",target:e})},y=function(t){g.removeInputAction(d.MOUSE_MOVE),g.removeInputAction(d.LEFT_UP),f=void 0,y=void 0,C&&i("compassEvt",{type:"tilt",camera:m.camera,status:"end",target:e})},g.setInputAction(f,d.MOUSE_MOVE),g.setInputAction(y,d.LEFT_UP)};return{heading:m,handleDoubleClick:t=>{const{Cartesian2:o,Cartesian3:r,defined:a,Matrix4:s,Ray:c,SceneMode:u,Transforms:d}=Cesium,{viewer:p}=n,m=p.scene,v=m.camera,h=m.screenSpaceCameraController;if(m.mode===u.MORPHING||!h.enableInputs)return!0;if(m.mode===u.COLUMBUS_VIEW&&!h.enableTranslate)return;if(m.mode===u.SCENE3D||m.mode===u.COLUMBUS_VIEW){if(!h.enableLook)return;if(m.mode===u.SCENE3D&&!h.enableRotate)return}const g=new o;g.x=m.canvas.clientWidth/2,g.y=m.canvas.clientHeight/2;const f=new c,y=v.getPickRay(g,f),b=m.globe.pick(y,m,l);if(!a(b))return void p.camera.flyHome();const C=Pe(n,"compassEvt");C&&i("compassEvt",{type:"reset",camera:p.camera,status:"start",target:t.currentTarget});const w=d.eastNorthUpToFixedFrame(b||new r,p.scene.globe.ellipsoid),O=r.subtract(b||new r,v.position,new r),_=Sl.createTween(m,{destination:s.multiplyByPoint(w,new r(0,0,r.magnitude(O)),new r),direction:s.multiplyByPointAsVector(w,new r(0,0,-1),new r),up:s.multiplyByPointAsVector(w,new r(0,1,0),new r),duration:e.duration,complete:()=>{C&&i("compassEvt",{type:"reset",camera:p.camera,status:"end",target:t.currentTarget})},cancel:()=>{C&&i("compassEvt",{type:"reset",camera:p.camera,status:"cancel",target:t.currentTarget})}});m.tweens.add(_)},handleMouseDown:e=>{var t;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),null==(t=Te(P))||t.hide();const{Cartesian2:i,SceneMode:o,Math:a}=Cesium;if(n.viewer.scene.mode===o.MORPHING)return!0;const s=e.currentTarget,l=e.currentTarget.getBoundingClientRect(),c=new i((l.right-l.left)/2,(l.bottom-l.top)/2);let u;e instanceof MouseEvent?(u=new i(e.clientX-l.left,e.clientY-l.top),E=new i(e.clientX,e.clientY)):e instanceof TouchEvent&&(u=new i(e.changedTouches[0].clientX-l.left,e.changedTouches[0].clientY-l.top),E=new i(e.changedTouches[0].clientX,e.changedTouches[0].clientY));const d=i.subtract(u,c,r),p=i.magnitude(d);if(p>30&&p<45)M(s,d);else if(p>50&&p<70){const e=a.PI_OVER_TWO-Math.atan2(-d.y,d.x);e>=0&&e<=a.PI_OVER_TWO&&j(s,d)}else I(s,d)},handleMouseUp:e=>{const{Cartesian2:t,Math:i}=Cesium,o=e.currentTarget.getBoundingClientRect(),a=new t((o.right-o.left)/2,(o.bottom-o.top)/2),s="mouseup"===e.type?new t(e.clientX-o.left,e.clientY-o.top):new t(e.changedTouches[0].clientX-o.left,e.changedTouches[0].clientY-o.top),l=t.subtract(s,a,r),c=t.magnitude(l);if(c>30&&c<45){const o=i.toDegrees(Math.atan2(-l.y,l.x)),r="mouseup"===e.type?new t(e.clientX,e.clientY):new t(e.changedTouches[0].clientX,e.changedTouches[0].clientY),a=r.x-E.x,s=r.y-E.y;if(Math.sqrt(a*a+s*s)>5)return;const c=i.toDegrees(m.value),u=Math.abs(o-c),d=n.viewer.scene;(o>0&&c>0&&c<90&&u>80&&u<100||u>260&&u<280)&&d.camera.flyTo({destination:d.camera.position,orientation:{heading:0,pitch:d.camera.pitch}})}},onTooltipBeforeShow:e=>{void 0!==h&&(e.cancel=!0)},viewerChange:T,load:async(e,t)=>(n.viewer=e,m.value=e.scene.camera.heading,T(),g=new Cesium.ScreenSpaceEventHandler(t),(()=>{const{Math:e}=Cesium,t=e.PI_OVER_TWO+n.viewer.scene.camera.pitch,i=Math.PI/2/20;let o=Math.floor(t/i);o=o>19?19:o,o=o<0?0:o,x.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].x,S.value=[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}][o].y})(),!0),unload:async()=>(document.removeEventListener("mousemove",h,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("mouseup",v,!1),document.removeEventListener("touchend",v,!1),u&&u(),c&&c(),null==g||g.destroy(),!0),tiltbarLeft:x,tiltbarTop:S,tooltipRef:P}}var Oc=P({name:"VcCompassSm",props:{enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...wl},emits:{...ul,compassEvt:e=>!0},setup(e,t){var i;const n=r();n.cesiumClass="VcCompassSm";const a=bo(e,t,n);if(void 0===a)return;mo();const l=Ie(n),{$services:c}=a,u=wc(e,t,n),d=Ol(e),p=o(null),m=o(null),v="VcNavigationSm"===(null==(i=l.proxy)?void 0:i.$options.name),h=o(v),g=O({});b((()=>e),(e=>{x((()=>{n.mounted&&w()}))}),{deep:!0});const f=s((()=>({left:u.tiltbarLeft.value+"px",top:u.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"}))),y=s((()=>({visibility:e.autoHidden?"hidden":"visible"}))),C=s((()=>({transform:"rotate(-"+u.heading.value+"rad)",WebkitTransform:"rotate(-"+u.heading.value+"rad)"})));n.createCesiumObject=async()=>{h.value=!0;const{viewer:e}=c;return new Promise(((t,i)=>{x((()=>{if(v)t(Te(p));else{e._element.appendChild(Te(p)),t(Te(p))}}))}))},n.mount=async()=>{var e;w();const{viewer:t}=c;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"mounted",target:Te(p)}),u.load(c.viewer,Te(p))},n.unmount=async()=>{var e;const{viewer:t}=c,i=t._element;return v||i.contains(Te(p))&&i.removeChild(Te(p)),null==(e=t.viewerWidgetResized)||e.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Te(p)}),u.unload()};const w=()=>{const e=d.style.value;g.left=e.left,g.top=e.top,g.transform=e.transform;const t=d.attach.value,i=Te(m);if(void 0!==i){const n=null==i?void 0:i.getBoundingClientRect();e.width=`${null==n?void 0:n.width}px`,e.height=`${null==n?void 0:n.height}px`,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)")}Object.assign(g,e)};return()=>{if(h.value){let e=[];return e=sa(t.slots.default,e),e.push(S("div",{class:"vc-compass-tilt-sm",style:y.value})),e.push(S("div",{class:"vc-compass-tiltbar-sm",style:f.value})),e.push(S("div",{class:"vc-compass-arrows-sm",style:y.value})),e.push(S("div",{ref:m,class:"vc-compass-outer-ring-sm",style:C.value})),e.push(S("div",{class:"vc-arrows-e-sm",style:y.value})),e.push(S("div",{class:"vc-arrows-n-sm",style:y.value})),e.push(S("div",{class:"vc-arrows-s-sm",style:y.value})),e.push(S("div",{class:"vc-arrows-w-sm",style:y.value})),S("div",{ref:p,class:"vc-compass-sm "+d.classes.value,style:g,onMousedown:u.handleMouseDown,onMouseup:u.handleMouseUp,onTouchend:u.handleMouseUp,onTouchstart:u.handleMouseDown},e)}return M("v-if")}}});var _c=P({name:"VcZoomControlSm",props:{...wl,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},emits:{...ul,zoomEvt:e=>!0},setup(e,i){var n;const a=r();a.cesiumClass="VcZoomControlSm",a.cesiumEvents=[];const l=o(),c=o(),u=o(),d=o(),p="VcNavigationSm"===(null==(n=Ie(a).proxy)?void 0:n.$options.name),m=o(p),v=O({}),h=bo(e,i,a);if(void 0===h)return;const{t:g}=mo(),{$services:f}=h,y=Ol(e),C=function(e,{emit:i},n,r){const a=o(65),s=o(null),l=o(null),c=o(null);let u,d,p,m,v,h,g,f,y,b,C,w;const O=e=>{const{Cartesian2:o,Cartesian3:a,defined:s,Ellipsoid:l,Math:c}=Cesium,{viewer:u}=r,d=u.scene,p=d.camera,m=d.canvas,v=new o;v.x=m.clientWidth/2,v.y=m.clientHeight/2;const h=_(v);if(s(h)){const o=a.distance(p.position,h);let r=.0618*e*.2;r=o>300?r:2*r;const l=o*r,d=new a;a.subtract(h,p.position,d);const m=a.clone(p.right),g=a.dot(d,m),f=new a;a.multiplyByScalar(m,g,f),a.subtract(d,f,d),a.normalize(d,d),p.move(d,l);const y=new a;a.normalize(h,y);const b=p.pickEllipsoid(v,u.scene.globe.ellipsoid);if(t(b)&&s(b)&&!isNaN(b.x)&&!isNaN(b.y)&&!isNaN(b.z)&&!(p.positionCartographic.height<0)){a.normalize(b,b);const t=a.angleBetween(y,b);if(!c.equalsEpsilon(t,0,c.EPSILON10)){const o=a.cross(y,b,new a);p.rotate(o,t),Pe(n,"zoomEvt")&&i("zoomEvt",{type:1===e?"zoomIn":"zoomOut",camera:u.camera,status:"end"})}}}},_=e=>{const{defined:i,Cartesian3:n}=Cesium,{viewer:o}=r,a=o.scene,s=a.globe,l=a.camera;if(i(s)){let o;a.pickPositionSupported&&(o=a.pickPositionWorldCoordinates(e));const r=l.getPickRay(e),c=s.pick(r,a),u=i(o)?n.distance(o,l.positionWC):Number.POSITIVE_INFINITY;return(t(c)&&i(c)?n.distance(c,l.positionWC):Number.POSITIVE_INFINITY)>u?o:c}};return{handleZoomInMouseDown:e=>{var t,i,n;const{defined:o,getTimestamp:a,SceneMode:v,ScreenSpaceEventType:h}=Cesium,{viewer:g}=r;null==(t=Te(s))||t.hide(),null==(i=Te(l))||i.hide(),null==(n=Te(c))||n.hide(),u.removeInputAction(h.LEFT_UP),o(d)&&g.clock.onTick.removeEventListener(d),p=void 0,d=void 0,a();const f=g.scene.camera;d=()=>{g.scene.mode===v.COLUMBUS_VIEW||g.scene.mode===v.SCENE2D?f.zoomIn():O(1)},p=()=>{u.removeInputAction(h.LEFT_UP),o(d)&&g.clock.onTick.removeEventListener(d),p=void 0,d=void 0},u.setInputAction(p,h.LEFT_UP),m=g.clock.onTick.addEventListener(d)},handleZoomOutMouseDown:e=>{var t,i,n;null==(t=Te(s))||t.hide(),null==(i=Te(l))||i.hide(),null==(n=Te(c))||n.hide();const{defined:o,getTimestamp:a,SceneMode:d,ScreenSpaceEventType:p}=Cesium,{viewer:m}=r;u.removeInputAction(p.LEFT_UP),o(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0,a();const f=m.scene.camera;v=()=>{m.scene.mode===d.COLUMBUS_VIEW||m.scene.mode===d.SCENE2D?f.zoomOut():O(-1)},h=()=>{u.removeInputAction(p.LEFT_UP),o(v)&&m.clock.onTick.removeEventListener(v),h=void 0,v=void 0},u.setInputAction(h,p.LEFT_UP),g=m.clock.onTick.addEventListener(v)},handleZoomBarScrollMouseDown:e=>{var t,i,n;null==(t=Te(s))||t.hide(),null==(i=Te(l))||i.hide(),null==(n=Te(c))||n.hide();const{Cartesian2:o,defined:u,SceneMode:d}=Cesium,{viewer:p}=r;document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,b=void 0;const m=p.scene.camera;b=()=>{const e=a.value-65;e>0?p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomOut():O(-1):e<0&&(p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomIn():O(1))},f=e=>{const t=a.value,i=e.target.parentElement.getBoundingClientRect(),n=w.getBoundingClientRect(),r=new Cesium.Cartesian2;r.x="touchmove"===e.type?e.changedTouches[0].clientX-n.left:e.clientX-n.left,r.y="touchmove"===e.type?e.changedTouches[0].clientY-n.top:e.clientY-n.top;let s=new o(i.width-r.x,i.height-r.y).y-16;s=s<0?0:s,s=s>120?120:s,a.value=120-s,a.value-t>0?p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomOut():O(-1):p.scene.mode===d.COLUMBUS_VIEW||p.scene.mode===d.SCENE2D?m.zoomIn():O(1)},y=()=>{document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),u(b)&&p.clock.onTick.removeEventListener(b),y=void 0,f=void 0,b=void 0,a.value=65},document.addEventListener("mousemove",f,!1),document.addEventListener("touchmove",f,!1),document.addEventListener("mouseup",y,!1),document.addEventListener("touchend",y,!1),C=p.clock.onTick.addEventListener(b)},load:e=>(w=e,u=new Cesium.ScreenSpaceEventHandler(e),!0),unload:()=>(document.removeEventListener("mousemove",f,!1),document.removeEventListener("touchmove",f,!1),document.removeEventListener("mouseup",y,!1),document.removeEventListener("touchend",y,!1),null==m||m(),null==g||g(),null==C||C(),null==u||u.destroy(),!0),zoombarTop:a,zoomInTooltipRef:s,zoomOutTooltipRef:l,zoomBarTooltipRef:c,onTooltipBeforeShow:e=>{void 0===f&&void 0===d&&void 0===v||(e.cancel=!0)}}}(0,i,a,f);b((()=>e),(e=>{x((()=>{a.mounted&&_()}))}),{deep:!0});const w=s((()=>({top:C.zoombarTop.value+"px"})));a.createCesiumObject=async()=>new Promise(((e,i)=>{m.value=!0,x((()=>{const i=Te(l),{viewer:n}=f;if(p)e(i);else{const o=n._element;t(i)&&(null==o||o.appendChild(i)),e(i)}}))})),a.mount=async()=>{var e;_();const{viewer:t}=f;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"mounted",target:Te(l)}),C.load(Te(l))},a.unmount=async()=>{var e;const{viewer:i}=f;if(!p){const e=i._element,n=Te(l);t(n)&&(null==e?void 0:e.contains(n))&&e.removeChild(n)}return null==(e=i.viewerWidgetResized)||e.raiseEvent({type:a.cesiumClass,status:"unmounted",target:Te(l)}),C.unload()};const _=()=>{const t=y.style.value;if(v.left=t.left,v.top=t.top,v.transform=t.transform,v.visibility=e.autoHidden?"hidden":"visible",!p){const e=y.attach.value;!e.bottom&&!e.top||e.left||e.right||(t.left="50%",t.transform="translate(-50%, 0)"),!e.left&&!e.right||e.top||e.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(v,t)};return()=>{if(m.value){let t=[];return t=sa(i.slots.default,t),t.push(S("div",{ref:c,class:"vc-zoomin-sm",onMousedown:C.handleZoomInMouseDown,onTouchstart:C.handleZoomInMouseDown},e.tooltip?S(ol,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>S("strong",{},e.tooltip.zoomInTip||g("vc.navigationSm.zoomCotrol.zoomInTip")))):M("v-if"))),t.push(S("div",{ref:d,class:"vc-zoomout-sm",onMousedown:C.handleZoomOutMouseDown,onTouchstart:C.handleZoomOutMouseDown},e.tooltip?S(ol,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>S("strong",{},e.tooltip.zoomOutTip||g("vc.navigationSm.zoomCotrol.zoomOutTip")))):M("v-if"))),t.push(S("div",{ref:u,class:"vc-zoombar-sm",style:w.value,onMousedown:C.handleZoomBarScrollMouseDown,onTouchstart:C.handleZoomBarScrollMouseDown},e.tooltip?S(ol,{ref:C.zoomInTooltipRef,...e.tooltip,onBeforeShow:C.onTooltipBeforeShow},(()=>S("strong",{},e.tooltip.zoomBarTip||g("vc.navigationSm.zoomCotrol.zoomBarTip")))):M("v-if"))),S("div",{ref:l,class:"vc-zoom-control-sm "+y.classes.value,style:v},t)}return M("v-if")}}});const xc={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},Sc={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}};var Ec=P({name:"VcNavigationSm",inheritAttrs:!1,props:{...wl,compassOpts:{type:[Boolean,Object],default:()=>xc},zoomOpts:{type:[Boolean,Object],default:()=>Sc}},emits:{...ul,zoomEvt:e=>!0,compassEvt:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcNavigationSm";const n=bo(e,t,i);if(void 0===n)return;const a=o(!1),{$services:l}=n,c=Ol(e),u=o(null),d=o(null),p=o(null),m=O({}),{emit:v}=t;b((()=>e),(()=>{x((()=>{var e,t;w(),null==(e=Te(d))||e.reload(),null==(t=Te(p))||t.reload()}))}),{deep:!0});const h=s((()=>Object.assign({},xc,e.compassOpts))),g=s((()=>Object.assign({},Sc,e.zoomOpts))),f=e=>{Pe(i,"compassEvt")&&v("compassEvt",e)},y=e=>{Pe(i,"zoomEvt")&&v("zoomEvt",e)};i.createCesiumObject=async()=>{var e;a.value=!0;const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.addEventListener(C),new Promise(((e,i)=>{x((()=>{t._element.appendChild(Te(u)),e(Te(u))}))}))},i.mount=async()=>{var e;w();const{viewer:t}=l;return null==(e=t.viewerWidgetResized)||e.raiseEvent({type:i.cesiumClass,status:"mounted",target:Te(u)}),!0},i.unmount=async()=>{var e,t;const{viewer:n}=l,o=n._element;return o.contains(Te(u))&&o.removeChild(Te(u)),null==(e=n.viewerWidgetResized)||e.removeEventListener(C),null==(t=n.viewerWidgetResized)||t.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Te(u)}),!0};const C=()=>{x((()=>{w()}))},w=()=>{const e=c.style.value,t=c.attach.value;m.left=e.left,m.top=e.top,m.transform=e.transform,!t.bottom&&!t.top||t.left||t.right||(e.left="50%",e.transform="translate(-50%, 0)"),!t.left&&!t.right||t.top||t.bottom||(e.top="50%",e.transform="translate(0, -50%)"),Object.assign(m,e)};return()=>{if(a.value){let i=[];return i=sa(t.slots.default,i),h.value&&!1!==e.compassOpts&&i.push(S(Oc,{ref:d,onCompassEvt:f,...h.value})),g.value&&!1!==e.zoomOpts&&i.push(S(_c,{ref:p,onZoomEvt:y,...g.value})),S("div",{ref:u,class:"vc-navigation-sm "+c.classes.value,style:m},i)}return M("v-if")}}});var Pc=P({name:"VcOverviewMap",props:{position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}},emits:{...ul,"update:modelValue":e=>!0},setup(e,t){const i=r();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{t:a}=mo(),{$services:l}=n,c=o(null),u=o(null),d=O({}),p=o(null),m=o(null),v=Ol(e),h=o(e.modelValue);let g,y,b=[];const C=s((()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts))),w=s((()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2,containerId:"vc-overview-map"},e.viewerOpts)));i.createCesiumObject=async()=>{const{viewer:e}=l;return e._element.appendChild(Te(c)),[Te(c),Te(m)]},i.mount=async()=>{E();const{viewer:e}=l;return e.clock.onTick.addEventListener(_),!0},i.unmount=async()=>{const{viewer:e}=l,t=e._element;return e.clock.onTick.removeEventListener(_),t.contains(Te(c))&&t.removeChild(Te(c)),!0};const _=()=>{if(g){const{viewer:t}=l,i=t.camera.computeViewRectangle(),{defined:n}=Cesium;if(!n(i))return;const o=i.expand(e.widthFactor,e.heightFactor);g.camera.flyTo({destination:o.clone(),orientation:{heading:t.camera.heading,pitch:t.camera.pitch,roll:t.camera.roll},duration:0});const{Cartesian3:r,SceneTransforms:a}=Cesium,s=r.fromRadians(i.west,i.north),c=r.fromRadians(i.east,i.north),u=r.fromRadians(i.west,i.south),d=r.fromRadians(i.east,i.south),p=g.scene,m=a.wgs84ToWindowCoordinates(p,s),v=a.wgs84ToWindowCoordinates(p,c),h=a.wgs84ToWindowCoordinates(p,u),f=a.wgs84ToWindowCoordinates(p,d);if(!(n(m)&&n(v)&&n(h)&&n(f)))return;const b=v.x-m.x,C=h.y-m.y,w=(m.x+v.x)/2-b/2,O=(m.y+h.y)/2-C/2;if(b<=0||C<=0)return;const _=new Cesium.BoundingRectangle(w,O,b,C);y.rectangle=_,y.material.uniforms.color=He(e.centerRectColor),y.show=!0}},x=e=>{const{viewer:t}=e;g=t;const i=t.scene.screenSpaceCameraController;i.enableRotate=!1,i.enableTranslate=!1,i.enableZoom=!1,i.enableTilt=!1,i.enableLook=!1,g.scene.highDynamicRange=!1,g.scene.globe.enableLighting=!1,g.scene.globe.showWaterEffect=!1,g.scene.globe.depthTestAgainstTerrain=!1,g.scene.skyAtmosphere.show=!1,g.scene.fog.enabled=!1,g.scene.skyBox.show=!1,g.scene.sun.show=!1,g.scene.moon.show=!1,g.scene.highDynamicRange=!1,g.scene.globe.showGroundAtmosphere=!1,y=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),y.show=!1,g.scene.primitives.add(y)},E=()=>{var t;const i=v.style.value;if(d.left=i.left,d.top=i.top,d.transform=i.transform,d["pointer-events"]="none",i.borderRadius=e.borderRadius,i.border=e.border,h.value)i.width=e.width,i.height=e.height;else{const n=/(\d+)/g.exec(e.border),o=(null==n?void 0:n.length)?parseFloat(n[0]):0,r=getComputedStyle(null==(t=Te(u))?void 0:t.$el);i.width=`${parseFloat(r.width)+parseFloat(r.padding)+o}px`,i.height=`${parseFloat(r.height)+parseFloat(r.padding)+o}px`}Object.assign(d,i)},P=()=>{h.value?T():I(),h.value=!h.value,t.emit("update:modelValue",h.value)},T=()=>{var t;const i=/(\d+)/g.exec(e.border),n=(null==i?void 0:i.length)?parseFloat(i[0]):0,o=getComputedStyle(null==(t=Te(u))?void 0:t.$el);d.width=`${parseFloat(o.width)+parseFloat(o.padding)+n}px`,d.height=`${parseFloat(o.height)+parseFloat(o.padding)+n}px`},I=()=>{d.width=e.width,d.height=e.height};return f((()=>{b.forEach((e=>e())),b=[]})),()=>{const i=[];return i.push(S(Ws,{ref:u,class:"toggle toggle-"+e.position+(h.value?"":" minimized "),flat:!0,dense:!0,icon:C.value.icon,size:C.value.size,style:{color:C.value.color,background:C.value.background,"pointer-events":"auto"},onClick:P},(()=>C.value.tooltip?S(ol,{ref:p,...C.value.tooltip},(()=>S("strong",{},C.value.tooltip.tip||a("vc.overview."+(h.value?"hidden":"show"))))):M("v-if")))),i.push(S(bl,{ref:m,...w.value,onReady:x},(()=>aa(t.slots.default)))),S("div",{ref:c,class:"vc-overview-map "+v.classes.value,style:d},i)}}});class Tc{constructor(e){this.id=e.id||Cesium.createGuid()}static getBoundingSphere(e,t){var i,n,o,r;const{Primitive:a,ClassificationPrimitive:s,GroundPolylinePrimitive:l,GroundPrimitive:c,Polyline:u}=Cesium;let d;return e instanceof s||e instanceof l?d=null==(n=null==(i=e._primitive)?void 0:i._boundingSphereWC)?void 0:n[0]:e instanceof a?d=null==(o=e._boundingSphereWC)?void 0:o[0]:e instanceof c?d=null==(r=e._boundingVolumes)?void 0:r[0]:e instanceof u?d=e._boundingVolumeWC:e instanceof Cesium.Entity&&(d=new Cesium.BoundingSphere,t.dataSourceDisplay.getBoundingSphere(e,!0,d)),d}static fromPickedFeature(e,t,i,n){var o,r,a,s,l;const c=new Tc({id:e.id});if(e.position)c.position=e.position;else if(e instanceof Cesium.Model)c.position=Cesium.Matrix4.getTranslation(e.modelMatrix,new Cesium.Cartesian3);else if(e instanceof Cesium.Cesium3DTileset){let e=t.content.tile.boundingSphere.center,i=null==(o=null==t?void 0:t.getProperty)?void 0:o.call(t,"position");Cesium.defined(i)&&("string"==typeof i&&(i=JSON.parse(i)),e=ke(i)),c.position=e}else c.position=null==(r=Tc.getBoundingSphere(e,i))?void 0:r.center;return c.cesiumObject=e,c.pickedFeature=t,c.windowPosition=n,c.description=(null==e?void 0:e.description)||(null==(a=null==e?void 0:e.description)?void 0:a.getValue()),c.properties=(null==e?void 0:e.properties)||(null==(s=null==e?void 0:e.properties)?void 0:s.getValue())||(null==(l=null==e?void 0:e.feature)?void 0:l.properties),c}static fromImageryLayerFeature(e,t){const i=new Tc({id:e.name});return i.name=e.name,i.description=e.description,i.properties=e.properties,i.data=e.data,i.imageryLayer=e.imageryLayer,i.position=t.scene.globe.ellipsoid.cartographicToCartesian(e.position),i.coords=e.coords,i}}class Ic{constructor(){const{knockout:e}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,e.track(this,["isLoading","features","error"])}}function Mc(e,t,i=[],n=[]){const{defined:o}=Cesium,r=t.globe.pick(e,t);if(!o(r))return;const a=t.globe.ellipsoid.cartesianToCartographic(r),s=[],l=[];return function(e,t,i,n){const{defined:o,Rectangle:r,Math:a}=Cesium,s=e.globe._surface._tilesToRender;let l;for(let u=0;!o(l)&&u<s.length;++u){const e=s[u];r.contains(e.rectangle,t)&&(l=e)}if(!o(l))return;const c=l.data.imagery;for(let u=c.length-1;u>=0;--u){const e=c[u],s=e.readyImagery;if(!o(s))continue;const d=s.imageryLayer.imageryProvider;if(i&&!o(d.pickFeatures))continue;if(!r.contains(s.rectangle,t))continue;const p=new r,m=1/1024;p.west=a.lerp(l.rectangle.west,l.rectangle.east,e.textureCoordinateRectangle.x-m),p.east=a.lerp(l.rectangle.west,l.rectangle.east,e.textureCoordinateRectangle.z+m),p.south=a.lerp(l.rectangle.south,l.rectangle.north,e.textureCoordinateRectangle.y-m),p.north=a.lerp(l.rectangle.south,l.rectangle.north,e.textureCoordinateRectangle.w+m),r.contains(p,t)&&n(s)}}(t,a,!0,(function(e){if(-1!==n.indexOf(e.imageryLayer.vcId))return;if(i.length&&-1===i.indexOf(e.imageryLayer.vcId))return;const t=e.imageryLayer.imageryProvider.pickFeatures(e.x,e.y,e.level,a.longitude,a.latitude);o(t)&&(s.push(t),l.push(e.imageryLayer))})),0!==s.length?Promise.all(s).then((function(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i],r=l[i];if(o(n)&&n.length>0)for(let e=0;e<n.length;++e){const i=n[e];i.imageryLayer=r,o(i.position)||(i.position=a),t.push(i)}}return t})):void 0}var jc=P({name:"VcSelectionIndicator",props:{show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},includeImageryIds:{type:Array,default:()=>[]},excludeImageryIds:{type:Array,default:()=>[]},limit:{type:Number,default:25}},emits:{...ul,pickEvt:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:a}=n;let s;const l=function(e,t,i){const n="-1000px",r=o(n),a=o(n),s=o(),l=o();let c,u;const d=o(null),p=o(null);let v=[],h=!1;const g=O({top:a.value,left:r.value,transform:"",opacity:1});v.push(b(p,(t=>{var n,o,r;const a=t,{defined:l}=Cesium;if(l(a)&&l(null==a?void 0:a.position)){const{viewer:t}=i;s.value=(null==a?void 0:a.position)instanceof Cesium.Cartesian3?null==a?void 0:a.position:null==(n=null==a?void 0:a.position)?void 0:n.getValue(t.clock.currentTime),P(),null==(o=e.proxy)||o.$emit("pickEvt",a)}else T(),null==(r=e.proxy)||r.$emit("pickEvt",a);E()}))),v.push(b(d,(e=>{const{defined:t,Entity:i}=Cesium,n=e;if(t(n)){const e=new i({id:"__Vc__Pick__Location__"});e.position=n.pickPosition,p.value=e}else p.value=void 0;x((()=>{t(n.allFeaturesAvailablePromise)&&n.allFeaturesAvailablePromise.then((()=>{var e,i,o;const r=n.features.filter((e=>t(e)));p.value=r.filter(y)[0],!t(p.value)&&r.length>0&&(p.value=r[0],h&&p.value instanceof Tc&&(null==(o=null==(i=null==(e=p.value)?void 0:e.pickedFeature)?void 0:i.primitive)?void 0:o.position)&&(p.value.position=p.value.pickedFeature.primitive.position))}))}))})));const y=e=>{const{defined:t}=Cesium;return t(e.properties)||t(e.description)},C=(e,t,i,n,o,r,a,s)=>{const{defined:l,defaultValue:c}=Cesium;a=c(a,!1);const u=new Ic;return u.providerCoords=e,u.pickPosition=t,u.allFeaturesAvailablePromise=Promise.all(n).then((function(e){u.isLoading=!1,u.features=e.reduce(function(e,i,n){if(!l(i))return e;const a=i.map(function(e){return l(o)&&(e.imageryLayer=o[n]),l(e.position)||(e.position=s.scene.globe.ellipsoid.cartesianToCartographic(t)),l(e.position.height)&&0!==e.position.height||(e.position.height=r),Tc.fromImageryLayerFeature(e,s)}.bind(this));return e.concat(a)}.bind(this),c(i,[]))})).catch((function(){u.isLoading=!1,u.error="An unknown error occurred while picking features."})),u},w=e=>{var n,o;const r=[],{defined:a}=Cesium,{viewer:s}=i,l=s.scene.drillPick(e,t.limit);for(let t=0;t<l.length;++t){const i=l[t];let c=i.id;!a(c)&&a(i.primitive)&&(c=i.primitive);const u=null!=(o=null==(n=null==i?void 0:i.primitive)?void 0:n._catalogItem)?o:null==c?void 0:c._catalogItem;if("function"==typeof(null==u?void 0:u.getFeaturesFromPickResult)){const t=u.getFeaturesFromPickResult.bind(u)(e,i);t&&(Array.isArray(t)?r.push(...t):r.push(t))}else{const t=i;if(t.id){if(m(t.id)&&t.id[0]instanceof Cesium.Entity){h=!0,t.id.forEach((i=>{const n=Tc.fromPickedFeature(i,t,s,e);r.push(n)}));continue}if(t.id instanceof Cesium.Entity){const i=Tc.fromPickedFeature(t.id,t,s,e);r.push(i),h=!1;continue}h=!1}if(t.primitive){const i=Tc.fromPickedFeature(t.primitive,t,s,e);r.push(i)}else if(t.collection){const i=Tc.fromPickedFeature(t.collection,t,s,e);r.push(i)}}}return r},_=()=>{const e={},{viewer:t}=i,n=t.scene,o=function(t,i,n,o,r,a,s){if(i){const l=i.call(t,n,o,r,a,s);return t.url&&(e[t.url]={x:n,y:o,level:r}),t.pickFeatures=i,l}return Promise.reject(!1)};for(let i=0;i<n.imageryLayers.length;i++){const e=n.imageryLayers.get(i).imageryProvider;e.pickFeatures=o.bind(void 0,e,e.pickFeatures)}return e},S=(e,t)=>{const{viewer:n}=i;return Cesium.SceneTransforms.wgs84ToWindowCoordinates(n.scene,e,t)},E=()=>{const{defined:e,Cartesian2:n}=Cesium;if(t.show&&e(s.value)){const o=S(s.value,new n);if(e(o)){const{viewer:e}=i,n=e.container,r=n.clientWidth,a=n.clientHeight,s=t.width,l=.5*s;o.x=Math.min(Math.max(o.x,-s),r+s)-l,o.y=Math.min(Math.max(o.y,-s),a+s)-l,g.left=Math.floor(o.x+.25)+"px",g.top=Math.floor(o.y+.25)+"px"}}},P=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(c)){if(u)return;c.cancelTween(),c=void 0}u=!0,c=e.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate("+e.rotate+"deg)"},complete:function(){c=void 0},cancel:function(){c=void 0}})},T=()=>{const{viewer:e}=i,{defined:t,EasingFunction:n}=Cesium;if(t(c)){if(!u)return;c.cancelTween(),c=void 0}u=!1,c=e.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:n.EXPONENTIAL_OUT,update:function(e){g.opacity=e.opacity,g.transform="scale("+e.scale+") rotate(0deg)"},complete:function(){c=void 0},cancel:function(){c=void 0}})};return f((()=>{v.forEach((e=>e())),v=[]})),Object.assign(e.proxy,{selectedFeature:p,position:s,computeScreenSpacePosition:S,update:E,animateAppear:P,animateDepart:T,getPickedFeatures:()=>d}),{pickFromScreenPosition:e=>{const{defined:n}=Cesium,{viewer:o}=i,r=o.scene,a=r.camera.getPickRay(e);let s=r.globe.pick(a,r);if(!n(s)&&(s=r.pickPosition(e),!n(s)))return;const l=r.globe.ellipsoid.cartesianToCartographic(s||new Cesium.Cartesian3),c=w(e),u=_(),p=t.allowFeatureInfoRequests?Mc(a,r,t.includeImageryIds,t.excludeImageryIds):Promise.resolve(),m=C(u,s,c,[p],void 0,l.height,!1,o);d.value=m},rootRef:l,rootStyle:g,onPostRender:()=>{E()}}}(i,e,a);return i.createCesiumObject=async()=>{const{viewer:e}=a;return e._element.appendChild(Te(l.rootRef)),Te(l.rootRef)},i.mount=async()=>{const{viewer:e}=a,{ScreenSpaceEventHandler:t,ScreenSpaceEventType:i}=Cesium;return s=new t(e.canvas),s.setInputAction((e=>{l.pickFromScreenPosition(e.position)}),i.LEFT_CLICK),e.scene.postRender.addEventListener(l.onPostRender),!0},i.unmount=async()=>{const{viewer:e}=a,t=e._element;return t.contains(Te(l.rootRef))&&t.removeChild(Te(l.rootRef)),e.scene.postRender.removeEventListener(l.onPostRender),s.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),s.destroy(),s=void 0,!0},()=>S("div",{ref:l.rootRef,class:"vc-selection-indicator",style:l.rootStyle},S("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[Fl,Gl,Yl,Jl,mc,gc,Cc,Oc,_c,Ec,Pc,jc].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Lc=Fl,Ac=Gl,Dc=Yl,kc=Jl,Rc=mc,Bc=gc,Nc=Cc,Vc=Oc,zc=_c,Fc=Ec,Hc=Pc,Uc=jc,Wc={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},Gc={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},$c={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},Zc={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},qc={width:2,arcType:0,ellipsoid:void 0},Yc={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},Xc={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},Qc={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:$c,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},Xc),remove:Object.assign({},Xc,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},Jc={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:$c,polylineOpts:qc,primitiveOpts:Gc,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},disableDepthTest:!1},Kc={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:$c,polylineOpts:qc,primitiveOpts:Gc,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),insert:Object.assign({},Xc,{icon:"vc-icons-insert"}),remove:Object.assign({},Xc,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Yc,labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},eu={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:$c,polylineOpts:qc,primitiveOpts:Object.assign({},Gc,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:{show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),insert:Object.assign({},Xc,{icon:"vc-icons-insert"}),remove:Object.assign({},Xc,{icon:"vc-icons-remove"}),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!1,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:Yc,labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},tu=Object.assign({},eu,{pointOpts:Object.assign({},$c,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:Yc,labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})}),iu=Object.assign({},tu,{edge:360}),nu=Object.assign({},tu,{edge:6,loop:!0}),ou=Object.assign({},Wc,{icon:"vc-icons-clear",color:"red"}),ru=Object.assign({},Wc,{icon:"vc-icons-drawing-regular"}),au=Object.assign({},Wc,{icon:"vc-icons-drawing-circle"}),su={...so,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean},lu={...Et,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>ou}},cu=Object.assign({},Wc,{icon:"vc-icons-measure-distance"}),uu=Object.assign({},Jc,{labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new xr,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),du=Object.assign({},Wc,{icon:"vc-icons-measure-component-distance"}),pu=Object.assign({},uu,{showComponentLines:!0,xLabelOpts:Yc,xAngleLabelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},Yc,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},Yc,{verticalOrigin:-1,pixelOffset:[0,9]})}),mu=Object.assign({},Wc,{icon:"vc-icons-measure-polyline-distance"}),vu=Object.assign({},Kc,{measureUnits:new xr,labelOpts:Yc,labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),hu=Object.assign({},Wc,{icon:"vc-icons-measure-horizontal-distance"}),gu=Object.assign({},vu,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},Gc,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),fu=Object.assign({},Wc,{icon:"vc-icons-measure-vertical-distance"}),yu=Object.assign({},Jc,{labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new xr,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),bu=Object.assign({},Wc,{icon:"vc-icons-measure-height-from-terrain"}),Cu=Object.assign({},Qc,{polylineOpts:qc,labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},measureUnits:new xr,decimals:{distance:2},locale:void 0,primitiveOpts:Gc}),wu=Object.assign({},Wc,{icon:"vc-icons-measure-area"}),Ou=Object.assign({},eu,{labelOpts:Yc,labelsOpts:Object.assign({},Yc,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new xr,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),_u=Object.assign({},Wc,{icon:"vc-icons-measure-point-coordinates"}),xu=Object.assign({},Qc,{heightReference:1,measureUnits:new xr,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},Yc,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),Su=Object.assign({},Wc,{icon:"vc-icons-drawing-rectangle"}),Eu=Object.assign({},Ou,{pointOpts:Object.assign({},$c,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),Pu=Object.assign({},Eu,{edge:6,loop:!0}),Tu=Object.assign({},Eu,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),Iu=Object.assign({},{}),Mu=Object.assign({},Wc,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),ju=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],Lu={...lu,measurements:{type:Array,default:()=>ju,validator:e=>{let t=!0;return e.forEach((e=>{ju.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Mu},fabActionOpts:{type:Object,default:()=>Iu},distanceActionOpts:{type:Object,default:()=>cu},distanceMeasurementOpts:{type:Object,default:()=>uu},componentDistanceActionOpts:{type:Object,default:()=>du},componentDistanceMeasurementOpts:{type:Object,default:()=>pu},polylineActionOpts:{type:Object,default:()=>mu},polylineMeasurementOpts:{type:Object,default:()=>vu},horizontalActionOpts:{type:Object,default:()=>hu},horizontalMeasurementOpts:{type:Object,default:()=>gu},verticalActionOpts:{type:Object,default:()=>fu},verticalMeasurementOpts:{type:Object,default:()=>yu},heightActionOpts:{type:Object,default:()=>bu},heightMeasurementOpts:{type:Object,default:()=>Cu},areaActionOpts:{type:Object,default:()=>wu},areaMeasurementOpts:{type:Object,default:()=>Ou},pointActionOpts:{type:Object,default:()=>_u},pointMeasurementOpts:{type:Object,default:()=>xu},rectangleActionOpts:{type:Object,default:()=>Su},rectangleMeasurementOpts:{type:Object,default:()=>Eu},regularActionOpts:{type:Object,default:()=>ru},regularMeasurementOpts:{type:Object,default:()=>Pu},circleActionOpts:{type:Object,default:()=>au},circleMeasurementOpts:{type:Object,default:()=>Tu}},Au=pe(Lu);var Du=P({name:"VcOverlayHtml",props:{...st,...wt,...Et,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},emits:{...ul,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:a}=n,s=o(!1),l=o(null),c=O({}),u=o(null),d=o(null),p=o(null);let m=[];m.push(b((()=>e.position),(e=>{d.value=ke(e,a.viewer.scene.globe.ellipsoid)}))),m.push(b((()=>e.pixelOffset),(e=>{u.value=De(e)}))),m.push(b((()=>e.show),(e=>{c.display=e?"block":"none"}))),i.createCesiumObject=async()=>Te(l),i.mount=async()=>{const{viewer:t}=a;return s.value=!0,w(),u.value=De(e.pixelOffset),d.value=ke(e.position,t.scene.globe.ellipsoid),t.scene.preRender.addEventListener(v),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.preRender.removeEventListener(v),s.value=!1,_(),!0};const v=()=>{const{viewer:t}=a;if(d.value){const i=t.scene.cartesianToCanvasCoordinates(d.value,{});if(Cesium.defined(i)&&!Cesium.Cartesian2.equals(p.value,i))if(c.left=i.x+u.value.x+"px",c.top=i.y+u.value.y+"px",e.autoHidden&&t.scene.mode!==Cesium.SceneMode.SCENE2D&&t.scene.mode!==Cesium.SceneMode.MORPHING){const i=t.camera.position,n=t.scene.globe.ellipsoid.cartesianToCartographic(i);if(Cesium.defined(n)){let o=n.height;o+=1*t.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(i,d.value)>o||!e.show?c.display="none":c.display="block"}}else c.display="block";else Cesium.defined(i)||(c.display="none");p.value=i}};f((()=>{m.forEach((e=>e())),m=[]}));const h=()=>s.value?S("div",{ref:l,class:"vc-html-container"+(e.customClass?" "+e.customClass:""),style:c,onMouseenter:y,onMouseleave:C,onClick:g},aa(t.slots.default)):M("v-if"),g=e=>{t.emit("click",e)},y=e=>{t.emit("mouseenter",e)},C=e=>{t.emit("mouseleave",e)},{showPortal:w,hidePortal:_,renderPortal:x}=ts(i,l,(()=>h()));return e.teleport&&e.teleport.to&&!e.teleport.disabled?x:()=>h()}});var ku=P({name:"VcEntity",props:{id:String,name:String,availability:Object,...Et,description:[String,Object],...st,orientation:Object,...lt,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...so},emits:{...ul,...dl,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0},setup(e,t){const i=r();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=bo(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.mount=async()=>{var e;const t=null==(e=null==o?void 0:o.entities)?void 0:e.add(i.cesiumObject);return null==o?void 0:o.entities.contains(t)},i.unmount=async()=>{var e;return null==(e=null==o?void 0:o.entities)?void 0:e.remove(i.cesiumObject)};return Object.assign(i.proxy,{__updateGraphics:(e,t)=>(Pe(i,t)?a(t,e):i.cesiumObject&&(i.cesiumObject[t.substring(7)]=e),e&&(e._vcParent=i.cesiumObject),!0)}),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});ku.install=e=>{e.component(ku.name,ku)};const Ru=ku;var Bu=P({name:"VcLayerImagery",props:{imageryProvider:Object,...Qi,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...Et,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...Wi,...Gi,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number,vcId:String},emits:{...ul,"update:imageryProvider":e=>!0,readyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const i=r();i.cesiumClass="ImageryLayer",i.cesiumEvents=["readyEvent","errorEvent"];const n=bo(e,t,i);if(void 0===n)return;const{$services:o}=n,{emit:a}=t;i.createCesiumObject=async()=>{const t=n.transformProps(e);if(at(Cesium.VERSION,"1.104")){const i=e.imageryProvider||Cesium.BingMapsImageryProvider.fromUrl(void 0,{key:""}),n=Cesium.ImageryLayer.fromProviderAsync(i,t);return n.errorEvent.addEventListener((e=>{})),n}{const i=e.imageryProvider||{};return new Cesium.ImageryLayer(i,t)}},i.mount=async()=>{const{viewer:t}=o,n=i.cesiumObject;return n.sortOrder=e.sortOrder,n.vcId=e.vcId||Cesium.createGuid(),t.imageryLayers.add(n),!t.isDestroyed()&&t.imageryLayers.contains(n)},i.unmount=async()=>{const{viewer:e}=o,t=i.cesiumObject;return!e.isDestroyed()&&e.imageryLayers.remove(t)};return Object.assign(i.proxy,{__updateProvider:e=>{var t;if(H(e))return null==(t=i.unmount)?void 0:t.call(i);i.cesiumObject._imageryProvider=e;Pe(i,"update:imageryProvider")&&a("update:imageryProvider",e);return!0}}),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Bu.install=e=>{e.component(Bu.name,Bu)};const Nu=Bu,Vu=Nu;var zu=P({name:"VcPrimitiveClassification",props:{...Sn,..._n,...Et,...En,...On,...Pn,...wn,...yn,...bn,...Ut,...In,...Cn,...so},emits:vl,setup(e,t){var i;const n=r();n.cesiumClass="ClassificationPrimitive",tr(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(o),style:{display:"none !important"}},aa(t.slots.default)):M(le(o))}});var Fu=P({name:"VcPrimitiveGround",props:{...Sn,..._n,...Et,...En,...On,...Pn,...wn,...yn,...bn,...Ut,...In,...Cn,...so},emits:vl,setup(e,t){var i;const n=r();n.cesiumClass="GroundPrimitive",tr(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(o),style:{display:"none !important"}},aa(t.slots.default)):M(le(o))}});var Hu=P({name:"VcPrimitiveGroundPolyline",props:{...Sn,..._n,...Et,...On,...Pn,...wn,...yn,...bn,...Ut,...In,...Cn,...so},emits:vl,setup(e,t){var i;const n=r();n.cesiumClass="GroundPolylinePrimitive",tr(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(o),style:{display:"none !important"}},aa(t.slots.default)):M(le(o))}});var Uu=P({name:"VcPrimitiveModel",props:{...$i,basePath:String,...Et,...Tn,...xt,...gi,...fi,...Ln,...yn,...yi,...bn,...Ci,...Bt,...In,...Dn,...ft,...Mn,...vt,...dt,..._i,...xi,...wi,...Oi,...Ii,dequantizeInShader:{type:Boolean,default:!0},...Si,...Ei,...Yn,...Xn,...Qn,...en,...Kn,showOutline:{type:Boolean,default:!0},...so},emits:{...vl,readyEvent:e=>!0,texturesReadyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const i=r();i.cesiumClass="Model",i.cesiumEvents=["readyEvent","texturesReadyEvent","errorEvent"];const n=tr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return at(Cesium.VERSION,"1.104")?await Cesium.Model.fromGltfAsync(t):Cesium.Model.fromGltf(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Wu=P({name:"VcPrimitive",props:{...Sn,..._n,...xn,...Et,...Tn,...En,...On,...Pn,...wn,...yn,cull:{type:Boolean,default:!0},...bn,...In,...Bt,...so},emits:vl,setup(e,t){var i;const n=r();n.cesiumClass="Primitive",tr(e,t,n);const o=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>{var e;return t.slots.default?S("i",{class:le(o),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(e=n.proxy)?void 0:e.$options.name)||""))}}});const Gu={...vl,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0};var $u=P({name:"VcPrimitiveTileset",props:{url:[String,Object],...Et,...Tn,modelUpAxis:{type:Number},modelForwardAxis:{type:Number},...Bt,...Fi,maximumMemoryUsage:{type:Number},cacheBytes:{type:Number,default:536870912},maximumCacheOverflowBytes:{type:Number,default:536870912},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...Ii,...Ut,...Ki,pointCloudShading:Object,...Si,...qn,...Yn,...Xn,...Qn,...Jn,...Kn,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...kt,vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},featureIdLabel:{type:[String,Number]},instanceFeatureIdLabel:{type:[String,Number]},splitDirection:{type:Number,default:0},projectTo2D:{type:Boolean,default:!1},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...Dn,...In,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...so,enableModelExperimental:{type:Boolean,default:!1},...vn,properties:{type:Array},fragmentShader:String,replaceFS:Boolean,assetId:Number},emits:Gu,setup(e,t){const i=r();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"];const n=tr(e,t,i);i.proxy.creatingPromise.then((e=>{const t=e.cesiumObject;i.removeCallbacks.push(t.tileVisible.addEventListener(o))}));const o=t=>{const i=t.content,o=i._model;for(let n=0;n<i.featuresLength;n++){const t=i.getFeature(n);e.properties&&e.properties.length&&e.properties.forEach((e=>{t.hasProperty(e.key)&&t.getProperty(e.key)===e.keyValue&&t.setProperty(e.propertyName,e.propertyValue)}))}e.fragmentShader&&o&&o._sourcePrograms&&o._rendererResources&&(Object.keys(o._sourcePrograms).forEach((t=>{var i;const r=o._sourcePrograms[t],a=o._rendererResources.sourceShaders;if(e.replaceFS)a[r.fragmentShader]=e.fragmentShader;else{const t=a[r.fragmentShader],o=null==(i=n.$services.viewer.scene.context)?void 0:i.webgl2;a[r.fragmentShader]=t.replace((o?"out_FragColor":"gl_FragColor")+" = vec4(color, 1.0);\n}",`${o?"out_FragColor":"gl_FragColor"}  = vec4(color, 1.0);\n             ${e.fragmentShader}\n}\n            `)}})),o._shouldRegenerateShaders=!0)};return()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Zu=P({name:"VcPrimitiveOsmBuildings",props:{...gn,...fn,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...so},emits:{...vl},setup(e,t){const i=r();i.cesiumClass="VcPrimitiveOsmBuildings";const n=tr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.style=t.tileStyle,delete t.tileStyle,at(Cesium.VERSION,"1.104")?await Cesium.createOsmBuildingsAsync(t):Cesium.createOsmBuildings(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const qu={...vl,complete:e=>!0};var Yu=P({name:"VcPrimitiveParticle",props:{...Et,updateCallback:Function,emitter:Object,...Tn,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...dt,...Fn,...Hn,...bt,...Gn,...Un,...Wn,...Pt,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...so},emits:qu,setup(e,t){const i=r();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],tr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Xu=P({name:"VcViewshed",props:{...Mn,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String},uniforms:Object},emits:ul,setup(e,t){const i=r();i.cesiumClass="VcViewshed";const n=bo(e,t,i);if(void 0===n)return;const o=[];let a;o.push(b([()=>e.startPosition,()=>e.endPosition],(([e,t])=>{i.mounted&&s(e,t)}),{deep:!0})),o.push(b((()=>e.fovH),(e=>{if(!i.mounted)return;i.cesiumObject.fovH=e}))),o.push(b((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(b((()=>e.fovV),(e=>{if(!i.mounted)return;i.cesiumObject.fovV=e}))),o.push(b((()=>e.offsetHeight),(e=>{if(!i.mounted)return;i.cesiumObject.offsetHeight=e}))),o.push(b((()=>e.visibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.visibleColor=He(e)}))),o.push(b((()=>e.invisibleColor),(e=>{if(!i.mounted)return;i.cesiumObject.invisibleColor=He(e)}))),o.push(b((()=>e.showGridLine),(e=>{if(!i.mounted)return;i.cesiumObject.showGridLine=e}))),o.push(b((()=>e.show),(e=>{if(!i.mounted)return;i.cesiumObject.enabled=e}))),f((()=>{o.forEach((e=>e())),o.length=0})),i.createCesiumObject=async()=>{const t=n.$services.viewer,i=new Xr(t.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:He(e.visibleColor),invisibleColor:He(e.invisibleColor),showGridLine:e.showGridLine});return i._viewshedShadowMap.cascadesEnabled=!1,i._viewshedShadowMap.softShadows=!1,i._viewshedShadowMap.normalOffset=!1,i._viewshedShadowMap.fromLightSource=!1,i._viewshedShadowMap.enabled=!1,i.fovH=Cesium.Math.toRadians(e.fovH),i.fovV=Cesium.Math.toRadians(e.fovV),i.offsetHeight=e.offsetHeight,i.showGridLine=e.showGridLine,i.enabled=e.show,i.lineColor=He(e.lineColor),i.faceColor=He(e.faceColor),i},i.mount=async()=>{var t;const o=n.$services.viewer,r=i.cesiumObject,{Cartesian4:l,PostProcessStage:c,Cartesian2:u}=Cesium;let d="\n  uniform sampler2D colorTexture;\n  uniform vec4 u_color1;\n  uniform vec4 u_color2;\n  uniform float u_isShed;\n  uniform sampler2D shadowMap_depthTexture;\n  uniform mat4 shadowMap_matrix;\n  uniform vec4 shadowMap_lightPositionEC;\n  uniform vec3 shadowMap_lightDirectionEC;\n  uniform float u_radius;\n  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;\n  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;\n  uniform float czzj;\n  uniform float dis;\n  uniform float spzj;\n  uniform float mixNum;\n  uniform vec3 shadowMap_lightUp;\n  uniform vec3 shadowMap_lightDir;\n  uniform vec3 shadowMap_lightRight;\n  in vec2 v_textureCoordinates;\n  vec4 toEye(in vec2 uv, in float depth){\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  float getDepth(in vec4 depth){\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){\n    return texture(shadowMap, uv).r;\n  }\n  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){\n    return step(depth, _czm_sampleShadowMap(shadowMap, uv));\n  }\n  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){\n    float depthBias = shadowParameters.depthBias;\n    float depth = shadowParameters.depth;\n    float nDotL = shadowParameters.nDotL;\n    float normalShadingSmooth = shadowParameters.normalShadingSmooth;\n    float darkness = shadowParameters.darkness;\n    vec2 uv = shadowParameters.texCoords;\n    depth -= depthBias;\n    vec2 texelStepSize = shadowParameters.texelStepSize;\n    float radius = 1.0;\n    float dx0 = -texelStepSize.x * radius;\n    float dy0 = -texelStepSize.y * radius;\n    float dx1 = texelStepSize.x * radius;\n    float dy1 = texelStepSize.y * radius;\n    float visibility =\n    (\n    _czm_shadowDepthCompare(shadowMap, uv, depth)\n    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +\n    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)\n    ) * (1.0 / 9.0)\n    ;\n    return visibility;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float ptm(vec3 pt){\n    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);\n  }\n  void main()\n  {\n    const float PI = 3.141592653589793;\n    vec4 color = texture(colorTexture, v_textureCoordinates);\n    out_FragColor = color;\n    if ( u_isShed < 0.5 )\n        return;\n    vec4 currD = texture(czm_globeDepthTexture, v_textureCoordinates);\n    if( currD.r >= 1.0 )\n        return;\n\n    float depth = getDepth(currD);\n    vec4 positionEC = toEye(v_textureCoordinates, depth);\n    vec3 normalEC = vec3(1.0);\n    czm_shadowParameters shadowParameters;\n    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;\n    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;\n    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;\n    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;\n    shadowParameters.depthBias *= max(depth * 0.01, 1.0);\n    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);\n    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);\n    vec4 shadowPosition = shadowMap_matrix * positionEC;\n    shadowPosition /= shadowPosition.w;\n    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))\n      return;\n\n    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);\n    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);\n    if(distance(lw.xyz,vw.xyz)> u_radius)\n        return;\n\n    shadowParameters.texCoords = shadowPosition.xy;\n    shadowParameters.depth = shadowPosition.z;\n    shadowParameters.nDotL = nDotL;\n    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);\n    if(visibility > 0.3 ){\n      out_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);\n    }\n    else{\n      if(abs(shadowPosition.z-0.0)<0.01){\n        return;\n      }\n      out_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);\n    }\n  }\n";(null==(t=n.$services.viewer.scene.context)?void 0:t.webgl2)||(d=d.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),d=d.replace(/texture\(/g,"texture2D("),d=d.replace(/out_FragColor/g,"gl_FragColor")),s(e.startPosition,e.endPosition),a=new c({fragmentShader:e.fragmentShader||d,uniforms:e.uniforms||{u_color1:function(){return r.visibleColor},u_color2:function(){return r.invisibleColor},u_isShed:function(){return r.shadowMap.enabled},u_radius:function(){return r.lightCamera.frustum.far},shadowMap_depthTexture:function(){return r.shadowMap.enabled?r.shadowMap._shadowMapTexture:o.scene.context.defaultTexture},shadowMap_matrix:function(){return r.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return r.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return r.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return r.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return r.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return r.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const e=r.shadowMap._pointBias;return l.fromElements(e.normalOffsetScale,r.shadowMap._distance,r.shadowMap.maximumDistance,0,new l)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const e=r.shadowMap._pointBias,t=new u;return t.x=1/r.shadowMap._textureSize.x,t.y=1/r.shadowMap._textureSize.y,l.fromElements(t.x,t.y,e.depthBias,e.normalShadingSmooth,new l)},czzj:function(){return r.lightCamera.frustum.fov},spzj:function(){return r.lightCamera.frustum.fov},mixNum:function(){return.5},shadowMap_lightUp:function(){return r.lightCamera.up},shadowMap_lightDir:function(){return r.lightCamera.direction},shadowMap_lightRight:function(){return r.lightCamera.right}}}),o.scene.postProcessStages.add(a);const p=n.$services.primitives;return p&&p.add(r)},i.unmount=async()=>{const e=n.$services.viewer;a&&e.scene.postProcessStages.remove(a);const t=n.$services.primitives,o=i.cesiumObject;return t&&t.remove(o)};const s=(e,t)=>{const n=i.cesiumObject,{Cartesian3:o}=Cesium;let r=o.subtract(t,e,new o);const a=o.magnitudeSquared(r),s=o.distance(t,e);if(a<.01||n.frustum.near>s)n.enabled=!1;else{n.enabled=!0,r=o.normalize(r,r);const i=o.normalize(t,new o);n.setView({destination:e,orientation:{direction:r,up:i}}),n.frustum.far=Math.max(s,1.1)}};return()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Qu=P({name:"VcPrimitiveTimeDynamicPointCloud",props:{...dn,intervals:Object,...Et,...Tn,...Bt,...hn,shading:Object,...fn,...Ii,...so},emits:{...vl,frameChanged:e=>!0,frameFailed:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcPrimitiveTimeDynamicPointCloud",i.cesiumEvents=["frameChanged","frameFailed"];const n=tr(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.style=t.tileStyle,delete t.tileStyle,new Cesium.TimeDynamicPointCloud(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Ju=P({name:"VcPrimitiveI3sDataProvider",props:{...$i,name:String,...Et,geoidTiledTerrainProvider:{type:Object},traceFetches:{type:Boolean,default:!1},cesium3dTilesetOptions:{type:Object},...so},emits:vl,setup(e,t){const i=r();return i.cesiumClass="I3SDataProvider",tr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Ku=P({name:"VcPrimitiveVoxel",props:{provider:{type:Object},...Tn,...vn,...dn,...so},emits:vl,setup(e,t){const i=r();return i.cesiumClass="VoxelPrimitive",tr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ed=P({name:"VcPrimitiveCluster",props:{...Et,enabled:{type:Boolean,default:!0},pixelRange:{type:Number,default:80},minimumClusterSize:{type:Number,default:2},clusterBillboards:{type:Boolean,default:!0},clusterLabels:{type:Boolean,default:!0},clusterPoints:{type:Boolean,default:!0},billboards:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},points:{type:Array,default:()=>[]},...so},emits:{...vl,clusterEvent:(e,t)=>!0},setup(e,t){var i;const n=r();n.cesiumClass="VcPrimitiveCluster",n.cesiumEvents=["clusterEvent"];const o=tr(e,t,n),a=[];a.push(b((()=>e.show),(e=>{n.cesiumObject.show=e}))),a.push(b((()=>e.enabled),(e=>{n.cesiumObject.enabled=e}))),a.push(b((()=>e.minimumClusterSize),(e=>{n.cesiumObject.minimumClusterSize=e}))),a.push(b((()=>e.clusterBillboards),(e=>{n.cesiumObject.clusterBillboards=e,n.proxy.reload()}))),a.push(b((()=>e.clusterLabels),(e=>{n.cesiumObject.clusterLabels=e,n.proxy.reload()}))),a.push(b((()=>e.clusterBillboards),(e=>{n.cesiumObject.clusterPoints=e,n.proxy.reload()}))),a.push(b((()=>X(e.billboards)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._billboardCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._billboards.find((t=>(null==t?void 0:t.id)===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==o?void 0:o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),r=Y(t,e,"id"),a=[];for(let e=0;e<r.length;e++){const t=i._billboards.find((t=>t.id===r[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),l(i,n),setTimeout((()=>{o.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),a.push(b((()=>X(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._labelCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),r=Y(t,e,"id"),a=[];for(let e=0;e<r.length;e++){const t=i._labels.find((t=>t.id===r[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),c(i,n),setTimeout((()=>{o.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),a.push(b((()=>X(e.points)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject._pointCollection;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),r=Y(t,e,"id"),a=[];for(let e=0;e<r.length;e++){const t=i._pointPrimitives.find((t=>t.id===r[e].id));t&&a.push(t)}a.forEach((e=>{i.remove(e)})),s(i,n),setTimeout((()=>{o.$services.viewer.scene.camera.changed.raiseEvent()}))}}),{deep:!0})),n.createCesiumObject=async()=>{const t=new kr({show:e.show,enabled:e.enabled,pixelRange:e.pixelRange,minimumClusterSize:e.minimumClusterSize,clusterBillboards:e.clusterBillboards,clusterLabels:e.clusterLabels,clusterPoints:e.clusterPoints}),i=new Cesium.BillboardCollection;l(i,e.billboards);const n=new Cesium.LabelCollection;c(n,e.labels);const r=new Cesium.PointPrimitiveCollection;return s(r,e.points),t._billboardCollection=i,t._labelCollection=n,t._pointCollection=r,t._initialize(o.$services.viewer.scene),setTimeout((()=>{o.$services.viewer.scene.camera.changed.raiseEvent()})),t};const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=e.add(r);me(a,r)}},l=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=e.add(r);me(a,r)}},c=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=e.add(r);me(a,r)}};f((()=>{a.forEach((e=>e())),a.length=0}));const u=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(u),style:{display:"none !important"}},aa(t.slots.default)):M(le(u))}});[zu,Fu,Hu,Uu,Wu,$u,Zu,Ju,Ku,Qu,Yu,ed].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const td=zu,id=Fu,nd=Hu,od=Uu,rd=Wu,ad=$u,sd=Zu,ld=Yu,cd=Xu,ud=Qu,dd=Ju,pd=Ku,md=ed;var vd=P({name:"VcOverlayHeatmap",props:{...Et,...Qi,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}},emits:ul,setup(e,t){var i;const n=r();n.cesiumClass="VcOverlayHeatmap",n.cesiumEvents=[];const a=bo(e,t,n);if(void 0===a)return;const l=o(null),c=o(null),u={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},d=o(),p=o(),m=o(),v=o(),h=o(),g=o(!1),y=o();null==(i=Ie(n).proxy.creatingPromise)||i.then((()=>{g.value=!0}));const C=s((()=>Object.assign({},u,e.options)));let w=[];w.push(b((()=>m),(e=>{p.value.fabric.uniforms.image=e.value,h.value.options.material.fabric.uniforms.image=e.value}),{deep:!0})),w.push(b((()=>e.data),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;Array.isArray(e)&&Array.isArray(t)?(x(e,i),m.value=i.getDataURL()):a.reload()}),{deep:!0})),w.push(b((()=>[e.max,e.min]),(e=>{const t=n.cesiumObject;t.setDataMax(e[0]||0),t.setDataMin(e[1]||0),m.value=t.getDataURL()}))),w.push(b((()=>[e.type,e.projection,e.rectangle]),(e=>{a.reload()}))),w.push(b((()=>e.options),(e=>{const t=n.cesiumObject;t.configure(e),m.value=t.getDataURL()}),{deep:!0})),n.createCesiumObject=async()=>{const{WebMercatorProjection:t,GeographicProjection:i}=Cesium;c.value="3857"===e.projection?new t:new i;const n=O();y.value=_(e.rectangle);const o=document.createElement("div");if(Cesium.defined(n)&&o.setAttribute("id",n),o.setAttribute("style","width: "+y.value.width+"px; height: "+y.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(o),C.value.container=o,e.segments.length){C.value.gradient={};const t=e.max-e.min;for(let i=0;i<e.segments.length;i++)C.value.gradient[""+(e.segments[i][0]-e.min)/t]=He(e.segments[i][1]).toCssColorString()}const r=D.create(C.value);return o.children[0].setAttribute("id",n+"-hm"),Array.isArray(e.data)&&(x(e.data,r),p.value={fabric:{type:"Image",uniforms:{image:m.value,transparent:!0}}},h.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:m.value}}}}}),r},n.unmount=async()=>(document.body.removeChild(n.cesiumObject._config.container),!0);const O=e=>{let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<(e||8);n++)t+=i.charAt(Math.floor(62*Math.random()));return t},_=e=>{const t=Ge(e),i=c.value.project(new Cesium.Cartographic(t.west,t.south)),n=c.value.project(new Cesium.Cartographic(t.east,t.north)),o={north:n.y,east:n.x,south:i.y,west:i.x};let r=o.east>0&&o.west<0?o.east+Math.abs(o.west):Math.abs(o.east-o.west),a=o.north>0&&o.south<0?o.north+Math.abs(o.south):Math.abs(o.north-o.south),s=1;r>a&&r>C.value.maxCanvasSize?(s=r/C.value.maxCanvasSize,a/s<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize)):a>r&&a>C.value.maxCanvasSize?(s=a/C.value.maxCanvasSize,a/s<C.value.minCanvasSize&&(s=r/C.value.minCanvasSize)):r<a&&r<C.value.minCanvasSize?(s=r/C.value.minCanvasSize,a/s>C.value.maxCanvasSize&&(s=a/C.value.maxCanvasSize)):a<r&&a<C.value.minCanvasSize&&(s=a/C.value.minCanvasSize,r/s>C.value.maxCanvasSize&&(s=r/C.value.maxCanvasSize)),r/=s,a/=s,Cesium.defined(C.value.radius)||(C.value.radius=r>a?r/C.value.radiusFactor:a/C.value.radiusFactor);const l=(C.value.radius||1)*C.value.spacingFactor,u=o.west,p=o.south;r=Math.round(r+2*l),a=Math.round(a+2*l),o.west-=l*s,o.east+=l*s,o.south-=l*s,o.north+=l*s;const m=c.value.unproject(new Cesium.Cartesian3(o.west,o.south)),v=c.value.unproject(new Cesium.Cartesian3(o.east,o.north)),h={north:Cesium.Math.toDegrees(v.latitude),east:Cesium.Math.toDegrees(v.longitude),south:Cesium.Math.toDegrees(m.latitude),west:Cesium.Math.toDegrees(m.longitude)};return d.value=h,{height:a,width:r,factor:s,xoffset:u,yoffset:p,spacing:l}},x=(t,i)=>{if(t){const{height:n,xoffset:o,yoffset:r,factor:a,spacing:s}=y.value,l=C.value.xField||"x",u=C.value.yField||"y",d=C.value.valueField||"value",p=[];for(let i=0;i<t.length;i++){const m=t[i];Cesium.defined(m.id)||(m.id=i);const v=c.value.project(Cesium.Cartographic.fromDegrees(m[l],m[u])),h={[l]:Math.round((v.x-o)/a+s),[u]:Math.round((v.y-r)/a+s),[d]:void 0};h[u]=n-h[u],(m[d]||0===m[d])&&(h[d]=m[d]),h[d]>e.max||h[d]<e.min||p.push(h)}i.setData({min:e.min,max:e.max,data:p}),m.value=i.getDataURL()}};return f((()=>{w.forEach((e=>e())),w=[]})),Object.assign(n.proxy,{rootRef:l,childRef:v}),()=>{if(g.value){const t=[];return"entity"===e.type&&m.value?t.push(S(Ru,{ref:v,show:e.show,rectangle:{coordinates:d.value,material:p.value}})):"primitive"===e.type?t.push(S(id,{ref:v,show:e.show,appearance:h.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Ge(d.value)})})})):"imagery-layer"===e.type&&m.value&&t.push(S(Nu,{ref:v,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:m.value,rectangle:Ge(d.value)})})),S("i",{ref:l,class:"vc-overlay-heatmap",style:"display: none !important"},t)}return M("v-if")}}});var hd=P({name:"VcOverlayEcharts",props:{options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}},emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=r();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:a}=n,s=o(!1),l=o(),c=O({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let u;const d=o(!0);let p=[];p.push(b((()=>e.options),(e=>{n.reload()}))),i.createCesiumObject=async()=>l.value,i.mount=async()=>{const{viewer:t}=a;return s.value=!0,x((()=>{te(e.coordinateSystem,h(t)),l.value&&(u=ie(l.value),v(),t.scene.postRender.addEventListener(m))})),!0},i.unmount=async()=>{const{viewer:e}=a;return e.scene.postRender.removeEventListener(m),s.value=!1,!0};const m=()=>{if(d.value){const{viewer:e}=a;u.resize({width:e.canvas.width,height:e.canvas.height})}},v=()=>{d.value&&e.options&&u.setOption(e.options)},h=t=>{const i=function(e){this.viewer=e,this._mapOffset=[0,0]};return i.create=function(n){return n.eachSeries((function(n){n.get("coordinateSystem")===e.coordinateSystem&&(n.coordinateSystem=new i(t))})),[]},i.getDimensionsInfo=function(){return["x","y"]},i.dimensions=["x","y"],i.prototype.dimensions=["x","y"],i.prototype.setMapOffset=function(e){this._mapOffset=e},i.prototype.dataToPoint=function(t){const i=[],n=Cesium.Cartesian3.fromDegrees(t[0],t[1]);if(!n)return i;if(e.autoHidden){const e=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(n,new Cesium.Cartesian3),t=this.viewer.camera.direction;if(Cesium.Cartesian3.dot(e,t)>=0)return i}const o=this.viewer.scene.cartesianToCanvasCoordinates(n);return o?[o.x-this._mapOffset[0],o.y-this._mapOffset[1]]:i},i.prototype.pointToData=function(e){const i=this._mapOffset,n=t.scene.globe.ellipsoid,o=new Cesium.Cartesian3(e[1]+i[1],e[2]+i[2],0),r=n.cartesianToCartographic(o);return r?[r.longitude,r.latitude]:[0,0]},i.prototype.getviewerRect=function(){const e=this.viewer.canvas;return new k(0,0,e.width,e.height)},i.prototype.getRoamTransform=function(){return R()},i},g=e=>{t.emit("click",e)},y=e=>{t.emit("mouseenter",e)},C=e=>{t.emit("mouseleave",e)};return f((()=>{p.forEach((e=>e())),p=[]})),()=>s.value?S("div",{ref:l,class:"vc-echart-container"+(e.customClass?" "+e.customClass:""),style:c,onMouseenter:y,onMouseleave:C,onClick:g},aa(t.slots.default)):M("v-if")}});function gd(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function fd(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function yd(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function bd(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}class Cd{constructor(e){this.commandType=e.commandType,this.geometry=e.geometry,this.attributeLocations=e.attributeLocations,this.primitiveType=e.primitiveType,this.uniformMap=e.uniformMap,this.vertexShaderSource=e.vertexShaderSource,this.fragmentShaderSource=e.fragmentShaderSource,this.rawRenderState=e.rawRenderState,this.framebuffer=e.framebuffer,this.outputTexture=e.outputTexture,this.autoClear=Cesium.defaultValue(e.autoClear,!1),this.preExecute=e.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(e){switch(this.commandType){case"Draw":{const t=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:e,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),n=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:t,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:n,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(e,t){this.geometry=t;const i=Cesium.VertexArray.fromGeometry({context:e,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(e){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(e.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&e.commandList.push(this.clearCommand),e.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class wd{constructor(e,t,i,n){this.data=t,this.createWindTextures(e,t),this.createParticlesTextures(e,i,n),this.createComputingPrimitives(t,i,n,e)}createWindTextures(e,t){const i={context:e,width:t.dimensions.lon,height:t.dimensions.lat*t.dimensions.lev,pixelFormat:(null==e?void 0:e.webgl2)?Cesium.PixelFormat.RED:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:fd(i,t.U.array),V:fd(i,t.V.array)}}createParticlesTextures(e,t,i){const n={context:e,width:t.particlesTextureSize,height:t.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},o=this.randomizeParticles(t.maxParticles,i),r=new Float32Array(4*t.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:fd(n,o),currentParticlesPosition:fd(n,o),nextParticlesPosition:fd(n,o),postProcessingPosition:fd(n,o),particlesSpeed:fd(n,r)}}randomizeParticles(e,t){const i=new Float32Array(4*e);for(let n=0;n<e;n++)i[4*n]=Cesium.Math.randomBetween(t.lonRange.x,t.lonRange.y),i[4*n+1]=Cesium.Math.randomBetween(t.latRange.x,t.latRange.y),i[4*n+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*n+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach((e=>{this.particlesTextures[e].destroy()}))}createComputingPrimitives(e,t,i,n){const o=null==n?void 0:n.webgl2;let r="\n\nprecision highp float;\n\n// the size of UV textures: width = lon, height = lat*lev\nuniform sampler2D U; // eastward wind\nuniform sampler2D V; // northward wind\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\n\nuniform vec3 dimension; // (lon, lat, lev)\nuniform vec3 minimum; // minimum of each dimension\nuniform vec3 maximum; // maximum of each dimension\nuniform vec3 interval; // interval of each dimension\n\n// used to calculate the wind norm\nuniform vec2 uSpeedRange; // (min, max);\nuniform vec2 vSpeedRange;\nuniform float pixelSize;\nuniform float speedFactor;\n\nin vec2 v_textureCoordinates;\n\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\n  // ensure the range of longitude and latitude\n  lonLatLev.x = mod(lonLatLev.x, 360.0);\n  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\n\n  vec3 index3D = vec3(0.0);\n  index3D.x = (lonLatLev.x - minimum.x) / interval.x;\n  index3D.y = (lonLatLev.y - minimum.y) / interval.y;\n  index3D.z = (lonLatLev.z - minimum.z) / interval.z;\n\n  // the st texture coordinate corresponding to (col, row) index\n  // example\n  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\n  // the content of texture will be\n  // t 1.0\n  //    |  3 4 5\n  //    |\n  //    |  0 1 2\n  //   0.0------1.0 s\n\n  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\n  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\n  return normalizedIndex2D;\n}\n\nfloat getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {\n  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\n  float result = texture(componentTexture, normalizedIndex2D).r;\n  return result;\n}\n\nfloat interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {\n  float lon = lonLatLev.x;\n  float lat = lonLatLev.y;\n  float lev = lonLatLev.z;\n\n  float lon0 = floor(lon / interval.x) * interval.x;\n  float lon1 = lon0 + 1.0 * interval.x;\n  float lat0 = floor(lat / interval.y) * interval.y;\n  float lat1 = lat0 + 1.0 * interval.y;\n\n  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));\n  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));\n  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));\n  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));\n\n  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);\n  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);\n  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);\n  return lon_lat;\n}\n\nvec3 linearInterpolation(vec3 lonLatLev) {\n  // https://en.wikipedia.org/wiki/Bilinear_interpolation\n  float u = interpolateTexture(U, lonLatLev);\n  float v = interpolateTexture(V, lonLatLev);\n  float w = 0.0;\n  return vec3(u, v, w);\n}\n\nvec2 lengthOfLonLat(vec3 lonLatLev) {\n  // unit conversion: meters -> longitude latitude degrees\n  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\n\n  // Calculate the length of a degree of latitude and longitude in meters\n  float latitude = radians(lonLatLev.y);\n\n  float term1 = 111132.92;\n  float term2 = 559.82 * cos(2.0 * latitude);\n  float term3 = 1.175 * cos(4.0 * latitude);\n  float term4 = 0.0023 * cos(6.0 * latitude);\n  float latLength = term1 - term2 + term3 - term4;\n\n  float term5 = 111412.84 * cos(latitude);\n  float term6 = 93.5 * cos(3.0 * latitude);\n  float term7 = 0.118 * cos(5.0 * latitude);\n  float longLength = term5 - term6 + term7;\n\n  return vec2(longLength, latLength);\n}\n\nvec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {\n  vec2 lonLatLength = lengthOfLonLat(lonLatLev);\n  float u = speed.x / lonLatLength.x;\n  float v = speed.y / lonLatLength.y;\n  float w = 0.0;\n  vec3 windVectorInLonLatLev = vec3(u, v, w);\n\n  return windVectorInLonLatLev;\n}\n\nvec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {\n  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail\n  const float h = 0.5;\n  float speedScaleFactor = speedFactor * pixelSize;\n\n  vec3 y_n = lonLatLev;\n  vec3 f_n = linearInterpolation(lonLatLev);\n  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;\n  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;\n\n  return speed;\n}\n\nfloat calculateWindNorm(vec3 speed) {\n  vec3 percent = vec3(0.0);\n  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\n  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\n  float norm = length(percent);\n\n  return norm;\n}\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;\n  float speedScaleFactor = speedFactor * pixelSize;\n  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);\n  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);\n\n  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));\n  out_FragColor = particleSpeed;\n}\n";o||(r=r.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),r=r.replace(/texture\(/g,"texture2D("),r=r.replace(/out_FragColor/g,"gl_FragColor"));let a="\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\nuniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude\n\nin vec2 v_textureCoordinates;\n\nvoid main() {\n  // texture coordinate must be normalized\n  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;\n  vec3 speed = texture(particlesSpeed, v_textureCoordinates).rgb;\n  vec3 nextParticle = lonLatLev + speed;\n\n  out_FragColor = vec4(nextParticle, 0.0);\n}\n";o||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));let s="\n\nuniform sampler2D nextParticlesPosition;\nuniform sampler2D particlesSpeed; // (u, v, w, norm)\n\n// range (min, max)\nuniform vec2 lonRange;\nuniform vec2 latRange;\n\nuniform float randomCoefficient; // use to improve the pseudo-random generator\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\nuniform float dropRateBump;\n\nin vec2 v_textureCoordinates;\n\n// pseudo-random generator\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\nconst vec2 normalRange = vec2(0.0, 1.0);\nfloat rand(vec2 seed, vec2 range) {\n  vec2 randomSeed = randomCoefficient * seed;\n  float temp = dot(randomConstants.xy, randomSeed);\n  temp = fract(sin(temp) * (randomConstants.z + temp));\n  return temp * (range.y - range.x) + range.x;\n}\n\nvec3 generateRandomParticle(vec2 seed, float lev) {\n  // ensure the longitude is in [0, 360]\n  float randomLon = mod(rand(seed, lonRange), 360.0);\n  float randomLat = rand(-seed, latRange);\n\n  return vec3(randomLon, randomLat, lev);\n}\n\nbool particleOutbound(vec3 particle) {\n  return particle.y < -90.0 || particle.y > 90.0;\n}\n\nvoid main() {\n  vec3 nextParticle = texture(nextParticlesPosition, v_textureCoordinates).rgb;\n  vec4 nextSpeed = texture(particlesSpeed, v_textureCoordinates);\n  float speedNorm = nextSpeed.a;\n  float particleDropRate = dropRate + dropRateBump * speedNorm;\n\n  vec2 seed1 = nextParticle.xy + v_textureCoordinates;\n  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\n  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\n  float randomNumber = rand(seed2, normalRange);\n\n  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\n    out_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\n  } else {\n    out_FragColor = vec4(nextParticle, 0.0);\n  }\n}\n";o||(s=s.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),s=s.replace(/texture\(/g,"texture2D("),s=s.replace(/out_FragColor/g,"gl_FragColor"));const l=new Cesium.Cartesian3(e.dimensions.lon,e.dimensions.lat,e.dimensions.lev),c=new Cesium.Cartesian3(e.lon.min,e.lat.min,e.lev.min),u=new Cesium.Cartesian3(e.lon.max,e.lat.max,e.lev.max),d=new Cesium.Cartesian3((u.x-c.x)/(l.x-1),(u.y-c.y)/(l.y-1),l.z>1?(u.z-c.z)/(l.z-1):1),p=new Cesium.Cartesian2(e.U.min,e.U.max),m=new Cesium.Cartesian2(e.V.min,e.V.max),v=this;this.primitives={calculateSpeed:new Cd({commandType:"Compute",uniformMap:{U:function(){return v.windTextures.U},V:function(){return v.windTextures.V},currentParticlesPosition:function(){return v.particlesTextures.currentParticlesPosition},dimension:function(){return l},minimum:function(){return c},maximum:function(){return u},interval:function(){return d},uSpeedRange:function(){return p},vSpeedRange:function(){return m},pixelSize:function(){return i.pixelSize},speedFactor:function(){return t.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[r]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const e=v.particlesTextures.previousParticlesPosition;v.particlesTextures.previousParticlesPosition=v.particlesTextures.currentParticlesPosition,v.particlesTextures.currentParticlesPosition=v.particlesTextures.postProcessingPosition,v.particlesTextures.postProcessingPosition=e,v.primitives.calculateSpeed.commandToExecute.outputTexture=v.particlesTextures.particlesSpeed}}),updatePosition:new Cd({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return v.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return v.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[a]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){v.primitives.updatePosition.commandToExecute.outputTexture=v.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new Cd({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return v.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return v.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return t.dropRate},dropRateBump:function(){return t.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){v.primitives.postProcessingPosition.commandToExecute.outputTexture=v.particlesTextures.postProcessingPosition}})}}}class Od{constructor(e,t,i,n,o){this.createRenderingTextures(e,t),this.createRenderingFramebuffers(e),this.createRenderingPrimitives(e,i,n,o)}createRenderingTextures(e,t){const i={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},n={context:e,width:e.drawingBufferWidth,height:e.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:fd(i),segmentsDepth:fd(n),currentTrailsColor:fd(i),currentTrailsDepth:fd(n),nextTrailsColor:fd(i),nextTrailsDepth:fd(n)}}createRenderingFramebuffers(e){this.framebuffers={segments:yd(e,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:yd(e,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:yd(e,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(e){const t=[];for(let u=0;u<e.particlesTextureSize;u++)for(let i=0;i<e.particlesTextureSize;i++)for(let n=0;n<6;n++)t.push(u/e.particlesTextureSize),t.push(i/e.particlesTextureSize);const i=new Float32Array(t),n=[],o=[-1,0,1],r=[-1,1];for(let u=0;u<e.maxParticles;u++)for(let e=0;e<o.length;e++)for(let t=0;t<r.length;t++)n.push(o[e]),n.push(r[t]),n.push(0);const a=new Float32Array(n),s=12*e.maxParticles,l=new Uint32Array(s);for(let u=0,d=0,p=0;u<e.maxParticles;u++)l[d++]=p+0,l[d++]=p+1,l[d++]=p+2,l[d++]=p+2,l[d++]=p+1,l[d++]=p+3,l[d++]=p+2,l[d++]=p+4,l[d++]=p+3,l[d++]=p+4,l[d++]=p+3,l[d++]=p+5,p+=6;const c=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new c({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:a})}),indices:l})}createRenderingPrimitives(e,t,i,n){const o=this,r=null==e?void 0:e.webgl2;let a="\nin vec2 st;\n// it is not normal itself, but used to control lines drawing\nin vec3 normal; // (point to use, offset sign, not used component)\n\nuniform sampler2D previousParticlesPosition;\nuniform sampler2D currentParticlesPosition;\nuniform sampler2D postProcessingPosition;\n\nuniform float particleHeight;\n\nuniform float aspect;\nuniform float pixelSize;\nuniform float lineWidth;\n\nstruct adjacentPoints {\n  vec4 previous;\n  vec4 current;\n  vec4 next;\n};\n\nvec3 convertCoordinate(vec3 lonLatLev) {\n  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\n  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\n\n  // WGS 84 geometric constants\n  float a = 6378137.0; // Semi-major axis\n  float b = 6356752.3142; // Semi-minor axis\n  float e2 = 6.69437999014e-3; // First eccentricity squared\n\n  float latitude = radians(lonLatLev.y);\n  float longitude = radians(lonLatLev.x);\n\n  float cosLat = cos(latitude);\n  float sinLat = sin(latitude);\n  float cosLon = cos(longitude);\n  float sinLon = sin(longitude);\n\n  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\n  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\n\n  vec3 cartesian = vec3(0.0);\n  cartesian.x = (N_Phi + h) * cosLat * cosLon;\n  cartesian.y = (N_Phi + h) * cosLat * sinLon;\n  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\n  return cartesian;\n}\n\nvec4 calculateProjectedCoordinate(vec3 lonLatLev) {\n  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\n  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\n  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\n  vec3 particlePosition = convertCoordinate(lonLatLev);\n  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);\n  return projectedCoordinate;\n}\n\nvec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;\n  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;\n\n  float offsetLength = lineWidth / 2.0;\n  vec2 direction = normalize(pointB_XY - pointA_XY);\n  vec2 normalVector = vec2(-direction.y, direction.x);\n  normalVector.x = normalVector.x / aspect;\n  normalVector = offsetLength * normalVector;\n\n  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\n  return offset;\n}\n\nvec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {\n  vec2 aspectVec2 = vec2(aspect, 1.0);\n\n  vec4 PointA = projectedCoordinates.previous;\n  vec4 PointB = projectedCoordinates.current;\n  vec4 PointC = projectedCoordinates.next;\n\n  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;\n  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;\n  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;\n\n  vec2 AB = normalize(pointB_XY - pointA_XY);\n  vec2 BC = normalize(pointC_XY - pointB_XY);\n\n  vec2 normalA = vec2(-AB.y, AB.x);\n  vec2 tangent = normalize(AB + BC);\n  vec2 miter = vec2(-tangent.y, tangent.x);\n\n  float offsetLength = lineWidth / 2.0;\n  float projection = dot(miter, normalA);\n  vec4 offset = vec4(0.0);\n  // avoid to use values that are too small\n  if (projection > 0.1) {\n      float miterLength = offsetLength / projection;\n      offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);\n      offset.x = offset.x / aspect;\n  } else {\n      offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);\n  }\n\n  return offset;\n}\n\nvoid main() {\n  vec2 particleIndex = st;\n\n  vec3 previousPosition = texture(previousParticlesPosition, particleIndex).rgb;\n  vec3 currentPosition = texture(currentParticlesPosition, particleIndex).rgb;\n  vec3 nextPosition = texture(postProcessingPosition, particleIndex).rgb;\n\n  float isAnyRandomPointUsed = texture(postProcessingPosition, particleIndex).a +\n    texture(currentParticlesPosition, particleIndex).a +\n    texture(previousParticlesPosition, particleIndex).a;\n\n  adjacentPoints projectedCoordinates;\n  if (isAnyRandomPointUsed > 0.0) {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = projectedCoordinates.previous;\n    projectedCoordinates.next = projectedCoordinates.previous;\n  } else {\n    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);\n    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);\n    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);\n  }\n\n  int pointToUse = int(normal.x);\n  float offsetSign = normal.y;\n  vec4 offset = vec4(0.0);\n  // render lines with triangles and miter joint\n  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail\n  if (pointToUse == -1) {\n    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);\n    gl_Position = projectedCoordinates.previous + offset;\n  } else {\n    if (pointToUse == 0) {\n      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);\n      gl_Position = projectedCoordinates.current + offset;\n    } else {\n      if (pointToUse == 1) {\n        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);\n        gl_Position = projectedCoordinates.next + offset;\n      } else {\n\n      }\n    }\n  }\n}\n";r||(a=a.replace("in vec2 st;","attribute vec2 st;"),a=a.replace("in vec3 normal;","attribute vec3 normal;"),a=a.replace(/texture\(/g,"texture2D("));let s="\nvoid main() {\n  const vec4 white = vec4(1.0);\n  out_FragColor = white;\n}\n";r||(s=s.replace(/out_FragColor/g,"gl_FragColor"));let l="\nin vec3 position;\nin vec2 st;\n\nout vec2 textureCoordinate;\n\nvoid main() {\n  textureCoordinate = st;\n  gl_Position = vec4(position, 1.0);\n}\n";r||(l=l.replace("out vec2 textureCoordinate;","varying vec2 textureCoordinate;"),l=l.replace("in vec3 position;","attribute vec3 position;"),l=l.replace("in vec2 st;","attribute vec2 st;"));let c="\n\nuniform sampler2D segmentsColorTexture;\nuniform sampler2D segmentsDepthTexture;\n\nuniform sampler2D currentTrailsColor;\nuniform sampler2D trailsDepthTexture;\n\nuniform float fadeOpacity;\n\nin vec2 textureCoordinate;\n\nvoid main() {\n  vec4 pointsColor = texture(segmentsColorTexture, textureCoordinate);\n  vec4 trailsColor = texture(currentTrailsColor, textureCoordinate);\n\n  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\n\n  float pointsDepth = texture(segmentsDepthTexture, textureCoordinate).r;\n  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));\n\n  out_FragColor = vec4(0.0);\n  if (pointsDepth < globeDepth) {\n    out_FragColor = out_FragColor + pointsColor;\n  }\n  if (trailsDepth < globeDepth) {\n    out_FragColor = out_FragColor + trailsColor;\n  }\n  gl_FragDepth = min(pointsDepth, trailsDepth);\n}\n";r||(c=c.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),c=c.replace(/out_FragColor/g,"gl_FragColor"),c=c.replace(/gl_FragDepth/g,"gl_FragDepthEXT"),c=c.replace(/texture\(/g,"texture2D("));let u="\nuniform sampler2D trailsColorTexture;\nuniform sampler2D trailsDepthTexture;\n\nin vec2 textureCoordinate;\n\nvoid main() {\n  vec4 trailsColor = texture(trailsColorTexture, textureCoordinate);\n  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;\n  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));\n\n  if (trailsDepth < globeDepth) {\n    out_FragColor = trailsColor;\n  } else {\n    out_FragColor = vec4(0.0);\n  }\n}\n";r||(u=u.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),u=u.replace(/out_FragColor/g,"gl_FragColor"),u=u.replace(/texture\(/g,"texture2D(")),this.primitives={segments:new Cd({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(t),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return n.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return n.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return n.particlesTextures.postProcessingPosition},aspect:function(){return e.drawingBufferWidth/e.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return t.lineWidth},particleHeight:function(){return t.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[a]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),rawRenderState:bd({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new Cd({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:gd(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return o.textures.segmentsColor},segmentsDepthTexture:function(){return o.textures.segmentsDepth},currentTrailsColor:function(){return o.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return t.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[c]}),rawRenderState:bd({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const e=o.framebuffers.currentTrails;o.framebuffers.currentTrails=o.framebuffers.nextTrails,o.framebuffers.nextTrails=e,o.primitives.trails.commandToExecute.framebuffer=o.framebuffers.nextTrails,o.primitives.trails.clearCommand.framebuffer=o.framebuffers.nextTrails}}),screen:new Cd({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:gd(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return o.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return o.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[u]}),rawRenderState:bd({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class _d{constructor(e,t,i,n){this.context=e,this.data=t,this.particleSystemOptions=i,this.viewerParameters=n,this.particlesComputing=new wd(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new Od(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(e){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach((e=>{this.particlesComputing.windTextures[e].destroy()})),Object.keys(this.particlesRendering.framebuffers).forEach((e=>{this.particlesRendering.framebuffers[e].destroy()})),this.context=e,this.particlesComputing=new wd(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new Od(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const e=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach((t=>{e.framebuffer=this.particlesRendering.framebuffers[t],e.execute(this.context)}))}refreshParticles(e){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),e){const e=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=e;const t=Cesium.VertexArray.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=t}}applyParticleSystemOptions(e){let t=!1;this.particleSystemOptions.maxParticles!==e.maxParticles&&(t=!0),Object.keys(e).forEach((t=>{this.particleSystemOptions[t]=e[t]})),this.refreshParticles(t)}applyViewerParameters(e){Object.keys(e).forEach((t=>{this.viewerParameters[t]=e[t]})),this.refreshParticles(!1)}}function xd(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function Sd(e){return"string"==typeof e&&e.indexOf("/")>=0&&(e=e.split("/")),function(e){if(Array.isArray(e))return!0;if("object"!=typeof e||!e)return!1;const t=e.length;return"number"==typeof t&&t>=0}(e)&&2===e.length?e[0]/e[1]:+e}var Ed=P({name:"VcOverlayWindmap",props:{show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:4096,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object},emits:ul,setup(e,t){const i=r();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:o}=n;let a,l,c,u;const d=s((()=>{const t=Math.ceil(Math.sqrt(e.options.maxParticles));return{particlesTextureSize:t,maxParticles:t*t,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}}));let p=[];p.push(b((()=>e.show),(e=>{c.show=e}))),p.push(b((()=>e.data),(e=>{i.proxy.reload()}))),p.push(b((()=>d.value),(e=>{const t=i.cesiumObject;t&&t.applyParticleSystemOptions(e)}),{deep:!0})),p.push(b((()=>e.viewerParameters),(e=>{O();i.cesiumObject.applyViewerParameters(a)}),{deep:!0})),i.createCesiumObject=async()=>{const{viewer:t}=o;c=new Cesium.PrimitiveCollection,l=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,6314355.63),a={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const i={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},n={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return u=function(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),o=i*n,r=Sd(e.delta),a=Sd(t.delta),s=Sd(e.start),l=Sd(t.start),c=Math.floor(i*r)>=360;return{dimensions:function(){return{width:i,height:n}},isCylindrical:function(){return c},forEach:function(e,t){for(let n=t||0;n<o;n++){const t=n%i,o=Math.floor(n/i);if(e(s+t*r,l+o*a,n))return n+1}return NaN},closest:function(e,t){if(e==e&&t==t){const o=xd(e-s,360)/r,u=(t-l)/a,d=Math.round(o),p=Math.round(u);if(0<=p&&p<n&&0<=d&&(d<i||d===i&&c)){const e=p*i+d;return d===i?e-i:e}}return NaN},closest4:function(e,t){if(e==e&&t==t){const o=xd(e-s,360)/r,u=(t-l)/a,d=Math.floor(o),p=Math.floor(u),m=d+1;if(0<=p&&p+1<n&&0<=d&&(m<i||m===i&&c)){const e=p*i+d;let t=e+1;const n=e+i;let r=n+1;return m===i&&(t-=i,r-=i),[e,t,n,r,o-d,u-p]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}}}(i,n),O(),new _d(t.scene.context,e.data,d.value,a)},i.mount=async()=>{const{viewer:e}=o;e.scene.primitives.add(c);const t=e.scene,i=t.camera;return m(),i.moveStart.addEventListener(h),i.moveEnd.addEventListener(g),window.addEventListener("resize",C),t.preRender.addEventListener(w),!0},i.unmount=async()=>{v();const{viewer:e}=o,t=e.scene,i=t.camera;return v(),e.scene.primitives.remove(c),i.moveStart.removeEventListener(h),i.moveEnd.removeEventListener(g),window.removeEventListener("resize",C),t.preRender.removeEventListener(w),!0};const m=()=>{const e=i.cesiumObject;c.add(e.particlesComputing.primitives.calculateSpeed),c.add(e.particlesComputing.primitives.updatePosition),c.add(e.particlesComputing.primitives.postProcessingPosition),c.add(e.particlesRendering.primitives.segments),c.add(e.particlesRendering.primitives.trails),c.add(e.particlesRendering.primitives.screen)},v=()=>{const e=i.cesiumObject;c.remove(e.particlesComputing.primitives.calculateSpeed),c.remove(e.particlesComputing.primitives.updatePosition),c.remove(e.particlesComputing.primitives.postProcessingPosition),c.remove(e.particlesRendering.primitives.segments),c.remove(e.particlesRendering.primitives.trails),c.remove(e.particlesRendering.primitives.screen)},h=()=>{c.show=!1},g=()=>{O();i.cesiumObject.applyViewerParameters(a),c.show=!0};let y=!1;const C=()=>{y=!0,c.show=!1,c.removeAll()},w=()=>{if(y){const{viewer:e}=o,t=e.scene;i.cesiumObject.canvasResize(t.context),y=!1,m(),c.show=!0}},O=()=>{const{viewer:t}=o,i=t.scene,n=i.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))a.lonRange=De(e.viewerParameters.lonRange),a.latRange=De(e.viewerParameters.latRange);else{const e=function(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),o=e.width;let r,a;o>Cesium.Math.THREE_PI_OVER_TWO?(r=0,a=Cesium.Math.TWO_PI):n-i<o?(r=i,a=i+o):(r=i,a=n),t.lon={min:Cesium.Math.toDegrees(r),max:Cesium.Math.toDegrees(a)};const s=e.south,l=e.north,c=e.height,u=c>Cesium.Math.PI/12?c/2:0;let d=Cesium.Math.clampToLatitudeRange(s-u),p=Cesium.Math.clampToLatitudeRange(l+u);return d<-Cesium.Math.PI_OVER_THREE&&(d=-Cesium.Math.PI_OVER_TWO),p>Cesium.Math.PI_OVER_THREE&&(p=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(d),max:Cesium.Math.toDegrees(p)},t}(n.computeViewRectangle(i.globe.ellipsoid));a.lonRange.x=e.lon.min,a.lonRange.y=e.lon.max,a.latRange.x=e.lat.min,a.latRange.y=e.lat.max}const r=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:n.getPixelSize(l,i.drawingBufferWidth,i.drawingBufferHeight);r>0&&(a.pixelSize=r)};return f((()=>{p.forEach((e=>e())),p=[]})),Object.assign(i.proxy,{getNearestUV:(t,i)=>{const n=u.closest(t,i);if(Cesium.defined(n))return[e.data.U.array[n],e.data.V.array[n]]}}),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pd=P({name:"VcOverlayDynamic",props:{...Et,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},emits:{...ul,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:a}=n,s=o([]),l=o({}),{emit:c}=t,u=o(null),d=o(null);let p,m=[];m.push(b((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),m.push(b((()=>e.name),(e=>{const t=i.cesiumObject;t&&(t.name=e)}))),m.push(b((()=>e.startTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.startTime=et(e))}))),m.push(b((()=>e.stopTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.stopTime=et(e))}))),m.push(b((()=>e.currentTime),(e=>{const{viewer:t}=a;Cesium.defined(t)&&e&&(t.clock.currentTime=et(e))}))),m.push(b((()=>e.multiplier),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.multiplier=e)}))),m.push(b((()=>e.clockStep),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockStep=e)}))),m.push(b((()=>e.clockRange),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.clockRange=e)}))),m.push(b((()=>e.canAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.canAnimate=e)}))),m.push(b((()=>e.shouldAnimate),(e=>{const{viewer:t}=a;Cesium.defined(t)&&(t.clock.shouldAnimate=e)}))),m.push(b((()=>X(e.dynamicOverlays)),((t,o)=>{if(!i.mounted)return;const r=i.cesiumObject;if(t.length===o.length){const i=[];for(let e=0;e<t.length;e++){const n=t[e],r=o[e],a=(e,t)=>{if("nodeTransformations"!==e&&"_definitionChanged"!==e)return t};JSON.stringify(n,a)!==JSON.stringify(r,a)&&i.push({newOptions:n,oldOptions:r})}i.forEach((t=>{const i=r.entities.getById(t.oldOptions.id);if(Cesium.defined(i)){if(t.oldOptions.id===t.newOptions.id)i&&Object.keys(t.newOptions).forEach((e=>{t.oldOptions[e]!==t.newOptions[e]&&(i[e]=n.transformProp(e,t.newOptions[e]))}));else if(i){r.entities.remove(i),J(s.value,(e=>e.id===i.id));const e=t.newOptions;h(r,[e])}const o=K(s.value,(e=>e.id===i.id));if(Cesium.defined(o)){const i=t.oldOptions.sampledPositions,n=t.newOptions.sampledPositions,r=Y(n,i,"id");Y(i,n,"id").forEach((e=>{e.time&&o._sampledPosition.removeSample(e.time)})),r.forEach((t=>{t.time?o.addPosition(t.position,t.time):t.interval&&o.addPosition(t.position,t.interval||e.defaultInterval)}))}}}))}else{const e=Y(t,o,"id"),i=Y(o,t,"id"),n=[];for(let t=0;t<i.length;t++){const e=r.entities.getById(i[t].id);n.push(e)}n.forEach((e=>{r.entities.remove(e),J(s.value,(t=>t.id===e.id))})),h(r,e)}}),{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const v=t=>{let n=Pe(i,"update:currentTime");!et(e.currentTime).equalsEpsilon(t.currentTime,.001)&&n&&c("update:currentTime",t.currentTime),n=Pe(i,"update:shouldAnimate"),e.shouldAnimate!==t.shouldAnimate&&n&&c("update:shouldAnimate",t.shouldAnimate),n=Pe(i,"update:canAnimate"),e.canAnimate!==t.canAnimate&&n&&c("update:canAnimate",t.canAnimate),n=Pe(i,"update:clockRange"),e.clockRange!==t.clockRange&&n&&c("update:clockRange",t.clockRange),n=Pe(i,"update:clockStep"),e.clockStep!==t.clockStep&&n&&c("update:clockStep",t.clockStep),n=Pe(i,"update:multiplier"),e.multiplier!==t.multiplier&&n&&c("update:multiplier",t.multiplier),n=Pe(i,"update:startTime"),!et(e.startTime).equalsEpsilon(t.startTime,.001)&&n&&c("update:startTime",t.startTime),n=Pe(i,"update:stopTime"),!et(e.stopTime).equalsEpsilon(t.stopTime,.001)&&n&&c("update:stopTime",t.stopTime),g(t);const{JulianDate:o,Cartesian3:r}=Cesium;if(n=Pe(i,"stopArrived"),n&&e.shouldAnimate)for(let i=0;i<s.value.length;i++){const n=s.value[i],a=n._sampledPosition.getValue(t.currentTime),l=e.dynamicOverlays[i];for(let s=0;s<l.sampledPositions.length;s++){const u=l.sampledPositions[s],d=ke(u.position),m=et(u.time),v=r.equalsEpsilon(a,d,e.positionPrecision),h=o.equalsEpsilon(t.currentTime,m,e.timePrecision);let g=!1;switch(e.stopArrivedFlag){case"time":g=h;break;case"position":g=v;break;case"both":g=h&&v;break;case"or":g=h||v}if(g){c("stopArrived",{overlay:n,position:u,offset:p,clock:t,indexOverlay:i,indexPosition:s});break}}}},h=(t,i)=>{for(let o=0;o<i.length;o++){const r=i[o],a=n.transformProps(r),l=new jr(a);s.value.push(l);const c=t.entities.add(l._entity);a.sampledPositions.forEach((t=>{t.time?l.addPosition(t.position,t.time):t.interval&&(t.time=l.addPosition(t.position,t.interval||e.defaultInterval))})),r.id!==c.id&&(r.id=c.id),me(c,a,["id"])}};i.mount=async()=>{const{viewer:t}=a,n=i.cesiumObject;return n.show=e.show,h(n,e.dynamicOverlays),t.dataSources.add(n).then((()=>{l.value.startTime=t.clock.startTime,l.value.stopTime=t.clock.stopTime,l.value.currentTime=t.clock.currentTime,l.value.multiplier=t.clock.multiplier,l.value.clockStep=t.clock.clockStep,l.value.clockRange=t.clock.clockRange,l.value.canAnimate=t.clock.canAnimate,l.value.shouldAnimate=t.clock.shouldAnimate,e.startTime&&(t.clock.startTime=et(e.startTime)),e.stopTime&&(t.clock.stopTime=et(e.stopTime)),e.currentTime&&(t.clock.currentTime=et(e.currentTime)),t.clock.multiplier=e.multiplier,t.clock.clockStep=e.clockStep,t.clock.clockRange=e.clockRange,t.clock.canAnimate=!1,t.clock.shouldAnimate=e.shouldAnimate,t.clock.onTick.addEventListener(v);const n=Pe(i,"onStop");return n&&t.clock.onStop.addEventListener(n),!0}))},i.unmount=async()=>{const{viewer:e}=a,t=i.cesiumObject;e.dataSources.remove(t,!0),e.clock.startTime=l.value.startTime,e.clock.stopTime=l.value.stopTime,e.clock.multiplier=l.value.multiplier,e.clock.clockStep=l.value.clockStep,e.clock.clockRange=l.value.clockRange,e.clock.canAnimate=l.value.canAnimate,e.clock.shouldAnimate=l.value.shouldAnimate,s.value.length=0,e.clock.onTick.removeEventListener(v);const n=Pe(i,"onStop");return n&&e.clock.onStop.removeEventListener(n),u.value&&(e.trackedEntity=void 0),!0};const g=e=>{var t,i,n,o,r,s,l,c;if(d.value&&u.value){const{viewer:m}=a;if(Cesium.JulianDate.greaterThan(e.currentTime,e.stopTime))return void(u.value=null);const v=u.value._sampledPosition.getValue(e.currentTime);let h=new Cesium.HeadingPitchRange;switch(d.value.mode){case"TP":h.heading=0,h.pitch=(null==(i=null==(t=d.value)?void 0:t.offset)?void 0:i.pitch)||Cesium.Math.toRadians(-90),h.range=(null==(o=null==(n=d.value)?void 0:n.offset)?void 0:o.range)||1e3;break;case"FP":{const t=Cesium.JulianDate.addSeconds(e.currentTime,1/60,new Cesium.JulianDate),i=u.value._sampledPosition.getValue(t)||v;v.equals(i)&&p?h=p:(h.heading=Cesium.Math.toRadians(it(v,i)),h.pitch=((null==(s=null==(r=d.value)?void 0:r.offset)?void 0:s.pitch)||Cesium.Math.toRadians(-45))+nt(v,i),h.range=(null==(c=null==(l=d.value)?void 0:l.offset)?void 0:c.range)||500);break}case"CUSTOM":h=tt(d.value.offset)}p=h,m.camera.lookAt(v,h)}},y=e=>e instanceof jr?e:"string"==typeof e?K(s.value,(t=>t.id===e)):"number"==typeof e?s.value[e]:s.value[0];return f((()=>{m.forEach((e=>e())),m=[]})),Object.assign(i.proxy,{getOverlays:()=>s.value,getOverlay:y,trackOverlay:(e,t)=>{var i;const{viewer:n}=a;if("FREE"===(t=t||{mode:null===d.value?"FP":"FREE"}).mode)return n.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),void(u.value&&(n.trackedEntity=void 0,u.value=null,d.value=null));u.value=y(e),n.trackedEntity=B(u.value._entity),"TRACKED"===t.mode?((null==(i=null==t?void 0:t.viewFrom)?void 0:i.length)&&(n.trackedEntity.viewFrom=new Cesium.Cartesian3(t.viewFrom[0],t.viewFrom[1],t.viewFrom[2])),d.value=null):d.value=t},zoomToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(u.value&&(n.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=B(y(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=B(y(e)._entity);else o=i.cesiumObject;return n.zoomTo(o,Cesium.defined(t)?tt(t):void 0)},flyToOverlay:(e,t)=>{const{viewer:n}=a;let o;if(u.value&&(n.trackedEntity=void 0,u.value=null),Cesium.defined(e))if(Array.isArray(e))if(e.length){const t=[];e.forEach((e=>{const i=B(y(e)._entity);t.push(i)})),o=t}else o=i.cesiumObject;else o=B(y(e)._entity);else o=i.cesiumObject;return t=t||{duration:3},Cesium.defined(t.offset)&&(t.offset=tt(t.offset)),n.flyTo(o,t)}}),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Td=P({name:"VcCollectionBillboard",props:{...Mn,...jn,...Et,...so,...Tn,...In,billboards:{type:Array,default:()=>[]}},emits:hl,setup(e,t){const i=r();i.cesiumClass="BillboardCollection";const n=er(e,t,i);let o=[];o.push(b((()=>X(e.billboards)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o._billboards.find((t=>(null==t?void 0:t.id)===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=null==n?void 0:n.transformProp(i,e.newOptions[i]))}))}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._billboards.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0})),i.alreadyListening.push("billboards");const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const r=null==n?void 0:n.transformProps(o),a=e.add(r);me(a,r)}};return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e),i=new Cesium.BillboardCollection(t);return a(i,e.billboards),i},f((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Id=P({name:"VcBillboard",props:{...ut,...dt,...mt,...vt,...ht,...gt,...ft,...yt,...Ln,...bt,...wt,...Ot,...st,..._t,...xt,...St,...Et,...Pt,...Tt,...It,...Mt,...so},emits:hl,setup(e,t){const i=r();return i.cesiumClass="Billboard",Ko(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Md=P({name:"VcCumulusCloud",props:{brightness:{type:Number,default:1},...dt,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:ke}},...st,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:De}},...Et,slice:{type:Number,default:-1}},emits:hl,setup(e,t){const i=r();return i.cesiumClass="CumulusCloud",Ko(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var jd=P({name:"VcCollectionCloud",props:{...Et,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}},emits:ul,setup(e,t){var i;const n=r();n.cesiumClass="CloudCollection";const o=er(e,t,n);if(void 0===o)return;n.alreadyListening.push("clouds");let a=[];a.push(b((()=>X(e.clouds)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._clouds.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._clouds.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n,Md.props),a=e.add(r);me(a,r)}};n.createCesiumObject=async()=>{const t=o.transformProps(e,Md.props),i=new Cesium.CloudCollection(t);return s(i,e.clouds),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(l),style:{display:"none !important"}},aa(t.slots.default)):M(le(l))}});var Ld=P({name:"VcCollectionLabel",props:{...Tn,...In,...Mn,...jn,...Et,...so,labels:{type:Array,default:()=>[]}},emits:hl,setup(e,t){var i;const n=r();n.cesiumClass="LabelCollection";const o=er(e,t,n);if(void 0===o)return;n.alreadyListening.push("labels");let a=[];a.push(b((()=>X(e.labels)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._labels.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._labels.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=e.add(r);me(a,r)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.LabelCollection(t);return s(i,e.labels),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(l),style:{display:"none !important"}},aa(t.slots.default)):M(le(l))}});var Ad=P({name:"VcLabel",props:{...pi,...mi,...mt,...vt,...ht,...vi,...ci,...ft,...yt,...Ln,...kt,...Rt,...wt,...Ot,...st,...xt,...St,...Et,...di,...ui,...li,totalScale:{type:Number,default:1},...Tt,...It,...so},emits:hl,setup(e,t){const i=r();return i.cesiumClass="Label",Ko(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Dd=P({name:"VcCollectionPoint",props:{...Tn,...In,...jn,...Et,...so,points:{type:Array,default:()=>[]}},emits:hl,setup(e,t){const i=r();i.cesiumClass="PointPrimitiveCollection";const n=er(e,t,i);if(void 0===n)return;i.alreadyListening.push("points");let o=[];o.push(b((()=>X(e.points)),((e,t)=>{if(!i.mounted)return;const o=i.cesiumObject;if(e.length===t.length){const i=[];for(let n=0;n<e.length;n++){const o=e[n],r=t[n];JSON.stringify(o)!==JSON.stringify(r)&&i.push({newOptions:o,oldOptions:r})}i.forEach((e=>{const t=o._pointPrimitives.find((t=>t&&t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=n.transformProp(i,e.newOptions[i]))}))}))}else{const i=Y(e,t,"id"),n=Y(t,e,"id"),r=[];for(let e=0;e<n.length;e++){const t=o._pointPrimitives.find((t=>t.id===n[e].id));t&&r.push(t)}r.forEach((e=>{o.remove(e)})),a(o,i)}}),{deep:!0}));const a=(e,t)=>{for(let i=0;i<t.length;i++){const o=t[i];o.id=Cesium.defined(o.id)?o.id:Cesium.createGuid();const r=n.transformProps(o),a=e.add(r);me(a,r)}};return i.createCesiumObject=async()=>{const t=n.transformProps(e),i=new Cesium.PointPrimitiveCollection(t);return a(i,e.points),i},f((()=>{o.forEach((e=>e())),o=[]})),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var kd=P({name:"VcPoint",props:{...dt,...mt,...vt,...Ln,...kt,...Rt,...ji,...st,...St,...Et,...Tt,...so},emits:hl,setup(e,t){const i=r();return i.cesiumClass="PointPrimitive",Ko(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Rd=P({name:"VcCollectionPolyline",props:{...Tn,...In,...Et,...so,polylines:{type:Array,default:()=>[]}},emits:hl,setup(e,t){var i;const n=r();n.cesiumClass="PolylineCollection";const o=er(e,t,n);if(void 0===o)return;n.alreadyListening.push("polylines");let a=[];a.push(b((()=>X(e.polylines)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._polylines.find((t=>t.id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._polylines.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=e.add(r);me(a,r)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PolylineCollection(t);return s(i,e.polylines),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(l),style:{display:"none !important"}},aa(t.slots.default)):M(le(l))}});var Bd=P({name:"VcPolyline",props:{...vt,...Ln,...An,...At,...Nt,...Et,...Mt,...so},emits:hl,setup(e,t){const i=r();return i.cesiumClass="Polyline",Ko(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Nd=P({name:"VcCollectionPrimitive",props:{...Et,destroyPrimitives:{type:Boolean,default:!0},...so,polygons:{type:Array,default:()=>[]}},emits:hl,setup(e,t){var i;const n=r();n.cesiumClass="PrimitiveCollection";const o=er(e,t,n);if(void 0===o)return;n.alreadyListening.push("polygons");let a=[];a.push(b((()=>X(e.polygons)),((e,t)=>{if(!n.mounted)return;const i=n.cesiumObject;if(e.length===t.length){const n=[];for(let i=0;i<e.length;i++){const o=e[i],r=t[i];JSON.stringify(o)!==JSON.stringify(r)&&n.push({newOptions:o,oldOptions:r})}n.forEach((e=>{const t=i._primitives.find((t=>t._id===e.oldOptions.id));t&&Object.keys(e.newOptions).forEach((i=>{e.oldOptions[i]!==e.newOptions[i]&&(t[i]=o.transformProp(i,e.newOptions[i]))}))}))}else{const n=Y(e,t,"id"),o=Y(t,e,"id"),r=[];for(let e=0;e<o.length;e++){const t=i._primitives.find((t=>t.id===o[e].id));t&&r.push(t)}r.forEach((e=>{i.remove(e)})),s(i,n)}}),{deep:!0}));const s=(e,t)=>{for(let i=0;i<t.length;i++){const n=t[i];n.id=Cesium.defined(n.id)?n.id:Cesium.createGuid();const r=o.transformProps(n),a=new Mr(r);a._vcParent=e,me(a,r),e.add(a)}};n.createCesiumObject=async()=>{const t=o.transformProps(e),i=new Cesium.PrimitiveCollection(t);return s(i,e.polygons),i},f((()=>{a.forEach((e=>e())),a=[]}));const l=(null==(i=n.proxy)?void 0:i.$options.name)||"";return()=>t.slots.default?S("i",{class:le(l),style:{display:"none !important"}},aa(t.slots.default)):M(le(l))}});var Vd=P({name:"VcPolygon",props:{...Nt,...zn,..._n,...xn,...Et,...Ln,...Ri,...Ut,...Ni,...Ki,...yn,...bn,...so},emits:hl,setup(e,t){const i=r();i.cesiumClass="PolygonPrimitive";const n=Ko(e,t,i);if(void 0===n)return;let o=[];return o.push(b((()=>e.clampToGround),(e=>{const t=i.cesiumObject;t&&(t.clampToGround=e)}))),o.push(b((()=>e.positions),(e=>{const t=i.cesiumObject;t&&(t.positions=Re(e))}))),o.push(b((()=>e.polygonHierarchy),(e=>{const t=i.cesiumObject;t&&(t.polygonHierarchy=ze(e))}))),o.push(b((()=>e.appearance),(e=>{const t=i.cesiumObject;t&&(t.appearance=We.call(i,e))}))),o.push(b((()=>e.depthFailAppearance),(e=>{const t=i.cesiumObject;t&&(t.depthFailAppearance=We.call(i,e))}))),o.push(b((()=>e.show),(e=>{const t=i.cesiumObject;t&&(t.show=e)}))),o.push(b((()=>e.classificationType),(e=>{const t=i.cesiumObject;t&&(t.classificationType=e)}))),i.createCesiumObject=async()=>{const t=n.transformProps(e);return new Mr(t)},i.mount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return t._vcParent=e,e&&e.add(t)},i.unmount=async()=>{const e=n.$services.primitives,t=i.cesiumObject;return e&&!e.isDestroyed()&&e.remove(t)},f((()=>{o.forEach((e=>e())),o=[]})),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[Td,jd,Ld,Dd,Rd,Nd,Md,Id,Ad,kd,Bd,Vd].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const zd=Td,Fd=jd,Hd=Ld,Ud=Dd,Wd=Rd,Gd=Nd,$d=Id,Zd=Md,qd=Ad,Yd=kd,Xd=Bd,Qd=Vd;var Jd=P({name:"VcGeometryInstance",props:{geometry:Object,...Tn,...Ln,attributes:Object},emits:{...ul,"update:geometry":e=>!0},setup(e,t){const i=r();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{emit:s}=t,l=o(0);i.createCesiumObject=async()=>{const t=n.transformProps(e);return t.geometry||(t.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(t)},i.mount=async()=>{var e;const t=Ie(i).proxy;void 0!==t.__childCount&&(l.value=t.__childCount.value||0,t.__childCount.value+=1);const n=i.cesiumObject;return null==(e=t.__updateGeometryInstances)||e.call(t,n,l.value),!0},i.unmount=async()=>{var e;const t=i.cesiumObject,n=Ie(i).proxy;return null==(e=n.__removeGeometryInstances)||e.call(n,t),!0};return a(oe,Se(n.getServices(),{get geometryInstance(){return i.cesiumObject}})),Object.assign(i.proxy,{__updateGeometry:e=>{if(Pe(i,"update:geometry"))s("update:geometry",e);else{i.cesiumObject.geometry=e}return!0}}),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||"v-if"))}}});Jd.install=e=>{e.component(Jd.name,Jd)};const Kd=Jd,ep=Kd;var tp=P({name:"VcGeometryBox",props:{...jt,...kn},emits:ul,setup(e,t){const i=r();i.cesiumClass="BoxGeometry";const n=wo(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ip=P({name:"VcGeometryBoxOutline",props:{...jt},emits:ul,setup(e,t){const i=r();i.cesiumClass="BoxOutlineGeometry";const n=wo(e,t,i);return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var np=P({name:"VcGeometryCircle",props:{...Rn,...Bn,...Ki,...gt,...Ht,...kn,...Vt,...Jt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CircleGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var op=P({name:"VcGeometryCircleOutline",props:{...Rn,...Bn,...Ki,...gt,...Ht,...Vt,...qt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CircleOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var rp=P({name:"VcGeometryPolygonCoplanar",props:{...zn,...Ki,...kn,...Jt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CoplanarPolygonGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var ap=P({name:"VcGeometryPolygonCoplanarOutline",props:{...zn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CoplanarPolygonOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var sp=P({name:"VcGeometryCorridor",props:{...Nt,...Mt,...Ki,...Ht,...gt,...Vt,...kn,...Ft},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CorridorGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var lp=P({name:"VcGeometryCorridorOutline",props:{...Nt,...Mt,...Ki,...Ht,...gt,...Vt,...Ft},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CorridorOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var cp=P({name:"VcGeometryCylinder",props:{...Gt,...$t,...Zt,...Yt,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CylinderGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var up=P({name:"VcGeometryCylinderOutline",props:{...Gt,...$t,...Zt,...Yt,...qt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="CylinderOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var dp=P({name:"VcGeometryEllipse",props:{...Rn,...Xt,...Qt,...Ki,...gt,...Vt,..._t,...Jt,...Ht,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipseGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var pp=P({name:"VcGeometryEllipseOutline",props:{...Rn,...Xt,...Qt,...Ki,...gt,...Vt,..._t,...Jt,...Ht,...qt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipseOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var mp=P({name:"VcGeometryEllipsoid",props:{...Kt,...ei,...ti,...ii,...ni,...oi,...ri,...ai,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipsoidGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var vp=P({name:"VcGeometryEllipsoidOutline",props:{...Kt,...ei,...ti,...ii,...ni,...oi,...ri,...ai,...si},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipsoidOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var hp=P({name:"VcGeometryFrustum",props:{...Nn,...Vn,...ct,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="FrustumGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var gp=P({name:"VcGeometryFrustumOutline",props:{...Nn,...Vn,...ct},emits:ul,setup(e,t){const i=r();return i.cesiumClass="FrustumOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var fp=P({name:"VcGeometryGroundPolyline",props:{...Nt,...Mt,...Ht,...An,...Ri},emits:ul,setup(e,t){const i=r();return i.cesiumClass="GroundPolylineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var yp=P({name:"VcGeometryPlane",props:{...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PlaneGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}}),bp=P({name:"VcGeometryPlaneOutline",emits:ul,setup(e,t){const i=r();return i.cesiumClass="PlaneOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Cp=P({name:"VcGeometryPolygon",props:{...zn,...gt,...Vt,...kn,...Jt,...Ki,...Ht,...Ai,...Di,...ki,...Ri},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolygonGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var wp=P({name:"VcGeometryPolygonOutline",props:{...zn,...gt,...Vt,...kn,...Ki,...Ht,...Ai,...Ri},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolygonOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Op=P({name:"VcGeometryPolyline",props:{...Nt,...Mt,...eo,colorsPerVertex:{type:Boolean,default:!1},...Ri,...Ht,...kn,...Ki},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolylineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var _p=P({name:"VcGeometryPolylineVolume",props:{...Zn,...$n,...Ki,...Ht,...kn,...Ft},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolylineVolumeGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var xp=P({name:"VcGeometryPolylineVolumeOutline",props:{...Zn,...$n,...Ki,...Ht,...Ft},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolylineVolumeOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Sp=P({name:"VcGeometryRectangle",props:{...Qi,...kn,...Ki,...Ht,...gt,..._t,...Jt,...Vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="RectangleGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ep=P({name:"VcGeometryRectangleOutline",props:{...Qi,...Ki,...Ht,...gt,..._t,...Vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="RectangleOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Pp=P({name:"VcGeometrySimplePolyline",props:{...Nt,...eo,colorsPerVertex:{type:Boolean,default:!1},...Ri,...Ht,...Ki},emits:ul,setup(e,t){const i=r();return i.cesiumClass="SimplePolylineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Tp=P({name:"VcGeometrySphere",props:{...Bn,...ri,...ai,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="SphereGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Ip=P({name:"VcGeometrySphereOutline",props:{...Bn,...ri,...ai,...si},emits:ul,setup(e,t){const i=r();return i.cesiumClass="SphereOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Mp=P({name:"VcGeometryWall",props:{...Nt,...Ht,...Ui,...Hi,...Ki,...kn},emits:ul,setup(e,t){const i=r();return i.cesiumClass="WallGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var jp=P({name:"VcGeometryWallOutline",props:{...Nt,...Ht,...Ui,...Hi,...Ki},emits:ul,setup(e,t){const i=r();return i.cesiumClass="WallOutlineGeometry",wo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[tp,ip,np,op,rp,ap,sp,lp,cp,up,dp,pp,mp,vp,hp,gp,fp,yp,bp,Cp,wp,Op,_p,xp,Sp,Ep,Pp,Tp,Ip,Mp,jp].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Lp=tp,Ap=ip,Dp=np,kp=op,Rp=rp,Bp=ap,Np=sp,Vp=lp,zp=cp,Fp=up,Hp=dp,Up=pp,Wp=mp,Gp=vp,$p=hp,Zp=gp,qp=fp,Yp=yp,Xp=bp,Qp=Cp,Jp=wp,Kp=Op,em=_p,tm=xp,im=Sp,nm=Ep,om=Pp,rm=Tp,am=Ip,sm=Mp,lm=jp,cm={color:"#409eff",pixelSize:8,outlineColor:"rgba(0,0,0,0.6)",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},um={enableMouseEvent:!1,asynchronous:!1,allowPicking:!0},dm={width:2,show:!0},pm={pixelOffset:[20,0],showBackground:!0,backgroundColor:"rgba(0,0,0,1)",enableMouseEvent:!1};var mm=P({name:"VcOverlayTyphoon",props:{typhoonRoutes:{type:Array},clampToGround:{type:Boolean,default:!1},radius7Color:{type:String,default:"rgba(68, 255, 230, 0.3)"},radius10Color:{type:String,default:"rgba(32, 237, 39, 0.3)"},radius12Color:{type:String,default:"rgba(255, 247, 16, 0.3)"},pointProps:{type:[Object,Function],default:()=>cm},linePrimitiveProps:{type:[Object,Function],default:()=>um},lineGeometryProps:{type:[Object,Function],default:()=>dm},labelProps:{type:[Object,Function],default:()=>pm},circleOverlayPosition:{type:[String,Function],default:"-175px"},setsArray:{type:Array,default:()=>["中央台","日本","美国","韩国","中国香港"]}},emits:{...ul,mouseover:e=>!0,mouseout:e=>!0,click:e=>!0,clickout:e=>!0,forecastRouteAdded:e=>!0},setup(e,t){const i=r();i.cesiumClass="VcOverlayTyphoon",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:a}=n,s=Oe(i),{t:l}=mo(),c=o(null),u=O([]);i.createCesiumObject=async()=>c;const d=(i,n)=>{n.playIndex=i;const o=n.typhoonRoute.points[i];o.type="live",o.index=i,o.tfbh=n.name;const r=[o.lng,o.lat];n.positions.push(r);const a="function"==typeof e.pointProps?ve(X(cm),e.pointProps(o)):e.pointProps;n.points.push({id:o.id||Cesium.createGuid(),position:r,onMouseover(e){t.emit("mouseover",e)},onMouseout(e){t.emit("mouseout",e)},onClick(e){m(o,n,i,!0),n.playIndex=o.index,t.emit("click",e)},onClickout(e){t.emit("clickout",e)},...a,...o});const s=n.points[i];s&&n.colors.push(s.color),i===n.typhoonRoute.points.length-1&&m(o,n,i)},p=e=>{const t=u.findIndex((t=>t.name===e));if(t>=0){let e=0;const i=u[t];i.points.length=0,i.positions.length=0;const n=i.typhoonRoute;d(e,i),cancelAnimationFrame(i.playInterval);const o=()=>{e++,e>=n.points.length?cancelAnimationFrame(i.playInterval):d(e,i),i.playInterval=requestAnimationFrame(o)};i.playInterval=requestAnimationFrame(o)}else s.warn(l("vc.typhoon.warn")||"播放台风失败，原因：未找到对应编号的台风数据。")},m=(i,n,o,r=!1)=>{n.children.length=0;let a=r&&i.forecast||[];if(!r)for(let t=0;t<e.setsArray.length;t++){const s=(i,o)=>{const l=(null==i?void 0:i.forecast)||[];if(a.push(...l),r)return;a=ee(a,((e,t)=>e.sets===t.sets));const c=e.setsArray[t],u=a.findIndex((e=>e.sets===c));if(u>-1)a[u].unshifted||(a[u].points.unshift({lat:i.lat,lng:i.lng}),a[u].unshifted=!0);else if(o>0){const e=n.typhoonRoute.points[o-1];s(e,o-1)}};s(i,o)}if(a&&!(a.length<=0)){for(let o=0;o<a.length;o++){const s=a[o],l=[],c=[],u={name:n.name+"_"+s.sets,typhoonRoute:s,show:!0,positions:c,points:l,type:"forc"};n.children.push(u),s.points.forEach(((n,o)=>{const a=[n.lng,n.lat];u.positions.push(a),0===o&&r&&u.positions.unshift([i.lng,i.lat]),n.sets=s.sets,n.type="forc",n.index=o;const l="function"==typeof e.pointProps?e.pointProps(n):e.pointProps;0!==o&&u.points.push({id:n.id||Cesium.createGuid(),position:a,onMouseover(e){t.emit("mouseover",e)},onMouseout(e){t.emit("mouseout",e)},onClick(e){t.emit("click",e)},...l,...n})}))}t.emit("forecastRouteAdded",{livePoint:i,datasource:n,addedByClick:r})}},v=e=>{const t={name:e.tfbh,typhoonRoute:e,show:!0,positions:[],points:[],children:[],colors:[],type:"live"};return u.push(t),p(e.tfbh),t},h=(e,t)=>{let i=[];if("number"==typeof t)i=N(e,1e3*t,{units:"meters"}).geometry.coordinates;else if(t.ne){const n=6,o=360/(4*n),r={0:"ne",1:"nw",2:"sw",3:"se"};for(let a=0;a<4;a++){let s=1e3*parseFloat(t[r[a]]);s||(s=0);for(let t=a*o;t<=(a+1)*o;t++){const o=n*t,r=e[0]+s*Math.cos(o*Math.PI/180)/111e3,a=e[1]+s*Math.sin(o*Math.PI/180)/111e3;i.push([r,a])}}}return i},g=(i,n)=>{const o=[];return i.forEach((i=>{if(i.positions.length>1){const n="function"==typeof e.linePrimitiveProps?ve(X(um),e.linePrimitiveProps(i)):e.linePrimitiveProps,r="function"==typeof e.lineGeometryProps?ve(X(dm),e.lineGeometryProps(i)):e.lineGeometryProps;o.push(S(rd,{show:i.show,appearance:{type:"live"===i.type?"PolylineColorAppearance":"PolylineMaterialAppearance",options:{material:"live"===i.type?void 0:{fabric:{type:"PolylineDash",uniforms:{color:"#000000"}}},translucent:!0}},onMouseover:e=>{t.emit("mouseover",e)},onMouseout:e=>{t.emit("mouseout",e)},onClick:e=>{t.emit("click",e)},onClickout:e=>{t.emit("clickout",e)},...n},(()=>S(ep,{id:i.name||Cesium.createGuid()},(()=>S(Kp,{positions:Re(i.positions),colors:i.colors,...r}))))))}if(i.points.length&&o.push(S(Ud,{show:i.show,points:i.points,onReady:e=>{const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}}})),"live"===i.type){const t="function"==typeof e.labelProps?ve(X(pm),e.labelProps(i)):e.labelProps;o.push(S(Hd,{show:i.show,enableMouseEvent:!1,labels:[{text:i.typhoonRoute.name,position:i.positions[0],...t}]}));const r=i.points[i.playIndex];n.length=n.push(S(Du,{show:i.show,position:r.position,autoHidden:!0},(()=>S("div",{class:"vc-typhoon-circle",style:{backgroundPosition:"function"==typeof e.circleOverlayPosition?e.circleOverlayPosition(r):e.circleOverlayPosition}})))),(null==r?void 0:r.radius7)>0&&o.push(S(Qd,{show:i.show,positions:h(r.position,r.radius7_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius7Color}}}}},onReady:f})),(null==r?void 0:r.radius10)>0&&o.push(S(Qd,{show:i.show,positions:h(r.position,r.radius10_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius10Color}}}}},onReady:f})),(null==r?void 0:r.radius12)>0&&o.push(S(Qd,{show:i.show,positions:h(r.position,r.radius12_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius12Color}}}}},onReady:f}))}i.children&&o.push(...g(i.children,n))})),o},f=e=>{const t=e.cesiumObject,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[i].pass=Cesium.Pass.OPAQUE,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}};return Object.assign(i.proxy,{addTyphoonRoute:v,playTyphoonRoute:p,flyToTyphoonRoute:(e,t)=>{const i=[];"string"==typeof e?i.push(e):i.push(...e);let n=null;i.forEach((e=>{var t;const i=[],o=u.find((t=>t.name===e));o&&o.typhoonRoute.points&&o.typhoonRoute.points.forEach((e=>{i.push([e.lng,e.lat])})),(null==(t=null==o?void 0:o.children)?void 0:t.length)&&o.children.forEach((e=>{e.typhoonRoute.points.forEach((e=>{i.push([e.lng,e.lat])}))}));const r=Re(i),a=Cesium.BoundingSphere.fromPoints(r);n=null===n?a:Cesium.BoundingSphere.union(n,a)})),a.viewer.camera.flyToBoundingSphere(new Cesium.BoundingSphere(n.center,n.radius),{...t})},showForecast:m,removeTyphoonData:e=>{const t=u.indexOf(e);t>=0&&(clearInterval(e.playInterval),u.splice(t,1))},removeAllTyphoonData:()=>{u.forEach((e=>{clearInterval(e.playInterval)})),u.length=0},getTyphoonDatasources:()=>u}),e.typhoonRoutes.forEach((e=>{v(e)})),()=>{const e=[],t=g(u,e);return[S(Gd,{ref:c,show:!0},(()=>t)),...e]}}});[Du,vd,hd,Ed,Pd,mm].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const vm=Du,hm=vd,gm=hd,fm=Ed,ym=Pd,bm=mm;function Cm(e,t,i,n,r){i.cesiumClass=n,i.cesiumEvents=[];const{t:a}=mo(),{emit:l}=t,c=le(n).split("-");"VcMeasurementDistance"===n&&e.showComponentLines&&(c[2]="component-distance"),"VcDrawingRegular"!==n&&"VcMeasurementRegular"!==n||(4===e.edge&&(c[2]="rectangle"),360===e.edge&&(c[2]="circle"));let u=c[2];c[3]&&(u=`${c[2]}-${c[3]}`);const d=o(""),p=s((()=>({drawingTipStart:e.drawtip.drawingTipStart||a(`${c[0]}.${c[1]}.${c[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||a(`${c[0]}.${c[1]}.${c[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||a(`${c[0]}.${c[1]}.${c[2]}.drawingTipEditing`)}))),m=o(yr.BeforeDraw),v=o(!1),h=o([0,0,0]),g=o(!1),f=o([0,0,0]),y=o(null),b=o(null),C=o(null),w=o(""),{registerTimeout:O,removeTimeout:_}=fo();i.createCesiumObject=async()=>C;return{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:h,showEditor:g,editorPosition:f,mouseoverPoint:y,editingPoint:b,primitiveCollectionRef:C,editorType:w,onMouseoverPoints:t=>{var i,n;const{drawingHandlerActive:o,viewer:a}=r;e.editable&&m.value!==yr.Drawing&&o&&(t.pickedFeature.primitive.pixelSize=1.5*(null==(i=e.pointOpts)?void 0:i.pixelSize),_(),O((()=>{y.value=t.pickedFeature.primitive,f.value=t.pickedFeature.primitive.position,g.value=!0,v.value=!1,h.value=[0,0,0]}),null==(n=e.editorOpts)?void 0:n.delay)),l("mouseEvt",{type:t.type,name:u,target:t},a)},onMouseoutPoints:t=>{var i,n;const{viewer:o,selectedDrawingActionInstance:a}=r;e.editable&&(t.pickedFeature.primitive.pixelSize=1*(null==(i=e.pointOpts)?void 0:i.pixelSize),_(),O((()=>{f.value=[0,0,0],y.value=void 0,g.value=!1}),null==(n=e.editorOpts)?void 0:n.hideDelay),a&&(v.value=!0)),l("mouseEvt",{type:t.type,name:u,target:t},o)},onMouseenterEditor:e=>{_()},onMouseleaveEditor:t=>{var i;_(),O((()=>{var t;f.value=[0,0,0],y.value.pixelSize=1*(null==(t=e.pointOpts)?void 0:t.pixelSize),y.value=void 0,g.value=!1}),null==(i=e.editorOpts)?void 0:i.hideDelay)},onPrimitiveCollectionReady:e=>{e.cesiumObject._vcId=n},onVcCollectionPointReady:function(e){const{cesiumObject:t}=e,i=t.update;t.update=function(e){const t=e.commandList.length;i.call(this,e);const n=e.commandList.length;for(let i=t;i<n;++i)e.commandList[i].pass=Cesium.Pass.TRANSLUCENT,e.commandList[i].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass===Cesium.Pass.TRANSLUCENT&&(e.commandList[n].pass=Cesium.Pass.OPAQUE,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:t=>{if(e.disableDepthTest)return;const i=t.cesiumObject,n=i.update;i.update=function(e){const t=e.commandList.length;n.call(this,e);const i=e.commandList.length;for(let n=t;n<i;++n)e.commandList[n].pass=Cesium.Pass.OVERLAY,e.commandList[n].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function wm(e,t,i){const n=r(),a=bo(e,t,n);if(void 0===a)return;const{t:l}=mo(),c=a.$services,{emit:u}=t,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:b,editingPoint:C,primitiveCollectionRef:w,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=Cm(e,t,n,i,c),D=o([]);let k;e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((e=>{const t={positions:Re(e),show:!0,drawStatus:yr.AfterDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(t,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),D.value.push(t)}));const R=s((()=>{const t=[],{Cartesian3:n,Cartographic:o,Rectangle:r,createGuid:a,defined:s,Math:l,Ray:u}=Cesium,{viewer:d}=c;return D.value.forEach((u=>{var p,m,v,h,g,f,y,b,C,_,x,S,E,P,T,I,M,j,L;const A=u.positions[0],D=u.positions[1];if(n.equals(A,D))return;const k=O([]),R=0===(null==(p=e.polylineOpts)?void 0:p.arcType)?n.distance(A,D):Xe(A,D,c.viewer.scene.globe.ellipsoid),N=n.midpoint(A,D,{}),V=it(A,D),z=nt(A,D);u.points=u.positions.map((e=>({position:e})));const F={...u,distance:R,heading:V,pitch:z},U=Object.assign({},e.labelOpts,F.labelOpts);if("VcDrawingRectangle"===i||"VcMeasurementRectangle"===i){const t=o.fromCartesian(A,d.scene.globe.ellipsoid),i=o.fromCartesian(D,d.scene.globe.ellipsoid),a=t.height;!e.clampToGround&&(i.height=a);const s=r.fromCartesianArray(u.positions,d.scene.globe.ellipsoid),l=[s.west,s.north,a,s.east,s.north,a,s.east,s.south,a,s.west,s.south,a,s.west,s.north,a],c=n.fromRadiansArrayHeights(l,d.scene.globe.ellipsoid);Object.assign(F,{polygonPositions:c,height:a})}else if("VcDrawingRegular"===i||"VcMeasurementRegular"===i){const t=u.positions[0],i=u.positions[1],n=function(e,t,i,n){const{Cartesian3:o}=Cesium;if(o.equals(e,t))return;const r=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),a=Cesium.Cartesian3.normalize(r,new Cesium.Cartesian3),s=Cesium.Transforms.rotationMatrixFromPositionVelocity(e,a,i.globe.ellipsoid),l=Cesium.Matrix4.fromRotationTranslation(s,e),c=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Matrix4.getTranslation(l,new Cesium.Cartesian3),Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),u=Cesium.Matrix4.multiply(Cesium.Matrix4.inverse(c,new Cesium.Matrix4),l,new Cesium.Matrix4),d=Cesium.Matrix4.getMatrix3(u,new Cesium.Matrix3),p=Cesium.Quaternion.fromRotationMatrix(d);return Cesium.HeadingPitchRoll.fromQuaternion(p)}(t,i,d.scene);if(!H(n)&&s(n)){const r=[],a=o.fromCartesian(t,d.scene.globe.ellipsoid),s=o.fromCartesian(i,d.scene.globe.ellipsoid);!e.clampToGround&&(s.height=a.height),r.push(o.toCartesian(s,d.scene.globe.ellipsoid));for(let i=0;i<(e.edge||4)-1;i++){const i=Qe(t,n.heading+=2*Math.PI/(e.edge||4),R,d.scene.globe.ellipsoid);r.push(i)}Object.assign(F,{polygonPositions:r,height:a.height})}}else if("VcAnalysisViewshed"===i)Object.assign(F.viewshedOpts,{startPosition:A,endPosition:D});else if("VcAnalysisSightline"===i)if("segment"===e.sightlineType){const e=[];e.push(A);const t=[];w.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&t.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&t.push(e)}));const i=ot(A,D,c.viewer,t);s(i)&&e.push(i),e.push(D);let o=0;for(let r=0;r<e.length-1;r++){o+=n.distance(e[r],e[r+1])}Object.assign(F,{positions:e,distance:o})}else e.sightlineType;else k.push({position:N,id:a(),text:xr.distanceToString(R,null==(m=e.measureUnits)?void 0:m.distanceUnits,e.locale,null==(v=e.decimals)?void 0:v.distance),...U});if(F.polygonPositions&&F.polygonPositions.length){const t=Object.assign({},e.labelsOpts,F.labelsOpts),i=F.polygonPositions.slice();e.loop&&i.length>2&&i.push(i[0]);for(let r=0;r<i.length-1;r++){let o=0;if(o=0===(null==(h=e.polylineOpts)?void 0:h.arcType)?Xe(i[r],i[r+1],c.viewer.scene.globe.ellipsoid):n.distance(i[r],i[r+1]),o>0&&i.length>2&&e.showDistanceLabel&&k.push({text:xr.distanceToString(o,null==(g=e.measureUnits)?void 0:g.distanceUnits,e.locale,null==(f=e.decimals)?void 0:f.distance),position:n.midpoint(i[r],i[r+1],{}),id:a(),...t}),i.length>2&&e.showAngleLabel&&(r>0||e.loop)){const o=i[0===r?i.length-2:r-1],s=i[r],l=i[r+1],c=n.subtract(o,s,{}),u=n.subtract(l,s,{});let d=0;n.ZERO.equals(c)||n.ZERO.equals(u)||(d=n.angleBetween(c,u)),k.push({text:xr.angleToString(d,null==(y=e.measureUnits)?void 0:y.angleUnits,e.locale,null==(b=e.decimals)?void 0:b.angle),position:s,id:a(),...t})}}const o=Je(i);e.showLabel&&k.push({text:xr.areaToString(o,null==(C=e.measureUnits)?void 0:C.areaUnits,e.locale,null==(_=e.decimals)?void 0:_.area),position:u.positions[0],id:a(),...U})}e.showComponentLines&&(Object.assign(F,{xyPolylinePositions:[new n,new n,new n],xyBoxPositions:[new n,new n,new n],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),B(F),k.push({position:F.xLabelPosition,id:a(),text:xr.distanceToString(F.xDistance||0,null==(x=e.measureUnits)?void 0:x.distanceUnits,e.locale,null==(S=e.decimals)?void 0:S.distance),...e.xLabelOpts}),k.push({position:F.yLabelPosition,id:a(),text:xr.distanceToString(F.yDistance||0,null==(E=e.measureUnits)?void 0:E.distanceUnits,e.locale,null==(P=e.decimals)?void 0:P.distance),...e.yLabelOpts}),k.push({position:F.xAnglePosition,id:a(),text:xr.angleToString(F.xAngle||0,null==(T=e.measureUnits)?void 0:T.angleUnits,e.locale,null==(I=e.decimals)?void 0:I.angle),...e.xAngleLabelOpts}),k.push({position:F.yAnglePosition,id:a(),text:xr.angleToString(F.yAngle||0,null==(M=e.measureUnits)?void 0:M.angleUnits,e.locale,null==(j=e.decimals)?void 0:j.angle),...e.yAngleLabelOpts})),Object.assign(F,{labels:k}),F.positionsDegreesArray=F.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]})),(null==(L=null==F?void 0:F.polygonPositions)?void 0:L.length)&&(F.polygonPositionsDegreesArray=F.polygonPositions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,d.scene.globe.ellipsoid);return[l.toDegrees(t.longitude),l.toDegrees(t.latitude),t.height]}))),t.push(F)})),t}));n.createCesiumObject=async()=>w,n.mount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.addEventListener(V),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.addEventListener(N)),!0},n.unmount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&("VcMeasurementDistance"===i&&t.scene.preRender.removeEventListener(V),("VcMeasurementRegular"===i||"VcMeasurementRectangle"===i||"VcDrawingRegular"===i||"VcDrawingRectangle"===i)&&t.scene.preRender.removeEventListener(N)),!0};const B=e=>{const{Cartesian3:t,Math:i,defined:n}=Cesium,{viewer:o}=c,r=o.scene.frameState.mapProjection.ellipsoid,a=e.positions[0],s=e.positions[1],l=r.cartesianToCartographic(a,{});if(!n(l))return;const u=r.cartesianToCartographic(s,{}),d=l.height,p=u.height;let m,v,h,g;d<p?(m=a,v=s,g=p,h=d):(m=s,v=a,g=d,h=p);const f=e.xyPolylinePositions;if(void 0===f)return;f[0]=m,f[2]=v;let y=r.geodeticSurfaceNormal(m,{});y=t.multiplyByScalar(y,g-h,y);const b=t.add(m,y,f[1]);if(!t.equalsEpsilon(b,v,i.EPSILON10)||!t.equalsEpsilon(b,m,i.EPSILON10)){let i=t.subtract(v,b,{}),n=t.subtract(m,b,{});const o=Math.min(t.magnitude(i),t.magnitude(n)),r=15<o?.15*o:.25*o;i=t.normalize(i,i),n=t.normalize(n,n),i=t.multiplyByScalar(i,r,i),n=t.multiplyByScalar(n,r,n);const a=e.xyBoxPositions;if(void 0===a)return;t.add(b,i,a[0]),t.add(a[0],n,a[1]),t.add(b,n,a[2]),e.xLabelPosition=t.midpoint(b,v,{}),e.yLabelPosition=t.midpoint(m,b,{}),e.xAnglePosition=v,e.yAnglePosition=m;const s=t.subtract(b,v,{}),l=t.subtract(b,m,{});let c=t.subtract(v,m,{});e.yAngle=t.angleBetween(l,c),c=t.negate(c,c),e.xAngle=t.angleBetween(s,c),e.xDistance=t.magnitude(s),e.yDistance=t.magnitude(l)}},N=()=>{R.value.forEach(((e,t)=>{var i;const n=e.polygonPositions;if(!(n.length<2)){const{defined:o,SceneTransforms:r,Cartesian2:a,HorizontalOrigin:s}=Cesium,{viewer:l}=c,u=l.scene;let d=e.positions[0];const p=r.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?a.clone(p,{}):a.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=w.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];if(!g)return;for(let t=1;t<n.length;t++){const i=r.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x),o=h[t-1];o&&o!==g&&(o.horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=a.clone(i,m)}e.drawStatus===yr.AfterDraw&&(g.position=d)}}}))},V=()=>{R.value.forEach(((t,i)=>{var n,o,r;const{defined:a,SceneTransforms:s,HorizontalOrigin:l}=Cesium,{viewer:u}=c,d=u.scene,p=null==(n=w.value)?void 0:n.cesiumObject,m=t.positions,v=m[0],h=m[1],g=s.wgs84ToWindowCoordinates(d,v,{}),f=s.wgs84ToWindowCoordinates(d,h,{});if(a(g)&&a(f)){const t=p._primitives.filter((e=>e instanceof Cesium.LabelCollection));if(t.length){const n=t[i].get(0);let a,s,c,u;e.showComponentLines&&(a=t[i].get(2),s=t[i].get(3),c=De(null==(o=e.yLabelOpts)?void 0:o.pixelOffset),u=De(null==(r=e.xAngleLabelOpts)?void 0:r.pixelOffset)),(g.y-f.y)/(f.x-g.x)>0?(H(a)||H(c)||(c.x=-9,a.pixelOffset=c,a.horizontalOrigin=l.RIGHT),H(s)||H(u)||(u.x=12,s.pixelOffset=u,s.horizontalOrigin=l.LEFT),n.horizontalOrigin=l.LEFT):(H(a)||H(c)||(c.x=9,a.pixelOffset=c,a.horizontalOrigin=l.LEFT),H(s)||H(u)||(u.x=-12,s.pixelOffset=u,s.horizontalOrigin=l.RIGHT),n.horizontalOrigin=l.RIGHT)}}}))},z=(e,t)=>{const{defined:i,defaultValue:n,Cartesian3:o}=Cesium,{viewer:r}=c,a=r.scene,s=e.positions;s[0]=t;const l=a.frameState.mapProjection.ellipsoid,u=l.cartesianToCartographic(t,{}),d=a.globe;u.height=i(d)?n(d.getHeight(u),0):0,s[1]=l.cartographicToCartesian(u,{}),e.distance=o.distance(s[0],s[1]),e.labelPosition=o.midpoint(s[0],s[1],{})},F=()=>{const{Cartesian3:e,Plane:t}=Cesium,n={positions:[new e,new e],show:!1,drawStatus:yr.BeforeDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};"VcMeasurementVertical"===i&&Object.assign(n,{draggingPlane:new t(e.UNIT_X,0),surfaceNormal:new e}),D.value.push(n),v.value=yr.BeforeDraw,h.value=!0,p.value=m.value.drawingTipStart},U=(e=!0)=>{e&&v.value===yr.Drawing&&D.value.pop();const t=C.value?C.value._vcPolylineIndx:D.value.length-1,i=D.value[t];i&&(i.drawStatus=yr.AfterDraw),v.value=yr.AfterDraw,h.value=!1,g.value=[0,0,0]},W=t=>{var i,n,o;if(y.value=[0,0,0],f.value=!1,!e.editable)return;_.value=t;const{viewer:r,drawingFabInstance:a}=c;if("move"===t){p.value=m.value.drawingTipEditing,v.value=yr.Drawing,C.value=b.value,k=D.value[C.value._vcPolylineIndx].positions[C.value._index],h.value=!0;(null==a?void 0:a.proxy).editingActionName=d}else if("remove"===t){const e=b.value._vcPolylineIndx;D.value[e].positions.splice(b.value._index,1)}else if("removeAll"===t){const e=b.value._vcPolylineIndx;D.value.splice(e,1)}else{const r=b.value._vcPolylineIndx,a=D.value[r];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,r,a)}u("editorEvt",{type:t,renderDatas:D,name:d,index:b.value._vcPolylineIndx,pointIndex:b.value._index,point:b.value},r)},G={computedRenderDatas:R,renderDatas:D,startNew:F,stop:U,clear:()=>{D.value=[],U()},handleMouseClick:(t,n)=>{var o;const{viewer:r,drawingFabInstance:a,selectedDrawingActionInstance:s,getWorldPosition:l}=c,f=null==a?void 0:a.proxy;if(2===n.button&&n.ctrl){const e=f.getDrawingActionInstance(d);return f.toggleAction(e),void x((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:t,type:"cancel"},r)}))}v.value===yr.AfterDraw&&F();const y=C.value?C.value._vcPolylineIndx:D.value.length-1,b=D.value[y],w=b.positions,O=C.value?C.value._index:b.positions.length-1;if(2===n.button&&C.value)return f.editingActionName=void 0,b.positions[C.value._index]=k,v.value=yr.AfterDraw,b.drawStatus=yr.AfterDraw,C.value=void 0,p.value=m.value.drawingTipStart,"VcMeasurementHeight"===i&&z(b,k),void x((()=>{u("drawEvt",Object.assign({name:d,index:y,pointIndex:O,renderDatas:D,finished:!0,windowPoistion:t,type:"cancel"},R.value[y]),r)}));if(0!==n.button)return;const{defined:S}=Cesium;let E,P="new",T=!1;const I=r.scene;if(v.value===yr.BeforeDraw){const n=l(I,t,{});if(!S(n))return;if(w[0]=n,w[1]=n,b.show=!0,v.value=yr.Drawing,b.drawStatus=yr.Drawing,p.value=m.value.drawingTipEnd,E=n,T=!1,"VcMeasurementVertical"===i){const e=I.frameState.mapProjection.ellipsoid;b.surfaceNormal=e.geodeticSurfaceNormal(n,b.surfaceNormal)}"VcMeasurementHeight"===i&&(z(b,n),T=!0,b.drawStatus=yr.AfterDraw,v.value=yr.AfterDraw,p.value=m.value.drawingTipStart,1===e.mode&&f.toggleAction(s)),"VcAnalysisViewshed"===i&&(b.viewshedOpts={...e.viewshedOpts})}else{if(b.drawStatus=yr.AfterDraw,v.value=yr.AfterDraw,C.value){if(!0===Fo().hasTouch){const i=l(I,t,{});if(S(i)){b.positions.splice(C.value._index,1,i),C.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}C.value=void 0,f.editingActionName=void 0,h.value=!1,g.value=[0,0,0],P=_.value,s&&(p.value=m.value.drawingTipStart,h.value=!0)}else{if("VcMeasurementVertical"!==i&&!0===Fo().hasTouch){const e=l(I,t,{});if(S(e)){b.positions[1]=e}}1===e.mode&&f.toggleAction(s)}T=!0,E=b.positions[1]}x((()=>{u("drawEvt",Object.assign({index:y,pointIndex:O,renderDatas:D,name:d,finished:T,position:E,windowPoistion:t,type:P},R.value[y]),r)}))},handleMouseMove:t=>{const{viewer:n,getWorldPosition:o}=c,r=n.scene,a=o(r,t,{}),{defined:s,Cartographic:l}=Cesium;if(!s(a))return;if(g.value=a,v.value!==yr.Drawing)return;if("VcMeasurementVertical"===i&&r.mode===Cesium.SceneMode.SCENE2D)return;const p=C.value?C.value._vcPolylineIndx:D.value.length-1,m=D.value[p],h=C.value?C.value._index:m.positions.length-1;if("VcMeasurementVertical"===i){const e=((e,t)=>{const{defined:i,SceneMode:n,Cartesian3:o,IntersectionTests:r,Plane:a,SceneTransforms:s,Ray:l}=Cesium,{viewer:u}=c,d=u.scene,p=d.camera,m=p.direction,v=d.frameState.mapProjection.ellipsoid,h=e.positions,g=h[0];let f=g,y=h[1],b=e.draggingPlane,C=e.surfaceNormal,w=C;if(d.mode===n.COLUMBUS_VIEW){w=o.UNIT_X;const e=v.cartesianToCartographic(g,{});f=d.mapProjection.project(e,{}),o.fromElements(f.z,f.x,f.y,f)}let O=o.cross(w,m,{});O=o.cross(w,O,O),O=o.normalize(O,O),b=a.fromPointNormal(f,O,b);const _=p.getPickRay(t,new l);if(y=r.rayPlane(_,b,{}),i(y)){if(d.mode===n.COLUMBUS_VIEW){y=o.fromElements(y.y,y.z,y.x,y);const e=d.mapProjection.unproject(y,{});y=v.cartographicToCartesian(e,y)}s.wgs84ToWindowCoordinates(d,h[0],{}).y<t.y&&(C=o.negate(C,{}));let e=o.subtract(y,g,{});return e=o.projectVector(e,C,e),y=o.add(g,e,y),y}})(m,t);if(!H(e)){const t=m.positions.slice();t[C.value?C.value._index:1]=e,m.positions=t}}else if("VcMeasurementHeight"===i)z(m,a);else if("VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i){const t=m.positions,i=t[0],o=l.fromCartesian(i,n.scene.globe.ellipsoid),r=l.fromCartesian(a,n.scene.globe.ellipsoid);!e.clampToGround&&(r.height=o.height),t[C.value?C.value._index:1]=l.toCartesian(r,n.scene.globe.ellipsoid)}else if("VcAnalysisSightline"===i){const e=m.positions;if(C.value){e[C.value._index>0?1:0]=a}else e[1]=a}else{const e=m.positions.slice();e[C.value?C.value._index:1]=a,m.positions=e}x((()=>{u("drawEvt",Object.assign({index:p,pointIndex:h,renderDatas:D,name:d,finished:!1,position:m.positions[1],windowPoistion:t,type:C.value?_:"new"},R.value[p]),n)}))}};return Object.assign(n.proxy,G),()=>{var t,n,o;const{createGuid:r}=Cesium,a=[];if(R.value.forEach(((t,n)=>{var o;const s="VcDrawingRectangle"===i||"VcDrawingRegular"===i||"VcMeasurementRegular"===i||"VcMeasurementRectangle"===i,l=s?null==(o=t.polygonPositions)?void 0:o.slice():t.positions;s&&(null==l||l.push(l[0]));const c=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete c.arcType;const u=Object.assign({},e.primitiveOpts,t.primitiveOpts);if((null==l?void 0:l.length)&&(null==l?void 0:l.length)>1&&(a.push(S(e.clampToGround?nd:rd,{...u,show:t.show&&u.show||e.editable||t.drawStatus===yr.Drawing,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>S(ep,{id:r()},(()=>S(e.clampToGround?qp:Kp,{positions:l,...c})))))),"VcAnalysisViewshed"===i&&a.push(S(cd,{...t.viewshedOpts}))),t.polygonPositions&&t.polygonPositions.length>2){const i=Object.assign({},null==e?void 0:e.polygonOpts,null==t?void 0:t.polygonOpts);i.clampToGround=e.clampToGround,a.push(S(Qd,{positions:l,show:t.show&&(null==i?void 0:i.show),...i,onReady:e=>{var t;A(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}t.xyPolylinePositions&&t.xyPolylinePositions.length>1&&a.push(S(rd,{show:t.show&&u||e.editable||t.drawStatus===yr.Drawing,...u,onReady:e=>{var t;null==(t=null==u?void 0:u.onReady)||t.call(u,e),e.cesiumObject._vcPolylineIndex=n}},(()=>S(ep,{id:r()},(()=>S(Kp,{positions:t.xyPolylinePositions,...c})))))),t.xyBoxPositions&&t.xyBoxPositions.length>1&&a.push(S(rd,{show:t.show&&u||e.editable||t.drawStatus===yr.Drawing,...u},(()=>S(ep,{id:r()},(()=>S(Kp,{positions:t.xyBoxPositions,...c}))))));const d=Object.assign({},e.pointOpts,t.pointOpts);a.push(S(Ud,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((o,a)=>{const s=o.position,l=Object.assign({},d,o);return{position:s,id:r(),_vcPolylineIndx:n,...l,show:((null==l?void 0:l.show)||e.editable||t.drawStatus===yr.Drawing)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==a)}})),onMouseover:E,onMouseout:P,onReady:j})),a.push(S(Hd,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:L}))})),(null==(t=e.drawtip)?void 0:t.show)&&h.value){const{viewer:t}=c;a.push(S(vm,{position:g.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>S("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(b.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(S(Ws,{style:{color:i[e].color,background:i[e].background},...n,onclick:W.bind(void 0,e)},(()=>S(ol,{...i[e].tooltip},(()=>{var t;return S("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||l(`vc.measurement.editor.${e}`))})))))}}const{viewer:i}=c;a.push(S(vm,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>S("div",{class:"vc-editor"},t))))}return S(Gd,{ref:w,show:e.show,onReady:M},(()=>a))}}var Om=P({name:"VcMeasurementDistance",props:{...su,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcMeasurementDistance")});function _m(e,t,i){const n=r(),a=bo(e,t,n);if(void 0===a)return;const{t:l}=mo(),c=a.$services,{emit:u}=t,{drawingType:d,drawTip:p,drawTipOpts:m,drawStatus:v,canShowDrawTip:h,drawTipPosition:g,showEditor:f,editorPosition:y,mouseoverPoint:b,editingPoint:C,primitiveCollectionRef:w,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:j,onVcCollectionLabelReady:L,onVcPrimitiveReady:A}=Cm(e,t,n,i,c);let D,k;const R=o([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach((t=>{const i={show:!0,positions:Re(t),tempPositions:[],drawStatus:yr.AfterDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};R.value.push(i)}));const B=s((()=>{const{Cartesian3:t,createGuid:n,defined:o,Math:r}=Cesium,a=[],{viewer:s}=c;return R.value.forEach(((l,u)=>{var d,p,m,v,h,g,f,y,b;const C=O([]),_=[],x=[];let S=0;const E=[];l.points=l.positions.map((e=>({position:e})));const P=l.positions.slice();if("VcAnalysisSightline"===i){const e=P.shift();e&&P.forEach((i=>{const n=[];n.push(e);const r=[];w.value.cesiumObject._primitives.forEach((e=>{e instanceof Cesium.PointPrimitiveCollection&&r.push(...e._pointPrimitives),e instanceof Cesium.Primitive&&r.push(e)}));const s=ot(e,i,c.viewer,r);o(s)&&n.push(s),n.push(i);let u=0;const d=[];for(let e=0;e<n.length-1;e++){const i=t.distance(n[e],n[e+1]);d.push(i),u+=i}a.push({...l,positions:n,distance:u,distances:d})}))}else{e.loop&&P.length>2&&P.push(P[0]);for(let i=0;i<P.length-1;i++){let o=0;o=0===(null==(d=e.polylineOpts)?void 0:d.arcType)?Xe(P[i],P[i+1],c.viewer.scene.globe.ellipsoid):t.distance(P[i],P[i+1]),_.push(o),S+=o;const r=Object.assign({},e.labelsOpts,l.labelsOpts);if(o>0&&P.length>2&&e.showDistanceLabel&&C.push({text:xr.distanceToString(o,null==(p=e.measureUnits)?void 0:p.distanceUnits,e.locale,null==(m=e.decimals)?void 0:m.distance),position:t.midpoint(P[i],P[i+1],{}),id:n(),...r}),P.length>2&&e.showAngleLabel&&(i>0||e.loop)){const o=P[0===i?P.length-2:i-1],a=P[i],s=P[i+1],l=t.subtract(o,a,{}),c=t.subtract(s,a,{});let u=0;t.ZERO.equals(l)||t.ZERO.equals(c)||(u=t.angleBetween(l,c)),x.push(u),C.push({text:xr.angleToString(u,null==(v=e.measureUnits)?void 0:v.angleUnits,e.locale,null==(h=e.decimals)?void 0:h.angle),position:a,id:n(),...r})}e.showDashedLine&&(E.push({positions:[P[i],N(P[i])]}),i===P.length-2&&E.push({positions:[P[i+1],N(P[i+1])]}))}const o=Je(P),u=Object.assign({},e.labelOpts,l.labelOpts);e.showLabel&&P.length&&(i.includes("Area")?C.push({text:xr.areaToString(o,null==(g=e.measureUnits)?void 0:g.areaUnits,e.locale,null==(f=e.decimals)?void 0:f.area),position:P[P.length-1],id:n(),...u}):C.push({text:xr.distanceToString(S,null==(y=e.measureUnits)?void 0:y.distanceUnits,e.locale,null==(b=e.decimals)?void 0:b.distance),position:P[P.length-1],id:n(),...u})),l.positionsDegreesArray=l.positions.map((e=>{const t=Cesium.Cartographic.fromCartesian(e,s.scene.globe.ellipsoid);return[r.toDegrees(t.longitude),r.toDegrees(t.latitude),t.height]})),a.push({...l,labels:C,distance:S,distances:_,area:o,angles:x,dashedLines:E})}})),a}));n.mount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&t.scene.preRender.addEventListener(V),!0},n.unmount=async()=>{const{viewer:t}=c;return e.autoUpdateLabelPosition&&t.scene.preRender.removeEventListener(V),!0};const N=e=>{const{defined:t,defaultValue:i}=Cesium,{viewer:n}=c,o=n.scene,r=o.globe,a=o.frameState.mapProjection.ellipsoid,s=a.cartesianToCartographic(e);return s.height=t(r)?i(r.getHeight(s),0):0,a.cartographicToCartesian(s)},V=()=>{B.value.forEach(((e,t)=>{var i;const n=e.positions;if(!(n.length<2)){const{defined:o,SceneTransforms:r,Cartesian2:a,HorizontalOrigin:s}=Cesium,{viewer:l}=c,u=l.scene;let d=n[0];const p=r.wgs84ToWindowCoordinates(u,d,{});let m=o(p)?a.clone(p,{}):a.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),v=m.y;const h=(null==(i=w.value)?void 0:i.cesiumObject)._primitives.filter((e=>e instanceof Cesium.LabelCollection))[t]._labels,g=h[h.length-1];for(let t=1;t<n.length;t++){const i=r.wgs84ToWindowCoordinates(u,n[t],{});if(o(i)){const e=(m.y-i.y)/(i.x-m.x);h[t-1]!==g&&(h[t-1].horizontalOrigin=0<e?s.LEFT:s.RIGHT),i.y<v&&(v=i.y,d=n[t]),m=a.clone(i,m)}e.drawStatus===yr.AfterDraw&&(g.position=d)}}}))},z=()=>{const t={show:!1,positions:[],tempPositions:[],drawStatus:yr.BeforeDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if("VcMeasurementHorizontal"===i){const{Cartesian3:e,Plane:i}=Cesium;Object.assign(t,{dashedLines:[],heightPlane:new i(e.UNIT_X,0),heightPlaneCV:new i(e.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new e})}v.value=yr.BeforeDraw,R.value.push(t),h.value=!0,p.value=m.value.drawingTipStart},F=(e=!0)=>{e&&v.value===yr.Drawing&&R.value.pop();const t=C.value?C.value._vcPolylineIndex:R.value.length-1,i=R.value[t];i&&(i.positions=i.tempPositions,i.drawStatus=yr.AfterDraw),v.value=yr.AfterDraw,h.value=!1,g.value=[0,0,0]},H=(e,t)=>{const{viewer:n,getWorldPosition:o}=c,r=n.scene,a=o(r,e,{}),{defined:s}=Cesium;if(!s(a))return;if(g.value=a,v.value!==yr.Drawing)return;const l=C.value?C.value._vcPolylineIndex:R.value.length-1,h=R.value[l],f=C.value?C.value._index:h.positions.length-1;let y="new";if("VcMeasurementHorizontal"===i){const{SceneMode:i,IntersectionTests:n,Cartesian3:o}=Cesium,a=r.frameState.mapProjection.ellipsoid,l=h.positions,c=r.camera.getPickRay(e);let u,d;if(r.mode===i.SCENE3D&&h.heightPlane)u=n.rayPlane(c,h.heightPlane);else if(r.mode===i.COLUMBUS_VIEW&&h.heightPlaneCV)u=n.rayPlane(c,h.heightPlaneCV),u=o.fromElements(u.y,u.z,u.x,u),d=r.mapProjection.unproject(u),u=a.cartographicToCartesian(d);else if(u=r.camera.pickEllipsoid(e,a),s(u)){const e=a.cartesianToCartographic(u);e.height=h.height||0,u=a.cartographicToCartesian(e,u)}if(!s(u))return;if(!h.firstMove&&(null==t?void 0:t.shift)){const e=l[l.length-2],t=h.tempNextPos,i=o.subtract(t,e,{});let n=o.subtract(u,e,{});n=o.projectVector(n,i,n),u=o.add(e,n,u)}if(C.value){h.positions.splice(C.value._index,1,u),y=_.value}else{const e=h.tempPositions.slice();e.push(u),h.positions=e,h.firstMove=!1,h.tempNextPos=Object.assign(u),p.value=m.value.drawingTipEnd}}else if(C.value){h.positions.splice(C.value._index,1,a),y=_.value}else{const e=h.tempPositions.slice();e.push(a),h.positions=e}x((()=>{u("drawEvt",Object.assign({index:l,pointIndex:f,name:d,renderDatas:R,finished:!1,position:"VcMeasurementHorizontal"===i?h.positions[h.positions.length-1]:a,windowPoistion:e,type:y},B.value[l]),n)}))},U=t=>{var n,o,r;if(y.value=[0,0,0],f.value=!1,!e.editable)return;const{viewer:a,drawingFabInstance:s}=c,l=null==s?void 0:s.proxy;if(_.value=t,"move"===t){p.value=m.value.drawingTipEditing,v.value=yr.Drawing,C.value=b.value,h.value=!0;const e=(()=>{let e=C.value._vcPolylineIndex,t=C.value._index;if("VcAnalysisSightline"===i)for(let i=0;i<R.value.length;i++){const n=R.value[i];for(let o=0;o<n.positions.length;o++){const r=n.positions[o];C.value.position.equals(r)&&(e=i,t=o)}}return[e,t]})();C.value._vcPolylineIndex=e[0],C.value._index=e[1],k=R.value[e[0]].positions[e[1]],l.editingActionName=d}else if("insert"===t){const e=b.value._vcPolylineIndex;R.value[e].positions.splice(b.value._index,0,b.value.position),C.value=b.value,h.value=!0,v.value=yr.Drawing,p.value=m.value.drawingTipEditing,l.editingActionName=d}else if("remove"===t){const e=b.value._vcPolylineIndex,t=R.value[e];t.positions.length>2&&t.positions.splice(b.value._index,1)}else if("removeAll"===t){const e=b.value._vcPolylineIndex;R.value.splice(e,1)}else{const i=b.value._vcPolylineIndex,a=R.value[i];null==(r=null==(o=null==(n=e.editorOpts)?void 0:n[t])?void 0:o.callback)||r.call(o,i,a)}u("editorEvt",{type:t,renderDatas:R,name:d,polylineIndex:b.value._vcPolylineIndex,pointIndex:b.value._index,point:b.value},a)},W={computedRenderDatas:B,renderDatas:R,startNew:z,stop:F,clear:()=>{R.value=[],F()},handleMouseClick:(t,n)=>{var o;const{viewer:r,drawingFabInstance:a,getWorldPosition:s,selectedDrawingActionInstance:l}=c,g=null==a?void 0:a.proxy;if(2===n.button&&n.ctrl){const e=g.getDrawingActionInstance(d);return g.toggleAction(e),void x((()=>{u("drawEvt",{name:d,finished:!0,windowPoistion:t,type:"cancel"},r)}))}v.value===yr.AfterDraw&&z();const{defined:f,Cartesian2:y,Plane:b,Cartesian3:w}=Cesium,O=C.value?C.value._vcPolylineIndex:R.value.length-1,S=R.value[O],E=S.tempPositions,P=C.value?C.value._index:S.positions.length-1;if(2===n.button&&C.value)return"insert"===_.value?S.positions.splice(C.value._index,1):S.positions[C.value._index]=k,v.value=yr.AfterDraw,S.drawStatus=yr.AfterDraw,C.value=void 0,p.value=m.value.drawingTipStart,g.editingActionName=void 0,h.value=f(l),void x((()=>{u("drawEvt",Object.assign({index:O,pointIndex:P,name:d,renderDatas:R,finished:!0,windowPoistion:t,type:"cancel"},B.value[O]),r)}));if(D=D||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),y.magnitude(y.subtract(D,t,{}))<10)return;if(2===n.button&&v.value===yr.Drawing&&E.length>1&&(E.pop(),H(t)),0!==n.button)return;const T=r.scene,I=s(T,t,{});if(!f(I))return;let M=!1,j="new";if("VcMeasurementHorizontal"===i){if(C.value)v.value=yr.AfterDraw,C.value=void 0,M=!0,j=_.value,p.value=m.value.drawingTipStart;else if(0===E.length){const e=T.frameState.mapProjection.ellipsoid;E.push(I),S.positions=E,S.heightPlane=b.fromPointNormal(I,e.geodeticSurfaceNormal(I,{}),S.heightPlane);const t=e.cartesianToCartographic(I,{}),i=T.mapProjection.project(t,{}),n=w.fromElements(i.z,i.x,i.y,i);S.heightPlaneCV=b.fromPointNormal(n,w.UNIT_X,S.heightPlaneCV),S.height=t.height,S.firstMove=!0,S.drawStatus=yr.Drawing,S.show=!0,v.value=yr.Drawing}else E.push(S.tempNextPos),S.positions=E,S.firstMove=!0;p.value=m.value.drawingTipEnd}else{if(C.value){if(!0===Fo().hasTouch){const i=s(T,t,{});if(f(i)){S.positions.splice(C.value._index,1,i),C.value.pixelSize=1*(null==(o=e.pointOpts)?void 0:o.pixelSize)}}v.value=yr.AfterDraw,C.value=void 0,M=!0,j=_.value,p.value=m.value.drawingTipStart}else E.push(I),S.positions=E,S.show=!0,S.drawStatus=yr.Drawing,v.value=yr.Drawing,h.value=!0,p.value=m.value.drawingTipEnd;"new"!==j&&(g.editingActionName=void 0,h.value=f(l))}y.clone(t,D),x((()=>{u("drawEvt",Object.assign({index:O,pointIndex:P,name:d,renderDatas:R,finished:M,position:"VcMeasurementHorizontal"===i?S.positions[S.positions.length-1]:I,windowPoistion:t,type:j},B.value[O]),r)}))},handleMouseMove:H,handleDoubleClick:t=>{const{drawingFabInstance:i,selectedDrawingActionInstance:n,viewer:o}=c;if(v.value===yr.Drawing){const r=C.value?C.value._vcPolylineIndex:R.value.length-1,a=R.value[r],s=C.value?C.value._index:a.positions.length-1;F(!1),p.value=m.value.drawingTipStart,x((()=>{if(u("drawEvt",Object.assign({index:r,pointIndex:s,name:d,renderDatas:R,finished:!0,position:a.positions[a.positions.length-1],windowPoistion:t,type:"new"},B.value[r]),o),1===e.mode){(null==i?void 0:i.proxy).toggleAction(n)}}))}}};return Object.assign(n.proxy,W),()=>{var t,n;const{createGuid:o,Cartesian3:r}=Cesium,a=[],s=[];if(B.value.forEach(((t,n)=>{var l,c;const u=t.positions.slice();if(u.length>1){t.loop&&u.push(u[0]);const i=Object.assign({},e.polylineOpts,t.polylineOpts);e.clampToGround&&delete i.arcType;const r=Object.assign({},e.primitiveOpts,t.primitiveOpts);a.push(S(e.clampToGround?nd:rd,{show:t.show&&r.show||e.editable||t.drawStatus===yr.Drawing,...r,onReady:e=>{var t;null==(t=null==r?void 0:r.onReady)||t.call(r,e),e.cesiumObject._vcPolylineIndex=n}},(()=>S(ep,{id:o()},(()=>S(e.clampToGround?qp:Kp,{positions:u,...i}))))))}const d=Object.assign({},e.dashLineOpts,t.dashLineOpts),p=Object.assign({},e.dashLinePrimitiveOpts,t.dashLinePrimitiveOpts);null==(l=t.dashedLines)||l.forEach((i=>{a.push(S(rd,{show:t.show&&e.dashLinePrimitiveOpts.show||e.editable||t.drawStatus===yr.Drawing,...p},(()=>S(ep,{id:o()},(()=>S(Kp,{positions:i.positions,...d}))))))}));const m=Object.assign({},e.pointOpts,t.pointOpts);if(a.push(S(Ud,{enableMouseEvent:e.enableMouseEvent,show:t.show,points:t.points.map(((a,l)=>{var c;const u=a.position;let d=!1;for(let e=0;e<s.length;e++)r.equals(u,s[e])&&(d=!0);const p=((null==(c=e.pointOpts)?void 0:c.show)||e.editable||t.drawStatus===yr.Drawing)&&("VcAnalysisSightline"!==i||3!==t.positions.length||1!==l)&&!d;"VcAnalysisSightline"===i&&s.push(u);const v=Object.assign({},m,a);return{position:u,id:o(),_vcPolylineIndex:n,show:p,...v}})),onMouseover:E,onMouseout:P,onReady:j})),a.push(S(Hd,{enableMouseEvent:e.enableMouseEvent,show:t.show,labels:t.labels,onReady:L})),u.length>2&&(i.includes("Polygon")||i.includes("Area"))){const i=Object.assign({},e.polygonOpts,t.polygonOpts);a.push(S(Qd,{positions:u,clampToGround:e.clampToGround,show:t.show&&(null==(c=e.polygonOpts)?void 0:c.show),...i,onReady:e=>{var t;A(e),null==(t=null==i?void 0:i.onReady)||t.call(i,e),e.cesiumObject._vcPolylineIndex=n}}))}})),(null==(t=e.drawtip)?void 0:t.show)&&h.value){const{viewer:t}=c;a.push(S(vm,{position:g.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:t.container}},(()=>S("div",{class:"vc-drawtip vc-tooltip--style"},p.value))))}if(f.value){const t=[];if(b.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(S(Ws,{style:{color:i[e].color,background:i[e].background},...n,onclick:U.bind("polyline",e)},(()=>S(ol,{...i[e].tooltip},(()=>{var t;return S("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||l(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=c;a.push(S(vm,{position:y.value,pixelOffset:null==(n=e.editorOpts)?void 0:n.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>S("div",{class:"vc-editor"},t))))}return S(Gd,{ref:w,show:e.show,onReady:M},(()=>a))}}var xm=P({name:"VcMeasurementPolyline",props:{...su,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>_m(e,t,"VcMeasurementPolyline")}),Sm=P({name:"VcMeasurementHorizontal",props:{...su,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>_m(e,t,"VcMeasurementHorizontal")}),Em=P({name:"VcMeasurementVertical",props:{...su,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcMeasurementVertical")}),Pm=P({name:"VcMeasurementHeight",props:{...su,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcMeasurementHeight")});function Tm(e,t,i){const n=r(),a=bo(e,t,n);if(void 0===a)return;const{t:s}=mo(),l=a.$services,{emit:c}=t,{drawingType:u,drawTip:d,drawTipOpts:p,drawStatus:m,canShowDrawTip:v,drawTipPosition:h,showEditor:g,editorPosition:y,mouseoverPoint:C,editingPoint:w,primitiveCollectionRef:O,editorType:_,onMouseoverPoints:E,onMouseoutPoints:P,onMouseenterEditor:T,onMouseleaveEditor:I,onPrimitiveCollectionReady:M,onVcCollectionPointReady:j,onVcCollectionLabelReady:L}=Cm(e,t,n,i,l),A=o([]);let D,k=[];"VcDrawingPin"===i&&""===e.billboardOpts.image&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),k.push(b((()=>e.editable),(e=>{const{drawingFabInstance:t,selectedDrawingActionInstance:i}=l;if(e&&(null==i?void 0:i.name)===u){(null==t?void 0:t.proxy).toggleAction(i)}})));const R=(e,t,i)=>{const n=Cesium.Cartographic.fromCartesian(e,i.globe.ellipsoid),o=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height];t.positionDegrees=o},B=()=>{const{Cartesian3:e}=Cesium,t={drawStatus:yr.Drawing,show:!1,position:new e,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};A.value.push(t),m.value=yr.Drawing,v.value=!0,d.value=p.value.drawingTipStart},N=(e=!0)=>{e&&m.value===yr.Drawing&&A.value.pop();const t=w.value?w.value._vcPolylineIndx:A.value.length-1,i=A.value[t];i&&(i.drawStatus=yr.AfterDraw),m.value=yr.AfterDraw,v.value=!1,h.value=[0,0,0]},V=(t,i)=>{const{viewer:n}=l,o=n.scene,{defined:r,defaultValue:a,Math:s,SceneMode:c}=Cesium,u=o.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{}),d=o.globe;let p=r(d)?a(d.getHeight(u),0):0;p=0===e.heightReference?u.height:u.height-p,s.equalsEpsilon(p,0,s.EPSILON3)&&(p=0);let m=0;o.mode!==c.SCENE2D&&(i||(i=o.cartesianToCanvasCoordinates(t.position,{})),m=z(o,i)),t.show=!0,t.lng=u.longitude,t.lat=u.latitude,t.height=p,t.slope=m},z=(e,t)=>{const{getWorldPosition:i}=l,{defined:n,Cartesian2:o,Cartesian3:r,Math:a}=Cesium,s=i(e,t,{});if(n(s)){const l=e.camera.position,c=r.distance(s,l),u=[new r,new r,new r,new r,new r],d=new r,p=new r;if(!(1e4<c)){const l=u[0],m=u[1],v=u[2],h=u[3];let g=e.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(s,d);g=r.negate(g,g);const f=o.clone(t,u[0]);f.x-=2,f.y-=2;const y=o.clone(t,u[1]);y.x-=2,y.y+=2;const b=o.clone(t,u[2]);b.x+=2,b.y+=2;const C=o.clone(t,u[3]);C.x+=2,C.y-=2;const w=i(e,f,l),O=i(e,y,m),_=i(e,b,v),x=i(e,C,h);let S,E,P,T,I,M,j,L;n(w)&&(S=r.subtract(w,s,l),E=r.magnitude(S)/c<=.05?r.normalize(S,l):void 0),n(O)&&(P=r.subtract(O,s,m),T=r.magnitude(P)/c<=.05?r.normalize(P,m):void 0),n(_)&&(I=r.subtract(_,s,v),M=r.magnitude(I)/c<=.05?r.normalize(I,v):void 0),n(x)&&(j=r.subtract(x,s,h),L=r.magnitude(j)/c<=.05?r.normalize(j,h):void 0);let A=r.clone(r.ZERO,p),D=u[4];if(n(E)&&n(T)&&(D=r.normalize(r.cross(E,T,D),D),A=r.add(A,D,A)),n(T)&&n(M)&&(D=r.normalize(r.cross(T,M,D),D),A=r.add(A,D,A)),n(M)&&n(L)&&(D=r.normalize(r.cross(M,L,D),D),A=r.add(A,D,A)),n(L)&&n(E)&&(D=r.normalize(r.cross(L,E,D),D),A=r.add(A,D,A)),!A.equals(r.ZERO))return A=r.normalize(A,A),a.asinClamped(Math.abs(Math.sin(r.angleBetween(A,g))))}}return 0},F=t=>{var i,n,o;if(y.value=[0,0,0],g.value=!1,!e.editable)return;_.value=t;const{viewer:r,drawingFabInstance:a}=l,s=null==a?void 0:a.proxy;if("move"===t)d.value=p.value.drawingTipEditing,m.value=yr.Drawing,w.value=C.value,v.value=!0,D=Object.assign({},A.value[w.value._vcPolylineIndx]),s.editingActionName=u;else if("remove"===t){const e=C.value._vcPolylineIndx;A.value.splice(e,1)}else{const r=C.value._vcPolylineIndx,a=A.value[r];null==(o=null==(n=null==(i=e.editorOpts)?void 0:i[t])?void 0:n.callback)||o.call(n,r,a)}c("editorEvt",{type:t,name:u,renderDatas:A,index:C.value._vcPolylineIndx,pointIndex:C.value._index,point:C.value},r)},H=t=>{var i,n,o,r,a,c,u,d;const{viewer:p}=l,m=p.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(t.position,{});return Cesium.defined(m)?`${s("vc.measurement.point.lng")}${xr.angleToString(m.longitude,null==(i=e.measureUnits)?void 0:i.angleUnits,e.locale,null==(n=e.decimals)?void 0:n.lng)}\n${s("vc.measurement.point.lat")}${xr.angleToString(m.latitude,null==(o=e.measureUnits)?void 0:o.angleUnits,e.locale,null==(r=e.decimals)?void 0:r.lat)}\n${s("vc.measurement.point.height")}${xr.distanceToString(t.height,null==(a=e.measureUnits)?void 0:a.distanceUnits,e.locale,null==(c=e.decimals)?void 0:c.height)}\n${s("vc.measurement.point.slope")}${xr.angleToString(t.slope,null==(u=e.measureUnits)?void 0:u.slopeUnits,e.locale,null==(d=e.decimals)?void 0:d.slope)}`:""};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:t}=l;e.preRenderDatas.forEach((e=>{const i={drawStatus:yr.AfterDraw,show:!0,position:ke(e),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},n=Cesium.Cartographic.fromCartesian(i.position,t.scene.globe.ellipsoid);i.positionDegrees=[Cesium.Math.toDegrees(n.longitude),Cesium.Math.toDegrees(n.latitude),n.height],V(i),A.value.push(i)}))}f((()=>{k.forEach((e=>e())),k=[]}));const U={renderDatas:A,startNew:B,stop:N,clear:()=>{A.value=[],N()},handleMouseClick:(t,i)=>{const{viewer:n,drawingFabInstance:o,getWorldPosition:r,selectedDrawingActionInstance:a}=l,s=null==o?void 0:o.proxy;if(2===i.button&&i.ctrl){const e=null==s?void 0:s.getDrawingActionInstance(u);return null==s||s.toggleAction(e),void x((()=>{c("drawEvt",{name:u,finished:!0,windowPoistion:t,type:"cancel"},n)}))}const h=w.value?w.value._vcPolylineIndx:A.value.length-1,g=A.value[h];if(2===i.button&&w.value)return s.editingActionName=void 0,A.value[h]=D,m.value=yr.AfterDraw,A.value[h].drawStatus=yr.AfterDraw,w.value=void 0,d.value=p.value.drawingTipStart,void x((()=>{c("drawEvt",{name:u,index:h,renderDatas:A,finished:!0,windowPoistion:t,type:"cancel"},n)}));if(0!==i.button)return;const{defined:f}=Cesium;let y="new";if(m.value===yr.BeforeDraw){const e=r(n.scene,t,{});if(!f(e))return;g.position=e,g.show=!0,g.drawStatus=yr.AfterDraw,m.value=yr.AfterDraw,d.value=p.value.drawingTipStart,x((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:e,windowPoistion:t,type:y},n)}))}else{m.value=yr.AfterDraw,g.drawStatus=yr.AfterDraw;const i=n.scene;if(!0===Fo().hasTouch){const e=r(i,t,{});R(e,g,i),f(e)&&(g.position=e,g.show=!0)}w.value?(w.value=void 0,s.editingActionName=void 0,v.value=!1,y=_.value):1===e.mode&&x((()=>{s.toggleAction(a)})),a&&(d.value=p.value.drawingTipStart,v.value=!0),x((()=>{c("drawEvt",{index:h,renderDatas:A,name:u,finished:!0,position:A.value[h].position,positionDegrees:A.value[h].positionDegrees,windowPoistion:t,type:y},n)}))}},handleMouseMove:e=>{const{viewer:t,getWorldPosition:i}=l,n=t.scene,{defined:o,SceneMode:r}=Cesium;if(n.mode!==r.MORPHING){const r=i(n,e,{});if(!o(r))return;if(h.value=r,m.value===yr.AfterDraw&&B(),m.value!==yr.Drawing)return;const a=w.value?w.value._vcPolylineIndx:A.value.length-1,s=A.value[a];s.position=r,R(r,s,n),V(s,e);const l=w.value?_.value:"new";x((()=>{c("drawEvt",{index:a,renderDatas:A,name:u,finished:!1,position:r,positionDegrees:s.positionDegrees,windowPoistion:e,type:l},t)}))}}};return Object.assign(n.proxy,U),()=>{var t,n,o;const{createGuid:r}=Cesium,a=[],c=[],u=[],p=[];if(A.value.forEach(((t,n)=>{var o;const a=Object.assign({},e.pointOpts,t.pointOpts);c.push({position:t.position,id:r(),_vcPolylineIndx:n,...a,show:t.show&&(null==(o=e.pointOpts)?void 0:o.show)||e.editable||t.drawStatus===yr.Drawing});const s=Object.assign({},e.labelOpts,t.labelOpts);if(e.showLabel)if("VcDrawingPin"===i){const i=Object.assign({},e.billboardOpts,t.billboardOpts);p.push({position:t.position,id:r(),_vcPolylineIndx:n,...i}),s.text&&u.push({position:t.position,id:r(),...s})}else u.push({position:t.position,id:r(),text:H(t),...s})})),a.push(S(Ud,{enableMouseEvent:e.enableMouseEvent,points:c,onMouseover:E,onMouseout:P,onReady:j})),a.push(S(Hd,{enableMouseEvent:e.enableMouseEvent,labels:u,onReady:L})),"VcDrawingPin"===i&&a.push(S(zd,{enableMouseEvent:e.enableMouseEvent,billboards:p})),(null==(t=e.drawtip)?void 0:t.show)&&v.value){const{viewer:t}=l;a.push(S(vm,{position:h.value,pixelOffset:null==(n=e.drawtip)?void 0:n.pixelOffset,teleport:{to:t.container}},(()=>S("div",{class:"vc-drawtip vc-tooltip--style"},d.value))))}if(g.value){const t=[];if(C.value){const i=e.editorOpts;for(const e in i)if(!Array.isArray(i[e])&&"number"!=typeof i[e]){const n={...i[e]};delete n.color,t.push(S(Ws,{style:{color:i[e].color,background:i[e].background},...n,onclick:F.bind(void 0,e)},(()=>S(ol,{...i[e].tooltip},(()=>{var t;return S("strong",null,(null==(t=i[e].tooltip)?void 0:t.tip)||s(`vc.drawing.editor.${e}`))})))))}}const{viewer:i}=l;a.push(S(vm,{position:y.value,pixelOffset:null==(o=e.editorOpts)?void 0:o.pixelOffset,teleport:{to:i.container},onMouseenter:T,onMouseleave:I},(()=>S("div",{class:"vc-editor"},t))))}return S(Gd,{ref:O,show:e.show,onReady:M},(()=>a))}}var Im=P({name:"VcMeasurementPoint",props:{...su,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:fl,setup:(e,t)=>Tm(e,t,"VcMeasurementPoint")}),Mm=P({name:"VcMeasurementArea",props:{...su,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>_m(e,t,"VcMeasurementArea")}),jm=P({name:"VcMeasurementRectangle",props:{...su,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcMeasurementRectangle")}),Lm=P({name:"VcMeasurementRegular",props:{...su,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcMeasurementRegular")});function Am(e,t,i,n,r,s,l){i.cesiumEvents=[];const c=bo(e,t,i);if(void 0===c)return;const{t:d}=mo(),{$services:p}=c,{emit:m}=t,v=o(!1),h=O({}),g=Ol(e),f=o(null),y=o(null),b=o(!1),C=o(null);let w,_;const{activate:E,deactivate:P,destroy:T,isActive:I}=function(e,{handleMouseClick:t,handleMouseDown:i,handleMouseUp:n,handleMouseMove:r,handleDoubleClick:a,handleMouseWheel:s,handlePinch:l}){const c=o(void 0),u=o(!1),d=e=>{null==t||t(e,{button:0})},p=e=>{null==t||t(e,{button:0,shift:!0})},m=e=>{null==t||t(e,{button:0,ctrl:!0})},v=e=>{null==t||t(e,{button:1})},h=e=>{null==t||t(e,{button:1,shift:!0})},g=e=>{null==t||t(e,{button:1,ctrl:!0})};let f;const y=e=>{var i;f?null==(i=null==f?void 0:f.promise)||i.then((i=>{i&&(null==t||t(e,{button:2}))})):null==t||t(e,{button:2})},b=e=>{null==t||t(e,{button:2,shift:!0})},C=e=>{null==t||t(e,{button:2,ctrl:!0})},w=e=>{null==i||i(e,{button:0})},O=e=>{null==i||i(e,{button:0,shift:!0})},_=e=>{null==i||i(e,{button:0,ctrl:!0})},x=e=>{null==i||i(e,{button:1})},S=e=>{null==i||i(e,{button:1,shift:!0})},E=e=>{null==i||i(e,{button:1,ctrl:!0})},P=e=>{null==i||i(e,{button:2})},T=e=>{null==i||i(e,{button:2,shift:!0})},I=e=>{null==i||i(e,{button:2,ctrl:!0})},M=e=>{null==n||n(e,{button:0})},j=e=>{null==n||n(e,{button:0,shift:!0})},L=e=>{null==n||n(e,{button:0,ctrl:!0})},A=e=>{null==n||n(e,{button:1,ctrl:!0})},D=e=>{null==n||n(e,{button:1,shift:!0})},k=e=>{null==n||n(e,{button:1,ctrl:!0})},R=e=>{null==n||n(e,{button:2})},B=e=>{null==n||n(e,{button:2,shift:!0})},N=e=>{null==n||n(e,{button:2,ctrl:!0})},V=e=>{null==a||a(e,{button:0})},z=e=>{null==a||a(e,{button:0,shift:!0})},F=e=>{null==a||a(e,{button:0,ctrl:!0})},H=e=>{null==r||r(e)},U=e=>{null==r||r(e,{shift:!0})},W=e=>{null==r||r(e,{ctrl:!0})},G=e=>{null==s||s(e)},$=e=>{null==s||s(e,{shift:!0})},Z=e=>{null==s||s(e,{ctrl:!0})},q=e=>{null==l||l(e,{start:!0})},Y=e=>{null==l||l(e,{start:!0,shift:!0})},X=e=>{null==l||l(e,{start:!0,ctrl:!0})},Q=e=>{null==l||l(e,{end:!0})},J=e=>{null==l||l(e,{end:!0,shift:!0})},K=e=>{null==l||l(e,{end:!0,ctrl:!0})},ee=e=>{null==l||l(e,{move:!0})},te=e=>{null==l||l(e,{move:!0,shift:!0})},ie=e=>{null==l||l(e,{move:!0,ctrl:!0})},ne=e=>{if(e.touch){const t={position:{x:e.position.left,y:e.position.top}};null==a||a(t,{button:0})}f.resolve(!1)},oe=e=>{f.resolve(!0)},re=e=>{f=Jo()};return{activate:()=>{if(u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i,ScreenSpaceEventHandler:n}=Cesium;if(!c.value){const{viewer:t}=e;c.value=new n(t.canvas),Uo.beforeMount(t.canvas,{arg:"2000",value:ne,touchStart:re,touchEnd:oe,modifiers:{}})}const o=c.value;o.setInputAction(d,t.LEFT_CLICK),o.setInputAction(p,t.LEFT_CLICK,i.SHIFT),o.setInputAction(m,t.LEFT_CLICK,i.CTRL),o.setInputAction(w,t.LEFT_DOWN),o.setInputAction(O,t.LEFT_DOWN,i.SHIFT),o.setInputAction(_,t.LEFT_DOWN,i.CTRL),o.setInputAction(M,t.LEFT_UP),o.setInputAction(j,t.LEFT_UP,i.SHIFT),o.setInputAction(L,t.LEFT_UP,i.CTRL),o.setInputAction(y,t.RIGHT_CLICK),o.setInputAction(b,t.RIGHT_CLICK,i.SHIFT),o.setInputAction(C,t.RIGHT_CLICK,i.CTRL),o.setInputAction(P,t.RIGHT_DOWN),o.setInputAction(T,t.RIGHT_DOWN,i.SHIFT),o.setInputAction(I,t.RIGHT_DOWN,i.CTRL),o.setInputAction(R,t.RIGHT_UP),o.setInputAction(B,t.RIGHT_UP,i.SHIFT),o.setInputAction(N,t.RIGHT_UP,i.CTRL),o.setInputAction(v,t.MIDDLE_CLICK),o.setInputAction(h,t.MIDDLE_CLICK,i.SHIFT),o.setInputAction(g,t.MIDDLE_CLICK,i.CTRL),o.setInputAction(x,t.MIDDLE_DOWN),o.setInputAction(S,t.MIDDLE_DOWN,i.SHIFT),o.setInputAction(E,t.MIDDLE_DOWN,i.CTRL),o.setInputAction(A,t.MIDDLE_UP),o.setInputAction(D,t.MIDDLE_UP,i.SHIFT),o.setInputAction(k,t.MIDDLE_UP,i.CTRL),o.setInputAction(V,t.LEFT_DOUBLE_CLICK),o.setInputAction(z,t.LEFT_DOUBLE_CLICK,i.SHIFT),o.setInputAction(F,t.LEFT_DOUBLE_CLICK,i.CTRL),o.setInputAction(H,t.MOUSE_MOVE),o.setInputAction(U,t.MOUSE_MOVE,i.SHIFT),o.setInputAction(W,t.MOUSE_MOVE,i.CTRL),o.setInputAction(G,t.WHEEL),o.setInputAction($,t.WHEEL,i.SHIFT),o.setInputAction(Z,t.WHEEL,i.CTRL),o.setInputAction(q,t.PINCH_START),o.setInputAction(Y,t.PINCH_START,i.SHIFT),o.setInputAction(X,t.PINCH_START,i.CTRL),o.setInputAction(Q,t.PINCH_END),o.setInputAction(J,t.PINCH_END,i.SHIFT),o.setInputAction(K,t.PINCH_END,i.CTRL),o.setInputAction(ee,t.PINCH_MOVE),o.setInputAction(te,t.PINCH_MOVE,i.SHIFT),o.setInputAction(ie,t.PINCH_MOVE,i.CTRL),u.value=!0},deactivate:()=>{if(!u.value)return;const{ScreenSpaceEventType:t,KeyboardEventModifier:i}=Cesium,n=c.value;if(!n)return;n.removeInputAction(t.LEFT_CLICK),n.removeInputAction(t.LEFT_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_CLICK,i.CTRL),n.removeInputAction(t.LEFT_DOWN),n.removeInputAction(t.LEFT_DOWN,i.SHIFT),n.removeInputAction(t.LEFT_DOWN,i.CTRL),n.removeInputAction(t.LEFT_UP),n.removeInputAction(t.LEFT_UP,i.SHIFT),n.removeInputAction(t.LEFT_UP,i.CTRL),n.removeInputAction(t.RIGHT_CLICK),n.removeInputAction(t.RIGHT_CLICK,i.SHIFT),n.removeInputAction(t.RIGHT_CLICK,i.CTRL),n.removeInputAction(t.RIGHT_DOWN),n.removeInputAction(t.RIGHT_DOWN,i.SHIFT),n.removeInputAction(t.RIGHT_DOWN,i.CTRL),n.removeInputAction(t.RIGHT_UP),n.removeInputAction(t.RIGHT_UP,i.SHIFT),n.removeInputAction(t.RIGHT_UP,i.CTRL),n.removeInputAction(t.MIDDLE_CLICK),n.removeInputAction(t.MIDDLE_CLICK,i.SHIFT),n.removeInputAction(t.MIDDLE_CLICK,i.CTRL),n.removeInputAction(t.MIDDLE_DOWN),n.removeInputAction(t.MIDDLE_DOWN,i.SHIFT),n.removeInputAction(t.MIDDLE_DOWN,i.CTRL),n.removeInputAction(t.MIDDLE_UP),n.removeInputAction(t.MIDDLE_UP,i.SHIFT),n.removeInputAction(t.MIDDLE_UP,i.CTRL),n.removeInputAction(t.LEFT_DOUBLE_CLICK),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.SHIFT),n.removeInputAction(t.LEFT_DOUBLE_CLICK,i.CTRL),n.removeInputAction(t.MOUSE_MOVE),n.removeInputAction(t.MOUSE_MOVE,i.SHIFT),n.removeInputAction(t.MOUSE_MOVE,i.CTRL),n.removeInputAction(t.WHEEL),n.removeInputAction(t.WHEEL,i.SHIFT),n.removeInputAction(t.WHEEL,i.CTRL),n.removeInputAction(t.PINCH_START),n.removeInputAction(t.PINCH_START,i.SHIFT),n.removeInputAction(t.PINCH_START,i.CTRL),n.removeInputAction(t.PINCH_END),n.removeInputAction(t.PINCH_END,i.SHIFT),n.removeInputAction(t.PINCH_END,i.CTRL),n.removeInputAction(t.PINCH_MOVE),n.removeInputAction(t.PINCH_MOVE,i.SHIFT),n.removeInputAction(t.PINCH_MOVE,i.CTRL);const{viewer:o}=e;Uo.beforeUnmount(o.canvas),u.value=!1},destroy:()=>{var e;null==(e=c.value)||e.destroy(),c.value=void 0},isActive:u}}(p,{handleMouseClick:(e,t)=>{var n,o;const r=null==_?void 0:_.cmpRef.value;let a;null==(n=null==r?void 0:r.handleMouseClick)||n.call(r,e.position,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==_){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleMouseClick)||o.call(i,e.position,t)}},handleMouseMove:(e,t)=>{var n,o;const r=null==_?void 0:_.cmpRef.value;let a;null==(n=null==r?void 0:r.handleMouseMove)||n.call(r,e.endPosition,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==_){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleMouseMove)||o.call(i,e.endPosition,t)}},handleDoubleClick:(e,t)=>{var n,o;const r=null==_?void 0:_.cmpRef.value;let a;null==(n=null==r?void 0:r.handleDoubleClick)||n.call(r,e.position,t);const s=i.proxy;if(s.editingActionName&&(a=k(s.editingActionName)),a&&a!==_){const i=a.cmpRef.value;null==(o=null==i?void 0:i.handleDoubleClick)||o.call(i,e.position,t)}}});i.createCesiumObject=async()=>(v.value=!0,w=new fr,n.value),i.mount=async()=>(L(),b.value=!0,E(),!0),i.unmount=async()=>(_&&(D(_),_=void 0),P(),T(),b.value=!1,!0);const j=(e,t,i)=>{const{Cesium3DTileFeature:n,Cesium3DTileset:o,Cartesian3:r,defined:a,Model:s,Ray:l}=Cesium;if(Cesium.SuperMapVersion)return e.pickPosition(t);let c;const u={},d=new l;if(e.pickPositionSupported){w.hide(e);const l=e.pick(t,1,1);if(w.restore(e),a(l)){if((l instanceof n||l.primitive instanceof o||l.primitive instanceof s||Cesium.S3MTilesLayer&&l.primitive instanceof Cesium.S3MTilesLayer)&&(c=e.pickPosition(t,u),a(c)))return r.clone(c,i)}else if(c=e.pickPosition(t,u),a(c))return r.clone(c,i)}if(a(e.globe)){const n=e.camera.getPickRay(t,d);return c=e.globe.pick(n,e,u),a(c)?r.clone(c,i):void 0}},L=()=>{var e;const t=g.style.value;h.left=t.left,h.top=t.top,h.transform=t.transform;const i=g.attach.value,n=null==(e=Te(y))?void 0:e.$el;if(void 0!==n){const e=n.getBoundingClientRect();t.width=`${e.width}px`,t.height=`${e.height}px`,!i.bottom&&!i.top||i.left||i.right||(t.left="50%",t.transform="translate(-50%, 0)"),!i.left&&!i.right||i.top||i.bottom||(t.top="50%",t.transform="translate(0, -50%)")}Object.assign(h,t)},A=o(null),D=t=>{var i;const{viewer:o}=p;if(u(t)&&(t=k(t)),!t)return void c.logger.error("Invalid drawingActionOption or drawingActionOption name");const r=R(t.name);if(-1!==r){if(void 0!==_){_.actionOpts.color=A.value||"";const e=_.cmpRef.value;null==(i=e.stop)||i.call(e),_.isActive=!1,m("activeEvt",{type:_.name,option:_,isActive:!1},o)}(null==_?void 0:_.name)===(null==t?void 0:t.name)?(_=void 0,n.value[r].actionOpts.color=A.value||"red"):x((()=>{n.value[r].cmpRef.value.startNew(),A.value=n.value[r].actionOpts.color,n.value[r].actionOpts.color=e.activeColor,n.value[r].isActive=!0,_=n.value[r],m("activeEvt",{type:_.name,option:_,isActive:!0},o)}))}},k=e=>n.value.find((t=>t.name===e)),R=e=>n.value.findIndex((t=>t.name===e)),B=e=>{e?E():(_&&D(_),P()),r.modelValue=e,m("fabUpdated",e)},N=()=>{n.value.forEach((e=>{var t;null==(t=e.cmpRef.value)||t.clear()})),_&&D(_);const{viewer:e}=p;m("clearEvt",{type:"clear",option:s},e)},V=({cesiumObject:e})=>{e._vcId=l};a(oe,Se(c.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return _},get getWorldPosition(){return j},get drawingHandlerActive(){return I}})),Object.assign(i.proxy,{clearAll:N,deactivate:P,activate:E,toggleAction:D,getFabRef:()=>y.value,getDrawingActionInstance:k,getDrawingActionInstances:()=>n.value,getSelectedDrawingActionInstance:()=>_});return{renderContent:()=>{if(v.value){const i=[],o=[];n.value.forEach((t=>{i.push(S(ll,{ref:t.actionRef,style:t.actionStyle,class:t.actionClass,...t.actionOpts,onClick:()=>{D(t)}},(()=>S(ol,{...t.actionOpts.tooltip},(()=>S("strong",null,t.tip)))))),t.cmp&&o.push(S(t.cmp,{ref:t.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(e,t)=>{m("drawEvt",e,t)},onEditorEvt:(e,t)=>{m("editorEvt",e,t)},onMouseEvt:(e,t)=>{m("mouseEvt",e,t)},...t.cmpOpts}))})),n.value.length&&i.push(S(ll,{style:{background:s.color,color:s.textColor},class:"vc-draw-button vc-draw-clear",...s,onClick:N},(()=>S(ol,{...s.tooltip},(()=>S("strong",null,s.tooltip.tip||d(`vc.${l}.clear.tip`)))))));const a=[];return b.value&&a.push(S("div",{ref:f,class:"vc-drawings-container "+g.classes.value,style:h},void 0!==t.slots.body?t.slots.body(n.value):S(sl,{ref:y,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":B},{default:()=>i,tooltip:()=>S(ol,{...r.tooltip},(()=>S("strong",null,r.tooltip.tip||(r.modelValue?d("vc.drawing.collapse"):d("vc.drawing.expand")))))}))),a.push(S(Gd,{ref:C,show:e.show,onReady:V},(()=>o))),a}return M("v-if")}}}var Dm=P({name:"VcMeasurements",props:Lu,emits:{...fl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const n=r();n.cesiumClass="VcMeasurements";const{t:a}=mo(),l=O(Object.assign({},Au.clearActionOpts,e.clearActionOpts)),c=O(Object.assign({},Au.mainFabOpts,e.mainFabOpts)),u=O(Object.assign({},Au.fabActionOpts,e.fabActionOpts)),d=O(Object.assign({},Au.distanceActionOpts,B("distanceActionOpts"))),p=O(ve(X(Au.distanceMeasurementOpts),e.distanceMeasurementOpts)),m=O(Object.assign({},Au.componentDistanceActionOpts,B("componentDistanceActionOpts"))),v=O(ve(X(Au.componentDistanceMeasurementOpts),e.componentDistanceMeasurementOpts)),h=O(Object.assign({},Au.polylineActionOpts,B("polylineActionOpts"))),g=O(ve(X(Au.polylineMeasurementOpts),e.polylineMeasurementOpts)),f=O(Object.assign({},Au.horizontalActionOpts,B("horizontalActionOpts"))),y=O(ve(X(Au.horizontalMeasurementOpts),e.horizontalMeasurementOpts)),b=O(Object.assign({},Au.verticalActionOpts,B("verticalActionOpts"))),C=O(ve(X(Au.verticalMeasurementOpts),e.verticalMeasurementOpts)),w=O(Object.assign({},Au.heightActionOpts,B("heightActionOpts"))),_=O(ve(X(Au.heightMeasurementOpts),e.heightMeasurementOpts)),x=O(Object.assign({},Au.areaActionOpts,B("areaActionOpts"))),S=O(ve(X(Au.areaMeasurementOpts),e.areaMeasurementOpts)),E=O(Object.assign({},Au.pointActionOpts,B("pointActionOpts"))),P=O(ve(X(Au.pointMeasurementOpts),e.pointMeasurementOpts)),T=O(Object.assign({},Au.rectangleActionOpts,B("rectangleActionOpts"))),I=O(ve(X(Au.rectangleMeasurementOpts),e.rectangleMeasurementOpts)),M=O(Object.assign({},Au.regularActionOpts,B("regularActionOpts"))),j=O(ve(X(Au.regularMeasurementOpts),e.regularMeasurementOpts)),L=O(Object.assign({},Au.circleActionOpts,B("circleActionOpts"))),A=O(ve(X(Au.circleMeasurementOpts),e.circleMeasurementOpts)),D={};D.distanceActionOpts=d,D.distanceMeasurementOpts=p,D.componentDistanceActionOpts=m,D.componentDistanceMeasurementOpts=v,D.polylineActionOpts=h,D.polylineMeasurementOpts=g,D.horizontalActionOpts=f,D.horizontalMeasurementOpts=y,D.verticalActionOpts=b,D.verticalMeasurementOpts=C,D.heightActionOpts=w,D.heightMeasurementOpts=_,D.areaActionOpts=x,D.areaMeasurementOpts=S,D.pointActionOpts=E,D.pointMeasurementOpts=P,D.rectangleActionOpts=T,D.rectangleMeasurementOpts=I,D.regularActionOpts=M,D.regularMeasurementOpts=j,D.circleActionOpts=L,D.circleMeasurementOpts=A,D.clearActionOpts=l;const k=s((()=>e.measurements.map((e=>({name:e,type:"measurement",actionStyle:{background:D[`${V(e)}ActionOpts`].color,color:D[`${V(e)}ActionOpts`].textColor},actionClass:`vc-measure-${e} vc-measure-button`,actionRef:o(null),actionOpts:D[`${V(e)}ActionOpts`],cmp:R(e),cmpRef:o(null),cmpOpts:D[`${V(e)}MeasurementOpts`],tip:D[`${V(e)}ActionOpts`].tooltip.tip||a(`vc.measurement.${e}.tip`),isActive:!1})))));function R(e){switch(e){case"distance":case"component-distance":return Om;case"polyline":return xm;case"horizontal":return Sm;case"vertical":return Em;case"height":return Pm;case"point":return Im;case"area":return Mm;case"rectangle":return jm;case"regular":case"circle":return Lm;default:return}}function B(t){return q(Au[t],e[t])?u:Object.assign({},u,e[t])}return null==(i=Am(e,t,n,k,c,l,"measurement"))?void 0:i.renderContent}});Dm.install=e=>{e.component(Dm.name,Dm)};const km=Dm,Rm=Object.assign({},Wc,{icon:"vc-icons-drawing-point"}),Bm=Object.assign({},Wc,{icon:"vc-icons-drawing-polyline"}),Nm=Object.assign({},Wc,{icon:"vc-icons-drawing-polygon"}),Vm=Object.assign({},Wc,{icon:"vc-icons-drawing-rectangle"}),zm=Object.assign({},Wc,{icon:"vc-icons-drawing-pin"}),Fm=Object.assign({},Qc,{pointOpts:Object.assign({},$c,{show:!1}),billboardOpts:Zc,labelOpts:Object.assign({},Yc,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),Hm=Object.assign({},{}),Um=Object.assign({},Wc,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Wm=["pin","point","polyline","polygon","rectangle","regular","circle"],Gm={...lu,drawings:{type:Array,default:()=>Wm,validator:e=>{let t=!0;return e.forEach((e=>{Wm.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Um},fabActionOpts:{type:Object,default:()=>Hm},pinActionOpts:{type:Object,default:()=>zm},pinDrawingOpts:{type:Object,default:()=>Fm},pointActionOpts:{type:Object,default:()=>Rm},pointDrawingOpts:{type:Object,default:()=>Qc},polylineActionOpts:{type:Object,default:()=>Bm},polylineDrawingOpts:{type:Object,default:()=>Kc},polygonActionOpts:{type:Object,default:()=>Nm},polygonDrawingOpts:{type:Object,default:()=>eu},rectangleActionOpts:{type:Object,default:()=>Vm},rectangleDrawingOpts:{type:Object,default:()=>tu},circleActionOpts:{type:Object,default:()=>au},circleDrawingOpts:{type:Object,default:()=>iu},regularActionOpts:{type:Object,default:()=>ru},regularDrawingOpts:{type:Object,default:()=>nu}},$m=pe(Gm);var Zm=P({name:"VcDrawingPin",props:{...su,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:fl,setup:(e,t)=>Tm(e,t,"VcDrawingPin")}),qm=P({name:"VcDrawingPoint",props:{...su,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:fl,setup:(e,t)=>Tm(e,t,"VcDrawingPoint")}),Ym=P({name:"VcDrawingPolyline",props:{...su,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>_m(e,t,"VcDrawingPolyline")}),Xm=P({name:"VcDrawingPolygon",props:{...su,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>_m(e,t,"VcDrawingPolygon")}),Qm=P({name:"VcDrawingRegular",props:{...su,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcDrawingRegular")}),Jm=P({name:"VcDrawingRectangle",props:{...su,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:fl,setup:(e,t)=>wm(e,t,"VcDrawingRectangle")});var Km=P({name:"VcDrawings",props:Gm,emits:{...fl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const n=r();n.cesiumClass="VcDrawings";const{t:a}=mo(),l={},c=O(Object.assign({},$m.clearActionOpts,e.clearActionOpts)),u=O(Object.assign({},$m.mainFabOpts,e.mainFabOpts)),d=O(Object.assign({},$m.fabActionOpts,e.fabActionOpts)),p=O(Object.assign({},$m.pointActionOpts,I("pointActionOpts"))),m=O(ve(X($m.pointDrawingOpts),e.pointDrawingOpts)),v=O(Object.assign({},$m.polylineActionOpts,I("polylineActionOpts"))),h=O(ve(X($m.polylineDrawingOpts),e.polylineDrawingOpts)),g=O(Object.assign({},$m.polygonActionOpts,I("polygonActionOpts"))),f=O(ve(X($m.polygonDrawingOpts),e.polygonDrawingOpts)),y=O(Object.assign({},$m.rectangleActionOpts,I("rectangleActionOpts"))),b=O(ve(X($m.rectangleDrawingOpts),e.rectangleDrawingOpts)),C=O(Object.assign({},$m.circleActionOpts,I("circleActionOpts"))),w=O(ve(X($m.circleDrawingOpts),e.circleDrawingOpts)),_=O(Object.assign({},$m.regularActionOpts,I("regularActionOpts"))),x=O(ve(X($m.regularDrawingOpts),e.regularDrawingOpts)),S=O(Object.assign({},$m.pinActionOpts,I("pinActionOpts"))),E=O(ve(X($m.pinDrawingOpts),e.pinDrawingOpts));l.pointActionOpts=p,l.pointDrawingOpts=m,l.polylineActionOpts=v,l.polylineDrawingOpts=h,l.polygonActionOpts=g,l.polygonDrawingOpts=f,l.rectangleActionOpts=y,l.rectangleDrawingOpts=b,l.circleActionOpts=C,l.circleDrawingOpts=w,l.regularActionOpts=_,l.regularDrawingOpts=x,l.pinActionOpts=S,l.pinDrawingOpts=E,l.clearActionOpts=c;const P=s((()=>e.drawings.map((e=>({name:e,type:"drawing",actionStyle:{background:l[`${V(e)}ActionOpts`].color,color:l[`${V(e)}ActionOpts`].textColor},actionClass:`vc-draw-${e} vc-draw-button`,actionRef:o(null),actionOpts:l[`${V(e)}ActionOpts`],cmp:T(e),cmpRef:o(null),cmpOpts:l[`${V(e)}DrawingOpts`],tip:l[`${V(e)}ActionOpts`].tooltip.tip||a(`vc.drawing.${V(e)}.tip`),isActive:!1})))));function T(e){switch(e){case"pin":return Zm;case"point":return qm;case"polyline":return Ym;case"polygon":return Xm;case"rectangle":return b.regular?Qm:Jm;case"circle":case"regular":return Qm;default:return}}function I(t){return q($m[t],e[t])?d:Object.assign({},d,e[t])}return null==(i=Am(e,t,n,P,u,c,"drawing"))?void 0:i.renderContent}});Km.install=e=>{e.component(Km.name,Km)};const ev=Km;class tv{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._url=e.url;const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=e.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=e.rectangle||this._tilingScheme.rectangle;let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=Jo(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=e.subdomains||["01","02","03","04"],this._domain=e.domain||"webst",this._style=e.mapStyle||"6",this._lang=e.lang||"zh_cn",this._scl=e.scl||"1",this._ltype=e.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,iv.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function iv(e,t,i,n){let o=this._url;const r=this._subdomains;o=o.replace("{domain}",this._domain).replace("{s}",r[(e+t+i)%r.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i);return this._resource.getDerivedResource({url:o,request:n})}var nv=P({name:"VcImageryProviderAmap",props:{url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...en,...rn,...on,...Qi,...Ji,...mn},emits:ml,setup(e,t){const i=r();i.cesiumClass="AMapImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||tv,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.AMapImageryProvider(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ov=P({name:"VcImageryProviderArcgis",props:{url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...Zi,...qi,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...Yi,...Xi,...Qi,...Ji,...Ki,...en,...tn,...nn,...on},emits:ml,setup(e,t){const i=r();return i.cesiumClass="ArcGisMapServerImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});class rv{constructor(e,t){isNaN(e)&&(e=isNaN(e)?0:e),u(e)&&(e=parseFloat(e)),isNaN(t)&&(t=isNaN(t)?0:t),u(t)&&(t=parseFloat(t)),this.lng=e,this.lat=t}equals(e){return e&&this.lat===e.lat&&this.lng===e.lng}}rv.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class av{constructor(e,t){this.x=e||0,this.y=t||0}equals(e){return e&&e.x===this.x&&e.y===this.y}}const sv=class e{lngLatToMercator(t,i){return e.convertLL2MC(t)}lngLatToPoint(t){const i=e.convertLL2MC(t);return new av(i.lng,i.lat)}mercatorToLngLat(t,i){return e.convertMC2LL(t)}pointToLngLat(t){const i=new rv(t.x,t.y);return e.convertMC2LL(i)}pointToPixel(e,t,i,n,o){if(!e)return;e=this.lngLatToMercator(e,o),i=this.lngLatToMercator(i);const r=this.getZoomUnits(t),a=Math.round((e.lng-i.lng)/r+n.width/2),s=Math.round((i.lat-e.lat)/r+n.height/2);return new av(a,s)}pixelToPoint(e,t,i,n,o){if(!e)return;const r=this.getZoomUnits(t),a=i.lng+r*(e.x-n.width/2),s=i.lat-r*(e.y-n.height/2),l=new rv(a,s);return this.mercatorToLngLat(l,o)}getZoomUnits(e){return Math.pow(2,18-e)}};sv.EARTHRADIUS=6370996.81,sv.MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],sv.LLBAND=[75,60,45,30,15,0],sv.MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],sv.LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],sv.getDistanceByMC=function(e,t){if(!e||!t)return 0;if(!(e=sv.convertMC2LL(e)))return 0;const i=sv.toRadians(e.lng),n=sv.toRadians(e.lat);if(!(t=sv.convertMC2LL(t)))return 0;const o=sv.toRadians(t.lng),r=sv.toRadians(t.lat);return sv.getDistance(i,o,n,r)},sv.getDistanceByLL=function(e,t){if(!e||!t)return 0;e.lng=sv.getLoop(e.lng,-180,180),e.lat=sv.getRange(e.lat,-74,74),t.lng=sv.getLoop(t.lng,-180,180),t.lat=sv.getRange(t.lat,-74,74);const i=sv.toRadians(e.lng),n=sv.toRadians(e.lat),o=sv.toRadians(t.lng),r=sv.toRadians(t.lat);return sv.getDistance(i,o,n,r)},sv.convertMC2LL=function(e){let t;const i=new rv(Math.abs(e.lng),Math.abs(e.lat));for(let o=0;o<sv.MCBAND.length;o++)if(i.lat>=sv.MCBAND[o]){t=sv.MC2LL[o];break}const n=sv.convertor(e,t);return new rv(null==n?void 0:n.lng.toFixed(6),null==n?void 0:n.lat.toFixed(6))},sv.convertLL2MC=function(e){let t;e.lng=sv.getLoop(e.lng,-180,180),e.lat=sv.getRange(e.lat,-74,74);const i=new rv(e.lng,e.lat);for(let o=0;o<sv.LLBAND.length;o++)if(i.lat>=sv.LLBAND[o]){t=sv.LL2MC[o];break}if(!t)for(let o=sv.LLBAND.length-1;o>=0;o--)if(i.lat<=-sv.LLBAND[o]){t=sv.LL2MC[o];break}const n=sv.convertor(e,t);return new rv(null==n?void 0:n.lng.toFixed(2),null==n?void 0:n.lat.toFixed(2))},sv.convertor=function(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let o=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,o*=e.lat<0?-1:1,new rv(i,o)},sv.getDistance=function(e,t,i,n){return sv.EARTHRADIUS*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))},sv.toRadians=function(e){return Math.PI*e/180},sv.toDegrees=function(e){return 180*e/Math.PI},sv.getRange=function(e,t,i){return null!=t&&(e=Math.max(e,t)),null!=i&&(e=Math.min(e,i)),e},sv.getLoop=function(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e};let lv=sv;class cv{constructor(e){const{defaultValue:t,Ellipsoid:i,WebMercatorProjection:n,Cartesian2:o,Cartographic:r,Math:a,Rectangle:s}=Cesium;e=e||{},this._ellipsoid=t(e.ellipsoid,i.WGS84),this._projection=new n(this._ellipsoid);const l=new lv;this._projection.project=function(t,i){return i=i||{},e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=lr(a.toDegrees(t.longitude),a.toDegrees(t.latitude)),i=sr(i[0],i[1])):i=sr(a.toDegrees(t.longitude),a.toDegrees(t.latitude))),i[0]=Math.min(i[0],180),i[0]=Math.max(i[0],-180),i[1]=Math.min(i[1],74.000022),i[1]=Math.max(i[1],-71.988531),i=l.lngLatToPoint(new rv(i[0],i[1])),new o(i.x,i.y)},this._projection.unproject=function(t,i){return i=i||{},(i=l.mercatorToLngLat(new rv(t.x,t.y)))[0]=(i[0]+180)%360-180,e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&("WGS84"===e.projectionTransforms.to.toUpperCase()?(i=ar(i.lng,i.lat),i=cr(i[0],i[1])):i=ar(i.lng,i.lat)),new r(Cesium.Math.toRadians(i[0]),Cesium.Math.toRadians(i[1]))},this._rectangleSouthwestInMeters=new o(-20037726.37,-12474104.17),this._rectangleNortheastInMeters=new o(20037726.37,12474104.17);const c=this._projection.unproject(this._rectangleSouthwestInMeters),u=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new s(c.longitude,c.latitude,u.longitude,u.latitude),this.resolutions=[];for(let d=0;d<19;d++)this.resolutions[d]=256*Math.pow(2,18-d)}getNumberOfXTilesAtLevel(e){return 1<<e}getNumberOfYTilesAtLevel(e){return 1<<e}rectangleToNativeRectangle(e,t){const{defined:i,Rectangle:n}=Cesium,o=this._projection,r=o.project(n.southwest(e)),a=o.project(n.northeast(e));return i(t)?(t.west=r.x,t.south=r.y,t.east=a.x,t.north=a.y,t):new n(r.x,r.y,a.x,a.y)}tileXYToNativeRectangle(e,t,i,n){const{defined:o,Rectangle:r}=Cesium,a=this.resolutions[i],s=e*a,l=(e+1)*a,c=(1+(t=-t))*a,u=t*a;return o(n)?(n.west=s,n.south=u,n.east=l,n.north=c,n):new r(s,u,l,c)}tileXYToRectangle(e,t,i,n){const{Cartesian2:o}=Cesium,r=this.tileXYToNativeRectangle(e,t,i,n),a=this._projection,s=a.unproject(new o(r.west,r.south)),l=a.unproject(new o(r.east,r.north));return r.west=s.longitude,r.south=s.latitude,r.east=l.longitude,r.north=l.latitude,r}positionToTileXY(e,t,i){const{Rectangle:n,defined:o,Cartesian2:r}=Cesium,a=this._rectangle;if(!n.contains(a,e))return;const s=this._projection.project(e);if(!o(s))return;const l=this.resolutions[t],c=Math.floor(s.x/l),u=-Math.floor(s.y/l);return o(i)?(i.x=c,i.y=u,i):new r(c,u)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class uv{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=i(e.subdomains,["0","1","2","3"]),e.url?this._url=e.url:"img"===e.mapStyle?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":"vec"===e.mapStyle?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi2_0&showtext={showtext}":"traffic"===e.mapStyle?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||18,this._tilingScheme=new cv(e),this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._ready=!0,this._labelStyle=e.labelStyle||"web2D",this._showtext=e.showtext||"1",this._qt=e.qt,this._styles=e.styles,this._scale=e.scale,this._ak=e.ak,this._mapStyle=e.mapStyle}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,dv.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function dv(e,t,i,n){let o=this._url;const r=this._subdomains;o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{ak}",this._ak).replace("{time}",String((new Date).getTime())).replace("{udt}",String((new Date).getTime())).replace("{showtext}",this._showtext);return this._resource.getDerivedResource({url:o,request:n})}var pv=P({name:"VcImageryProviderBaidu",props:{...$i,...Qi,...Ki,...qi,...en,...rn,...on,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"5ieMMexWmzB9jivTq6oCRX9j"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"},showtext:{type:String,default:"1"}},emits:ml,setup(e,t){const i=r();i.cesiumClass="BaiduMapImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||uv,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var mv=P({name:"VcImageryProviderBing",props:{url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...Ki,...qi},emits:ml,setup(e,t){const i=r();return i.cesiumClass="BingMapsImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var vv=P({name:"VcImageryProviderGoogle",props:{...$i,...Ki,...qi,...en,metadata:Object},emits:ml,setup(e,t){const i=r();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var hv=P({name:"VcImageryProviderGrid",props:{...Ji,...Ki,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:He}},...oo,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:He}},...tn,...nn,canvasSize:{type:Number,default:256}},emits:ml,setup(e,t){const i=r();return i.cesiumClass="GridImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}}),gv=P({name:"VcImageryProviderIon",props:{assetId:Number,...sn,server:[String,Object]},emits:ml,setup(e,t){const i=r();i.cesiumClass="IonImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return at(Cesium.VERSION,"1.104")&&"function"==typeof Cesium[i.cesiumClass].fromAssetId?await Cesium.IonImageryProvider.fromAssetId(t.assetId,t):new Cesium.IonImageryProvider(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var fv=P({name:"VcImageryProviderMapbox",props:{url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...sn,tilesize:{type:Number,default:512},scaleFactor:Boolean,...Ki,...rn,...on,...Qi,...en},emits:ml,setup(e,t){const i=r();return i.cesiumClass="MapboxStyleImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var yv=P({name:"VcImageryProviderOsm",props:{url:{type:String,default:"https://a.tile.openstreetmap.org"},...an,...Qi,...rn,...on,...Ki,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}},emits:ml,setup(e,t){const i=r();return i.cesiumClass="OpenStreetMapImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var bv=P({name:"VcImageryProviderSingletile",props:{...$i,...Qi,...en,...Ki,...tn,...nn},emits:ml,setup(e,t){const i=r();return i.cesiumClass="SingleTileImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Cv=1,wv=2,Ov=3;class _v{constructor(e){if(!Cesium.defined(e.name))throw new Cesium.DeveloperError("options.name is required.");const t=window.indexedDB.open(this.dbname);this.layer=e.layer||null,this.storageType=e.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=e.name;const i=this;return new Promise(((e,n)=>{t.onsuccess=t=>{i.db=t.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},e(i)},t.onupgradeneeded=t=>{i.db=t.target.result,i.version=i.db.version,e(i)},t.onerror=e=>{i.db=null,n("create database fail, error code : "+e.target.errorcode)}}))}checkObjectStoreExist(e){return!!Cesium.defined(this.db)&&this.db.objectStoreNames.contains(e)}createObjectStore(e){return new Promise(((t,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(e))return void i(!1);this.creatingTable=!0;const n=parseInt(this.db.version);this.db.close();const o=this,r=window.indexedDB.open(this.dbname,n+1);r.onupgradeneeded=i=>{const n=i.target.result;o.db=n;const r=n.createObjectStore(e,{keyPath:"id"});if(Cesium.defined(r)){r.createIndex("value","value",{unique:!1}),o.creatingTable=!1,o.cachestatus=o.cachestatus||{},o.cachestatus[e]={},o.db.close();window.indexedDB.open(o.dbname).onsuccess=e=>{o.db=e.target.result,t(!0)}}else o.creatingTable=!1,t(!1)},r.onsuccess=e=>{e.target.result.close(),t(!0)},r.onerror=e=>{o.creatingTable=!1,i(!1)}}}))}putElementInDB(e,t,i){return new Promise(((n,o)=>{if(!Cesium.defined(this.db))return void o(!1);const{cachestatus:r,db:a}=this;if(Cesium.defined(r[e])&&Cesium.defined(r[e][t]&&(r[e][t]===Cv||r[e][t]===wv)))n(!1);else if(a.objectStoreNames.contains(e)){r[e]=r[e]||{};try{const o=a.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});r[e][t]=Cv,o.onsuccess=i=>{r[e][t]=wv,n(!0)},o.onerror=i=>{r[e][t]=Ov,n(!1)}}catch(s){return void o(null)}}else this.createObjectStore(e).then((()=>{const r=a.transaction([e],"readwrite").objectStore(e).add({id:t,value:i});r.onsuccess=function(e){n(!0)},r.onerror=function(e){o(!1)}}),(()=>{o(!1)}))}))}getElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(!Cesium.defined(o))return null;if(!o.objectStoreNames.contains(e))return null;try{const r=o.transaction([e]),a=r.objectStore(e).get(t);a.onsuccess=e=>Cesium.defined(e.target.result)?i(e.target.result.value):n(null),a.onerror=e=>{n(null)}}catch(r){n(null)}}))}updateElementInDB(e,t,i){return new Promise(((n,o)=>{const{db:r}=this;if(Cesium.defined(r))if(r.objectStoreNames.contains(e))try{const o=r.transaction([e],"readwrite").objectStore(e).put({id:t,value:i});o.onsuccess=()=>{n(!0)},o.onerror=()=>{n(!1)}}catch($g){n(!1)}else n(!1);else n(!1)}))}removeElementFromDB(e,t){return new Promise(((i,n)=>{const{db:o}=this;if(Cesium.defined(o))if(o.objectStoreNames.contains(e))try{const n=o.transaction([e],"readwrite").objectStore(e).delete(t);n.onsuccess=()=>{i(!0)},n.onerror=()=>{i(!1)}}catch($g){i(!1)}else i(!1);else i(!1)}))}clear(e){return new Promise(((t,i)=>{const{db:n}=this;if(Cesium.defined(n))if(n.objectStoreNames.contains(e))try{const i=n.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>{t(!0)},i.onerror=()=>{t(!1)}}catch($g){t(!1)}else t(!1);else t(!1)}))}}class xv{constructor(e){const{appendForwardSlash:t,Credit:i,defaultValue:n,defined:o,DeveloperError:r,Event:a,Resource:s,Math:l}=Cesium;e=n(e,{});const{url:c}=e;if(!o(c))throw new r("options.url is required.");const u=c.substring(0,c.indexOf("datas"));this.tablename=c.substring(0,c.indexOf("datas/")+6,c.length);const d=this;new _v({name:u+this.tablename}).then((e=>{d._indexedDBScheduler=e})),this._indexedDBSetting={isOpen:!1,clear:()=>{d._indexedDBScheduler.clear(d.tablename)}},this.isSci=!1,this.isTileMap=!1;const p=t(c);if(p.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=e.layersID;else{if(!(p.indexOf("rest/realspace")>-1))throw new r("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=p,this._resource=s.createIfNeeded(p),this._transparent=n(e.transparent,!0),this._name=e.name||"",this._urlTemplate=void 0,this._errorEvent=new a,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=e.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=e.tileDiscardPolicy,this._fRatio=n(e.ratio,l.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let m=n(e.credit,new i("MapQuest, SuperMap iServer Imagery"));"string"==typeof m&&(m=new i(m)),this._credit=m,this._ready=!1,this._readyPromise=Jo(),this._options=e}get url(){return this._url}get name(){return this._name}set name(e){this._name=e}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(e){this._fRatio=e}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){const{defined:o,DeveloperError:r,ImageryProvider:a}=Cesium;if(!this.ready)throw new r("requestImage must not be called before the imagery provider is ready.");const s=Tv.call(this,e,t,i),l=this._resource.getDerivedResource({url:s,request:n}),c=this;if(!this._indexedDBSetting.isOpen)return a.loadImage(this,l);if(o(this._indexedDBScheduler)){const e=this._indexedDBScheduler.getElementFromDB(this.tablename,s);try{return e.then((e=>{if(o(e)){const t=new Image;return t.src=e,t}return a.loadImage(c,l)}))}catch($g){return a.loadImage(c,l)}}}pickFeatures(e,t,i,n,o){}async init(){await Iv.call(this)}}let Sv={};const Ev=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],Pv=[1.690163571602655e-9,3.3803271432053056e-9,6.760654286410611e-9,1.3521308572821242e-8,2.7042617145642484e-8,5.408523429128511e-8,1.0817046858256998e-7,2.1634093716513974e-7,4.3268187433028044e-7,8.653637486605571e-7,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function Tv(e,t,i){let n;if(this.isTileMap){if("DEGREE"===this._coordUnit){const o=Ev[i+1]||Ev[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}else if("METER"===this._coordUnit){const o=Ev[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",o)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}async function Iv(){const{Resource:e}=Cesium;if(this.isTileMap)try{const t=await e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});kv.call(this,t)}catch($g){Rv.call(this)}else try{const t=await e.fetchText({url:this.url+"config"});Mv.call(this,t)}catch($g){Rv.call(this)}}function Mv(e){const t=jv.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:a}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const s=t.levels,l=s.length;if(this._minimumLevel=i(s[0],0),this._maximumLevel=i(s[l-1],l-1),n(this._tilingScheme)||(this._tilingScheme=new o({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const e=r.toRadians(t.left),i=r.toRadians(t.right),n=r.toRadians(t.bottom),o=r.toRadians(t.top);this._rectangle=new a(e,n,i,o)}const c=this._tilingScheme;this._rectangle.west<c.rectangle.west&&(this._rectangle.west=c.rectangle.west),this._rectangle.east>c.rectangle.east&&(this._rectangle.east=c.rectangle.east),this._rectangle.south<c.rectangle.south&&(this._rectangle.south=c.rectangle.south),this._rectangle.north>c.rectangle.north&&(this._rectangle.north=c.rectangle.north);const u=c.positionToTileXY(a.southwest(this._rectangle),this._minimumLevel),d=c.positionToTileXY(a.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(d.x-u.x)+1)*(window.Math.abs(d.y-u.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=c,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function jv(e){const t="http://www.supermap.com/SuperMapCache/sci3d",i=(e=(new DOMParser).parseFromString(e,"application/xml")).childNodes[0],n=function(e,t,i){if(Cesium.defined(e)){const n=[],o=e.getElementsByTagNameNS("*",t),r=o.length;for(let e=0;e<r;e++){const r=o[e];r.localName===t&&-1!==i.indexOf(r.namespaceURI)&&n.push(r)}return n}}(Dv(i,"Levels",t),"Level",t)||[],o=[];for(let v=0;v<n.length;v++)o.push(parseInt(n[v].textContent,10));const r=Dv(i,"Bounds",t),a=Av(r,"Left",t),s=Av(r,"Right",t),l=Av(r,"Top",t),c=Av(r,"Bottom",t),u=Lv(i,"FileExtentName",t),d=Av(i,"CellWidth",t),p=Av(i,"CellHeight",t),m=Lv(i,"CacheName",t);return this._name=m||"",{left:a,right:s,top:l,bottom:c,fileExtentName:u,levels:o,imageSizeWidth:d,imageSizeHeight:p}}function Lv(e,t,i){const n=Dv(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function Av(e,t,i){const n=Dv(e,t,i);if(Cesium.defined(n)){const e=parseFloat(n.textContent);return isNaN(e)?void 0:e}}function Dv(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,o=n.length;for(let e=0;e<o;e++){const o=n[e];if(o.localName===t&&-1!==i.indexOf(o.namespaceURI))return o}}}function kv(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:o,Math:r,Rectangle:a,WebMercatorTilingScheme:s}=Cesium,l=e.prjCoordSys.coordUnit;this._coordUnit=l;const c=e.bounds,u=e.visibleScales;if(n(u)&&u.length>1&&n(this._maximumLevel)){const e=u[u.length-1];this._maximumLevel=function(e){for(let t=Pv.length;t--;)if(e[t]<=e)return t}(e)}if("DEGREE"===l)this._tilingScheme=new o,c.left=r.clamp(c.left,-180,180),c.bottom=r.clamp(c.bottom,-90,90),c.right=r.clamp(c.right,-180,180),c.top=r.clamp(c.top,-90,90),this._rectangle=a.fromDegrees(c.left,c.bottom,c.right,c.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const e=new t(c.left,c.bottom,0);e.x=Math.max(-20037508.342789244,e.x),e.y=Math.max(-20037508.342789244,e.y);const i=new t(c.right,c.top,0);i.x=Math.min(20037508.342789244,i.x),i.y=Math.min(20037508.342789244,i.y),this._tilingScheme=new s;const n=this._tilingScheme.projection.unproject(e),o=this._tilingScheme.projection.unproject(i);this._rectangle=new a(n.longitude,n.latitude,o.longitude,o.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function Rv(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";Sv=e.reportError(Sv,this,this._errorEvent,i,0,0,0,new Error(i)),this._readyPromise.reject(new t(i))}var Bv=P({name:"VcImageryProviderSupermap",props:{url:String,...rn,...on,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...mn},emits:ml,setup(e,t){const i=r();i.cesiumClass="SuperMapImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||xv,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e),i=new Cesium.SuperMapImageryProvider(t);return Cesium.SuperMapVersion||await i.init(),i},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Nv={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class Vv{constructor(e){const{Resource:t,defaultValue:i,Credit:n,Event:o}=Cesium;this._subdomains=e.subdomains||["1","2","3"],this._url=e.url||[e.protocol||"",Nv[e.mapStyle]||Nv.vector].join("");const r=t.createIfNeeded(this._url);r.appendForwardSlash(),this._ready=!1,this._resource=r,this._tileDiscardPolicy=e.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=e.minimumLevel||0,this._maximumLevel=e.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(e.rectangle,this._tilingScheme.rectangle);let a=e.credit;"string"==typeof a&&(a=new n(a)),this._credit=a,this.enablePickFeatures=i(e.enablePickFeatures,!1),this._hasAlphaChannel=i(e.hasAlphaChannel,!0),this._errorEvent=new o,this._readyPromise=Jo(),this._ready=!0,this._readyPromise.resolve(!0),this._style=e.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,zv.call(this,e,t,i,n))}pickFeatures(e,t,i,n,o){}}function zv(e,t,i,n){let o=this._url;const r=this._subdomains,a=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;o=o.replace("{s}",r[(e+t+i)%r.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",a);return this._resource.getDerivedResource({url:o,request:n})}var Fv=P({name:"VcImageryProviderTencent",props:{...$i,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...en,...rn,...on,...Qi,...Ji,...mn},emits:ml,setup(e,t){const i=r();i.cesiumClass="TencentImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||Vv,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TencentImageryProvider(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Hv={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"},Uv={},Wv={},Gv={},$v={},Zv={},qv={};class Yv{constructor(e){Object.keys(Hv).forEach((t=>{switch(Uv[Hv[t]]=e.protocol+"://{s}.tianditu.gov.cn/"+Hv[t]+"/wmts",Wv[Hv[t]]=Hv[t].slice(0,3),Gv[Hv[t]]=Hv[t].slice(4),$v[Hv[t]]="tiles","w"===Gv[Hv[t]]?Zv[Hv[t]]="900913":Zv[Hv[t]]="4490",Hv[t]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":qv[Hv[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":qv[Hv[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":qv[Hv[t]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":qv[Hv[t]]=["1","2","3","4","5","6","7","8","9","10"]}}));const{Credit:t,Resource:i,defaultValue:n,Event:o,GeographicTilingScheme:r,WebMercatorTilingScheme:a}=Cesium;e=n(e,{}),this._mapStyle=n(e.mapStyle,Hv.IMG_W),this._url=e.url||n(e.url,Uv[this._mapStyle]);const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._token=e.token,this._layer=n(e.layer,Wv[this._mapStyle]),this._style=n(e.style,"default"),this._tileMatrixSetID=n(e.tileMatrixSetID,Gv[this._mapStyle]),this._tileMatrixLabels=n(e.tileMatrixLabels,qv[this._mapStyle]),this._format=n(e.format,$v[this._mapStyle]),this._epsgCode=Zv[this._mapStyle],this._tilingScheme="900913"===this._epsgCode?new a:new r,this._tileWidth=n(e.tileWidth,256),this._tileHeight=n(e.tileHeight,256),this._minimumLevel=n(e.minimumLevel,0),this._maximumLevel=n(e.maximumLevel,qv[this._mapStyle].length),this._rectangle=n(e.rectangle,this._tilingScheme.rectangle),this._errorEvent=new o;const l=n(e.credit,"天地图全球影像服务");this._credit="string"==typeof l?new t(l):l,this._subdomains=n(e.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=e.tileDiscardPolicy,this._ready=!0}getTileCredits(e,t,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(e,t,i,n){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");const o=Xv.call(this,e,t,i,n);return Cesium.ImageryProvider.loadImage(this,o)}pickFeatures(e,t,i,n,o){}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function Xv(e,t,i,n){var o;const{combine:r,defined:a,defaultValue:s,queryToObject:l,objectToQuery:c}=Cesium,u=(0,Object.freeze)({service:"WMTS",version:"1.0.0",request:"GetTile"});"900913"===this._epsgCode&&(i-=1);const d=this._tileMatrixLabels,p=a(d)?d[i]:i.toString(),m=this._subdomains;let v=this._url.replace("{s}",m[(e+t+i)%m.length]);const h=new z(v);let g=l(s(null==(o=h.query)?void 0:o.call(h),""));g=r(u,g),g.tilematrix=p,g.layer=this._layer,g.style=this._style,g.tilerow=t,g.tilecol=e,g.tilematrixset=this._tileMatrixSetID,g.format=this._format;const f=c(g);v=h.toString()+"?"+f,a(this._proxy)&&(v=this._proxy.getURL(v)),a(this._token)&&(v+="&tk="+this._token);return this._resource.getDerivedResource({url:v,request:n})}var Qv=P({name:"VcImageryProviderTianditu",props:{...$i,...rn,...on,...Qi,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","eia_c","eia_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"天地图全球影像服务"},...mn},emits:ml,setup(e,t){const i=r();i.cesiumClass="TiandituImageryProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||Yv,0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return new Cesium.TiandituImageryProvider(t)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Jv=P({name:"VcImageryProviderTileCoordinates",props:{...Ji,...Ki,color:{type:[Object,String,Array],default:"YELLOW"},...tn,...nn},emits:ml,setup(e,t){const i=r();return i.cesiumClass="TileCoordinatesImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var Kv=P({name:"VcImageryProviderTms",props:{url:[String,Object],...an,...en,...rn,...on,...Qi,...Ji,...Ki,...tn,...nn,flipXY:Boolean,...mn},emits:ml,setup(e,t){const i=r();return i.cesiumClass="TileMapServiceImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var eh=P({name:"VcImageryProviderTiledcache",props:{...$i,...ln,...en,...rn,...on,...Qi,...Ji,...Ki,...tn,...nn,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}},emits:ml,setup(e,t){const i=r();i.cesiumClass="UrlTemplateImageryProvider";const n=vr(e,t,i);if(void 0===n)return;i.createCesiumObject=async()=>{const t=n.transformProps(e),{Credit:i,defined:r,defaultValue:a,DeveloperError:s,Ellipsoid:l,GeographicTilingScheme:c,Rectangle:u,Resource:d,UrlTemplateImageryProvider:p}=Cesium,{url:m,dir:v,format:h}=t;if(!r(m))throw new s("options.url is required.");if(!r(v))throw new s("options.dir is required.");const g=d.createIfNeeded(m);g.url+=`?dir=${v}&scale={scale}&col={x}&row={y}&format=${h}`;const f=a(t.tilingScheme,new c({ellipsoid:a(t.ellipsoid,l.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),y=a(t.tileWidth,256),b=a(t.tileHeight,256),C=t.maximumLevel,w=a(t.minimumLevel,0),O=a(t.rectangle,f.rectangle),_=f.positionToTileXY(u.southwest(O),w),x=f.positionToTileXY(u.northeast(O),w),S=(Math.abs(x.x-_.x)+1)*(Math.abs(x.y-_.y)+1);if(S>4)throw new s("The rectangle and minimumLevel indicate that there are "+S+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let E=a(t.credit,"");return"string"==typeof E&&(E=new i(E)),new p({url:g,credit:E,tilingScheme:f,tileWidth:y,tileHeight:b,minimumLevel:w,maximumLevel:C,rectangle:O,customTags:{scale:(t,i,n,r)=>{const a=1/e.scales[r];return o(t,"{scale}",a)}}})};const o=(e,t,i)=>{if(e&&e.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(e.urlSchemeZeroPadding,t)){const n=e.urlSchemeZeroPadding[t];if("string"==typeof n){const e=n.length;e>1&&(i=i.length>=e?i:new Array(e-i.toString().length+1).join("0")+i)}}return i};return()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var th=P({name:"VcImageryProviderUrltemplate",props:{...$i,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...cn,...en,...rn,...on,...Qi,...Ji,...Ki,...tn,...nn,hasAlphaChannel:{type:Boolean,default:!0},...un,...Xi,customTags:Object,...mn},emits:ml,setup(e,t){const i=r();return i.cesiumClass="UrlTemplateImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ih=P({name:"VcImageryProviderWms",props:{...$i,...Yi,parameters:Object,getFeatureInfoParameters:Object,...Xi,...un,...Qi,...Ji,...Ki,...tn,...nn,...rn,...on,crs:String,srs:String,...en,...cn,...dn,...pn,getFeatureInfoUrl:[String,Object]},emits:ml,setup(e,t){const i=r();return i.cesiumClass="WebMapServiceImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var nh=P({name:"VcImageryProviderWmts",props:{...$i,...ln,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...dn,...pn,dimensions:Object,...tn,...nn,...Ji,...Qi,...rn,...on,...Ki,...en,...cn},emits:ml,setup(e,t){const i=r();return i.cesiumClass="WebMapTileServiceImageryProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var oh=P({name:"VcTerrainProviderCesium",props:{url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},assetId:Number,...Ki,...en},emits:ml,setup(e,t){const i=r();i.cesiumClass="CesiumTerrainProvider";const n=vr(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const t=n.transformProps(e);return Cesium.defined(e.assetId)&&"function"==typeof Cesium[i.cesiumClass].fromIonAssetId?await Cesium.CesiumTerrainProvider.fromIonAssetId(e.assetId,t):"function"==typeof Cesium[i.cesiumClass].fromUrl?Cesium.defined(t.url)?await Cesium.CesiumTerrainProvider.fromUrl(t.url,t):await Cesium.createWorldTerrainAsync({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask}):Cesium.defined(t.url)?new Cesium.CesiumTerrainProvider(t):Cesium.createWorldTerrain({requestVertexNormals:t.requestVertexNormals,requestWaterMask:t.requestWaterMask})},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var rh=P({name:"VcTerrainProviderArcgis",props:{url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...Ki,...Zi},emits:ml,setup(e,t){const i=r();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var ah=P({name:"VcTerrainProviderVrTheworld",props:{url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...Ki,...en},emits:ml,setup(e,t){const i=r();return i.cesiumClass="VRTheWorldTerrainProvider",vr(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var sh=P({name:"VcTerrainProviderTianditu",props:{url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String},emits:ml,setup(e,t){const i=r();i.cesiumClass="GeoTerrainProvider";const n=vr(e,t,i);if(void 0===n)return;const{emit:o}=t,a=hr();let s;return i.createCesiumObject=async()=>new Promise(((t,i)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{0===n.unwatchFns.length&&n.setPropsWatcher(!0);const i=[];for(let t=0;t<e.subdomains.length;t++){const n=e.url.replace("{s}",e.subdomains[t])+"mapservice/swdx?tk="+e.token;i.push(n)}t(new Cesium.GeoTerrainProvider({urls:i}))}})),i.unmount=async()=>{var e;const t=new Cesium.EllipsoidTerrainProvider;return null==(e=null==t?void 0:t.readyPromise)||e.then((()=>{Pe(i,"readyPromise")&&o("readyPromise",t,null==a?void 0:a.viewer,i.proxy)})),a&&(a.viewer.terrainProvider=t),null==s||s.parentNode.removeChild(s),!0},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});[nv,ov,pv,mv,vv,hv,gv,fv,yv,bv,Bv,Fv,Qv,Jv,Kv,eh,th,ih,nh,oh,rh,ah,sh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const lh=nv,ch=ov,uh=pv,dh=mv,ph=vv,mh=hv,vh=gv,hh=fv,gh=yv,fh=bv,yh=Bv,bh=Fv,Ch=Qv,wh=Jv,Oh=Kv,_h=eh,xh=th,Sh=ih,Eh=nh,Ph=oh,Th=rh,Ih=ah,Mh=sh;var jh=P({name:"VcDatasourceCustom",props:{...Et,...so,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}},emits:gl,setup(e,t){const i=r();return i.cesiumClass="CustomDataSource",Co(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Lh=P({name:"VcDatasourceCzml",props:{...Et,...so,entities:{type:Array,default:()=>[]},czml:{type:[String,Object,Array],required:!0},...io,...en,destroy:{type:Boolean,default:!1}},emits:gl,setup(e,t){const i=r();i.cesiumClass="CzmlDataSource";const n=Co(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,t)},()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Ah=P({name:"VcDatasourceGeojson",props:{...Et,...so,entities:{type:Array,default:()=>[]},...to,...io,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:He}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:He}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:He}},...Ni,...en,destroy:{type:Boolean,default:!1}},emits:gl,setup(e,t){const i=r();i.cesiumClass="GeoJsonDataSource";const n=Co(e,t,i);if(void 0!==n)return i.createCesiumObject=async()=>{const t=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,t)},()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});var Dh=P({name:"VcDatasourceKml",props:{...Et,...so,entities:{type:Array,default:()=>[]},...to,camera:Object,canvas:HTMLCanvasElement,...io,...Ni,...Ki,...en,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]},emits:gl,setup(e,t){const i=r();i.cesiumClass="KmlDataSource";const n=Co(e,t,i),o=hr();return i.createCesiumObject=async()=>{const t=null==n?void 0:n.transformProps(e);return t.camera||(t.camera=null==o?void 0:o.viewer.camera),t.canvas||(t.canvas=null==o?void 0:o.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",t)},()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[jh,Lh,Ah,Dh].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const kh=jh,Rh=Lh,Bh=Ah,Nh=Dh;var Vh=P({name:"VcGraphicsBillboard",props:{...bt,...xt,...wt,...ht,...yt,...It,...ft,...dt,..._t,...ut,...Pt,...Mt,...gt,...St,...Tt,...Ot,...mt,...Et,...vt,...Ct},emits:pl,setup(e,t){const i=r();return i.cesiumClass="BillboardGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var zh=P({name:"VcGraphicsBox",props:{...Et,...jt,...ft,...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt},emits:pl,setup(e,t){const i=r();return i.cesiumClass="BoxGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Fh=P({name:"VcGraphicsCorridor",props:{...Et,...Nt,...Mt,...gt,...ft,...Vt,...zt,...Ft,...Ht,...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt,...Ut,...Wt},emits:pl,setup(e,t){const i=r();return i.cesiumClass="CorridorGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Hh=P({name:"VcGraphicsCylinder",props:{...Et,...Gt,...$t,...Zt,...ft,...Lt,...At,...Dt,...kt,...Rt,...qt,...Yt,...Bt,...vt},emits:pl,setup(e,t){const i=r();return i.cesiumClass="CylinderGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Uh=P({name:"VcGraphicsEllipse",props:{...Et,...Xt,...Qt,...gt,...ft,...Vt,...zt,..._t,...Jt,...Ht,...Lt,...At,...Dt,...kt,...Rt,...qt,...Bt,...vt,...Ut,...Wt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipseGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Wh=P({name:"VcGraphicsEllipsoid",props:{...Et,...Kt,...ei,...ti,...ii,...ni,...oi,...ft,...Lt,...At,...Dt,...kt,...Rt,...ri,...ai,...si,...Bt,...vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="EllipsoidGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Gh=P({name:"VcGraphicsLabel",props:{...Et,...li,...ci,...ui,...xt,...di,...pi,...mi,...wt,...ht,...yt,...It,...ft,...vi,...kt,...Rt,...Tt,...Ot,...St,...vt,...mt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="LabelGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var $h=P({name:"VcGraphicsModel",props:{...Et,...hi,...xt,...gi,...fi,...yi,...bi,...Ci,...Bt,...ft,...wi,...Oi,...dt,..._i,...xi,...Si,...Ei,...vt,...Pi,...Ti,...Ii},emits:ul,setup(e,t){const i=r();return i.cesiumClass="ModelGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Zh=P({name:"VcGraphicsPath",props:{...Et,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...Mt,resolution:{type:[Number,Object,Function],default:60},...At,...vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PathGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});var qh=P({name:"VcGraphicsPlane",props:{...Et,...Mi,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:De}},...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PlaneGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Yh=P({name:"VcGraphicsPoint",props:{...Et,...ji,...ft,...dt,...kt,...Rt,...St,...Tt,...vt,...mt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PointGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Xh=P({name:"VcGraphicsPolygon",props:{...Et,...Li,...gt,...ft,...Vt,...zt,...Jt,...Ht,...Lt,...At,...Dt,...kt,...Rt,...Ai,...Di,...ki,...Ri,...Bt,...vt,...Ut,...Wt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolygonGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Qh=P({name:"VcGraphicsPolyline",props:{...Et,...Nt,...Mt,...Ht,...At,...Bi,...Ri,...Ni,...Bt,...vt,...Ut,...Wt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolylineGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Jh=P({name:"VcGraphicsPolylineVolume",props:{...Et,...Nt,...Vi,...Ft,...Ht,...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="PolylineVolumeGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var Kh=P({name:"VcGraphicsRectangle",props:{...Et,...zi,...gt,...ft,...Vt,...zt,..._t,...Jt,...Ht,...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt,...Ut,...Wt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="RectangleGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var eg=P({name:"VcGraphicsTileset",props:{...Et,...hi,...Fi},emits:ul,setup(e,t){const i=r();return i.cesiumClass="Cesium3DTilesetGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});var tg=P({name:"VcGraphicsWall",props:{...Et,...Nt,...Hi,...Ui,...Ht,...Lt,...At,...Dt,...kt,...Rt,...Bt,...vt},emits:ul,setup(e,t){const i=r();return i.cesiumClass="WallGraphics",Oo(e,t,i),()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||"v-if"))}}});[Vh,zh,Fh,Hh,Uh,Wh,Gh,$h,Zh,qh,Yh,Xh,Qh,Jh,Kh,eg,tg].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const ig=Vh,ng=zh,og=Fh,rg=Hh,ag=Uh,sg=Wh,lg=Gh,cg=$h,ug=Zh,dg=qh,pg=Yh,mg=Xh,vg=Qh,hg=Jh,gg=Kh,fg=eg,yg=tg;var bg=P({name:"VcPostProcessStage",props:{fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...ro,...ao,name:String},emits:ul,setup(e,t){const i=r();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:o}=n;return i.mount=async()=>{const{postProcessStages:e}=o,t=e.add(i.cesiumObject);return e.contains(t)},i.unmount=async()=>{const{postProcessStages:e}=o;return null==e?void 0:e.remove(i.cesiumObject)},()=>{var e;return M(le((null==(e=i.proxy)?void 0:e.$options.name)||""))}}});const Cg={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]};var wg=P({name:"VcPostProcessStageScan",props:{type:{type:String,default:"radar"},options:Object},emits:ul,setup(e,t){const i=r();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const a=o(""),l=o(null),{$services:c}=n,u=function(e){return{webgl:t=>{var i;const{viewer:n}=e;let o="\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  in vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform vec3 u_scanLineNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 v01 = testPt - ptOnLine;\n    normalize(v01);\n    vec3 temp = cross(v01, lineNormal);\n    float d = dot(temp, u_scanPlaneNormalEC);\n    return d > 0.5;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)\n  {\n    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);\n    return length(tempPt - ptOnLine);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    float twou_radius = u_radius * 2.0;\n    if(dis < u_radius)\n    {\n      float f0 = 1.0 -abs(u_radius - dis) / u_radius;\n      f0 = pow(f0, 64.0);\n      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;\n      float f = 0.0;\n      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))\n      {\n        float dis1= length(prjOnPlane.xyz - lineEndPt);\n        f = abs(twou_radius -dis1) / twou_radius;\n        f = pow(f, 3.0);\n      }\n      out_FragColor = mix(out_FragColor, u_scanColor, f + f0);\n    }\n  }\n";(null==(i=e.viewer.scene.context)?void 0:i.webgl2)||(o=o.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),o=o.replace(/texture\(/g,"texture2D("),o=o.replace(/out_FragColor/g,"gl_FragColor"));const r=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),a=Cesium.Cartographic.toCartesian(r,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(a.x,a.y,a.z,1),l=new Cesium.Cartographic(r.longitude,r.latitude,r.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=new Cesium.Cartographic(r.longitude+Cesium.Math.toRadians(.001),r.latitude,r.height),p=Cesium.Cartographic.toCartesian(d,n.scene.globe.ellipsoid),m=new Cesium.Cartesian4(p.x,p.y,p.z,1),v=new Cesium.Quaternion,h=new Cesium.Matrix3,g=(new Date).getTime(),f=new Cesium.Cartesian4,y=new Cesium.Cartesian4,b=new Cesium.Cartesian4,C=new Cesium.Cartesian3,w=new Cesium.Cartesian3;return{shaderSource:o,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f),t=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,y);return C.x=t.x-e.x,C.y=t.y-e.y,C.z=t.z-e.z,Cesium.Cartesian3.normalize(C,C),C},u_radius:t.radius,u_scanLineNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,f),i=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,y),o=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,m,b);C.x=i.x-e.x,C.y=i.y-e.y,C.z=i.z-e.z,Cesium.Cartesian3.normalize(C,C),w.x=o.x-e.x,w.y=o.y-e.y,w.z=o.z-e.z;const r=((new Date).getTime()-g)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(C,r*Cesium.Math.PI*2,v),Cesium.Matrix3.fromQuaternion(v,h),Cesium.Matrix3.multiplyByVector(h,w,w),Cesium.Cartesian3.normalize(w,w),w},u_scanColor:t.color}}}}}(c),d=function(e){return{webgl:t=>{var i;const{viewer:n}=e;let o="\n  uniform sampler2D colorTexture;\n  uniform sampler2D depthTexture;\n  in vec2 v_textureCoordinates;\n  uniform vec4 u_scanCenterEC;\n  uniform vec3 u_scanPlaneNormalEC;\n  uniform float u_radius;\n  uniform vec4 u_scanColor;\n  vec4 toEye(in vec2 uv, in float depth)\n  {\n    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));\n    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);\n    posInCamera =posInCamera / posInCamera.w;\n    return posInCamera;\n  }\n  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)\n  {\n    vec3 v01 = point -planeOrigin;\n    float d = dot(planeNormal, v01) ;\n    return (point - planeNormal * d);\n  }\n  float getDepth(in vec4 depth)\n  {\n    float z_window = czm_unpackDepth(depth);\n    z_window = czm_reverseLogDepth(z_window);\n    float n_range = czm_depthRange.near;\n    float f_range = czm_depthRange.far;\n    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);\n  }\n  void main()\n  {\n    out_FragColor = texture(colorTexture, v_textureCoordinates);\n    float depth = getDepth( texture(depthTexture, v_textureCoordinates));\n    vec4 viewPos = toEye(v_textureCoordinates, depth);\n    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);\n    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);\n    if(dis < u_radius)\n    {\n      float f = 1.0 -abs(u_radius - dis) / u_radius;\n      f = pow(f, 4.0);\n      out_FragColor = mix(out_FragColor, u_scanColor, f);\n    }\n  }\n";(null==(i=n.scene.context)?void 0:i.webgl2)||(o=o.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),o=o.replace(/texture\(/g,"texture2D("),o=o.replace(/out_FragColor/g,"gl_FragColor"));const r=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),a=Cesium.Cartographic.toCartesian(r,n.scene.globe.ellipsoid),s=new Cesium.Cartesian4(a.x,a.y,a.z,1),l=new Cesium.Cartographic(r.longitude,r.latitude,r.height+500),c=Cesium.Cartographic.toCartesian(l,n.scene.globe.ellipsoid),u=new Cesium.Cartesian4(c.x,c.y,c.z,1),d=(new Date).getTime(),p=new Cesium.Cartesian4,m=new Cesium.Cartesian4,v=new Cesium.Cartesian3;return{shaderSource:o,uniforms:{u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,p)},u_scanPlaneNormalEC:function(){const e=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,s,p),t=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,u,m);return v.x=t.x-e.x,v.y=t.y-e.y,v.z=t.z-e.z,Cesium.Cartesian3.normalize(v,v),v},u_radius:function(){return t.radius*(((new Date).getTime()-d)%t.interval)/t.interval},u_scanColor:t.color}}}}}(c);let p=[];const m=s((()=>Object.assign({},Cg,e.options)));return p.push(b((()=>m),(e=>{i.mounted&&i.proxy.reload()}),{deep:!0})),i.createCesiumObject=async()=>{const t=n.transformProps(m.value);let i;return"radar"===e.type?i=u.webgl(t):"circle"===e.type&&(i=d.webgl(t)),a.value=i.shaderSource,l.value=i.uniforms,!0},f((()=>{p.forEach((e=>e())),p=[]})),()=>S(bg,{fragmentShader:a.value,uniforms:l.value})}});var Og=P({name:"VcPostProcessStageCollection",props:{postProcesses:{type:Array,default:()=>[]}},emits:ul,setup(e,t){const i=r();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=bo(e,t,i);if(void 0===n)return;const{$services:o}=n,a=[];let s=[];return s.push(b((()=>e.postProcesses),(e=>{var t,n;i.mounted&&(null==(n=(t=i.proxy).reload)||n.call(t))}),{deep:!0})),i.createCesiumObject=async()=>a,i.mount=async()=>{const{postProcessStages:t}=o;return e.postProcesses.forEach((e=>{const i=n.transformProps(e);a.push(t.add(new Cesium.PostProcessStage(i)))})),!0},i.unmount=async()=>{const{postProcessStages:e}=o;return a.forEach((t=>{e.remove(t)})),a.length=0,!0},f((()=>{s.forEach((e=>e())),s=[]})),()=>{var e,n;return t.slots.default?S("i",{class:le((null==(e=i.proxy)?void 0:e.$options.name)||""),style:{display:"none !important"}},aa(t.slots.default)):M(le((null==(n=i.proxy)?void 0:n.$options.name)||""))}}});[bg,wg,Og].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const _g=bg,xg=wg,Sg=Og;var Eg=P({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>co},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},reloadMode:{type:String,default:"all"}},setup(e,{slots:t}){const i=Ce(e);return()=>F(t,"default",{config:null==i?void 0:i.value})}});Eg.install=e=>{e.component(Eg.name,Eg)};const Pg=Eg,Tg=Pg,Ig={...ul,stop:e=>!0};var Mg=P({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...zn},emits:Ig,setup(e,t){var i;const n=r();n.cesiumClass="VcAnalysisFlood",n.cesiumEvents=[];const a=bo(e,t,n);if(void 0===a)return;const{emit:s}=t,l=o(!1);null==(i=Ie(n).proxy.creatingPromise)||i.then((()=>{l.value=!0}));const c=o(!1),u=o(null),d=o(-1),p=o(null);let m=!1,v=[];v.push(b((()=>e.minHeight),(e=>{d.value=e}))),n.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:t}=Cesium;return u.value={color:t.fromColor(He(e.color))},p.value},n.mount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.addEventListener(h),!0},n.unmount=async()=>{const{viewer:e}=a.$services;return e.clock.onTick.removeEventListener(h),d.value=-1,c.value=!1,!0};const h=()=>{if(c.value)if(d.value<=e.maxHeight)d.value+=e.speed,m=!1;else{Pe(n,"stop")&&s("stop",p.value),m=!0,e.loop?d.value=e.minHeight:c.value=!1}};return f((()=>{v.forEach((e=>e())),v=[]})),Object.assign(n.proxy,{start:t=>{d.value=Cesium.defined(t)?t:e.minHeight,c.value=!0},pause:()=>{c.value=!c.value,m&&(d.value=e.minHeight)},stop:()=>{d.value=-1,c.value=!1},getCurrentHeight:()=>d.value}),()=>{if(l.value){const{createGuid:t}=Cesium;return S(td,{asynchronous:!1,ref:p},(()=>S(ep,{id:t(),attributes:u.value},(()=>S(Qp,{extrudedHeight:d.value,polygonHierarchy:e.polygonHierarchy})))))}return M("v-if")}}});const jg=Object.assign({},Wc,{icon:"vc-icons-analysis-sightline"}),Lg=Object.assign({},Jc,{polylineOpts:Object.assign({},qc,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},Gc,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),Ag=Object.assign({},Wc,{icon:"vc-icons-analysis-viewshed"}),Dg=Object.assign({},eu,{pointOpts:Object.assign({},$c,{show:!1}),polylineOpts:Object.assign({},qc,{width:15}),primitiveOpts:Object.assign({},Gc,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},Xc),removeAll:Object.assign({},Xc,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),kg=Object.assign({},{}),Rg=Object.assign({},Wc,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),Bg=["sightline","viewshed"],Ng={...lu,analyses:{type:Array,default:()=>Bg,validator:e=>{let t=!0;return e.forEach((e=>{Bg.includes(e)||(t=!1)})),t}},mainFabOpts:{type:Object,default:()=>Rg},fabActionOpts:{type:Object,default:()=>kg},sightlineActionOpts:{type:Object,default:()=>jg},sightlineAnalysisOpts:{type:Object,default:()=>Lg},viewshedActionOpts:{type:Object,default:()=>Ag},viewshedAnalysisOpts:{type:Object,default:()=>Dg}},Vg=pe(Ng);var zg=P({name:"VcAnalysisSightline",props:{...su,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:fl,setup:(e,t)=>"segment"===e.sightlineType||"circle"===e.sightlineType?wm(e,t,"VcAnalysisSightline"):"polyline"===e.sightlineType?_m(e,t,"VcAnalysisSightline"):void 0}),Fg=P({name:"VcAnalysisViewshed",props:{...su,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:fl,setup:(e,t)=>wm(e,t,"VcAnalysisViewshed")});var Hg=P({name:"VcAnalyses",props:Ng,emits:{...fl,fabUpdated:e=>!0,clearEvt:(e,t)=>!0},setup(e,t){var i;const n=r();n.cesiumClass="VcAnalyses";const{t:a}=mo(),l={},c=O(Object.assign({},Vg.clearActionOpts,e.clearActionOpts)),u=O(Object.assign({},Vg.mainFabOpts,e.mainFabOpts)),d=O(Object.assign({},Vg.fabActionOpts,e.fabActionOpts)),p=O(Object.assign({},Vg.sightlineActionOpts,y("sightlineActionOpts"))),m=O(ve(X(Vg.sightlineAnalysisOpts),e.sightlineAnalysisOpts)),v=O(Object.assign({},Vg.viewshedActionOpts,y("viewshedActionOpts"))),h=O(ve(X(Vg.viewshedAnalysisOpts),e.viewshedAnalysisOpts));l.sightlineActionOpts=p,l.sightlineAnalysisOpts=m,l.viewshedActionOpts=v,l.viewshedAnalysisOpts=h,l.clearActionOpts=c;const g=s((()=>e.analyses.map((e=>({name:e,type:"analysis",actionStyle:{background:l[`${V(e)}ActionOpts`].color,color:l[`${V(e)}ActionOpts`].textColor},actionClass:`vc-analysis-${e} vc-analysis-button`,actionRef:o(null),actionOpts:l[`${V(e)}ActionOpts`],cmp:f(e),cmpRef:o(null),cmpOpts:l[`${V(e)}AnalysisOpts`],tip:l[`${V(e)}ActionOpts`].tooltip.tip||a(`vc.analysis.${V(e)}.tip`),isActive:!1})))));function f(e){switch(e){case"sightline":return zg;case"viewshed":return Fg;default:return}}function y(t){return q(Vg[t],e[t])?d:Object.assign({},d,e[t])}return null==(i=Am(e,t,n,g,u,c,"analysis"))?void 0:i.renderContent}});[Mg,Hg].forEach((e=>{e.install=t=>{t.component(e.name,e)}}));const Ug=Hg;var Wg=((e=[])=>({version:"3.2.5",install:(t,i)=>{if(t[_e])return;t[_e]=!0;const n=Object.assign({cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},i);e.forEach((e=>{t.use(e,n)})),Ce(n,t,!0)}}))([...[Cl,Lc,Ac,Dc,kc,Rc,Bc,Nc,Vc,zc,Fc,Hc,Uc,km,ev,Nu,lh,ch,uh,dh,ph,mh,vh,hh,gh,fh,yh,bh,Ch,wh,Oh,_h,xh,Sh,Eh,Ph,Th,Ih,Mh,kh,Rh,Bh,Nh,Ru,ig,ng,og,rg,ag,sg,lg,cg,ug,dg,pg,mg,vg,hg,gg,fg,yg,td,id,nd,od,rd,ad,sd,ud,dd,pd,ld,md,zd,Fd,Hd,Ud,Wd,Gd,$d,Zd,qd,Yd,Xd,Qd,Kd,Lp,Ap,Dp,kp,Rp,Bp,Np,Vp,zp,Fp,Hp,Up,Wp,Gp,$p,Zp,qp,Yp,Xp,Qp,Jp,Kp,em,tm,im,nm,om,rm,am,sm,lm,vm,hm,fm,ym,gm,bm,_g,xg,Sg,Ws,Gs,ol,rl,al,$s,Zs,qs,Ys,Xs,Qs,Js,Ks,el,tl,il,nl,sl,ll,cl,Pg,Mg,Ug]]),Gg={name:"en-us",nativeName:"English (US)",vc:{loadError:"needs to be child of VcViewer",navigation:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view.",innerTip:"Drag inner gyroscope: free orbit. TIP: You can also free orbit by holding the CTRL key and dragging the map.",title:"Click and drag to rotate the camera."},zoomCotrol:{zoomInTip:"Zoom in",zoomResetTip:"Reset zoom",zoomOutTip:"Zoom out"},print:{printTip:"Viewer screenshot/print",printViewTitle:"VueCesium Print View",credit:"Map Credits",screenshot:"Screenshot"},myLocation:{myLocationTip:"Centre map at your current location",positioning:"Positioning...",fail:"Positioning failed",centreMap:"My Location",lat:"Lat",lng:"Lng",address:"Address"},statusBar:{lat:"Lat",lng:"Lng",zone:"ZONE",e:"E",n:"N",elev:"Elev",level:"Level",heading:"H",pitch:"P",roll:"R",cameraHeight:"CameraH",tip:"Click to switch the mouse display coordinates to UTM projection coordinates"}},navigationSm:{compass:{outerTip:"Drag outer ring: rotate view. Double-click: reset view."},zoomCotrol:{zoomInTip:"Zoom in",zoomBarTip:"Drag the bar up to zoom in, and down to zoom out.",zoomOutTip:"Zoom out"}},measurement:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},distance:{tip:"Distance",drawingTipStart:"Click the left button to draw the starting point of the distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},"component-distance":{tip:"Component Distance",drawingTipStart:"Click the left mouse button to draw the starting point of component distance measurement.",drawingTipEnd:"Click the left mouse button to draw the end point of the component distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Polyline Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},horizontal:{tip:"Horizontal Distance",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},vertical:{tip:"Vertical Distance",drawingTipStart:"Click the left button to draw the starting point of the vertical distance measurement.",drawingTipEnd:"Click the left button to draw the end point of the vertical distance measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},height:{tip:"Height ",drawingTipStart:"Click the left button to draw the height measurement point.",drawingTipEnd:"Click the left button to draw the height measurement point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},area:{tip:"Area",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Point Coordinate",drawingTipStart:"Click the left button to draw the point coordinate measurement.",drawingTipEnd:"Click the left button to draw the point coordinate measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification.",lng:"lng:",lat:"lat:",height:"height:",slope:"slope:"},rectangle:{tip:"Rectangle",drawingTipStart:"Click the left button to draw the rectangle measurement.",drawingTipEnd:"Click the left button to draw the rectangle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Regular",drawingTipStart:"Click the left button to draw the regular measurement.",drawingTipEnd:"Click the left button to draw the regular measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Circle",drawingTipStart:"Click the left button to draw the circle measurement.",drawingTipEnd:"Click the left button to draw the circle measurement.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear measurement results"}},drawing:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},pin:{tip:"Drawing pin",drawingTipStart:"Click the left button to draw a pin.",drawingTipEnd:"Click the left button to draw a pin.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},point:{tip:"Drawing point",drawingTipStart:"Click the left button to draw a point.",drawingTipEnd:"Click the left button to draw a point.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polyline:{tip:"Drawing polyline",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},polygon:{tip:"Drawing polygon",drawingTipStart:"Click the left button to draw the first point.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the drawing.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},rectangle:{tip:"Drawing rectangle",drawingTipStart:"Click the left button to draw the starting point of the rectangle.",drawingTipEnd:"Click the left button to draw the end point of the rectangle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},circle:{tip:"Drawing circle",drawingTipStart:"Click the left button to draw the starting point of the circle.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},regular:{tip:"Drawing regular",drawingTipStart:"Click the left button to draw the starting point of the regular.",drawingTipEnd:"Click the left button to draw the end point of the circle.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear drawing results"}},analysis:{expand:"Expand",collapse:"Collapse",editor:{move:"Move the point",insert:"Insert a point",remove:"Remove the point",removeAll:"Remove all the points"},sightline:{tip:"Sightline",drawingTipStart:"Click the left button to draw the view point of the sightline analysis.",drawingTipEnd:"Click the left button to draw the next point, and double-click the left button to end the sightline analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},viewshed:{tip:"Viewshed",drawingTipStart:"Click the left button to draw the view point of the viewshed analysis.",drawingTipEnd:"Click the left button to draw the end point of the viewshed analysis.",drawingTipEditing:"Move the mouse to modify the node, click the left button to confirm the modification,\nand click the right button to discard the modification."},clear:{tip:"Clear analysis results"}},overview:{show:"Show",hidden:"Hidden"},typhoon:{warn:"Failed to play typhoon, reason: no typhoon data with corresponding number found."}}};export{Vu as A,Sh as B,bh as C,Gg as D,co as E,Wg as F,Gd as V,fo as a,Re as b,ep as c,qp as d,Kp as e,Ye as f,nd as g,rd as h,Ud as i,Qd as j,Ug as k,Ws as l,ke as m,Cl as n,Tg as o,cr as p,aa as q,Uc as r,zd as s,Wd as t,hr as u,Bh as v,kh as w,ym as x,hm as y,ad as z};
