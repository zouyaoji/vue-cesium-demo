import{bU as e,c2 as t,bO as o,c3 as a,c4 as r,c5 as s,c6 as n,bu as i,c7 as l,c8 as c,c9 as d,ca as u,cb as m,cc as p,cd as h,ce as g,cf as f,cg as v,ch as y,ci as b,cj as C,ck as k,br as w,bt as _,bv as x,cl as S,cm as L,cn as O,co as T,cp as D,cq as V,bY as P,bD as I,cr as R,cs as B,bR as q,ct as M,bT as j,cu as E,bA as A,cv as N,bq as z,cw as F,bE as $,bF as H,cx as U,cy as G,cz as Q,cA as W,cB as J,cC as Y,cD as K,cE as Z,c1 as X,cF as ee,cG as te,cH as oe,by as ae,bw as re,bx as se,bC as ne,bW as ie,cI as le,cJ as ce,cK as de,cL as ue,cM as me,bs as pe}from"./vendor.f44e5f23.js";import{P as he,N as ge,Q as fe,u as ve,o as ye,D as be,a as Ce,q as ke}from"./vendor-quasar.7c732ad0.js";import{l as we}from"./vendor-lodash.bf7ff272.js";import{m as _e,u as xe,f as Se,a as Le,h as Oe,g as Te,V as De,b as Ve,c as Pe,d as Ie,e as Re,i as Be,j as qe,k as Me,l as je,n as Ee,o as Ae,p as Ne,q as ze,r as Fe}from"./vendor-vue-cesium.98f563d6.js";import"./vendor-echarts.2aea02d8.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();function $e(e="default",t=""){he.set(`VueCesiumDemo-0.0.0-${e}`,t)}function He(e="default"){return he.getItem(`VueCesiumDemo-0.0.0-${e}`)}function Ue(e="default"){he.remove(`VueCesiumDemo-0.0.0-${e}`)}const Ge={},Qe=function(e,t,o){return t&&0!==t.length?Promise.all(t.map((e=>{if(e=function(e,t){return new URL(e,t).href}(e,o),e in Ge)return;Ge[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((t,o)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>o(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e())):e()},We=[{path:"/",name:"layout",component:()=>Qe((()=>Promise.resolve().then((()=>Da))),void 0,import.meta.url),redirect:{path:"index"},children:[{name:"login",path:"/login",component:()=>Qe((()=>Promise.resolve().then((()=>Po))),void 0,import.meta.url)}]}],Je=[{path:"/:catchAll(.*)*",name:"404",component:()=>Qe((()=>Promise.resolve().then((()=>_o))),void 0,import.meta.url)}],Ye=We,Ke=[...We,...Je];const Ze=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);or.system.useLogStore(tr).push({message:"业务逻辑警告",type:"warning",meta:{error:r}}),ge.create({message:a,timeout:3e3,type:"warning"})})("[VueCesiumDemo] WARN "),Xe=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o]);const a=o.shift(),r=new Error(a);or.system.useLogStore(tr).push({message:"业务逻辑异常",type:"danger",meta:{error:r}}),ge.create({message:a,timeout:3e3,type:"negative"})})("[VueCesiumDemo] ERR "),et=((t="")=>function(...o){t&&(e(o[0])?o[0]=t.trim()+" "+o[0]:o=[t.trim(),...o])})("[VueCesiumDemo] Debug ");function tt(e,t,o){return st(e,t.geometry.coordinates,o,t)}function ot(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(st(e,r[s],o,t));return a}function at(e,t,o){return nt(e,t.geometry.coordinates,o,t)}function rt(e,a,r,s){var n,i;const l=t(s.properties,"checked");s.properties.actualRenderingType=r;const c={position:a,show:l,feature:we.exports.cloneDeep(s)},d=null==(n=s.properties)?void 0:n.props,u=d&&o(d)?d:d?JSON.parse(d):{},m=Object.assign({},e[r],u[r]);if(c[r]={...m},"model"===r){const e=JSON.parse((null==(i=s.properties)?void 0:i.hpr)||"{}");if(Array.isArray(e)){const t=_e(a),o=new Cesium.HeadingPitchRoll(...e);c.orientation=Cesium.Transforms.headingPitchRollQuaternion(t,o)}}return c}function st(e,o,n,i){var l,c,d,u,m,p,h,g;const f=t(i.properties,"checked");if(i.properties.actualRenderingType=n,"polygon"===n){return at(e,a(i),n)}if("billboard"===n||"point"===n||"label"===n){const t={show:f,position:("MultiPolygon"===i.geometry.type?r(i):s(i)).geometry.coordinates,feature:we.exports.cloneDeep(i)};switch(n){case"billboard":{const o=Object.assign({},e.billboard,null==(c=null==(l=i.properties)?void 0:l.props)?void 0:c.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(u=null==(d=i.properties)?void 0:d.props)?void 0:u.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(p=null==(m=i.properties)?void 0:m.props)?void 0:p.label);t.label={text:i.properties.text||i.properties.name,...o}}}return t}return{show:f,polyline:{positions:o,...Object.assign({},e.polyline,null==(g=null==(h=i.properties)?void 0:h.props)?void 0:g.polyline)},feature:we.exports.cloneDeep(i)}}function nt(e,o,a,i){var l,c,d,u,m,p,h,g;const f=t(i.properties,"checked");if(i.properties.actualRenderingType=a,"polyline"===a){if("MultiPolygon"===i.geometry.type){const t=n(i),o=[];return t.features.forEach((t=>{"LineString"===t.geometry.type?o.push(tt(e,t,a)):o.push(...ot(e,t,a))})),o}if("Polygon"===i.geometry.type){const t=n(i);return tt(e,t,a)}}else{if("polygon"===a){const t=[];for(let e=1;e<o.length;e++)t.push({positions:o[e]});const a=Object.assign({},e.polygon,null==(c=null==(l=i.properties)?void 0:l.props)?void 0:c.polygon);return{show:f,polygon:{hierarchy:{positions:o[0],holes:t},height:0,...a},feature:we.exports.cloneDeep(i)}}if("billboard"===a||"point"===a||"label"===a){const t={show:f,position:("MultiPolygon"===i.geometry.type?r(i):s(i)).geometry.coordinates,feature:we.exports.cloneDeep(i)};switch(a){case"billboard":{const o=Object.assign({},e.billboard,null==(u=null==(d=i.properties)?void 0:d.props)?void 0:u.billboard);t.billboard={...o};break}case"point":{const o=Object.assign({},e.point,null==(p=null==(m=i.properties)?void 0:m.props)?void 0:p.point);t.point={...o};break}case"label":{const o=Object.assign({},e.label,null==(g=null==(h=i.properties)?void 0:h.props)?void 0:g.label);t.label={text:i.properties.text||i.properties.name,...o}}}return t}}}const it={LineString:tt,MultiLineString:ot,MultiPoint:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++)a.push(rt(e,r[s],o,t));return a},MultiPolygon:function(e,t,o){const a=[],r=t.geometry.coordinates;for(let s=0;s<r.length;s++){const n=nt(e,r[s],o,t),i=Array.isArray(n)?n:[n];a.push(...i)}return a},Point:function(e,t,o){return rt(e,t.geometry.coordinates,o,t)},Polygon:at};function lt(e){or.viewer.useRenderStore(tr).addRenderDatas(e)}function ct(e){or.viewer.useRenderStore(tr).removeRenderDataByPage(e)}function dt(e){return or.viewer.useRenderStore(tr).getRenderDataByDatasetId(e)}function ut(e){or.viewer.useRenderStore(tr).setSelectedRenderData(e)}function mt(){var e;const t=or.viewer.useRenderStore(tr).selectedRenderData;t.model&&(null==(e=null==t?void 0:t.restoreHandler)||e.call(t)),ut({model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]})}function pt(e,t,o,a=[],r){var s;mt();const n=function(e,t,o,a){const r=dt(t);if(!r)return;let s,n;switch(e){case"label":case"point":case"billboard":case"model":s="primitive"===a?"VcCollectionBillboard":"VcDatasourceCustom",n="primitive"===a?"billboards":"entities";break;case"polyline":s="primitive"===a?"VcCollectionPolyline":"VcDatasourceCustom",n="primitive"===a?"polylines":"entities";break;case"polygon":s="primitive"===a?"VcCollectionPrimitive":"VcDatasourceCustom",n="primitive"===a?"polygons":"entities";break;case"geojson":s="VcDatasourceGeojson",n="data";break;case"tileset":s="VcPrimitiveTileset"}const i=we.exports.find(r.datasets,(e=>e.cmpName===s));if("geojson"===e)return i;return we.exports.find(i.props[n],(t=>t.feature.properties.id===o&&t.feature.properties.actualRenderingType===e))}(e,t,o);if(!n)return!1;if("point"===e){const t="primitive"===r?n:n.point,o=t.pixelSize||1,s=t.color||[255,255,255,0];t.pixelSize=1.5*o,ut({model:t,renderingType:e,restoreHandler:()=>{t.pixelSize=o,t.color=s},feature:n.feature,featureInfoListItems:a})}else if("billboard"===e){const t="primitive"===r?n:n.billboard,o=t.scale||1;t.scale=1.5*o,ut({model:t,renderingType:e,restoreHandler:()=>{t.scale=o},feature:n.feature,featureInfoListItems:a})}else if("polyline"===e){const e="primitive"===r?n:n.polyline,t=e.material||"white",o=e.width||1;e.width=1.5*o,e.material="#ffc107",ut({model:e,renderingType:"polyline",restoreHandler:()=>{e.width=o,e.material=t},feature:n.feature,featureInfoListItems:a})}else if("polygon"===e)if("primitive"===r){const e=n,t=e.color||"white";e.color="#ffc107",ut({model:e,renderingType:"polygon",restoreHandler:()=>{e.color=t},feature:n.feature,featureInfoListItems:a})}else{const e=n.polygon,t=e.material||"white";"observationElementPattern"===(null==(s=n.feature.properties)?void 0:s.datasetId)&&(e.extrudedHeight=1e3),e.material="#ffc107",ut({model:e,renderingType:"polygon",restoreHandler:()=>{e.material=t,e.extrudedHeight=void 0},feature:n.feature,featureInfoListItems:a})}else"geojson"===e&&n.polygon}function ht(e,t){var o;const a=[];if(!Cesium.defined(e.geometry))return Ze("feature.geometry is required.","要素：",e),"添加渲染模型失败，原因：该要素没有 geometry 属性";const r=e.geometry.type,s=e.properties,n=null==(o=null==s?void 0:s.renderingType)?void 0:o.trim().split(",");if(!n||!n.length)return Ze("添加渲染模型失败，原因：未知的显示类型。","要素：",e),"添加渲染模型失败，原因：未知的显示类型。";const i=it[r];return Cesium.defined(i)?(n.forEach((o=>{const r=i(t,e,o),s=Array.isArray(r)?r:[r];a.push(...s)})),a):(Ze(`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`,"要素：",e),`添加渲染模型失败，原因：该几何类型${r}没有找到处理方法。`)}function gt(e,t){return t().then((t=>{var o,a,r;if(0!==t.code)return Xe(`添加渲染数据集失败，原因：数据请求失败。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(!t.data)return Xe(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1;if(null==(o=t.data)?void 0:o.type){switch(null==(a=t.data)?void 0:a.type){case"Feature":e.children=[t.data];break;case"FeatureCollection":e.children=t.data.features,e.children.forEach((t=>{Cesium.defined(t.properties.renderingType)||(t.properties.renderingType=e.renderingType||"billboard"),Cesium.defined(t.properties.id)||(t.properties.id=Cesium.createGuid()),Cesium.defined(t.properties.checked)||(t.properties.checked=!1)}));break;default:return Xe(`添加渲染数据集失败，原因：未知的 GeoJSON 类型。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,void(e.checked=!1)}}else"heatmap"===e.renderingType&&(e.children=[t.data]);return!!(null==(r=e.children)?void 0:r.length)||(Xe(`添加渲染数据集失败，原因：请求数据成功，但结果为空。数据集id: ${e.id}，数据集名称: ${e.name}`),e.loading=!1,e.checked=!1,!1)})).catch((t=>(Xe("添加渲染数据集失败，原因：数据请求异常。",t),e.loading=!1,e.checked=!1,!1)))}const ft=(e,a,r)=>{var s,n;e.cesiumObjects=e.cesiumObjects||[];const l={id:e.id,name:e.name,page:a,type:r,datasets:[]};let c=[];if("tileset"===e.renderingType){for(let a=0;a<e.children.length;a++){const r=e.children[a];r.properties.datasetId=e.id;const i=e.props&&o(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{},c=Object.assign({},i[e.renderingType],null==(n=null==(s=r.properties)?void 0:s.props)?void 0:n[e.renderingType]);r.properties.actualRenderingType=e.renderingType,l.datasets.push({cmpName:"VcPrimitiveTileset",props:{...c,show:t(r.properties,"checked"),maximumMemoryUsage:128,maximumScreenSpaceError:64,onReady:()=>{e.loading=!1}}})}lt(l)}else{for(let t=0;t<e.children.length;t++){const a=e.children[t];a.properties.datasetId=e.id;const r=ht(a,e.props&&o(null==e?void 0:e.props)?null==e?void 0:e.props:e.props?JSON.parse(null==e?void 0:e.props):{});if("string"==typeof r)continue;const s=we.exports.intersectionWith(r,c,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type));c.push(...r),s.length&&(s.forEach((e=>{Ze(`已添加相同id和类型的渲染数据集，可能有重复数据，请核实。对象 id: ${e.feature.properties.id}，对象类型: ${e.feature.geometry.type}`,"数据模型：",e)})),c=we.exports.uniqWith(c,((e,t)=>e.feature.properties.id===t.feature.properties.id&&e.feature.geometry.type===t.feature.geometry.type)))}c.length&&l.datasets.push({cmpName:"VcDatasourceCustom",props:{entities:c,onReady:({cesiumObject:t})=>{const o=`VcDatasourceCustom_${e.id}`;t.datasetId=o;!we.exports.find(e.cesiumObjects,(e=>e.datasetId===o))&&e.cesiumObjects.push(i(t)),e.loading=!1}}}),lt(l)}return!0};function vt(e){return e.map((e=>({...e,path:e.path||we.exports.uniqueId("vc-menu-empty-"),...e.children?{children:vt(e.children)}:{}})))}function yt(e={},t="",o=0){return[200,{code:o,msg:t,data:e}]}function bt(e){or.system.useLogStore(tr).push({message:"数据请求异常",type:"danger",meta:{error:e}}),ge.create({message:e.message,type:"negative",timeout:3e3})}function Ct(e){const t=new Error(e);throw bt(t),t}const kt=Object.freeze(Object.defineProperty({__proto__:null,parse:function(e="{}",t={}){let o=t;try{o=JSON.parse(e)}catch(a){Xe(a)}return o},response:yt,responseSuccess:function(e={},t="成功"){return yt(e,t)},responseError:function(e={},t="请求失败",o=500){return yt(e,t,o)},errorLog:bt,errorCreate:Ct},Symbol.toStringTag,{value:"Module"})),wt=()=>{const e=c.create({});return e.interceptors.request.use((e=>e),(e=>(bt(e),Promise.reject(e)))),e.interceptors.response.use((e=>{const t=e.data,{code:o}=t;if(void 0===o)return t;switch(o){case 0:case 200:return t;case"xxx":Ct(`[ code: xxx ] ${t.msg}: ${e.config.url}`);break;default:return Ct(`${t.msg}: ${e.config.url}`),Promise.reject(t)}}),(e=>{switch(we.exports.get(e,"response.status")){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录",Ue("token"),Ue("uuid"),Et.push("/login");break;case 403:e.message="拒绝访问";break;case 404:e.message=`请求地址出错: ${e.response.config.url}`;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return bt(e),Promise.reject(e)})),e};function _t(e){return function(t){const o=He("token"),a={headers:{Authorization:o,"Content-Type":we.exports.get(t,"headers.Content-Type","application/json")},timeout:2e4,baseURL:e.baseURL||"/",data:{}};return o&&(a.headers.Authorization="Bearer "+o),e(Object.assign(a,t))}}const xt=wt(),St=_t(xt),Lt=wt(),Ot=_t(Lt),Tt=new l.exports(Lt),Dt=[{username:"admin",password:"admin",id:"admin-uuid",name:"Admin"},{username:"editor",password:"editor",id:"editor-uuid",name:"Editor"}],Vt=[{id:d(),component:"MainLayout",icon:"cog",islock:!1,hidden:!1,name:"layout",path:"/",permission:"",sort:1e3,title:"VueCesiumDemo",type:10,children:[{id:d(),component:"/index",icon:"cog",islock:!1,hidden:!1,name:"index",path:"/index",permission:"permission-index",sort:1e3,caption:"首页",title:"message.header.index",type:10,children:[{id:d(),component:"",icon:"eye",islock:!1,hidden:!1,name:"left-panel",path:"",permission:"permission-left-panel-view",sort:100101,title:"查看左侧面板",type:20}]},{id:d(),component:"/dynamic-render",icon:"cog",islock:!1,hidden:!1,name:"dynamic-render",path:"/dynamic-render",permission:"permission-dynamic-render",sort:1e3,caption:"动态渲染",title:"message.header.dynamicRender",type:10,redirect:"/dynamic-render/datasource",children:[{id:d(),component:"/dynamic-render/datasource",icon:"dataset",islock:!1,hidden:!1,name:"datasource",path:"/dynamic-render/datasource",permission:"permission-datasource",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.datasource",type:10},{id:d(),component:"/dynamic-render/historical-track",icon:"inbox",islock:!1,hidden:!1,name:"historical-track",path:"/dynamic-render/historical-track",permission:"permission-historical-track",sort:1e3,caption:"dynamicRender",title:"message.sideBar.dynamicRender.historicalTrack",type:10}]}]}],Pt=[{id:d(),name:"DataSource",label:"数据源",icon:"",children:[{id:"555",name:"机场",icon:"",checked:!1,expanded:!1,fetchStr:"./datas/work-bench/机场.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"billboard",props:{billboard:{image:"./images/飞机场.svg",color:"#ffc10",scale:.25,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e7]}}},{id:"666",name:"水系",icon:"",checked:!1,expanded:!1,fetchStr:"./datas/work-bench/水系.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polyline",props:{polyline:{width:1}}},{id:"777",name:"岛屿",icon:"",checked:!1,expanded:!1,fetchStr:"./datas/work-bench/岛屿.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"polygon,polyline,billboard",props:{billboard:{image:"./images/岛屿.svg",scale:.2,verticalOrigin:1,scaleByDistance:[100,2,15e4,.5],distanceDisplayCondition:[0,3e6]},polygon:{width:2,material:"rgba(137,207,240,0.5)"},polyline:{width:4,material:"#0033ff"}}},{id:"888",name:"Tileset 模型",icon:"",checked:!1,expanded:!1,fetchStr:"./datas/work-bench/Tileset模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"tileset",props:{tileset:{}}},{id:"999",name:"GLTF 模型",icon:"",checked:!1,expanded:!1,fetchStr:"./datas/work-bench/GLTF模型.json",canRenderDirectly:!0,hasDetail:!0,renderingType:"model",props:{model:{scale:1}}}]}],It={service:xt,request:St,serviceForMock:Lt,requestForMock:Ot,mock:Tt,tools:kt},Rt=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({login:(e={})=>(r.onAny("/auth/login").reply((e=>{const t=s.parse(e.data),o=we.exports.find(Dt,{username:t.username,password:t.password});return o?s.responseSuccess(we.exports.assign({},o,{token:"f5befe1a-962c-4cdd-bf45-77ce306dbbce"})):s.responseError({},"账号或密码不正确")})),a({url:"/auth/login",method:"post",data:e})),getUserInfo:()=>(r.onAny("/user/info").reply((e=>{const t=He("uuid"),o=we.exports.find(Dt,{id:t});return o?s.responseSuccess(we.exports.assign({},o)):(Ue("token"),Ue("uuid"),Et.push("/login"),s.responseError({},"未授权, 请登录!"))})),a({url:"/user/info",method:"post"})),getAccessibleMenus:(e={})=>(r.onAny("/api/menu/accessible").reply((e=>s.responseSuccess(Vt))),a({url:"/api/menu/accessible",method:"post",data:e}))}))(It),Bt=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({getStaticData:(e,o)=>t({baseURL:o=o||"./",url:e,method:"get"}).then((e=>({code:0,data:e,msg:"success"}))),inverseGeocode:e=>t({baseURL:"./",url:"/reverse_geocoding/v3",method:"get",params:e}),getLocationList:e=>t({baseURL:"./",url:"/v3/place/text",method:"get",params:e})}))(It),qt=(({service:e,request:t,serviceForMock:o,requestForMock:a,mock:r,tools:s})=>({getTreeData:()=>(r.onAny("/dynamic-render/datasource/datatree").reply((e=>s.responseSuccess(Pt))),a({url:"/dynamic-render/datasource/datatree",method:"post"})),inverseGeocode:e=>t({baseURL:"./",url:"/reverse_geocoding/v3",method:"get",params:e})}))(It),Mt={"zh-CN":{message:{header:{index:"首页",dynamicRender:"动态渲染"},sideBar:{dynamicRender:{datasource:"数据源",historicalTrack:"历史轨迹"}},panel:{layerManager:"图层管理"},baseLayer:"底图图层",overlayLayer:"叠加图层",vectorLayer:"矢量图层"}},"en-US":{message:{header:{index:"Index",dynamicRender:"DynamicRender"},sideBar:{dynamicRender:{datasource:"Datasource",historicalTrack:"HistoricalTrack"}},panel:{layerManager:"LayerManager"},baseLayer:"BaseLayer",overlayLayer:"OverlayLayer",vectorLayer:"VectorLayer"}}},jt=u({legacy:!1,locale:He("locale"),fallbackLocale:"zh-CN",globalInjection:!0,messages:Mt}),Et=m({scrollBehavior:()=>({left:0,top:0}),routes:Ke,history:({VITE_VUE_APP_TITLE:"VueCesium Demo",VITE_VUE_ROUTER_MODE:"history",VITE_VUE_ROUTER_BASE:"/",VITE_VUE_APP_API:"/",VITE_MOCK_ENABLED:"true",VITE_VUE_APP_PREFIX:"VueCesiumDemo",VITE_VUE_APP_AMAP_KEY:"488103685805d2ceb629aba785aa3760",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}.SERVER?h:g)("/vue-cesium-demo")}),At=["/login","/404"];Et.beforeEach((async(e,t,o)=>{p.start(),or.system.useSearchStore(tr).set(!1);const a=He("token");if("/login"!==e.path&&Rt.getUserInfo(),a)try{if(!or.system.usePermissionStore(tr).inited){const t=[...(await Rt.getAccessibleMenus()).data];return await or.system.usePermissionStore(tr).generateRoutes({menuTree:t}),void o(e.path)}"/login"===e.path?o({path:"/index"}):o()}catch(r){-1!==At.indexOf(e.path)?o():o("/login")}else-1!==At.indexOf(e.path)?o():o("/login")})),Et.afterEach((e=>{var t;p.done(),t=jt.global.t(e.meta.title),window.document.title="VueCesium Demo"+(t?` | ${t}`:"")}));const Nt=v(new f("VueCesiumDemo-0.0.0"));function zt({dbName:e="database",path:t="",user:o=!0,validator:a=(e=>!0),defaultValue:r=""}){const s=He("uuid")||"ghost-uuid",n=`${e}.${o?`user.${s}`:"public"}${t?`.${t}`:""}`,i=Nt.get(n).value();return void 0!==i&&a(i)||Nt.set(n,r).write(),n}function Ft({dbName:e="database",path:t="",user:o=!1,validator:a=(()=>!0),defaultValue:r=""}={}){return Nt.get(zt({dbName:e,path:t,user:o,validator:a,defaultValue:r}))}Nt.defaults({sys:{},database:{}}).write();const $t=y("db",{state:()=>({}),getters:{},actions:{set({dbName:e="database",path:t="",value:o="",user:a=!1}){!function({dbName:e="database",path:t="",value:o="",user:a=!1}){Nt.set(zt({dbName:e,path:t,user:a}),o).write()}({dbName:e,path:t,value:o,user:a})},get:({dbName:e="database",path:t="",defaultValue:o="",user:a=!1})=>function({dbName:e="database",path:t="",defaultValue:o="",user:a=!1}){return we.exports.cloneDeep(Nt.get(zt({dbName:e,path:t,user:a,defaultValue:o})).value())}({dbName:e,path:t,defaultValue:o,user:a}),database:({user:e=!1}={})=>Ft({user:e,defaultValue:""}),databaseClear:({user:e=!1}={})=>Ft({user:e,validator:()=>!0,defaultValue:""})}}),Ht=y("user",{state:()=>({info:{}}),getters:{},actions:{async set(e){this.info=e;$t().set({dbName:"sys",path:"user.info",value:e,user:!0})},async load(){const e=$t().get({dbName:"sys",path:"user.info",defaultValue:"",user:!0});this.set(e)}}}),Ut=(e,t)=>{const o=e.__vccOpts||e;for(const[a,r]of t)o[a]=r;return o};const Gt=Ut({},[["render",function(e,t){const o=C("router-view");return k(),b(o)}]]),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"}));function Wt(){const e=xe(),{toggleGlobalLayout:t,toggleDynamicRenderPageLayout:o}=or.system.useLayoutStore(),a=w({selectedId:"",datasourceCategories:[],loading:!1,hasLoadingError:!1,filterText:""}),r=or.system.useLayoutStore().dynamicRender,s=_((()=>{let e=[];try{null==a||a.datasourceCategories.forEach((t=>{if(t.id===a.selectedId)throw e=t.children,new Error("endForEach")}))}catch(t){if("endForEach"!==t.message)throw t}return e}));return{workBenchModel:a,dynamicRenderLayout:r,selectedDatasetCategories:s,init:()=>{a.loading=!0,(async()=>(a.hasLoadingError=!1,qt.getTreeData().then((e=>{if(e.code)return;const t=e.data;return a.selectedId=t[0].id,a.datasourceCategories=t,!0})).catch((e=>{a.hasLoadingError=!0}))))().then((()=>{a.loading=!1,t({navigation:!0}),o({datasource:{workBench:!0}})}))},addOrRemoveDataset:async(e,t,o,a)=>{if(e){if(await dt(t.id))t.children.forEach((e=>{e.properties&&(e.properties.checked=!0)}));else{if(407==t.id)return;if(t.renderingType){const e=()=>Bt.getStaticData(t.fetchStr);await function(e,t,o,a){var r;if(e.loading=!0,null==(r=e.children)?void 0:r.length)return Promise.resolve(ft(e,o,a));try{return gt(e,t).then((t=>{if(t)return ft(e,o,a)}))}catch(s){return Xe(`添加渲染数据集失败，原因：数据请求发生错误。数据集id: ${e.id}，数据集名称: ${e.name}`,"数据模型：",e),e.loading=!1,void(e.checked=!1)}}(t,e,"/dynamic-render/datasource"),t.children.forEach((e=>{a?e.properties&&(e.properties.checked=e===a):e.properties&&(e.properties.checked=!0)}))}else Xe("添加渲染数据集失败，原因：未知的显示类型。","数据模型：",t),t.checked=!1,t.loading=!1}}else r=t.id,or.viewer.useRenderStore(tr).removeRenderDataById(r),t.cesiumObjects=[],t.loading=!1,t.children.forEach((e=>{e.properties&&(e.properties.checked=!1)}));var r},showFeatureInfo:(e,t,o)=>{e.hasDetail&&et("属性展示逻辑待完善")},flyToFeature:(t,o,a)=>{!async function(e,t,o={isHighlightRenderData:!0,showBillboardOverlayMenu:!0,duration:1.5}){var a,r,s,n;const i=null==(a=null==t?void 0:t.properties)?void 0:a.actualRenderingType;if(!i)return void Xe("定位到要素失败，原因：未知的显示类型。","要素模型：",t);const l=t.properties.datasetId,c=await dt(l);if(!c)return void Xe("定位到要素失败，原因：未找到该要素所在的渲染数据。","要素模型：",t);const d=t.properties.id;o.isHighlightRenderData&&pt(i,l,d);const{toggleGlobalLayout:u}=or.system.useLayoutStore(tr);switch(i){case"billboard":case"point":case"label":case"polyline":case"polygon":case"model":if(u({featureInfo:!1}),null==(r=null==c?void 0:c.datasets)?void 0:r.length){const t=(null==(s=c.datasets[0].cmpRef)?void 0:s.cesiumObject).entities.values.filter((e=>e.feature.properties.id===d))[0];e.flyTo(t,{...o}).then((()=>{}))}break;case"tileset":if(u({featureInfo:!1}),null==(n=null==c?void 0:c.datasets)?void 0:n.length){const a=c.datasets.filter((e=>e.props.url===t.properties.props.tileset.url))[0].cmpRef.cesiumObject;e.flyTo(a,{...o}).then((()=>{}))}}}(e.viewer,o)},showOrHideDatasetList:(e,t)=>{if(e&&t.renderingType&&0===t.children.length){const e=()=>Bt.getStaticData(t.fetchStr);t.loading=!0,gt(t,e).then((()=>{t.loading=!1}))}},toggleDynamicRenderPageLayout:o}}const Jt={class:"loading-ios flex column justify-center items-center z-top"},Yt={key:2},Kt={key:0,class:"q-pt-md"},Zt=x({__name:"Ios",props:{size:{type:String,default:"3em"},dense:{type:Boolean,default:!1},hasError:{type:Boolean,default:!1},errorMsg:{type:String,default:""},errorTip:{type:String,default:"数据加载失败，点我重试"},tipText:{type:String,default:"加载中..."}},emits:["retry"],setup(e,{emit:t}){const o=()=>{t("retry")};return(t,a)=>{const r=C("q-spinner-ios"),s=C("q-tooltip"),n=C("q-btn"),i=C("q-chip");return k(),S("div",Jt,[e.hasError?(k(),b(n,{key:1,icon:"error",size:e.size,color:"red",round:"",flat:"",dense:""},{default:L((()=>[O(s,null,{default:L((()=>[T("加载失败，原因："+D(e.errorMsg),1)])),_:1})])),_:1},8,["size"])):(k(),b(r,{key:0,size:e.size},null,8,["size"])),e.dense?P("",!0):(k(),S("div",Yt,[e.hasError?(k(),b(i,{key:1,clickable:"",color:"red","text-color":"white",icon:"error",onClick:o},{default:L((()=>[T(D(e.errorTip),1)])),_:1})):(k(),S("div",Kt,[V("span",null,D(e.tipText),1)]))]))])}}}),Xt=Ut(x({__name:"Index",props:{nodes:{type:Array,default:()=>[]},filter:String},emits:{addOrRemoveDataset:(e,t,o,a)=>!0,flyToFeature:(e,t,o)=>!0,showFeatureInfo:(e,t,o)=>!0,showOrHideDatasetList:(e,t)=>!0},setup(e,{emit:t}){const o=e,a=_((()=>(e,t)=>{const o=t.toLowerCase();return(e.name||e.properties.name).toLowerCase().indexOf(o)>-1})),r=_((()=>{const e={},t=(r,s)=>{let n,i;if(j(r,"type")&&j(r,"properties")){n=r.properties.id,i=!1}else{const e=r;n=e.id,i=(null==e?void 0:e.children)&&(null==e?void 0:e.children.length)>0}const l={key:n,parent:s,isParent:i,children:[],matchesFilter:!o.filter||a.value(r,o.filter)};if(e[n]=l,!0===i){const e=r;l.children=e.children.map((e=>t(e,l))),o.filter&&!0!==l.matchesFilter&&(l.matchesFilter=l.children.some((e=>e.matchesFilter)))}return l};return o.nodes.forEach((e=>t(e,null))),e}));I((()=>o.filter),(e=>{s(o.nodes,!0)}));const s=(e,t)=>(o.filter?e.filter((e=>r.value[e.id||e.properties.id].matchesFilter)):e).map((e=>((e,t)=>{const o=e.id||e.properties.id,a=!0===r.value[o].isParent?s(e.children):[];return t?e.children=e._children:(e._children=e.children,e.children=a),e})(e,t))),n=_((()=>s(o.nodes))),i=e=>{var t;return null==(t=null==e?void 0:e.children)?void 0:t.length};return(e,o)=>{const a=C("q-item-label"),r=C("q-item-section"),s=C("q-checkbox"),l=C("q-icon"),c=C("q-chip"),d=C("q-item"),u=C("index",!0),m=C("q-expansion-item"),p=C("q-list"),h=R("ripple");return k(),b(p,{dense:""},{default:L((()=>[(k(!0),S(M,null,B(q(n),((o,n)=>(k(),S(M,{key:n},[o.isGroup?(k(),b(a,{key:0,class:"group-caption",caption:"",header:""},{default:L((()=>[T(D(o.name),1)])),_:2},1024)):P("",!0),o.hasDetail?(k(),b(m,{key:1,modelValue:o.expanded,"onUpdate:modelValue":[e=>o.expanded=e,e=>((e,o)=>{t("showOrHideDatasetList",e,o)})(e,o)],"expand-icon":"arrow_circle_down","expand-separator":"",clickable:"",dark:""},{header:L((()=>[(k(!0),S(M,null,B(o.level>0?o.level-1:0,(e=>(k(),b(r,{key:e,side:""})))),128)),O(r,{side:""},{default:L((()=>[O(s,{modelValue:o.checked,"onUpdate:modelValue":[e=>o.checked=e,e=>((e,o,a,r)=>{t("addOrRemoveDataset",e,o,a,r)})(e,o)],dense:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),O(r,{side:""},{default:L((()=>[O(l,{size:"16px",class:E(`spd-icons ${o.iconHtV2}`),style:{color:"#00e472"}},null,8,["class"])])),_:2},1024),O(r,null,{default:L((()=>[O(a,null,{default:L((()=>[T(D(o.name),1)])),_:2},1024)])),_:2},1024),0!==i(o)?(k(),b(r,{key:0,side:""},{default:L((()=>[O(c,{dense:"",dark:""},{default:L((()=>[T(D(i(o))+" 条",1)])),_:2},1024)])),_:2},1024)):P("",!0),o.loading?(k(),b(r,{key:1,side:""},{default:L((()=>[O(Zt,{size:"1.5em",dense:""})])),_:1})):P("",!0)])),default:L((()=>[o.fetchStr?(k(!0),S(M,{key:0},B(o.children,((e,n)=>A((k(),b(d,{key:n,clickable:"","active-class":"text-amber-6",dense:""},{default:L((()=>[(k(!0),S(M,null,B(o.level>0?o.level:1,(e=>(k(),b(r,{key:e,side:""})))),128)),O(r,{side:""},{default:L((()=>[O(s,{modelValue:e.properties.checked,"onUpdate:modelValue":[t=>e.properties.checked=t,a=>((e,o,a,r)=>{e&&(o.checked||(o.checked=!0,t("addOrRemoveDataset",e,o,a,r)))})(a,o,n,e)],disable:o.loading||e.loading||""===o.renderingType},null,8,["modelValue","onUpdate:modelValue","disable"])])),_:2},1024),O(r,{onClick:a=>((e,o,a)=>{t("showFeatureInfo",e,o,a)})(o,e,n)},{default:L((()=>[O(a,null,{default:L((()=>[T(D(e.properties.name),1)])),_:2},1024)])),_:2},1032,["onClick"]),e.loading?(k(),b(r,{key:0,side:""},{default:L((()=>[O(Zt,{size:"1.5em",dense:""})])),_:1})):P("",!0),e.properties.checked?(k(),b(r,{key:1,side:"",onClick:N((a=>((e,o,a)=>{t("flyToFeature",e,o,a)})(o,e,n)),["prevent"])},{default:L((()=>[O(l,{size:"20px",class:"location-icon",name:"room"})])),_:2},1032,["onClick"])):P("",!0)])),_:2},1024)),[[h]]))),128)):P("",!0),o.children&&!o.canRenderDirectly?(k(),b(u,{key:1,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"])):P("",!0)])),_:2},1032,["modelValue","onUpdate:modelValue"])):(k(),b(u,{key:2,data:o.children,onAddOrRemoveDataset:(t,o,a)=>e.$emit("addOrRemoveDataset",t,o,a),onFlyToFeature:(t,o,a)=>e.$emit("flyToFeature",t,o,a),onShowFeatureInfo:(t,o,a)=>e.$emit("showFeatureInfo",t,o,a)},null,8,["data","onAddOrRemoveDataset","onFlyToFeature","onShowFeatureInfo"]))],64)))),128))])),_:1})}}}),[["__scopeId","data-v-61d7c214"]]),eo=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));const to={class:"work-bench"},oo={class:"dataset-category"},ao={class:"dataset-category-header"},ro={class:"q-ml-md q-mr-md"},so=T("回到顶部"),no=Ut(x({__name:"Index",setup(e){G((e=>({"03aff4fe":q(y).commonPanel.themeCommonPanelListBorderColor,"642a10d2":q(y).commonPanel.themeCommonPanelContentBackgroundColor})));const t=F(or.system.useLayoutStore()).global,{contentStyle:o,contentActiveStyle:a,thumbStyle:r,scrollAreaRef:s,verticalPositionRef:n,setScrollPosition:i,onScrollHandler:l}=function(){const e=z(null),t=z(null);return{scrollAreaRef:e,verticalPositionRef:t,contentStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},contentActiveStyle:{backgroundColor:"rgba(0,0,0,0.02)",color:"#555"},thumbStyle:{right:"2px",borderRadius:"3px",backgroundColor:"#EBB107",width:"3px",opacity:.6},onScrollHandler:e=>{t.value=e.verticalPosition},setScrollPosition:(t,o,a)=>{e.value.setScrollPosition("vertical",0,300)}}}(),{workBenchModel:c,dynamicRenderLayout:d,selectedDatasetCategories:u,init:m,addOrRemoveDataset:p,showFeatureInfo:h,flyToFeature:g,showOrHideDatasetList:f,toggleDynamicRenderPageLayout:v}=Wt(),y=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));return $((()=>{m()})),H((()=>{ct("/dynamic-render/datasource")})),(e,r)=>{const m=C("q-btn"),y=C("q-icon"),w=C("q-input"),_=C("q-tooltip"),x=C("q-scroll-area");return k(),S("div",to,[A(V("div",{class:E(["datasources-container",{"full-width-drawer":!q(t).leftDrawerMini}])},[V("div",oo,[V("div",ao,[O(m,{dense:"",flat:"",round:"",class:"close text-white",icon:"close",size:"sm",onClick:r[0]||(r[0]=e=>q(v)({datasource:{workBench:!1}}))}),V("div",ro,[O(w,{modelValue:q(c).filterText,"onUpdate:modelValue":r[1]||(r[1]=e=>q(c).filterText=e),disable:q(c).loading,label:"搜索",dark:"",dense:"",clearable:""},{prepend:L((()=>[O(y,{color:"white",name:"search"})])),_:1},8,["modelValue","disable"])])]),q(n)>600?(k(),b(m,{key:0,dense:"",fab:"",round:"",glossy:"","fab-mini":"",ripple:"",icon:"expand_less",padding:"2px",class:"absolute-bottom-right non-selectable z-top scroll-top",onClick:r[2]||(r[2]=e=>q(i)("vertical",0,300))},{default:L((()=>[O(_,null,{default:L((()=>[so])),_:1})])),_:1})):P("",!0),O(x,{ref_key:"scrollAreaRef",ref:s,class:"dataset-category-area","content-style":q(o),"content-active-style":q(a),onScroll:q(l)},{default:L((()=>[q(c).loading?(k(),b(Zt,{key:0,class:"absolute-center","has-error":q(c).hasLoadingError},null,8,["has-error"])):P("",!0),O(Xt,{nodes:q(u),class:"data-list-tree",filter:q(c).filterText,onAddOrRemoveDataset:q(p),onShowFeatureInfo:q(h),onFlyToFeature:q(g),onShowOrHideDatasetList:q(f)},null,8,["nodes","filter","onAddOrRemoveDataset","onShowFeatureInfo","onFlyToFeature","onShowOrHideDatasetList"])])),_:1},8,["content-style","content-active-style","onScroll"])])],2),[[U,q(d).datasource.workBench]]),q(d).datasource.workBench?P("",!0):(k(),b(m,{key:0,class:"toggle-btn",round:"",loading:q(c).loading,flat:"",color:"white",onClick:r[3]||(r[3]=e=>q(v)({datasource:{workBench:!0}}))},{default:L((()=>[O(y,{size:"50px",name:"keyboard_double_arrow_right"})])),_:1},8,["loading"]))])}}}),[["__scopeId","data-v-d6084742"]]),io=Object.freeze(Object.defineProperty({__proto__:null,default:no},Symbol.toStringTag,{value:"Module"})),lo={class:"page-dynamic-render-datasource absolute z-top"},co=x({__name:"Index",setup(e){const{loadDefaultLayers:t}=or.viewer.useLayerStore();return $((()=>{t(!0)})),(e,t)=>(k(),S("div",lo,[O(no)]))}}),uo=Object.freeze(Object.defineProperty({__proto__:null,default:co},Symbol.toStringTag,{value:"Module"})),mo={class:"page-demo-dynamic-overlay absolute z-top"},po=x({__name:"Index",setup(e){const{loadDefaultLayers:o}=or.viewer.useLayerStore(),a=z(null),r=z(!1),s=z(null),n=z(null),i=z(null);$((()=>{o(!0),Bt.getStaticData("/datas/dynamic-overlay.json").then((e=>{l([e.data])}))})),H((()=>{ct("/dynamic-render/historical-track")}));const l=async e=>{if(await dt("DynamicOverlay"));else{const t={id:"DynamicOverlay",name:"历史轨迹",page:"/dynamic-render/historical-track",datasets:[]},{overlays:o,stops:l}=c(e),d={show:!0,dynamicOverlays:o};t.datasets.push({cmpName:"VcOverlayDynamic",props:{shouldAnimate:r,"onUpdate:shouldAnimate":e=>{r.value=e},currentTime:s,startTime:n,stopTime:i,multiplier:1e3,onReady:e=>{a.value=e.vm,u(202106)},...d}}),t.datasets.push({cmpName:"VcCollectionPoint",props:{points:l}}),lt(t)}},c=e=>{const o=[],a=[];return e.forEach((e=>{const r=[],s=[],n=t(e,"checked");e.stops.forEach((e=>{r.push({position:[e.lon,e.lat],time:e.DATE_TIME,id:d()}),s.push([e.lon,e.lat]),a.push({id:d(),position:[e.lon,e.lat],color:"rgb(255,229,0)",show:n,...e,distanceDisplayCondition:[0,5e6],scaleByDistance:[100,2,25e5,.5],onMouseover:e=>{},onMouseout:e=>{}})})),o.push({id:String(e.TYPHOON_ID),show:n,maxCacheSize:e.stops.length,polyline:{positions:s,width:3,material:e.TYPHOON_CODE?"#2d8cf0":"#69B273",depthFailMaterial:e.TYPHOON_CODE?"#2d8cf0":"#69B273",clampToGround:!0},sampledPositions:r})})),{overlays:o,stops:a}},u=e=>{const t=dt("DynamicOverlay");if(t){t.datasets[0].cmpRef.zoomToOverlay(String(e))}else Xe("定位到该对象失败，原因：还未添加。")};return(e,t)=>(k(),S("div",mo))}}),ho=Object.freeze(Object.defineProperty({__proto__:null,default:po},Symbol.toStringTag,{value:"Module"})),go={class:"z-top absolute-center page-index"},fo=x({__name:"Index",setup(e){const t=z({position:[108,32],point:{pixelSize:28,color:"red"},label:{text:"Hello World",pixelOffset:[0,150]}}),{loadDefaultLayers:o,toggle:a}=or.viewer.useLayerStore();$((()=>{o(!0)})),H((()=>{a({names:"admin",show:!1})}));const r=e=>{};return(e,o)=>{const a=C("vc-graphics-billboard"),s=C("vc-graphics-rectangle"),n=C("vc-entity");return k(),S("div",go,[O(n,{ref_key:"entity",ref:t,position:t.value.position,point:t.value.point,label:t.value.label,onClick:r},{default:L((()=>[O(a,{ref:"billboard",image:"https://zouyaoji.top/vue-cesium/favicon.png",scale:.5},null,8,["scale"]),O(s,{coordinates:[130,20,80,25],material:"green"})])),_:1},8,["position","point","label"])])}}}),vo=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"})),yo=x({name:"Error404"}),bo={class:"fullscreen bg-blue text-white text-center q-pa-md flex flex-center"},Co=V("div",{style:{"font-size":"30vh"}},"404",-1),ko=V("div",{class:"text-h2",style:{opacity:"0.4"}},"噢. 这儿什么也没有...",-1);const wo=Ut(yo,[["render",function(e,t,o,a,r,s){return k(),S("div",bo,[V("div",null,[Co,ko,O(fe,{class:"q-mt-xl",color:"white","text-color":"blue",unelevated:"",to:"/onemap",label:"返回主页","no-caps":""})])])}]]),_o=Object.freeze(Object.defineProperty({__proto__:null,default:wo},Symbol.toStringTag,{value:"Module"})),xo=e=>(W("data-v-cddb3e03"),e=e(),J(),e),So={class:"q-pa-md page-login z-top"},Lo={class:"login-container col row"},Oo=xo((()=>V("div",{class:"text-h4 q-my-sm"},"登录",-1))),To=xo((()=>V("div",{class:"oath flex"},[V("div",{class:"title full-width text-center q-pt-md"},"社交帐号登录"),V("div",{class:"q-gutter-md full-width text-center q-pt-sm flex justify-center"},[V("svg",{t:"1615200042776",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5886",width:"200",height:"200"},[V("path",{d:"M579.867 511.932c-11.67 0-23.344 10.837-23.344 24.178 0 10.839 11.668 21.678 23.344 21.678 17.514 0 30.020-10.839 30.020-21.678 0-13.34-12.505-24.178-30.020-24.178v0zM503.154 399.36c18.345 0 30.020-11.67 30.020-29.185 0-18.345-11.675-29.183-30.020-29.183-17.51 0-34.188 10.839-34.188 29.183-0.001 17.517 16.678 29.185 34.188 29.185v0zM512.326 0.56c-282.655 0-511.788 229.133-511.788 511.788 0 282.653 229.133 511.786 511.788 511.786 282.653 0 511.786-229.133 511.786-511.786 0.001-282.655-229.132-511.788-511.786-511.788v0zM415.602 642.009c-30.855 0-53.369-4.999-82.553-13.341l-84.218 42.53 24.186-71.715c-59.204-41.689-94.228-94.221-94.228-158.428 0-113.403 106.733-200.123 236.814-200.123 115.069 0 217.633 68.377 237.644 165.106-8.338-1.671-15.844-2.502-22.514-2.502-113.403 0-200.954 85.049-200.954 187.613 0 17.508 2.502 33.351 6.671 50.030-6.671 0.829-14.178 0.829-20.849 0.829v0zM763.314 723.724l16.674 60.041-63.371-35.854c-24.18 4.999-47.529 12.505-71.709 12.505-111.737 0-200.123-76.711-200.123-171.769 0-95.058 88.388-171.771 200.123-171.771 105.895 0 200.954 76.713 200.954 171.771 0 53.362-35.854 100.891-82.548 135.078v0zM338.053 340.992c-17.51 0-35.854 10.839-35.854 29.183 0 17.516 18.343 29.19 35.854 29.19 16.679 0 30.020-11.675 30.020-29.19 0-18.343-13.341-29.183-30.020-29.183v0zM710.783 511.932c-12.51 0-23.349 10.837-23.349 24.178 0 10.839 10.839 21.678 23.349 21.678 16.674 0 29.183-10.839 29.183-21.678 0-13.34-12.509-24.178-29.183-24.178v0zM710.783 511.932z","p-id":"5887","data-spm-anchor-id":"a313x.7781069.0.i22",class:"",fill:"#2dc100"})]),V("svg",{t:"1615199447339",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2522",width:"200",height:"200"},[V("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m210.385455 641.396364c-7.447273 9.309091-26.996364-1.861818-41.89091-32.581819-3.723636 13.963636-13.032727 36.305455-34.443636 64.232728 35.374545 8.378182 44.683636 42.821818 33.512727 61.44-8.378182 13.032727-26.996364 24.203636-59.578181 24.203636-58.647273 0-83.781818-15.825455-95.883637-26.996364-1.861818-2.792727-5.585455-3.723636-10.24-3.723636-4.654545 0-7.447273 0.930909-10.24 3.723636-11.170909 11.170909-37.236364 26.996364-95.883636 26.996364-32.581818 0-52.130909-11.170909-59.578182-24.203636-12.101818-18.618182-1.861818-53.061818 33.512727-61.44-20.48-27.927273-29.789091-50.269091-34.443636-64.232728-13.963636 30.72-34.443636 42.821818-41.890909 32.581819-5.585455-8.378182-8.378182-26.065455-7.447273-38.167273 3.723636-46.545455 34.443636-85.643636 53.061818-106.123636-2.792727-5.585455-8.378182-40.029091 14.894546-63.301819v-1.861818c0-92.16 65.163636-158.254545 148.014545-158.254545 81.92 0 148.014545 66.094545 148.014546 158.254545v1.861818c23.272727 23.272727 17.687273 57.716364 14.894545 63.301819 17.687273 20.48 49.338182 59.578182 53.061818 106.123636 0.930909 12.101818-0.930909 29.789091-7.447272 38.167273z",fill:"#30A5DD","p-id":"2523"})]),V("svg",{t:"1615199464855",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3380",width:"200",height:"200"},[V("path",{d:"M448.698182 482.210909c-96.814545 4.654545-175.010909 56.785455-175.010909 121.949091s78.196364 114.501818 175.010909 109.847273S623.709091 647.912727 623.709091 582.749091c-0.930909-64.232727-79.127273-105.192727-175.010909-100.538182z m65.163636 164.770909c-29.789091 39.098182-88.436364 57.716364-145.221818 26.065455-26.996364-14.894545-26.065455-43.752727-26.065455-43.752728s-11.170909-92.16 85.643637-103.330909c97.745455-12.101818 115.432727 81.92 85.643636 121.018182z",fill:"#EA5D5C","p-id":"3381"}),V("path",{d:"M448.698182 584.610909c-6.516364 4.654545-7.447273 13.032727-3.723637 18.618182 2.792727 5.585455 11.170909 6.516364 16.756364 1.861818 5.585455-4.654545 8.378182-13.032727 4.654546-18.618182-2.792727-5.585455-10.24-6.516364-17.687273-1.861818zM403.083636 597.643636c-18.618182 1.861818-30.72 17.687273-30.72 33.512728 0 14.894545 14.894545 26.065455 32.581819 24.203636 17.687273-1.861818 32.581818-15.825455 32.581818-31.650909s-13.963636-27.927273-34.443637-26.065455z",fill:"#EA5D5C","p-id":"3382"}),V("path",{d:"M512 0C229.003636 0 0 229.003636 0 512s229.003636 512 512 512 512-229.003636 512-512S794.996364 0 512 0z m197.352727 626.501818C669.323636 712.145455 538.065455 754.036364 441.250909 746.589091c-92.16-7.447273-211.316364-38.167273-223.418182-151.738182 0 0-6.516364-51.2 42.821818-117.294545 0 0 70.749091-99.607273 152.669091-128.465455 82.850909-27.927273 92.16 19.549091 92.16 48.407273-4.654545 24.203636-12.101818 38.167273 18.618182 28.858182 0 0 80.989091-38.167273 114.501818-4.654546 26.996364 26.996364 4.654545 65.163636 4.654546 65.163637s-11.170909 12.101818 12.101818 16.756363c21.410909 3.723636 94.021818 37.236364 53.992727 122.88z m-80.058182-236.450909c-8.378182 0-15.825455-7.447273-15.825454-15.825454 0-9.309091 7.447273-15.825455 15.825454-15.825455 0 0 99.607273-18.618182 87.505455 89.367273v1.861818c-0.930909 7.447273-7.447273 13.963636-15.825455 13.963636-9.309091 0-15.825455-7.447273-15.825454-15.825454 0-1.861818 15.825455-73.541818-55.854546-57.716364zM797.789091 493.381818c-2.792727 18.618182-12.101818 11.170909-22.341818 11.170909-13.032727 0-23.272727-16.756364-23.272728-29.789091 0-11.170909 4.654545-22.341818 4.654546-22.341818 0.930909-4.654545 12.101818-34.443636-7.447273-78.196363-35.374545-60.509091-106.123636-60.509091-114.501818-57.716364-8.378182 3.723636-21.410909 5.585455-21.410909 5.585454-13.032727 0-23.272727-10.24-23.272727-23.272727 0-11.170909 7.447273-19.549091 16.756363-22.341818 0 0 0 0.930909 0.930909 0.930909s1.861818 0.930909 1.861819 0.930909c10.24-1.861818 45.614545-4.654545 79.127272 3.723637 62.370909 14.894545 146.152727 83.781818 108.916364 211.316363z",fill:"#EA5D5C","p-id":"3383"})])])],-1))),Do=xo((()=>V("div",{class:"row justify-between q-pt-md text-grey-8"},[V("span",null,"忘记密码"),V("span",{class:"sign-up text-center cursor-pointer"}," 还没有账号？现在注册！ ")],-1))),Vo=Ut(x({__name:"Login",setup(e){G((e=>({"694a9722":q(r).pageLogin.themePageLoginBackground,"4f2ef622":q(r).pageLogin.themePageLoginColor,"7b160008":q(r).global.themeColorAlpha,"0de32af6":q(r).global.themeColor}))),ve();const t=Q(),o=z({username:"admin",password:"admin"}),a={username:[e=>e&&e.length>0||"请输入用户名"],password:[e=>e&&e.length>0||"请输入用户名"],rememberMe:[e=>!!e||"You need to accept the license and terms first"]},r=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]})),s=async()=>{or.system.useAccountStore().login(o.value).then((()=>{t.replace(t.currentRoute.value.query.redirect||"/index")}))},n=()=>{o.value={username:"",password:""}};return(e,t)=>{const r=C("q-icon"),i=C("q-input"),l=C("q-btn"),c=C("q-form");return k(),S("div",So,[V("div",Lo,[O(c,{greedy:"",class:"form-login",onSubmit:s,onReset:n},{default:L((()=>[Oo,O(i,{modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.username=e),outlined:"",label:"用户名","lazy-rules":"",rules:a.username},{prepend:L((()=>[O(r,{class:"icon",name:"perm_identity"})])),_:1},8,["modelValue","rules"]),O(i,{modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.password=e),outlined:"",label:"密码","lazy-rules":"",type:"password",rules:a.password},{prepend:L((()=>[O(r,{class:"icon",name:"lock"})])),_:1},8,["modelValue","rules"]),V("div",null,[O(l,{class:"btn-submit full-width no-outline text-h6",color:"primary",label:"登录",type:"submit"})]),To,Do])),_:1})])])}}}),[["__scopeId","data-v-cddb3e03"]]),Po=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),Io=Ut(x({__name:"LogTable",setup(e){G((e=>({e789e838:q(r).global.themeQCardColor,ef3233d4:q(r).global.themeQCardBackgroundColor,"49cd4d32":q(r).global.themeColorActive})));const t=w({sortBy:"desc",descending:!1,rowsPerPage:10}),o=z([{id:"time",label:"时间",field:"time",align:"center"},{id:"message",label:"信息",field:"message",align:"center"},{id:"url",label:"触发页面",field:"url",align:"center"},{id:"more",label:"查看详情",align:"center"}]),a=_((()=>or.system.useLogStore().log)),r=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>{const s=C("q-td"),n=C("q-btn"),i=C("q-tr"),l=C("q-table");return k(),b(l,{class:"log-table-list",rows:q(a),columns:o.value,pagination:t},{body:L((e=>[O(i,{props:e},{default:L((()=>[O(s,{key:"time",class:"text-center"},{default:L((()=>[T(D(e.row.time),1)])),_:2},1024),O(s,{key:"message",class:"text-center"},{default:L((()=>[T(D(e.row.message),1)])),_:2},1024),O(s,{key:"url",class:"text-center"},{default:L((()=>[T(D(e.row.meta.url),1)])),_:2},1024),O(s,{key:"more",class:"text-center"},{default:L((()=>[O(n,{icon:"more",rounded:"",onClick:t=>(e.row,void ge.create({type:"info",caption:"日志详情",message:"完整的日志内容已经打印到控制台"}))},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination"])}}}),[["__scopeId","data-v-7dd27b58"]]),Ro=V("div",{class:"text-h6"},"日志列表",-1),Bo=T("关闭"),qo=x({__name:"Index",setup(e){const t=z(!1),o=_((()=>or.system.useLogStore().length)),a=_((()=>or.system.useLogStore().lengthError)),r=_((()=>0===o.value?"没有日志或异常":`${o.value} 条日志${a.value>0?` | 包含 ${a.value} 个异常`:""}`)),s=()=>{t.value=!0};return(e,o)=>{const a=C("q-tooltip"),n=C("q-btn"),i=C("q-space"),l=C("q-card-section"),c=C("q-card"),d=C("q-dialog"),u=R("close-popup");return k(),S(M,null,[O(n,{icon:"adjust",size:"md",flat:"",round:"",onClick:s},{default:L((()=>[O(a,null,{default:L((()=>[T(D(q(r)),1)])),_:1})])),_:1}),O(d,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e)},{default:L((()=>[O(c,{style:{width:"1440px","max-width":"960px"}},{default:L((()=>[O(l,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:L((()=>[Ro,O(i),A((k(),b(n,{icon:"close",flat:"",round:"",dense:""},{default:L((()=>[O(a,null,{default:L((()=>[Bo])),_:1})])),_:1})),[[u]])])),_:1}),O(l,{class:"theme-card"},{default:L((()=>[O(Io)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Mo=x({__name:"Index",setup(e){const t=_((()=>or.system.useFullscreenStore().active)),o=()=>{or.system.useFullscreenStore().toggle()};return(e,a)=>{const r=C("q-tooltip"),s=C("q-btn");return k(),b(s,{icon:q(t)?"fullscreen_exit":"fullscreen",size:"md",flat:"",round:"",onClick:o},{default:L((()=>[O(r,null,{default:L((()=>[T(D(q(t)?"退出全屏":"全屏"),1)])),_:1})])),_:1},8,["icon"])}}}),jo=T("已激活"),Eo=T("使用"),Ao=x({__name:"ThemeList",setup(e){G((e=>({"1a8379b6":q(r).global.themeQCardColor,"15dea5d5":q(r).global.themeColorActive})));const t=z([{id:"title",label:"名称",field:"title",align:"center"},{id:"preview",label:"预览",field:"preview",align:"center"},{id:"handler",label:"操作",align:"center"}]),o=_((()=>or.system.useThemeStore().list)),a=_((()=>or.system.useThemeStore().activeName)),r=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));return(e,r)=>{const s=C("q-td"),n=C("q-btn"),i=C("q-tr"),l=C("q-table");return k(),b(l,{class:"theme-table-list",rows:q(o),"hide-header":"","hide-pagination":"",columns:t.value},{body:L((e=>[O(i,{props:e},{default:L((()=>[O(s,{key:"title"},{default:L((()=>[T(D(e.row.title),1)])),_:2},1024),O(s,{key:"preview"},{default:L((()=>[T(D(e.row.preview),1)])),_:2},1024),O(s,{key:"handler"},{default:L((()=>[q(a)===e.row.name?(k(),b(n,{key:0,class:"active",icon:"done",rounded:"",outline:""},{default:L((()=>[jo])),_:1})):(k(),b(n,{key:1,rounded:"",outline:"",onClick:t=>{return o=e.row.name,void or.system.useThemeStore().set(o);var o}},{default:L((()=>[Eo])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])}}}),No=T("主题"),zo=V("div",{class:"text-h6"},"主题",-1),Fo=T("关闭"),$o=x({__name:"Index",setup(e){const t=z(!1);return(e,o)=>{const a=C("q-tooltip"),r=C("q-btn"),s=C("q-space"),n=C("q-card-section"),i=C("q-card"),l=C("q-dialog"),c=R("close-popup");return k(),S(M,null,[O(r,{icon:"style",size:"md",flat:"",round:"",onClick:o[0]||(o[0]=e=>t.value=!0)},{default:L((()=>[O(a,null,{default:L((()=>[No])),_:1})])),_:1}),O(l,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=e=>t.value=e)},{default:L((()=>[O(i,{style:{width:"650px"}},{default:L((()=>[O(n,{class:"row items-center q-pb-none q-pt-xs card-header"},{default:L((()=>[zo,O(s),A((k(),b(r,{icon:"close",flat:"",round:"",dense:""},{default:L((()=>[O(a,null,{default:L((()=>[Fo])),_:1})])),_:1})),[[c]])])),_:1}),O(n,{class:"theme-card"},{default:L((()=>[O(Ao)])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Ho=T("注销"),Uo=x({__name:"Index",setup(e){const{toggleGlobalLayout:t}=or.system.useLayoutStore(),{loadDefaultLayers:o}=or.viewer.useLayerStore(),a=or.system.useUserStore(),r=xe(),s=()=>{or.system.useAccountStore().logout({confirm:!0}).then((e=>{if(e){o(!1),t({featureInfo:!1,layerManager:!1}),or.viewer.useRenderStore(tr).removeAllRenderData();const e={position:[105,30,21634101],heading:360,pitch:-90,roll:0};(null==r?void 0:r.viewer)&&Se(null==r?void 0:r.viewer,e,{duration:3})}}))};return(e,t)=>{var o;const r=C("q-avatar"),n=C("q-item-section"),i=C("q-item-label"),l=C("q-item"),c=C("q-list"),d=C("q-menu"),u=C("q-btn"),m=R("close-popup");return k(),b(u,{dense:"",rounded:"","no-caps":"",size:"md",class:"q-mr-sm","auto-close":"",icon:"person",label:null==(o=q(a).info)?void 0:o.username},{default:L((()=>[O(d,null,{default:L((()=>[O(c,{dense:""},{default:L((()=>[A((k(),b(l,{clickable:"",dense:"",onClick:s},{default:L((()=>[O(n,{avatar:""},{default:L((()=>[O(r,{icon:"logout"})])),_:1}),O(n,null,{default:L((()=>[O(i,null,{default:L((()=>[Ho])),_:1})])),_:1})])),_:1})),[[m]])])),_:1})])),_:1})])),_:1},8,["label"])}}}),Go=T("简体中文"),Qo=T("English"),Wo=x({__name:"Index",setup(e){const{locale:t}=Y(),o=z(!1),a=e=>{t.value=e,$e("locale",e)};return(e,t)=>{const r=C("q-item-label"),s=C("q-item-section"),n=C("q-item"),i=C("q-list"),l=C("q-btn-dropdown"),c=R("close-popup");return k(),b(l,{modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e),dense:"",color:"#fff","fab-mini":"",size:"md","dropdown-icon":"language",flat:""},{default:L((()=>[O(i,null,{default:L((()=>[A((k(),b(n,{clickable:"",onClick:t[0]||(t[0]=e=>a("zh-CN"))},{default:L((()=>[O(s,null,{default:L((()=>[O(r,null,{default:L((()=>[Go])),_:1})])),_:1})])),_:1})),[[c]]),A((k(),b(n,{clickable:"",onClick:t[1]||(t[1]=e=>a("en-US"))},{default:L((()=>[O(s,null,{default:L((()=>[O(r,null,{default:L((()=>[Qo])),_:1})])),_:1})])),_:1})),[[c]])])),_:1})])),_:1},8,["modelValue"])}}}),Jo=T("图层管理"),Yo=x({__name:"Index",setup(e){const{toggleGlobalLayout:t}=or.system.useLayoutStore(),o=()=>{t({layerManager:!or.system.useLayoutStore().global.layerManager})};return(e,t)=>{const a=C("q-tooltip"),r=C("q-btn");return k(),b(r,{size:"md",flat:"",round:"",color:"#fff",icon:"layers",onClick:o},{default:L((()=>[O(a,null,{default:L((()=>[Jo])),_:1})])),_:1})}}}),Ko={class:"left"},Zo={class:"content"},Xo=(e=>(W("data-v-9dd29b3a"),e=e(),J(),e))((()=>V("div",{size:"60px",class:"logo-img float"},[V("img",{src:"https://zouyaoji.top/vue-cesium/favicon.png"})],-1))),ea={class:"title text-h4 float"},ta={class:"nav float"},oa={class:"right q-ml-sm q-mr-sm"},aa={key:0,class:"content"},ra=Ut(x({__name:"Index",setup(e){G((e=>({"4ec40eb5":q(m).header.themeHeaderBackgroundColor,a98bb588:q(m).header.themeHeaderContentBackgroundColor,"80fcb4ec":q(m).header.themeHeaderLogoBackgroundColor,"40875fea":q(m).header.themeHeaderTitleColor,b0d4c17a:q(m).header.themeHeaderColor,20233740:q(m).global.themeColorActive})));const t=K(),o=z(!1),a=z(""),{registerTimeout:r}=Le(),s=z(100),n=or.system.useMenuStore(),i=or.system.useLayoutStore(),{global:l}=F(i),c=_((()=>"VueCesium Demo")),d=_((()=>{const e=n.header;return e.length?e[0].children:[]})),u=_((()=>n.aside)),m=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));I((()=>t.matched),(e=>{r((()=>{if(e.length>1){const t=e[1].path.substring(1,e[1].path.length);t&&(a.value=t)}else a.value="index"}),s.value)}),{immediate:!0}),$((()=>{s.value=5}));const p=()=>{ye("https://github.com/zouyaoji/vue-cesium-demo")},h=()=>{i.toggleGlobalLayout({leftDrawerMini:!l.value.leftDrawerMini})},g=e=>{null===e&&t.matched.length>1?a.value=t.matched[1].path.substring(1,t.matched[1].path.length):a.value=e};return(e,t)=>{const r=C("q-btn"),s=C("q-route-tab"),n=C("q-tabs"),i=C("q-icon");return k(),S("div",{class:"main-header",style:Z({opacity:o.value?.5:1})},[V("div",Ko,[V("div",Zo,[Xo,q(u).length?(k(),b(r,{key:0,flat:"",icon:"menu",class:"text-white",round:"",style:{height:"24px"},onClick:h})):P("",!0),V("div",ea,[V("div",null,D(q(c)),1)]),V("div",ta,[O(n,{"model-value":a.value,"onUpdate:model-value":t[0]||(t[0]=e=>a.value=e),"onUpdate:modelValueOnce":g},{default:L((()=>[(k(!0),S(M,null,B(q(d),((t,o)=>(k(),b(s,{key:o,name:t.name,to:t.path,exact:"",label:e.$t(t.title),"active-class":"menu-active"},null,8,["name","to","label"])))),128))])),_:1},8,["model-value"])])])]),V("div",oa,[q(d).length?(k(),S("div",aa,[O(r,{size:"md",flat:"",round:"",color:"#fff",onClick:p},{default:L((()=>[O(i,{name:"fa fa-github"})])),_:1}),O(Yo),O(qo),O(Mo),O($o),O(Wo),O(Uo)])):P("",!0)])],4)}}}),[["__scopeId","data-v-9dd29b3a"]]),sa={key:0,class:"text-weight-bold"},na={class:"content"},ia=Ut(x({__name:"Index",props:{title:{type:String,default:""},titleClass:{type:String,default:""},closeTip:{type:String,default:"关闭"},showCloseBtn:{type:Boolean,default:!0},separatorOpts:{type:Object,default:()=>({show:!0,dark:!0,color:"white",size:"1px"})}},emits:["close"],setup(e,{emit:t}){G((e=>({c6e3f058:q(a).commonPanel.themeCommonPanelHeaderColor,a83893f4:q(a).commonPanel.themeCommonPanelHeaderBackgroundColor,"6d7599a8":q(a).commonPanel.themeCommonPanelContentColor,"387e935e":q(a).commonPanel.themeCommonPanelContentBackgroundColor,"452a03e3":q(a).commonPanel.themeCommonPanelListColor,"5d46fb17":q(a).commonPanel.themeCommonPanelListBorderColor,"84b34094":q(a).global.themeColorAlpha,"21f592f0":q(a).global.themeColor})));const o=e=>{t("close",e)},a=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));return(t,a)=>{const r=C("q-space"),s=C("q-tooltip"),n=C("q-btn"),i=C("q-bar"),l=C("q-separator"),c=C("q-card"),d=R("close-popup");return k(),b(c,{class:"common-panel"},{default:L((()=>[O(i,{class:E(["header",e.titleClass])},{default:L((()=>[""!==e.title?(k(),S("div",sa,D(e.title),1)):P("",!0),X(t.$slots,"header-left",{},void 0,!0),O(r),X(t.$slots,"header-right",{},void 0,!0),e.showCloseBtn?A((k(),b(n,{key:1,dense:"",flat:"",icon:"close",onClick:o},{default:L((()=>[O(s,null,{default:L((()=>[T(D(e.closeTip),1)])),_:1})])),_:1})),[[d]]):P("",!0)])),_:3},8,["class"]),e.separatorOpts.show?(k(),b(l,ee(te({key:0},e.separatorOpts)),null,16)):P("",!0),V("div",na,[X(t.$slots,"default",{},void 0,!0)])])),_:3})}}}),[["__scopeId","data-v-70da5cdb"]]),la=x({name:"DragWrapper",props:{restriction:{type:[String,Object,Function],default:"parent"}},setup(e,t){const o=z(null),a=se(),r=e=>{const t=e.target,o=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+o+"px, "+a+"px)",t.setAttribute("data-x",o),t.setAttribute("data-y",a)},s=()=>{const e=o.value;oe(e).reflow({name:"drag",axis:"xy"})};return $((()=>{const t=o.value;oe(t).draggable({ignoreFrom:"button, .ignore-drag",allowFrom:".drag-handle",inertia:!0,onmove:r,restrict:{restriction:e.restriction,endOnly:!0,elementRect:{left:0,right:1,top:0,bottom:1}}}),addEventListener("resize",s,!1)})),ae((()=>{const e=o.value;oe.isSet(e)&&oe(e).unset(),removeEventListener("resize",s,!1)})),Object.assign(null==a?void 0:a.proxy,{resizeListener:s}),()=>re("div",{ref:o,class:"drag-wrapper absolute"},Oe(t.slots.default))}}),ca={class:"text-subtitle2"},da={class:"q-gutter-sm"},ua={class:"text-subtitle2"},ma={class:"q-gutter-sm"},pa={class:"text-subtitle2"},ha={class:"q-gutter-sm"},ga=Ut(x({__name:"Index",setup(e){const t=z(null),o=or.system.useLayoutStore(),{global:a,dynamicRender:r}=F(o),{overlayLayers:s,baseLayers:n,vectorLayers:i,toggle:l}=or.viewer.useLayerStore();I(r,(e=>{ne((()=>{var e,o;t.value&&(null==(o=(e=t.value).resizeListener)||o.call(e))}))}),{deep:!0});const c=_((()=>({overlayLayers:s,baseLayers:n,vectorLayers:i}))),d=_({get(){var e,t;return null==(t=null==(e=c.value.baseLayers.filter((e=>e.show)))?void 0:e[0])?void 0:t.name},set(e){}}),u=(e,t)=>{c.value.baseLayers.forEach((t=>{t.name===e?l({names:t.name,show:!0}):l({names:t.name,show:!1})}))},m=(e,t)=>{const o=e.name;l({names:o,show:t})},p=()=>{o.toggleGlobalLayout({layerManager:!a.value.layerManager})};return(e,o)=>{const s=C("q-radio"),n=C("q-card-section"),i=C("q-separator"),l=C("q-checkbox");return k(),S("div",{class:E(["layer-manager",q(r).datasource.workBench?"":"full-srceen"])},[O(q(la),{ref_key:"dragWrapperRef",ref:t},{default:L((()=>[A(O(ia,{class:"layer-manager-panel",title:e.$t("message.panel.layerManager"),"title-class":"drag-handle",onClose:p},{default:L((()=>[O(n,{class:"q-pt-sm"},{default:L((()=>[V("div",ca,D(e.$t("message.baseLayer")),1),V("div",da,[(k(!0),S(M,null,B(q(c).baseLayers,((e,t)=>(k(),b(s,{key:t,modelValue:q(d),"onUpdate:modelValue":[o[0]||(o[0]=e=>ie(d)?d.value=e:null),u],val:e.name,label:e.text},null,8,["modelValue","val","label"])))),128))])])),_:1}),O(i,{inset:""}),O(n,{class:"q-pt-sm"},{default:L((()=>[V("div",ua,D(e.$t("message.overlayLayer")),1),V("div",ma,[(k(!0),S(M,null,B(q(c).overlayLayers,((e,t)=>(k(),b(l,{key:t,modelValue:e.show,"onUpdate:modelValue":[t=>e.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1}),O(i,{inset:""}),O(n,{class:"q-pt-sm"},{default:L((()=>[V("div",pa,D(e.$t("message.vectorLayer")),1),V("div",ha,[(k(!0),S(M,null,B(q(c).vectorLayers,((e,t)=>(k(),b(l,{key:t,modelValue:e.props.show,"onUpdate:modelValue":[t=>e.props.show=t,t=>m(e,t)],val:e.name,label:e.text},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])),_:1})])),_:1},8,["title"]),[[U,q(a).layerManager]])])),_:1},512)],2)}}}),[["__scopeId","data-v-7d79f198"]]),fa={class:"main-interaction"},va={class:"layer-manager-wrapper"},ya=Ut(x({__name:"Index",setup:e=>(_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]})),(e,t)=>(k(),S("div",fa,[V("div",va,[O(ga)])])))}),[["__scopeId","data-v-74a2bfee"]]),ba={class:"vc-geocoder q-gutter-md row z-fab"},Ca=T(" 没有结果 "),ka=Ut(x({__name:"Index",setup(e){const t=xe(),o=z(null),a=z([]),r=z(null),s=z([]),n=async(e,t,r)=>{const s={keywords:e=""===e?o.value:e,citylimit:!0,output:"json",key:"488103685805d2ceb629aba785aa3760"},n=await Bt.getLocationList(s);let i=[];if("1"===n.status){const e=n.pois,t=[];e.forEach((e=>{t.push({value:e.id,label:e.name,pname:e.pname,cityname:e.cityname,adname:e.adname,address:e.address,location:e.location,type:e.type})})),i=[...new Set(t)]}t((()=>{const t=null==e?void 0:e.toLocaleLowerCase();a.value=i.filter((e=>e.label.toLocaleLowerCase().indexOf(t)>-1))}))},i=e=>{o.value=e},l=()=>{o.value=null,s.value.length=0},c=e=>{if(e){const t=Te(Number(e.location.trim().split(",")[0]),Number(e.location.trim().split(",")[1])),o={lng:t[0],lat:t[1],address:e.address};d(o,e)}else s.value.length=0},d=(e,o)=>{const a=e.lng,r=e.lat,n=e.address,{Rectangle:i,sampleTerrain:l}=Cesium,{viewer:c}=t;s.value.length=0,s.value.push({position:[a,r],point:{color:"#08ABD5",pixelSize:12,outlineWidth:3,outlineColor:"#fff"},properties:{...o},description:u({"经度":a,"纬度":r,"地址":n})}),new Cesium.HeadingPitchRange(0,0,3e3);const d=.01,m=i.fromDegrees(a-d,r-d,a+d,r+d),p=c.scene.camera,h=p.getRectangleCameraCoordinates(m),g=c.scene.globe.ellipsoid.cartesianToCartographic(h);l(c.scene.globe.terrainProvider,6,[i.center(m)]).then((function(e){const t={longitude:g.longitude,latitude:g.latitude,height:g.height+e[0].height},o=c.scene.globe.ellipsoid.cartographicToCartesian(t);p.flyTo({duration:3,destination:o})}))},u=(e,t)=>{let o="";e instanceof Cesium.PropertyBag&&(e=e.getValue(Cesium.JulianDate.now()));for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(a===t)continue;let r=e[a];"object"==typeof r&&(r=u(r)),a=a.replace(/_/g," "),Cesium.defined(r)&&(o+="<tr><th>"+a+"</th><td>"+r+"</td></tr>")}return o.length>0&&(o='<table class="cesium-infoBox-defaultTable"><tbody>'+o+"</tbody></table>"),o};return(e,t)=>{const d=C("q-icon"),u=C("q-item-section"),m=C("q-item"),p=C("q-select"),h=C("vc-datasource-custom");return k(),S(M,null,[V("div",ba,[O(p,{outlined:"","model-value":o.value,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:a.value,label:"输入关键字搜索位置",style:{width:"250px"},dense:"","hide-dropdown-icon":"",onFilter:n,onInputValue:i,"onUpdate:modelValue":c},{prepend:L((()=>[O(d,{name:"place",color:"white"})])),"no-option":L((()=>[O(m,null,{default:L((()=>[O(u,{class:"text-grey"},{default:L((()=>[Ca])),_:1})])),_:1})])),append:L((()=>[null!==o.value?(k(),b(d,{key:0,name:"cancel",class:"cursor-pointer",onClick:N(l,["stop"])},null,8,["onClick"])):P("",!0),O(d,{name:"search",color:"orange"})])),_:1},8,["model-value","options"])]),O(h,{ref_key:"datasoureceRef",ref:r,entities:s.value},null,8,["entities"])],64)}}}),[["__scopeId","data-v-eeba3faf"]]),wa={VcCollectionPrimitive:De,VcCollectionBillboard:Ve,VcCollectionPoint:Pe,VcCollectionPolyline:Ie,VcDatasourceGeojson:Re,VcDatasourceCustom:Be,VcOverlayDynamic:qe,VcOverlayHeatmap:Me,VcPrimitiveTileset:je},_a=x({name:"RenderData",setup(e,t){const o=xe(),a=or.viewer.useRenderStore().renderDatas,r=or.viewer.useRenderStore().selectedRenderData,s=z(null);let n=!1;const{registerTimeout:i,removeTimeout:l}=Le(),{toggleGlobalLayout:c}=or.system.useLayoutStore(),{setMouseOverlayLabel:d,clearMouseOverlayLabel:u}=or.viewer.useOverlayStore();let m=!1;I((()=>we.exports.cloneDeep(r)),((e,t)=>{var o,a,r;if(e.model){const c=e.feature,d=t.feature;if(!n&&c.properties.id!==(null==(o=null==d?void 0:d.properties)?void 0:o.id)){const t=e.model.position||[Number(null==(a=c.properties)?void 0:a.longitude),Number(null==(r=c.properties)?void 0:r.latitude)];e.model&&t&&!isNaN(t[0])&&(l(),i((()=>{s.value.position.value=Cesium.Cartesian3.fromDegrees(t[0],t[1]),s.value.animateAppear(),m=!0}),1500))}n=!1}else(m&&!n||!n&&s.value.selectedFeature.value)&&s.value.animateDepart(),m=!1}),{deep:!0});const p=e=>{var t,a,r,s;const{viewer:n}=o;n.canvas.setAttribute("style","cursor: pointer");const{defined:i,JulianDate:l,BoundingSphere:c,PointPrimitiveCollection:u,BillboardCollection:m,PolylineCollection:p,PrimitiveCollection:h,GeoJsonDataSource:g,CustomDataSource:f}=Cesium;let v,y="",b=[0,0];if(e.cesiumObject instanceof m||e.cesiumObject instanceof u){const o=e.pickedFeature.primitive,a=null==o?void 0:o.feature;i(a)&&(y=null==(t=a.properties)?void 0:t.name,v=o.position||e.surfacePosition,b=[16,16])}else if(e.cesiumObject instanceof p){const t=e.pickedFeature.primitive,o=null==t?void 0:t.feature;if(i(o)){y=null==(a=o.properties)?void 0:a.name;const e=t.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof h){const t=null==(r=e.pickedFeature.primitive)?void 0:r._vcParent,o=null==t?void 0:t.feature;if(i(o)){y=null==(s=o.properties)?void 0:s.name;const e=t.positions.length?t.positions:t.polygonHierarchy.positions;v=c.fromPoints(e).center,b=[16,16]}}else if(e.cesiumObject instanceof f||e.cesiumObject instanceof g){const t=e.pickedFeature.id,o=null==t?void 0:t.feature;if(i(o)){const e=o.properties;y=null==e?void 0:e.name;let a,r;switch(null==e?void 0:e.actualRenderingType){case"label":case"point":case"billboard":case"model":v=t.position.getValue(l.now());break;case"polyline":r=t.polyline.positions.getValue(),a=c.fromPoints(r),v=a.center;break;case"polygon":r=t.polygon.hierarchy.getValue().positions,a=c.fromPoints(r),v=a.center;break;case"geojson":y=t.properties.dValue.getValue(),a=new Cesium.BoundingSphere,n.dataSourceDisplay.getBoundingSphere(t,!0,a),v=a.center}b=[16,16]}}y&&""!==y&&d({position:v,show:!0,text:y,pixelOffset:b})},h=e=>{const{viewer:t}=o;t.canvas.setAttribute("style","cursor: auto"),u()},g=e=>{e?"__Vc__Pick__Location__"!==e.id&&(n=!0,c({featureInfo:!1}),setTimeout((()=>{var t,a,r;const{viewer:s}=o,{defined:n,JulianDate:i,BoundingSphere:l}=Cesium,d=(null==(t=e.cesiumObject)?void 0:t.feature)||(null==(r=null==(a=e.cesiumObject)?void 0:a._vcParent)?void 0:r.feature);n(d)?ne((()=>{var t,o;const{actualRenderingType:a,datasetId:r,id:n,renderingApi:c}=d.properties;let u,m;pt(a,r,n);const p=e.cesiumObject;switch(a){case"label":case"point":case"billboard":case"model":"primitive"===c?p.position:p.position.getValue(i.now());break;case"polyline":m="primitive"===c?p.positions:p.polyline.positions.getValue(),u=l.fromPoints(m),u.center;break;case"polygon":m="primitive"===c?null==(t=p._vcParent)?void 0:t.polygonHierarchy.positions:p.polygon.hierarchy.getValue().positions,u=l.fromPoints(m),u.center;break;case"geojson":u=new Cesium.BoundingSphere,s.dataSourceDisplay.getBoundingSphere(p,!0,u),u.center}(!Cesium.defined(null==(o=null==d?void 0:d.properties)?void 0:o.showBillboardMenu)||d.properties.showBillboardMenu)&&f()})):(mt(),c({featureInfo:!1}))}),100)):(mt(),c({featureInfo:!1}))},f=()=>{r.feature.properties.id?et("属性展示逻辑待完善"):Ze("显示详情数据失败，原因：要素 id 值为空。","要素model：",r.model)};function v(e){this.cmpRef=e}const y=e=>{const t=[];return null==e||e.forEach((e=>{const o=wa[e.cmpName];o?t.push(re(o,{...e.props,ref:v.bind(e),onMouseover:p,onMouseout:h},(()=>y(null==e?void 0:e.children)))):Xe(`添加渲染数据集失败，原因：没要找到渲染组件名【${e.cmpName}】。`,"渲染集合数据模型：",e)})),t};return()=>{const e=[];return e.push(re(Ee,{ref:s,onPickEvt:g})),a.forEach((t=>{null==t||t.datasets.forEach((t=>{const o=wa[t.cmpName];o?e.push(re(o,{...t.props,ref:v.bind(t),onMouseover:p,onMouseout:h},(()=>y(null==t?void 0:t.children)))):Xe(`添加渲染数据集失败，原因：没要找到渲染组件名【${t.cmpName}】。`,"渲染集合数据模型：",t)}))})),e}}}),xa={class:"vc-drawtip vc-tooltip--style"},Sa=x({__name:"Index",emits:["viewerReady","cesiumReady","leftClick","destroyed"],setup(e,{emit:t}){const o={"en-US":Ne,"zh-CN":ze},{locale:a}=Y(),r=_((()=>o[a.value])),s=or.system.useThemeStore(),n=_((()=>s.themeConfig[s.activeName])),{toggleGlobalLayout:i}=or.system.useLayoutStore(),{registerTimeout:l}=Le(),c=z(null),d=z([0,75]),u=_((()=>({outerOptions:{icon:n.value.navigation.themeVcCompassOuterIcon,color:n.value.navigation.themeVcCompassOuterColor},innerOptions:{icon:n.value.navigation.themeVcCompassInnerIcon,color:n.value.navigation.themeVcCompassInnerColor,background:n.value.navigation.themeVcCompassInnerBackgroundColor},markerOptions:{color:n.value.global.themeColorAlpha},duration:5}))),m=_((()=>({background:n.value.navigation.themeVcZoomControlBackgroundColor,color:n.value.global.themeColor,border:`solid 1px ${n.value.commonPanel.themeCommonPanelListBorderColor}`,zoomInOptions:{color:n.value.global.themeColor},zoomOutOptions:{color:n.value.global.themeColor},zoomResetOptions:{color:n.value.global.themeColor}}))),p=_((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),h=_((()=>({color:n.value.global.themeColor,background:n.value.navigation.themeVcPrintBackgroundColor,round:!0}))),g=_((()=>({position:"bottom-right",offset:[0,10],statusBarOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcStatusBarBackgroundColor},distancelegendOpts:{color:n.value.global.themeColor,background:n.value.navigation.themeVcDistanceLegendBackgroundColor}}))),f=or.viewer.useOverlayStore().mouseOverNameOpts;or.viewer.useRenderStore().selectedRenderData;const v=_((()=>[...or.viewer.useLayerStore().baseLayers,...or.viewer.useLayerStore().overlayLayers])),y=_((()=>or.viewer.useLayerStore().vectorLayers)),w=e=>{t("viewerReady",e),e.viewer.imageryLayers.removeAll(),i({header:!0}),l((()=>{i({content:!0})}),500)},x=e=>{t("cesiumReady",e)};return(e,t)=>{const o=C("vc-navigation"),a=C("vc-ajax-bar"),s=C("vc-layer-imagery"),n=C("vc-overlay-html"),i=C("vc-viewer");return k(),b(q(Ae),{locale:q(r),"cesium-path":"./Cesium/Cesium.js"},{default:L((()=>[O(i,{ref_key:"viewerRef",ref:c,class:"main-viewer",onReady:w,onCesiumReady:x},{default:L((()=>[O(o,{offset:d.value,"compass-opts":q(u),"zoom-opts":q(m),"print-opts":q(p),"location-opts":q(h),"other-opts":q(g)},null,8,["offset","compass-opts","zoom-opts","print-opts","location-opts","other-opts"]),O(a,{position:"bottom",color:"#21BA45",size:"3px",positioning:"fixed"}),O(q(_a)),(k(!0),S(M,null,B(q(v),((e,t)=>(k(),b(s,{key:"layer"+t,alpha:e.alpha,brightness:e.brightness,contrast:e.contrast,"sort-order":e.sortOrder,show:e.show},{default:L((()=>[(k(),b(le(e.component),ee(ce(e.props)),null,16))])),_:2},1032,["alpha","brightness","contrast","sort-order","show"])))),128)),(k(!0),S(M,null,B(q(y),((e,t)=>(k(),S(M,{key:"vector"+t},["VcTerrainProviderCesium"!==e.component||e.props.show?(k(),b(le(e.component),ee(te({key:0},e.props)),null,16)):P("",!0)],64)))),128)),q(f).show?(k(),b(n,{key:0,position:q(f).position,"pixel-offset":q(f).pixelOffset},{default:L((()=>[V("div",xa,D(q(f).text),1)])),_:1},8,["position","pixel-offset"])):P("",!0),O(ka),X(e.$slots,"default")])),_:3},512)])),_:3},8,["locale"])}}}),La={elevated:"",reveal:"",class:"absolute text-h4 text-center"},Oa={key:0,class:"content"},Ta=Ut(x({__name:"MainLayout",setup(e){G((e=>({e440aac4:q(c).menu.themeMenuColor,"0d8916f8":q(c).menu.themeMenuActiveColor,"947dafac":q(c).menu.themeMenuActiveBackgroundColor})));const t=K(),o=F(or.system.useLayoutStore()).global,{active:a}=F(or.system.useGrayStore()),r=or.system.useMenuStore(),s=z(!1),n=_((()=>{const e=r.header;return e.length?e[0].children:[]})),i=_((()=>r.aside)),l=_((()=>t.name)),c=_((()=>{const e=or.system.useThemeStore();return e.themeConfig[e.activeName]}));return I((()=>t.matched),(e=>{if(e.length>1){const t=n.value.filter((t=>t.path===e[1].path));if(t.length){const e=t[0].children.filter((e=>10===e.type));e.length?r.asideSet(e):r.asideSet([])}else r.asideSet([])}}),{immediate:!0}),$((()=>{or.system.useAccountStore().load(),or.system.useFullscreenStore().listen(),window.onunhandledrejection=e=>{or.system.useLogStore(tr).push({message:we.exports.get(e,"reason.message","Unknown error"),type:"danger",meta:{error:we.exports.get(e,"reason"),trace:we.exports.get(e,"reason.stack")}})},window.onerror=(e,t,o,a,r)=>{or.system.useLogStore(tr).push({message:we.exports.get(r,"message","Unknown error"),type:"danger",meta:{error:r,trace:we.exports.get(r,"stack"),source:`${t}@${o}:${a}`,event:e}})}})),(e,t)=>{const r=C("q-icon"),n=C("q-item-section"),c=C("q-tooltip"),d=C("q-item"),u=C("q-separator"),m=C("q-list"),p=C("q-scroll-area"),h=C("q-drawer"),g=C("router-view"),f=C("q-page"),v=C("q-page-container"),y=C("q-layout"),w=R("ripple");return k(),b(y,{view:"hHh Lpr fFf",class:E(["main-layout",{"gray-mode":q(a)}])},{default:L((()=>{var a;return[(null==(a=q(i))?void 0:a.length)&&q(o).header?(k(),b(h,{key:0,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),"show-if-above":"",width:180,breakpoint:500,bordered:"",mini:q(o).leftDrawerMini},{default:L((()=>[O(p,{class:"fit"},{default:L((()=>[O(m,{class:"drawer-menu-list"},{default:L((()=>[(k(!0),S(M,null,B(q(i),((t,a)=>(k(),S(M,{key:a},[A((k(),b(d,{clickable:"","active-class":"menu-active-item",active:t.name===q(l),onClick:o=>e.$router.push(t.path)},{default:L((()=>[O(n,{avatar:""},{default:L((()=>[O(r,{name:t.icon},null,8,["name"])])),_:2},1024),O(n,null,{default:L((()=>[T(D(e.$t(t.title)||t.caption),1)])),_:2},1024),q(o).leftDrawerMini?(k(),b(c,{key:0,"transition-show":"scale","transition-hide":"scale",anchor:"center right",self:"center left"},{default:L((()=>[T(D(e.$t(t.title)||t.caption),1)])),_:2},1024)):P("",!0)])),_:2},1032,["active","onClick"])),[[w]]),t.separator?(k(),b(u,{key:"sep"+a})):P("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["modelValue","mini"])):P("",!0),O(v,{class:"no-padding"},{default:L((()=>[O(f,{class:"interaction-root"},{default:L((()=>[O(Sa,null,{default:L((()=>[A(V("header",La,[O(ra)],512),[[U,q(o).header]]),q(o).content?(k(),S("div",Oa,[O(ya),O(g)])):P("",!0)])),_:1})])),_:1})])),_:1})]})),_:1},8,["class"])}}}),[["__scopeId","data-v-1c85bf86"]]),Da=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"})),Va=vt([]);vt([]);const Pa={theme:{list:[{title:"经典",name:"classic",preview:"images/theme/classic/preview@2x.png"},{title:"Element",name:"element",preview:"images/theme/element/preview@2x.png"}]},menu:{asideCollapse:!1,asideTransition:!0},hotkey:{search:{open:"s",close:"esc"}},transition:{active:!0}},Ia=y("menu",{state:()=>({header:[],aside:[],asideCollapse:Pa.menu.asideCollapse,asideTransition:Pa.menu.asideTransition,moduleHeader:[]}),getters:{},actions:{async asideCollapseSet(e){this.asideCollapse=e;$t().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideCollapseToggle(){this.asideCollapse=!this.asideCollapse;$t().set({dbName:"sys",path:"menu.asideCollapse",value:String(this.asideCollapse),user:!0})},async asideTransitionSet(e){this.asideTransition=e;$t().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideTransitionToggle(){this.asideTransition=!this.asideTransition;$t().set({dbName:"sys",path:"menu.asideTransition",value:String(this.asideTransition),user:!0})},async asideLoad(){$t().get({dbName:"sys",path:"menu",defaultValue:String(Pa.menu),user:!0})},headerSet(e){this.header=e},asideSet(e){this.aside=e},clear(){this.header=[],this.aside=[]},moduleHeaderSet(e){this.moduleHeader=e}}}),Ra=y("search",{state:()=>({active:!1,hotkey:{open:Pa.hotkey.search.open,close:Pa.hotkey.search.close},pool:[]}),actions:{toggle(){this.active=!this.active},set(e){this.active=e},init(e){const t=[],o=function(e,a=[]){e.forEach((e=>{e.children?o(e.children,[...a,e.title]):t.push({...e,fullTitle:[...a,e.title].join(" / ")})}))};o(e),this.pool=t}}}),Ba=[...Va];const qa=Object.assign({"../../pages/dynamic-render/Index.vue":Qt,"../../pages/dynamic-render/datasource/Index.vue":uo,"../../pages/dynamic-render/datasource/data-list-tree/Index.vue":eo,"../../pages/dynamic-render/datasource/work-bench/Index.vue":io,"../../pages/dynamic-render/historical-track/Index.vue":ho,"../../pages/index/Index.vue":vo,"../../pages/system/Error404.vue":_o,"../../pages/system/Login.vue":Po});function Ma(e,t){return null==e&&(e={path:"/",children:[]}),t.forEach((t=>{let o=e;if(20!==t.type&&(null!=(a=t.component)&&""!==a)){let a=null;a="MainLayout"===t.component?Ta:(e=>{const t=qa[`../../pages${e}/Index.vue`];if(t)return t.default;Ze(`动态路由页面【${e}】加载失败。请检查页面文件是否存在。`)})(t.path);const r=e.children;o={path:t.path,name:t.name,component:a,meta:{title:t.title,auth:!0,cache:!0}},t.redirect&&(o.redirect=t.redirect),r.push(o)}var a;null!=t.children&&t.children.length>0&&(null==o.children&&(o.children=[]),Ma(o,t.children))})),e.children}function ja(e,t){return null==e&&(e=[]),e.forEach((e=>{null!=e.permission&&""!==e.permission&&t.push(e.permission),null!=e.children&&e.children.length>0&&ja(e.children,t)})),t}function Ea(e){null==e&&(e=[]);let t=[];return e.forEach((e=>{if(10!==e.type)return;let o,a;null!=e.children&&e.children.length>0&&(o=Ea(e.children)),null!=e.icon&&""!==e.icon&&(a=e.icon),t.push({icon:a,children:o,...e})})),0===t.length&&(t=void 0),t}const Aa=y("permission",{state:()=>({routes:[],addRoutes:[],permissions:[],inited:!1}),getters:{},actions:{setRoutes({accessedRoutes:e,permissions:t}){this.addRoutes=e,this.routes=Ke.concat(e),this.inited=!0,this.permissions=t},clear(){this.addRoutes=[],this.routes=[],this.inited=!1,this.permissions=[]},generateRoutes({menuTree:e}){return new Promise((t=>{const o=Ma(null,e),a=ja(e,[]);this.setRoutes({accessedRoutes:o,permissions:a}),o.forEach((e=>{"layout"===e.name&&"/"===e.path&&(e.children=e.children.concat(Ye[0].children)),Et.addRoute(e)}));const r=vt(Ea(e));Va.splice(0,Va.length),Va.push(...Ba),Va.push(...r);Ia().headerSet(Va);Ra().init(Va),t(!0)}))},async getAccessibleMenus({state:e,dispatch:t}){}}}),Na=y("gray",{state:()=>({active:!1}),getters:{},actions:{toggle(){this.active=!this.active},set(e){this.active=e}}}),za={themeName:"classic",global:{themeBGColor:"#ebf1f6",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#cbe1e5",themeColorAlpha:"rgba(255, 255, 255, 0.6)",themeColorActive:"#fff",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#fff",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#1976d2",themeQMenuColor:"#fff",themeQMenuBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQCardColor:"#fff",themeQCardHeaderBackgroundColor:"rgba(0, 101, 122, 0.5)",themeQCardBackgroundColor:"rgba(0, 68, 82, 0.6)",themeQScrollAreaColor:"#fff"},header:{themeHeaderColor:"#cbe1e5",themeHeaderTitleColor:"#fff",themeHeaderLogoBackgroundColor:"rgba(255, 255, 255, 0)",themeHeaderBackgroundColor:"rgba(29, 29, 29, 0)",themeHeaderContentBackgroundColor:"rgba(0, 68, 82, 0.6)"},commonPanel:{themeCommonPanelHeaderColor:"#fff",themeCommonPanelHeaderBackgroundColor:"rgba(0, 101, 122, 0.8)",themeCommonPanelContentColor:"#fff",themeCommonPanelContentBackgroundColor:"rgba(0, 68, 82, 0.6)",themeCommonPanelListColor:"#fff",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"svguse:#vc-icons-compass-outer",themeVcCompassOuterColor:"rgba(0, 68, 82)",themeVcCompassInnerIcon:"fa fa-compass",themeVcCompassInnerColor:"rgba(255, 255, 255, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcZoomControlBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcPrintBackgroundColor:"rgba(0, 68, 82, 0.6)",themeVcStatusBarBackgroundColor:"rgba(0, 68, 82, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(0, 68, 82, 0.8)"},pageLogin:{themePageLoginColor:"#fff",themePageLoginBackground:"rgba(29,29,29, 0.5)"},menu:{themeMenuColor:"#cbe1e5",themeMenuActiveColor:"#fff",themeMenuActiveBackgroundColor:"#F2C037"}},Fa={themeName:"element",global:{themeBGColor:"#314255",themeBGMaskColor:"rgba(0, 0, 0, 0)",themeColor:"#bfcbd9",themeColorAlpha:"rgba(70, 160, 252, 0.6)",themeColorActive:"#46a0fc",themeScrollTopBackgroundColor:"rgba(0, 0, 0, 0)",themeQInputColor:"#bfcbd9",themeQInputBorderColor:"#fff9",themeQCheckboxTruthyColor:"#46a0fc",themeQMenuColor:"#bfcbd9",themeQMenuBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQCardColor:"#bfcbd9",themeQCardHeaderBackgroundColor:"rgba(49, 66, 85, 0.5)",themeQCardBackgroundColor:"rgba(29, 29, 29, 0.6)",themeQScrollAreaColor:"#46a0fc"},header:{themeHeaderColor:"#bfcbd9",themeHeaderTitleColor:"#bfcbd9",themeHeaderLogoBackgroundColor:"#314255",themeHeaderBackgroundColor:"#202d3d",themeHeaderContentBackgroundColor:"#314255"},commonPanel:{themeCommonPanelHeaderColor:"#bfcbd9",themeCommonPanelHeaderBackgroundColor:"rgba(49, 66, 85, 0.8)",themeCommonPanelContentColor:"#bfcbd9",themeCommonPanelContentBackgroundColor:"rgba(32, 45, 61, 0.6)",themeCommonPanelListColor:"#bfcbd9",themeCommonPanelListBorderColor:"rgba(255, 255, 255, 0.278)"},navigation:{themeVcCompassOuterIcon:"fa fa-circle-o-notch",themeVcCompassOuterColor:"rgb(49, 66, 85)",themeVcCompassInnerIcon:"fa fa-circle",themeVcCompassInnerColor:"rgba(49, 66, 85, 0.7)",themeVcCompassInnerBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcZoomControlBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcPrintBackgroundColor:"rgba(49, 66, 85, 0.6)",themeVcStatusBarBackgroundColor:"rgba(49, 66, 85, 0.8)",themeVcDistanceLegendBackgroundColor:"rgba(49, 66, 85, 0.8)"},pageLogin:{themePageLoginColor:"#bfcbd9",themePageLoginBackground:"rgba(32, 45, 61, 0.5)"},menu:{themeMenuColor:"#bfcbd9",themeMenuActiveColor:"#bfcbd9",themeMenuActiveBackgroundColor:"#F2C037"}};let $a="";const Ha=y("theme",{state:()=>({list:we.exports.get(Pa,"theme.list",[]),activeName:we.exports.get(Pa,"theme.list[0].name","h2o"),themeConfig:{classic:za,element:Fa}}),getters:{activeSetting:e=>e.list.find((t=>t.name===e.activeName))},actions:{dom(){const e=`theme-${$a}`,t=`theme-${this.activeName}`;document.body.className.includes(e)?document.body.className=document.body.className.replace(e,t):document.body.className+=" "+t;const o=this.themeConfig[this.activeName];Object.keys(o.global).forEach((e=>{document.body.style.setProperty(`--${e}`,o.global[e])}))},async set(e){$a=this.activeName,this.activeName=this.list.find((t=>t.name===e))?e:this.list[0].name,this.dom();$t().set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})},async load(){$a=this.activeName;const e=$t(),t=e.get({dbName:"sys",path:"theme.activeName",defaultValue:this.list[0].name,user:!0});this.list.find((e=>e.name===t))?this.activeName=t:(this.activeName=this.list[0].name,e.set({dbName:"sys",path:"theme.activeName",value:this.activeName,user:!0})),this.dom()}}}),Ua=y("transition",{state:()=>({active:Pa.transition.active}),actions:{async set(e){this.active=e;$t().set({dbName:"sys",path:"transition.active",value:String(this.active),user:!0})},async load(){const e=$t();this.active=e.get({dbName:"sys",path:"transition.active",defaultValue:String(Pa.transition.active),user:!0})}}}),Ga=y("account",{state:()=>({}),getters:{},actions:{async login(e){const t=(await Rt.login(e)).data;$e("token",t.token),$e("uuid",t.id);Ht().set({...t}),this.load()},logout:({confirm:e=!1}={})=>new Promise(((t,o)=>{async function a(){Ue("token"),Ue("uuid");Ht().set({});Aa().clear();Ia().clear(),Et.push({name:"login"}),t(!0)}if(e){const e=Na();e.set(!0),be.create({title:"注销用户",message:"确定要注销当前用户吗？",cancel:!0}).onOk((()=>{e.set(!1),a()})).onCancel((()=>{e.set(!1),ge.create({message:"取消注销操作"}),t(!1)}))}else a()})),async load(){Ht().load();Ha().load();Ua().load();Ia().asideLoad()}}}),Qa=y("fullscreen",{state:()=>({active:!1}),getters:{},actions:{listen(){const e=this;de.isEnabled&&de.on("change",(()=>{de.isFullscreen||(e.active=!1)}))},toggle(){de.isFullscreen?(de.exit(),this.active=!1):(de.request(),this.active=!0)}}}),Wa=y("layout",{state:()=>({global:{header:!1,leftDrawerMini:!0,content:!1,footer:!1,layerManager:!1,navigation:!1,featureInfo:!1},dynamicRender:{datasource:{workBench:!1}}}),getters:{},actions:{toggleGlobalLayout(e){Object.keys(e).forEach((t=>{we.exports.isBoolean(e[t])&&(this.global[t]=e[t])}))},toggleDynamicRenderPageLayout(e){const t=(e,a)=>{Object.keys(e).forEach((r=>{o(e[r])?t(e[r],a[r]):we.exports.isBoolean(e[r])&&(a[r]=e[r])}))};t(e,this.dynamicRender)}}}),Ja=y("log",{state:()=>({log:[]}),getters:{length:e=>e.log.length,lengthError:e=>e.log.filter((e=>"danger"===e.type)).length},actions:{push({message:e,type:t="info",meta:o}){this.log.push({message:e,type:t,time:ue().format("YYYY-MM-DD HH:mm:ss"),meta:{uuid:He("uuid"),token:He("token"),url:we.exports.get(window,"location.href",""),...o}})},clean(){this.log=[]}}}),Ya={useAccountStore:e=>Ga(e),useDBStore:e=>$t(e),useFullscreenStore:e=>Qa(e),useGrayStore:e=>Na(e),useLayoutStore:e=>Wa(e),useLogStore:e=>Ja(e),useMenuStore:e=>Ia(e),usePermissionStore:e=>Aa(e),useSearchStore:e=>Ra(e),useThemeStore:e=>Ha(e),useTransitionStore:e=>Ua(e),useUserStore:e=>Ht(e)},Ka=y("layer",{state:()=>({baseLayers:[{name:"tianditu_img",text:"天地图影像",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"tianditu_vec",text:"天地图电子",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"baidu_img",text:"百度影像",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu",text:"百度电子",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vec",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_midnight",text:"百度地图_午夜蓝",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"midnight",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"baidu_dark",text:"百度地图_黑夜",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"dark",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_img",text:"高德影像",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"6",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"amap_vec",text:"高德地图",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"7",scl:"2",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_img",text:"腾讯影像",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"img",projectionTransforms:{form:"GC02",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_vec",text:"腾讯电子",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}},{name:"tencent_my",text:"腾讯电子_墨渊",component:"VcImageryProviderTencent",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"vector",projectionTransforms:{form:"BD09",to:"WGS84"},styleId:"4",minimumLevel:0,maximumLevel:17}},{name:"osm",text:"OSM",component:"VcImageryProviderOsm",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1},{name:"arcgis",text:"ArcGIS",component:"VcImageryProviderArcgis",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1}],overlayLayers:[{name:"tianditu_cva",text:"天地图注记",component:"VcImageryProviderTianditu",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"cva_c",token:"436ce7e50d27eede2f2929307e6b33c0",minimumLevel:0,maximumLevel:17}},{name:"amap_label",text:"高德注记",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{mapStyle:"8",ltype:"4",minimumLevel:0,maximumLevel:17}},{name:"amap_traffictile",text:"高德路况",component:"VcImageryProviderAmap",alpha:1,brightness:1,contrast:1,sortOrder:30,show:!1,props:{url:"/traffictile?v=1.0&x={x}&y={y}&z={z}&t=1",minimumLevel:0,maximumLevel:17}},{name:"baidu_traffic",text:"百度路况",component:"VcImageryProviderBaidu",alpha:1,brightness:1,contrast:1,sortOrder:20,show:!1,props:{mapStyle:"traffic",projectionTransforms:{form:"BD09",to:"WGS84"},minimumLevel:0,maximumLevel:17}}],vectorLayers:[{name:"admin",text:"行政区划",component:"VcDatasourceGeojson",props:{strokeWidth:5,stroke:"#ffc107",fill:"transparent",show:!1,data:"./datas/china.json"}},{name:"terrain",text:"全球地形",component:"VcTerrainProviderCesium",props:{show:!1}}]}),getters:{},actions:{toggle({names:e,show:t}){const o=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers];(e=Array.isArray(e)?e:[e]).forEach((e=>{var a;const r=we.exports.find(o,(t=>t.name===e));!we.exports.isUndefined(null==r?void 0:r.show)&&(r.show=t),!we.exports.isUndefined(null==(a=null==r?void 0:r.props)?void 0:a.show)&&(r.props.show=t)}))},loadDefaultLayers(e){const t=[...this.baseLayers,...this.overlayLayers,...this.vectorLayers].map((e=>e.name));this.toggle({names:t,show:!1});this.toggle({names:["tianditu_img","admin"],show:!0})}}}),Za=y("overlay",{state:()=>({mouseOverNameOpts:{position:[117.186419,45.66446,20],show:!1,text:"",pixelOffset:[0,0]}}),getters:{},actions:{setMouseOverlayLabel({position:e,show:t,text:o,pixelOffset:a}){this.mouseOverNameOpts.position=e,this.mouseOverNameOpts.show=t,this.mouseOverNameOpts.text=o,this.mouseOverNameOpts.pixelOffset=a},clearMouseOverlayLabel(){this.mouseOverNameOpts.position=void 0,this.mouseOverNameOpts.show=!1,this.mouseOverNameOpts.text=void 0}}}),Xa=y("render",{state:()=>({renderDatas:[],selectedRenderData:{model:void 0,renderingType:void 0,restoreHandler:void 0,feature:void 0,featureInfoListItems:[]}}),getters:{},actions:{addRenderDatas(e){(e=Array.isArray(e)?e:[e]).forEach((e=>{-1===we.exports.findIndex(this.renderDatas,(t=>t.id===e.id))?this.renderDatas.push(e):Xe(`添加渲染数据集失败，原因：id 为【${e.id} 】的数据已经存在。`,"渲染数据模型：",e)}))},removeRenderDataById(e){we.exports.remove(this.renderDatas,(t=>t.id===e))},removeRenderDataByType(e){we.exports.remove(this.renderDatas,(t=>t.type===e))},removeRenderDataByPage(e){we.exports.remove(this.renderDatas,(t=>t.page===e))},removeAllRenderData(){this.renderDatas.length=0},setSelectedRenderData(e){this.selectedRenderData.model=e.model,this.selectedRenderData.renderingType=e.renderingType,this.selectedRenderData.restoreHandler=e.restoreHandler,this.selectedRenderData.feature=e.feature,this.selectedRenderData.featureInfoListItems=e.featureInfoListItems},getRenderDataByDatasetId(e){return we.exports.find(this.renderDatas,(t=>t.id===e))}}}),er={useLayerStore:e=>Ka(e),useOverlayStore:e=>Za(e),useRenderStore:e=>Xa(e)},tr=me(),or={system:{...Ya},viewer:{...er}};const ar=pe(Ut({},[["render",function(e,t){const o=C("router-view");return k(),b(o)}]]));ar.use(Ce,{plugins:{Notify:ge,Dialog:be,LocalStorage:he},lang:ke}),ar.use(jt),ar.use(Fe),ar.use(tr),ar.use(Et),ar.mount("#app");
